<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Game - Test Runner</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #e0e0e0;
        }
        .container {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        h1 {
            color: #4CAF50;
            margin-top: 0;
        }
        h2 {
            color: #81C784;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        .button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: background 0.3s;
        }
        .button:hover {
            background: #45a049;
        }
        .button.secondary {
            background: #2196F3;
        }
        .button.secondary:hover {
            background: #1976D2;
        }
        .button.danger {
            background: #f44336;
        }
        .button.danger:hover {
            background: #d32f2f;
        }
        .output {
            background: #1a1a1a;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 15px;
            margin-top: 15px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .status.success {
            background: #4CAF50;
            color: white;
        }
        .status.error {
            background: #f44336;
            color: white;
        }
        .status.warning {
            background: #ff9800;
            color: white;
        }
        .info {
            background: #333;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        code {
            background: #1a1a1a;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Sales Game - Test Runner</h1>
        <p>Execute os testes de altern√¢ncia de turnos diretamente do navegador.</p>
        
        <div class="info">
            <strong>‚ö†Ô∏è Importante:</strong> Este arquivo deve ser aberto enquanto o jogo est√° rodando em outra aba.
            Os testes precisam do contexto do jogo carregado.
        </div>
    </div>

    <div class="container">
        <h2>üöÄ Execu√ß√£o R√°pida</h2>
        <button class="button" onclick="runAllTests()">Executar Todos os Testes</button>
        <button class="button secondary" onclick="runTurnTests()">Testes de Altern√¢ncia de Turnos</button>
        <button class="button secondary" onclick="checkStatus()">Verificar Status</button>
        <button class="button danger" onclick="clearOutput()">Limpar Sa√≠da</button>
    </div>

    <div class="container">
        <h2>üîÑ Testes Individuais</h2>
        <button class="button secondary" onclick="testBasic()">Altern√¢ncia B√°sica</button>
        <button class="button secondary" onclick="testBoardSpaces()">Verificar Casas</button>
        <button class="button secondary" onclick="testButton()">Teste do Bot√£o</button>
        <button class="button secondary" onclick="testModals()">Teste de Modais</button>
        <button class="button secondary" onclick="testBankrupt()">Jogadores Falidos</button>
        <button class="button secondary" onclick="testSync()">Sincroniza√ß√£o</button>
        <button class="button secondary" onclick="testTimeout()">Timeout de Seguran√ßa</button>
    </div>

    <div class="container">
        <h2>üìä Sa√≠da dos Testes</h2>
        <div id="output" class="output">Aguardando execu√ß√£o de testes...\n\nExecute um teste acima ou use o console do navegador:\n\n  runAllTests()\n  testTurnAlternation()\n  const turnTester = new TurnAlternationTester()</div>
    </div>

    <script>
        const output = document.getElementById('output');
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const prefix = type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è';
            output.textContent += `[${timestamp}] ${prefix} ${message}\n`;
            output.scrollTop = output.scrollHeight;
        }

        function clearOutput() {
            output.textContent = '';
            log('Sa√≠da limpa', 'success');
        }

        function checkStatus() {
            log('Verificando status do sistema de testes...', 'info');
            
            if (typeof window.runAllTests === 'function') {
                log('‚úÖ Sistema de testes carregado', 'success');
            } else {
                log('‚ùå Sistema de testes n√£o encontrado. Certifique-se de que o jogo est√° rodando em outra aba.', 'error');
                log('üí° Abra o jogo em http://localhost:5173 (ou a porta configurada) e recarregue esta p√°gina.', 'info');
            }
            
            if (typeof window.TurnAlternationTester !== 'undefined') {
                log('‚úÖ TurnAlternationTester dispon√≠vel', 'success');
            } else {
                log('‚ö†Ô∏è TurnAlternationTester n√£o encontrado', 'warning');
            }
        }

        async function runAllTests() {
            clearOutput();
            log('üöÄ Iniciando execu√ß√£o de todos os testes...', 'info');
            
            if (typeof window.runAllTests !== 'function') {
                log('‚ùå Sistema de testes n√£o carregado. Abra o jogo primeiro!', 'error');
                return;
            }
            
            try {
                await window.runAllTests();
                log('‚úÖ Todos os testes conclu√≠dos!', 'success');
            } catch (error) {
                log(`‚ùå Erro ao executar testes: ${error.message}`, 'error');
            }
        }

        async function runTurnTests() {
            clearOutput();
            log('üîÑ Iniciando testes de altern√¢ncia de turnos...', 'info');
            
            if (typeof window.TurnAlternationTester === 'undefined') {
                log('‚ùå TurnAlternationTester n√£o encontrado. Certifique-se de que o jogo est√° rodando.', 'error');
                return;
            }
            
            try {
                const tester = new window.TurnAlternationTester();
                const result = await tester.runAllTests();
                
                if (result.success) {
                    log(`‚úÖ Testes conclu√≠dos com sucesso!`, 'success');
                    log(`   - Total de testes: ${result.results?.length || 0}`, 'info');
                    log(`   - Erros: ${result.errors?.length || 0}`, result.errors?.length > 0 ? 'error' : 'info');
                    log(`   - Avisos: ${result.warnings?.length || 0}`, result.warnings?.length > 0 ? 'warning' : 'info');
                } else {
                    log(`‚ùå Testes falharam!`, 'error');
                    log(`   - Erros: ${result.errors?.length || 0}`, 'error');
                    result.errors?.forEach(err => {
                        log(`   - ${err.message}`, 'error');
                    });
                }
            } catch (error) {
                log(`‚ùå Erro ao executar testes: ${error.message}`, 'error');
            }
        }

        function testBasic() {
            clearOutput();
            log('üß™ Executando teste de altern√¢ncia b√°sica...', 'info');
            if (typeof window.TurnAlternationTester === 'undefined') {
                log('‚ùå TurnAlternationTester n√£o encontrado', 'error');
                return;
            }
            const tester = new window.TurnAlternationTester();
            tester.testBasicTurnAlternation();
            log('‚úÖ Teste conclu√≠do. Verifique o console para detalhes.', 'success');
        }

        function testBoardSpaces() {
            clearOutput();
            log('üß™ Executando verifica√ß√£o de todas as casas...', 'info');
            if (typeof window.TurnAlternationTester === 'undefined') {
                log('‚ùå TurnAlternationTester n√£o encontrado', 'error');
                return;
            }
            const tester = new window.TurnAlternationTester();
            tester.testAllBoardSpaces();
            log('‚úÖ Teste conclu√≠do. Verifique o console para detalhes.', 'success');
        }

        function testButton() {
            clearOutput();
            log('üß™ Executando teste do bot√£o...', 'info');
            if (typeof window.TurnAlternationTester === 'undefined') {
                log('‚ùå TurnAlternationTester n√£o encontrado', 'error');
                return;
            }
            const tester = new window.TurnAlternationTester();
            tester.testButtonNotLockedForBothPlayers();
            log('‚úÖ Teste conclu√≠do. Verifique o console para detalhes.', 'success');
        }

        function testModals() {
            clearOutput();
            log('üß™ Executando teste de modais...', 'info');
            if (typeof window.TurnAlternationTester === 'undefined') {
                log('‚ùå TurnAlternationTester n√£o encontrado', 'error');
                return;
            }
            const tester = new window.TurnAlternationTester();
            tester.testModalsDontBlockTurnIndefinitely();
            log('‚úÖ Teste conclu√≠do. Verifique o console para detalhes.', 'success');
        }

        function testBankrupt() {
            clearOutput();
            log('üß™ Executando teste de jogadores falidos...', 'info');
            if (typeof window.TurnAlternationTester === 'undefined') {
                log('‚ùå TurnAlternationTester n√£o encontrado', 'error');
                return;
            }
            const tester = new window.TurnAlternationTester();
            tester.testBankruptPlayersSkipped();
            log('‚úÖ Teste conclu√≠do. Verifique o console para detalhes.', 'success');
        }

        function testSync() {
            clearOutput();
            log('üß™ Executando teste de sincroniza√ß√£o...', 'info');
            if (typeof window.TurnAlternationTester === 'undefined') {
                log('‚ùå TurnAlternationTester n√£o encontrado', 'error');
                return;
            }
            const tester = new window.TurnAlternationTester();
            tester.testMultiplayerSync();
            log('‚úÖ Teste conclu√≠do. Verifique o console para detalhes.', 'success');
        }

        function testTimeout() {
            clearOutput();
            log('üß™ Executando teste de timeout...', 'info');
            if (typeof window.TurnAlternationTester === 'undefined') {
                log('‚ùå TurnAlternationTester n√£o encontrado', 'error');
                return;
            }
            const tester = new window.TurnAlternationTester();
            tester.testSafetyTimeout();
            log('‚úÖ Teste conclu√≠do. Verifique o console para detalhes.', 'success');
        }

        // Verificar status ao carregar
        window.addEventListener('load', () => {
            setTimeout(checkStatus, 1000);
        });
    </script>
</body>
</html>

