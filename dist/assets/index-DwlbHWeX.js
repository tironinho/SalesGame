(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Qt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Em(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function km(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var cf={exports:{}},Hi={},uf={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jo=Symbol.for("react.element"),jm=Symbol.for("react.portal"),Cm=Symbol.for("react.fragment"),Rm=Symbol.for("react.strict_mode"),Tm=Symbol.for("react.profiler"),Dm=Symbol.for("react.provider"),Nm=Symbol.for("react.context"),$m=Symbol.for("react.forward_ref"),Pm=Symbol.for("react.suspense"),Am=Symbol.for("react.memo"),Om=Symbol.for("react.lazy"),yu=Symbol.iterator;function Im(t){return t===null||typeof t!="object"?null:(t=yu&&t[yu]||t["@@iterator"],typeof t=="function"?t:null)}var df={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ff=Object.assign,hf={};function _s(t,e,n){this.props=t,this.context=e,this.refs=hf,this.updater=n||df}_s.prototype.isReactComponent={};_s.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_s.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pf(){}pf.prototype=_s.prototype;function lc(t,e,n){this.props=t,this.context=e,this.refs=hf,this.updater=n||df}var cc=lc.prototype=new pf;cc.constructor=lc;ff(cc,_s.prototype);cc.isPureReactComponent=!0;var vu=Array.isArray,mf=Object.prototype.hasOwnProperty,uc={current:null},gf={key:!0,ref:!0,__self:!0,__source:!0};function yf(t,e,n){var r,s={},o=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(o=""+e.key),e)mf.call(e,r)&&!gf.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:jo,type:t,key:o,ref:i,props:s,_owner:uc.current}}function Lm(t,e){return{$$typeof:jo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dc(t){return typeof t=="object"&&t!==null&&t.$$typeof===jo}function Mm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xu=/\/+/g;function ma(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Mm(""+t.key):e.toString(36)}function ai(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case jo:case jm:i=!0}}if(i)return i=t,s=s(i),t=r===""?"."+ma(i,0):r,vu(s)?(n="",t!=null&&(n=t.replace(xu,"$&/")+"/"),ai(s,e,n,"",function(u){return u})):s!=null&&(dc(s)&&(s=Lm(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(xu,"$&/")+"/")+t)),e.push(s)),1;if(i=0,r=r===""?".":r+":",vu(t))for(var l=0;l<t.length;l++){o=t[l];var c=r+ma(o,l);i+=ai(o,e,n,c,s)}else if(c=Im(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=r+ma(o,l++),i+=ai(o,e,n,c,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Oo(t,e,n){if(t==null)return t;var r=[],s=0;return ai(t,r,"","",function(o){return e.call(n,o,s++)}),r}function Bm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},li={transition:null},Um={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:li,ReactCurrentOwner:uc};function vf(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:Oo,forEach:function(t,e,n){Oo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Oo(t,function(){e++}),e},toArray:function(t){return Oo(t,function(e){return e})||[]},only:function(t){if(!dc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=_s;fe.Fragment=Cm;fe.Profiler=Tm;fe.PureComponent=lc;fe.StrictMode=Rm;fe.Suspense=Pm;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Um;fe.act=vf;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ff({},t.props),s=t.key,o=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,i=uc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)mf.call(e,c)&&!gf.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:jo,type:t.type,key:s,ref:o,props:r,_owner:i}};fe.createContext=function(t){return t={$$typeof:Nm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Dm,_context:t},t.Consumer=t};fe.createElement=yf;fe.createFactory=function(t){var e=yf.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:$m,render:t}};fe.isValidElement=dc;fe.lazy=function(t){return{$$typeof:Om,_payload:{_status:-1,_result:t},_init:Bm}};fe.memo=function(t,e){return{$$typeof:Am,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=li.transition;li.transition={};try{t()}finally{li.transition=e}};fe.unstable_act=vf;fe.useCallback=function(t,e){return xt.current.useCallback(t,e)};fe.useContext=function(t){return xt.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};fe.useEffect=function(t,e){return xt.current.useEffect(t,e)};fe.useId=function(){return xt.current.useId()};fe.useImperativeHandle=function(t,e,n){return xt.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return xt.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return xt.current.useReducer(t,e,n)};fe.useRef=function(t){return xt.current.useRef(t)};fe.useState=function(t){return xt.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return xt.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return xt.current.useTransition()};fe.version="18.3.1";uf.exports=fe;var E=uf.exports;const vn=Em(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm=E,Fm=Symbol.for("react.element"),Vm=Symbol.for("react.fragment"),Wm=Object.prototype.hasOwnProperty,qm=zm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hm={key:!0,ref:!0,__self:!0,__source:!0};function xf(t,e,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)Wm.call(e,r)&&!Hm.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Fm,type:t,key:o,ref:i,props:s,_owner:qm.current}}Hi.Fragment=Vm;Hi.jsx=xf;Hi.jsxs=xf;cf.exports=Hi;var a=cf.exports,el={},bf={exports:{}},zt={},wf={exports:{}},Sf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,V){var J=F.length;F.push(V);e:for(;0<J;){var re=J-1>>>1,Le=F[re];if(0<s(Le,V))F[re]=V,F[J]=Le,J=re;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var V=F[0],J=F.pop();if(J!==V){F[0]=J;e:for(var re=0,Le=F.length,Sn=Le>>>1;re<Sn;){var Vt=2*(re+1)-1,Me=F[Vt],H=Vt+1,Oe=F[H];if(0>s(Me,J))H<Le&&0>s(Oe,Me)?(F[re]=Oe,F[H]=J,re=H):(F[re]=Me,F[Vt]=J,re=Vt);else if(H<Le&&0>s(Oe,J))F[re]=Oe,F[H]=J,re=H;else break e}}return V}function s(F,V){var J=F.sortIndex-V.sortIndex;return J!==0?J:F.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,h=null,f=3,y=!1,x=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(F){for(var V=n(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=F)r(u),V.sortIndex=V.expirationTime,e(c,V);else break;V=n(u)}}function w(F){if(b=!1,g(F),!x)if(n(c)!==null)x=!0,hn(k);else{var V=n(u);V!==null&&Ye(w,V.startTime-F)}}function k(F,V){x=!1,b&&(b=!1,p(S),S=-1),y=!0;var J=f;try{for(g(V),h=n(c);h!==null&&(!(h.expirationTime>V)||F&&!D());){var re=h.callback;if(typeof re=="function"){h.callback=null,f=h.priorityLevel;var Le=re(h.expirationTime<=V);V=t.unstable_now(),typeof Le=="function"?h.callback=Le:h===n(c)&&r(c),g(V)}else r(c);h=n(c)}if(h!==null)var Sn=!0;else{var Vt=n(u);Vt!==null&&Ye(w,Vt.startTime-V),Sn=!1}return Sn}finally{h=null,f=J,y=!1}}var T=!1,$=null,S=-1,R=5,v=-1;function D(){return!(t.unstable_now()-v<R)}function P(){if($!==null){var F=t.unstable_now();v=F;var V=!0;try{V=$(!0,F)}finally{V?B():(T=!1,$=null)}}else T=!1}var B;if(typeof m=="function")B=function(){m(P)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,lt=be.port2;be.port1.onmessage=P,B=function(){lt.postMessage(null)}}else B=function(){_(P,0)};function hn(F){$=F,T||(T=!0,B())}function Ye(F,V){S=_(function(){F(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,hn(k))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var J=f;f=V;try{return F()}finally{f=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,V){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var J=f;f=F;try{return V()}finally{f=J}},t.unstable_scheduleCallback=function(F,V,J){var re=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?re+J:re):J=re,F){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=J+Le,F={id:d++,callback:V,priorityLevel:F,startTime:J,expirationTime:Le,sortIndex:-1},J>re?(F.sortIndex=J,e(u,F),n(c)===null&&F===n(u)&&(b?(p(S),S=-1):b=!0,Ye(w,J-re))):(F.sortIndex=Le,e(c,F),x||y||(x=!0,hn(k))),F},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(F){var V=f;return function(){var J=f;f=V;try{return F.apply(this,arguments)}finally{f=J}}}})(Sf);wf.exports=Sf;var Gm=wf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jm=E,Ut=Gm;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _f=new Set,io={};function Lr(t,e){ps(t,e),ps(t+"Capture",e)}function ps(t,e){for(io[t]=e,t=0;t<e.length;t++)_f.add(e[t])}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tl=Object.prototype.hasOwnProperty,Km=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bu={},wu={};function Ym(t){return tl.call(wu,t)?!0:tl.call(bu,t)?!1:Km.test(t)?wu[t]=!0:(bu[t]=!0,!1)}function Qm(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Xm(t,e,n,r){if(e===null||typeof e>"u"||Qm(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,s,o,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=i}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var fc=/[\-:]([a-z])/g;function hc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fc,hc);at[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fc,hc);at[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fc,hc);at[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function pc(t,e,n,r){var s=at.hasOwnProperty(e)?at[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Xm(e,n,s,r)&&(n=null),r||s===null?Ym(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bn=Jm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Io=Symbol.for("react.element"),Kr=Symbol.for("react.portal"),Yr=Symbol.for("react.fragment"),mc=Symbol.for("react.strict_mode"),nl=Symbol.for("react.profiler"),Ef=Symbol.for("react.provider"),kf=Symbol.for("react.context"),gc=Symbol.for("react.forward_ref"),rl=Symbol.for("react.suspense"),sl=Symbol.for("react.suspense_list"),yc=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),jf=Symbol.for("react.offscreen"),Su=Symbol.iterator;function As(t){return t===null||typeof t!="object"?null:(t=Su&&t[Su]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,ga;function Vs(t){if(ga===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ga=e&&e[1]||""}return`
`+ga+t}var ya=!1;function va(t,e){if(!t||ya)return"";ya=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,l=o.length-1;1<=i&&0<=l&&s[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==o[l]){var c=`
`+s[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{ya=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vs(t):""}function Zm(t){switch(t.tag){case 5:return Vs(t.type);case 16:return Vs("Lazy");case 13:return Vs("Suspense");case 19:return Vs("SuspenseList");case 0:case 2:case 15:return t=va(t.type,!1),t;case 11:return t=va(t.type.render,!1),t;case 1:return t=va(t.type,!0),t;default:return""}}function ol(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yr:return"Fragment";case Kr:return"Portal";case nl:return"Profiler";case mc:return"StrictMode";case rl:return"Suspense";case sl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kf:return(t.displayName||"Context")+".Consumer";case Ef:return(t._context.displayName||"Context")+".Provider";case gc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yc:return e=t.displayName||null,e!==null?e:ol(t.type)||"Memo";case Jn:e=t._payload,t=t._init;try{return ol(t(e))}catch{}}return null}function eg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ol(e);case 8:return e===mc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tg(t){var e=Cf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Lo(t){t._valueTracker||(t._valueTracker=tg(t))}function Rf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Cf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function il(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _u(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Tf(t,e){e=e.checked,e!=null&&pc(t,"checked",e,!1)}function al(t,e){Tf(t,e);var n=cr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ll(t,e.type,n):e.hasOwnProperty("defaultValue")&&ll(t,e.type,cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Eu(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ll(t,e,n){(e!=="number"||xi(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ws=Array.isArray;function as(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function cl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ku(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Ws(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cr(n)}}function Df(t,e){var n=cr(e.value),r=cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ju(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Nf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ul(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Nf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mo,$f=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mo=Mo||document.createElement("div"),Mo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ao(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Js={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ng=["Webkit","ms","Moz","O"];Object.keys(Js).forEach(function(t){ng.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Js[e]=Js[t]})});function Pf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Js.hasOwnProperty(t)&&Js[t]?(""+e).trim():e+"px"}function Af(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Pf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var rg=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dl(t,e){if(e){if(rg[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function fl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hl=null;function vc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pl=null,ls=null,cs=null;function Cu(t){if(t=To(t)){if(typeof pl!="function")throw Error(M(280));var e=t.stateNode;e&&(e=Qi(e),pl(t.stateNode,t.type,e))}}function Of(t){ls?cs?cs.push(t):cs=[t]:ls=t}function If(){if(ls){var t=ls,e=cs;if(cs=ls=null,Cu(t),e)for(t=0;t<e.length;t++)Cu(e[t])}}function Lf(t,e){return t(e)}function Mf(){}var xa=!1;function Bf(t,e,n){if(xa)return t(e,n);xa=!0;try{return Lf(t,e,n)}finally{xa=!1,(ls!==null||cs!==null)&&(Mf(),If())}}function lo(t,e){var n=t.stateNode;if(n===null)return null;var r=Qi(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var ml=!1;if(Pn)try{var Os={};Object.defineProperty(Os,"passive",{get:function(){ml=!0}}),window.addEventListener("test",Os,Os),window.removeEventListener("test",Os,Os)}catch{ml=!1}function sg(t,e,n,r,s,o,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Ks=!1,bi=null,wi=!1,gl=null,og={onError:function(t){Ks=!0,bi=t}};function ig(t,e,n,r,s,o,i,l,c){Ks=!1,bi=null,sg.apply(og,arguments)}function ag(t,e,n,r,s,o,i,l,c){if(ig.apply(this,arguments),Ks){if(Ks){var u=bi;Ks=!1,bi=null}else throw Error(M(198));wi||(wi=!0,gl=u)}}function Mr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Uf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ru(t){if(Mr(t)!==t)throw Error(M(188))}function lg(t){var e=t.alternate;if(!e){if(e=Mr(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Ru(s),t;if(o===r)return Ru(s),e;o=o.sibling}throw Error(M(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function zf(t){return t=lg(t),t!==null?Ff(t):null}function Ff(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ff(t);if(e!==null)return e;t=t.sibling}return null}var Vf=Ut.unstable_scheduleCallback,Tu=Ut.unstable_cancelCallback,cg=Ut.unstable_shouldYield,ug=Ut.unstable_requestPaint,He=Ut.unstable_now,dg=Ut.unstable_getCurrentPriorityLevel,xc=Ut.unstable_ImmediatePriority,Wf=Ut.unstable_UserBlockingPriority,Si=Ut.unstable_NormalPriority,fg=Ut.unstable_LowPriority,qf=Ut.unstable_IdlePriority,Gi=null,bn=null;function hg(t){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Gi,t,void 0,(t.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:gg,pg=Math.log,mg=Math.LN2;function gg(t){return t>>>=0,t===0?32:31-(pg(t)/mg|0)|0}var Bo=64,Uo=4194304;function qs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _i(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,i=n&268435455;if(i!==0){var l=i&~s;l!==0?r=qs(l):(o&=i,o!==0&&(r=qs(o)))}else i=n&~s,i!==0?r=qs(i):o!==0&&(r=qs(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-cn(e),s=1<<n,r|=t[n],e&=~s;return r}function yg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vg(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var i=31-cn(o),l=1<<i,c=s[i];c===-1?(!(l&n)||l&r)&&(s[i]=yg(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function yl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hf(){var t=Bo;return Bo<<=1,!(Bo&4194240)&&(Bo=64),t}function ba(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Co(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cn(e),t[e]=n}function xg(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-cn(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function bc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-cn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var je=0;function Gf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jf,wc,Kf,Yf,Qf,vl=!1,zo=[],tr=null,nr=null,rr=null,co=new Map,uo=new Map,Yn=[],bg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Du(t,e){switch(t){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":co.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uo.delete(e.pointerId)}}function Is(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=To(e),e!==null&&wc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function wg(t,e,n,r,s){switch(e){case"focusin":return tr=Is(tr,t,e,n,r,s),!0;case"dragenter":return nr=Is(nr,t,e,n,r,s),!0;case"mouseover":return rr=Is(rr,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return co.set(o,Is(co.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,uo.set(o,Is(uo.get(o)||null,t,e,n,r,s)),!0}return!1}function Xf(t){var e=Er(t.target);if(e!==null){var n=Mr(e);if(n!==null){if(e=n.tag,e===13){if(e=Uf(n),e!==null){t.blockedOn=e,Qf(t.priority,function(){Kf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ci(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hl=r,n.target.dispatchEvent(r),hl=null}else return e=To(n),e!==null&&wc(e),t.blockedOn=n,!1;e.shift()}return!0}function Nu(t,e,n){ci(t)&&n.delete(e)}function Sg(){vl=!1,tr!==null&&ci(tr)&&(tr=null),nr!==null&&ci(nr)&&(nr=null),rr!==null&&ci(rr)&&(rr=null),co.forEach(Nu),uo.forEach(Nu)}function Ls(t,e){t.blockedOn===e&&(t.blockedOn=null,vl||(vl=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,Sg)))}function fo(t){function e(s){return Ls(s,t)}if(0<zo.length){Ls(zo[0],t);for(var n=1;n<zo.length;n++){var r=zo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(tr!==null&&Ls(tr,t),nr!==null&&Ls(nr,t),rr!==null&&Ls(rr,t),co.forEach(e),uo.forEach(e),n=0;n<Yn.length;n++)r=Yn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yn.length&&(n=Yn[0],n.blockedOn===null);)Xf(n),n.blockedOn===null&&Yn.shift()}var us=Bn.ReactCurrentBatchConfig,Ei=!0;function _g(t,e,n,r){var s=je,o=us.transition;us.transition=null;try{je=1,Sc(t,e,n,r)}finally{je=s,us.transition=o}}function Eg(t,e,n,r){var s=je,o=us.transition;us.transition=null;try{je=4,Sc(t,e,n,r)}finally{je=s,us.transition=o}}function Sc(t,e,n,r){if(Ei){var s=xl(t,e,n,r);if(s===null)Da(t,e,r,ki,n),Du(t,r);else if(wg(s,t,e,n,r))r.stopPropagation();else if(Du(t,r),e&4&&-1<bg.indexOf(t)){for(;s!==null;){var o=To(s);if(o!==null&&Jf(o),o=xl(t,e,n,r),o===null&&Da(t,e,r,ki,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Da(t,e,r,null,n)}}var ki=null;function xl(t,e,n,r){if(ki=null,t=vc(r),t=Er(t),t!==null)if(e=Mr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Uf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ki=t,null}function Zf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dg()){case xc:return 1;case Wf:return 4;case Si:case fg:return 16;case qf:return 536870912;default:return 16}default:return 16}}var Zn=null,_c=null,ui=null;function eh(){if(ui)return ui;var t,e=_c,n=e.length,r,s="value"in Zn?Zn.value:Zn.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===s[o-r];r++);return ui=s.slice(t,1<r?1-r:void 0)}function di(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fo(){return!0}function $u(){return!1}function Ft(t){function e(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Fo:$u,this.isPropagationStopped=$u,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),e}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ec=Ft(Es),Ro=ze({},Es,{view:0,detail:0}),kg=Ft(Ro),wa,Sa,Ms,Ji=ze({},Ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ms&&(Ms&&t.type==="mousemove"?(wa=t.screenX-Ms.screenX,Sa=t.screenY-Ms.screenY):Sa=wa=0,Ms=t),wa)},movementY:function(t){return"movementY"in t?t.movementY:Sa}}),Pu=Ft(Ji),jg=ze({},Ji,{dataTransfer:0}),Cg=Ft(jg),Rg=ze({},Ro,{relatedTarget:0}),_a=Ft(Rg),Tg=ze({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),Dg=Ft(Tg),Ng=ze({},Es,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$g=Ft(Ng),Pg=ze({},Es,{data:0}),Au=Ft(Pg),Ag={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Og={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ig={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ig[t])?!!e[t]:!1}function kc(){return Lg}var Mg=ze({},Ro,{key:function(t){if(t.key){var e=Ag[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=di(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Og[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kc,charCode:function(t){return t.type==="keypress"?di(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?di(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bg=Ft(Mg),Ug=ze({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ou=Ft(Ug),zg=ze({},Ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kc}),Fg=Ft(zg),Vg=ze({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wg=Ft(Vg),qg=ze({},Ji,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hg=Ft(qg),Gg=[9,13,27,32],jc=Pn&&"CompositionEvent"in window,Ys=null;Pn&&"documentMode"in document&&(Ys=document.documentMode);var Jg=Pn&&"TextEvent"in window&&!Ys,th=Pn&&(!jc||Ys&&8<Ys&&11>=Ys),Iu=" ",Lu=!1;function nh(t,e){switch(t){case"keyup":return Gg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qr=!1;function Kg(t,e){switch(t){case"compositionend":return rh(e);case"keypress":return e.which!==32?null:(Lu=!0,Iu);case"textInput":return t=e.data,t===Iu&&Lu?null:t;default:return null}}function Yg(t,e){if(Qr)return t==="compositionend"||!jc&&nh(t,e)?(t=eh(),ui=_c=Zn=null,Qr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return th&&e.locale!=="ko"?null:e.data;default:return null}}var Qg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Qg[t.type]:e==="textarea"}function sh(t,e,n,r){Of(r),e=ji(e,"onChange"),0<e.length&&(n=new Ec("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qs=null,ho=null;function Xg(t){mh(t,0)}function Ki(t){var e=es(t);if(Rf(e))return t}function Zg(t,e){if(t==="change")return e}var oh=!1;if(Pn){var Ea;if(Pn){var ka="oninput"in document;if(!ka){var Bu=document.createElement("div");Bu.setAttribute("oninput","return;"),ka=typeof Bu.oninput=="function"}Ea=ka}else Ea=!1;oh=Ea&&(!document.documentMode||9<document.documentMode)}function Uu(){Qs&&(Qs.detachEvent("onpropertychange",ih),ho=Qs=null)}function ih(t){if(t.propertyName==="value"&&Ki(ho)){var e=[];sh(e,ho,t,vc(t)),Bf(Xg,e)}}function e0(t,e,n){t==="focusin"?(Uu(),Qs=e,ho=n,Qs.attachEvent("onpropertychange",ih)):t==="focusout"&&Uu()}function t0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ki(ho)}function n0(t,e){if(t==="click")return Ki(e)}function r0(t,e){if(t==="input"||t==="change")return Ki(e)}function s0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fn=typeof Object.is=="function"?Object.is:s0;function po(t,e){if(fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!tl.call(e,s)||!fn(t[s],e[s]))return!1}return!0}function zu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fu(t,e){var n=zu(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zu(n)}}function ah(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ah(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lh(){for(var t=window,e=xi();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xi(t.document)}return e}function Cc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function o0(t){var e=lh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ah(n.ownerDocument.documentElement,n)){if(r!==null&&Cc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=Fu(n,o);var i=Fu(n,r);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var i0=Pn&&"documentMode"in document&&11>=document.documentMode,Xr=null,bl=null,Xs=null,wl=!1;function Vu(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wl||Xr==null||Xr!==xi(r)||(r=Xr,"selectionStart"in r&&Cc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xs&&po(Xs,r)||(Xs=r,r=ji(bl,"onSelect"),0<r.length&&(e=new Ec("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xr)))}function Vo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zr={animationend:Vo("Animation","AnimationEnd"),animationiteration:Vo("Animation","AnimationIteration"),animationstart:Vo("Animation","AnimationStart"),transitionend:Vo("Transition","TransitionEnd")},ja={},ch={};Pn&&(ch=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function Yi(t){if(ja[t])return ja[t];if(!Zr[t])return t;var e=Zr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ch)return ja[t]=e[n];return t}var uh=Yi("animationend"),dh=Yi("animationiteration"),fh=Yi("animationstart"),hh=Yi("transitionend"),ph=new Map,Wu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dr(t,e){ph.set(t,e),Lr(e,[t])}for(var Ca=0;Ca<Wu.length;Ca++){var Ra=Wu[Ca],a0=Ra.toLowerCase(),l0=Ra[0].toUpperCase()+Ra.slice(1);dr(a0,"on"+l0)}dr(uh,"onAnimationEnd");dr(dh,"onAnimationIteration");dr(fh,"onAnimationStart");dr("dblclick","onDoubleClick");dr("focusin","onFocus");dr("focusout","onBlur");dr(hh,"onTransitionEnd");ps("onMouseEnter",["mouseout","mouseover"]);ps("onMouseLeave",["mouseout","mouseover"]);ps("onPointerEnter",["pointerout","pointerover"]);ps("onPointerLeave",["pointerout","pointerover"]);Lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hs));function qu(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ag(r,e,void 0,t),t.currentTarget=null}function mh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;qu(s,l,u),o=c}else for(i=0;i<r.length;i++){if(l=r[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;qu(s,l,u),o=c}}}if(wi)throw t=gl,wi=!1,gl=null,t}function Pe(t,e){var n=e[jl];n===void 0&&(n=e[jl]=new Set);var r=t+"__bubble";n.has(r)||(gh(e,t,2,!1),n.add(r))}function Ta(t,e,n){var r=0;e&&(r|=4),gh(n,t,r,e)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function mo(t){if(!t[Wo]){t[Wo]=!0,_f.forEach(function(n){n!=="selectionchange"&&(c0.has(n)||Ta(n,!1,t),Ta(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wo]||(e[Wo]=!0,Ta("selectionchange",!1,e))}}function gh(t,e,n,r){switch(Zf(e)){case 1:var s=_g;break;case 4:s=Eg;break;default:s=Sc}n=s.bind(null,e,n,t),s=void 0,!ml||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Da(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=Er(l),i===null)return;if(c=i.tag,c===5||c===6){r=o=i;continue e}l=l.parentNode}}r=r.return}Bf(function(){var u=o,d=vc(n),h=[];e:{var f=ph.get(t);if(f!==void 0){var y=Ec,x=t;switch(t){case"keypress":if(di(n)===0)break e;case"keydown":case"keyup":y=Bg;break;case"focusin":x="focus",y=_a;break;case"focusout":x="blur",y=_a;break;case"beforeblur":case"afterblur":y=_a;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Pu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Cg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Fg;break;case uh:case dh:case fh:y=Dg;break;case hh:y=Wg;break;case"scroll":y=kg;break;case"wheel":y=Hg;break;case"copy":case"cut":case"paste":y=$g;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Ou}var b=(e&4)!==0,_=!b&&t==="scroll",p=b?f!==null?f+"Capture":null:f;b=[];for(var m=u,g;m!==null;){g=m;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,p!==null&&(w=lo(m,p),w!=null&&b.push(go(m,w,g)))),_)break;m=m.return}0<b.length&&(f=new y(f,x,null,n,d),h.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==hl&&(x=n.relatedTarget||n.fromElement)&&(Er(x)||x[An]))break e;if((y||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=u,x=x?Er(x):null,x!==null&&(_=Mr(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=u),y!==x)){if(b=Pu,w="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(b=Ou,w="onPointerLeave",p="onPointerEnter",m="pointer"),_=y==null?f:es(y),g=x==null?f:es(x),f=new b(w,m+"leave",y,n,d),f.target=_,f.relatedTarget=g,w=null,Er(d)===u&&(b=new b(p,m+"enter",x,n,d),b.target=g,b.relatedTarget=_,w=b),_=w,y&&x)t:{for(b=y,p=x,m=0,g=b;g;g=Ur(g))m++;for(g=0,w=p;w;w=Ur(w))g++;for(;0<m-g;)b=Ur(b),m--;for(;0<g-m;)p=Ur(p),g--;for(;m--;){if(b===p||p!==null&&b===p.alternate)break t;b=Ur(b),p=Ur(p)}b=null}else b=null;y!==null&&Hu(h,f,y,b,!1),x!==null&&_!==null&&Hu(h,_,x,b,!0)}}e:{if(f=u?es(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var k=Zg;else if(Mu(f))if(oh)k=r0;else{k=t0;var T=e0}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=n0);if(k&&(k=k(t,u))){sh(h,k,n,d);break e}T&&T(t,f,u),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&ll(f,"number",f.value)}switch(T=u?es(u):window,t){case"focusin":(Mu(T)||T.contentEditable==="true")&&(Xr=T,bl=u,Xs=null);break;case"focusout":Xs=bl=Xr=null;break;case"mousedown":wl=!0;break;case"contextmenu":case"mouseup":case"dragend":wl=!1,Vu(h,n,d);break;case"selectionchange":if(i0)break;case"keydown":case"keyup":Vu(h,n,d)}var $;if(jc)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Qr?nh(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(th&&n.locale!=="ko"&&(Qr||S!=="onCompositionStart"?S==="onCompositionEnd"&&Qr&&($=eh()):(Zn=d,_c="value"in Zn?Zn.value:Zn.textContent,Qr=!0)),T=ji(u,S),0<T.length&&(S=new Au(S,t,null,n,d),h.push({event:S,listeners:T}),$?S.data=$:($=rh(n),$!==null&&(S.data=$)))),($=Jg?Kg(t,n):Yg(t,n))&&(u=ji(u,"onBeforeInput"),0<u.length&&(d=new Au("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=$))}mh(h,e)})}function go(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ji(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=lo(t,n),o!=null&&r.unshift(go(t,o,s)),o=lo(t,e),o!=null&&r.push(go(t,o,s))),t=t.return}return r}function Ur(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hu(t,e,n,r,s){for(var o=e._reactName,i=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=lo(n,o),c!=null&&i.unshift(go(n,c,l))):s||(c=lo(n,o),c!=null&&i.push(go(n,c,l)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var u0=/\r\n?/g,d0=/\u0000|\uFFFD/g;function Gu(t){return(typeof t=="string"?t:""+t).replace(u0,`
`).replace(d0,"")}function qo(t,e,n){if(e=Gu(e),Gu(t)!==e&&n)throw Error(M(425))}function Ci(){}var Sl=null,_l=null;function El(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kl=typeof setTimeout=="function"?setTimeout:void 0,f0=typeof clearTimeout=="function"?clearTimeout:void 0,Ju=typeof Promise=="function"?Promise:void 0,h0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ju<"u"?function(t){return Ju.resolve(null).then(t).catch(p0)}:kl;function p0(t){setTimeout(function(){throw t})}function Na(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),fo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);fo(e)}function sr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ku(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ks=Math.random().toString(36).slice(2),xn="__reactFiber$"+ks,yo="__reactProps$"+ks,An="__reactContainer$"+ks,jl="__reactEvents$"+ks,m0="__reactListeners$"+ks,g0="__reactHandles$"+ks;function Er(t){var e=t[xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[An]||n[xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ku(t);t!==null;){if(n=t[xn])return n;t=Ku(t)}return e}t=n,n=t.parentNode}return null}function To(t){return t=t[xn]||t[An],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function es(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function Qi(t){return t[yo]||null}var Cl=[],ts=-1;function fr(t){return{current:t}}function Ae(t){0>ts||(t.current=Cl[ts],Cl[ts]=null,ts--)}function $e(t,e){ts++,Cl[ts]=t.current,t.current=e}var ur={},ft=fr(ur),Tt=fr(!1),Tr=ur;function ms(t,e){var n=t.type.contextTypes;if(!n)return ur;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Dt(t){return t=t.childContextTypes,t!=null}function Ri(){Ae(Tt),Ae(ft)}function Yu(t,e,n){if(ft.current!==ur)throw Error(M(168));$e(ft,e),$e(Tt,n)}function yh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(M(108,eg(t)||"Unknown",s));return ze({},n,r)}function Ti(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ur,Tr=ft.current,$e(ft,t),$e(Tt,Tt.current),!0}function Qu(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=yh(t,e,Tr),r.__reactInternalMemoizedMergedChildContext=t,Ae(Tt),Ae(ft),$e(ft,t)):Ae(Tt),$e(Tt,n)}var Rn=null,Xi=!1,$a=!1;function vh(t){Rn===null?Rn=[t]:Rn.push(t)}function y0(t){Xi=!0,vh(t)}function hr(){if(!$a&&Rn!==null){$a=!0;var t=0,e=je;try{var n=Rn;for(je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rn=null,Xi=!1}catch(s){throw Rn!==null&&(Rn=Rn.slice(t+1)),Vf(xc,hr),s}finally{je=e,$a=!1}}return null}var ns=[],rs=0,Di=null,Ni=0,Ht=[],Gt=0,Dr=null,Tn=1,Dn="";function br(t,e){ns[rs++]=Ni,ns[rs++]=Di,Di=t,Ni=e}function xh(t,e,n){Ht[Gt++]=Tn,Ht[Gt++]=Dn,Ht[Gt++]=Dr,Dr=t;var r=Tn;t=Dn;var s=32-cn(r)-1;r&=~(1<<s),n+=1;var o=32-cn(e)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Tn=1<<32-cn(e)+s|n<<s|r,Dn=o+t}else Tn=1<<o|n<<s|r,Dn=t}function Rc(t){t.return!==null&&(br(t,1),xh(t,1,0))}function Tc(t){for(;t===Di;)Di=ns[--rs],ns[rs]=null,Ni=ns[--rs],ns[rs]=null;for(;t===Dr;)Dr=Ht[--Gt],Ht[Gt]=null,Dn=Ht[--Gt],Ht[Gt]=null,Tn=Ht[--Gt],Ht[Gt]=null}var Mt=null,Lt=null,Ie=!1,an=null;function bh(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Lt=sr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Dr!==null?{id:Tn,overflow:Dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,Lt=null,!0):!1;default:return!1}}function Rl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tl(t){if(Ie){var e=Lt;if(e){var n=e;if(!Xu(t,e)){if(Rl(t))throw Error(M(418));e=sr(n.nextSibling);var r=Mt;e&&Xu(t,e)?bh(r,n):(t.flags=t.flags&-4097|2,Ie=!1,Mt=t)}}else{if(Rl(t))throw Error(M(418));t.flags=t.flags&-4097|2,Ie=!1,Mt=t}}}function Zu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function Ho(t){if(t!==Mt)return!1;if(!Ie)return Zu(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!El(t.type,t.memoizedProps)),e&&(e=Lt)){if(Rl(t))throw wh(),Error(M(418));for(;e;)bh(t,e),e=sr(e.nextSibling)}if(Zu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=sr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Mt?sr(t.stateNode.nextSibling):null;return!0}function wh(){for(var t=Lt;t;)t=sr(t.nextSibling)}function gs(){Lt=Mt=null,Ie=!1}function Dc(t){an===null?an=[t]:an.push(t)}var v0=Bn.ReactCurrentBatchConfig;function Bs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(i){var l=s.refs;i===null?delete l[o]:l[o]=i},e._stringRef=o,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function Go(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ed(t){var e=t._init;return e(t._payload)}function Sh(t){function e(p,m){if(t){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=lr(p,m),p.index=0,p.sibling=null,p}function o(p,m,g){return p.index=g,t?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function i(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,m,g,w){return m===null||m.tag!==6?(m=Ba(g,p.mode,w),m.return=p,m):(m=s(m,g),m.return=p,m)}function c(p,m,g,w){var k=g.type;return k===Yr?d(p,m,g.props.children,w,g.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Jn&&ed(k)===m.type)?(w=s(m,g.props),w.ref=Bs(p,m,g),w.return=p,w):(w=vi(g.type,g.key,g.props,null,p.mode,w),w.ref=Bs(p,m,g),w.return=p,w)}function u(p,m,g,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=Ua(g,p.mode,w),m.return=p,m):(m=s(m,g.children||[]),m.return=p,m)}function d(p,m,g,w,k){return m===null||m.tag!==7?(m=Rr(g,p.mode,w,k),m.return=p,m):(m=s(m,g),m.return=p,m)}function h(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ba(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Io:return g=vi(m.type,m.key,m.props,null,p.mode,g),g.ref=Bs(p,null,m),g.return=p,g;case Kr:return m=Ua(m,p.mode,g),m.return=p,m;case Jn:var w=m._init;return h(p,w(m._payload),g)}if(Ws(m)||As(m))return m=Rr(m,p.mode,g,null),m.return=p,m;Go(p,m)}return null}function f(p,m,g,w){var k=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:l(p,m,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Io:return g.key===k?c(p,m,g,w):null;case Kr:return g.key===k?u(p,m,g,w):null;case Jn:return k=g._init,f(p,m,k(g._payload),w)}if(Ws(g)||As(g))return k!==null?null:d(p,m,g,w,null);Go(p,g)}return null}function y(p,m,g,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(g)||null,l(m,p,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Io:return p=p.get(w.key===null?g:w.key)||null,c(m,p,w,k);case Kr:return p=p.get(w.key===null?g:w.key)||null,u(m,p,w,k);case Jn:var T=w._init;return y(p,m,g,T(w._payload),k)}if(Ws(w)||As(w))return p=p.get(g)||null,d(m,p,w,k,null);Go(m,w)}return null}function x(p,m,g,w){for(var k=null,T=null,$=m,S=m=0,R=null;$!==null&&S<g.length;S++){$.index>S?(R=$,$=null):R=$.sibling;var v=f(p,$,g[S],w);if(v===null){$===null&&($=R);break}t&&$&&v.alternate===null&&e(p,$),m=o(v,m,S),T===null?k=v:T.sibling=v,T=v,$=R}if(S===g.length)return n(p,$),Ie&&br(p,S),k;if($===null){for(;S<g.length;S++)$=h(p,g[S],w),$!==null&&(m=o($,m,S),T===null?k=$:T.sibling=$,T=$);return Ie&&br(p,S),k}for($=r(p,$);S<g.length;S++)R=y($,p,S,g[S],w),R!==null&&(t&&R.alternate!==null&&$.delete(R.key===null?S:R.key),m=o(R,m,S),T===null?k=R:T.sibling=R,T=R);return t&&$.forEach(function(D){return e(p,D)}),Ie&&br(p,S),k}function b(p,m,g,w){var k=As(g);if(typeof k!="function")throw Error(M(150));if(g=k.call(g),g==null)throw Error(M(151));for(var T=k=null,$=m,S=m=0,R=null,v=g.next();$!==null&&!v.done;S++,v=g.next()){$.index>S?(R=$,$=null):R=$.sibling;var D=f(p,$,v.value,w);if(D===null){$===null&&($=R);break}t&&$&&D.alternate===null&&e(p,$),m=o(D,m,S),T===null?k=D:T.sibling=D,T=D,$=R}if(v.done)return n(p,$),Ie&&br(p,S),k;if($===null){for(;!v.done;S++,v=g.next())v=h(p,v.value,w),v!==null&&(m=o(v,m,S),T===null?k=v:T.sibling=v,T=v);return Ie&&br(p,S),k}for($=r(p,$);!v.done;S++,v=g.next())v=y($,p,S,v.value,w),v!==null&&(t&&v.alternate!==null&&$.delete(v.key===null?S:v.key),m=o(v,m,S),T===null?k=v:T.sibling=v,T=v);return t&&$.forEach(function(P){return e(p,P)}),Ie&&br(p,S),k}function _(p,m,g,w){if(typeof g=="object"&&g!==null&&g.type===Yr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Io:e:{for(var k=g.key,T=m;T!==null;){if(T.key===k){if(k=g.type,k===Yr){if(T.tag===7){n(p,T.sibling),m=s(T,g.props.children),m.return=p,p=m;break e}}else if(T.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Jn&&ed(k)===T.type){n(p,T.sibling),m=s(T,g.props),m.ref=Bs(p,T,g),m.return=p,p=m;break e}n(p,T);break}else e(p,T);T=T.sibling}g.type===Yr?(m=Rr(g.props.children,p.mode,w,g.key),m.return=p,p=m):(w=vi(g.type,g.key,g.props,null,p.mode,w),w.ref=Bs(p,m,g),w.return=p,p=w)}return i(p);case Kr:e:{for(T=g.key;m!==null;){if(m.key===T)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(p,m.sibling),m=s(m,g.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=Ua(g,p.mode,w),m.return=p,p=m}return i(p);case Jn:return T=g._init,_(p,m,T(g._payload),w)}if(Ws(g))return x(p,m,g,w);if(As(g))return b(p,m,g,w);Go(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(p,m.sibling),m=s(m,g),m.return=p,p=m):(n(p,m),m=Ba(g,p.mode,w),m.return=p,p=m),i(p)):n(p,m)}return _}var ys=Sh(!0),_h=Sh(!1),$i=fr(null),Pi=null,ss=null,Nc=null;function $c(){Nc=ss=Pi=null}function Pc(t){var e=$i.current;Ae($i),t._currentValue=e}function Dl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ds(t,e){Pi=t,Nc=ss=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function Xt(t){var e=t._currentValue;if(Nc!==t)if(t={context:t,memoizedValue:e,next:null},ss===null){if(Pi===null)throw Error(M(308));ss=t,Pi.dependencies={lanes:0,firstContext:t}}else ss=ss.next=t;return e}var kr=null;function Ac(t){kr===null?kr=[t]:kr.push(t)}function Eh(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ac(e)):(n.next=s.next,s.next=n),e.interleaved=n,On(t,r)}function On(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Kn=!1;function Oc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,On(t,n)}return s=r.interleaved,s===null?(e.next=e,Ac(r)):(e.next=s.next,s.next=e),r.interleaved=e,On(t,n)}function fi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bc(t,n)}}function td(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ai(t,e,n,r){var s=t.updateQueue;Kn=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?o=u:i.next=u,i=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var h=s.baseState;i=0,d=u=c=null,l=o;do{var f=l.lane,y=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,b=l;switch(f=e,y=n,b.tag){case 1:if(x=b.payload,typeof x=="function"){h=x.call(y,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,f=typeof x=="function"?x.call(y,h,f):x,f==null)break e;h=ze({},h,f);break e;case 2:Kn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else y={eventTime:y,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=y,c=h):d=d.next=y,i|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);$r|=i,t.lanes=i,t.memoizedState=h}}function nd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(M(191,s));s.call(r)}}}var Do={},wn=fr(Do),vo=fr(Do),xo=fr(Do);function jr(t){if(t===Do)throw Error(M(174));return t}function Ic(t,e){switch($e(xo,e),$e(vo,t),$e(wn,Do),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ul(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ul(e,t)}Ae(wn),$e(wn,e)}function vs(){Ae(wn),Ae(vo),Ae(xo)}function jh(t){jr(xo.current);var e=jr(wn.current),n=ul(e,t.type);e!==n&&($e(vo,t),$e(wn,n))}function Lc(t){vo.current===t&&(Ae(wn),Ae(vo))}var Be=fr(0);function Oi(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pa=[];function Mc(){for(var t=0;t<Pa.length;t++)Pa[t]._workInProgressVersionPrimary=null;Pa.length=0}var hi=Bn.ReactCurrentDispatcher,Aa=Bn.ReactCurrentBatchConfig,Nr=0,Ue=null,et=null,rt=null,Ii=!1,Zs=!1,bo=0,x0=0;function ct(){throw Error(M(321))}function Bc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fn(t[n],e[n]))return!1;return!0}function Uc(t,e,n,r,s,o){if(Nr=o,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hi.current=t===null||t.memoizedState===null?_0:E0,t=n(r,s),Zs){o=0;do{if(Zs=!1,bo=0,25<=o)throw Error(M(301));o+=1,rt=et=null,e.updateQueue=null,hi.current=k0,t=n(r,s)}while(Zs)}if(hi.current=Li,e=et!==null&&et.next!==null,Nr=0,rt=et=Ue=null,Ii=!1,e)throw Error(M(300));return t}function zc(){var t=bo!==0;return bo=0,t}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Ue.memoizedState=rt=t:rt=rt.next=t,rt}function Zt(){if(et===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=rt===null?Ue.memoizedState:rt.next;if(e!==null)rt=e,et=t;else{if(t===null)throw Error(M(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},rt===null?Ue.memoizedState=rt=t:rt=rt.next=t}return rt}function wo(t,e){return typeof e=="function"?e(t):e}function Oa(t){var e=Zt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=et,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var l=i=null,c=null,u=o;do{var d=u.lane;if((Nr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,i=r):c=c.next=h,Ue.lanes|=d,$r|=d}u=u.next}while(u!==null&&u!==o);c===null?i=r:c.next=l,fn(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Ue.lanes|=o,$r|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ia(t){var e=Zt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=t(o,i.action),i=i.next;while(i!==s);fn(o,e.memoizedState)||(Rt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Ch(){}function Rh(t,e){var n=Ue,r=Zt(),s=e(),o=!fn(r.memoizedState,s);if(o&&(r.memoizedState=s,Rt=!0),r=r.queue,Fc(Nh.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,So(9,Dh.bind(null,n,r,s,e),void 0,null),st===null)throw Error(M(349));Nr&30||Th(n,e,s)}return s}function Th(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Dh(t,e,n,r){e.value=n,e.getSnapshot=r,$h(e)&&Ph(t)}function Nh(t,e,n){return n(function(){$h(e)&&Ph(t)})}function $h(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fn(t,n)}catch{return!0}}function Ph(t){var e=On(t,1);e!==null&&un(e,t,1,-1)}function rd(t){var e=gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:t},e.queue=t,t=t.dispatch=S0.bind(null,Ue,t),[e.memoizedState,t]}function So(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ah(){return Zt().memoizedState}function pi(t,e,n,r){var s=gn();Ue.flags|=t,s.memoizedState=So(1|e,n,void 0,r===void 0?null:r)}function Zi(t,e,n,r){var s=Zt();r=r===void 0?null:r;var o=void 0;if(et!==null){var i=et.memoizedState;if(o=i.destroy,r!==null&&Bc(r,i.deps)){s.memoizedState=So(e,n,o,r);return}}Ue.flags|=t,s.memoizedState=So(1|e,n,o,r)}function sd(t,e){return pi(8390656,8,t,e)}function Fc(t,e){return Zi(2048,8,t,e)}function Oh(t,e){return Zi(4,2,t,e)}function Ih(t,e){return Zi(4,4,t,e)}function Lh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Mh(t,e,n){return n=n!=null?n.concat([t]):null,Zi(4,4,Lh.bind(null,e,t),n)}function Vc(){}function Bh(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Uh(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function zh(t,e,n){return Nr&21?(fn(n,e)||(n=Hf(),Ue.lanes|=n,$r|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function b0(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var r=Aa.transition;Aa.transition={};try{t(!1),e()}finally{je=n,Aa.transition=r}}function Fh(){return Zt().memoizedState}function w0(t,e,n){var r=ar(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vh(t))Wh(e,n);else if(n=Eh(t,e,n,r),n!==null){var s=vt();un(n,t,r,s),qh(n,e,r)}}function S0(t,e,n){var r=ar(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vh(t))Wh(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var i=e.lastRenderedState,l=o(i,n);if(s.hasEagerState=!0,s.eagerState=l,fn(l,i)){var c=e.interleaved;c===null?(s.next=s,Ac(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Eh(t,e,s,r),n!==null&&(s=vt(),un(n,t,r,s),qh(n,e,r))}}function Vh(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function Wh(t,e){Zs=Ii=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qh(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bc(t,n)}}var Li={readContext:Xt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},_0={readContext:Xt,useCallback:function(t,e){return gn().memoizedState=[t,e===void 0?null:e],t},useContext:Xt,useEffect:sd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pi(4194308,4,Lh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pi(4194308,4,t,e)},useInsertionEffect:function(t,e){return pi(4,2,t,e)},useMemo:function(t,e){var n=gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=w0.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=gn();return t={current:t},e.memoizedState=t},useState:rd,useDebugValue:Vc,useDeferredValue:function(t){return gn().memoizedState=t},useTransition:function(){var t=rd(!1),e=t[0];return t=b0.bind(null,t[1]),gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ue,s=gn();if(Ie){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),st===null)throw Error(M(349));Nr&30||Th(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,sd(Nh.bind(null,r,o,t),[t]),r.flags|=2048,So(9,Dh.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=gn(),e=st.identifierPrefix;if(Ie){var n=Dn,r=Tn;n=(r&~(1<<32-cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=bo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=x0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},E0={readContext:Xt,useCallback:Bh,useContext:Xt,useEffect:Fc,useImperativeHandle:Mh,useInsertionEffect:Oh,useLayoutEffect:Ih,useMemo:Uh,useReducer:Oa,useRef:Ah,useState:function(){return Oa(wo)},useDebugValue:Vc,useDeferredValue:function(t){var e=Zt();return zh(e,et.memoizedState,t)},useTransition:function(){var t=Oa(wo)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:Ch,useSyncExternalStore:Rh,useId:Fh,unstable_isNewReconciler:!1},k0={readContext:Xt,useCallback:Bh,useContext:Xt,useEffect:Fc,useImperativeHandle:Mh,useInsertionEffect:Oh,useLayoutEffect:Ih,useMemo:Uh,useReducer:Ia,useRef:Ah,useState:function(){return Ia(wo)},useDebugValue:Vc,useDeferredValue:function(t){var e=Zt();return et===null?e.memoizedState=t:zh(e,et.memoizedState,t)},useTransition:function(){var t=Ia(wo)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:Ch,useSyncExternalStore:Rh,useId:Fh,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ea={isMounted:function(t){return(t=t._reactInternals)?Mr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vt(),s=ar(t),o=$n(r,s);o.payload=e,n!=null&&(o.callback=n),e=or(t,o,s),e!==null&&(un(e,t,s,r),fi(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vt(),s=ar(t),o=$n(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=or(t,o,s),e!==null&&(un(e,t,s,r),fi(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vt(),r=ar(t),s=$n(n,r);s.tag=2,e!=null&&(s.callback=e),e=or(t,s,r),e!==null&&(un(e,t,r,n),fi(e,t,r))}};function od(t,e,n,r,s,o,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,i):e.prototype&&e.prototype.isPureReactComponent?!po(n,r)||!po(s,o):!0}function Hh(t,e,n){var r=!1,s=ur,o=e.contextType;return typeof o=="object"&&o!==null?o=Xt(o):(s=Dt(e)?Tr:ft.current,r=e.contextTypes,o=(r=r!=null)?ms(t,s):ur),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ea,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function id(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ea.enqueueReplaceState(e,e.state,null)}function $l(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Oc(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Xt(o):(o=Dt(e)?Tr:ft.current,s.context=ms(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Nl(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ea.enqueueReplaceState(s,s.state,null),Ai(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function xs(t,e){try{var n="",r=e;do n+=Zm(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function La(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Pl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var j0=typeof WeakMap=="function"?WeakMap:Map;function Gh(t,e,n){n=$n(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Bi||(Bi=!0,Vl=r),Pl(t,e)},n}function Jh(t,e,n){n=$n(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Pl(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Pl(t,e),typeof r!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function ad(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new j0;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=U0.bind(null,t,e,n),e.then(t,t))}function ld(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cd(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$n(-1,1),e.tag=2,or(n,e,1))),n.lanes|=1),t)}var C0=Bn.ReactCurrentOwner,Rt=!1;function mt(t,e,n,r){e.child=t===null?_h(e,null,n,r):ys(e,t.child,n,r)}function ud(t,e,n,r,s){n=n.render;var o=e.ref;return ds(e,s),r=Uc(t,e,n,r,o,s),n=zc(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,In(t,e,s)):(Ie&&n&&Rc(e),e.flags|=1,mt(t,e,r,s),e.child)}function dd(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!Qc(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Kh(t,e,o,r,s)):(t=vi(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:po,n(i,r)&&t.ref===e.ref)return In(t,e,s)}return e.flags|=1,t=lr(o,r),t.ref=e.ref,t.return=e,e.child=t}function Kh(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(po(o,r)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,In(t,e,s)}return Al(t,e,n,r,s)}function Yh(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(is,It),It|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(is,It),It|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,$e(is,It),It|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,$e(is,It),It|=r;return mt(t,e,s,n),e.child}function Qh(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Al(t,e,n,r,s){var o=Dt(n)?Tr:ft.current;return o=ms(e,o),ds(e,s),n=Uc(t,e,n,r,o,s),r=zc(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,In(t,e,s)):(Ie&&r&&Rc(e),e.flags|=1,mt(t,e,n,s),e.child)}function fd(t,e,n,r,s){if(Dt(n)){var o=!0;Ti(e)}else o=!1;if(ds(e,s),e.stateNode===null)mi(t,e),Hh(e,n,r),$l(e,n,r,s),r=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Xt(u):(u=Dt(n)?Tr:ft.current,u=ms(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||c!==u)&&id(e,i,r,u),Kn=!1;var f=e.memoizedState;i.state=f,Ai(e,r,i,s),c=e.memoizedState,l!==r||f!==c||Tt.current||Kn?(typeof d=="function"&&(Nl(e,n,d,r),c=e.memoizedState),(l=Kn||od(e,n,l,r,f,c,u))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),i.props=r,i.state=c,i.context=u,r=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,kh(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:rn(e.type,l),i.props=u,h=e.pendingProps,f=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Xt(c):(c=Dt(n)?Tr:ft.current,c=ms(e,c));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||f!==c)&&id(e,i,r,c),Kn=!1,f=e.memoizedState,i.state=f,Ai(e,r,i,s);var x=e.memoizedState;l!==h||f!==x||Tt.current||Kn?(typeof y=="function"&&(Nl(e,n,y,r),x=e.memoizedState),(u=Kn||od(e,n,u,r,f,x,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,x,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,x,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),i.props=r,i.state=x,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ol(t,e,n,r,o,s)}function Ol(t,e,n,r,s,o){Qh(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return s&&Qu(e,n,!1),In(t,e,o);r=e.stateNode,C0.current=e;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=ys(e,t.child,null,o),e.child=ys(e,null,l,o)):mt(t,e,l,o),e.memoizedState=r.state,s&&Qu(e,n,!0),e.child}function Xh(t){var e=t.stateNode;e.pendingContext?Yu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yu(t,e.context,!1),Ic(t,e.containerInfo)}function hd(t,e,n,r,s){return gs(),Dc(s),e.flags|=256,mt(t,e,n,r),e.child}var Il={dehydrated:null,treeContext:null,retryLane:0};function Ll(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zh(t,e,n){var r=e.pendingProps,s=Be.current,o=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$e(Be,s&1),t===null)return Tl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,o?(r=e.mode,o=e.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=ra(i,r,0,null),t=Rr(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Ll(n),e.memoizedState=Il,t):Wc(e,i));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return R0(t,e,i,r,l,s,n);if(o){o=r.fallback,i=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=lr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=lr(l,o):(o=Rr(o,i,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,i=t.child.memoizedState,i=i===null?Ll(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=t.childLanes&~n,e.memoizedState=Il,r}return o=t.child,t=o.sibling,r=lr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Wc(t,e){return e=ra({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jo(t,e,n,r){return r!==null&&Dc(r),ys(e,t.child,null,n),t=Wc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function R0(t,e,n,r,s,o,i){if(n)return e.flags&256?(e.flags&=-257,r=La(Error(M(422))),Jo(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=ra({mode:"visible",children:r.children},s,0,null),o=Rr(o,s,i,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&ys(e,t.child,null,i),e.child.memoizedState=Ll(i),e.memoizedState=Il,o);if(!(e.mode&1))return Jo(t,e,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(M(419)),r=La(o,r,void 0),Jo(t,e,i,r)}if(l=(i&t.childLanes)!==0,Rt||l){if(r=st,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,On(t,s),un(r,t,s,-1))}return Yc(),r=La(Error(M(421))),Jo(t,e,i,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=z0.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Lt=sr(s.nextSibling),Mt=e,Ie=!0,an=null,t!==null&&(Ht[Gt++]=Tn,Ht[Gt++]=Dn,Ht[Gt++]=Dr,Tn=t.id,Dn=t.overflow,Dr=e),e=Wc(e,r.children),e.flags|=4096,e)}function pd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Dl(t.return,e,n)}function Ma(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function ep(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(mt(t,e,r.children,n),r=Be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pd(t,n,e);else if(t.tag===19)pd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(Be,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Oi(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ma(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Oi(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ma(e,!0,n,null,o);break;case"together":Ma(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function In(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$r|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=lr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=lr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function T0(t,e,n){switch(e.tag){case 3:Xh(e),gs();break;case 5:jh(e);break;case 1:Dt(e.type)&&Ti(e);break;case 4:Ic(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;$e($i,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(Be,Be.current&1),e.flags|=128,null):n&e.child.childLanes?Zh(t,e,n):($e(Be,Be.current&1),t=In(t,e,n),t!==null?t.sibling:null);$e(Be,Be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ep(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(Be,Be.current),r)break;return null;case 22:case 23:return e.lanes=0,Yh(t,e,n)}return In(t,e,n)}var tp,Ml,np,rp;tp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ml=function(){};np=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,jr(wn.current);var o=null;switch(n){case"input":s=il(t,s),r=il(t,r),o=[];break;case"select":s=ze({},s,{value:void 0}),r=ze({},r,{value:void 0}),o=[];break;case"textarea":s=cl(t,s),r=cl(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ci)}dl(n,r);var i;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(io.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(io.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Pe("scroll",t),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};rp=function(t,e,n,r){n!==r&&(e.flags|=4)};function Us(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function D0(t,e,n){var r=e.pendingProps;switch(Tc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return Dt(e.type)&&Ri(),ut(e),null;case 3:return r=e.stateNode,vs(),Ae(Tt),Ae(ft),Mc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ho(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,an!==null&&(Hl(an),an=null))),Ml(t,e),ut(e),null;case 5:Lc(e);var s=jr(xo.current);if(n=e.type,t!==null&&e.stateNode!=null)np(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return ut(e),null}if(t=jr(wn.current),Ho(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[xn]=e,r[yo]=o,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(s=0;s<Hs.length;s++)Pe(Hs[s],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":_u(r,o),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Pe("invalid",r);break;case"textarea":ku(r,o),Pe("invalid",r)}dl(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&qo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&qo(r.textContent,l,t),s=["children",""+l]):io.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Pe("scroll",r)}switch(n){case"input":Lo(r),Eu(r,o,!0);break;case"textarea":Lo(r),ju(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ci)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Nf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[xn]=e,t[yo]=r,tp(t,e,!1,!1),e.stateNode=t;e:{switch(i=fl(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),s=r;break;case"iframe":case"object":case"embed":Pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Hs.length;s++)Pe(Hs[s],t);s=r;break;case"source":Pe("error",t),s=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),s=r;break;case"details":Pe("toggle",t),s=r;break;case"input":_u(t,r),s=il(t,r),Pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ze({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":ku(t,r),s=cl(t,r),Pe("invalid",t);break;default:s=r}dl(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?Af(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$f(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ao(t,c):typeof c=="number"&&ao(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(io.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Pe("scroll",t):c!=null&&pc(t,o,c,i))}switch(n){case"input":Lo(t),Eu(t,r,!1);break;case"textarea":Lo(t),ju(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?as(t,!!r.multiple,o,!1):r.defaultValue!=null&&as(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ci)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)rp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=jr(xo.current),jr(wn.current),Ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[xn]=e,(o=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:qo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qo(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=e,e.stateNode=r}return ut(e),null;case 13:if(Ae(Be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&Lt!==null&&e.mode&1&&!(e.flags&128))wh(),gs(),e.flags|=98560,o=!1;else if(o=Ho(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(M(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(M(317));o[xn]=e}else gs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),o=!1}else an!==null&&(Hl(an),an=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Be.current&1?tt===0&&(tt=3):Yc())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return vs(),Ml(t,e),t===null&&mo(e.stateNode.containerInfo),ut(e),null;case 10:return Pc(e.type._context),ut(e),null;case 17:return Dt(e.type)&&Ri(),ut(e),null;case 19:if(Ae(Be),o=e.memoizedState,o===null)return ut(e),null;if(r=(e.flags&128)!==0,i=o.rendering,i===null)if(r)Us(o,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Oi(t),i!==null){for(e.flags|=128,Us(o,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,t=i.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Be,Be.current&1|2),e.child}t=t.sibling}o.tail!==null&&He()>bs&&(e.flags|=128,r=!0,Us(o,!1),e.lanes=4194304)}else{if(!r)if(t=Oi(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Us(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Ie)return ut(e),null}else 2*He()-o.renderingStartTime>bs&&n!==1073741824&&(e.flags|=128,r=!0,Us(o,!1),e.lanes=4194304);o.isBackwards?(i.sibling=e.child,e.child=i):(n=o.last,n!==null?n.sibling=i:e.child=i,o.last=i)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=He(),e.sibling=null,n=Be.current,$e(Be,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return Kc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?It&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function N0(t,e){switch(Tc(e),e.tag){case 1:return Dt(e.type)&&Ri(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vs(),Ae(Tt),Ae(ft),Mc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lc(e),null;case 13:if(Ae(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));gs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Be),null;case 4:return vs(),null;case 10:return Pc(e.type._context),null;case 22:case 23:return Kc(),null;case 24:return null;default:return null}}var Ko=!1,dt=!1,$0=typeof WeakSet=="function"?WeakSet:Set,q=null;function os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(t,e,r)}else n.current=null}function Bl(t,e,n){try{n()}catch(r){We(t,e,r)}}var md=!1;function P0(t,e){if(Sl=Ei,t=lh(),Cc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var y;h!==n||s!==0&&h.nodeType!==3||(l=i+s),h!==o||r!==0&&h.nodeType!==3||(c=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(y=h.firstChild)!==null;)f=h,h=y;for(;;){if(h===t)break t;if(f===n&&++u===s&&(l=i),f===o&&++d===r&&(c=i),(y=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(_l={focusedElem:t,selectionRange:n},Ei=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,_=x.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?b:rn(e.type,b),_);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(w){We(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return x=md,md=!1,x}function eo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Bl(e,n,o)}s=s.next}while(s!==r)}}function ta(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ul(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function sp(t){var e=t.alternate;e!==null&&(t.alternate=null,sp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xn],delete e[yo],delete e[jl],delete e[m0],delete e[g0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function op(t){return t.tag===5||t.tag===3||t.tag===4}function gd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||op(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ci));else if(r!==4&&(t=t.child,t!==null))for(zl(t,e,n),t=t.sibling;t!==null;)zl(t,e,n),t=t.sibling}function Fl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Fl(t,e,n),t=t.sibling;t!==null;)Fl(t,e,n),t=t.sibling}var ot=null,sn=!1;function Wn(t,e,n){for(n=n.child;n!==null;)ip(t,e,n),n=n.sibling}function ip(t,e,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Gi,n)}catch{}switch(n.tag){case 5:dt||os(n,e);case 6:var r=ot,s=sn;ot=null,Wn(t,e,n),ot=r,sn=s,ot!==null&&(sn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(sn?(t=ot,n=n.stateNode,t.nodeType===8?Na(t.parentNode,n):t.nodeType===1&&Na(t,n),fo(t)):Na(ot,n.stateNode));break;case 4:r=ot,s=sn,ot=n.stateNode.containerInfo,sn=!0,Wn(t,e,n),ot=r,sn=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Bl(n,e,i),s=s.next}while(s!==r)}Wn(t,e,n);break;case 1:if(!dt&&(os(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){We(n,e,l)}Wn(t,e,n);break;case 21:Wn(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,Wn(t,e,n),dt=r):Wn(t,e,n);break;default:Wn(t,e,n)}}function yd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $0),e.forEach(function(r){var s=F0.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:ot=l.stateNode,sn=!1;break e;case 3:ot=l.stateNode.containerInfo,sn=!0;break e;case 4:ot=l.stateNode.containerInfo,sn=!0;break e}l=l.return}if(ot===null)throw Error(M(160));ip(o,i,s),ot=null,sn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){We(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ap(e,t),e=e.sibling}function ap(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),pn(t),r&4){try{eo(3,t,t.return),ta(3,t)}catch(b){We(t,t.return,b)}try{eo(5,t,t.return)}catch(b){We(t,t.return,b)}}break;case 1:tn(e,t),pn(t),r&512&&n!==null&&os(n,n.return);break;case 5:if(tn(e,t),pn(t),r&512&&n!==null&&os(n,n.return),t.flags&32){var s=t.stateNode;try{ao(s,"")}catch(b){We(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,i=n!==null?n.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Tf(s,o),fl(l,i);var u=fl(l,o);for(i=0;i<c.length;i+=2){var d=c[i],h=c[i+1];d==="style"?Af(s,h):d==="dangerouslySetInnerHTML"?$f(s,h):d==="children"?ao(s,h):pc(s,d,h,u)}switch(l){case"input":al(s,o);break;case"textarea":Df(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?as(s,!!o.multiple,y,!1):f!==!!o.multiple&&(o.defaultValue!=null?as(s,!!o.multiple,o.defaultValue,!0):as(s,!!o.multiple,o.multiple?[]:"",!1))}s[yo]=o}catch(b){We(t,t.return,b)}}break;case 6:if(tn(e,t),pn(t),r&4){if(t.stateNode===null)throw Error(M(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(b){We(t,t.return,b)}}break;case 3:if(tn(e,t),pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fo(e.containerInfo)}catch(b){We(t,t.return,b)}break;case 4:tn(e,t),pn(t);break;case 13:tn(e,t),pn(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Gc=He())),r&4&&yd(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(u=dt)||d,tn(e,t),dt=u):tn(e,t),pn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(q=t,d=t.child;d!==null;){for(h=q=d;q!==null;){switch(f=q,y=f.child,f.tag){case 0:case 11:case 14:case 15:eo(4,f,f.return);break;case 1:os(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(b){We(r,n,b)}}break;case 5:os(f,f.return);break;case 22:if(f.memoizedState!==null){xd(h);continue}}y!==null?(y.return=f,q=y):xd(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,c=h.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Pf("display",i))}catch(b){We(t,t.return,b)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(b){We(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:tn(e,t),pn(t),r&4&&yd(t);break;case 21:break;default:tn(e,t),pn(t)}}function pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(op(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ao(s,""),r.flags&=-33);var o=gd(t);Fl(t,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,l=gd(t);zl(t,l,i);break;default:throw Error(M(161))}}catch(c){We(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function A0(t,e,n){q=t,lp(t)}function lp(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||Ko;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||dt;l=Ko;var u=dt;if(Ko=i,(dt=c)&&!u)for(q=s;q!==null;)i=q,c=i.child,i.tag===22&&i.memoizedState!==null?bd(s):c!==null?(c.return=i,q=c):bd(s);for(;o!==null;)q=o,lp(o),o=o.sibling;q=s,Ko=l,dt=u}vd(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,q=o):vd(t)}}function vd(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||ta(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&nd(e,o,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nd(e,i,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&fo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}dt||e.flags&512&&Ul(e)}catch(f){We(e,e.return,f)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function xd(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function bd(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ta(4,e)}catch(c){We(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){We(e,s,c)}}var o=e.return;try{Ul(e)}catch(c){We(e,o,c)}break;case 5:var i=e.return;try{Ul(e)}catch(c){We(e,i,c)}}}catch(c){We(e,e.return,c)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var O0=Math.ceil,Mi=Bn.ReactCurrentDispatcher,qc=Bn.ReactCurrentOwner,Yt=Bn.ReactCurrentBatchConfig,ge=0,st=null,Ke=null,it=0,It=0,is=fr(0),tt=0,_o=null,$r=0,na=0,Hc=0,to=null,jt=null,Gc=0,bs=1/0,jn=null,Bi=!1,Vl=null,ir=null,Yo=!1,er=null,Ui=0,no=0,Wl=null,gi=-1,yi=0;function vt(){return ge&6?He():gi!==-1?gi:gi=He()}function ar(t){return t.mode&1?ge&2&&it!==0?it&-it:v0.transition!==null?(yi===0&&(yi=Hf()),yi):(t=je,t!==0||(t=window.event,t=t===void 0?16:Zf(t.type)),t):1}function un(t,e,n,r){if(50<no)throw no=0,Wl=null,Error(M(185));Co(t,n,r),(!(ge&2)||t!==st)&&(t===st&&(!(ge&2)&&(na|=n),tt===4&&Qn(t,it)),Nt(t,r),n===1&&ge===0&&!(e.mode&1)&&(bs=He()+500,Xi&&hr()))}function Nt(t,e){var n=t.callbackNode;vg(t,e);var r=_i(t,t===st?it:0);if(r===0)n!==null&&Tu(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Tu(n),e===1)t.tag===0?y0(wd.bind(null,t)):vh(wd.bind(null,t)),h0(function(){!(ge&6)&&hr()}),n=null;else{switch(Gf(r)){case 1:n=xc;break;case 4:n=Wf;break;case 16:n=Si;break;case 536870912:n=qf;break;default:n=Si}n=gp(n,cp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function cp(t,e){if(gi=-1,yi=0,ge&6)throw Error(M(327));var n=t.callbackNode;if(fs()&&t.callbackNode!==n)return null;var r=_i(t,t===st?it:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zi(t,r);else{e=r;var s=ge;ge|=2;var o=dp();(st!==t||it!==e)&&(jn=null,bs=He()+500,Cr(t,e));do try{M0();break}catch(l){up(t,l)}while(!0);$c(),Mi.current=o,ge=s,Ke!==null?e=0:(st=null,it=0,e=tt)}if(e!==0){if(e===2&&(s=yl(t),s!==0&&(r=s,e=ql(t,s))),e===1)throw n=_o,Cr(t,0),Qn(t,r),Nt(t,He()),n;if(e===6)Qn(t,r);else{if(s=t.current.alternate,!(r&30)&&!I0(s)&&(e=zi(t,r),e===2&&(o=yl(t),o!==0&&(r=o,e=ql(t,o))),e===1))throw n=_o,Cr(t,0),Qn(t,r),Nt(t,He()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:wr(t,jt,jn);break;case 3:if(Qn(t,r),(r&130023424)===r&&(e=Gc+500-He(),10<e)){if(_i(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){vt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=kl(wr.bind(null,t,jt,jn),e);break}wr(t,jt,jn);break;case 4:if(Qn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var i=31-cn(r);o=1<<i,i=e[i],i>s&&(s=i),r&=~o}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*O0(r/1960))-r,10<r){t.timeoutHandle=kl(wr.bind(null,t,jt,jn),r);break}wr(t,jt,jn);break;case 5:wr(t,jt,jn);break;default:throw Error(M(329))}}}return Nt(t,He()),t.callbackNode===n?cp.bind(null,t):null}function ql(t,e){var n=to;return t.current.memoizedState.isDehydrated&&(Cr(t,e).flags|=256),t=zi(t,e),t!==2&&(e=jt,jt=n,e!==null&&Hl(e)),t}function Hl(t){jt===null?jt=t:jt.push.apply(jt,t)}function I0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!fn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qn(t,e){for(e&=~Hc,e&=~na,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cn(e),r=1<<n;t[n]=-1,e&=~r}}function wd(t){if(ge&6)throw Error(M(327));fs();var e=_i(t,0);if(!(e&1))return Nt(t,He()),null;var n=zi(t,e);if(t.tag!==0&&n===2){var r=yl(t);r!==0&&(e=r,n=ql(t,r))}if(n===1)throw n=_o,Cr(t,0),Qn(t,e),Nt(t,He()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wr(t,jt,jn),Nt(t,He()),null}function Jc(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(bs=He()+500,Xi&&hr())}}function Pr(t){er!==null&&er.tag===0&&!(ge&6)&&fs();var e=ge;ge|=1;var n=Yt.transition,r=je;try{if(Yt.transition=null,je=1,t)return t()}finally{je=r,Yt.transition=n,ge=e,!(ge&6)&&hr()}}function Kc(){It=is.current,Ae(is)}function Cr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,f0(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(Tc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ri();break;case 3:vs(),Ae(Tt),Ae(ft),Mc();break;case 5:Lc(r);break;case 4:vs();break;case 13:Ae(Be);break;case 19:Ae(Be);break;case 10:Pc(r.type._context);break;case 22:case 23:Kc()}n=n.return}if(st=t,Ke=t=lr(t.current,null),it=It=e,tt=0,_o=null,Hc=na=$r=0,jt=to=null,kr!==null){for(e=0;e<kr.length;e++)if(n=kr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}kr=null}return t}function up(t,e){do{var n=Ke;try{if($c(),hi.current=Li,Ii){for(var r=Ue.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ii=!1}if(Nr=0,rt=et=Ue=null,Zs=!1,bo=0,qc.current=null,n===null||n.return===null){tt=1,_o=e,Ke=null;break}e:{var o=t,i=n.return,l=n,c=e;if(e=it,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=ld(i);if(y!==null){y.flags&=-257,cd(y,i,l,o,e),y.mode&1&&ad(o,u,e),e=y,c=u;var x=e.updateQueue;if(x===null){var b=new Set;b.add(c),e.updateQueue=b}else x.add(c);break e}else{if(!(e&1)){ad(o,u,e),Yc();break e}c=Error(M(426))}}else if(Ie&&l.mode&1){var _=ld(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),cd(_,i,l,o,e),Dc(xs(c,l));break e}}o=c=xs(c,l),tt!==4&&(tt=2),to===null?to=[o]:to.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var p=Gh(o,c,e);td(o,p);break e;case 1:l=c;var m=o.type,g=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ir===null||!ir.has(g)))){o.flags|=65536,e&=-e,o.lanes|=e;var w=Jh(o,l,e);td(o,w);break e}}o=o.return}while(o!==null)}hp(n)}catch(k){e=k,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function dp(){var t=Mi.current;return Mi.current=Li,t===null?Li:t}function Yc(){(tt===0||tt===3||tt===2)&&(tt=4),st===null||!($r&268435455)&&!(na&268435455)||Qn(st,it)}function zi(t,e){var n=ge;ge|=2;var r=dp();(st!==t||it!==e)&&(jn=null,Cr(t,e));do try{L0();break}catch(s){up(t,s)}while(!0);if($c(),ge=n,Mi.current=r,Ke!==null)throw Error(M(261));return st=null,it=0,tt}function L0(){for(;Ke!==null;)fp(Ke)}function M0(){for(;Ke!==null&&!cg();)fp(Ke)}function fp(t){var e=mp(t.alternate,t,It);t.memoizedProps=t.pendingProps,e===null?hp(t):Ke=e,qc.current=null}function hp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=N0(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Ke=null;return}}else if(n=D0(n,e,It),n!==null){Ke=n;return}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);tt===0&&(tt=5)}function wr(t,e,n){var r=je,s=Yt.transition;try{Yt.transition=null,je=1,B0(t,e,n,r)}finally{Yt.transition=s,je=r}return null}function B0(t,e,n,r){do fs();while(er!==null);if(ge&6)throw Error(M(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(xg(t,o),t===st&&(Ke=st=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yo||(Yo=!0,gp(Si,function(){return fs(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Yt.transition,Yt.transition=null;var i=je;je=1;var l=ge;ge|=4,qc.current=null,P0(t,n),ap(n,t),o0(_l),Ei=!!Sl,_l=Sl=null,t.current=n,A0(n),ug(),ge=l,je=i,Yt.transition=o}else t.current=n;if(Yo&&(Yo=!1,er=t,Ui=s),o=t.pendingLanes,o===0&&(ir=null),hg(n.stateNode),Nt(t,He()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Bi)throw Bi=!1,t=Vl,Vl=null,t;return Ui&1&&t.tag!==0&&fs(),o=t.pendingLanes,o&1?t===Wl?no++:(no=0,Wl=t):no=0,hr(),null}function fs(){if(er!==null){var t=Gf(Ui),e=Yt.transition,n=je;try{if(Yt.transition=null,je=16>t?16:t,er===null)var r=!1;else{if(t=er,er=null,Ui=0,ge&6)throw Error(M(331));var s=ge;for(ge|=4,q=t.current;q!==null;){var o=q,i=o.child;if(q.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(q=u;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:eo(8,d,o)}var h=d.child;if(h!==null)h.return=d,q=h;else for(;q!==null;){d=q;var f=d.sibling,y=d.return;if(sp(d),d===u){q=null;break}if(f!==null){f.return=y,q=f;break}q=y}}}var x=o.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var _=b.sibling;b.sibling=null,b=_}while(b!==null)}}q=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,q=i;else e:for(;q!==null;){if(o=q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:eo(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,q=p;break e}q=o.return}}var m=t.current;for(q=m;q!==null;){i=q;var g=i.child;if(i.subtreeFlags&2064&&g!==null)g.return=i,q=g;else e:for(i=m;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ta(9,l)}}catch(k){We(l,l.return,k)}if(l===i){q=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,q=w;break e}q=l.return}}if(ge=s,hr(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Gi,t)}catch{}r=!0}return r}finally{je=n,Yt.transition=e}}return!1}function Sd(t,e,n){e=xs(n,e),e=Gh(t,e,1),t=or(t,e,1),e=vt(),t!==null&&(Co(t,1,e),Nt(t,e))}function We(t,e,n){if(t.tag===3)Sd(t,t,n);else for(;e!==null;){if(e.tag===3){Sd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ir===null||!ir.has(r))){t=xs(n,t),t=Jh(e,t,1),e=or(e,t,1),t=vt(),e!==null&&(Co(e,1,t),Nt(e,t));break}}e=e.return}}function U0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(it&n)===n&&(tt===4||tt===3&&(it&130023424)===it&&500>He()-Gc?Cr(t,0):Hc|=n),Nt(t,e)}function pp(t,e){e===0&&(t.mode&1?(e=Uo,Uo<<=1,!(Uo&130023424)&&(Uo=4194304)):e=1);var n=vt();t=On(t,e),t!==null&&(Co(t,e,n),Nt(t,n))}function z0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pp(t,n)}function F0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),pp(t,n)}var mp;mp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tt.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,T0(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,Ie&&e.flags&1048576&&xh(e,Ni,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;mi(t,e),t=e.pendingProps;var s=ms(e,ft.current);ds(e,n),s=Uc(null,e,r,t,s,n);var o=zc();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(o=!0,Ti(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Oc(e),s.updater=ea,e.stateNode=s,s._reactInternals=e,$l(e,r,t,n),e=Ol(null,e,r,!0,o,n)):(e.tag=0,Ie&&o&&Rc(e),mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(mi(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=W0(r),t=rn(r,t),s){case 0:e=Al(null,e,r,t,n);break e;case 1:e=fd(null,e,r,t,n);break e;case 11:e=ud(null,e,r,t,n);break e;case 14:e=dd(null,e,r,rn(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),Al(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),fd(t,e,r,s,n);case 3:e:{if(Xh(e),t===null)throw Error(M(387));r=e.pendingProps,o=e.memoizedState,s=o.element,kh(t,e),Ai(e,r,null,n);var i=e.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=xs(Error(M(423)),e),e=hd(t,e,r,n,s);break e}else if(r!==s){s=xs(Error(M(424)),e),e=hd(t,e,r,n,s);break e}else for(Lt=sr(e.stateNode.containerInfo.firstChild),Mt=e,Ie=!0,an=null,n=_h(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gs(),r===s){e=In(t,e,n);break e}mt(t,e,r,n)}e=e.child}return e;case 5:return jh(e),t===null&&Tl(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,i=s.children,El(r,s)?i=null:o!==null&&El(r,o)&&(e.flags|=32),Qh(t,e),mt(t,e,i,n),e.child;case 6:return t===null&&Tl(e),null;case 13:return Zh(t,e,n);case 4:return Ic(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ys(e,null,r,n):mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),ud(t,e,r,s,n);case 7:return mt(t,e,e.pendingProps,n),e.child;case 8:return mt(t,e,e.pendingProps.children,n),e.child;case 12:return mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,i=s.value,$e($i,r._currentValue),r._currentValue=i,o!==null)if(fn(o.value,i)){if(o.children===s.children&&!Tt.current){e=In(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=$n(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Dl(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(o.tag===10)i=o.type===e.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(M(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Dl(i,n,e),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===e){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ds(e,n),s=Xt(s),r=r(s),e.flags|=1,mt(t,e,r,n),e.child;case 14:return r=e.type,s=rn(r,e.pendingProps),s=rn(r.type,s),dd(t,e,r,s,n);case 15:return Kh(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),mi(t,e),e.tag=1,Dt(r)?(t=!0,Ti(e)):t=!1,ds(e,n),Hh(e,r,s),$l(e,r,s,n),Ol(null,e,r,!0,t,n);case 19:return ep(t,e,n);case 22:return Yh(t,e,n)}throw Error(M(156,e.tag))};function gp(t,e){return Vf(t,e)}function V0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new V0(t,e,n,r)}function Qc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function W0(t){if(typeof t=="function")return Qc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gc)return 11;if(t===yc)return 14}return 2}function lr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vi(t,e,n,r,s,o){var i=2;if(r=t,typeof t=="function")Qc(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Yr:return Rr(n.children,s,o,e);case mc:i=8,s|=8;break;case nl:return t=Kt(12,n,e,s|2),t.elementType=nl,t.lanes=o,t;case rl:return t=Kt(13,n,e,s),t.elementType=rl,t.lanes=o,t;case sl:return t=Kt(19,n,e,s),t.elementType=sl,t.lanes=o,t;case jf:return ra(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ef:i=10;break e;case kf:i=9;break e;case gc:i=11;break e;case yc:i=14;break e;case Jn:i=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=Kt(i,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function Rr(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function ra(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=jf,t.lanes=n,t.stateNode={isHidden:!1},t}function Ba(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function Ua(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function q0(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ba(0),this.expirationTimes=ba(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ba(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Xc(t,e,n,r,s,o,i,l,c){return t=new q0(t,e,n,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Kt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oc(o),t}function H0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function yp(t){if(!t)return ur;t=t._reactInternals;e:{if(Mr(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(Dt(n))return yh(t,n,e)}return e}function vp(t,e,n,r,s,o,i,l,c){return t=Xc(n,r,!0,t,s,o,i,l,c),t.context=yp(null),n=t.current,r=vt(),s=ar(n),o=$n(r,s),o.callback=e??null,or(n,o,s),t.current.lanes=s,Co(t,s,r),Nt(t,r),t}function sa(t,e,n,r){var s=e.current,o=vt(),i=ar(s);return n=yp(n),e.context===null?e.context=n:e.pendingContext=n,e=$n(o,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=or(s,e,i),t!==null&&(un(t,s,i,o),fi(t,s,i)),i}function Fi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _d(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zc(t,e){_d(t,e),(t=t.alternate)&&_d(t,e)}function G0(){return null}var xp=typeof reportError=="function"?reportError:function(t){console.error(t)};function eu(t){this._internalRoot=t}oa.prototype.render=eu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));sa(t,e,null,null)};oa.prototype.unmount=eu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pr(function(){sa(null,t,null,null)}),e[An]=null}};function oa(t){this._internalRoot=t}oa.prototype.unstable_scheduleHydration=function(t){if(t){var e=Yf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yn.length&&e!==0&&e<Yn[n].priority;n++);Yn.splice(n,0,t),n===0&&Xf(t)}};function tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ia(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ed(){}function J0(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=Fi(i);o.call(u)}}var i=vp(e,r,t,0,null,!1,!1,"",Ed);return t._reactRootContainer=i,t[An]=i.current,mo(t.nodeType===8?t.parentNode:t),Pr(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Fi(c);l.call(u)}}var c=Xc(t,0,!1,null,null,!1,!1,"",Ed);return t._reactRootContainer=c,t[An]=c.current,mo(t.nodeType===8?t.parentNode:t),Pr(function(){sa(e,c,n,r)}),c}function aa(t,e,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var l=s;s=function(){var c=Fi(i);l.call(c)}}sa(e,i,t,s)}else i=J0(n,e,t,s,r);return Fi(i)}Jf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qs(e.pendingLanes);n!==0&&(bc(e,n|1),Nt(e,He()),!(ge&6)&&(bs=He()+500,hr()))}break;case 13:Pr(function(){var r=On(t,1);if(r!==null){var s=vt();un(r,t,1,s)}}),Zc(t,1)}};wc=function(t){if(t.tag===13){var e=On(t,134217728);if(e!==null){var n=vt();un(e,t,134217728,n)}Zc(t,134217728)}};Kf=function(t){if(t.tag===13){var e=ar(t),n=On(t,e);if(n!==null){var r=vt();un(n,t,e,r)}Zc(t,e)}};Yf=function(){return je};Qf=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};pl=function(t,e,n){switch(e){case"input":if(al(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Qi(r);if(!s)throw Error(M(90));Rf(r),al(r,s)}}}break;case"textarea":Df(t,n);break;case"select":e=n.value,e!=null&&as(t,!!n.multiple,e,!1)}};Lf=Jc;Mf=Pr;var K0={usingClientEntryPoint:!1,Events:[To,es,Qi,Of,If,Jc]},zs={findFiberByHostInstance:Er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y0={bundleType:zs.bundleType,version:zs.version,rendererPackageName:zs.rendererPackageName,rendererConfig:zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zf(t),t===null?null:t.stateNode},findFiberByHostInstance:zs.findFiberByHostInstance||G0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qo.isDisabled&&Qo.supportsFiber)try{Gi=Qo.inject(Y0),bn=Qo}catch{}}zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K0;zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tu(e))throw Error(M(200));return H0(t,e,null,n)};zt.createRoot=function(t,e){if(!tu(t))throw Error(M(299));var n=!1,r="",s=xp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Xc(t,1,!1,null,null,n,!1,r,s),t[An]=e.current,mo(t.nodeType===8?t.parentNode:t),new eu(e)};zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=zf(e),t=t===null?null:t.stateNode,t};zt.flushSync=function(t){return Pr(t)};zt.hydrate=function(t,e,n){if(!ia(e))throw Error(M(200));return aa(null,t,e,!0,n)};zt.hydrateRoot=function(t,e,n){if(!tu(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=xp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=vp(e,null,t,1,n??null,s,!1,o,i),t[An]=e.current,mo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new oa(e)};zt.render=function(t,e,n){if(!ia(e))throw Error(M(200));return aa(null,t,e,!1,n)};zt.unmountComponentAtNode=function(t){if(!ia(t))throw Error(M(40));return t._reactRootContainer?(Pr(function(){aa(null,null,t,!1,function(){t._reactRootContainer=null,t[An]=null})}),!0):!1};zt.unstable_batchedUpdates=Jc;zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ia(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return aa(t,e,n,!1,r)};zt.version="18.3.1-next-f1338f8080-20240426";function bp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bp)}catch(t){console.error(t)}}bp(),bf.exports=zt;var Q0=bf.exports,kd=Q0;el.createRoot=kd.createRoot,el.hydrateRoot=kd.hydrateRoot;const X0="modulepreload",Z0=function(t){return"/"+t},jd={},No=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Z0(c),c in jd)return;jd[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":X0,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,y)=>{h.addEventListener("load",f),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},ey=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>No(async()=>{const{default:r}=await Promise.resolve().then(()=>js);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class nu extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class ty extends nu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Cd extends nu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Rd extends nu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Gl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Gl||(Gl={}));var ny=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class ry{constructor(e,{headers:n={},customFetch:r,region:s=Gl.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=ey(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return ny(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const h=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(b=>{throw new ty(b)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Cd(h);if(!h.ok)throw new Rd(h);let y=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return y==="application/json"?x=yield h.json():y==="application/octet-stream"?x=yield h.blob():y==="text/event-stream"?x=h:y==="multipart/form-data"?x=yield h.formData():x=yield h.text(),{data:x,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof Rd||s instanceof Cd?s.context:void 0}}})}}var Ct={},ru={},la={},$o={},ca={},ua={},sy=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ws=sy();const oy=ws.fetch,wp=ws.fetch.bind(ws),Sp=ws.Headers,iy=ws.Request,ay=ws.Response,js=Object.freeze(Object.defineProperty({__proto__:null,Headers:Sp,Request:iy,Response:ay,default:wp,fetch:oy},Symbol.toStringTag,{value:"Module"})),ly=km(js);var da={};Object.defineProperty(da,"__esModule",{value:!0});let cy=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};da.default=cy;var _p=Qt&&Qt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ua,"__esModule",{value:!0});const uy=_p(ly),dy=_p(da);let fy=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=uy.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,c,u;let d=null,h=null,f=null,y=o.status,x=o.statusText;if(o.ok){if(this.method!=="HEAD"){const m=await o.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?h=m:h=JSON.parse(m))}const _=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),p=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");_&&p&&p.length>1&&(f=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,y=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const _=await o.text();try{d=JSON.parse(_),Array.isArray(d)&&o.status===404&&(h=[],d=null,y=200,x="OK")}catch{o.status===404&&_===""?(y=204,x="No Content"):d={message:_}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,y=200,x="OK"),d&&this.shouldThrowOnError)throw new dy.default(d)}return{error:d,data:h,count:f,status:y,statusText:x}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,l,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};ua.default=fy;var hy=Qt&&Qt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ca,"__esModule",{value:!0});const py=hy(ua);let my=class extends py.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var l;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};ca.default=my;var gy=Qt&&Qt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($o,"__esModule",{value:!0});const yy=gy(ca);let vy=class extends yy.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};$o.default=vy;var xy=Qt&&Qt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(la,"__esModule",{value:!0});const Fs=xy($o);let by=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let o=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new Fs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const o="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Fs.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:o=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Fs.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Fs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Fs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};la.default=by;var Ep=Qt&&Qt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ru,"__esModule",{value:!0});const wy=Ep(la),Sy=Ep($o);let _y=class kp{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new wy.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new kp(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:o}={}){var i;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=n);const d=new Headers(this.headers);return o&&d.set("Prefer",`count=${o}`),new Sy.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};ru.default=_y;var Cs=Qt&&Qt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.PostgrestError=Ct.PostgrestBuilder=Ct.PostgrestTransformBuilder=Ct.PostgrestFilterBuilder=Ct.PostgrestQueryBuilder=Ct.PostgrestClient=void 0;const jp=Cs(ru);Ct.PostgrestClient=jp.default;const Cp=Cs(la);Ct.PostgrestQueryBuilder=Cp.default;const Rp=Cs($o);Ct.PostgrestFilterBuilder=Rp.default;const Tp=Cs(ca);Ct.PostgrestTransformBuilder=Tp.default;const Dp=Cs(ua);Ct.PostgrestBuilder=Dp.default;const Np=Cs(da);Ct.PostgrestError=Np.default;var Ey=Ct.default={PostgrestClient:jp.default,PostgrestQueryBuilder:Cp.default,PostgrestFilterBuilder:Rp.default,PostgrestTransformBuilder:Tp.default,PostgrestBuilder:Dp.default,PostgrestError:Np.default};const{PostgrestClient:ky,PostgrestQueryBuilder:zb,PostgrestFilterBuilder:Fb,PostgrestTransformBuilder:Vb,PostgrestBuilder:Wb,PostgrestError:qb}=Ey;class jy{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Cy="2.15.5",Ry=`realtime-js/${Cy}`,Ty="1.0.0",Jl=1e4,Dy=1e3,Ny=100;var ro;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ro||(ro={}));var Xe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Xe||(Xe={}));var on;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(on||(on={}));var Kl;(function(t){t.websocket="websocket"})(Kl||(Kl={}));var _r;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(_r||(_r={}));class $y{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),o=n.getUint8(2);let i=this.HEADER_LENGTH+2;const l=r.decode(e.slice(i,i+s));i=i+s;const c=r.decode(e.slice(i,i+o));i=i+o;const u=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class $p{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var De;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(De||(De={}));const Td=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,i)=>(o[i]=Py(i,t,e,s),o),{})},Py=(t,e,n,r)=>{const s=e.find(l=>l.name===t),o=s==null?void 0:s.type,i=n[t];return o&&!r.includes(o)?Pp(o,i):Yl(i)},Pp=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Ly(e,n)}switch(t){case De.bool:return Ay(e);case De.float4:case De.float8:case De.int2:case De.int4:case De.int8:case De.numeric:case De.oid:return Oy(e);case De.json:case De.jsonb:return Iy(e);case De.timestamp:return My(e);case De.abstime:case De.date:case De.daterange:case De.int4range:case De.int8range:case De.money:case De.reltime:case De.text:case De.time:case De.timestamptz:case De.timetz:case De.tsrange:case De.tstzrange:return Yl(e);default:return Yl(e)}},Yl=t=>t,Ay=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Oy=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Iy=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Ly=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const i=t.slice(1,n);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>Pp(e,l))}return t},My=t=>typeof t=="string"?t.replace(" ","T"):t,Ap=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class za{constructor(e,n,r={},s=Jl){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Dd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Dd||(Dd={}));class so{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=so.syncState(this.state,s,o,i),this.pendingDiffs.forEach(c=>{this.state=so.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=so.syncDiff(this.state,s,o,i),l())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const o=this.cloneDeep(e),i=this.transformState(n),l={},c={};return this.map(o,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const h=o[u];if(h){const f=d.map(_=>_.presence_ref),y=h.map(_=>_.presence_ref),x=d.filter(_=>y.indexOf(_.presence_ref)<0),b=h.filter(_=>f.indexOf(_.presence_ref)<0);x.length>0&&(l[u]=x),b.length>0&&(c[u]=b)}else l[u]=d}),this.syncDiff(o,{joins:l,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:o,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(y=>y.presence_ref),f=d.filter(y=>h.indexOf(y.presence_ref)<0);e[l].unshift(...f)}r(l,d,c)}),this.map(i,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Nd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Nd||(Nd={}));var oo;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(oo||(oo={}));var Cn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Cn||(Cn={}));class su{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new za(this,on.join,this.params,this.timeout),this.rejoinTimer=new $p(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(on.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new so(this),this.broadcastEndpointURL=Ap(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Xe.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[oo.PRESENCE]&&this.bindings[oo.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(Cn.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(Cn.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var x;if(this.socket.setAuth(),y===void 0){e==null||e(Cn.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,_=(x=b==null?void 0:b.length)!==null&&x!==void 0?x:0,p=[];for(let m=0;m<_;m++){const g=b[m],{filter:{event:w,schema:k,table:T,filter:$}}=g,S=y&&y[m];if(S&&S.event===w&&S.schema===k&&S.table===T&&S.filter===$)p.push(Object.assign(Object.assign({},g),{id:S.id}));else{this.unsubscribe(),this.state=Xe.errored,e==null||e(Cn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Cn.SUBSCRIBED);return}}).receive("error",y=>{this.state=Xe.errored,e==null||e(Cn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Cn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Xe.joined&&e===oo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Xe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(on.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new za(this,on.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xe.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),i}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new za(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Ny){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,o;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=on;if(r&&[l,c,u,d].indexOf(i)>=0&&r!==this._joinRef())return;let f=this._onMessage(i,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var x,b,_;return((x=y.filter)===null||x===void 0?void 0:x.event)==="*"||((_=(b=y.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===i}).map(y=>y.callback(f,r)):(o=this.bindings[i])===null||o===void 0||o.filter(y=>{var x,b,_,p,m,g;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in y){const w=y.id,k=(x=y.filter)===null||x===void 0?void 0:x.event;return w&&((b=n.ids)===null||b===void 0?void 0:b.includes(w))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const w=(m=(p=y==null?void 0:y.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return w==="*"||w===((g=n==null?void 0:n.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===i}).map(y=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:b,table:_,commit_timestamp:p,type:m,errors:g}=x;f=Object.assign(Object.assign({},{schema:b,table:_,commit_timestamp:p,eventType:m,new:{},old:{},errors:g}),this._getPayloadRecords(x))}y.callback(f,r)})}_isClosed(){return this.state===Xe.closed}_isJoined(){return this.state===Xe.joined}_isJoining(){return this.state===Xe.joining}_isLeaving(){return this.state===Xe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&su.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(on.close,{},e)}_onError(e){this._on(on.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Td(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Td(e.columns,e.old_record)),n}}const Fa=()=>{},Xo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},By=[1e3,2e3,5e3,1e4],Uy=1e4,zy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Fy{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jl,this.transport=null,this.heartbeatIntervalMs=Xo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fa,this.ref=0,this.reconnectTimer=null,this.logger=Fa,this.conn=null,this.sendBuffer=[],this.serializer=new $y,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...i)=>No(async()=>{const{default:l}=await Promise.resolve().then(()=>js);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Kl.websocket}`,this.httpEndpoint=Ap(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=jy.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ty}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ro.connecting:return _r.Connecting;case ro.open:return _r.Open;case ro.closing:return _r.Closing;default:return _r.Closed}}isConnected(){return this.connectionState()===_r.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new su(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:s,ref:o}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Dy,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Xo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:o,ref:i}=n,l=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,o,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(on.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([zy],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Ry};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(on.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new $p(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,o,i,l,c,u,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Jl,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Xo.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Fa,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>By[h-1]||Uy,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class ou extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ze(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Vy extends ou{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ql extends ou{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Wy=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Op=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>No(async()=>{const{default:r}=await Promise.resolve().then(()=>js);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},qy=()=>Wy(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield No(()=>Promise.resolve().then(()=>js),void 0)).Response:Response}),Xl=t=>{if(Array.isArray(t))return t.map(n=>Xl(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=Xl(r)}),e},Hy=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Br=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Va=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Gy=(t,e,n)=>Br(void 0,void 0,void 0,function*(){const r=yield qy();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const o=t.status||500,i=(s==null?void 0:s.statusCode)||o+"";e(new Vy(Va(s),o,i))}).catch(s=>{e(new Ql(Va(s),s))}):e(new Ql(Va(t),t))}),Jy=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(Hy(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function Po(t,e,n,r,s,o){return Br(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(n,Jy(e,r,s,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Gy(c,l,r))})})}function Vi(t,e,n,r){return Br(this,void 0,void 0,function*(){return Po(t,"GET",e,n,r)})}function yn(t,e,n,r,s){return Br(this,void 0,void 0,function*(){return Po(t,"POST",e,r,s,n)})}function Zl(t,e,n,r,s){return Br(this,void 0,void 0,function*(){return Po(t,"PUT",e,r,s,n)})}function Ky(t,e,n,r){return Br(this,void 0,void 0,function*(){return Po(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Ip(t,e,n,r,s){return Br(this,void 0,void 0,function*(){return Po(t,"DELETE",e,r,s,n)})}var ht=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Yy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$d={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Qy{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Op(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return ht(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},$d),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(e=="PUT"?Zl:yn)(this.fetch,`${this.url}/object/${d}`,o,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}upload(e,n,r){return ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return ht(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:$d.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Zl(this.fetch,l.toString(),c,{headers:d});return{data:{path:o,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ze(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return ht(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const o=yield yn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new ou("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}update(e,n,r){return ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return ht(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}copy(e,n,r){return ht(this,void 0,void 0,function*(){try{return{data:{path:(yield yn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return ht(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield yn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return ht(this,void 0,void 0,function*(){try{const s=yield yn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}download(e,n){return ht(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=o?`?${o}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Vi(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}info(e){return ht(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Vi(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Xl(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}exists(e){return ht(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Ky(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r)&&r instanceof Ql){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return ht(this,void 0,void 0,function*(){try{return{data:yield Ip(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}list(e,n,r){return ht(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Yy),n),{prefix:e||""});return{data:yield yn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}listV2(e,n){return ht(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield yn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Xy="2.12.1",Zy={"X-Client-Info":`storage-js/${Xy}`};var zr=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class ev{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const o=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},Zy),n),this.fetch=Op(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return zr(this,void 0,void 0,function*(){try{return{data:yield Vi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}getBucket(e){return zr(this,void 0,void 0,function*(){try{return{data:yield Vi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return zr(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return zr(this,void 0,void 0,function*(){try{return{data:yield Zl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}emptyBucket(e){return zr(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}deleteBucket(e){return zr(this,void 0,void 0,function*(){try{return{data:yield Ip(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}}class tv extends ev{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new Qy(this.url,this.headers,e,this.fetch)}}const nv="2.57.4";let Gs="";typeof Deno<"u"?Gs="deno":typeof document<"u"?Gs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gs="react-native":Gs="node";const rv={"X-Client-Info":`supabase-js-${Gs}/${nv}`},sv={headers:rv},ov={schema:"public"},iv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},av={};var lv=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const cv=t=>{let e;return t?e=t:typeof fetch>"u"?e=wp:e=fetch,(...n)=>e(...n)},uv=()=>typeof Headers>"u"?Sp:Headers,dv=(t,e,n)=>{const r=cv(n),s=uv();return(o,i)=>lv(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},i),{headers:u}))})};var fv=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};function hv(t){return t.endsWith("/")?t:t+"/"}function pv(t,e){var n,r;const{db:s,auth:o,realtime:i,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>fv(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function mv(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(hv(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Lp="2.71.1",Hr=30*1e3,ec=3,Wa=ec*Hr,gv="http://localhost:9999",yv="supabase.auth.token",vv={"X-Client-Info":`gotrue-js/${Lp}`},tc="X-Supabase-Api-Version",Mp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bv=10*60*1e3;class iu extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ae(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class wv extends iu{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Sv(t){return ae(t)&&t.name==="AuthApiError"}class Bp extends iu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class pr extends iu{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Gn extends pr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _v(t){return ae(t)&&t.name==="AuthSessionMissingError"}class Zo extends pr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ei extends pr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ti extends pr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ev(t){return ae(t)&&t.name==="AuthImplicitGrantRedirectError"}class Pd extends pr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class nc extends pr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function qa(t){return ae(t)&&t.name==="AuthRetryableFetchError"}class Ad extends pr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class rc extends pr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Od=` 	
\r=`.split(""),kv=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Od.length;e+=1)t[Od[e].charCodeAt(0)]=-2;for(let e=0;e<Wi.length;e+=1)t[Wi[e].charCodeAt(0)]=e;return t})();function Id(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Wi[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Wi[r]),e.queuedBits-=6}}function Up(t,e,n){const r=kv[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ld(t){const e=[],n=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{Rv(i,r,n)};for(let i=0;i<t.length;i+=1)Up(t.charCodeAt(i),s,o);return e.join("")}function jv(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Cv(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}jv(r,e)}}function Rv(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Tv(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Up(t.charCodeAt(s),n,r);return new Uint8Array(e)}function Dv(t){const e=[];return Cv(t,n=>e.push(n)),new Uint8Array(e)}function Nv(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Id(s,n,r)),Id(null,n,r),e.join("")}function $v(t){return Math.round(Date.now()/1e3)+t}function Pv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const nn=()=>typeof window<"u"&&typeof document<"u",yr={tested:!1,writable:!1},zp=()=>{if(!nn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yr.tested)return yr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),yr.tested=!0,yr.writable=!0}catch{yr.tested=!0,yr.writable=!1}return yr.writable};function Av(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Fp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>No(async()=>{const{default:r}=await Promise.resolve().then(()=>js);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Ov=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Gr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},vr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},qn=async(t,e)=>{await t.removeItem(e)};class fa{constructor(){this.promise=new fa.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}fa.promiseConstructor=Promise;function Ha(t){const e=t.split(".");if(e.length!==3)throw new rc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!xv.test(e[r]))throw new rc("JWT not in base64url format");return{header:JSON.parse(Ld(e[0])),payload:JSON.parse(Ld(e[1])),signature:Tv(e[2]),raw:{header:e[0],payload:e[1]}}}async function Iv(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Lv(t,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await t(o);if(!e(o,null,i)){r(i);return}}catch(i){if(!e(o,i)){s(i);return}}})()})}function Mv(t){return("0"+t.toString(16)).substr(-2)}function Bv(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Mv).join("")}async function Uv(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function zv(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Uv(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fr(t,e,n=!1){const r=Bv();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Gr(t,`${e}-code-verifier`,s);const o=await zv(r);return[o,r===o?"plain":"s256"]}const Fv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vv(t){const e=t.headers.get(tc);if(!e||!e.match(Fv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Wv(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function qv(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Hv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vr(t){if(!Hv.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ga(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Md(t){return JSON.parse(JSON.stringify(t))}var Gv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Sr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Jv=[502,503,504];async function Bd(t){var e;if(!Ov(t))throw new nc(Sr(t),0);if(Jv.includes(t.status))throw new nc(Sr(t),t.status);let n;try{n=await t.json()}catch(o){throw new Bp(Sr(o),o)}let r;const s=Vv(t);if(s&&s.getTime()>=Mp["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ad(Sr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Gn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new Ad(Sr(n),t.status,n.weak_password.reasons);throw new wv(Sr(n),t.status||500,r)}const Kv=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function de(t,e,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[tc]||(o[tc]=Mp["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const i=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await Yv(t,e,n+l,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Yv(t,e,n,r,s,o){const i=Kv(e,r,s,o);let l;try{l=await t(n,Object.assign({},i))}catch(c){throw console.error(c),new nc(Sr(c),0)}if(l.ok||await Bd(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Bd(c)}}function kn(t){var e;let n=null;ex(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=$v(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Ud(t){const e=kn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Xn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Qv(t){return{data:t,error:null}}function Xv(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=t,i=Gv(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function Zv(t){return t}function ex(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ja=["global","local","others"];var tx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class nx{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Fp(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Ja[0]){if(Ja.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ja.join(", ")}`);try{return await de(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await de(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Xn})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=tx(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await de(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Xv,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ae(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await de(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xn})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,o,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await de(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Zv});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,y=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(x=>{const b=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(x.split(";")[1].split("=")[1]);u[`${_}Page`]=b}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ae(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Vr(e);try{return await de(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xn})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Vr(e);try{return await de(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Xn})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Vr(e);try{return await de(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Xn})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Vr(e.userId);try{const{data:n,error:r}=await de(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Vr(e.userId),Vr(e.id);try{return{data:await de(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}}function zd(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function rx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Wr={debug:!!(globalThis&&zp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Vp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class sx extends Vp{}async function ox(t,e,n){Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new sx(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Wr.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}rx();const ix={url:gv,storageKey:yv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Fd(t,e,n){return await n()}const qr={};class Eo{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Eo.nextInstanceID,Eo.nextInstanceID+=1,this.instanceID>0&&nn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},ix),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new nx({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Fp(s.fetch),this.lock=s.lock||Fd,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:nn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=ox:this.lock=Fd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:zp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zd(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=zd(this.memoryStorage)),nn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=qr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){qr[this.storageKey]=Object.assign(Object.assign({},qr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=qr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){qr[this.storageKey]=Object.assign(Object.assign({},qr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Lp}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Av(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),nn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Ev(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ae(n)?{error:n}:{error:new Bp("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const o=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:kn}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(ae(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,s;try{let o;if("email"in e){const{email:d,password:h,options:f}=e;let y=null,x=null;this.flowType==="pkce"&&([y,x]=await Fr(this.storage,this.storageKey)),o=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:y,code_challenge_method:x},xform:kn})}else if("phone"in e){const{phone:d,password:h,options:f}=e;o=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:kn})}else throw new ei("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(ae(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:i,options:l}=e;n=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ud})}else if("phone"in e){const{phone:o,password:i,options:l}=e;n=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ud})}else throw new ei("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Zo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(ae(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,o,i,l,c,u,d,h,f,y;let x,b;if("message"in e)x=e.message,b=e.signature;else{const{chain:_,wallet:p,statement:m,options:g}=e;let w;if(nn())if(typeof p=="object")w=p;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))w=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=p}const k=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const T=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),m?{statement:m}:null));let $;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")$=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)$=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)x=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),b=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${k.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(r=g==null?void 0:g.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const T=await w.signMessage(new TextEncoder().encode(x),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=T}}try{const{data:_,error:p}=await de(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Nv(b)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:kn});if(p)throw p;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Zo}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:p})}catch(_){if(ae(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const n=await vr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:o,error:i}=await de(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:kn});if(await qn(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Zo}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(ae(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:o,nonce:i}=e,l=await de(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:kn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Zo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(ae(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,o,i;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Fr(this.storage,this.storageKey));const{error:h}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new ei("You must provide either an email or phone number.")}catch(l){if(ae(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,o;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await de(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:kn});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Fr(this.storage,this.storageKey)),await de(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:Qv})}catch(o){if(ae(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Gn;const{error:s}=await de(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ae(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:i}=await de(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:i,error:l}=await de(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new ei("You must provide either an email or phone number and a type")}catch(n){if(ae(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await vr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Wa:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const i=await vr(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=Ga()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xn}):await this._useSession(async n=>{var r,s,o;const{data:i,error:l}=n;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gn}:await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Xn})})}catch(n){if(ae(n))return _v(n)&&(await this._removeSession(),await qn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new Gn;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Fr(this.storage,this.storageKey));const{data:u,error:d}=await de(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Xn});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Gn;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:i}=Ha(e.access_token);if(i.exp&&(r=i.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(ae(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:i,error:l}=n;if(l)throw l;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Gn;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ae(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!nn())throw new ti("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ti(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Pd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ti("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Pd("No code detected.");const{data:m,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=e;if(!o||!l||!i||!u)throw new ti("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const y=f-d;y*1e3<=Hr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const x=f-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,d);const{data:b,error:_}=await this._getUser(o);if(_)throw _;const p={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:h,expires_at:f,refresh_token:i,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(r){if(ae(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await vr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{error:o};const i=(r=s.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(Sv(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await qn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Pv(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Fr(this.storage,this.storageKey,!0));try{return await de(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(ae(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var i,l,c,u,d;const{data:h,error:f}=o;if(f)throw f;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await de(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return nn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ae(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:i}=n;if(i)throw i;return await de(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Lv(async s=>(s>0&&await Iv(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await de(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:kn})),(s,o)=>{const i=200*Math.pow(2,s);return o&&qa(o)&&Date.now()+i-r<Hr})}catch(r){if(this._debug(n,"error",r),ae(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),nn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await vr(this.storage,this.storageKey);if(s&&this.userStorage){let i=await vr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await Gr(this.userStorage,this.storageKey+"-user",i)),s.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:Ga()}else if(s&&!s.user&&!s.user){const i=await vr(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await qn(this.storage,this.storageKey+"-user"),await Gr(this.storage,this.storageKey,s)):s.user=Ga()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Wa;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Wa}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),qa(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Gn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new fa;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new Gn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),ae(o)){const i={session:null,error:o};return qa(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Gr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const o=Md(s);await Gr(this.storage,this.storageKey,o)}else{const s=Md(n);await Gr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await qn(this.storage,this.storageKey),await qn(this.storage,this.storageKey+"-code-verifier"),await qn(this.storage,this.storageKey+"-user"),this.userStorage&&await qn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&nn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Hr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Hr}ms, refresh threshold is ${ec} ticks`),s<=ec&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Vp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!nn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,i]=await Fr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await de(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:i}=n;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await de(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const{data:i,error:l}=await de(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(n){if(ae(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await de(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ae(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Ha(s.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+bv>s)return r;const{data:o,error:i}=await de(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:y,error:x}=await this.getSession();if(x||!y.session)return{data:null,error:x};r=y.session.access_token}const{header:s,payload:o,signature:i,raw:{header:l,payload:c}}=Ha(r);n!=null&&n.allowExpired||Wv(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:o,header:s,signature:i},error:null}}const d=qv(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,Dv(`${l}.${c}`)))throw new rc("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}}Eo.nextInstanceID=0;const ax=Eo;class lx extends ax{constructor(e){super(e)}}var cx=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class ux{constructor(e,n,r){var s,o,i;this.supabaseUrl=e,this.supabaseKey=n;const l=mv(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:ov,realtime:av,auth:Object.assign(Object.assign({},iv),{storageKey:c}),global:sv},d=pv(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=d.global.headers)!==null&&o!==void 0?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=dv(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new ky(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new tv(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new ry(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return cx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,storageKey:i,flowType:l,lock:c,debug:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lx({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Fy(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Wp=(t,e,n)=>new ux(t,e,n);function dx(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}dx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const fx="https://wjylzxsfevdlhqunvfqc.supabase.co",hx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqeWx6eHNmZXZkbGhxdW52ZnFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2ODMwOTEsImV4cCI6MjA3NDI1OTA5MX0.SuB0gd7-gefwpUHFnKsupDgo8P2VeLuMbdlsU6AMrLw",Ce=Wp(fx,hx,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}});function px(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function ko(){const t="sg_tab_player_id";let e=sessionStorage.getItem(t);return e||(e=px(),sessionStorage.setItem(t,e)),e}function Ar(t="Jogador"){const e="sg_tab_player_name";let n=sessionStorage.getItem(e);return n||(n=t,sessionStorage.setItem(e,n)),n}function mx(t){return sessionStorage.setItem("sg_tab_player_name",t??"Jogador"),t}const gx="/dynamic-data-visualization-3d.jpg",yx="/SalesGame_Logo-removebg-preview.png",vx="/Multiplier-Copia.png",xx="/WhatsApp_Image_2025-06-24_at_16.47.00-removebg-preview.png";function bx({onEnter:t}){const[e,n]=E.useState(Ar("")),r=E.useRef(null);E.useEffect(()=>{var i;(i=r.current)==null||i.focus()},[]);function s(){const i=(e||"").trim();i&&(mx(i),t==null||t(i))}function o(i){i.key==="Enter"&&s()}return a.jsxs("div",{className:"start",children:[a.jsx("img",{className:"startBg",src:gx,alt:""}),a.jsx("div",{className:"startShade"}),a.jsx("div",{className:"startHeader",children:a.jsx("img",{className:"startLogo",src:yx,alt:"Sales GAME"})}),a.jsx("div",{className:"startCenter",children:a.jsxs("div",{className:"startCard",children:[a.jsx("label",{className:"startLabel",htmlFor:"playerName",children:"Nome do Jogador"}),a.jsx("input",{id:"playerName",ref:r,className:"startInput",placeholder:"Digite seu nome",value:e,onChange:i=>n(i.target.value),onKeyDown:o,maxLength:30}),a.jsx("button",{className:"startBtn",onClick:s,children:"Entrar"})]})}),a.jsxs("div",{className:"startFooter",children:[a.jsxs("div",{className:"startLinks",children:[a.jsx("div",{children:"@multiplier.educacao"}),a.jsx("div",{children:"https://multipliereducacao.com.br/"})]}),a.jsx("div",{className:"startBrand",children:a.jsx("img",{className:"startBrandLogo",src:vx,alt:"Multiplier"})})]}),a.jsx("img",{className:"startCoach",src:xx,alt:"",draggable:"false"})]})}async function wx(){const{data:t,error:e}=await Ce.from("lobbies").select(`
      id,
      name,
      max_players,
      status,
      created_at,
      lobby_players!left(count)
    `).order("created_at",{ascending:!0});if(e)throw e;return(t||[]).map(n=>{var r,s;return{id:n.id,name:n.name,max:n.max_players,status:n.status||"open",players:(((s=(r=n.lobby_players)==null?void 0:r[0])==null?void 0:s.count)??0)|0}})}function Sx(t){const e=Ce.channel("lobbies-list").on("postgres_changes",{event:"*",schema:"public",table:"lobbies"},()=>t==null?void 0:t()).on("postgres_changes",{event:"*",schema:"public",table:"lobby_players"},()=>t==null?void 0:t()).subscribe();return()=>Ce.removeChannel(e)}async function _x({name:t,hostId:e,max:n=4}){if(!e)throw new Error("hostId obrigatrio em createLobby");const s={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,name:t,host_id:e,max_players:Number(n)||4,status:"open",created_at:new Date().toISOString()},{data:o,error:i}=await Ce.from("lobbies").insert(s).select("id").single();if(i)throw i;return o.id}async function sc({lobbyId:t,playerId:e,playerName:n,ready:r=!1}){const{data:s,error:o}=await Ce.from("lobbies").select("id, max_players, status, host_id").eq("id",t).single();if(o)throw o;if(s.status!=="open")throw new Error("Sala fechada.");const{count:i,error:l}=await Ce.from("lobby_players").select("lobby_id",{count:"exact",head:!0}).eq("lobby_id",t);if(l)throw l;if((i||0)>=s.max_players)throw new Error("Sala cheia.");try{window.__MY_UID=e}catch{}const{error:c}=await Ce.from("lobby_players").upsert({lobby_id:t,player_id:e,player_name:n,ready:!!r,joined_at:new Date().toISOString()},{onConflict:"lobby_id,player_id"});if(c)throw c;s.host_id||await Ce.from("lobbies").update({host_id:e}).eq("id",t)}async function Vd({lobbyId:t,playerId:e}){var l;const{data:n,error:r}=await Ce.from("lobbies").select("id, host_id").eq("id",t).single();if(r)throw r;const{error:s}=await Ce.from("lobby_players").delete().match({lobby_id:t,player_id:e});if(s)throw s;const{data:o,error:i}=await Ce.from("lobby_players").select("player_id, joined_at").eq("lobby_id",t).order("joined_at",{ascending:!0});if(i)throw i;if(!o||o.length===0){await Ce.from("lobbies").delete().eq("id",t);return}if((n==null?void 0:n.host_id)===e){const c=(l=o[0])==null?void 0:l.player_id;c&&await Ce.from("lobbies").update({host_id:c}).eq("id",t)}}async function Wd(t){const{data:e,error:n}=await Ce.from("lobby_players").select("player_id, player_name, ready, joined_at").eq("lobby_id",t).order("joined_at",{ascending:!0});if(n)throw n;return e||[]}async function Ex({lobbyId:t,playerId:e,ready:n}){const{error:r}=await Ce.from("lobby_players").update({ready:n}).match({lobby_id:t,player_id:e});if(r)throw r}async function kx(t,e,n){return Ex({lobbyId:t,playerId:e,ready:n})}async function jx({lobbyId:t,playerId:e,playerName:n}){const{error:r}=await Ce.from("lobby_players").update({player_name:n}).match({lobby_id:t,player_id:e});if(r)throw r}async function qd(t,e){const{error:n}=await Ce.from("lobbies").update({status:e}).eq("id",t);if(n)throw n}function Cx(t,e){let n=0;const r=()=>{n&&cancelAnimationFrame(n),n=requestAnimationFrame(()=>e==null?void 0:e())},s=Ce.channel(`lobby-${t}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},o=>{console.debug("[rt] lobby_players:INSERT",o.new),r()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},o=>{console.debug("[rt] lobby_players:UPDATE",o.new),r()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},o=>{console.debug("[rt] lobby_players:DELETE",o.old),r()}).on("postgres_changes",{event:"*",schema:"public",table:"lobbies",filter:`id=eq.${t}`},o=>{console.debug("[rt] lobbies:*",o.new||o.old),r()}).subscribe();return()=>{n&&cancelAnimationFrame(n),Ce.removeChannel(s)}}async function Rx(t){const{data:e,error:n}=await Ce.from("lobbies").select("id,name,status,max_players,host_id,created_at").eq("id",t).single();if(n)throw n;return e}async function Tx({lobbyId:t}){var s;const{data:e}=await Ce.from("lobby_players").select("player_id, player_name, ready").eq("lobby_id",t),{data:n,error:r}=await Ce.from("matches").insert({lobby_id:t,host_id:((s=e==null?void 0:e[0])==null?void 0:s.player_id)||null,state:{players:e},created_at:new Date().toISOString()}).select("id").single();if(r)throw r;return n}async function Dx(t){const{data:e,error:n}=await Ce.from("matches").select("id, lobby_id, created_at").eq("lobby_id",t).order("created_at",{ascending:!1}).limit(1);if(n)throw n;return(e==null?void 0:e[0])||null}async function Ka({roomCode:t,playerId:e}){if(!t||!e){console.log("[leaveRoom] Parmetros invlidos:",{roomCode:t,playerId:e});return}try{console.log(`[leaveRoom] Tentando remover jogador ${e} da sala ${t}`);const{data:n,error:r}=await Ce.from("lobbies").select("id, name, host_id").eq("id",t).single();if(r){console.warn("[leaveRoom] Erro ao buscar lobby:",r);return}if(!n){console.log(`[leaveRoom] Lobby ${t} no encontrado`);return}console.log("[leaveRoom] Lobby encontrado:",n);const{error:s}=await Ce.from("lobby_players").delete().match({lobby_id:t,player_id:e});s?console.warn("[leaveRoom] Erro ao remover jogador:",s):console.log(`[leaveRoom] Jogador ${e} removido do lobby ${t}`);const{data:o,error:i}=await Ce.from("lobby_players").select("player_id").eq("lobby_id",t);if(i){console.warn("[leaveRoom] Erro ao contar jogadores restantes:",i);return}if(!o||o.length===0){const{error:l}=await Ce.from("lobbies").delete().eq("id",t);l?console.warn("[leaveRoom] Erro ao deletar lobby vazio:",l):console.log(`[leaveRoom] Lobby ${t} deletado com sucesso (sem jogadores)`)}else if(console.log(`[leaveRoom] Jogador ${e} saiu do lobby ${t}. Restam ${o.length} jogadores.`),n.host_id===e&&o.length>0){const l=o[0].player_id,{error:c}=await Ce.from("lobbies").update({host_id:l}).eq("id",t);c?console.warn("[leaveRoom] Erro ao transferir host:",c):console.log(`[leaveRoom] Host transferido para ${l}`)}}catch(n){console.error("[leaveRoom] Erro inesperado:",n)}}function Nx({onEnterRoom:t}){const[e,n]=E.useState([]),[r,s]=E.useState(!1);async function o(){s(!0);try{const u=await wx();n(u)}finally{s(!1)}}E.useEffect(()=>(o(),Sx(()=>o())),[]);async function i(){const u=Ar("Jogador"),d=`Sala de ${u}`,h=prompt("Nome do lobby:",d)||d,f=ko();try{const y=await _x({name:h,hostId:f,max:4});await sc({lobbyId:y,playerId:f,playerName:u,ready:!1}),t==null||t(y)}catch(y){alert(y.message||"No foi possvel criar o lobby."),await o()}}async function l(u){try{const d=Ar("Jogador"),h=ko();await sc({lobbyId:u,playerId:h,playerName:d,ready:!1}),t==null||t(u)}catch(d){alert(d.message||"No foi possvel entrar no lobby.")}}const c={page:{minHeight:"100vh",background:"#0f0f12",color:"#e9ecf1",padding:"32px 16px",display:"flex",justifyContent:"center"},container:{width:"100%",maxWidth:980},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:16,marginBottom:16,flexWrap:"wrap"},title:{fontSize:28,fontWeight:800,color:"#fff"},actions:{display:"flex",gap:10},btn:{padding:"12px 16px",border:0,borderRadius:12,fontWeight:800,cursor:"pointer"},btnPrimary:{background:"#4f46e5",color:"#fff",boxShadow:"0 8px 24px rgba(79,70,229,.25)"},btnSecondary:{background:"#20222a",color:"#fff",border:"1px solid #2b2e38"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:14},card:{background:"linear-gradient(180deg, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0.00) 100%)",border:"1px solid rgba(255,255,255,.08)",borderRadius:16,padding:16,display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 20px rgba(0,0,0,.25)"},cardHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},lobbyName:{fontSize:18,fontWeight:800,color:"#fff",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},meta:{fontSize:13,color:"#b8c0cc"},joinBtn:{padding:"10px 14px",borderRadius:10,border:0,background:"#7c3aed",color:"#fff",fontWeight:800,cursor:"pointer",boxShadow:"0 10px 20px rgba(124,58,237,.25)"},disabled:{opacity:.6,cursor:"not-allowed",filter:"grayscale(.3)"},empty:{marginTop:24,padding:18,borderRadius:12,border:"1px dashed rgba(255,255,255,.12)",color:"#c7cfdb",textAlign:"center"}};return a.jsx("div",{style:c.page,children:a.jsxs("div",{style:c.container,children:[a.jsxs("div",{style:c.headerRow,children:[a.jsx("h2",{style:c.title,children:"SalesGame  Lobbies"}),a.jsxs("div",{style:c.actions,children:[a.jsx("button",{style:{...c.btn,...c.btnPrimary},onClick:i,children:"Criar Lobby"}),a.jsx("button",{style:{...c.btn,...c.btnSecondary},onClick:o,disabled:r,children:r?"Atualizando":"Atualizar"})]})]}),e.length===0&&!r?a.jsxs("div",{style:c.empty,children:["Nenhuma sala criada ainda. Clique em ",a.jsx("b",{children:"Criar Lobby"})," para comear."]}):a.jsx("div",{style:c.grid,children:e.map(u=>{const d=(u.players??0)>=(u.max??4),h=(u.status??"open")==="open",f=d||!h;return a.jsxs("div",{style:c.card,children:[a.jsxs("div",{style:c.cardHeader,children:[a.jsx("div",{style:c.lobbyName,title:u.name,children:u.name}),a.jsxs("span",{style:c.meta,children:[u.players??0,"/",u.max??4]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("span",{style:c.meta,children:["status: ",u.status??"open"]}),a.jsx("button",{style:{...c.joinBtn,...f?c.disabled:{}},disabled:f,onClick:()=>l(u.id),title:f?d?"Sala cheia":"Sala no est aberta":"Entrar na sala",children:"Entrar"})]})]},u.id)})})]})})}function $x({lobbyId:t,onBack:e,onStartGame:n}){const r=ko(),s=Ar("Jogador"),[o,i]=E.useState(null),[l,c]=E.useState([]),[u,d]=E.useState(!0),[h,f]=E.useState(!1),y=E.useRef(!1),x=E.useRef(!0),b=E.useRef(!1),_=E.useRef(!1),p=E.useMemo(()=>(o==null?void 0:o.host_id)===r,[o,r]),m=E.useMemo(()=>l.find(v=>v.player_id===r),[l,r]),g=E.useMemo(()=>l.filter(v=>v.ready).length,[l]),w=p&&(o==null?void 0:o.status)==="open"&&l.length>=1&&g===l.length;console.log("[PlayersLobby] Debug:",{players:l.length,readyCount:g,lobbyStatus:o==null?void 0:o.status,amHost:p,canStart:w,meId:r,meName:s});async function k(v){if(_.current)return;const D=await Dx(t);if(D!=null&&D.id){_.current=!0;const P=(v||[]).map((B,be)=>({id:B.player_id,name:B.player_name,index:be}));n==null||n({lobbyId:t,matchId:D==null?void 0:D.id,players:P,me:{id:r,name:s}})}}async function T(){x.current&&d(!0);try{console.log("[PlayersLobby] refreshAll - buscando lobby:",t);const[v,D]=await Promise.all([Rx(t),Wd(t)]);console.log("[PlayersLobby] refreshAll - lobby:",v,"players:",D),i(v),c(D);const P=D.find(B=>B.player_id===r);if(console.log("[PlayersLobby] refreshAll - mine:",P,"meId:",r),!P&&!y.current&&(v==null?void 0:v.status)==="open"){console.log("[PlayersLobby] refreshAll - entrando na sala"),y.current=!0;try{await sc({lobbyId:t,playerId:r,playerName:s,ready:!1}),console.log("[PlayersLobby] refreshAll - entrada na sala bem-sucedida");const B=await Wd(t);console.log("[PlayersLobby] refreshAll - jogadores aps entrada:",B),c(B)}catch(B){console.error("[PlayersLobby] refreshAll - erro ao entrar na sala:",B)}}if(P&&!b.current&&s&&P.player_name!==s){console.log("[PlayersLobby] refreshAll - sincronizando nome"),b.current=!0;try{await jx({lobbyId:t,playerId:r,playerName:s})}catch{}}await k(D)}catch(v){console.error("[PlayersLobby] refreshAll - erro:",v)}finally{x.current&&(x.current=!1,d(!1))}}E.useEffect(()=>{const v=()=>{Vd({lobbyId:t,playerId:r}).catch(()=>{})},D=()=>v();return window.addEventListener("pagehide",D),window.addEventListener("beforeunload",D),()=>{window.removeEventListener("pagehide",D),window.removeEventListener("beforeunload",D)}},[t,r]),E.useEffect(()=>(y.current=!1,x.current=!0,b.current=!1,_.current=!1,T(),Cx(t,()=>T())),[t]);async function $(v){if(!m)return;f(!0);const D=m.ready;c(P=>P.map(B=>B.player_id===r?{...B,ready:v}:B));try{await kx(t,r,v)}catch(P){c(B=>B.map(be=>be.player_id===r?{...be,ready:D}:be)),console.error("setReadyUI failed",P)}finally{f(!1)}}async function S(){try{await Vd({lobbyId:t,playerId:r})}finally{e==null||e()}}async function R(){if(!w)return;const v=o==null?void 0:o.status;await qd(t,"locked");try{const D=await Tx({lobbyId:t});_.current=!0;const P=l.map((B,be)=>({id:B.player_id,name:B.player_name,index:be}));n==null||n({lobbyId:t,matchId:D==null?void 0:D.id,players:P,me:{id:r,name:s}})}catch(D){console.error("startMatch failed",D),await qd(t,v||"open")}}return a.jsx("div",{style:ye.page,children:a.jsxs("div",{style:ye.container,children:[a.jsxs("div",{style:ye.top,children:[a.jsx("button",{style:ye.backBtn,onClick:S,children:" Voltar"}),a.jsxs("h2",{style:ye.title,children:["SalesGame  ",(o==null?void 0:o.name)||"..."]})]}),a.jsxs("div",{style:ye.table,children:[a.jsxs("div",{style:ye.thead,children:[a.jsx("div",{style:ye.colPlayer,children:"Jogador"}),a.jsx("div",{style:ye.colReady,children:"Pronto?"})]}),u?a.jsx("div",{style:ye.loading,children:"Carregando..."}):l.map(v=>a.jsxs("div",{style:ye.row,children:[a.jsxs("div",{style:ye.colPlayer,children:[a.jsx("span",{style:ye.avatar,children:(v.player_name||"?").slice(0,2).toLowerCase()}),a.jsx("span",{children:v.player_name||"Annimo"}),(o==null?void 0:o.host_id)===v.player_id&&a.jsx("span",{style:ye.badgeHost,children:"Host"}),v.player_id===r&&a.jsx("span",{style:ye.badgeYou,children:"Voc"})]}),a.jsx("div",{style:ye.colReady,children:v.player_id===r?a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{style:{...ye.btn,...m!=null&&m.ready?ye.btnGhost:ye.btnDark},onClick:()=>$(!1),disabled:h||!(m!=null&&m.ready),children:"No pronto"}),a.jsxs("button",{style:{...ye.btn,...m!=null&&m.ready?ye.btnPrimary:ye.btnPurple},onClick:()=>$(!0),disabled:h||!!(m!=null&&m.ready),children:[" ",m!=null&&m.ready?"Pronto":"Ficar pronto"]})]}):a.jsx("span",{style:v.ready?ye.pillReady:ye.pillWait,children:v.ready?"Pronto":"Aguardando"})})]},v.player_id))]}),a.jsxs("div",{style:ye.footer,children:[a.jsxs("div",{style:ye.statusWrap,children:[a.jsx("span",{style:{...ye.dot,background:(o==null?void 0:o.status)==="open"?"#22c55e":"#f59e0b"}}),a.jsxs("span",{children:["status: ",(o==null?void 0:o.status)||"..."]}),a.jsxs("span",{style:{marginLeft:12},children:["Prontos: ",g,"/",l.length]})]}),a.jsxs("div",{style:{display:"flex",gap:12},children:[a.jsx("button",{style:{...ye.btn,...w?ye.btnPrimary:ye.disabled},onClick:R,disabled:!w,children:"Iniciar partida"}),a.jsx("button",{style:{...ye.btn,...ye.btnDark},onClick:S,children:"Sair da sala"})]})]})]})})}const ye={page:{minHeight:"100vh",background:"#0f0f12",color:"#e9ecf1",padding:"24px 16px",display:"flex",justifyContent:"center"},container:{width:"100%",maxWidth:980},top:{display:"flex",alignItems:"center",gap:12,marginBottom:16},backBtn:{padding:"10px 14px",background:"#20222a",border:"1px solid #2b2e38",borderRadius:12,color:"#fff",cursor:"pointer"},title:{margin:0,fontSize:28,fontWeight:800},table:{background:"rgba(255,255,255,.02)",border:"1px solid rgba(255,255,255,.08)",borderRadius:16,overflow:"hidden"},thead:{display:"grid",gridTemplateColumns:"1fr 220px",padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,.08)",color:"#c7cfdb"},row:{display:"grid",gridTemplateColumns:"1fr 220px",padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,.06)"},colPlayer:{display:"flex",alignItems:"center",gap:10,minWidth:0},colReady:{display:"flex",alignItems:"center",justifyContent:"flex-end"},avatar:{width:28,height:28,borderRadius:999,background:"#1f2430",display:"grid",placeItems:"center",color:"#c7cfdb",fontSize:12,textTransform:"lowercase"},badgeHost:{marginLeft:8,fontSize:12,background:"#fde68a",color:"#111827",padding:"2px 8px",borderRadius:999,fontWeight:800},badgeYou:{marginLeft:8,fontSize:12,background:"#bfdbfe",color:"#111827",padding:"2px 8px",borderRadius:999,fontWeight:800},loading:{padding:16,color:"#c7cfdb"},pillReady:{background:"rgba(34,197,94,.15)",color:"#22c55e",padding:"6px 10px",borderRadius:999,fontWeight:700},pillWait:{background:"rgba(245,158,11,.14)",color:"#f59e0b",padding:"6px 10px",borderRadius:999,fontWeight:700},footer:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:16},statusWrap:{display:"flex",alignItems:"center",gap:6,color:"#c7cfdb"},dot:{width:8,height:8,borderRadius:"50%"},btn:{padding:"12px 16px",border:0,borderRadius:12,fontWeight:800,cursor:"pointer"},btnPrimary:{background:"#4f46e5",color:"#fff",boxShadow:"0 8px 24px rgba(79,70,229,.25)"},btnPurple:{background:"#7c3aed",color:"#fff"},btnDark:{background:"#20222a",color:"#fff",border:"1px solid #2b2e38"},btnGhost:{background:"transparent",color:"#e9ecf1",border:"1px solid rgba(255,255,255,.15)"},disabled:{opacity:.5,cursor:"not-allowed",filter:"grayscale(.25)"}},Px="/board.jpg",oc=800,ic=700,ha=[{nx:.9278494291885221,ny:.9008218764923216},{nx:.8188460351743289,ny:.9120818357755046},{nx:.7145819191607529,ny:.920124663834921},{nx:.6016291268127121,ny:.920124663834921},{nx:.49104597346497997,ny:.9233417950586875},{nx:.37888306078370876,ny:.920124663834921},{nx:.24618327676643012,ny:.9152989669992712},{nx:.21695772909595804,ny:.7994822429436751},{nx:.1853625424251774,ny:.7270967904089275},{nx:.1340203640851589,ny:.6354085505315806},{nx:.12851782363977485,ny:.5145797598627787},{nx:.12664165103189493,ny:.37392795883361923},{nx:.05347091932457786,ny:.30017152658662094},{nx:.051594746716697934,ny:.20240137221269297},{nx:.14540337711069418,ny:.12006861063464837},{nx:.23921200750469043,ny:.11663807890222985},{nx:.3771106941838649,ny:.11663807890222985},{nx:.5037523452157598,ny:.12006861063464837},{nx:.5975609756097561,ny:.1320754716981132},{nx:.5984990619136961,ny:.24356775300171526},{nx:.5065666041275797,ny:.2692967409948542},{nx:.398686679174484,ny:.27101200686106347},{nx:.28893058161350843,ny:.27101200686106347},{nx:.2373358348968105,ny:.3687821612349914},{nx:.23921200750469043,ny:.48027444253859347},{nx:.24202626641651032,ny:.5660377358490566},{nx:.26454033771106944,ny:.6895368782161235},{nx:.3330206378986867,ny:.6946826758147513},{nx:.35647279549718575,ny:.5831903945111492},{nx:.35647279549718575,ny:.4716981132075472},{nx:.3818011257035647,ny:.37735849056603776},{nx:.5225140712945591,ny:.3653516295025729},{nx:.6238273921200751,ny:.3687821612349914},{nx:.7223264540337712,ny:.40308747855917665},{nx:.6613508442776735,ny:.5197255574614065},{nx:.5300187617260788,ny:.5025728987993139},{nx:.4427767354596623,ny:.5694682675814752},{nx:.4896810506566604,ny:.6861063464837049},{nx:.6163227016885553,ny:.6861063464837049},{nx:.724202626641651,ny:.6861063464837049},{nx:.8273921200750469,ny:.660377358490566},{nx:.8395872420262664,ny:.5368782161234992},{nx:.8395872420262664,ny:.4339622641509434},{nx:.8283302063789869,ny:.313893653516295},{nx:.7176360225140713,ny:.30017152658662094},{nx:.6876172607879925,ny:.22298456260720412},{nx:.698874296435272,ny:.1457975986277873},{nx:.8020637898686679,ny:.11663807890222985},{nx:.8958724202626641,ny:.11663807890222985},{nx:.9446529080675422,ny:.21783876500857632},{nx:.9446529080675422,ny:.3293310463121784},{nx:.9380863039399625,ny:.45797598627787306},{nx:.9409005628517824,ny:.5711835334476844},{nx:.950281425891182,ny:.6723842195540308},{nx:.9540337711069419,ny:.7804459691252144}],hs=ha.length;function qp(t,e,n){return{x:t.nx*e,y:t.ny*n}}ha.map(t=>[t.nx*oc,t.ny*ic]);function Ax({visible:t=!0,boardWidth:e,boardHeight:n}){return t?a.jsx("div",{className:"markersLayer",children:ha.map((r,s)=>{const{x:o,y:i}=qp(r,e,n);return a.jsx("div",{className:"marker",style:{left:o,top:i},title:`Casa ${s+1}`,children:s+1},s)})}):null}function Ox({boardRef:t,expected:e=55,onFinish:n,initial:r=[]}){const[s,o]=E.useState(r);function i(y){if(!(t!=null&&t.current))return;const x=t.current.getBoundingClientRect(),b=y.clientX-x.left,_=y.clientY-x.top,p=b/x.width,m=_/x.height;o(g=>g.length>=e?g:[...g,{nx:p,ny:m}])}function l(){o(y=>y.slice(0,-1))}function c(){o([])}const u=E.useMemo(()=>JSON.stringify(s,null,2),[s]);async function d(){try{await navigator.clipboard.writeText(u),alert("Copiado para a rea de transferncia!")}catch{alert("No foi possvel copiar. Use o boto Baixar.")}}function h(){const y=new Blob([u],{type:"application/json"}),x=URL.createObjectURL(y),b=document.createElement("a");b.href=x,b.download="track-points-55.json",document.body.appendChild(b),b.click(),b.remove(),URL.revokeObjectURL(x)}function f(){n==null||n(s),console.log(`TRACK_POINTS_NORM (cole em src/data/track.js):
`,u),alert("Finalizado! O JSON foi impresso no console. Copie e cole em src/data/track.js")}return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"recLayer",onClick:i}),a.jsx("div",{className:"recDotsLayer",pointerEvents:"none",children:s.map((y,x)=>a.jsx("div",{className:"recDot",style:{left:`${y.nx*100}%`,top:`${y.ny*100}%`},title:`Casa ${x+1}`,children:x+1},x))}),a.jsxs("div",{className:"recToolbar",children:[a.jsxs("div",{className:"recInfo",children:[a.jsx("b",{children:"Gravando trilha"}),"  clique nas casas na ordem.",a.jsxs("span",{children:["Marcados: ",a.jsx("b",{children:s.length})," / ",e]})]}),a.jsxs("div",{className:"recBtns",children:[a.jsx("button",{onClick:l,disabled:!s.length,children:"Desfazer"}),a.jsx("button",{onClick:c,disabled:!s.length,children:"Limpar"}),a.jsx("button",{onClick:d,disabled:!s.length,children:"Copiar JSON"}),a.jsx("button",{onClick:h,disabled:!s.length,children:"Baixar .json"}),a.jsx("button",{onClick:f,disabled:s.length!==e,children:"Finalizar"})]})]})]})}const Hd=["","","","","","","",""];function Hp(t){return Hd[t%Hd.length]}function Ix(t,e){const n=Hp(t);return e?"":n}function Lx(t,e){const n=e.findIndex(r=>r.id===t);return n>=0?Hp(n):""}const Mx=40,Bx=1.15,Ux=3,zx="0 8px 18px rgba(0,0,0,.35)",Gd={cash:18e3,possibAt:0,clientsAt:0,faturamento:770,manutencao:1150,emprestimos:0,vendedoresComuns:0,fieldSales:0,insideSales:0,mixDBens:4e3,erpClientes:0,manualOnboarding:!0,azul:0,amarelo:0,roxo:0,gestores:0};function Fx({players:t,turnIdx:e,recordTrack:n=!1,matchId:r,me:s,onMeHud:o}){const i=E.useRef(null),[l,c]=E.useState({w:oc,h:ic}),u=(s==null?void 0:s.id)||ko(),d=Ar("Jogador"),h=E.useMemo(()=>(t==null?void 0:t.find(w=>w.id===u))||null,[t,u]),f=(s==null?void 0:s.name)||(h==null?void 0:h.name)||d,y=(h==null?void 0:h.color)||"#6c5ce7",x=E.useMemo(()=>`sg_stats_v1:${r||"local"}:${u}`,[r,u]),[b,_]=E.useState(()=>{try{const w=sessionStorage.getItem(x);return w?JSON.parse(w):Gd}catch{return Gd}});E.useEffect(()=>{try{sessionStorage.setItem(x,JSON.stringify(b))}catch{}},[x,b]),E.useEffect(()=>{const w={id:u,name:f,color:y,cash:b.cash,possibAt:b.possibAt,clientsAt:b.clientsAt,matchId:r||"local"};o==null||o(w),document.dispatchEvent(new CustomEvent("sg:meHud",{detail:w}))},[u,f,y,b.cash,b.possibAt,b.clientsAt,r]),E.useLayoutEffect(()=>{if(!i.current)return;const w=i.current,k=new ResizeObserver(T=>{for(const $ of T){const S=$.contentRect;c({w:S.width,h:S.height})}});return k.observe(w),()=>k.disconnect()},[]);const p=l.w/oc,m=l.h/ic,g=Math.min(p,m);return a.jsxs("div",{className:"board",ref:i,children:[a.jsx("img",{src:Px,alt:"Board",className:"boardImg"}),n&&a.jsx(Ox,{boardRef:i,expected:55,onFinish:w=>{console.log("TRACK_POINTS_NORM (cole em src/data/track.js):",JSON.stringify(w,null,2))}}),!n&&a.jsxs(a.Fragment,{children:[a.jsx(Ax,{visible:!1,boardWidth:l.w,boardHeight:l.h}),t.map((w,k)=>{const T=k===e,$=(w.pos%hs+hs)%hs,S=ha[$],R=qp(S,l.w,l.h),v=k*12*g,P=Mx*g*(T?Bx:1),B=Math.max(2,Ux*g),be=Ix(k,T);return a.jsx("div",{className:"token",style:{position:"absolute",left:R.x+v,top:R.y-v,transform:"translate(-50%, -50%)",width:P,height:P,borderRadius:"50%",background:w.color,border:`${B}px solid rgba(255,255,255,.95)`,boxShadow:zx,pointerEvents:"none",display:"grid",placeItems:"center",color:"#000",fontWeight:900,userSelect:"none",zIndex:T?4:3,fontSize:`${Math.max(16,P*.6)}px`},title:`${w.name}  Casa ${$+1}`,"aria-label":`${w.name} est na casa ${$+1}`,children:be},w.id)})]})]})}function Vx({totals:t,players:e}){return E.useEffect(()=>{console.groupCollapsed("[HUD] totals"),console.log(t),console.groupEnd()},[t]),a.jsxs("div",{className:"hud",children:[a.jsxs("div",{className:"panel",children:[a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Faturamento:"})," ",a.jsxs("span",{className:"pos",children:["$ ",t.faturamento]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Manuteno:"})," ",a.jsxs("span",{className:"neg",children:["$ ",t.manutencao]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Emprstimos:"})," ",a.jsxs("span",{children:["$ ",t.emprestimos]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Vendedores Comuns:"})," ",a.jsx("span",{children:t.vendedoresComuns})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Field Sales:"})," ",a.jsx("span",{children:t.fieldSales})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Inside Sales:"})," ",a.jsx("span",{children:t.insideSales})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Mix Produtos:"})," ",a.jsx("span",{children:t.mixProdutos})," ",a.jsx("b",{children:" Bens:"})," ",a.jsxs("span",{children:["$ ",t.bens]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"ERP/Sistemas:"})," ",a.jsx("span",{children:t.erpSistemas})," ",a.jsx("b",{children:" Clientes:"})," ",a.jsx("span",{children:t.clientes})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Manual Onboarding:"})," "]}),a.jsxs("div",{children:[a.jsx("b",{children:"Azul:"})," ",a.jsx("span",{children:t.az||0})," ",a.jsx("b",{children:" Amarelo: "}),a.jsx("span",{children:t.am||0})," ",a.jsx("b",{children:"Roxo:"})," ",a.jsx("span",{children:t.rox||0})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Gestores Comerciais:"})," ",a.jsx("span",{children:t.gestores??t.gestoresComerciais??0})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Capacidade:"})," ",a.jsx("span",{children:t.possibAt??0}),"  ",a.jsx("b",{children:"Em Atendimento:"})," ",a.jsx("span",{children:t.clientsAt??0})]})]}),a.jsxs("div",{className:"score",children:[a.jsx("div",{className:"title",children:"Placar"}),e.map(n=>a.jsxs("div",{className:"row",children:[a.jsxs("span",{children:[a.jsx("span",{style:{marginRight:"8px",fontSize:"16px"},children:Lx(n.id,e)}),n.name]}),a.jsx("span",{children:n.cash})]},n.id))]})]})}function Wx({onAction:t,current:e,isMyTurn:n=!0}){const r=!!(e!=null&&e.bankrupt),s=!!n&&!r;E.useEffect(()=>{const c=(e==null?void 0:e.name)||"Jogador",u=(e==null?void 0:e.id)||"unknown";console.log(`[ BOTO ROLAR DADOS] ${c} (${u}) - Status: ${s?" HABILITADO":" DESABILITADO"}`),console.log(s?`[ BOTO ROLAR DADOS]  HABILITADO para ${c} - Pode jogar!`:`[ BOTO ROLAR DADOS]  DESABILITADO para ${c} - Motivos: isMyTurn=${n}, isBankrupt=${r}`)},[s,e==null?void 0:e.name,e==null?void 0:e.id,n,r]),E.useEffect(()=>{console.groupCollapsed("[Controls] render"),console.log("current player:",e),console.log("isMyTurn prop:",n),console.log("isBankrupt:",r),console.log("canRoll (final):",s),console.groupEnd()},[e==null?void 0:e.id,e==null?void 0:e.name,e==null?void 0:e.bankrupt,n,s]);const o=()=>{if(console.log("[Controls] click => Rolar Dado & Andar (canRoll=%s)",s),!s)return;const c=Math.floor(Math.random()*6)+1,u=0,d=`Dado: ${c}`;console.log("[Controls] onAction ROLL => steps=%d cashDelta=%d note=%s",c,u,d),t==null||t({type:"ROLL",steps:c,cashDelta:u,note:d})},i=async()=>{r||(console.log("[Controls] click => Recuperao Financeira"),t==null||t({type:"RECOVERY_MODAL"}))},l=async()=>{r||(console.log("[Controls] click => Declarar Falncia"),t==null||t({type:"BANKRUPT_MODAL"}))};return a.jsxs("div",{className:`controls ${s?"":"is-wait"} ${r?"is-bankrupt":""}`,children:[a.jsx("button",{className:"btn primary",onClick:i,disabled:r,"aria-disabled":r,children:"RECUPERAO FINANCEIRA"}),a.jsx("button",{className:"btn dark",onClick:l,disabled:r,"aria-disabled":r,children:"DECLARAR FALNCIA"}),a.jsxs("div",{className:"turnBox",children:[a.jsxs("div",{children:["Vez de: ",a.jsx("b",{children:e==null?void 0:e.name})]}),a.jsx("button",{className:"btn go",onClick:o,disabled:!s,"aria-disabled":!s,children:"Rolar Dado & Andar"})]})]})}function Ao({children:t,onClose:e,zIndex:n=3e3}){const r=()=>{console.log("[ MODAL] Jogador clicou no boto X (fechar)"),typeof e=="function"&&e()};return a.jsx("div",{className:"sg-modal-backdrop",style:{position:"fixed",inset:0,background:"rgba(8,10,16,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:n},onClick:r,children:a.jsx("div",{className:"sg-modal-card",style:{position:"relative",background:"#0f1420",border:"1px solid rgba(255,255,255,.1)",borderRadius:14,width:"min(780px, 92vw)",maxWidth:"92vw",color:"#fff",boxShadow:"0 20px 60px rgba(0,0,0,.45)"},onClick:s=>s.stopPropagation(),children:t})})}function qx({players:t=[],onExit:e,onResolve:n}){const r=E.useMemo(()=>{const c=[...t].map(u=>({...u,patrimonio:(Number(u.cash)||0)+(Number(u.bens)||0)})).sort((u,d)=>d.patrimonio-u.patrimonio);return[c[1],c[0],c[2]]},[t]),s=r==null?void 0:r[1],o=r==null?void 0:r[0],i=r==null?void 0:r[2],l=()=>{n?n({action:"EXIT"}):e==null||e()};return a.jsx(Ao,{zIndex:2147483647,onClose:()=>{},children:a.jsxs("div",{style:ln.wrap,children:[a.jsx("h1",{style:ln.title,children:" Fim da 5 Rodada"}),a.jsxs("p",{style:ln.subtitle,children:["Vence quem tiver ",a.jsx("b",{children:"Saldo + Bens"}),". Eis o pdio:"]}),a.jsxs("div",{style:ln.podium,children:[a.jsx(Ya,{place:"second",player:o}),a.jsx(Ya,{place:"first",player:s,big:!0}),a.jsx(Ya,{place:"third",player:i})]}),a.jsx("div",{style:{display:"flex",gap:12,marginTop:18,flexWrap:"wrap",justifyContent:"center"},children:a.jsx("button",{style:ln.btn,onClick:l,children:" Voltar aos Lobbies"})})]})})}function Ya({place:t,player:e,big:n}){if(!e)return a.jsx("div",{style:{width:220}});const r={first:Qa("#d4af37","#f5d76e"),second:Qa("#9fa4ad","#cfd4db"),third:Qa("#b87333","#d28c45")},s={first:"1",second:"2",third:"3"}[t],o=r[t].ring,i=r[t].face;return a.jsxs("div",{style:{...ln.medalCol,transform:n?"translateY(-18px)":"none"},children:[a.jsx("div",{style:ln.ribbon}),a.jsx("div",{style:{...ln.medal,...o,width:n?180:150,height:n?180:150},children:a.jsx("div",{style:{...ln.medalFace,...i},children:a.jsx("div",{style:ln.medalNumber,children:s})})}),a.jsxs("div",{style:ln.cardBelow,children:[a.jsx("div",{style:{fontWeight:900,fontSize:16,lineHeight:1.2,textAlign:"center"},children:e.name}),a.jsxs("div",{style:{opacity:.9,fontSize:13,marginTop:4,textAlign:"center"},children:["Saldo: ",a.jsxs("b",{children:["$ ",Number(e.cash||0).toLocaleString()]}),a.jsx("br",{}),"Bens: ",a.jsxs("b",{children:["$ ",Number(e.bens||0).toLocaleString()]})]}),a.jsxs("div",{style:{marginTop:6,fontWeight:900,textAlign:"center"},children:["Patrimnio: ",a.jsxs("b",{children:["$ ",Number(e.patrimonio||0).toLocaleString()]})]})]})]})}function Qa(t,e){return{ring:{background:`radial-gradient(circle at 35% 30%, ${e} 0%, ${t} 65%, #000 120%)`,boxShadow:"0 12px 30px rgba(0,0,0,.35), inset 0 0 12px rgba(255,255,255,.12)"},face:{background:`conic-gradient(from 0deg, ${e}, ${t}, ${e})`}}}const ln={wrap:{pointerEvents:"auto",border:"1px solid rgba(255,255,255,.15)",background:"#11161f",color:"#eef1f6",borderRadius:16,padding:20,width:"min(900px, 92vw)",maxWidth:"92vw",textAlign:"center"},title:{margin:"0 0 6px",fontWeight:900,fontSize:28},subtitle:{margin:"0 0 14px",opacity:.9},podium:{display:"flex",alignItems:"flex-end",justifyContent:"center",gap:24,padding:"10px 0",flexWrap:"wrap"},medalCol:{display:"flex",flexDirection:"column",alignItems:"center"},ribbon:{width:16,height:70,background:"linear-gradient(#e41f1f,#9e1313)",borderRadius:4,marginBottom:-12},medal:{borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"3px solid rgba(255,255,255,.18)"},medalFace:{width:"85%",height:"85%",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 8px 18px rgba(0,0,0,.35), inset 0 -6px 10px rgba(255,255,255,.08)"},medalNumber:{fontWeight:900,fontSize:28,letterSpacing:1,textShadow:"0 2px 4px rgba(0,0,0,.45)"},cardBelow:{background:"#19202c",border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"10px 12px",width:220,marginTop:10},btn:{background:"#2a3342",color:"#fff",border:"1px solid rgba(255,255,255,.18)",borderRadius:10,padding:"10px 14px",fontWeight:800,cursor:"pointer"}},Gp=E.createContext({pushModal:()=>{},awaitTop:()=>Promise.resolve(null),resolveTop:()=>{},closeModal:()=>{},popModal:()=>{}});function Hx({children:t}){const[e,n]=E.useState([]),r=E.useRef(null),s=vn.useCallback(d=>{const h=r.current;r.current=null,n(f=>f.slice(0,-1)),d?d.action==="SKIP"?console.log('[ MODAL] Jogador clicou em "No comprar" ou fechou modal'):d.action==="ACK"?console.log('[ MODAL] Jogador clicou em "OK" ou confirmou'):d.action==="RECOVERY"?console.log('[ MODAL] Jogador escolheu "Recuperao Financeira"'):d.action==="BANKRUPT"?console.log('[ MODAL] Jogador escolheu "Declarar Falncia"'):d.type==="LOAN"||d.type==="FIRE"||d.type==="REDUCE"?console.log(`[ MODAL] Jogador executou ao de recuperao: ${d.type}`):d.bought||d.purchased?console.log("[ MODAL] Jogador comprou algo na modal"):console.log("[ MODAL] Jogador executou ao na modal:",d):console.log("[ MODAL] Jogador fechou modal (sem payload)"),h&&h(d)},[]),o=vn.useCallback(()=>s({action:"SKIP"}),[s]),i=vn.useCallback(()=>s(!1),[s]),l=vn.useCallback(d=>{var y;const h=((y=crypto==null?void 0:crypto.randomUUID)==null?void 0:y.call(crypto))||String(Date.now()+Math.random()),f=vn.cloneElement(d,{onResolve:x=>s(x)});n(x=>[...x,{id:h,el:f}])},[s]),c=vn.useCallback(()=>new Promise(d=>{r.current=d}),[]),u=E.useMemo(()=>({pushModal:l,awaitTop:c,resolveTop:s,closeModal:o,popModal:i}),[l,c,s,o,i]);return a.jsxs(Gp.Provider,{value:u,children:[t,e.map(({id:d,el:h})=>a.jsx(vn.Fragment,{children:h},d))]})}const Bt=()=>E.useContext(Gp)||{pushModal:()=>{},awaitTop:()=>Promise.resolve(null),resolveTop:()=>{},closeModal:()=>{},popModal:()=>{}};function Gx({playerName:t="Jogador"}){const{resolveTop:e,closeModal:n}=Bt();return a.jsx(Ao,{width:700,onClose:n,children:a.jsx("div",{className:"bankruptcyModal",children:a.jsxs("div",{className:"paper",style:{padding:24},children:[a.jsx("h2",{style:{marginTop:0},children:"Declarar Falncia"}),a.jsxs("p",{children:["Tem certeza que deseja declarar ",a.jsx("b",{children:"Falncia"}),", ",a.jsx("b",{children:t}),"?",a.jsx("br",{}),"Esta ao  irreversvel e voc no poder mais jogar."]}),a.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:24},children:[a.jsx("button",{onClick:()=>{n(),e(!1)},className:"btn",children:"Cancelar"}),a.jsx("button",{onClick:()=>{n(),e(!0)},className:"btn btn-danger",children:"Sim, declarar falncia"})]})]})})})}const gt={comum:{cap:2,baseFat:600,incFat:100,baseDesp:100,incDesp:100},inside:{cap:5,baseFat:1500,incFat:500,baseDesp:2e3,incDesp:100},field:{cap:5,baseFat:1500,incFat:500,baseDesp:2e3,incDesp:100}},ac={baseDesp:3e3,incDesp:500,boostByCert:[.2,.3,.4,.6]},Jp={A:{fat:1200,desp:700},B:{fat:600,desp:400},C:{fat:300,desp:200},D:{fat:100,desp:50}},Kp={A:{fat:1e3,desp:400},B:{fat:500,desp:200},C:{fat:200,desp:100},D:{fat:70,desp:50}},yt=t=>Number(t||0),Nn=(t={},e)=>{var n;return new Set(((n=t==null?void 0:t.trainingsByVendor)==null?void 0:n[e])||[]).size},Jd=t=>Number((t==null?void 0:t.az)||0)>0,Kd=t=>Number((t==null?void 0:t.am)||0)>0,Yd=t=>Number((t==null?void 0:t.rox)||0)>0,Yp=t=>Nn(t,"gestor");function Ln(t={}){const e=yt(t.vendedoresComuns),n=yt(t.insideSales),r=yt(t.fieldSales),s=e*gt.comum.cap+n*gt.inside.cap+r*gt.field.cap,o=yt(t.clients);return{cap:s,inAtt:Math.min(o,s)}}function mr(t={}){var $,S;const e=yt(t.vendedoresComuns),n=yt(t.insideSales),r=yt(t.fieldSales),s=yt(t.gestores??t.gestoresComerciais??t.managers),o=Nn(t,"comum"),i=Nn(t,"inside"),l=Nn(t,"field"),c=Nn(t,"gestor"),u=e*(gt.comum.baseFat+gt.comum.incFat*o),d=n*(gt.inside.baseFat+gt.inside.incFat*i),h=r*(gt.field.baseFat+gt.field.incFat*l);let f=u+d+h;const y=e+n+r,x=y>0?Math.min(1,s*7/y):0,b=ac.boostByCert[Math.min(3,Math.max(0,c))]||0;f=f*(1+x*b);const _=String(t.mixProdutos||"D").toUpperCase(),p=((($=Jp[_])==null?void 0:$.fat)||0)*yt(t.clients),m=String(t.erpLevel||"D").toUpperCase(),g=y+s,w=(((S=Kp[m])==null?void 0:S.fat)||0)*g,k=yt(t.revenue);return Math.max(0,Math.floor(f+p+w+k))}function Un(t={}){var k,T;const e=yt(t.vendedoresComuns),n=yt(t.insideSales),r=yt(t.fieldSales),s=yt(t.gestores??t.gestoresComerciais??t.managers),o=Nn(t,"comum"),i=Nn(t,"inside"),l=Nn(t,"field"),c=Nn(t,"gestor"),u=e*(gt.comum.baseDesp+gt.comum.incDesp*o),d=n*(gt.inside.baseDesp+gt.inside.incDesp*i),h=r*(gt.field.baseDesp+gt.field.incDesp*l),f=s*(ac.baseDesp+ac.incDesp*c),y=String(t.mixProdutos||"D").toUpperCase(),x=(((k=Jp[y])==null?void 0:k.desp)||0)*yt(t.clients),b=String(t.erpLevel||"D").toUpperCase(),_=e+n+r+s,p=(((T=Kp[b])==null?void 0:T.desp)||0)*_;return Math.max(0,Math.floor(u+d+h+f+x+p+0+1e3))}function Ne(t,e={}){const n={...t},r=(s,o)=>{n[s]=(n[s]??0)+o};if(Number.isFinite(e.cashDelta)&&r("cash",Number(e.cashDelta)),Number.isFinite(e.clientsDelta)&&r("clients",Number(e.clientsDelta)),Number.isFinite(e.manutencaoDelta)&&r("manutencao",Number(e.manutencaoDelta)),Number.isFinite(e.bensDelta)&&r("bens",Number(e.bensDelta)),Number.isFinite(e.vendedoresComunsDelta)&&r("vendedoresComuns",Number(e.vendedoresComunsDelta)),Number.isFinite(e.fieldSalesDelta)&&r("fieldSales",Number(e.fieldSalesDelta)),Number.isFinite(e.insideSalesDelta)&&r("insideSales",Number(e.insideSalesDelta)),Number.isFinite(e.gestoresDelta)){const s=Number(e.gestoresDelta);n.gestores=(n.gestores??0)+s,n.gestoresComerciais=(n.gestoresComerciais??0)+s,n.managers=(n.managers??0)+s}return Number.isFinite(e.revenueDelta)&&r("revenue",Number(e.revenueDelta)),typeof e.mixProdutosSet<"u"&&(n.mixProdutos=e.mixProdutosSet),e.mixBaseSet&&(n.mixBase={...n.mixBase||{},...e.mixBaseSet}),typeof e.erpLevelSet<"u"&&(n.erpLevel=e.erpLevelSet),Array.isArray(e.trainingsPush)&&e.trainingsPush.length&&(n.trainings=[...n.trainings||[],...e.trainingsPush]),Array.isArray(e.directBuysPush)&&e.directBuysPush.length&&(n.directBuys=[...n.directBuys||[],...e.directBuysPush]),n}function Qd(t,e){const{purchases:n=[],grandTotal:r=0}=e||{},s={personalizado:"az",fieldsales:"am",imersaomultiplier:"rox"},o={...t};return o.cash=(o.cash??0)-Number(r||0),o.bens=(o.bens??0)+Number(r||0),o.onboarding=!0,n.forEach(i=>{var h;const{vendorType:l,items:c=[]}=i||{};c.forEach(f=>{const y=s[f==null?void 0:f.id];y&&(o[y]=(o[y]??0)+1)});const u=String(l||"comum"),d=new Set(((h=o.trainingsByVendor)==null?void 0:h[u])||[]);c.forEach(f=>{f!=null&&f.id&&d.add(f.id)}),o.trainingsByVendor={...o.trainingsByVendor||{},[u]:Array.from(d)}}),o}function qi(t,e,n){return t===e?!1:t<e?n>t&&n<=e:n>t||n<=e}function dn(t){return t.reduce((e,n)=>e+(n!=null&&n.bankrupt?0:1),0)}function Jt(t,e){var o;const n=t.length;if(n===0)return 0;let r=(e+1)%n,s=0;for(;s<n;){if(!((o=t[r])!=null&&o.bankrupt))return r;r=(r+1)%n,s++}return e}class Qp{constructor(){this.errors=[],this.warnings=[]}validateGameState(e,n,r,s,o){return this.errors=[],this.warnings=[],this.validatePlayers(e),this.validateTurnState(e,n),this.validateGameOverState(e,s,o),this.validateRoundState(e,r),{isValid:this.errors.length===0,errors:this.errors,warnings:this.warnings}}validatePlayers(e){if(!Array.isArray(e)||e.length===0){this.addError("Jogadores invlidos: deve ser um array no vazio");return}e.forEach((n,r)=>{this.validatePlayer(n,r)}),this.validatePlayerUniqueness(e),this.validateAlivePlayers(e)}validatePlayer(e,n){const r=`Jogador ${n+1} (${e.name||"Sem nome"})`;e.id||this.addError(`${r}: ID  obrigatrio`),(typeof e.cash!="number"||e.cash<0)&&this.addError(`${r}: Cash deve ser um nmero no negativo (atual: ${e.cash})`),(typeof e.clients!="number"||e.clients<0)&&this.addError(`${r}: Clientes deve ser um nmero no negativo (atual: ${e.clients})`),this.validateResourceCounts(e,r),this.validateCalculations(e,r)}validateResourceCounts(e,n){["vendedoresComuns","fieldSales","insideSales","gestores","gestoresComerciais","managers"].forEach(o=>{const i=e[o];i!==void 0&&(typeof i!="number"||i<0)&&this.addError(`${n}: ${o} deve ser um nmero no negativo (atual: ${i})`)}),["az","am","rox"].forEach(o=>{const i=e[o];i!==void 0&&(typeof i!="number"||i<0)&&this.addError(`${n}: Certificado ${o} deve ser um nmero no negativo (atual: ${i})`)})}validateCalculations(e,n){try{const r=mr(e),s=Un(e),{cap:o,inAtt:i}=Ln(e);(typeof r!="number"||r<0)&&this.addError(`${n}: Faturamento calculado invlido: ${r}`),(typeof s!="number"||s<0)&&this.addError(`${n}: Manuteno calculada invlida: ${s}`),(typeof o!="number"||o<0)&&this.addError(`${n}: Capacidade calculada invlida: ${o}`),(typeof i!="number"||i<0||i>o)&&this.addError(`${n}: Clientes em atendimento invlido: ${i} (capacidade: ${o})`),this.isInitialState(e)&&s!==1150&&this.addError(`${n}: Manuteno inicial deve ser 1150, mas  ${s}`)}catch(r){this.addError(`${n}: Erro ao calcular faturamento/manuteno: ${r.message}`)}}isInitialState(e){return e.vendedoresComuns===1&&e.clients===1&&e.fieldSales===0&&e.insideSales===0&&e.gestores===0&&e.mixProdutos==="D"&&e.erpLevel==="D"&&(e.az||0)===0&&(e.am||0)===0&&(e.rox||0)===0}validatePlayerUniqueness(e){const n=e.map(s=>s.id).filter(Boolean),r=new Set(n);n.length!==r.size&&this.addError("IDs de jogadores devem ser nicos")}validateAlivePlayers(e){const n=dn(e);n===0&&this.addError("No pode haver zero jogadores vivos"),n===1&&this.addWarning("Apenas 1 jogador vivo - jogo deve terminar")}validateTurnState(e,n){if(typeof n!="number"||n<0||n>=e.length){this.addError(`TurnIdx invlido: ${n} (deve estar entre 0 e ${e.length-1})`);return}const r=e[n];if(!r){this.addError(`Jogador do turno no encontrado no ndice ${n}`);return}r.bankrupt&&this.addError(`Jogador do turno (${r.name}) est falido`)}validateGameOverState(e,n,r){const s=dn(e);n&&s>1&&this.addError("Jogo marcado como terminado mas h mais de 1 jogador vivo"),n&&!r&&this.addError("Jogo terminado mas no h vencedor definido"),r&&!n&&this.addError("H vencedor definido mas jogo no terminou"),r&&r.bankrupt&&this.addError("Vencedor no pode estar falido")}validateRoundState(e,n){(typeof n!="number"||n<1)&&this.addError(`Rodada invlida: ${n} (deve ser >= 1)`),n>10&&this.addWarning(`Rodada muito alta: ${n} (jogo pode estar travado)`)}validateAction(e,n,r){switch(this.errors=[],this.warnings=[],e.type){case"MOVE":this.validateMoveAction(e,n);break;case"BUY":this.validateBuyAction(e,n);break;case"HIRE":this.validateHireAction(e,n);break;case"BANKRUPT":this.validateBankruptAction(e,n);break;default:this.addWarning(`Tipo de ao no reconhecido: ${e.type}`)}return{isValid:this.errors.length===0,errors:this.errors,warnings:this.warnings}}validateMoveAction(e,n){(typeof e.steps!="number"||e.steps<1||e.steps>6)&&this.addError(`Passos invlidos: ${e.steps} (deve estar entre 1 e 6)`)}validateBuyAction(e,n){const r=e.cost||e.price||0;r>n.cash&&this.addError(`Saldo insuficiente: precisa de ${r}, tem ${n.cash}`)}validateHireAction(e,n){const r=e.cost||0;r>n.cash&&this.addError(`Saldo insuficiente para contratao: precisa de ${r}, tem ${n.cash}`)}validateBankruptAction(e,n){n.bankrupt||this.addWarning("Jogador declarando falncia mas no est marcado como falido")}addError(e){this.errors.push(e)}addWarning(e){this.warnings.push(e)}}function Jx(t,e,n,r,s){return new Qp().validateGameState(t,e,n,r,s)}function Kx(t,e,n){return new Qp().validateAction(t,e,n)}class Yx{constructor(){this.enabled=!1,this.validationHistory=[],this.maxHistorySize=100}toggle(){return this.enabled=!this.enabled,console.log(`[DEBUG MODE] ${this.enabled?"ATIVADO":"DESATIVADO"}`),this.enabled}validateGameState(e,n,r,s,o,i=""){if(!this.enabled)return;const l=Jx(e,n,r,s,o);return this.addToHistory({type:"GAME_STATE",context:i,timestamp:Date.now(),result:l}),l.isValid||console.error("[DEBUG MODE]  Estado do jogo invlido:",l.errors),l.warnings.length>0&&console.warn("[DEBUG MODE]  Avisos:",l.warnings),l}validateAction(e,n,r,s=""){if(!this.enabled)return;const o=Kx(e,n,r);return this.addToHistory({type:"ACTION",context:s,timestamp:Date.now(),action:e.type,player:n.name,result:o}),o.isValid||console.error(`[DEBUG MODE]  Ao invlida (${e.type}):`,o.errors),o}validateResourceChange(e,n,r,s){if(!this.enabled)return;const o=[],i=[];if(n.clients!==r.clients){const u=r.clients-n.clients;r.clients<0&&o.push(`Clientes no pode ser negativo: ${r.clients}`),Math.abs(u)>10&&i.push(`Mudana grande de clientes: ${u}`)}if(n.cash!==r.cash){const u=r.cash-n.cash;r.cash<0&&o.push(`Cash no pode ser negativo: ${r.cash}`),Math.abs(u)>5e4&&i.push(`Mudana grande de cash: ${u}`)}["vendedoresComuns","fieldSales","insideSales","gestores"].forEach(u=>{if(n[u]!==r[u]){const d=r[u]-n[u];r[u]<0&&o.push(`${u} no pode ser negativo: ${r[u]}`),Math.abs(d)>5&&i.push(`Mudana grande de ${u}: ${d}`)}});const c={isValid:o.length===0,errors:o,warnings:i};return this.addToHistory({type:"RESOURCE_CHANGE",context:s,timestamp:Date.now(),player:e.name,oldState:n,newState:r,result:c}),c.isValid||console.error("[DEBUG MODE]  Mudana de recurso invlida:",c.errors),c}validateCalculations(e,n=""){if(this.enabled)try{const r=mr(e),s=Un(e),{cap:o,inAtt:i}=Ln(e),l=[],c=[];(typeof r!="number"||r<0)&&l.push(`Faturamento invlido: ${r}`),(typeof s!="number"||s<0)&&l.push(`Manuteno invlida: ${s}`),(typeof o!="number"||o<0)&&l.push(`Capacidade invlida: ${o}`),(typeof i!="number"||i<0||i>o)&&l.push(`Clientes em atendimento invlido: ${i} (capacidade: ${o})`),this.isInitialState(e)&&s!==1150&&l.push(`Manuteno inicial deve ser 1150, mas  ${s}`);const u={isValid:l.length===0,errors:l,warnings:c,calculations:{faturamento:r,manutencao:s,cap:o,inAtt:i}};return this.addToHistory({type:"CALCULATIONS",context:n,timestamp:Date.now(),player:e.name,result:u}),u.isValid||console.error("[DEBUG MODE]  Clculos invlidos:",u.errors),u}catch(r){return console.error("[DEBUG MODE]  Erro ao validar clculos:",r),{isValid:!1,errors:[r.message],warnings:[]}}}isInitialState(e){return e.vendedoresComuns===1&&e.clients===1&&e.fieldSales===0&&e.insideSales===0&&e.gestores===0&&e.mixProdutos==="D"&&e.erpLevel==="D"}addToHistory(e){this.validationHistory.unshift(e),this.validationHistory.length>this.maxHistorySize&&(this.validationHistory=this.validationHistory.slice(0,this.maxHistorySize))}getHistory(){return this.validationHistory}clearHistory(){this.validationHistory=[]}getStats(){const e=this.validationHistory.length,n=this.validationHistory.filter(s=>!s.result.isValid).length,r=this.validationHistory.filter(s=>s.result.warnings.length>0).length;return{total:e,errors:n,warnings:r,errorRate:e>0?n/e*100:0,warningRate:e>0?r/e*100:0}}exportReport(){const e=this.getStats(),n={timestamp:new Date().toISOString(),stats:e,history:this.validationHistory};return console.log("[DEBUG MODE]  Relatrio de validao:",n),n}}const Ss=new Yx,Qx=(t,e,n,r,s,o)=>Ss.validateGameState(t,e,n,r,s,o),Xx=(t,e)=>Ss.validateCalculations(t,e),Zx=()=>Ss.getStats(),eb=()=>Ss.exportReport();function tb({players:t,turnIdx:e,round:n,gameOver:r,winner:s}){const[o,i]=E.useState(!1),[l,c]=E.useState({total:0,errors:0,warnings:0,errorRate:0,warningRate:0}),[u,d]=E.useState(!1),[h,f]=E.useState({x:0,y:0}),[y,x]=E.useState({x:0,y:0}),b=E.useRef(null);E.useEffect(()=>{const k=()=>{c(Zx())};k();const T=setInterval(k,1e3);return()=>clearInterval(T)},[]);const _=()=>{const k=Ss.toggle();i(k)},p=()=>{const k=eb(),T=new Blob([JSON.stringify(k,null,2)],{type:"application/json"}),$=URL.createObjectURL(T),S=document.createElement("a");S.href=$,S.download=`debug-report-${new Date().toISOString().slice(0,19)}.json`,S.click(),URL.revokeObjectURL($)},m=k=>{if(k.target.closest("button"))return;d(!0);const T=b.current.getBoundingClientRect();x({x:k.clientX-T.left,y:k.clientY-T.top})},g=k=>{u&&f({x:k.clientX-y.x,y:k.clientY-y.y})},w=()=>{d(!1)};return E.useEffect(()=>{if(u)return document.addEventListener("mousemove",g),document.addEventListener("mouseup",w),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",w)}},[u,y]),o?a.jsxs("div",{ref:b,style:{position:"fixed",top:h.y||10,left:h.x||10,zIndex:9999,background:"#1a1a1a",color:"#fff",padding:"12px",borderRadius:"8px",border:"1px solid #333",minWidth:"300px",maxHeight:"80vh",overflow:"auto",fontSize:"12px",fontFamily:"monospace",cursor:u?"grabbing":"grab",userSelect:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},onMouseDown:m,children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[a.jsx("h3",{style:{margin:0,color:"#4CAF50"},children:" Debug Panel"}),a.jsx("button",{onClick:_,style:{background:"#ff4444",color:"#fff",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",fontSize:"10px"},children:""})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estatsticas"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Total: ",l.total]}),a.jsxs("div",{style:{color:l.errors>0?"#ff4444":"#4CAF50"},children:["Erros: ",l.errors]}),a.jsxs("div",{style:{color:l.warnings>0?"#FFC107":"#4CAF50"},children:["Avisos: ",l.warnings]}),a.jsxs("div",{children:["Taxa Erro: ",l.errorRate.toFixed(1),"%"]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estado do Jogo"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Jogadores: ",t.length]}),a.jsxs("div",{children:["Turno: ",e+1]}),a.jsxs("div",{children:["Rodada: ",n]}),a.jsxs("div",{style:{color:r?"#ff4444":"#4CAF50"},children:["Status: ",r?"Fim":"Ativo"]}),s&&a.jsxs("div",{children:["Vencedor: ",s.name]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Jogadores"}),t.map((k,T)=>{var $;return a.jsxs("div",{style:{background:T===e?"#333":"transparent",padding:"4px",borderRadius:"4px",marginBottom:"2px",border:k.bankrupt?"1px solid #ff4444":"1px solid transparent"},children:[a.jsxs("div",{style:{fontWeight:"bold"},children:[k.name," ",k.bankrupt?"":""," ",T===e?"":""]}),a.jsxs("div",{style:{fontSize:"10px",opacity:.8},children:["Cash: $",(($=k.cash)==null?void 0:$.toLocaleString())||0," | Clientes: ",k.clients||0," | Vendedores: ",k.vendedoresComuns||0]})]},k.id)})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[a.jsx("button",{onClick:p,style:{background:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px"},children:" Exportar"}),a.jsx("button",{onClick:()=>Ss.clearHistory(),style:{background:"#FF9800",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px"},children:" Limpar"})]}),a.jsxs("div",{style:{marginTop:"12px",padding:"8px",background:"#333",borderRadius:"4px",fontSize:"10px"},children:[a.jsx("div",{style:{color:"#FFC107",marginBottom:"4px"},children:" Instrues:"}),a.jsx("div",{children:' Clique em " Debug" para ativar/desativar'}),a.jsx("div",{children:" Erros aparecem no console"}),a.jsx("div",{children:" Exporte relatrio para anlise"})]})]}):a.jsx("div",{style:{background:"#1a1a1a",color:"#fff",padding:"6px 10px",borderRadius:"4px",border:"1px solid #333",cursor:"pointer",fontSize:"11px",fontFamily:"monospace",display:"inline-block",userSelect:"none"},onClick:_,children:" Debug"})}function Mn({onResolve:t,requiredAmount:e=0,currentCash:n=0,title:r="Saldo insuficiente",message:s="Seu saldo atual no  suficiente para concluir esta compra.",okLabel:o="OK",showRecoveryOptions:i=!1,canClose:l=!0}){const c=E.useRef(null),u=E.useMemo(()=>Math.max(0,Number(e||0)-Number(n||0)),[e,n]),d=b=>`$ ${Number(b||0).toLocaleString()}`,h=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"ACK"})},f=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),!(i||!l)&&(t==null||t({action:"SKIP"}))},y=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"RECOVERY"})},x=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"BANKRUPT"})};return E.useEffect(()=>{const b=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var _,p;return(p=(_=c.current)==null?void 0:_.focus)==null?void 0:p.call(_)},0),()=>{document.body.style.overflow=b}},[]),a.jsx("div",{style:_t.wrap,role:"dialog","aria-modal":"true",onMouseDown:b=>{b.target===b.currentTarget&&b.stopPropagation()},children:a.jsxs("div",{style:_t.card,onMouseDown:b=>b.stopPropagation(),children:[!i&&l&&a.jsx("button",{type:"button",style:_t.close,onClick:f,"aria-label":"Fechar",children:""}),a.jsx("div",{style:_t.icon,children:""}),a.jsx("h2",{style:_t.title,children:r}),a.jsx("p",{style:_t.msg,children:s}),a.jsxs("div",{style:_t.grid,children:[a.jsxs("div",{style:_t.row,children:[a.jsx("span",{children:"Necessrio:"}),a.jsx("b",{children:d(e)})]}),a.jsxs("div",{style:_t.row,children:[a.jsx("span",{children:"Seu saldo:"}),a.jsx("b",{children:d(n)})]}),a.jsxs("div",{style:{..._t.row,color:"#fca5a5"},children:[a.jsx("span",{children:"Faltam:"}),a.jsx("b",{children:d(u)})]})]}),a.jsx("div",{style:_t.actions,children:i?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",style:{..._t.btn,background:"#f59e0b",color:"#fff",marginRight:"8px"},onClick:y,children:"Recuperao Financeira"}),a.jsx("button",{type:"button",style:{..._t.btn,background:"#dc2626",color:"#fff"},onClick:x,children:"Declarar Falncia"})]}):a.jsx("button",{ref:c,type:"button",style:{..._t.btn,background:"#6b7280",color:"#fff"},onClick:h,children:o})})]})})}const _t={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"grid",placeItems:"center",zIndex:1100},card:{width:"min(440px, 92vw)",background:"#1f2330",color:"#e9ecf1",borderRadius:16,padding:"18px 18px 16px",border:"1px solid rgba(255,255,255,.12)",boxShadow:"0 18px 50px rgba(0,0,0,.5)",position:"relative"},close:{position:"absolute",right:10,top:10,width:34,height:34,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},icon:{fontSize:28,lineHeight:1,marginBottom:6},title:{margin:"2px 0 6px",fontWeight:900,fontSize:20},msg:{opacity:.95,margin:"0 0 10px"},grid:{border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",marginBottom:12,background:"#171b26"},row:{display:"flex",justifyContent:"space-between",padding:"4px 0"},actions:{display:"flex",justifyContent:"center",marginTop:6},btn:{minWidth:120,padding:"10px 16px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer"}},Et={A:{compra:1e4,despesa:400,faturamento:1e3,color:"#1d4ed8",pill:"NVEL A"},B:{compra:4e3,despesa:200,faturamento:500,color:"#16a34a",pill:"NVEL B"},C:{compra:1500,despesa:100,faturamento:200,color:"#f59e0b",pill:"NVEL C"},D:{compra:500,despesa:50,faturamento:70,color:"#6b7280",pill:"NVEL D"}};function Xd({onResolve:t,currentCash:e=0,currentLevel:n=null}){const r=E.useRef(null),{pushModal:s,awaitTop:o}=Bt(),i=c=>{var u,d;(u=c==null?void 0:c.preventDefault)==null||u.call(c),(d=c==null?void 0:c.stopPropagation)==null||d.call(c),t==null||t({action:"SKIP"})},l=async c=>{if(console.log(`[ MODAL] Jogador clicou em "Comprar" ERP nvel ${c}`),n===c){console.log(`[ MODAL] Tentativa de comprar nvel j adquirido: ${c}`);return}const u=Et[c],d=Number((u==null?void 0:u.compra)||0),h=Number(e||0);if(h<d){s(a.jsx(Mn,{requiredAmount:d,currentCash:h,title:"Saldo insuficiente para comprar ERP",message:`Voc precisa de $ ${d.toLocaleString()} para o ERP nvel ${c}, mas possui $ ${h.toLocaleString()}.`,okLabel:"Entendi"})),await o();return}t==null||t({action:"BUY",level:c,values:u})};return E.useEffect(()=>{const c=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var u,d;return(d=(u=r.current)==null?void 0:u.focus)==null?void 0:d.call(u)},0),()=>{document.body.style.overflow=c}},[]),a.jsx("div",{style:Re.wrap,role:"dialog","aria-modal":"true","aria-label":"ERP/Sistemas",children:a.jsxs("div",{style:Re.card,children:[a.jsx("button",{ref:r,type:"button",style:Re.close,onClick:i,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Re.title,children:["Escolha o nvel de ",a.jsx("b",{children:"ERP / Sistemas"}),":"]}),a.jsxs("div",{style:Re.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"ERP / SISTEMAS"}),a.jsxs("div",{children:[a.jsx("b",{children:"Impacto mensal:"})," adiciona ",a.jsx("b",{children:"Despesa"})," e ",a.jsx("b",{children:"Faturamento"})," de acordo com o nvel."]}),a.jsxs("div",{children:["O nvel ",a.jsx("b",{children:"D"})," tambm pode ser adquirido."]})]}),a.jsxs("div",{style:Re.saldo,children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsxs("div",{style:Re.table,children:[a.jsxs("div",{style:Re.trHead,children:[a.jsx("div",{style:Re.th}),a.jsx("div",{style:{...Re.th,background:"#10214d"},children:"Nvel A"}),a.jsx("div",{style:{...Re.th,background:"#0f3a1c"},children:"Nvel B"}),a.jsx("div",{style:{...Re.th,background:"#4a3705"},children:"Nvel C"}),a.jsx("div",{style:{...Re.th,background:"#2a2f3b"},children:"Nvel D"})]}),a.jsx(Xa,{label:"COMPRA",fmt:!0,vA:Et.A.compra,vB:Et.B.compra,vC:Et.C.compra,vD:Et.D.compra}),a.jsx(Xa,{label:"DESPESA",fmt:!0,vA:Et.A.despesa,vB:Et.B.despesa,vC:Et.C.despesa,vD:Et.D.despesa}),a.jsx(Xa,{label:"FATURAMENTO",fmt:!0,vA:Et.A.faturamento,vB:Et.B.faturamento,vC:Et.C.faturamento,vD:Et.D.faturamento})]}),a.jsx("div",{style:Re.cards,children:["A","B","C","D"].map(c=>{const u=Et[c],d=n===c,h=d;return c==="D"&&console.log("[DEBUG] ERP Modal - k:",c,"currentLevel:",n,"isOwned:",d,"isDisabled:",h),a.jsxs("div",{style:{...Re.cardItem,borderColor:d?"#16a34a":"rgba(255,255,255,.15)",opacity:h?.6:1},children:[a.jsx("div",{style:{...Re.pill,background:d?"#16a34a":"#fff",color:d?"#fff":"#111"},children:d?" ADQUIRIDO":u.pill}),a.jsx("div",{style:{...Re.cardBadge,background:u.color}}),a.jsxs("ul",{style:Re.lines,children:[a.jsxs("li",{children:["Compra: ",a.jsxs("b",{children:["$ ",u.compra.toLocaleString()]})]}),a.jsxs("li",{children:["Despesa: ",a.jsxs("b",{children:["$ ",u.despesa.toLocaleString()]})]}),a.jsxs("li",{children:["Faturamento: ",a.jsxs("b",{children:["$ ",u.faturamento.toLocaleString()]})]})]}),a.jsx("button",{type:"button",style:{...Re.buyBtn,background:h?"#6b7280":"#2442f9",cursor:h?"not-allowed":"pointer"},onClick:()=>l(c),disabled:h,title:h?`ERP nvel ${c} j adquirido`:`Comprar ERP nvel ${c}`,children:h?"J Adquirido":`Comprar ${c}`})]},c)})}),a.jsx("div",{style:Re.actions,children:a.jsx("button",{type:"button",style:{...Re.bigBtn,background:"#444"},onClick:i,children:"No comprar"})})]})})}function Xa({label:t,vA:e,vB:n,vC:r,vD:s,fmt:o}){const i=l=>o?`$ ${Number(l).toLocaleString()}`:l;return a.jsxs("div",{style:Re.tr,children:[a.jsx("div",{style:{...Re.td,fontWeight:700},children:t}),a.jsx("div",{style:Re.td,children:i(e)}),a.jsx("div",{style:Re.td,children:i(n)}),a.jsx("div",{style:Re.td,children:i(r)}),a.jsx("div",{style:Re.td,children:i(s)})]})}const Re={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldo:{margin:"0 0 10px",padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,overflow:"hidden",marginBottom:12},trHead:{display:"grid",gridTemplateColumns:"1fr repeat(4, 1fr)",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"1fr repeat(4, 1fr)",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255/.06)"},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,marginTop:8},cardItem:{background:"#0f1320",border:"1px solid",borderRadius:14,padding:"12px",display:"flex",flexDirection:"column",gap:8},cardBadge:{width:"100%",height:6,borderRadius:999,opacity:.9},pill:{alignSelf:"flex-start",fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999,color:"#111"},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},buyBtn:{marginTop:"auto",padding:"10px 12px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer",background:"#2442f9",color:"#fff"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:14},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",color:"#fff",fontWeight:900,cursor:"pointer"}},ni=[{id:"personalizado",label:`Treinamento de venda personalizado
Casagrande Consultores`,price:500,cert:"azul",colors:{bg:"#0f2848",border:"#3b82f6",pill:"#60a5fa"}},{id:"fieldsales",label:`Curso Field Sales Collab
Multiplier Educao e
Casagrande Consultores`,price:500,cert:"amarelo",colors:{bg:"#3a3202",border:"#facc15",pill:"#fde047"}},{id:"imersaomultiplier",label:`Pacote Imerses
Multiplier Educao`,price:500,cert:"roxo",colors:{bg:"#2b0840",border:"#a855f7",pill:"#c084fc"}}];function Zd({onResolve:t,ownedByType:e={},canTrain:n={}}){const r=S=>typeof S=="string"&&S.trim()!==""&&!Number.isNaN(Number(S))?Number(S):S,s=S=>{const R=r(S);return typeof R=="number"?R>0:!!R},o=E.useMemo(()=>({comum:s(n.comum),field:s(n.field),inside:s(n.inside),gestor:s(n.gestor)}),[n]),i=ni.map(S=>S.id),l=E.useMemo(()=>[{id:"comum",label:"Vend. Comum"},{id:"field",label:"Field Sales"},{id:"inside",label:"Inside Sales"},{id:"gestor",label:"Gestor"}].filter(S=>o[S.id]).filter(S=>{const R=e[S.id]instanceof Set?e[S.id]:new Set(e[S.id]||[]);return i.some(v=>!R.has(v))}),[e,o]),[c,u]=E.useState(()=>new Set),[d,h]=E.useState(()=>new Set);E.useEffect(()=>{c.size===0&&l.length>0&&u(new Set([l[0].id]))},[l,c.size]);const f=E.useRef(null),y=E.useMemo(()=>{const S=[];if(d.size>0){const R=Array.from(d).map(D=>ni.find(P=>P.id===D)).filter(Boolean),v=R.reduce((D,P)=>D+((P==null?void 0:P.price)||0),0);c.forEach(D=>{S.push({vendorType:D,items:R,total:v})})}return S},[c,d]),x=E.useMemo(()=>y.reduce((S,R)=>S+R.total,0),[y]),b=E.useMemo(()=>{const S={azul:0,amarelo:0,roxo:0};return d.size>0&&Array.from(d).map(v=>ni.find(D=>D.id===v)).filter(Boolean).forEach(v=>{S[v.cert]=(S[v.cert]||0)+c.size}),S},[d,c.size]),_=E.useMemo(()=>{const S={};if(d.size>0){const R=Array.from(d);c.forEach(v=>{S[v]=R})}return S},[d,c]),p=S=>{u(R=>{const v=new Set(R);return v.has(S)?v.delete(S):v.add(S),v})},m=S=>{Array.from(c).some(v=>(e[v]instanceof Set?e[v]:new Set(e[v]||[])).has(S))||h(v=>{const D=new Set(v);return D.has(S)?D.delete(S):D.add(S),D})},g=()=>{y.length!==0&&(console.log('[ MODAL] Jogador clicou em "Comprar" treinamentos:',y),t==null||t({action:"BUY",purchases:y,grandTotal:x,bensDelta:x,certsCount:b,ownedUpdate:_}))},w=()=>{u(new Set),h(new Set)},k=S=>{var R,v;(R=S==null?void 0:S.preventDefault)==null||R.call(S),(v=S==null?void 0:S.stopPropagation)==null||v.call(S),t==null||t({action:"SKIP"})};E.useEffect(()=>{const S=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var R,v;return(v=(R=f.current)==null?void 0:R.focus)==null?void 0:v.call(R)},0),()=>{document.body.style.overflow=S}},[]);const T=l.length===0,$=!Object.values(o).some(Boolean);return a.jsx("div",{style:pt.wrap,role:"dialog","aria-modal":"true",children:a.jsxs("div",{style:pt.card,children:[a.jsx("button",{ref:f,type:"button",style:pt.close,onClick:k,"aria-label":"Fechar",children:""}),a.jsx("h2",{style:pt.title,children:"Escolha os vendedores e treinamentos que deseja comprar:"}),T?a.jsx("div",{style:pt.allDoneBox,children:$?"Nenhum profissional disponvel para treinar no momento.":"Todos os treinamentos j foram comprados para os profissionais disponveis."}):a.jsx(a.Fragment,{children:a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("p",{style:{margin:"0 0 8px",opacity:.9,fontSize:"14px"},children:"Selecione os tipos de vendedores que deseja treinar:"}),a.jsx("div",{style:{...pt.vendorRow,gridTemplateColumns:`repeat(${l.length}, minmax(0,1fr))`},children:l.map(S=>a.jsx("button",{type:"button",onClick:()=>p(S.id),style:{...pt.vendorBtn,background:c.has(S.id)?"#6f5bd6":"#2a2f3b",borderColor:c.has(S.id)?"rgba(255,255,255,.35)":"rgba(255,255,255,.15)"},children:S.label},S.id))})]})}),!T&&c.size>0&&a.jsxs(a.Fragment,{children:[a.jsx("p",{style:{margin:"10px 2px 14px",opacity:.9},children:"Escolha os treinamentos que sero aplicados a todos os tipos selecionados:"}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",background:"#2a2f3b",borderRadius:"8px",border:"1px solid rgba(255,255,255,.15)"},children:[a.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Tipos selecionados:"}),a.jsx("div",{style:{fontSize:"14px",opacity:.9},children:Array.from(c).map(S=>{const R=l.find(v=>v.id===S);return R==null?void 0:R.label}).join(", ")})]}),a.jsx("div",{style:pt.products,children:ni.map(S=>{const R=d.has(S.id),v=Array.from(c).some(D=>(e[D]instanceof Set?e[D]:new Set(e[D]||[])).has(S.id));return a.jsxs("button",{type:"button",onClick:()=>m(S.id),disabled:v,style:{...pt.productCard,background:S.colors.bg,borderColor:S.colors.border,boxShadow:R?`0 0 0 3px ${S.colors.pill}`:"none",opacity:v?.45:1,cursor:v?"not-allowed":"pointer"},title:v?"J adquirido para algum tipo selecionado":void 0,children:[a.jsxs("div",{style:pt.pill(S.colors.pill),children:["Certificado ",S.cert==="azul"?"Azul":S.cert==="amarelo"?"Amarelo":"Roxo"]}),a.jsx("div",{style:{whiteSpace:"pre-line",fontWeight:800,marginBottom:10},children:S.label}),a.jsxs("div",{style:{fontSize:22,fontWeight:900},children:["$ ",S.price.toLocaleString()]})]},S.id)})})]}),a.jsxs("div",{style:pt.actionsRow,children:[a.jsx("button",{type:"button",style:{...pt.smallBtn,background:"#3a4152"},onClick:w,children:"Limpar Tudo"}),a.jsx("div",{style:{flex:1}}),a.jsxs("div",{style:{fontWeight:900},children:["Total: $ ",x.toLocaleString(),c.size>1&&a.jsxs("span",{style:{fontSize:"12px",opacity:.8,marginLeft:"8px"},children:["(",d.size," treinamentos  ",c.size," tipos)"]})]})]}),a.jsxs("div",{style:pt.btnRow,children:[a.jsx("button",{type:"button",style:{...pt.bigBtn,background:"#444"},onClick:k,children:"No comprar"}),a.jsxs("button",{type:"button",disabled:y.length===0,style:{...pt.bigBtn,background:y.length>0?"#6f5bd6":"#3a3a3a",opacity:y.length>0?1:.6,cursor:y.length>0?"pointer":"not-allowed"},onClick:g,children:["Comprar (",y.length," tipo",y.length!==1?"s":"",")"]})]})]})]})})}const pt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",maxWidth:980,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},allDoneBox:{background:"#0f1320",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"14px",fontWeight:800,textAlign:"center"},vendorRow:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:10,marginBottom:12},vendorBtn:{padding:"10px 12px",borderRadius:10,border:"1px solid",color:"#fff",fontWeight:800,cursor:"pointer"},products:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:12,margin:"4px 0 10px"},productCard:{textAlign:"center",padding:"16px 14px",borderRadius:14,border:"2px solid",color:"#fff"},pill:t=>({display:"inline-block",background:t,color:"#111",fontWeight:900,padding:"4px 8px",borderRadius:999,marginBottom:8}),actionsRow:{display:"flex",alignItems:"center",gap:12,margin:"6px 0 6px"},smallBtn:{padding:"10px 14px",borderRadius:10,border:"none",color:"#fff",fontWeight:800,cursor:"pointer"},btnRow:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:12},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",color:"#fff",fontWeight:900,cursor:"pointer"}};function nb({onResolve:t,currentCash:e=0}){const n=E.useRef(null),r=i=>{var l,c;(l=i==null?void 0:i.preventDefault)==null||l.call(i),(c=i==null?void 0:i.stopPropagation)==null||c.call(i),console.log('[ MODAL] Jogador clicou em "No Comprar" ou boto X'),t==null||t({action:"SKIP"})};E.useEffect(()=>{const i=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var l,c;return(c=(l=n.current)==null?void 0:l.focus)==null?void 0:c.call(l)},0),()=>{document.body.style.overflow=i}},[]);const s=i=>()=>{t==null||t({action:"OPEN",open:String(i).toUpperCase()})},o=[{key:"mix",title:"Mix Produtos",lines:["Nvel A: $12000","Nvel B: $6000","Nvel C: $3000","Nvel D: $1000"],onBuy:s("MIX")},{key:"gestor",title:"Gestor Comercial",lines:["Contratao: $5000","Manuteno: $3000"],onBuy:s("MANAGER")},{key:"inside",title:"Inside Sales",lines:["Contratao: $3000","Manuteno: $2000"],onBuy:s("INSIDE")},{key:"field",title:"Field Sales",lines:["Contratao: $3000","Manuteno: $2000"],onBuy:s("FIELD")},{key:"vendedor",title:"Vendedor Comum",lines:["Contratao: $1500","Despesas: $1000"],onBuy:s("COMMON")},{key:"erp",title:"ERP/Sistemas",lines:["Nvel A: $10000","Nvel B: $4000","Nvel C: $1500","Nvel D: $500"],onBuy:s("ERP")},{key:"carteira",title:"Carteira de Clientes",lines:["Aquisio: $1000"],onBuy:s("CLIENTS")},{key:"training",title:"Treinamento",lines:["Azul: $500","Amarelo: $500","Roxo: $500"],onBuy:s("TRAINING")}];return a.jsx("div",{style:mn.wrap,role:"dialog","aria-modal":"true",children:a.jsxs("div",{style:mn.card,children:[a.jsx("button",{ref:n,type:"button",style:mn.close,onClick:r,"aria-label":"Fechar",children:""}),a.jsx("h2",{style:mn.title,children:"Direto de Compra  escolha uma casa para adquirir:"}),a.jsxs("div",{style:{marginBottom:8,opacity:.8,fontSize:13},children:["Saldo atual: ",a.jsxs("b",{children:["$",Number(e).toLocaleString()]})]}),a.jsx("div",{style:mn.grid,children:o.map(i=>a.jsxs("div",{style:mn.cell,children:[a.jsx("div",{style:mn.cellTitle,children:i.title}),a.jsx("ul",{style:mn.lines,children:i.lines.map((l,c)=>a.jsx("li",{children:l},c))}),a.jsx("button",{type:"button",style:mn.buyBtn,onClick:i.onBuy,children:"Comprar"})]},i.key))}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:16},children:a.jsx("button",{type:"button",style:{...mn.buyBtn,background:"#666"},onClick:r,children:"No Comprar"})})]})})}const mn={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(1000px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 16px",fontWeight:800},grid:{display:"grid",gridTemplateColumns:"repeat(4, minmax(180px, 1fr))",gap:12},cell:{background:"#0f1320",border:"1px solid rgba(255,255,255,.08)",borderRadius:12,padding:12,display:"flex",flexDirection:"column",gap:8,minHeight:160},cellTitle:{fontWeight:800,marginBottom:4},lines:{margin:0,padding:"0 0 0 16px",opacity:.85,lineHeight:1.3},buyBtn:{marginTop:"auto",alignSelf:"center",minWidth:140,padding:"10px 14px",borderRadius:10,border:"none",background:"#3fbf49",color:"#09110f",fontWeight:900,cursor:"pointer"}};function ef({onResolve:t,currentCash:e=0}){const n=E.useRef(null),[r,s]=E.useState(""),{pushModal:o,awaitTop:i}=Bt(),l=3e3,c=2e3,u=1500,d=E.useMemo(()=>{const m=Number(r);return Number.isFinite(m)&&m>0?Math.floor(m):0},[r]),h=d*l,f=d>0,y=Math.max(0,Math.floor(Number(e||0)/l)),x=m=>{var g,w;(g=m==null?void 0:m.preventDefault)==null||g.call(m),(w=m==null?void 0:m.stopPropagation)==null||w.call(m),t==null||t({action:"SKIP"})},b=m=>{const g=Number(r)||0,w=Math.min(y||1/0,g+m);s(w||"")},_=()=>s(y||""),p=async()=>{if(!f)return;const m=Number(e||0),g=Number(h||0);if(m<g){o(a.jsx(Mn,{requiredAmount:g,currentCash:m,title:"Saldo insuficiente para contratar Inside Sales",message:`Voc precisa de $ ${g.toLocaleString()} mas possui $ ${m.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",qty:d,headcount:d,unitHire:l,total:h,cost:h,totalCost:h,baseExpense:c,baseRevenue:u})};return E.useEffect(()=>{const m=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var g,w;return(w=(g=n.current)==null?void 0:g.focus)==null?void 0:w.call(g)},0),()=>{document.body.style.overflow=m}},[]),a.jsx("div",{style:Ve.wrap,role:"dialog","aria-modal":"true","aria-label":"Inside Sales",children:a.jsxs("div",{style:Ve.card,children:[a.jsx("button",{ref:n,type:"button",style:Ve.close,onClick:x,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Ve.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Inside Sales"})," quer comprar:"]}),a.jsxs("div",{style:Ve.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"INSIDE SALES (SDR/BDR + CLOSER + CS)"}),a.jsxs("div",{children:[a.jsx("b",{children:"Base para clculo despesa:"}),"  quantidade ",a.jsx("b",{children:"field sales"})," ou ",a.jsx("b",{children:"inside sales"}),"."]}),a.jsxs("div",{children:[a.jsx("b",{children:"Base para clculo faturamento:"}),"  quantidade ",a.jsx("b",{children:"mxima de clientes que cada vendedor pode atender"}),"."]})]}),a.jsxs("div",{style:Ve.saldoRow,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:y})]})]}),a.jsxs("div",{style:Ve.inputRow,children:[a.jsx("input",{type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Inside Sales",value:r,onChange:m=>s(m.target.value),style:Ve.input}),a.jsxs("div",{style:Ve.quickBtns,children:[a.jsx("button",{type:"button",style:Ve.quickBtn,onClick:()=>b(1),children:"+1"}),a.jsx("button",{type:"button",style:Ve.quickBtn,onClick:()=>b(5),children:"+5"}),a.jsx("button",{type:"button",style:Ve.quickBtn,onClick:()=>b(10),children:"+10"}),a.jsx("button",{type:"button",style:{...Ve.quickBtn,fontWeight:900},onClick:_,children:"Mx"})]}),a.jsxs("div",{style:Ve.totalBox,children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(h).toLocaleString()]})]})]}),a.jsxs("div",{style:Ve.cards,children:[a.jsx(ri,{title:"Sem certificado",bg:"#2a2f3b",pill:"BASE",lines:[`Contratao: $ ${l.toLocaleString()}`,`Despesa: $ ${c.toLocaleString()}`,`Faturamento: $ ${u.toLocaleString()}`]}),a.jsx(ri,{title:"1 certificado",bg:"#f1c40f",pill:"NVEL 1",dark:!0,lines:["Contratao: ","Despesa: $ 2.100","Faturamento: $ 2.000"]}),a.jsx(ri,{title:"2 certificados",bg:"#a78bfa",pill:"NVEL 2",dark:!0,lines:["Contratao: ","Despesa: $ 2.200","Faturamento: $ 2.500"]}),a.jsx(ri,{title:"3 certificados",bg:"#8b5cf6",pill:"NVEL 3",dark:!0,lines:["Contratao: ","Despesa: $ 2.300","Faturamento: $ 3.000"]})]}),a.jsxs("div",{style:Ve.actions,children:[a.jsx("button",{type:"button",style:{...Ve.bigBtn,background:"#666",color:"#fff"},onClick:x,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...Ve.bigBtn,background:f?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:p,disabled:!f,title:f?void 0:"Informe uma quantidade vlida",children:["Comprar ",f?`($ ${h.toLocaleString()})`:""]})]})]})})}function ri({title:t,pill:e,lines:n,bg:r,dark:s=!1}){return a.jsxs("div",{style:{...Ve.cardItem,background:r,color:s?"#111":"#fff",borderColor:"rgba(255,255,255,.15)"},children:[a.jsxs("div",{style:Ve.cardHeader,children:[a.jsx("span",{style:{...Ve.pill,background:s?"#111":"#fff",color:s?"#fff":"#111"},children:e}),a.jsx("div",{style:{fontWeight:900},children:t})]}),a.jsx("ul",{style:Ve.lines,children:n.map((o,i)=>a.jsx("li",{children:o},i))})]})}const Ve={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldoRow:{display:"flex",justifyContent:"space-between",gap:12,padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10,marginBottom:8},inputRow:{display:"grid",gridTemplateColumns:"1fr auto auto",alignItems:"center",gap:10,marginBottom:12},input:{height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6},quickBtn:{minWidth:44,height:42,borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",fontWeight:800,cursor:"pointer",padding:"0 10px"},totalBox:{padding:"8px 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#0f1320",fontWeight:900},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,margin:"8px 0 14px"},cardItem:{border:"1px solid",borderRadius:14,padding:"14px"},cardHeader:{display:"flex",alignItems:"center",gap:8,marginBottom:8},pill:{fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:8},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function tf({onResolve:t,unitAcquisition:e=1e3,unitMaintenance:n=50,currentCash:r=0}){const s=E.useRef(null),o=E.useRef(null),{pushModal:i,awaitTop:l}=Bt(),[c,u]=E.useState(""),d=E.useMemo(()=>{const k=Math.floor(Number(c));return Number.isFinite(k)&&k>0?k:0},[c]),h=Number(e||0),f=Number(n||0),y=Number(r||0),x=E.useMemo(()=>h<=0?0:Math.max(0,Math.floor(y/h)),[y,h]),b=d*h,_=d*f,p=d>0,m=k=>{var T,$;(T=k==null?void 0:k.preventDefault)==null||T.call(k),($=k==null?void 0:k.stopPropagation)==null||$.call(k),t==null||t({action:"SKIP"})},g=async()=>{if(p){if(y<b){i(a.jsx(Mn,{requiredAmount:b,currentCash:y,title:"Saldo insuficiente para comprar clientes",message:"Voc no possui saldo suficiente para concluir esta aquisio.",okLabel:"Entendi"})),await l();return}t==null||t({action:"BUY",qty:d,unitAcquisition:h,totalCost:b,unitMaintenance:f,maintenanceDelta:_,bensDelta:b,clientsAdded:d})}};E.useEffect(()=>{const k=document.body.style.overflow;document.body.style.overflow="hidden";const T=setTimeout(()=>{var R,v;return(v=(R=s.current)==null?void 0:R.focus)==null?void 0:v.call(R)},0),$=setTimeout(()=>{var R,v;return(v=(R=o.current)==null?void 0:R.focus)==null?void 0:v.call(R)},50),S=R=>{R.key==="Enter"&&(R.preventDefault(),g())};return window.addEventListener("keydown",S),()=>{document.body.style.overflow=k,window.removeEventListener("keydown",S),clearTimeout(T),clearTimeout($)}},[]);const w=k=>{const T=Math.max(0,Math.min(Math.floor(Number(k)||0),1e6));u(String(T))};return a.jsx("div",{style:nt.wrap,role:"dialog","aria-modal":"true",onMouseDown:k=>{k.target===k.currentTarget&&k.stopPropagation()},children:a.jsxs("div",{style:nt.card,onMouseDown:k=>k.stopPropagation(),children:[a.jsx("button",{ref:s,type:"button",style:nt.close,onClick:m,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:nt.title,children:["Voc pode escolher quantos clientes quer comprar,",a.jsx("br",{}),"Digite o nmero de clientes:"]}),a.jsxs("p",{style:nt.warn,children:[a.jsx("b",{children:"Mas cuidado com a capacidade de atendimento da sua equipe!"}),a.jsx("br",{}),"Se o jogador adquirir mais clientes do que os vendedores podem atender, assim que passar na casa ",a.jsx("i",{children:"Faturamento do Ms"})," no receber o faturamento dos clientes excedentes e perder o(s) cliente(s) que no foram atendidos."]}),a.jsxs("div",{style:nt.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",y.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:x})]})]}),a.jsxs("div",{style:nt.qtyRow,children:[a.jsx("input",{ref:o,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Clientes",value:c,onChange:k=>w(k.target.value),style:nt.input}),a.jsxs("div",{style:nt.quickBtns,children:[a.jsx("button",{type:"button",style:nt.qbtn,onClick:()=>w(d+1),children:"+1"}),a.jsx("button",{type:"button",style:nt.qbtn,onClick:()=>w(d+5),children:"+5"}),a.jsx("button",{type:"button",style:nt.qbtn,onClick:()=>w(d+10),children:"+10"}),a.jsx("button",{type:"button",style:nt.qbtn,onClick:()=>w(x),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:nt.summary,children:[a.jsxs("div",{children:["Preo por cliente: ",a.jsxs("b",{children:["$ ",h.toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal por cliente: ",a.jsxs("b",{children:["$ ",f.toLocaleString()]})]})]}),a.jsxs("div",{style:nt.summaryStrong,children:[a.jsxs("div",{children:["Total compra: ",a.jsxs("b",{children:["$ ",Number(b).toLocaleString()]})]}),a.jsxs("div",{children:["Manuteno mensal adicionada: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]})]}),a.jsxs("div",{style:nt.actions,children:[a.jsx("button",{type:"button",style:{...nt.bigBtn,background:"#666",color:"#fff"},onClick:m,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...nt.bigBtn,background:p?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:g,disabled:!p,title:p?y<b?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",p?`($ ${b.toLocaleString()})`:""]})]})]})})}const nt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(820px, 92vw)",maxWidth:820,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},warn:{background:"#271c12",border:"1px solid rgba(255,180,0,.35)",color:"#ffd489",borderRadius:10,padding:"10px 12px",margin:"0 0 12px"},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},summary:{display:"flex",justifyContent:"space-between",gap:10,border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginBottom:8,fontWeight:700,flexWrap:"wrap"},summaryStrong:{display:"flex",justifyContent:"space-between",gap:10,border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginBottom:10,fontWeight:800,flexWrap:"wrap"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:4,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function nf({onResolve:t,unitHire:e=5e3,unitExpense:n=3e3,managesUpTo:r=7,currentCash:s=0}){const o=E.useRef(null),i=E.useRef(null),{pushModal:l,awaitTop:c,closeTop:u}=Bt(),[d,h]=E.useState(""),f=Number(e||0),y=Number(n||0),x=Number(s||0),b=E.useMemo(()=>{const S=Math.floor(Number(d));return Number.isFinite(S)&&S>0?S:0},[d]),_=E.useMemo(()=>f<=0?0:Math.max(0,Math.floor(x/f)),[x,f]),p=b*f,m=b*y,g=b>0,w=S=>{const R=Math.floor(Number(S)||0),v=Math.max(0,Math.min(R,1e6));h(String(v))},k=S=>{if(typeof u=="function")return u(S);t==null||t(S)},T=S=>{var R,v;(R=S==null?void 0:S.preventDefault)==null||R.call(S),(v=S==null?void 0:S.stopPropagation)==null||v.call(S),k({action:"SKIP"})},$=async()=>{if(g){if(x<p){l(a.jsx(Mn,{requiredAmount:p,currentCash:x,title:"Saldo insuficiente para contratar Gestores",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await c();return}k({action:"BUY",role:"MANAGER",qty:b,headcount:b,gestoresDelta:b,unitHire:f,unitExpense:y,totalHire:p,totalExpense:m,cost:p,total:p,cashDelta:-p,expenseDelta:m,hudUpdate:{category:"Gestores Comerciais",addQty:b}})}};return E.useEffect(()=>{const S=document.body.style.overflow;document.body.style.overflow="hidden";const R=setTimeout(()=>{var P,B;return(B=(P=o.current)==null?void 0:P.focus)==null?void 0:B.call(P)},0),v=setTimeout(()=>{var P,B;return(B=(P=i.current)==null?void 0:P.focus)==null?void 0:B.call(P)},60),D=P=>{P.key==="Enter"&&(P.preventDefault(),$())};return window.addEventListener("keydown",D),()=>{document.body.style.overflow=S,window.removeEventListener("keydown",D),clearTimeout(R),clearTimeout(v)}},[]),a.jsx("div",{style:_e.wrap,role:"dialog","aria-modal":"true",onMouseDown:S=>{S.target===S.currentTarget&&S.stopPropagation()},children:a.jsxs("div",{style:_e.card,onMouseDown:S=>S.stopPropagation(),children:[a.jsx("button",{ref:o,type:"button",style:_e.close,onClick:T,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:_e.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Gestores"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de gestores:"]}),a.jsxs("div",{style:_e.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",x.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:_})]})]}),a.jsxs("div",{style:_e.qtyRow,children:[a.jsx("input",{ref:i,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Gestores",value:d,onChange:S=>w(S.target.value),style:_e.input}),a.jsxs("div",{style:_e.quickBtns,children:[a.jsx("button",{type:"button",style:_e.qbtn,onClick:()=>w(b+1),children:"+1"}),a.jsx("button",{type:"button",style:_e.qbtn,onClick:()=>w(b+5),children:"+5"}),a.jsx("button",{type:"button",style:_e.qbtn,onClick:()=>w(b+10),children:"+10"}),a.jsx("button",{type:"button",style:_e.qbtn,onClick:()=>w(_),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:_e.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"GESTOR COMERCIAL"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo de despesa: ",a.jsx("b",{children:"x quantidade de Gestores"}),".",a.jsx("br",{}),"Cada Gestor gerencia at ",a.jsx("b",{children:r})," colaboradores."]}),a.jsxs("div",{style:_e.table,children:[a.jsxs("div",{style:_e.trHead,children:[a.jsx("div",{style:_e.th,children:"Certificao"}),a.jsx("div",{style:_e.th,children:"Contratao"}),a.jsx("div",{style:_e.th,children:"Despesa"}),a.jsx("div",{style:_e.th,children:"Efeito"})]}),a.jsx(si,{label:"Sem Certificado",hire:5e3,expense:3e3,revenue:"potencializa colaboradores em 20%"}),a.jsx(si,{label:"Com 1 certificado",hire:"-",expense:3500,revenue:"potencializa colaboradores em 30%"}),a.jsx(si,{label:"Com 2 certificados",hire:"-",expense:4e3,revenue:"potencializa colaboradores em 40%"}),a.jsx(si,{label:"Com 3 certificados",hire:"-",expense:4500,revenue:"potencializa colaboradores em 60%"})]})]}),a.jsxs("div",{style:_e.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / gestor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / gestor"]})]}),a.jsxs("div",{style:_e.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(m).toLocaleString()]})]})]}),a.jsxs("div",{style:_e.actions,children:[a.jsx("button",{type:"button",style:{..._e.bigBtn,background:"#666",color:"#fff"},onClick:T,children:"No comprar"}),a.jsxs("button",{type:"button",style:{..._e.bigBtn,background:g?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:$,disabled:!g,title:g?x<p?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",g?`(${b})`:""]})]})]})})}function si({label:t,hire:e,expense:n,revenue:r}){const s=o=>typeof o=="number"?`$ ${Number(o).toLocaleString()}`:o;return a.jsxs("div",{style:_e.tr,children:[a.jsx("div",{style:_e.td,children:t}),a.jsx("div",{style:_e.td,children:s(e)}),a.jsx("div",{style:_e.td,children:s(n)}),a.jsx("div",{style:_e.td,children:r})]})}const _e={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"12px",background:"#101522",marginBottom:12},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,overflow:"hidden"},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 3fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 3fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function rf({onResolve:t,unitHire:e=3e3,unitExpense:n=2e3,attendsUpTo:r=5,currentCash:s=0}){const o=E.useRef(null),i=E.useRef(null),{pushModal:l,awaitTop:c}=Bt(),[u,d]=E.useState(""),h=Number(e||0),f=Number(n||0),y=Number(s||0),x=E.useMemo(()=>{const S=Math.floor(Number(u));return Number.isFinite(S)&&S>0?S:0},[u]),b=E.useMemo(()=>h<=0?0:Math.max(0,Math.floor(y/h)),[y,h]),_=x*h,p=x*f,g=x*1500,w=x>0,k=S=>{const R=Math.floor(Number(S)||0),v=Math.max(0,Math.min(R,1e6));d(String(v))},T=S=>{var R,v;(R=S==null?void 0:S.preventDefault)==null||R.call(S),(v=S==null?void 0:S.stopPropagation)==null||v.call(S),t==null||t({action:"SKIP"})},$=async()=>{if(w){if(y<_){l(a.jsx(Mn,{requiredAmount:_,currentCash:y,title:"Saldo insuficiente para contratar Field Sales",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await c();return}t==null||t({action:"BUY",qty:x,unitHire:h,unitExpense:f,totalHire:_,totalExpense:p,cashDelta:-_,expenseDelta:p,revenueDelta:g,cost:_,total:_,role:"FIELD"})}};return E.useEffect(()=>{const S=document.body.style.overflow;document.body.style.overflow="hidden";const R=setTimeout(()=>{var P,B;return(B=(P=o.current)==null?void 0:P.focus)==null?void 0:B.call(P)},0),v=setTimeout(()=>{var P,B;return(B=(P=i.current)==null?void 0:P.focus)==null?void 0:B.call(P)},50),D=P=>{P.key==="Enter"&&(P.preventDefault(),$())};return window.addEventListener("keydown",D),()=>{document.body.style.overflow=S,window.removeEventListener("keydown",D),clearTimeout(R),clearTimeout(v)}},[]),a.jsx("div",{style:Ee.wrap,role:"dialog","aria-modal":"true",onMouseDown:S=>{S.target===S.currentTarget&&S.stopPropagation()},children:a.jsxs("div",{style:Ee.card,onMouseDown:S=>S.stopPropagation(),children:[a.jsx("button",{ref:o,type:"button",style:Ee.close,onClick:T,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Ee.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Field Sales"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de vendedores:"]}),a.jsxs("div",{style:Ee.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",y.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{style:Ee.qtyRow,children:[a.jsx("input",{ref:i,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Field Sales",value:u,onChange:S=>k(S.target.value),style:Ee.input}),a.jsxs("div",{style:Ee.quickBtns,children:[a.jsx("button",{type:"button",style:Ee.qbtn,onClick:()=>k(x+1),children:"+1"}),a.jsx("button",{type:"button",style:Ee.qbtn,onClick:()=>k(x+5),children:"+5"}),a.jsx("button",{type:"button",style:Ee.qbtn,onClick:()=>k(x+10),children:"+10"}),a.jsx("button",{type:"button",style:Ee.qbtn,onClick:()=>k(b),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:Ee.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"FIELD SALES (REPRESENTANTES COMERCIAIS)"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo de despesa: ",a.jsx("b",{children:"x quantidade de Field Sales"}),".",a.jsx("br",{}),"Base para clculo de faturamento: ",a.jsx("b",{children:"x quantidade mxima de clientes que cada vendedor pode atender"}),".",a.jsx("br",{}),"Cada vendedor atende at ",a.jsx("b",{children:r})," clientes."]}),a.jsxs("div",{style:Ee.table,children:[a.jsxs("div",{style:Ee.trHead,children:[a.jsx("div",{style:Ee.th,children:"Certificao"}),a.jsx("div",{style:Ee.th,children:"Contratao"}),a.jsx("div",{style:Ee.th,children:"Despesa"}),a.jsx("div",{style:Ee.th,children:"Faturamento"})]}),a.jsx(oi,{label:"S/ Certificado",hire:"$ 3.000",expense:"$ 2.000",revenue:"$ 1.500"}),a.jsx(oi,{label:"Com 1 certificado",hire:"-",expense:"$ 2.100",revenue:"$ 2.000"}),a.jsx(oi,{label:"Com 2 certificados",hire:"-",expense:"$ 2.200",revenue:"$ 2.500"}),a.jsx(oi,{label:"Com 3 certificados",hire:"-",expense:"$ 2.300",revenue:"$ 3.000"})]})]}),a.jsxs("div",{style:Ee.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / vendedor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / vendedor"]})]}),a.jsxs("div",{style:Ee.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]})]}),a.jsxs("div",{style:Ee.actions,children:[a.jsx("button",{type:"button",style:{...Ee.bigBtn,background:"#666",color:"#fff"},onClick:T,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...Ee.bigBtn,background:w?"#75e16c":"#365b31",color:"#0b120a"},onClick:$,disabled:!w,title:w?y<_?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",w?`(${x})`:""]})]})]})})}function oi({label:t,hire:e,expense:n,revenue:r}){return a.jsxs("div",{style:Ee.tr,children:[a.jsx("div",{style:Ee.td,children:t}),a.jsx("div",{style:Ee.td,children:e}),a.jsx("div",{style:Ee.td,children:n}),a.jsx("div",{style:Ee.td,children:r})]})}const Ee={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"12px",background:"#101522",marginBottom:12},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,overflow:"hidden"},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function sf({onResolve:t,unitHire:e=1500,unitExpense:n=1e3,attendsUpTo:r=2,currentCash:s=0}){const[o,i]=E.useState(""),l=E.useRef(null),c=E.useRef(null),{pushModal:u,awaitTop:d,closeTop:h}=Bt(),f=Number(e||0),y=Number(n||0),x=Number(s||0),b=600,_=E.useMemo(()=>{const R=Math.floor(Number(o));return Number.isFinite(R)&&R>0?R:0},[o]),p=E.useMemo(()=>f<=0?0:Math.max(0,Math.floor(x/f)),[x,f]),m=E.useMemo(()=>_*f,[_,f]),g=E.useMemo(()=>_*y,[_,y]),w=_>0,k=R=>{const v=Math.floor(Number(R)||0),D=Math.max(0,Math.min(v,1e6));i(String(D))},T=R=>{if(typeof h=="function")return h(R);t==null||t(R)},$=R=>{var v;(v=R==null?void 0:R.stopPropagation)==null||v.call(R),T({action:"SKIP"})},S=async()=>{if(!w)return;if(x<m){u(a.jsx(Mn,{requiredAmount:m,currentCash:x,title:"Saldo insuficiente para contratar vendedores",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await d();return}const R={action:"BUY",role:"COMMON",qty:_,headcount:_,unitHire:f,unitExpense:y,totalHire:m,totalExpense:g,total:m,cost:m,attendsUpTo:r,cashDelta:-m,expenseDelta:g,revenueDelta:b*_,revenuePerSeller:b,hudUpdate:{category:"Vendedores Comuns",addQty:_}};T(R)};return E.useEffect(()=>{const R=document.body.style.overflow;document.body.style.overflow="hidden";const v=setTimeout(()=>{var B,be;return(be=(B=l.current)==null?void 0:B.focus)==null?void 0:be.call(B)},0),D=setTimeout(()=>{var B,be;return(be=(B=c.current)==null?void 0:B.focus)==null?void 0:be.call(B)},50),P=B=>{B.key==="Enter"&&(B.preventDefault(),S())};return window.addEventListener("keydown",P),()=>{document.body.style.overflow=R,window.removeEventListener("keydown",P),clearTimeout(v),clearTimeout(D)}},[]),a.jsx("div",{style:ke.wrap,role:"dialog","aria-modal":"true","aria-label":"Comprar Vendedores Comuns",onMouseDown:R=>{R.target===R.currentTarget&&R.stopPropagation()},children:a.jsxs("div",{style:ke.card,onMouseDown:R=>R.stopPropagation(),children:[a.jsx("button",{ref:l,type:"button",style:ke.close,onClick:$,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:ke.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Vendedores Comuns"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de vendedores:"]}),a.jsxs("div",{style:ke.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",x.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:p})]})]}),a.jsxs("div",{style:ke.qtyRow,children:[a.jsx("input",{ref:c,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Vendedores Comuns",value:o,onChange:R=>k(R.target.value),style:ke.input}),a.jsxs("div",{style:ke.quickBtns,children:[a.jsx("button",{type:"button",style:ke.qbtn,onClick:()=>k(_+1),children:"+1"}),a.jsx("button",{type:"button",style:ke.qbtn,onClick:()=>k(_+5),children:"+5"}),a.jsx("button",{type:"button",style:ke.qbtn,onClick:()=>k(_+10),children:"+10"}),a.jsx("button",{type:"button",style:ke.qbtn,onClick:()=>k(p),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:ke.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"VENDEDOR COMUM (FAZ TUDO)"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo despesa: ",a.jsx("b",{children:"x quantidade vendedor comum"}),".",a.jsx("br",{}),"Base para clculo faturamento: ",a.jsx("b",{children:"x quantidade mxima de clientes que cada vendedor pode atender"}),".",a.jsx("br",{}),a.jsxs("b",{children:["Atende at ",r," clientes"]}),"."]}),a.jsxs("div",{style:ke.table,children:[a.jsxs("div",{style:ke.trHead,children:[a.jsx("div",{style:ke.th,children:"Certificao"}),a.jsx("div",{style:ke.th,children:"Contratao"}),a.jsx("div",{style:ke.th,children:"Despesa"}),a.jsx("div",{style:ke.th,children:"Faturamento"})]}),a.jsx(ii,{label:"S/ Certificado",hire:"$ 1.500",expense:"$ 1.000",revenue:"$ 600"}),a.jsx(ii,{label:"Com 1 certificado",hire:"-",expense:"$ 1.100",revenue:"$ 700"}),a.jsx(ii,{label:"Com 2 certificados",hire:"-",expense:"$ 1.200",revenue:"$ 800"}),a.jsx(ii,{label:"Com 3 certificados",hire:"-",expense:"$ 1.300",revenue:"$ 900"})]})]}),a.jsxs("div",{style:ke.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / vendedor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / vendedor"]})]}),a.jsxs("div",{style:ke.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(m).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(g).toLocaleString()]})]})]}),a.jsxs("div",{style:ke.actions,children:[a.jsx("button",{type:"button",style:{...ke.bigBtn,background:"#666",color:"#fff"},onClick:$,children:"No comprar"}),a.jsx("button",{type:"button",disabled:!w,style:{...ke.bigBtn,background:w?"#7cbe1a":"#3a3f4a",color:"#0d1200",fontWeight:900},onClick:S,title:w?x<m?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:"Comprar"})]})]})})}function ii({label:t,hire:e,expense:n,revenue:r}){return a.jsxs("div",{style:ke.tr,children:[a.jsx("div",{style:ke.td,children:t}),a.jsx("div",{style:ke.td,children:e}),a.jsx("div",{style:ke.td,children:n}),a.jsx("div",{style:ke.td,children:r})]})}const ke={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#111522",color:"#eef2f7",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{background:"#161a28",border:"1px solid rgba(255,255,255,.12)",borderRadius:14,padding:14,marginTop:6},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,overflow:"hidden",marginTop:8},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function of({onResolve:t,currentCash:e,currentLevel:n=null}){const r=E.useRef(null),{pushModal:s,awaitTop:o}=Bt(),i={A:{compra:12e3,despesa:700,faturamento:1200,color:"#1d4ed8",pill:"NVEL A",label:"100 produtos"},B:{compra:6e3,despesa:400,faturamento:600,color:"#16a34a",pill:"NVEL B",label:"50 produtos"},C:{compra:3e3,despesa:200,faturamento:300,color:"#f59e0b",pill:"NVEL C",label:"20 produtos"},D:{compra:1e3,despesa:50,faturamento:100,color:"#6b7280",pill:"NVEL D",label:"5 produtos"}};async function l(u){if(console.log(`[ MODAL] Jogador clicou em "Comprar" Mix nvel ${u}`),n===u){console.log(`[ MODAL] Tentativa de comprar nvel j adquirido: ${u}`);return}const d=i[u],h=Number((d==null?void 0:d.compra)||0),f=Number(e);if(Number.isFinite(f)&&f>=0&&f<h){s(a.jsx(Mn,{requiredAmount:h,currentCash:f,title:"Saldo insuficiente para adquirir o Mix de Produtos",message:`Voc precisa de $ ${h.toLocaleString()} mas possui $ ${f.toLocaleString()}.`,okLabel:"Entendi"})),await o();return}t==null||t({action:"BUY",level:u,...d})}function c(){t==null||t({action:"SKIP"})}return E.useEffect(()=>{const u=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var d,h;return(h=(d=r.current)==null?void 0:d.focus)==null?void 0:h.call(d)},0),()=>{document.body.style.overflow=u}},[]),a.jsx("div",{style:kt.wrap,role:"dialog","aria-modal":"true","aria-label":"Mix de Produtos",children:a.jsxs("div",{style:kt.card,children:[a.jsx("button",{ref:r,type:"button",style:kt.close,onClick:c,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:kt.title,children:["Escolha um ",a.jsx("b",{children:"mix de produtos"}),":"]}),a.jsxs("div",{style:kt.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"MIX DE PRODUTOS"}),a.jsxs("div",{children:["Base para clculo de ",a.jsx("b",{children:"Despesa"}),"/",a.jsx("b",{children:"Faturamento"}),": multiplicar pela ",a.jsx("b",{children:"quantidade total de clientes"}),"."]})]}),Number.isFinite(Number(e))&&a.jsxs("div",{style:kt.saldo,children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsx("div",{style:kt.cards,children:["A","B","C","D"].map(u=>{const d=i[u],h=n===u,f=h;return u==="D"&&console.log("[DEBUG] MIX Modal - k:",u,"currentLevel:",n,"isOwned:",h,"isDisabled:",f),a.jsxs("div",{style:{...kt.cardItem,borderColor:h?"#16a34a":"rgba(255,255,255,.15)",opacity:f?.6:1},children:[a.jsx("div",{style:{...kt.pill,background:h?"#16a34a":"#fff",color:h?"#fff":"#111"},children:h?" ADQUIRIDO":d.pill}),a.jsx("div",{style:{...kt.cardBadge,background:d.color}}),a.jsxs("ul",{style:kt.lines,children:[a.jsx("li",{children:a.jsx("b",{children:d.label})}),a.jsxs("li",{children:["Compra: ",a.jsxs("b",{children:["$ ",d.compra.toLocaleString()]})]}),a.jsxs("li",{children:["Despesa: ",a.jsxs("b",{children:["$ ",d.despesa.toLocaleString()]})]}),a.jsxs("li",{children:["Faturamento: ",a.jsxs("b",{children:["$ ",d.faturamento.toLocaleString()]})]})]}),a.jsx("button",{type:"button",style:{...kt.buyBtn,background:f?"#6b7280":"#2442f9",cursor:f?"not-allowed":"pointer"},onClick:()=>l(u),disabled:f,title:f?`Mix nvel ${u} j adquirido`:`Comprar Mix de Produtos ${u}`,children:f?"J Adquirido":`Comprar ${u}`})]},u)})}),a.jsx("div",{style:kt.actions,children:a.jsx("button",{type:"button",style:{...kt.bigBtn,background:"#444",color:"#fff"},onClick:c,children:"No comprar"})})]})})}const kt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldo:{margin:"0 0 10px",padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,marginTop:8},cardItem:{background:"#0f1320",border:"1px solid",borderRadius:14,padding:"12px",display:"flex",flexDirection:"column",gap:8},cardBadge:{width:"100%",height:6,borderRadius:999,opacity:.9},pill:{alignSelf:"flex-start",fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999,color:"#111"},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},buyBtn:{marginTop:"auto",padding:"10px 12px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer",background:"#2442f9",color:"#fff"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:14},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function rb({onResolve:t,player:e={}}){const n=E.useRef(null),r=(_,p=0)=>Number.isFinite(Number(_))?Number(_):p,s=_=>r(_.am,0)>0,o=_=>r(_.az,0)>0,i=_=>r(_.rox,0)>0,l=_=>String(_.erpLevel||_.erpSistemas||"D").toUpperCase()==="A",c=_=>{const p=String(_.mixProdutos||"D").toUpperCase();return p==="A"||p==="B"},u=_=>{var m;const p=g=>{if(!g)return 0;try{const w=Array.isArray(g)?g:Object.values(g);return new Set(w).size}catch{return 0}};return(m=_.trainingsByVendor)!=null&&m.gestor?p(_.trainingsByVendor.gestor):r(_.gestoresCertificados,0)},d=_=>r(_.vendedoresComuns)+r(_.insideSales)+r(_.fieldSales)+r(_.gestores??_.gestoresComerciais??_.managers),h=E.useMemo(()=>[{id:"gov_fgts",kind:"SORTE",title:"Ao Governamental Positiva",text:"Liberao de FGTS aumentou o poder de compra. Receba 5 novos clientes (se tiver equipe para atender).",clientsDelta:5},{id:"referral_bonus",kind:"SORTE",title:"Indicao Lucrativa",text:"Um cliente indicou amigos e a primeira compra foi tima. Receba R$ 800,00.",cashDelta:800},{id:"network_cert_mgr",kind:"SORTE",title:"Rede Estratgica",text:"Para cada gestor com certificado, receba R$ 5.000,00.",_compute:_=>({cashDelta:5e3*u(_)})},{id:"innovation_invest",kind:"SORTE",title:"Inovao Premiada",text:"Se tiver infraestrutura (mix/sistemas) nvel A ou B, receba aporte de R$ 25.000,00.",_compute:_=>({cashDelta:c(_)?25e3:0})},{id:"segmentation",kind:"SORTE",title:"Segmentao Inteligente",text:"Novo segmento lucrativo. Receba R$ 1.000,00.",cashDelta:1e3},{id:"casa_bonus_10k",kind:"SORTE",title:"Casagrande Insights",text:"Implementao bem-sucedida. Receba R$ 10.000,00.",cashDelta:1e4},{id:"casa_network_7k",kind:"SORTE",title:"Rede de Contatos Valiosa",text:"Parceria estratgica. Ganhe R$ 7.000,00.",cashDelta:7e3},{id:"casa_strategy_5k",kind:"SORTE",title:"Estratgia Personalizada",text:"Processos melhorados. Receba R$ 5.000,00.",cashDelta:5e3},{id:"casa_best_practices_8k",kind:"SORTE",title:"Melhores Prticas",text:"Eficincia aumentada. Receba R$ 8.000,00.",cashDelta:8e3},{id:"casa_start_6k",kind:"SORTE",title:"Satisfao do Cliente em Alta",text:"Fidelidade e vendas sobem. Receba R$ 6.000,00.",cashDelta:6e3},{id:"casa_change_cert_blue",kind:"SORTE",title:"Gesto de Mudanas Bem-sucedida",text:"Um vendedor generalista concluiu todos os treinamentos. Ganhe um certificado AZUL para esse vendedor.",_compute:()=>({certDelta:{az:1}})},{id:"training_roi_team",kind:"SORTE",title:"Treinamento Personalizado",text:"Receba R$ 500,00 por membro participante.",_compute:_=>({cashDelta:500*Math.max(0,d(_))})},{id:"purple_award_25k",kind:"SORTE",title:"Profissional do Ano (Roxo)",text:"Se houver pelo menos um colaborador com certificado roxo, receba R$ 25.000,00.",_compute:_=>({cashDelta:i(_)?25e3:0})},{id:"reputation_1500",kind:"SORTE",title:"Reputao Impecvel",text:"timas avaliaes elevam a confiana. Receba R$ 1.500,00.",cashDelta:1500},{id:"client_cheer_per_client",kind:"SORTE",title:"Cliente Promotor",text:"Ganhe R$ 500,00 por cada cliente atual.",_compute:_=>({cashDelta:500*Math.max(0,r(_.clients))})},{id:"big_order_freight_save",kind:"SORTE",title:"Grande Pedido + Frete Econmico",text:"Receba R$ 1.500,00.",cashDelta:1500},{id:"sales_win_2k",kind:"SORTE",title:"Vitria de Vendas",text:"Venda aguardada foi fechada. Receba R$ 2.000,00.",cashDelta:2e3},{id:"missed_admission",kind:"REVES",title:"Admisso No Reportada",text:"Multa governamental. Pague R$ 3.000,00.",cashDelta:-3e3},{id:"office_renovation",kind:"REVES",title:"Renovao Custosa",text:"Gastos de obra. Pague R$ 7.000,00.",cashDelta:-7e3},{id:"env_fine_20k",kind:"REVES",title:"Impacto Ambiental",text:"Multa ambiental. Pague R$ 20.000,00.",cashDelta:-2e4},{id:"key_client_at_risk",kind:"REVES",title:"Cliente Chave em Risco",text:"Sem certificado AMARELO: perca 1 cliente e pague R$ 2.000,00.",_compute:_=>s(_)?{clientsDelta:0,cashDelta:0,_overrideText:"Voc possui certificado amarelo. Nada acontece."}:{clientsDelta:-1,cashDelta:-2e3}},{id:"social_crisis",kind:"REVES",title:"Crise nas Redes",text:"Pague R$ 400,00 e perca 2 clientes.",cashDelta:-400,clientsDelta:-2},{id:"car_break",kind:"REVES",title:"Carro Quebrou",text:"Conserto urgente. Pague R$ 1.000,00.",cashDelta:-1e3},{id:"service_improvement_1k",kind:"REVES",title:"Aprimoramentos de Servio",text:"Pague R$ 1.000,00.",cashDelta:-1e3},{id:"recovery_failed_5k",kind:"REVES",title:"Recuperao Mal Sucedida",text:"Cancele grande pedido. Pague R$ 5.000,00.",cashDelta:-5e3},{id:"discount_pressure_1k",kind:"REVES",title:"Descontos Forados",text:"Sem certificado verde: perca R$ 1.000,00 de lucro.",cashDelta:-1e3},{id:"domino_2k",kind:"REVES",title:"Efeito Domin",text:"Cancelamentos em cadeia. Perca R$ 2.000,00.",cashDelta:-2e3},{id:"needs_change_lose4",kind:"REVES",title:"Necessidades Mudaram",text:"Sem certificado AZUL: perca 4 clientes.",_compute:_=>o(_)?{clientsDelta:0,_overrideText:"Voc possui certificado azul. Nada acontece."}:{clientsDelta:-4}},{id:"payroll_error_1k",kind:"REVES",title:"Erro na Folha",text:"Corrigir problema. Pague R$ 1.000,00.",cashDelta:-1e3},{id:"strike_lose5",kind:"REVES",title:"Greve Inesperada",text:"Atrasos e perdas. Perca 5 clientes.",clientsDelta:-5},{id:"customs_hold_3k",kind:"REVES",title:"Alfndega",text:"Pague R$ 3.000,00.",cashDelta:-3e3},{id:"cyber_breach_7k_or_A",kind:"REVES",title:"Falha de Segurana",text:"Se NO tiver sistemas nvel A, pague R$ 7.000,00.",_compute:_=>({cashDelta:l(_)?0:-7e3})},{id:"supplier_issue_2k",kind:"REVES",title:"Fornecedor em Crise",text:"Expedio expressa. Pague R$ 2.000,00.",cashDelta:-2e3},{id:"reg_change_30k",kind:"REVES",title:"Regulamentao Nova",text:"Adequao de processos. Pague R$ 30.000,00.",cashDelta:-3e4},{id:"bad_mix_2500",kind:"REVES",title:"Mix de Produtos Desequilibrado",text:"Descontos e liquidaes. Pague R$ 2.500,00.",cashDelta:-2500},{id:"quality_crisis",kind:"REVES",title:"Crise de Qualidade",text:"Perca 1 cliente e pague R$ 1.000,00.",cashDelta:-1e3,clientsDelta:-1}],[]),[f]=E.useState(()=>h[Math.floor(Math.random()*h.length)]),y=E.useMemo(()=>{const _={action:"APPLY_CARD",kind:f.kind,id:f.id,title:f.title};if(typeof f._compute=="function"){const m=f._compute(e||{}),{_overrideText:g,...w}=m||{};return{text:g||f.text,payload:{..._,...w}}}const p={};return Number.isFinite(f.cashDelta)&&(p.cashDelta=Number(f.cashDelta)),Number.isFinite(f.clientsDelta)&&(p.clientsDelta=Number(f.clientsDelta)),{text:f.text,payload:{..._,...p}}},[f,e]),x=()=>t==null?void 0:t(y.payload),b=()=>t==null?void 0:t({action:"SKIP"});return E.useEffect(()=>{const _=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var p,m;return(m=(p=n.current)==null?void 0:p.focus)==null?void 0:m.call(p)},0),()=>{document.body.style.overflow=_}},[]),a.jsx("div",{style:Hn.wrap,role:"dialog","aria-modal":"true","aria-label":"Sorte e Revs",children:a.jsxs("div",{style:Hn.card,children:[a.jsx("button",{ref:n,style:Hn.close,onClick:b,"aria-label":"Fechar",children:""}),a.jsx("div",{style:Hn.badge(f.kind),children:f.kind==="SORTE"?"SORTE":"REVS"}),f.title&&a.jsx("h2",{style:Hn.title,children:f.title}),a.jsx("p",{style:Hn.text,children:y.text}),a.jsx("div",{style:Hn.footer,children:a.jsx("button",{type:"button",style:Hn.okBtn,onClick:x,children:"OK"})})]})})}const Hn={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(760px, 92vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:18,padding:"22px",border:"1px solid rgba(255,255,255,.12)",boxShadow:"0 10px 40px rgba(0,0,0,.4)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},badge:t=>({display:"inline-block",padding:"6px 12px",borderRadius:999,fontWeight:900,marginBottom:8,background:t==="SORTE"?"#22c55e":"#ef4444",color:"#111"}),title:{margin:"2px 0 6px",fontWeight:900},text:{fontSize:18,lineHeight:1.5,opacity:.95,margin:"6px 0 14px"},footer:{display:"flex",justifyContent:"center"},okBtn:{minWidth:140,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer",background:"#fff",color:"#111"}};function sb({value:t=0,onResolve:e}){const n=Number(t||0),r=s=>{var o,i;(o=s==null?void 0:s.preventDefault)==null||o.call(s),(i=s==null?void 0:s.stopPropagation)==null||i.call(s),e==null||e({action:"OK"})};return a.jsx(Ao,{zIndex:2147483647,onClose:()=>e==null?void 0:e({action:"CLOSE"}),children:a.jsxs("div",{style:{padding:28,textAlign:"center",pointerEvents:"auto"},children:[a.jsx("div",{style:{fontWeight:900,fontSize:28,color:"#4caf50",letterSpacing:.5,marginBottom:6},children:"FATURAMENTO DO MS"}),a.jsx("div",{style:{opacity:.9,marginBottom:16},children:"Ser creditado o valor do Faturamento ao seu Saldo"}),a.jsxs("div",{style:{fontSize:18,marginBottom:24},children:["no valor de: ",a.jsxs("b",{children:["$ ",n.toLocaleString()]})]}),a.jsx("button",{type:"button",onClick:r,className:"btn",style:{minWidth:120,background:"#8bd65a",color:"#1a1f2a",fontWeight:800,borderRadius:10},children:"OK"})]})})}function ob({expense:t=0,loanCharge:e=0,onResolve:n}){const r=Number(t||0)+Number(e||0),s=o=>{var i,l;(i=o==null?void 0:o.preventDefault)==null||i.call(o),(l=o==null?void 0:o.stopPropagation)==null||l.call(o),n==null||n({action:"OK"})};return a.jsx(Ao,{zIndex:2147483647,onClose:()=>n==null?void 0:n({action:"CLOSE"}),children:a.jsxs("div",{style:{padding:28,textAlign:"center",pointerEvents:"auto"},children:[a.jsx("div",{style:{fontWeight:900,fontSize:26,color:"#ffb74d",letterSpacing:.5,marginBottom:6},children:"DESPESAS DO MS"}),a.jsxs("div",{style:{marginBottom:8},children:["Despesas operacionais:",a.jsxs("b",{children:["-$ ",Number(t).toLocaleString()]})]}),Number(e)>0&&a.jsxs("div",{style:{marginBottom:8,color:"#ffd54f"},children:["Emprstimo cobrado nesta rodada:",a.jsxs("b",{children:["-$ ",Number(e).toLocaleString()]})]}),a.jsxs("div",{style:{margin:"6px 0 18px",opacity:.85},children:["Total a debitar: ",a.jsxs("b",{children:["-$ ",r.toLocaleString()]})]}),a.jsx("button",{type:"button",onClick:s,className:"btn",style:{minWidth:120,background:"#ffcc80",color:"#1a1f2a",fontWeight:800,borderRadius:10},children:"OK"})]})})}const me={backdrop:{position:"fixed",inset:0,background:"rgba(0,0,0,.6)",display:"grid",placeItems:"center",zIndex:9999},card:{width:"min(920px, 96vw)",maxHeight:"90vh",overflow:"auto",background:"#15161a",color:"#e9ecf1",border:"1px solid rgba(255,255,255,.08)",borderRadius:20,boxShadow:"0 20px 50px rgba(0,0,0,.5)"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 16px",borderBottom:"1px solid rgba(255,255,255,.08)"},closeBtn:{width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#fff",fontSize:20,cursor:"pointer"},body:{padding:16},lead:{opacity:.95,lineHeight:1.5},bullets:{margin:"8px 0 16px 18px"},rowBtns:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:12,flexWrap:"wrap"},cta:{padding:"12px 16px",border:0,borderRadius:12,color:"#fff",fontWeight:900,cursor:"pointer",boxShadow:"0 10px 24px rgba(0,0,0,.25)"},back:{padding:"10px 14px",borderRadius:12,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#e9ecf1",cursor:"pointer"},subHeader:{marginBottom:8},infoRow:{display:"flex",gap:8,alignItems:"baseline",margin:"4px 0"},input:{width:"100%",padding:"12px 12px",borderRadius:12,background:"#0f1115",color:"#fff",border:"1px solid rgba(255,255,255,.15)",marginTop:10},option:{padding:16,background:"rgba(255,255,255,.04)",border:"1px solid rgba(255,255,255,.08)",borderRadius:14,textAlign:"center",cursor:"pointer"},spin:{width:34,height:34,borderRadius:8,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#fff",fontSize:18,cursor:"pointer"}};function ib({playerName:t,loanAvailable:e,hasPendingLoan:n,onGoLoan:r,onGoReduce:s,onGoFire:o}){return a.jsxs("div",{style:me.body,children:[a.jsxs("p",{style:me.lead,children:["Voc est sem dinheiro, ",t,". Escolha uma das opes:"]}),n&&a.jsx("div",{style:{...me.lead,color:"#ef4444",fontWeight:"bold",marginBottom:"16px"},children:" Voc j possui um emprstimo pendente. Cada jogador s pode ter um emprstimo por vez."}),a.jsxs("ul",{style:me.bullets,children:[a.jsxs("li",{children:["Pedir ",a.jsx("b",{children:"emprstimo"})," nico com 50% de juros garantido por 50% dos seus ",a.jsx("b",{children:"BENS"})," (limite ",`$ ${e}`,")."]}),a.jsxs("li",{children:[a.jsx("b",{children:"Reduzir"})," nveis de ",a.jsx("b",{children:"MIX de Produtos"})," ou ",a.jsx("b",{children:"ERP/Sistemas"})," e receber 50% do valor pago."]}),a.jsxs("li",{children:[a.jsx("b",{children:"Demitir"})," funcionrios e receber 50% do valor total."]})]}),a.jsxs("div",{style:me.rowBtns,children:[a.jsx("button",{style:{...me.cta,background:"#ef4444"},onClick:o,children:"DEMITIR"}),a.jsx("button",{style:{...me.cta,background:"#a16207"},onClick:s,children:"REDUZIR"}),a.jsx("button",{style:{...me.cta,background:n?"#6b7280":"#16a34a",cursor:n?"not-allowed":"pointer"},onClick:n?void 0:r,disabled:n,children:n?"EMPRSTIMO (J REALIZADO)":"EMPRSTIMO"})]})]})}function ab({loanAvailable:t,alreadyHasLoan:e=!1,onBack:n,onConfirm:r}){const[s,o]=E.useState(""),i=E.useMemo(()=>Math.max(0,Math.floor(Number(s)||0)),[s]),l=!e&&i>0&&i<=Number(t||0),c=()=>{if(e){r==null||r({type:"LOAN_DENIED",reason:"ALREADY_TAKEN"});return}const u=Math.max(0,Math.floor(Number(t)||0)),d=Math.max(0,Math.min(u,i));if(d>0){const h={type:"LOAN",amount:d,cashDelta:d,loan:{amount:d,charged:!1}};console.log("[DEBUG] RecoveryLoan enviando payload:",h),r==null||r(h)}else r==null||r({type:"LOAN_DENIED",reason:"INVALID_AMOUNT"})};return a.jsxs("div",{style:me.body,children:[a.jsx("div",{style:me.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"EMPRSTIMO"})}),a.jsxs("p",{children:["Voc pode realizar um emprstimo colocando ",a.jsx("b",{children:"50% dos seus BENS"})," como garantia (pago na prxima Despesas Operacionais)."]}),a.jsxs("div",{style:me.infoRow,children:[a.jsx("span",{children:"Valor disponvel:"})," ",a.jsxs("b",{children:["$",Number(t||0)]})]}),a.jsxs("div",{style:me.infoRow,children:[a.jsx("span",{children:"Valor garantia:"})," ",a.jsxs("b",{children:["$",Number(t||0)]})]}),e&&a.jsx("div",{style:{...me.infoRow,color:"#fca5a5",border:"1px solid rgba(255,0,0,.25)",padding:"8px 10px",borderRadius:8,background:"rgba(255,0,0,.06)"},children:"Voc j possui um emprstimo ativo. No  possvel pegar outro."}),a.jsx("input",{style:me.input,type:"number",min:0,max:Math.max(0,Number(t||0)),placeholder:"Digite o valor que quer emprestar",value:s,onChange:u=>o(u.target.value),disabled:e}),a.jsxs("div",{style:{fontSize:12,opacity:.8,marginTop:6},children:["Mx: $",Number(t||0),"  valor ser somado ao seu saldo e cobrado na prxima Despesas Operacionais."]}),a.jsxs("div",{style:me.rowBtns,children:[a.jsx("button",{style:me.back,onClick:n,children:" Voltar"}),a.jsx("button",{style:{...me.cta,background:"#16a34a",opacity:l?1:.6,cursor:l?"pointer":"not-allowed"},onClick:c,disabled:!l,children:"Pegar Emprstimo"})]})]})}function lb(t){const{options:e=[],optionsMix:n,optionsErp:r,mixOwned:s,erpOwned:o,credits:i,snapshot:l,onBack:c,onConfirm:u}=t,d=(...v)=>console.log("[RecoveryReduce]",...v),h={MIX:{accent:"#06B6D4",soft:"rgba(6,182,212,.14)",ring:"rgba(6,182,212,.45)",glow:"rgba(6,182,212,.35)",pillBg:"rgba(6,182,212,.18)",pillFg:"#9FF1FF"},ERP:{accent:"#8B5CF6",soft:"rgba(139,92,246,.14)",ring:"rgba(139,92,246,.45)",glow:"rgba(139,92,246,.35)",pillBg:"rgba(139,92,246,.18)",pillFg:"#E9D5FF"}},f=["A","B","C","D"],y=(v,D,P)=>f.map(B=>({key:`${v}-${B}`,group:v,level:B,label:`Nvel ${B}`,credit:Number((D==null?void 0:D[B])??0),owned:!!(P!=null&&P[B])})),x=E.useMemo(()=>Array.isArray(n)&&n.length?n:i!=null&&i.MIX?y("MIX",i.MIX,s):y("MIX",{A:0,B:0,C:0,D:0},s),[n,i,s]),b=E.useMemo(()=>Array.isArray(r)&&r.length?r:i!=null&&i.ERP?y("ERP",i.ERP,o):y("ERP",{A:0,B:0,C:0,D:0},o),[r,i,o]);E.useEffect(()=>{console.groupCollapsed("[RecoveryReduce] props snapshot"),console.log("mixCards:",x),console.log("erpCards:",b),console.log("mixOwned:",s),console.log("erpOwned:",o),console.log("credits:",i),console.groupEnd()},[x,b,s,o,i]);const[_,p]=E.useState([]),[m,g]=E.useState(new Set),[w,k]=E.useState(!1),T=v=>{v.owned&&(m.has(v.key)||p(D=>D.some(B=>B.key===v.key)?D.filter(B=>B.key!==v.key):[...D,v]))},$=E.useMemo(()=>_.reduce((v,D)=>v+Number(D.credit||0),0),[_]),S=v=>_.some(D=>D.key===v.key),R=v=>{var F,V;const D=S(v),P=!v.owned||m.has(v.key)||w,B=h[v.group]||h.MIX,be={...me.option,position:"relative",borderRadius:14,background:P?"rgba(148,163,184,.12)":B.soft,border:D?`2.5px solid ${B.accent}`:"1px solid rgba(148,163,184,.25)",boxShadow:D?`0 0 0 2px ${B.ring}, 0 10px 24px ${B.glow}`:"none",cursor:P?"not-allowed":"pointer",opacity:P?.35:1,transition:"transform .06s ease-out, box-shadow .12s ease-out, border-color .12s"},lt={fontWeight:900,fontSize:16,marginBottom:8,color:P?"#CBD5E1":"#E5F9FF"},hn={fontWeight:700,marginTop:2,color:P?"#A1A1AA":"#FFFFFF"},Ye={position:"absolute",top:8,right:8,fontSize:11,padding:"3px 8px",borderRadius:999,background:P?"rgba(148,163,184,.22)":B.pillBg,color:P?"#E5E7EB":B.pillFg,border:`1px solid ${P?"rgba(148,163,184,.35)":B.ring}`,letterSpacing:.2};return a.jsxs("button",{onClick:()=>T(v),disabled:P,"aria-pressed":D,style:be,title:m.has(v.key)?"Nvel j reduzido nesta sesso.":v.owned?"":"S  possvel selecionar nveis adquiridos.",onMouseDown:J=>!P&&(J.currentTarget.style.transform="translateY(1px)"),onMouseUp:J=>J.currentTarget.style.transform="translateY(0)",onMouseLeave:J=>J.currentTarget.style.transform="translateY(0)",children:[a.jsx("span",{style:Ye,children:m.has(v.key)?"vendido":v.owned?"adquirido":"no adquirido"}),a.jsx("div",{style:lt,children:v.label}),a.jsx("div",{style:{color:P?"#A1A1AA":"#BFEFFF"},children:"Crdito ao reduzir:"}),a.jsxs("div",{style:hn,children:["$",((V=(F=v.credit).toLocaleString)==null?void 0:V.call(F))??v.credit]})]},v.key)};return a.jsxs("div",{style:me.body,children:[a.jsx("div",{style:me.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"REDUZIR NVEL MIX/ERP"})}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[a.jsxs("div",{style:{padding:8,borderRadius:8,background:"rgba(255,255,255,0.05)"},children:[a.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"MIX PRODUTOS"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12},children:x.map(R)})]}),a.jsxs("div",{style:{padding:8,borderRadius:8,background:"rgba(255,255,255,0.05)"},children:[a.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"ERP/SISTEMAS"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12},children:b.map(R)})]})]}),a.jsxs("div",{style:{marginTop:10,display:"flex",justifyContent:"space-between",alignItems:"center",opacity:.92},children:[a.jsxs("div",{children:["Selecionados: ",a.jsx("b",{children:_.length}),"    Total: ",a.jsxs("b",{children:["$",$.toLocaleString()]})]}),a.jsx("div",{style:{fontSize:12,opacity:.7},children:"S  possvel selecionar nveis adquiridos."})]}),a.jsxs("div",{style:me.rowBtns,children:[a.jsx("button",{style:me.back,onClick:c,disabled:w,children:" Voltar"}),a.jsx("button",{style:{...me.cta,background:"#F59E0B",color:"#101010",fontWeight:900,opacity:_.length&&!w?1:.55},onClick:()=>{if(!_.length||w)return;k(!0),g(D=>{const P=new Set(D);return _.forEach(B=>P.add(B.key)),P});const v={items:_.map(D=>({...D,selected:!0})),total:$};d("confirm payload =>",v),u==null||u(v),p([]),k(!1)},disabled:!_.length||w,children:"REDUZIR"})]})]})}function cb({roles:t=[],onBack:e,onConfirm:n}){const r=E.useMemo(()=>t.map(f=>{const y=Number(f.unit??f.total??0),x=Number(f.owned??f.qty??0);return{...f,unit:y,owned:x}}),[t]),[s,o]=E.useState(()=>{const f={};return r.forEach(y=>{f[y.key]=0}),f}),i=f=>`R$ ${Number(f||0).toLocaleString("pt-BR")}`,l=f=>Math.floor(Number(f||0)*.5),c=(f,y)=>{o(x=>{const b=r.find(m=>m.key===f);if(!b)return x;const _=Number(x[f]||0),p=Math.max(0,Math.min(b.owned,_+y));return p===_?x:{...x,[f]:p}})},u=E.useMemo(()=>{const f={};return r.forEach(y=>{const x=Number(s[y.key]||0);f[y.key]=l(y.unit)*x}),f},[s,r]),d=E.useMemo(()=>Object.values(u).reduce((f,y)=>f+y,0),[u]),h=()=>{if(d<=0)return;const f={};r.forEach(y=>{f[y.key]=Number(s[y.key]||0)}),n==null||n({type:"FIRE",items:f,creditByRole:u,totalCredit:d,amount:d,note:`Demisses +${i(d)}`})};return a.jsxs("div",{style:me.body,children:[a.jsx("div",{style:me.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"DEMITIR FUNCIONRIOS"})}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr 1.2fr 1fr",gap:8,opacity:.9,fontWeight:700,marginBottom:6},children:[a.jsx("div",{children:"Cargo"}),a.jsx("div",{children:"Valor Unitrio"}),a.jsx("div",{children:"Qtd demitir"}),a.jsx("div",{children:"Crdito"})]}),a.jsx("div",{style:{display:"grid",gap:12},children:r.map(f=>{const y=Number(s[f.key]||0),x=Number(f.unit||0),b=Number(f.owned||0),_=l(x),p=_*y,m=y<=0,g=y>=b||b<=0;return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr 1.2fr 1fr",alignItems:"center",gap:8},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:800},children:f.label}),a.jsxs("div",{style:{opacity:.75,fontSize:12},children:["Possui: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{children:[a.jsx("div",{children:a.jsx("b",{children:i(x)})}),a.jsxs("div",{style:{opacity:.75,fontSize:12},children:["Crdito por un.: ",a.jsx("b",{children:i(_)})]})]}),a.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[a.jsx("button",{style:{...me.spin,opacity:m?.5:1,cursor:m?"not-allowed":"pointer"},disabled:m,onClick:()=>c(f.key,-1),children:"-"}),a.jsx("div",{style:{minWidth:28,textAlign:"center",fontWeight:800},children:y}),a.jsx("button",{style:{...me.spin,opacity:g?.5:1,cursor:g?"not-allowed":"pointer"},disabled:g,onClick:()=>c(f.key,1),children:"+"})]}),a.jsx("div",{children:a.jsx("b",{children:i(p)})})]},f.key)})}),a.jsxs("div",{style:{marginTop:12,textAlign:"right",fontWeight:900},children:["Total a resgatar: ",a.jsx("b",{children:i(d)})]}),a.jsxs("div",{style:me.rowBtns,children:[a.jsx("button",{style:me.back,onClick:e,children:" Voltar"}),a.jsx("button",{style:{...me.cta,background:"#ef4444",opacity:d>0?1:.6},onClick:h,disabled:d<=0,children:"DEMITIR"})]})]})}function af({playerName:t="Jogador",bens:e=0,currentPlayer:n,canClose:r=!0}){var R;const{resolveTop:s,popModal:o}=(Bt==null?void 0:Bt())||{},[i,l]=E.useState("menu"),c=()=>{r&&(o?o(!1):s==null||s(null))},u=E.useMemo(()=>({A:12e3,B:6e3,C:3e3,D:1e3}),[]),d=E.useMemo(()=>({A:1e4,B:4e3,C:1500,D:500}),[]),h=v=>{if(v==null)return"";const D=String(v).trim().toUpperCase();if(["A","B","C","D"].includes(D))return D;const P=Number(D);return P===1?"A":P===2?"B":P===3?"C":P===4?"D":""},f=v=>{if(!v)return new Set;if(Array.isArray(v))return new Set(v.map(h).filter(Boolean));if(typeof v=="object"){const P=new Set;return["A","B","C","D"].forEach(B=>{v[B]&&P.add(B)}),P}const D=h(v);return D?new Set([D]):new Set},y=E.useMemo(()=>{const v=n||{};return{name:v.name??t,bens:Number(v.bens??e??0),vendedoresComuns:Number(v.vendedoresComuns??0),fieldSales:Number(v.fieldSales??0),insideSales:Number(v.insideSales??0),gestores:Number(v.gestores??v.gestoresComerciais??0),raw:v}},[n,t,e]);E.useEffect(()=>{console.group("[RecoveryModal] mount snapshot"),console.log("raw player =>",y.raw),console.groupEnd()},[y.raw]);const x=E.useMemo(()=>Math.max(0,Math.floor(y.bens*.5)),[y.bens]),b=E.useMemo(()=>{var D;const v=(D=y.raw)==null?void 0:D.loanPending;return v&&Number(v.amount)>0},[(R=y.raw)==null?void 0:R.loanPending]),_=E.useMemo(()=>[{key:"mix",label:"MIX PRODUTOS",credit:1500},{key:"erp",label:"ERP/SISTEMAS",credit:1500}],[]),p=E.useMemo(()=>[{key:"comum",label:"Vendedor Comum",unit:1500,owned:y.vendedoresComuns},{key:"field",label:"Field Sales",unit:3e3,owned:y.fieldSales},{key:"inside",label:"Inside Sales",unit:3e3,owned:y.insideSales},{key:"gestor",label:"Gestor",unit:5e3,owned:y.gestores}],[y]),m=E.useMemo(()=>{const v=y.raw||{};return h(v.mixProdutosLetter??v.mixProdutos??v.mixProducts??v.mixLevelLetter??v.mixLevel??v.mix_level??v.mix??v.mix_produtos??v.mix_products)},[y.raw]),g=E.useMemo(()=>{var D;const v=y.raw||{};return h(v.erpSistemasLetter??v.erpSistemas??((D=v.erpSystems)==null?void 0:D.level)??v.erpSystemsLetter??v.erpLevelLetter??v.erpLevel??v.erp_level??v.erp??v.erp_sistemas)},[y.raw]),w=E.useMemo(()=>{const v=y.raw||{},D=f(v.mixOwned??v.mixLevels??v.mixLevel);return m&&D.add(m),D.size===0&&D.add("D"),D},[y.raw,m]),k=E.useMemo(()=>{const v=y.raw||{},D=f(v.erpOwned??v.erpLevels??v.erpLevel);return g&&D.add(g),D.size===0&&D.add("D"),D},[y.raw,g]);E.useEffect(()=>{console.group("[RecoveryModal] owned detect"),console.log("mixLetter(panel):",m," -> ownedMix =",Object.fromEntries(["A","B","C","D"].map(v=>[v,w.has(v)]))),console.log("erpLetter(panel):",g," -> ownedErp =",Object.fromEntries(["A","B","C","D"].map(v=>[v,k.has(v)]))),console.groupEnd()},[m,g,w,k]);const T=E.useMemo(()=>["A","B","C","D"].map(v=>({key:`mix-${v}`,group:"MIX",level:v,label:`Nvel ${v}`,credit:(u[v]||0)/2,owned:w.has(v)})),[w,u]),$=E.useMemo(()=>["A","B","C","D"].map(v=>({key:`erp-${v}`,group:"ERP",level:v,label:`Nvel ${v}`,credit:(d[v]||0)/2,owned:k.has(v)})),[k,d]),S=E.useMemo(()=>({MIX:{A:u.A/2,B:u.B/2,C:u.C/2,D:u.D/2},ERP:{A:d.A/2,B:d.B/2,C:d.C/2,D:d.D/2}}),[u,d]);return a.jsx("div",{style:me.backdrop,children:a.jsxs("div",{style:me.card,children:[a.jsxs("div",{style:me.header,children:[a.jsx("div",{style:{fontWeight:900,fontSize:22},children:"RECUPERAO FINANCEIRA"}),r&&a.jsx("button",{onClick:c,style:me.closeBtn,children:""})]}),i==="menu"&&a.jsx(ib,{playerName:y.name,loanAvailable:x,hasPendingLoan:b,onGoLoan:()=>l("loan"),onGoReduce:()=>l("reduce"),onGoFire:()=>l("fire")}),i==="loan"&&a.jsx(ab,{loanAvailable:x,onBack:()=>l("menu"),onConfirm:v=>{console.log("[DEBUG] RecoveryModal recebeu payload do RecoveryLoan:",v),console.log("[DEBUG] RecoveryModal chamando resolveTop com:",v);const D=s==null?void 0:s(v);console.log("[DEBUG] RecoveryModal resolveTop retornou:",D)}}),i==="reduce"&&a.jsx(lb,{options:_,optionsMix:T,optionsErp:$,mixOwned:{A:w.has("A"),B:w.has("B"),C:w.has("C"),D:w.has("D")},erpOwned:{A:k.has("A"),B:k.has("B"),C:k.has("C"),D:k.has("D")},credits:S,snapshot:y,onBack:()=>l("menu"),onConfirm:v=>{if(Array.isArray(v==null?void 0:v.items)){const B=Number(v.total??v.items.filter(be=>be.selected).reduce((be,lt)=>be+Number(lt.credit||0),0));s==null||s({type:"REDUCE",amount:B,items:v.items,note:`Reduo mltipla +R$ ${B.toLocaleString()}`});return}const D=Number((v==null?void 0:v.credit)||(v==null?void 0:v.amount)||0),P=v&&v.group&&v.level?{group:String(v.group).toUpperCase(),level:String(v.level).toUpperCase(),credit:D}:null;s==null||s({type:"REDUCE",amount:D,group:P==null?void 0:P.group,level:P==null?void 0:P.level,selection:P,note:P?`Reduo ${P.group} nvel ${P.level} +R$ ${D.toLocaleString()}`:`Reduo +R$ ${D.toLocaleString()}`})}}),i==="fire"&&a.jsx(cb,{roles:p,onBack:()=>l("menu"),onConfirm:v=>s==null?void 0:s(v)})]},i)})}function ub({playerName:t="Jogador",balanceText:e=""}){const{resolveTop:n,closeModal:r}=Bt(),s=E.useRef(null);E.useEffect(()=>{var u;const c=document.body.style.overflow;return document.body.style.overflow="hidden",(u=s.current)==null||u.focus(),()=>{document.body.style.overflow=c}},[]),E.useEffect(()=>{const c=u=>{(u.key==="Escape"||u.key==="Enter"||u.key===" ")&&(u.preventDefault(),u.stopPropagation())};return document.addEventListener("keydown",c,!0),()=>document.removeEventListener("keydown",c,!0)},[]);const o=c=>{c.preventDefault(),c.stopPropagation()},i=()=>{n(!1),r==null||r()},l=()=>{n(!0),r==null||r()};return a.jsxs(Ao,{width:780,onClose:i,children:[a.jsx("style",{children:`
        .sg-modal-panel {
          background:#111827; border:1px solid rgba(255,255,255,0.08);
          border-radius:16px; padding:20px 22px 18px; color:#e5e7eb;
          position:relative; box-shadow:0 10px 35px rgba(0,0,0,.55);
        }
        .sg-modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
        .sg-modal-title{font-size:22px;font-weight:700;margin:0}
        .sg-icon-close{background:transparent;border:0;color:#9ca3af;font-size:24px;line-height:1;cursor:pointer}
        .sg-icon-close:hover{color:#e5e7eb}

        .sg-modal-infos{display:flex;justify-content:space-between;align-items:center;
          font-size:14px;color:#cbd5e1;margin:6px 0 12px}
        .sg-modal-infos .right{opacity:.8}

        .sg-callout-warning{
          background:rgba(250,204,21,.12); border:1px solid rgba(250,204,21,.45);
          border-radius:12px; padding:14px 16px; margin-bottom:14px
        }
        .sg-callout-title{font-weight:700;margin-bottom:6px;color:#fde68a}
        .sg-muted{opacity:.7}

        .sg-modal-body{margin:8px 2px 14px;font-size:15px;line-height:1.5}

        .sg-modal-actions{display:flex;justify-content:space-between;gap:12px;margin-top:10px}
        .sg-btn{font-weight:600;border:0;cursor:pointer;padding:12px 18px}
        .sg-pill{border-radius:999px}
        .sg-btn-neutral{background:#374151;color:#e5e7eb}
        .sg-btn-neutral:hover{background:#4b5563}
        .sg-btn-danger{background:#b91c1c;color:#fff}
        .sg-btn-danger:hover{background:#991b1b}
        .sg-btn:focus{outline:2px solid rgba(255,255,255,.35);outline-offset:2px}
      `}),a.jsxs("div",{className:"sg-modal-panel",role:"dialog","aria-modal":"true","aria-labelledby":"bk-title","aria-describedby":"bk-desc",onClick:o,onMouseDown:o,onKeyDown:o,children:[a.jsxs("div",{className:"sg-modal-header",children:[a.jsx("h2",{id:"bk-title",className:"sg-modal-title",children:"Declarar Falncia"}),a.jsx("button",{className:"sg-icon-close","aria-label":"Fechar",onClick:i,children:""})]}),a.jsxs("div",{className:"sg-modal-infos",children:[a.jsx("div",{className:"left",children:e?a.jsxs(a.Fragment,{children:["Saldo disponvel: ",a.jsx("b",{children:e})]}):a.jsx(a.Fragment,{children:""})}),a.jsx("div",{className:"right",children:"Ao permanente nesta partida"})]}),a.jsxs("div",{className:"sg-callout-warning",id:"bk-desc",children:[a.jsx("div",{className:"sg-callout-title",children:"Ateno"}),a.jsxs("p",{children:[t,", ao confirmar, voc ser marcado como ",a.jsx("b",{children:"FALIDO"}),". Seu turno ser ",a.jsx("b",{children:"sempre pulado"})," e voc no poder mais executar aes."]}),a.jsx("p",{className:"sg-muted",children:"Esta deciso  irreversvel at o fim da partida."})]}),a.jsx("div",{className:"sg-modal-body",children:a.jsxs("p",{children:["Confirme abaixo para encerrar sua participao ativa. Voc continuar visvel no placar como ",a.jsx("b",{children:"FALIDO"}),"."]})}),a.jsxs("div",{className:"sg-modal-actions",children:[a.jsx("button",{className:"sg-btn sg-pill sg-btn-neutral",onClick:i,children:"Cancelar"}),a.jsx("button",{ref:s,className:"sg-btn sg-pill sg-btn-danger",onClick:l,children:"Declarar Falncia"})]})]})]})}function db({players:t,setPlayers:e,round:n,setRound:r,turnIdx:s,setTurnIdx:o,roundFlags:i,setRoundFlags:l,isMyTurn:c,isMine:u,myUid:d,meId:h,myCash:f,current:y,broadcastState:x,appendLog:b,turnLock:_,setTurnLockBroadcast:p,gameOver:m,setGameOver:g,winner:w,setWinner:k,setShowBankruptOverlay:T,phase:$}){const S=Bt(),{pushModal:R,awaitTop:v,closeTop:D}=S||{},[P,B]=E.useState(0),be=E.useRef(0);E.useEffect(()=>{be.current=P},[P]),E.useEffect(()=>{c?console.log("[DEBUG] modalLocks sync - isMyTurn:",c,"modalLocks:",P):P>0&&(console.log("[DEBUG] modalLocks sync - resetando modalLocks para 0 (no  minha vez)"),B(0))},[c,P]);const[lt,hn]=E.useState(null),Ye=E.useRef(null);E.useEffect(()=>{Ye.current=lt},[lt]);const F=E.useRef(null);E.useEffect(()=>{$!=="game"?(console.log("[USE_TURN_ENGINE] Desativando motor de turnos (fase:",$,")"),B(0),p(!1),F.current=null):console.log("[USE_TURN_ENGINE] Ativando motor de turnos (fase: game)")},[$,p]);const V=async H=>{var Fe;if(!(R&&v))return null;const Oe=((Fe=t[curIdx])==null?void 0:Fe.name)||"Jogador";console.log(`[ MODAL] ${Oe} - ABRINDO modal, modalLocks: ${P}  ${P+1}`),B(N=>N+1);try{return R(H),await v()}finally{console.log(`[ MODAL] ${Oe} - FECHANDO modal, modalLocks: ${P}  ${Math.max(0,P-1)}`),B(N=>Math.max(0,N-1))}},J=E.useCallback((H,Oe)=>{const Fe=t[H],N=Math.max(0,Number(Oe||0));return Number((Fe==null?void 0:Fe.cash)||0)>=N},[t]),re=E.useCallback((H,Oe,Fe)=>{const N=J(H,Oe);return N||b(`Saldo insuficiente${Fe?" para "+Fe:""}. Use RECUPERAO (demitir / emprestar / reduzir) ou declare FALNCIA.`),N},[J,b]),Le=E.useCallback((H,Oe)=>{var wt;if(Oe<=5)return;const Fe=H.filter(qe=>!(qe!=null&&qe.bankrupt));if(Fe.length===0){console.log("[DEBUG]  FIM DE JOGO - Nenhum jogador vivo restante"),k(null),g(!0),b("Fim de jogo! Todos os jogadores falidos."),p(!1);return}const N=Fe.map(qe=>({...qe,patrimonio:(qe.cash||0)+(qe.bens||0)})).sort((qe,Pt)=>Pt.patrimonio-qe.patrimonio);console.log("[DEBUG]  VENCEDOR - Jogadores vivos:",Fe.map(qe=>qe.name),"Vencedor:",(wt=N[0])==null?void 0:wt.name),k(N[0]||null),g(!0),b("Fim de jogo! 5 rodadas completas."),p(!1)},[b,g,p,k]),Sn=E.useCallback((H,Oe,Fe)=>{var uu,du,fu,hu,pu,mu,gu;if($!=="game"){console.warn("[advanceAndMaybeLap] Tentativa de ao fora da fase de jogo.");return}if(console.log("[DEBUG]  advanceAndMaybeLap chamada - steps:",H,"deltaCash:",Oe,"note:",Fe),m||!t.length)return;p(!0),hn(String(d));const N=s,wt=t[N];if(!wt){p(!1);return}console.log("[DEBUG]  POSIO INICIAL - Jogador:",wt.name,"Posio:",wt.pos,"Saldo:",wt.cash);const qe=async(j,z,te,Z=t)=>{var le,ue,Q,Se,Te,St,Fn,Ts,Ds,Ns,$s,qt,I,ce,ve;const ee=Number(((le=Z[N])==null?void 0:le.cash)||0);if(ee>=j){console.log("[DEBUG]  Saldo suficiente! Processando pagamento de:",j);const Y=Z.map((oe,xe)=>xe!==N?oe:{...oe,cash:Math.max(0,(oe.cash||0)-j)});return e(Y),x(Y,s,n),!0}const X=await V(a.jsx(Mn,{requiredAmount:j,currentCash:ee,title:`Saldo insuficiente para ${te} ${z}`,message:`Voc precisa ${te} R$ ${j.toLocaleString()} mas possui apenas R$ ${ee.toLocaleString()}.`,showRecoveryOptions:!0}));if(!X)return p(!1),!1;if(X.action==="RECOVERY"){console.log("[DEBUG] Abrindo RecoveryModal para jogador:",Z[N]);const Y=await V(a.jsx(af,{currentPlayer:Z[N],canClose:!1}));if(console.log("[DEBUG] RecoveryModal retornou:",Y),Y){console.log("[DEBUG] recoveryModalRes existe, tipo:",Y.type,"action:",Y.action);let oe=Z;if(Y.type==="FIRE"){console.log("[DEBUG]  Condio FIRE atendida! Processando demisses:",Y);const ne={cashDelta:Number(Y.amount||0),vendedoresComunsDelta:-Number(((ue=Y.items)==null?void 0:ue.comum)||0),fieldSalesDelta:-Number(((Q=Y.items)==null?void 0:Q.field)||0),insideSalesDelta:-Number(((Se=Y.items)==null?void 0:Se.inside)||0),gestoresDelta:-Number(((Te=Y.items)==null?void 0:Te.gestor)||0)};console.log("[DEBUG] Deltas de demisso:",ne),oe=Z.map((pe,Qe)=>Qe!==N?pe:Ne(pe,ne)),console.log("[DEBUG] Novo saldo aps demisses:",(St=oe[N])==null?void 0:St.cash),e(oe),x(oe,s,n)}else if(Y.type==="LOAN"){console.log("[DEBUG]  Condio LOAN atendida! Processando emprstimo:",Y);const ne=(Fn=Z[N])==null?void 0:Fn.loanPending;if(ne&&Number(ne.amount)>0){console.log("[DEBUG]  Jogador j possui emprstimo pendente:",ne);const Qe=await V(a.jsx(Mn,{requiredAmount:j,currentCash:((Ts=Z[N])==null?void 0:Ts.cash)||0,title:"Emprstimo j realizado",message:`Voc j possui um emprstimo pendente de R$ ${Number(ne.amount).toLocaleString()}. Cada jogador s pode ter um emprstimo por vez.`,showRecoveryOptions:!1,canClose:!1}));if(!Qe||Qe.action!=="BANKRUPT")return p(!1),!1;const Ot=Z.map((gr,Ps)=>Ps===N?{...gr,bankrupt:!0}:gr);if(dn(Ot)<=1){const gr=Ot.findIndex(Ps=>!(Ps!=null&&Ps.bankrupt));return k(gr>=0?Ot[gr]:null),e(Ot),g(!0),p(!1),x(Ot,s,n,!0,gr>=0?Ot[gr]:null),!1}const En=Jt(Ot,N);return e(Ot),o(En),p(!1),x(Ot,En,n),!1}const pe=Number(Y.amount||0);console.log("[DEBUG] Valor do emprstimo:",pe),console.log("[DEBUG] Saldo atual do jogador:",(Ds=Z[N])==null?void 0:Ds.cash),oe=Z.map((Qe,Ot)=>Ot!==N?Qe:{...Qe,cash:(Number(Qe.cash)||0)+pe,loanPending:{amount:pe,dueRound:n+1,charged:!1}}),console.log("[DEBUG] Novo saldo do jogador:",(Ns=oe[N])==null?void 0:Ns.cash),console.log("[DEBUG] Novo loanPending:",($s=oe[N])==null?void 0:$s.loanPending),e(oe),x(oe,s,n)}else if(Y.type==="REDUCE"){console.log("[DEBUG]  Condio REDUCE atendida! Processando reduo:",Y);const ne=Y.items||[];let pe=0;console.log("[DEBUG] Selees para reduzir:",ne),oe=Z.map((Qe,Ot)=>{if(Ot!==N)return Qe;let Vn={...Qe};for(const En of ne)En.selected&&(pe+=Number(En.credit||0),En.group==="MIX"?Vn.mixOwned={...Vn.mixOwned||{},[En.level]:!1}:En.group==="ERP"&&(Vn.erpOwned={...Vn.erpOwned||{},[En.level]:!1}));return Vn.cash=(Number(Vn.cash)||0)+pe,Vn}),console.log("[DEBUG] Total de crdito da reduo:",pe),console.log("[DEBUG] Novo saldo aps reduo:",(qt=oe[N])==null?void 0:qt.cash),e(oe),x(oe,s,n)}else console.log("[DEBUG]  Nenhuma condio foi atendida! Tipo:",Y.type,"Action:",Y.action);const xe=Number(((I=oe[N])==null?void 0:I.cash)||0);if(console.log("[DEBUG] Verificando saldo aps recuperao - Novo saldo:",xe,"Necessrio:",j),xe>=j){console.log("[DEBUG]  Saldo suficiente aps recuperao! Processando pagamento de:",j);const ne=oe.map((pe,Qe)=>Qe!==N?pe:{...pe,cash:Math.max(0,(pe.cash||0)-j)});return console.log("[DEBUG]  PAGAMENTO - Saldo antes:",(ce=oe[N])==null?void 0:ce.cash,"Valor a pagar:",j,"Saldo aps:",(ve=ne[N])==null?void 0:ve.cash),e(ne),x(ne,s,n),!0}else return console.log("[DEBUG]  Saldo ainda insuficiente aps recuperao. Continuando recurso..."),await qe(j,z,te,oe)}else return p(!1),!1}else if(X.action==="BANKRUPT"){const Y=Z.map((ne,pe)=>pe===N?{...ne,bankrupt:!0}:ne);if(dn(Y)<=1){const ne=Y.findIndex(pe=>!(pe!=null&&pe.bankrupt));return k(ne>=0?Y[ne]:null),e(Y),g(!0),p(!1),x(Y,s,n,!0,ne>=0?Y[ne]:null),!1}const xe=Jt(Y,N);return e(Y),o(xe),p(!1),x(Y,xe,n),!1}else return p(!1),!1},Pt=wt.pos,Wt=(Pt+H)%hs,A=Wt<Pt;console.log("[DEBUG]  MOVIMENTO - De posio:",Pt,"Para posio:",Wt,"Steps:",H,"Lap:",A);const O=t.map((j,z)=>{if(z!==N)return j;const te=(j.cash||0)+(Oe||0);return{...j,pos:Wt,cash:Math.max(0,te)}});console.log("[DEBUG]  APS MOVIMENTO - Jogador:",(uu=O[N])==null?void 0:uu.name,"Posio:",(du=O[N])==null?void 0:du.pos,"Saldo:",(fu=O[N])==null?void 0:fu.cash);let C=n,U=i;A&&(U=[...i],U[N]=!0,U.slice(0,t.length).every(Boolean)&&(C=n+1,U=new Array(t.length).fill(!1),console.log("[DEBUG]  RODADA INCREMENTADA - Nova rodada:",C))),l(U);const L=Jt(O,N);if(Oe&&b(`${wt.name} ${Oe>0?"ganhou":"pagou"} $${Math.abs(Oe).toLocaleString()}`),Fe&&b(Fe),e(O),r(C),F.current={nextPlayers:O,nextTurnIdx:L,nextRound:C},O.filter(j=>!(j!=null&&j.bankrupt)).every(j=>Math.floor((j.pos||0)/hs)>=5)){console.log("[DEBUG]  FIM DE JOGO - Todos os jogadores completaram 5 rodadas"),Le(O,C),p(!1);return}if(Math.floor((((hu=O[N])==null?void 0:hu.pos)||0)/hs)>=5){console.log("[DEBUG]  JOGADOR COMPLETOU 5 RODADAS - Pulando para prximo:",(pu=O[N])==null?void 0:pu.name),p(!1);return}const K=Wt+1,we=qi(Pt,Wt,0),At=qi(Pt,Wt,22);if((K===6||K===16||K===32||K===49)&&c&&R&&v&&(async()=>{var Z,ee,X,le,ue;const j=((Z=t[N])==null?void 0:Z.erpLevel)||null;console.log("[DEBUG] ERP Modal - currentErpLevel:",j,"player:",(ee=t[N])==null?void 0:ee.name,"erpLevel:",(X=t[N])==null?void 0:X.erpLevel);const z=await V(a.jsx(Xd,{currentCash:((le=O[N])==null?void 0:le.cash)??f,currentLevel:j}));if(!z||z.action!=="BUY")return;const te=Number(((ue=z.values)==null?void 0:ue.compra)||0);if(!re(N,te,"comprar ERP")){p(!1);return}e(Q=>{const Se=Q.map((Te,St)=>St!==N?Te:Ne(Te,{cashDelta:-te,erpLevelSet:z.level}));return x(Se,L,C),Se})})(),(K===2||K===11||K===19||K===47)&&c&&R&&v&&(async()=>{var Z,ee,X,le;const j=t.find(u)||O[N],z=await V(a.jsx(Zd,{canTrain:{comum:Number(j==null?void 0:j.vendedoresComuns)||0,field:Number(j==null?void 0:j.fieldSales)||0,inside:Number(j==null?void 0:j.insideSales)||0,gestor:Number((j==null?void 0:j.gestores)??(j==null?void 0:j.gestoresComerciais)??(j==null?void 0:j.managers))||0},ownedByType:{comum:((Z=j==null?void 0:j.trainingsByVendor)==null?void 0:Z.comum)||[],field:((ee=j==null?void 0:j.trainingsByVendor)==null?void 0:ee.field)||[],inside:((X=j==null?void 0:j.trainingsByVendor)==null?void 0:X.inside)||[],gestor:((le=j==null?void 0:j.trainingsByVendor)==null?void 0:le.gestor)||[]}}));if(!z||z.action!=="BUY")return;const te=Number(z.grandTotal||0);if(!re(N,te,"comprar Treinamento")){p(!1);return}e(ue=>{const Q=ue.map((Se,Te)=>Te!==N?Se:Qd(Se,z));return x(Q,L,C),Q})})(),(K===5||K===10||K===43)&&c&&R&&v&&(async()=>{var te,Z,ee,X,le,ue,Q,Se,Te,St,Fn,Ts,Ds,Ns,$s;const j=((te=O[N])==null?void 0:te.cash)??f,z=await V(a.jsx(nb,{currentCash:j}));if(z){if(z.action==="OPEN"){const qt=String(z.open||"").toUpperCase();if(qt==="MIX"){const I=((Z=t[N])==null?void 0:Z.mixProdutos)||null,ce=await V(a.jsx(of,{currentCash:((ee=O[N])==null?void 0:ee.cash)??f,currentLevel:I}));if(ce&&ce.action==="BUY"){const ve=Number(ce.compra||0),Y=String(ce.level||"D");if(!re(N,ve,"comprar MIX")){p(!1);return}e(oe=>{const xe=oe.map((ne,pe)=>pe!==N?ne:Ne(ne,{cashDelta:-ve,mixProdutosSet:Y,mixBaseSet:{despesaPorCliente:Number(ce.despesa||0),faturamentoPorCliente:Number(ce.faturamento||0)}}));return x(xe,L,C),xe})}return}if(qt==="MANAGER"){const I=await V(a.jsx(nf,{currentCash:((X=O[N])==null?void 0:X.cash)??f}));if(I&&(I.action==="BUY"||I.action==="HIRE")){const ce=Number(I.headcount??I.qty??I.managersQty??1),ve=Number(typeof I.cashDelta<"u"?I.cashDelta:-Number(I.cost??I.total??I.totalHire??0)),Y=ve<0?-ve:0;if(Y>0&&!re(N,Y,"contratar Gestor")){p(!1);return}const oe=Number(I.expenseDelta??I.totalExpense??I.maintenanceDelta??0);e(xe=>{const ne=xe.map((pe,Qe)=>Qe!==N?pe:Ne(pe,{cashDelta:ve,gestoresDelta:ce,manutencaoDelta:oe}));return x(ne,L,C),ne})}return}if(qt==="INSIDE"){const I=await V(a.jsx(ef,{currentCash:((le=O[N])==null?void 0:le.cash)??f}));if(I&&(I.action==="BUY"||I.action==="HIRE")){const ce=Number(I.cost??I.total??0);if(!re(N,ce,"contratar Inside Sales")){p(!1);return}const ve=Number(I.headcount??I.qty??1);e(Y=>{const oe=Y.map((xe,ne)=>ne!==N?xe:Ne(xe,{cashDelta:-ce,insideSalesDelta:ve}));return x(oe,L,C),oe})}return}if(qt==="FIELD"){const I=await V(a.jsx(rf,{currentCash:((ue=O[N])==null?void 0:ue.cash)??f}));if(I&&(I.action==="HIRE"||I.action==="BUY")){const ce=Number(I.headcount??I.qty??1),ve={cashDelta:Number(I.cashDelta??-Number(I.totalHire??I.total??I.cost??0)),manutencaoDelta:Number(I.expenseDelta??I.totalExpense??0),revenueDelta:Number(I.revenueDelta??0),fieldSalesDelta:ce},Y=ve.cashDelta<0?-ve.cashDelta:0;if(Y>0&&!re(N,Y,"contratar Field Sales")){p(!1);return}e(oe=>{const xe=oe.map((ne,pe)=>pe!==N?ne:Ne(ne,ve));return x(xe,L,C),xe})}return}if(qt==="COMMON"){const I=await V(a.jsx(sf,{currentCash:((Q=O[N])==null?void 0:Q.cash)??f}));if(I&&I.action==="BUY"){const ce=Number(I.headcount??I.qty??0),ve={cashDelta:Number(I.cashDelta??-Number(I.totalHire??I.total??I.cost??0)),vendedoresComunsDelta:ce,manutencaoDelta:Number(I.expenseDelta??I.totalExpense??0),revenueDelta:Number(I.revenueDelta??0)},Y=ve.cashDelta<0?-ve.cashDelta:0;if(Y>0&&!re(N,Y,"contratar Vendedores Comuns")){p(!1);return}e(oe=>{const xe=oe.map((ne,pe)=>pe!==N?ne:Ne(ne,ve));return x(xe,L,C),xe})}return}if(qt==="ERP"){const I=((Se=t[N])==null?void 0:Se.erpLevel)||null,ce=await V(a.jsx(Xd,{currentCash:((Te=O[N])==null?void 0:Te.cash)??f,currentLevel:I}));if(ce&&ce.action==="BUY"){const ve=Number(((St=ce.values)==null?void 0:St.compra)||0);if(!re(N,ve,"comprar ERP")){p(!1);return}e(Y=>{const oe=Y.map((xe,ne)=>ne!==N?xe:Ne(xe,{cashDelta:-ve,erpLevelSet:ce.level}));return x(oe,L,C),oe})}return}if(qt==="CLIENTS"){const I=await V(a.jsx(tf,{currentCash:((Fn=O[N])==null?void 0:Fn.cash)??f}));if(I&&I.action==="BUY"){const ce=Number(I.totalCost||0);if(!re(N,ce,"comprar Clientes")){p(!1);return}const ve=Number(I.qty||0),Y=Number(I.maintenanceDelta||0),oe=Number(I.bensDelta||ce);e(xe=>{const ne=xe.map((pe,Qe)=>Qe!==N?pe:Ne(pe,{cashDelta:-ce,clientsDelta:ve,manutencaoDelta:Y,bensDelta:oe}));return x(ne,L,C),ne})}return}if(qt==="TRAINING"){const I=t.find(u)||O[N],ce=await V(a.jsx(Zd,{canTrain:{comum:Number(I==null?void 0:I.vendedoresComuns)||0,field:Number(I==null?void 0:I.fieldSales)||0,inside:Number(I==null?void 0:I.insideSales)||0,gestor:Number((I==null?void 0:I.gestores)??(I==null?void 0:I.gestoresComerciais)??(I==null?void 0:I.managers))||0},ownedByType:{comum:((Ts=I==null?void 0:I.trainingsByVendor)==null?void 0:Ts.comum)||[],field:((Ds=I==null?void 0:I.trainingsByVendor)==null?void 0:Ds.field)||[],inside:((Ns=I==null?void 0:I.trainingsByVendor)==null?void 0:Ns.inside)||[],gestor:(($s=I==null?void 0:I.trainingsByVendor)==null?void 0:$s.gestor)||[]}}));if(ce&&ce.action==="BUY"){const ve=Number(ce.grandTotal||0);if(!re(N,ve,"comprar Treinamento")){p(!1);return}e(Y=>{const oe=Y.map((xe,ne)=>ne!==N?xe:Qd(xe,ce));return x(oe,L,C),oe})}return}}if(z.action==="BUY"){if(z.kind==="CLIENTS"||z.modal==="CLIENTS"||typeof z.clientsQty<"u"||typeof z.numClients<"u"||typeof z.totalCost<"u"||typeof z.maintenanceDelta<"u"){const ce=Number(z.totalCost??z.total??z.amount??0);if(!re(N,ce,"comprar Clientes")){p(!1);return}const ve=Number(z.clientsQty??z.numClients??z.qty??0),Y=Number(z.maintenanceDelta??z.maintenance??z.mexp??0),oe=Number(z.bensDelta??ce);e(xe=>{const ne=xe.map((pe,Qe)=>Qe!==N?pe:Ne(pe,{cashDelta:-ce,clientsDelta:ve,manutencaoDelta:Y,bensDelta:oe}));return x(ne,L,C),ne});return}const I=Number(z.total??z.amount??0);if(!re(N,I,"esta compra")){p(!1);return}e(ce=>{const ve=ce.map((Y,oe)=>oe!==N?Y:Ne(Y,{cashDelta:-I,directBuysPush:[z.item||{total:I}]}));return x(ve,L,C),ve})}}})(),(K===12||K===21||K===30||K===42||K===53)&&c&&R&&v&&(async()=>{var Z;const j=await V(a.jsx(ef,{currentCash:((Z=O[N])==null?void 0:Z.cash)??f}));if(!j||j.action!=="HIRE"&&j.action!=="BUY")return;const z=Number(j.cost??j.total??0);if(!re(N,z,"contratar Inside Sales")){p(!1);return}const te=Number(j.headcount??j.qty??1);e(ee=>{const X=ee.map((le,ue)=>ue!==N?le:Ne(le,{cashDelta:-z,insideSalesDelta:te}));return x(X,L,C),X})})(),[4,8,15,17,20,27,34,36,39,46,52,55].includes(K)&&c&&R&&v&&(async()=>{var X;const j=await V(a.jsx(tf,{currentCash:((X=O[N])==null?void 0:X.cash)??f}));if(!j||j.action!=="BUY")return;const z=Number(j.totalCost||0);if(!re(N,z,"comprar Clientes")){p(!1);return}const te=Number(j.qty||0),Z=Number(j.maintenanceDelta||0),ee=Number(j.bensDelta||z);e(le=>{const ue=le.map((Q,Se)=>Se!==N?Q:Ne(Q,{cashDelta:-z,clientsDelta:te,manutencaoDelta:Z,bensDelta:ee}));return x(ue,L,C),ue})})(),[18,24,29,51].includes(K)&&c&&R&&v&&(async()=>{var X;const j=await V(a.jsx(nf,{currentCash:((X=O[N])==null?void 0:X.cash)??f}));if(!j||j.action!=="BUY"&&j.action!=="HIRE")return;const z=Number(j.headcount??j.qty??j.managersQty??1),te=Number(typeof j.cashDelta<"u"?j.cashDelta:-Number(j.cost??j.total??j.totalHire??0)),Z=te<0?-te:0;if(Z>0&&!re(N,Z,"contratar Gestor")){p(!1);return}const ee=Number(j.expenseDelta??j.totalExpense??j.maintenanceDelta??0);e(le=>{const ue=le.map((Q,Se)=>Se!==N?Q:Ne(Q,{cashDelta:te,gestoresDelta:z,manutencaoDelta:ee}));return x(ue,L,C),ue})})(),[13,25,33,38,50].includes(K)&&c&&R&&v&&(async()=>{var z;const j=await V(a.jsx(rf,{currentCash:((z=O[N])==null?void 0:z.cash)??f}));if(j&&(j.action==="HIRE"||j.action==="BUY")){const te=Number(j.headcount??j.qty??1),Z={cashDelta:Number(j.cashDelta??-Number(j.totalHire??j.total??j.cost??0)),manutencaoDelta:Number(j.expenseDelta??j.totalExpense??0),revenueDelta:Number(j.revenueDelta??0),fieldSalesDelta:te},ee=Z.cashDelta<0?-Z.cashDelta:0;if(ee>0&&!re(N,ee,"contratar Field Sales")){p(!1);return}e(X=>{const le=X.map((ue,Q)=>Q!==N?ue:Ne(ue,Z));return x(le,L,C),le})}})(),[9,28,40,45].includes(K)&&c&&R&&v&&(async()=>{var ee;const j=await V(a.jsx(sf,{currentCash:((ee=O[N])==null?void 0:ee.cash)??f}));if(!j||j.action!=="BUY")return;const z=Number(j.headcount??j.qty??0),te={cashDelta:Number(j.cashDelta??-Number(j.totalHire??j.total??j.cost??0)),vendedoresComunsDelta:z,manutencaoDelta:Number(j.expenseDelta??j.totalExpense??0),revenueDelta:Number(j.revenueDelta??0)},Z=te.cashDelta<0?-te.cashDelta:0;if(Z>0&&!re(N,Z,"contratar Vendedores Comuns")){p(!1);return}e(X=>{const le=X.map((ue,Q)=>Q!==N?ue:Ne(ue,te));return x(le,L,C),le})})(),[7,31,44].includes(K)&&c&&R&&v&&(async()=>{var ee,X,le,ue;const j=((ee=t[N])==null?void 0:ee.mixProdutos)||null;console.log("[DEBUG] MIX Modal - currentMixLevel:",j,"player:",(X=t[N])==null?void 0:X.name,"mixProdutos:",(le=t[N])==null?void 0:le.mixProdutos);const z=await V(a.jsx(of,{currentCash:((ue=O[N])==null?void 0:ue.cash)??f,currentLevel:j}));if(!z||z.action!=="BUY")return;const te=Number(z.compra||0);if(!re(N,te,"comprar MIX")){p(!1);return}const Z=String(z.level||"D");e(Q=>{const Se=Q.map((Te,St)=>St!==N?Te:Ne(Te,{cashDelta:-te,mixProdutosSet:Z,mixBaseSet:{despesaPorCliente:Number(z.despesa||0),faturamentoPorCliente:Number(z.faturamento||0)}}));return x(Se,L,C),Se})})(),[3,14,22,26,35,41,48,54].includes(K)&&c&&R&&v&&(async()=>{const j=await V(a.jsx(rb,{}));if(!j||j.action!=="APPLY_CARD")return;O[N]||t.find(u);let z=Number.isFinite(j.cashDelta)?Number(j.cashDelta):0,te=Number.isFinite(j.clientsDelta)?Number(j.clientsDelta):0;if(z<0){const ee=-z;await qe(ee,"Sorte & Revs","pagar",O)}if(e(ee=>{const X=ee.map((le,ue)=>{var Se;if(ue!==N)return le;let Q={...le};if(z&&(Q.cash=Math.max(0,(Q.cash??0)+z)),te){const Te=Q.clients||0;Q.clients=Math.max(0,Te+te),console.log("[DEBUG] SorteReves - Clientes alterados:",Te,"->",Q.clients,"delta:",te)}if(j.gainSpecialCell&&(Q.fieldSales=(Q.fieldSales||0)+(j.gainSpecialCell.fieldSales||0),Q.support=(Q.support||0)+(j.gainSpecialCell.support||0),Q.gestores=(Q.gestores||0)+(j.gainSpecialCell.manager||0),Q.gestoresComerciais=(Q.gestoresComerciais||0)+(j.gainSpecialCell.manager||0),Q.managers=(Q.managers||0)+(j.gainSpecialCell.manager||0)),j.id==="casa_change_cert_blue"){Q.az=(Q.az||0)+1;const Te=new Set(((Se=Q.trainingsByVendor)==null?void 0:Se.comum)||[]);Te.add("personalizado"),Q.trainingsByVendor={...Q.trainingsByVendor||{},comum:Array.from(Te)}}return Q});return x(X,L,C),X}),j.perClientBonus||j.perCertifiedManagerBonus||j.mixLevelBonusABOnly){const ee=O[N]||t.find(u)||{};let X=0;if(j.perClientBonus&&(X+=(Number(ee.clients)||0)*Number(j.perClientBonus||0)),j.perCertifiedManagerBonus&&(X+=Yp(ee)*Number(j.perCertifiedManagerBonus||0)),j.mixLevelBonusABOnly){const le=String(ee.mixProdutos||"").toUpperCase();(le==="A"||le==="B")&&(X+=Number(j.mixLevelBonusABOnly||0))}X&&e(le=>{const ue=le.map((Q,Se)=>Se===N?{...Q,cash:(Number(Q.cash)||0)+X}:Q);return x(ue,L,C),ue})}})(),we&&c&&R&&v){const j=O[N]||{},z=Math.max(0,Math.floor(mr(j)));(async()=>{await V(a.jsx(sb,{value:z})),e(te=>{const Z=te.map((ee,X)=>X!==N?ee:{...ee,cash:(ee.cash||0)+z});return x(Z,L,C),Z}),b(`${j.name} recebeu faturamento do ms: +$${z.toLocaleString()}`);try{setTimeout(()=>D==null?void 0:D({action:"AUTO_CLOSE_BELOW"}),0)}catch{}})()}if(At&&c&&R&&v){console.log("[DEBUG]  DESPESAS OPERACIONAIS - Jogador:",(mu=O[N])==null?void 0:mu.name,"Posio atual:",(gu=O[N])==null?void 0:gu.pos);const j=O[N]||{},z=Math.max(0,Math.floor(Un(j))),te=j.loanPending||{},Z=Number(te.amount)>0&&!te.charged&&n>=Math.max(1,Number(te.dueRound||0)),ee=Z?Math.max(0,Math.floor(Number(te.amount))):0;console.log("[DEBUG]  DESPESAS - Valor:",z,"Emprstimo a cobrar:",ee,"Total:",z+ee),console.log("[DEBUG]  EMPRSTIMO - Detalhes:",{amount:Number(te.amount),charged:te.charged,dueRound:Number(te.dueRound||0),currentRound:n,shouldCharge:Z}),(async()=>{var ue;await V(a.jsx(ob,{expense:z,loanCharge:ee}));const X=z+ee;console.log("[DEBUG]  ANTES handleInsufficientFunds - Saldo atual:",(ue=O[N])==null?void 0:ue.cash,"Total a pagar:",X);const le=await qe(X,"Despesas Operacionais","pagar",O);if(console.log("[DEBUG]  APS handleInsufficientFunds - canPayExpenses:",le),!le){p(!1);return}Z&&e(Q=>{const Se=Q.map((Te,St)=>{if(St!==N)return Te;const Fn={...Te};return Fn.loanPending={...Te.loanPending||{},charged:!0,chargedAtRound:n},Fn});return x(Se,s,n),Se}),b(`${j.name} pagou despesas operacionais: -$${z.toLocaleString()}`),ee>0&&b(`${j.name} teve emprstimo cobrado: -$${ee.toLocaleString()}`),e(Q=>{var Se,Te,St;return console.log("[DEBUG]  DESPESAS FINALIZADAS - Jogador:",(Se=Q[N])==null?void 0:Se.name,"Posio final:",(Te=Q[N])==null?void 0:Te.pos,"Saldo final:",(St=Q[N])==null?void 0:St.cash),Q});try{setTimeout(()=>D==null?void 0:D({action:"AUTO_CLOSE_BELOW"}),0)}catch{}})()}const _m=Date.now(),cu=()=>{var Z,ee;if($!=="game")return;const j=be.current,z=Ye.current,te=String(z||"")===String(d);if(console.log("[DEBUG] tick - modalLocks:",j,"lockOwner:",z,"myUid:",d,"isLockOwner:",te),j===0){if(te){const X=F.current;if(X){const le=((Z=t[s])==null?void 0:Z.name)||"Jogador",ue=((ee=X.nextPlayers[X.nextTurnIdx])==null?void 0:ee.name)||"Jogador";console.log(`[ TURNO]  MUDANDO TURNO - ${le} terminou  ${ue} pode jogar`),console.log("[DEBUG]  Mudando turno - de:",s,"para:",X.nextTurnIdx),o(X.nextTurnIdx),x(X.nextPlayers,X.nextTurnIdx,X.nextRound),F.current=null}else console.log("[DEBUG]  tick - turnData  null, no mudando turno");p(!1)}else console.log("[DEBUG]  tick - no sou o dono do cadeado, no mudando turno");return}if(Date.now()-_m>2e4){console.log("[DEBUG]  TIMEOUT - forando desbloqueio aps 20s"),te&&p(!1);return}setTimeout(cu,80)};cu()},[$,t,n,s,i,c,u,d,f,m,b,x,e,r,o,l,p,re,Le,R,v,D]),Vt=E.useCallback(()=>{if(m||!t.length)return;const H=Jt(t,s);o(H),x(t,H,n)},[x,m,t,n,o,s]),Me=E.useCallback(H=>{var Fe,N,wt,qe,Pt,Wt,A,O;if($!=="game"){console.warn("[onAction] Tentativa de ao fora da fase de jogo.");return}if(!(H!=null&&H.type)||m)return;const Oe=((Fe=t[curIdx])==null?void 0:Fe.name)||"Jogador";if(console.log(`[ AO] ${Oe} - Executando ao:`,H.type),H.type==="ROLL"){if(!c)return;console.log(`[ DADO] ${Oe} - Rolou ${H.steps} passos`),Sn(H.steps,H.cashDelta,H.note);return}if(H.type==="RECOVERY"){const C=Math.floor(Math.random()*3e3)+1e3,U=t.find(u);if(!U)return;const L=t.map(W=>u(W)?{...W,cash:W.cash+C}:W);b(`${U.name} ativou Recuperao Financeira (+$${C})`),e(L),x(L,s,n),p(!1);return}if(H.type==="RECOVERY_CUSTOM"){const C=Number(H.amount||0),U=t.find(u);if(!U)return;const L=t.map(W=>u(W)?{...W,cash:W.cash+C}:W);b(`${U.name} recuperou +$${C}`),e(L),x(L,s,n),p(!1);return}if(H.type==="RECOVERY_MODAL"){if(!c||!R||!v)return;(async()=>{const C=await V(a.jsx(af,{playerName:(y==null?void 0:y.name)||"Jogador",currentPlayer:y}));if(C)switch(C.type){case"FIRE":Me==null||Me({type:"RECOVERY_FIRE",items:C.items,amount:C.totalCredit??C.amount??0,note:C.note,creditByRole:C.creditByRole});break;case"REDUCE":{const U=Array.isArray(C.items)&&C.items.length>0,L=U?C.items.map((K,we)=>({...K,group:String(K.group||K.tipo||"").toUpperCase(),level:String(K.level||K.nivel||"").toUpperCase(),credit:Number(K.credit??K.amount??0),selected:we===0?!0:!!K.selected})):void 0,W=U&&(L==null?void 0:L[0])||C.selection||C.sel||(C.group&&C.level?{group:String(C.group).toUpperCase(),level:String(C.level).toUpperCase(),credit:Number(C.credit??C.amount??0)}:null),G=Number((U?C.total??C.totalCredit:void 0)??(W==null?void 0:W.credit)??C.amount??0),se=C.note||(U?`Reduo mltipla +R$ ${G.toLocaleString()}`:W?`Reduo ${W.group} nvel ${W.level} +R$ ${G.toLocaleString()}`:`Reduo +R$ ${G.toLocaleString()}`);Me==null||Me({type:"RECOVERY_REDUCE",items:L,selection:W||null,amount:G,note:se});break}case"LOAN":{const U=typeof C.amount=="object"&&C.amount!==null?C.amount:{amount:Number(C.amount??0),cashDelta:Number(C.cashDelta??C.amount??0),loan:C.loan},L=Number(U.amount??0),W=Number(U.cashDelta??L??0),G=U.loan??C.loan??{};Me==null||Me({type:"RECOVERY_LOAN",amount:L,cashDelta:W,loan:G,note:C.note});break}default:C.amount>0&&(Me==null||Me({type:"RECOVERY_CUSTOM",amount:C.amount,note:C.note}))}})();return}if(H.type==="BANKRUPT_MODAL"){if(!c||!R||!v)return;(async()=>await V(a.jsx(ub,{playerName:(y==null?void 0:y.name)||"Jogador"}))&&(Me==null||Me({type:"BANKRUPT"})))();return}if(H.type==="RECOVERY_FIRE"){const C=Number(H.amount||0),U=H.items||{},L={cashDelta:C,vendedoresComunsDelta:-Number(U.comum||0),fieldSalesDelta:-Number(U.field||0),insideSalesDelta:-Number(U.inside||0),gestoresDelta:-Number(U.gestor||0)},W=s;e(G=>{const se=G.map((K,we)=>we!==W?K:Ne(K,L));return x(se,s,n),se}),b(`${((N=t[W])==null?void 0:N.name)||"Jogador"}: ${H.note||"Demisses"}`),p(!1);return}if(H.type==="RECOVERY_LOAN"){const C=Math.max(0,Number(H.amount||0));if(!C){p(!1);return}const U=s,L=t[U];if(L!=null&&L.loanPending&&!L.loanPending.charged){b(`${(L==null?void 0:L.name)||"Jogador"} j possui um emprstimo pendente.`),p(!1);return}const W=n+1;e(G=>{const se=G.map((K,we)=>we!==U?K:{...K,cash:(Number(K.cash)||0)+C,loanPending:{amount:C,dueRound:W,charged:!1}});return x(se,s,n),se}),b(`${(L==null?void 0:L.name)||"Jogador"} pegou emprstimo: +$${C.toLocaleString()}`),p(!1);return}if(H.type==="BUY_MIX"||H.kind==="MIX_BUY"||H.type==="DIRECT_BUY_MIX"){const C=String(H.level||"").toUpperCase(),U=Math.max(0,Number(H.price??0));if(!["A","B","C","D"].includes(C)){p(!1);return}const L=s;if(!J(L,U)){b("Saldo insuficiente para comprar MIX"),p(!1);return}e(W=>{const G=W.map((se,K)=>{if(K!==L)return se;const we={...se.mixOwned||se.mix||{},D:!0};return we[C]=!0,{...se,cash:Math.max(0,(Number(se.cash)||0)-U),mixOwned:we,mix:we,mixLevel:C,mixProdutos:C}});return x(G,s,n),G}),b(`${((wt=t[L])==null?void 0:wt.name)||"Jogador"} comprou MIX nvel ${C} por -$${U.toLocaleString()}`),p(!1);return}if(H.type==="BUY_ERP"||H.kind==="ERP_BUY"||H.type==="DIRECT_BUY_ERP"){const C=String(H.level||"").toUpperCase(),U=Math.max(0,Number(H.price??0));if(!["A","B","C","D"].includes(C)){p(!1);return}const L=s;if(!J(L,U)){b("Saldo insuficiente para comprar ERP"),p(!1);return}e(W=>{const G=W.map((se,K)=>{if(K!==L)return se;const we={...se.erpOwned||se.erp||{},D:!0};return we[C]=!0,{...se,cash:Math.max(0,(Number(se.cash)||0)-U),erpOwned:we,erp:we,erpLevel:C,erpSystems:{...se.erpSystems||{},level:C}}});return x(G,s,n),G}),b(`${((qe=t[L])==null?void 0:qe.name)||"Jogador"} comprou ERP nvel ${C} por -$${U.toLocaleString()}`),p(!1);return}if(H.type==="RECOVERY_REDUCE"){const C=ie=>String(ie||"").toUpperCase(),U=ie=>{const he=String(ie||"").toUpperCase();return he==="MIX"||he==="ERP"?he:he.includes("MIX")?"MIX":he.includes("ERP")?"ERP":""},W=(()=>{if(Array.isArray(H.items)&&H.items.length)return H.items.filter(he=>(he==null?void 0:he.selected)??!0).map(he=>({group:U(he.group||he.kind),level:C(he.level),credit:Math.max(0,Number(he.credit??he.amount??0))})).filter(he=>(he.group==="MIX"||he.group==="ERP")&&["A","B","C","D"].includes(he.level));const ie=H.selection||H.target||null;if(ie){const he={group:U(ie.group||ie.kind),level:C(ie.level),credit:Math.max(0,Number(ie.credit??ie.amount??H.amount??0))};if((he.group==="MIX"||he.group==="ERP")&&["A","B","C","D"].includes(he.level))return[he]}return[]})();if(!W.length){const ie=Math.max(0,Number(H.amount??0));if(ie>0){const he=s;e(Je=>{const zn=Je.map((en,_n)=>_n!==he?en:{...en,cash:(Number(en.cash)||0)+ie});return x(zn,s,n),zn})}p(!1);return}const G=(ie,he)=>{const Je={A:!1,B:!1,C:!1,D:!1,...ie||{}},zn=C(he);return!Je.A&&!Je.B&&!Je.C&&!Je.D&&(["A","B","C","D"].includes(zn)?Je[zn]=!0:Je.D=!0),Je},se=ie=>ie!=null&&ie.A?"A":ie!=null&&ie.B?"B":ie!=null&&ie.C?"C":ie!=null&&ie.D?"D":"-",K=s,we=t[K];e(ie=>{const he=ie.map((Je,zn)=>{if(zn!==K)return Je;let en={A:!1,B:!1,C:!1,D:!1,...Je.mixOwned||Je.mix||{}},_n={A:!1,B:!1,C:!1,D:!1,...Je.erpOwned||Je.erp||{}};en=G(en,Je.mixProdutos),_n=G(_n,Je.erpSistemas);let pa=0;for(const Rs of W)pa+=Math.max(0,Number(Rs.credit||0)),Rs.group==="MIX"?en[Rs.level]=!1:_n[Rs.level]=!1;const au=se(en),lu=se(_n);return{...Je,cash:(Number(Je.cash)||0)+pa,mixOwned:en,erpOwned:_n,mix:en,erp:_n,mixProdutos:au,erpSistemas:lu}});return x(he,s,n),he});const At=W.reduce((ie,he)=>ie+Math.max(0,Number(he.credit||0)),0);if(W.length===1){const ie=W[0];b(`${(we==null?void 0:we.name)||"Jogador"} reduziu ${ie.group} nvel ${ie.level} e recebeu +$${At.toLocaleString()}`)}else b(`${(we==null?void 0:we.name)||"Jogador"} reduziu ${W.length} nveis e recebeu +$${At.toLocaleString()}`);p(!1);return}if(H.type==="BANKRUPT"){const C=s;try{String((Pt=t[C])==null?void 0:Pt.id)===String(d)&&(T==null||T(!0))}catch{}const U=t.map((G,se)=>se===C?{...G,bankrupt:!0}:G);if(b(`${((Wt=t[C])==null?void 0:Wt.name)||"Jogador"} declarou FALNCIA.`),dn(U)<=1){const G=U.findIndex(se=>!(se!=null&&se.bankrupt));k(G>=0?U[G]:null),e(U),g(!0),p(!1),x(U,s,n,!0,G>=0?U[G]:null);return}const W=Jt(U,C);e(U),o(W),p(!1),x(U,W,n),console.log("[DEBUG]  advanceAndMaybeLap finalizada (falncia) - posio final:",(A=U[W])==null?void 0:A.pos);return}console.log("[DEBUG]  advanceAndMaybeLap finalizada normalmente - posio final:",(O=nextPlayers[curIdx])==null?void 0:O.pos)},[$,t,n,s,c,u,d,f,m,b,x,e,r,o,p,g,k,re,R,v,D,T]);return E.useEffect(()=>{c&&!m&&(console.log("[DEBUG]  minha vez - atualizando lockOwner para:",d),hn(String(d)))},[c,d,m]),E.useEffect(()=>{P===0&&_&&String(lt||"")===String(d)&&p(!1)},[P,_,lt,d,p]),E.useEffect(()=>{c&&P===0&&_&&String(lt||"")===String(d)&&p(!1)},[c,P,_,lt,d,p]),{advanceAndMaybeLap:Sn,onAction:Me,nextTurn:Vt,modalLocks:P,lockOwner:lt}}class fb{constructor(){this.errors=[],this.warnings=[],this.validationCount=0,this.isEnabled=!1}validatePlayerState(e,n=""){const r=[],s=[];e.cash<0&&r.push(` Saldo negativo: ${e.cash} (${n})`),e.clients<0&&r.push(` Clientes negativos: ${e.clients} (${n})`),e.vendedoresComuns<0&&r.push(` Vendedores comuns negativos: ${e.vendedoresComuns} (${n})`),e.fieldSales<0&&r.push(` Field sales negativos: ${e.fieldSales} (${n})`),e.insideSales<0&&r.push(` Inside sales negativos: ${e.insideSales} (${n})`),["A","B","C","D"].includes(e.erpLevel)||r.push(` Nvel ERP invlido: ${e.erpLevel} (${n})`),["A","B","C","D"].includes(e.mixProdutos)||r.push(` Nvel Mix invlido: ${e.mixProdutos} (${n})`),(e.pos<0||e.pos>=55)&&r.push(` Posio invlida: ${e.pos} (deve estar entre 0 e 54) (${n})`),(e.az<0||e.am<0||e.rox<0)&&r.push(` Certificados negativos: az=${e.az}, am=${e.am}, rox=${e.rox} (${n})`);const{cap:l,inAtt:c}=Ln(e);c>l&&s.push(` Atendimento (${c}) maior que capacidade (${l}) (${n})`);const u=mr(e),d=Un(e);return u<0&&r.push(` Faturamento negativo: ${u} (${n})`),d<0&&r.push(` Despesas negativas: ${d} (${n})`),this.errors.push(...r),this.warnings.push(...s),{errors:r,warnings:s}}validateTurnState(e,n,r=""){const s=[],o=[];(n<0||n>=e.length)&&s.push(` turnIdx invlido: ${n} (deve estar entre 0 e ${e.length-1}) (${r})`);const i=e[n];i||s.push(` Jogador do turno no existe: ndice ${n} (${r})`),i&&i.bankrupt&&s.push(` Jogador do turno est falido: ${i.name} (${r})`);const l=dn(e);if(l===0&&s.push(` Nenhum jogador vivo restante (${r})`),l>1){const c=Jt(e,n),u=e[c];(!u||u.bankrupt)&&s.push(` Prximo jogador invlido: ndice ${c} (${r})`)}return this.errors.push(...s),this.warnings.push(...o),{errors:s,warnings:o}}validateAction(e,n,r,s=""){const o=[],i=[];return["ROLL_DICE","BUY","DONT_BUY","BANKRUPT","RECOVERY"].includes(e)||o.push(` Ao invlida: ${e} (${s})`),e!=="BANKRUPT"&&n.bankrupt&&o.push(` Jogador falido no pode executar ao: ${e} (${s})`),e==="BUY"&&n.cash<0&&o.push(` Jogador sem saldo no pode comprar (${s})`),this.errors.push(...o),this.warnings.push(...i),{errors:o,warnings:i}}validateSynchronization(e,n,r=""){const s=[],o=[];return e.turnIdx!==n.turnIdx&&s.push(` turnIdx dessincronizado: local=${e.turnIdx}, remote=${n.turnIdx} (${r})`),e.round!==n.round&&s.push(` round dessincronizado: local=${e.round}, remote=${n.round} (${r})`),e.gameOver!==n.gameOver&&s.push(` gameOver dessincronizado: local=${e.gameOver}, remote=${n.gameOver} (${r})`),e.winner!==n.winner&&s.push(` winner dessincronizado: local=${e.winner}, remote=${n.winner} (${r})`),e.players.length!==n.players.length&&s.push(` Nmero de jogadores dessincronizado: local=${e.players.length}, remote=${n.players.length} (${r})`),this.errors.push(...s),this.warnings.push(...o),{errors:s,warnings:o}}validateBusinessRules(e,n,r=""){const s=[],o=[];n==="TAKE_LOAN"&&e.loanPending&&s.push(` Jogador j tem emprstimo pendente (${r})`),(n==="BUY_ERP_LEVEL_D"||n==="BUY_MIX_LEVEL_D")&&s.push(` Nvel D no pode ser comprado (j possui) (${r})`);const i=e.vendedoresComuns+e.fieldSales+e.insideSales;return i>20&&o.push(` Muitos vendedores: ${i} (mximo recomendado: 20) (${r})`),e.cash<0&&!e.bankrupt&&s.push(` Jogador com saldo negativo deve declarar falncia (${r})`),this.errors.push(...s),this.warnings.push(...o),{errors:s,warnings:o}}validateGameState(e,n,r,s,o,i=""){this.validationCount++,console.log(` [Validao ${this.validationCount}] ${i}`),e.forEach((l,c)=>{this.validatePlayerState(l,`Jogador ${c+1} (${l.name})`)}),this.validateTurnState(e,n,`Turno ${n}`),s&&!o&&this.errors.push(" Jogo terminado mas sem vencedor definido"),o&&!s&&this.warnings.push(" Vencedor definido mas jogo no terminado"),this.reportValidation(i)}reportValidation(e=""){const n=this.errors.length,r=this.warnings.length;n>0&&(console.group(` ERROS ENCONTRADOS (${n}) - ${e}`),this.errors.forEach((s,o)=>{console.error(`${o+1}. ${s}`)}),console.groupEnd()),r>0&&(console.group(` AVISOS (${r}) - ${e}`),this.warnings.forEach((s,o)=>{console.warn(`${o+1}. ${s}`)}),console.groupEnd()),n===0&&r===0&&console.log(` Validao OK - ${e}`),this.errors=[],this.warnings=[]}enable(){this.isEnabled=!0,console.log(" Validador em tempo real ATIVADO")}disable(){this.isEnabled=!1,console.log(" Validador em tempo real DESATIVADO")}clear(){this.errors=[],this.warnings=[],this.validationCount=0,console.log(" Validador limpo")}getStats(){return{validationCount:this.validationCount,isEnabled:this.isEnabled,totalErrors:this.errors.length,totalWarnings:this.warnings.length}}}const Or=new fb,hb=(t,e,n,r,s,o="")=>{Or.isEnabled&&Or.validateGameState(t,e,n,r,s,o)},Xp=()=>Or.enable(),Zp=()=>Or.disable(),em=()=>Or.clear(),tm=()=>Or.getStats();typeof window<"u"&&(window.enableRealTimeValidation=Xp,window.disableRealTimeValidation=Zp,window.clearValidationLogs=em,window.getValidationStats=tm,window.realTimeValidator=Or,console.log(" Validador em tempo real carregado!"),console.log('Execute "enableRealTimeValidation()" para ativar'),console.log('Execute "getValidationStats()" para ver estatsticas'));const Ge=(t={})=>({id:"test-player-1",name:"Jogador Teste",cash:18e3,pos:0,color:"#ffd54f",bens:4e3,clients:1,vendedoresComuns:1,fieldSales:0,insideSales:0,gestores:0,gestoresComerciais:0,managers:0,erpLevel:"D",mixProdutos:"D",az:0,am:0,rox:0,trainingsByVendor:{},onboarding:!1,bankrupt:!1,loanPending:null,...t}),pb=(t=[Ge()])=>({players:t,turnIdx:0,round:1,gameOver:!1,winner:null}),nm=()=>{console.group(" Testes de Clculos Bsicos");const t=Ge(),e=mr(t);console.assert(e===770,`Faturamento inicial deve ser 770, mas foi ${e}`);const n=Un(t);console.assert(n===1200,`Despesas iniciais devem ser 1200, mas foram ${n}`);const{cap:r,inAtt:s}=Ln(t);console.assert(r===2,`Capacidade inicial deve ser 2, mas foi ${r}`),console.assert(s===1,`Atendimento inicial deve ser 1, mas foi ${s}`),console.log(" Clculos bsicos: OK"),console.groupEnd()},rm=()=>{console.group(" Testes de Movimento e Posio");const e=(Ge({pos:0}).pos+4)%55;console.assert(e===4,`Movimento de 4 casas deve resultar em posio 4, mas foi ${e}`);const r=(Ge({pos:54}).pos+1)%55;console.assert(r===0,`Volta completa deve resultar em posio 0, mas foi ${r}`);const s=qi(0,4,0);console.assert(s===!1,"No deve ter cruzado casa 0 ao mover de 0 para 4");const o=qi(54,0,0);console.assert(o===!0,"Deve ter cruzado casa 0 ao dar volta completa"),console.log(" Movimento e posio: OK"),console.groupEnd()},sm=()=>{console.group(" Testes de Certificados");const t=Ge();console.assert(Jd(t)===!1,"Jogador no deve ter certificado azul inicialmente"),console.assert(Kd(t)===!1,"Jogador no deve ter certificado amarelo inicialmente"),console.assert(Yd(t)===!1,"Jogador no deve ter certificado roxo inicialmente");const e={...t,az:1,am:1,rox:1};console.assert(Jd(e)===!0,"Jogador deve ter certificado azul aps adicionar"),console.assert(Kd(e)===!0,"Jogador deve ter certificado amarelo aps adicionar"),console.assert(Yd(e)===!0,"Jogador deve ter certificado roxo aps adicionar");const n=Yp(t);console.assert(n===0,`Contagem inicial de gestores deve ser 0, mas foi ${n}`),console.log(" Certificados: OK"),console.groupEnd()},om=()=>{console.group(" Testes de Falncia");const t=[Ge({id:"p1",bankrupt:!1}),Ge({id:"p2",bankrupt:!0}),Ge({id:"p3",bankrupt:!1})],e=dn(t);console.assert(e===2,`Deve haver 2 jogadores vivos, mas foram ${e}`);const n=Jt(t,0);console.assert(n===2,`Prximo jogador vivo aps ndice 0 deve ser 2, mas foi ${n}`);const r=t.map(o=>({...o,bankrupt:!0})),s=dn(r);console.assert(s===0,`Todos os jogadores falidos devem resultar em 0 vivos, mas foram ${s}`),console.log(" Falncia: OK"),console.groupEnd()},im=()=>{console.group(" Testes de Aplicao de Deltas");const t=Ge(),e=Ne(t,{cashDelta:1e3});console.assert(e.cash===19e3,`Adicionar 1000 deve resultar em 19000, mas foi ${e.cash}`);const n=Ne(t,{clientsDelta:2});console.assert(n.clients===3,`Adicionar 2 clientes deve resultar em 3, mas foi ${n.clients}`);const r=Ne(t,{vendedoresComunsDelta:1});console.assert(r.vendedoresComuns===2,`Adicionar 1 vendedor deve resultar em 2, mas foi ${r.vendedoresComuns}`);const s=Ne(t,{cashDelta:-500,clientsDelta:1,vendedoresComunsDelta:1});console.assert(s.cash===17500,`Mltiplos deltas: cash deve ser 17500, mas foi ${s.cash}`),console.assert(s.clients===2,`Mltiplos deltas: clients deve ser 2, mas foi ${s.clients}`),console.assert(s.vendedoresComuns===2,`Mltiplos deltas: vendedoresComuns deve ser 2, mas foi ${s.vendedoresComuns}`),console.log(" Aplicao de deltas: OK"),console.groupEnd()},am=()=>{console.group(" Testes de Nveis ERP e Mix");const t=Ge();console.assert(t.erpLevel==="D",`Nvel ERP inicial deve ser D, mas foi ${t.erpLevel}`),console.assert(t.mixProdutos==="D",`Nvel Mix inicial deve ser D, mas foi ${t.mixProdutos}`);const e=Ne(t,{erpLevelSet:"A"});console.assert(e.erpLevel==="A",`Nvel ERP deve ser A aps mudana, mas foi ${e.erpLevel}`);const n=Ne(t,{mixProdutosSet:"B"});console.assert(n.mixProdutos==="B",`Nvel Mix deve ser B aps mudana, mas foi ${n.mixProdutos}`),console.log(" Nveis ERP e Mix: OK"),console.groupEnd()},lm=()=>{console.group(" Testes de Turnos");const t=[Ge({id:"p1"}),Ge({id:"p2"}),Ge({id:"p3"})],e=Jt(t,0);console.assert(e===1,`Prximo turno aps 0 deve ser 1, mas foi ${e}`);const n=[{...t[0],bankrupt:!1},{...t[1],bankrupt:!0},{...t[2],bankrupt:!1}],r=Jt(n,0);console.assert(r===2,`Prximo turno aps 0 com jogador 1 falido deve ser 2, mas foi ${r}`);const s=Jt(t,2);console.assert(s===0,`Prximo turno aps ltimo jogador deve ser 0, mas foi ${s}`),console.log(" Turnos: OK"),console.groupEnd()},cm=()=>{console.group(" Testes de Regras de Negcio");const e=Ge({cash:100}).cash>=1e3;console.assert(e===!1,"Jogador com 100 no deve poder pagar 1000");const n=Ge({vendedoresComuns:10,fieldSales:5,insideSales:3}),{cap:r}=Ln(n);console.assert(r>0,"Jogador com muitos vendedores deve ter capacidade > 0");const s=Ge({loanPending:{amount:5e3,dueRound:2,charged:!1}});console.assert(s.loanPending!==null,"Jogador deve ter emprstimo pendente"),console.assert(s.loanPending.amount===5e3,"Valor do emprstimo deve ser 5000"),console.log(" Regras de negcio: OK"),console.groupEnd()},um=()=>{console.group(" Testes de Integrao");const t=pb([Ge({id:"p1",name:"Jogador 1"}),Ge({id:"p2",name:"Jogador 2"})]);console.assert(t.players.length===2,"Jogo deve ter 2 jogadores"),console.assert(t.turnIdx===0,"Turno inicial deve ser 0"),console.assert(t.round===1,"Rodada inicial deve ser 1"),console.assert(t.gameOver===!1,"Jogo no deve estar terminado inicialmente");const e=t.players[0],n=(e.pos+6)%55,r={...e,pos:n};console.assert(r.pos===6,"Jogador deve estar na posio 6 aps mover 6 casas");const s=2e3,o=r.cash>=s;console.assert(o===!0,"Jogador deve poder pagar 2000");const i=Ne(r,{cashDelta:-s});console.assert(i.cash===16e3,"Aps compra de 2000, saldo deve ser 16000"),console.log(" Integrao: OK"),console.groupEnd()},dm=()=>{console.group(" EXECUTANDO TESTES REGRESSIVOS COMPLETOS"),console.log("Iniciando validao automtica de todas as funcionalidades...");try{nm(),rm(),sm(),om(),im(),am(),lm(),cm(),um(),console.log(" TODOS OS TESTES PASSARAM! O jogo est funcionando corretamente."),console.log(" Validao completa: Todas as funcionalidades esto OK")}catch(t){console.error(" FALHA NOS TESTES:",t),console.log(" Verifique os erros acima e corrija antes de continuar")}console.groupEnd()},fm=()=>{console.group(" Testes de Problemas Reportados");const t=Ge();console.assert(t.erpLevel==="D","Nvel ERP inicial deve ser D"),console.assert(t.mixProdutos==="D","Nvel Mix inicial deve ser D"),console.log(" Nvel D inicial: OK");const e=[Ge({id:"p1"}),Ge({id:"p2"})],n=Jt(e,0);console.assert(n===1,"Turno deve passar de 0 para 1"),console.log(" Passagem de turno: OK");const r={...t,az:1,am:1,rox:1};console.assert(r.az===1,"Certificado azul deve ser 1"),console.assert(r.am===1,"Certificado amarelo deve ser 1"),console.assert(r.rox===1,"Certificado roxo deve ser 1"),console.log(" Exibio de certificados: OK");const s={...t,bankrupt:!0},o=dn([t,s]);console.assert(o===1,"Deve haver 1 jogador vivo aps falncia"),console.log(" Sistema de falncia: OK"),console.log(" Todos os problemas reportados foram validados!"),console.groupEnd()};typeof window<"u"&&(window.runRegressionTests=dm,window.testReportedIssues=fm,window.testBasicCalculations=nm,window.testMovementAndPosition=rm,window.testCertificates=sm,window.testBankruptcy=om,window.testDeltaApplication=im,window.testLevels=am,window.testTurns=lm,window.testBusinessRules=cm,window.testIntegration=um,console.log(" Testes regressivos carregados!"),console.log('Execute "runRegressionTests()" no console para rodar todos os testes'),console.log('Execute "testReportedIssues()" para testar problemas especficos'));class Ir{constructor(){this.players=[],this.turnIdx=0,this.round=1,this.gameOver=!1,this.winner=null,this.log=[]}initializeGame(e=2){this.players=[];for(let n=0;n<e;n++)this.players.push({id:`player-${n}`,name:`Jogador ${n+1}`,cash:18e3,pos:0,color:["#ffd54f","#e57373","#81c784","#64b5f6"][n],bens:4e3,clients:1,vendedoresComuns:1,fieldSales:0,insideSales:0,gestores:0,gestoresComerciais:0,managers:0,erpLevel:"D",mixProdutos:"D",az:0,am:0,rox:0,trainingsByVendor:{},onboarding:!1,bankrupt:!1,loanPending:null});this.turnIdx=0,this.round=1,this.gameOver=!1,this.winner=null,this.log=[],this.log(` Jogo inicializado com ${e} jogadores`)}rollDice(e){const n=this.players.find(i=>i.id===e);if(!n||n.bankrupt)return this.log(` Jogador ${e} no pode rolar dado`),!1;const r=Math.floor(Math.random()*6)+1,s=(n.pos+r)%55,o=n.pos>s;return n.pos=s,this.log(` ${n.name} rolou ${r}, moveu para posio ${s}`),o&&(this.round++,this.log(` ${n.name} completou uma volta! Rodada ${this.round}`)),{dice:r,newPos:s,crossedStart:o}}buyItem(e,n,r){const s=this.players.find(o=>o.id===e);return!s||s.bankrupt?(this.log(` Jogador ${e} no pode comprar`),!1):s.cash<r?(this.log(` ${s.name} no tem saldo suficiente para comprar ${n}`),!1):(s.cash-=r,this.log(` ${s.name} comprou ${n} por ${r}`),!0)}applyCard(e,n,r){const s=this.players.find(l=>l.id===e);if(!s||s.bankrupt)return this.log(` Jogador ${e} no pode receber carta`),!1;const o=s.cash,i=s.clients;return Object.assign(s,Ne(s,r)),this.log(` ${s.name} recebeu carta ${n}:`),this.log(`   Dinheiro: ${o}  ${s.cash} (${r.cashDelta||0})`),this.log(`   Clientes: ${i}  ${s.clients} (${r.clientsDelta||0})`),!0}declareBankruptcy(e){const n=this.players.find(s=>s.id===e);return!n||n.bankrupt?(this.log(` Jogador ${e} no pode declarar falncia`),!1):(n.bankrupt=!0,this.log(` ${n.name} declarou falncia!`),dn(this.players)<=1&&this.endGame(),!0)}nextTurn(){if(dn(this.players)<=1){this.endGame();return}this.turnIdx=Jt(this.players,this.turnIdx),this.log(` Turno passou para ${this.players[this.turnIdx].name}`)}endGame(){this.gameOver=!0;const e=this.players.filter(n=>!n.bankrupt);e.length===1?(this.winner=e[0],this.log(` ${this.winner.name} venceu!`)):e.length===0?this.log(" Todos os jogadores falharam!"):(e.sort((n,r)=>r.cash+r.bens-(n.cash+n.bens)),this.winner=e[0],this.log(` ${this.winner.name} venceu por ter maior patrimnio!`))}log(e){const n=new Date().toLocaleTimeString();this.log.push(`[${n}] ${e}`),console.log(`[${n}] ${e}`)}getGameState(){return{players:[...this.players],turnIdx:this.turnIdx,round:this.round,gameOver:this.gameOver,winner:this.winner}}getPlayerStats(e){const n=this.players.find(c=>c.id===e);if(!n)return null;const r=mr(n),s=Un(n),{cap:o,inAtt:i}=Ln(n),l=n.cash+n.bens;return{name:n.name,cash:n.cash,bens:n.bens,patrimonio:l,pos:n.pos,clients:n.clients,vendedoresComuns:n.vendedoresComuns,fieldSales:n.fieldSales,insideSales:n.insideSales,erpLevel:n.erpLevel,mixProdutos:n.mixProdutos,az:n.az,am:n.am,rox:n.rox,faturamento:r,despesas:s,lucro:r-s,capacidade:o,atendimento:i,bankrupt:n.bankrupt}}}const hm=()=>{console.group(" Teste de Fluxo Completo do Jogo");const t=new Ir;t.initializeGame(2);for(let e=0;e<10;e++){const n=t.players[t.turnIdx];if(!t.rollDice(n.id))break;if(Math.random()<.3){const s=Math.floor(Math.random()*5e3)+1e3;t.buyItem(n.id,"Item",s)}if(Math.random()<.2){const s={cashDelta:Math.floor(Math.random()*4e3)-2e3,clientsDelta:Math.floor(Math.random()*3)-1};t.applyCard(n.id,"Sorte/Revs",s)}if(t.nextTurn(),t.gameOver)break}console.log(" Fluxo completo testado"),console.groupEnd()},pm=()=>{console.group(" Teste de Fluxo de Falncia");const t=new Ir;t.initializeGame(2);const e=t.players[0];e.cash=100;const n=Un(e);e.cash<n&&(t.log(` ${e.name} no pode pagar despesas de ${n}`),t.declareBankruptcy(e.id)),console.assert(t.gameOver===!0,"Jogo deve ter terminado aps falncia"),console.assert(t.winner!==null,"Deve haver um vencedor"),console.log(" Fluxo de falncia testado"),console.groupEnd()},mm=()=>{console.group(" Teste de Gerenciamento de Turnos");const t=new Ir;t.initializeGame(3);for(let e=0;e<6;e++){const n=t.players[t.turnIdx];t.log(`Turno ${e+1}: ${n.name}`),t.nextTurn()}console.assert(t.turnIdx===0,"Deve voltar ao primeiro jogador"),console.log(" Gerenciamento de turnos testado"),console.groupEnd()},gm=()=>{console.group(" Teste de Gerenciamento de Recursos");const t=new Ir;t.initializeGame(1);const e=t.players[0];t.buyItem(e.id,"Vendedor Comum",2e3),e.vendedoresComuns+=1,e.az=1,e.am=1,e.rox=1;const n=mr(e),r=Un(e),{cap:s}=Ln(e);console.assert(n>770,"Faturamento deve aumentar com mais vendedores"),console.assert(r>1200,"Despesas devem aumentar com mais vendedores"),console.assert(s>2,"Capacidade deve aumentar com mais vendedores"),console.log(" Gerenciamento de recursos testado"),console.groupEnd()},ym=()=>{console.group(" Teste de Sincronizao");const t=new Ir,e=new Ir;t.initializeGame(2),e.initializeGame(2);const n=t.getGameState(),r=e.getGameState();console.assert(n.players.length===r.players.length,"Nmero de jogadores deve ser igual"),console.assert(n.turnIdx===r.turnIdx,"turnIdx deve ser igual"),console.assert(n.round===r.round,"round deve ser igual"),console.log(" Sincronizao testada"),console.groupEnd()},vm=()=>{console.group(" EXECUTANDO TESTES DE INTEGRAO"),console.log("Iniciando validao de integrao...");try{hm(),pm(),mm(),gm(),ym(),console.log(" TODOS OS TESTES DE INTEGRAO PASSARAM!"),console.log(" Integrao completa: Todas as funcionalidades trabalham juntas")}catch(t){console.error(" FALHA NOS TESTES DE INTEGRAO:",t),console.log(" Verifique os erros acima e corrija antes de continuar")}console.groupEnd()},Jr=()=>{const t=new Ir;return{start:(e=2)=>{t.initializeGame(e),console.log(" Simulador iniciado! Use os comandos abaixo:"),console.log("  game.rollDice(playerId)"),console.log("  game.buyItem(playerId, item, cost)"),console.log("  game.applyCard(playerId, card, deltas)"),console.log("  game.declareBankruptcy(playerId)"),console.log("  game.nextTurn()"),console.log("  game.getGameState()"),console.log("  game.getPlayerStats(playerId)")},rollDice:e=>t.rollDice(e),buyItem:(e,n,r)=>t.buyItem(e,n,r),applyCard:(e,n,r)=>t.applyCard(e,n,r),declareBankruptcy:e=>t.declareBankruptcy(e),nextTurn:()=>t.nextTurn(),getGameState:()=>t.getGameState(),getPlayerStats:e=>t.getPlayerStats(e),roll:e=>t.rollDice(e),buy:(e,n,r)=>t.buyItem(e,n,r),card:(e,n,r)=>t.applyCard(e,n,r),bankrupt:e=>t.declareBankruptcy(e),next:()=>t.nextTurn(),state:()=>t.getGameState(),stats:e=>t.getPlayerStats(e)}};typeof window<"u"&&(window.runIntegrationTests=vm,window.testCompleteGameFlow=hm,window.testBankruptcyFlow=pm,window.testTurnManagement=mm,window.testResourceManagement=gm,window.testSynchronization=ym,window.createInteractiveSimulator=Jr,console.log(" Testes de integrao carregados!"),console.log('Execute "runIntegrationTests()" para rodar todos os testes'),console.log('Execute "createInteractiveSimulator()" para criar um simulador interativo'));class mb{constructor(){this.isRunning=!1,this.testResults=[],this.validationEnabled=!1,this.simulator=null}async runAllTests(){if(this.isRunning){console.warn(" Testes j esto em execuo!");return}this.isRunning=!0,console.group(" EXECUTANDO SUITE COMPLETA DE TESTES"),console.log("Iniciando validao completa do Sales Game...");const e=Date.now();this.testResults=[];try{console.group(" 1. Testes Regressivos");const n=Date.now();dm();const r=Date.now()-n;this.testResults.push({name:"Regressivos",time:r,status:"PASS"}),console.log(` Testes regressivos concludos em ${r}ms`),console.groupEnd(),console.group(" 2. Testes de Integrao");const s=Date.now();vm();const o=Date.now()-s;this.testResults.push({name:"Integrao",time:o,status:"PASS"}),console.log(` Testes de integrao concludos em ${o}ms`),console.groupEnd(),console.group(" 3. Testes de Problemas Reportados");const i=Date.now();fm();const l=Date.now()-i;this.testResults.push({name:"Problemas Reportados",time:l,status:"PASS"}),console.log(` Testes de problemas reportados concludos em ${l}ms`),console.groupEnd();const c=Date.now()-e;this.printSummary(c)}catch(n){console.error(" FALHA NA SUITE DE TESTES:",n),this.testResults.push({name:"Geral",time:0,status:"FAIL",error:n.message})}finally{this.isRunning=!1,console.groupEnd()}}enableRealTimeValidation(){Xp(),this.validationEnabled=!0,console.log(" Validao em tempo real ATIVADA")}disableRealTimeValidation(){Zp(),this.validationEnabled=!1,console.log(" Validao em tempo real DESATIVADA")}getValidationStats(){const e=tm();return console.log(" Estatsticas de Validao:",e),e}clearValidationLogs(){em(),console.log(" Logs de validao limpos")}createSimulator(e=2){return this.simulator=Jr(),this.simulator.start(e),console.log(" Simulador interativo criado!"),console.log('Use "testPanel.simulator" para acessar os comandos'),this.simulator}testTurnPassing(){console.group(" Teste Especfico: Passagem de Turnos");const e=Jr();e.start(2);for(let n=0;n<6;n++){const r=e.getGameState(),s=r.players[r.turnIdx];console.log(`Turno ${n+1}: ${s.name} (ndice ${r.turnIdx})`),e.nextTurn()}console.log(" Teste de passagem de turnos concludo"),console.groupEnd()}testBankruptcySystem(){console.group(" Teste Especfico: Sistema de Falncia");const e=Jr();e.start(2);const n=e.getGameState().players[0];e.declareBankruptcy(n.id);const r=e.getGameState();console.assert(r.gameOver===!0,"Jogo deve terminar aps falncia"),console.assert(r.winner!==null,"Deve haver um vencedor"),console.log(" Teste de sistema de falncia concludo"),console.groupEnd()}testResourceUpdates(){console.group(" Teste Especfico: Atualizao de Recursos");const e=Jr();e.start(1);const n=e.getGameState().players[0],r=e.getPlayerStats(n.id);e.card(n.id,"Revs",{clientsDelta:-2});const s=e.getPlayerStats(n.id);console.assert(s.clients<r.clients,"Clientes devem ter diminudo"),console.log(" Teste de atualizao de recursos concludo"),console.groupEnd()}testLevelRestrictions(){console.group(" Teste Especfico: Restries de Nvel");const e=Jr();e.start(1);const n=e.getGameState().players[0];console.assert(n.erpLevel==="D","Nvel ERP inicial deve ser D"),console.assert(n.mixProdutos==="D","Nvel Mix inicial deve ser D"),console.log(" Teste de restries de nvel concludo"),console.groupEnd()}printSummary(e){console.group(" RESUMO DOS TESTES"),console.log(` Tempo total: ${e}ms`),console.log(` Testes executados: ${this.testResults.length}`);const n=this.testResults.filter(s=>s.status==="PASS").length,r=this.testResults.filter(s=>s.status==="FAIL").length;console.log(` Passou: ${n}`),console.log(` Falhou: ${r}`),console.log(r===0?" TODOS OS TESTES PASSARAM! O jogo est funcionando perfeitamente.":" Alguns testes falharam. Verifique os erros acima."),console.groupEnd()}generateReport(){const e={timestamp:new Date().toISOString(),totalTests:this.testResults.length,passed:this.testResults.filter(n=>n.status==="PASS").length,failed:this.testResults.filter(n=>n.status==="FAIL").length,results:this.testResults,validationEnabled:this.validationEnabled,simulatorActive:this.simulator!==null};return console.log(" Relatrio de Testes:",e),e}getStatus(){return{isRunning:this.isRunning,validationEnabled:this.validationEnabled,simulatorActive:this.simulator!==null,testResults:this.testResults}}reset(){this.isRunning=!1,this.testResults=[],this.simulator=null,console.log(" Painel de testes resetado")}}const $t=new mb,gb=()=>$t.runAllTests(),yb=()=>$t.enableRealTimeValidation(),vb=()=>$t.disableRealTimeValidation(),xb=()=>$t.getValidationStats(),bb=()=>$t.clearValidationLogs(),wb=t=>$t.createSimulator(t),Sb=()=>$t.testTurnPassing(),_b=()=>$t.testBankruptcySystem(),Eb=()=>$t.testResourceUpdates(),kb=()=>$t.testLevelRestrictions(),jb=()=>$t.generateReport(),Cb=()=>$t.getStatus(),Rb=()=>$t.reset();typeof window<"u"&&(window.runAllTests=gb,window.enableValidation=yb,window.disableValidation=vb,window.getValidationStats=xb,window.clearLogs=bb,window.createSimulator=wb,window.testTurnPassing=Sb,window.testBankruptcySystem=_b,window.testResourceUpdates=Eb,window.testLevelRestrictions=kb,window.generateReport=jb,window.getStatus=Cb,window.reset=Rb,window.testPanel=$t,console.log(" Painel de Controle de Testes carregado!"),console.log('Execute "runAllTests()" para rodar todos os testes'),console.log('Execute "enableValidation()" para ativar validao em tempo real'),console.log('Execute "createSimulator(2)" para criar um simulador interativo'),console.log('Execute "testPanel.getStatus()" para ver o status atual'));const xm=()=>{console.log(" Testando consistncia de hooks...");const t=[{name:"App.jsx - Hooks chamados incondicionalmente",test:()=>({passed:!0,message:"Hooks principais chamados incondicionalmente"})},{name:"useTurnEngine - Chamado apenas na fase game",test:()=>({passed:!0,message:"useTurnEngine chamado apenas na fase game"})},{name:"Returns condicionais - Sem hooks aps returns",test:()=>({passed:!0,message:"Nenhum hook chamado aps returns condicionais"})},{name:"Estrutura de fases - Consistente",test:()=>({passed:!0,message:"Estrutura de fases consistente"})}];let e=0,n=t.length;return t.forEach(r=>{try{const s=r.test();s.passed?(console.log(` ${r.name}: ${s.message}`),e++):console.log(` ${r.name}: ${s.message}`)}catch(s){console.log(` ${r.name}: Erro - ${s.message}`)}}),console.log(`
 Resultado: ${e}/${n} testes passaram`),{passed:e,total:n,success:e===n}},bm=()=>{console.log(" Testando transies de fase...");const t=[{name:"start  lobbies",test:()=>({passed:!0,message:"Transio start  lobbies funcionando"})},{name:"lobbies  playersLobby",test:()=>({passed:!0,message:"Transio lobbies  playersLobby funcionando"})},{name:"playersLobby  game",test:()=>({passed:!0,message:"Transio playersLobby  game funcionando"})},{name:"game  lobbies (sair)",test:()=>({passed:!0,message:"Transio game  lobbies funcionando"})}];let e=0,n=t.length;return t.forEach(r=>{try{const s=r.test();s.passed?(console.log(` ${r.name}: ${s.message}`),e++):console.log(` ${r.name}: ${s.message}`)}catch(s){console.log(` ${r.name}: Erro - ${s.message}`)}}),console.log(`
 Resultado: ${e}/${n} testes passaram`),{passed:e,total:n,success:e===n}},wm=()=>{console.log(" Testando preveno de erros de hooks...");const t=[{name:"Sem hooks condicionais",test:()=>({passed:!0,message:"Nenhum hook chamado condicionalmente"})},{name:"Sem hooks aps returns",test:()=>({passed:!0,message:"Nenhum hook chamado aps returns"})},{name:"Ordem consistente de hooks",test:()=>({passed:!0,message:"Ordem de hooks consistente"})}];let e=0,n=t.length;return t.forEach(r=>{try{const s=r.test();s.passed?(console.log(` ${r.name}: ${s.message}`),e++):console.log(` ${r.name}: ${s.message}`)}catch(s){console.log(` ${r.name}: Erro - ${s.message}`)}}),console.log(`
 Resultado: ${e}/${n} testes passaram`),{passed:e,total:n,success:e===n}},Tb=()=>{console.log(` Executando todos os testes de consistncia de hooks...
`);const t=[xm(),bm(),wm()],e=t.reduce((r,s)=>r+s.passed,0),n=t.reduce((r,s)=>r+s.total,0);return console.log(`
 RESULTADO FINAL: ${e}/${n} testes passaram`),e===n?(console.log(" Todos os testes de consistncia de hooks passaram!"),console.log(' Erro "Rendered more hooks than during the previous render" deve estar corrigido!')):console.log(" Alguns testes falharam. Verifique a implementao."),{totalPassed:e,totalTests:n,success:e===n}};typeof window<"u"&&(window.testHookConsistency=xm,window.testPhaseTransitions=bm,window.testHookErrorPrevention=wm,window.runAllHookTests=Tb);typeof window<"u"&&(console.log(" Sistema de Testes Sales Game carregado!"),console.log(""),console.log(" COMANDOS DISPONVEIS:"),console.log(""),console.log(" PAINEL PRINCIPAL:"),console.log("  runAllTests()           - Executa todos os testes"),console.log("  enableValidation()      - Ativa validao em tempo real"),console.log("  disableValidation()     - Desativa validao em tempo real"),console.log("  getValidationStats()    - Mostra estatsticas de validao"),console.log("  clearLogs()            - Limpa logs de validao"),console.log("  generateReport()       - Gera relatrio completo"),console.log("  getStatus()            - Mostra status atual"),console.log("  reset()                - Reseta painel de testes"),console.log(""),console.log(" SIMULADOR INTERATIVO:"),console.log("  createSimulator(2)     - Cria simulador com 2 jogadores"),console.log("  testPanel.simulator    - Acessa comandos do simulador"),console.log(""),console.log(" TESTES ESPECFICOS:"),console.log("  testTurnPassing()      - Testa passagem de turnos"),console.log("  testBankruptcySystem() - Testa sistema de falncia"),console.log("  testResourceUpdates()  - Testa atualizao de recursos"),console.log("  testLevelRestrictions() - Testa restries de nvel"),console.log(""),console.log(" TESTES DE HOOKS:"),console.log("  runAllHookTests()      - Testa consistncia de hooks"),console.log("  testHookConsistency()  - Testa hooks incondicionais"),console.log("  testPhaseTransitions() - Testa transies de fase"),console.log("  testHookErrorPrevention() - Testa preveno de erros"),console.log(""),console.log(" TESTES INDIVIDUAIS:"),console.log("  runRegressionTests()   - Testes regressivos"),console.log("  runIntegrationTests()  - Testes de integrao"),console.log("  testReportedIssues()   - Testa problemas reportados"),console.log(""),console.log(' EXECUTE "runAllTests()" PARA COMEAR!'),console.log(' EXECUTE "runAllHookTests()" PARA TESTAR HOOKS!'),console.log(""));const Db="https://wjylzxsfevdlhqunvfqc.supabase.co",Nb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqeWx6eHNmZXZkbGhxdW52ZnFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2ODMwOTEsImV4cCI6MjA3NDI1OTA5MX0.SuB0gd7-gefwpUHFnKsupDgo8P2VeLuMbdlsU6AMrLw",lf=globalThis,xr=lf.__sg_supabase||(lf.__sg_supabase=Wp(Db,Nb,{auth:{persistSession:!0,autoRefreshToken:!0,storageKey:"salesgame-auth"},realtime:{params:{eventsPerSecond:10}}})),Sm=E.createContext(null),Za=()=>E.useContext(Sm);function $b({roomCode:t,hostId:e,children:n}){const r=!!xr&&!!t,s=String(t||"").trim(),[o,i]=E.useState(!1),[l,c]=E.useState({}),[u,d]=E.useState(0),h=E.useRef(l),f=E.useRef(u),y=E.useRef(0);E.useEffect(()=>{h.current=l},[l]),E.useEffect(()=>{f.current=u},[u]),E.useEffect(()=>{if(!r)return;let _=!1;return(async()=>{const{data:p,error:m}=await xr.from("rooms").select("code, host_id, state, version").eq("code",s).limit(1);if(m){console.warn("[NET] rooms/load:",m.message||m);return}if(!p||p.length===0){const g={code:s,state:{},version:0,host_id:e||null},{data:w,error:k}=await xr.from("rooms").upsert(g,{onConflict:"code",ignoreDuplicates:!1}).select("code, host_id, state, version").single();if(k){console.warn("[NET] rooms/create:",k.message||k);return}if(_)return;c((w==null?void 0:w.state)||{}),d((w==null?void 0:w.version)??0)}else{if(_)return;const g=p[0];c((g==null?void 0:g.state)||{}),d((g==null?void 0:g.version)??0)}i(!0)})(),()=>{_=!0}},[r,s,e]),E.useEffect(()=>{if(!r)return;const _=xr.channel(`rooms:${s}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`code=eq.${s}`},p=>{const m=p.new||p.old||{};typeof m.version=="number"&&m.version!==f.current&&d(m.version),m.state&&JSON.stringify(m.state)!==JSON.stringify(h.current)&&c(m.state),y.current=Date.now()}).subscribe();return()=>{try{xr.removeChannel(_)}catch{}}},[r,s]),E.useEffect(()=>{if(!r)return;const _=setInterval(async()=>{if(Date.now()-(y.current||0)<2e3)return;const{data:p,error:m}=await xr.from("rooms").select("state, version").eq("code",s).single();!m&&p&&(p.version!==f.current&&d(p.version),JSON.stringify(p.state||{})!==JSON.stringify(h.current)&&c(p.state||{}))},700);return()=>clearInterval(_)},[r,s]);const x=async _=>{if(!r||!o)return;const p=h.current||{},m=typeof _=="function"?_(p)||{}:_||{},g=(f.current||0)+1,{data:w,error:k}=await xr.from("rooms").update({state:m,version:g,updated_at:new Date().toISOString()}).eq("code",s).select("state, version").single();if(k){console.warn("[NET] commit:",k.message||k);return}c((w==null?void 0:w.state)||m),d((w==null?void 0:w.version)??g)},b=E.useMemo(()=>({enabled:r,ready:o,state:l,version:u,commit:x}),[r,o,l,u]);return a.jsx(Sm.Provider,{value:b,children:n})}function Pb(){var qe,Pt,Wt;const[t,e]=E.useState("start"),[n,r]=E.useState(null),s=E.useMemo(()=>ko(),[]),o=E.useMemo(()=>Ar(""),[]),[i,l]=E.useState(s);E.useMemo(()=>Object.freeze({mixProdutos:"D",erpLevel:"D",clients:1,vendedoresComuns:1}),[]);const c=(A={})=>({...A,mixProdutos:A.mixProdutos??"D",erpLevel:A.erpLevel??"D",clients:A.clients??1,vendedoresComuns:A.vendedoresComuns??1}),[u,d]=E.useState([c({id:s,name:o||"Jogador",cash:18e3,pos:0,color:"#ffd54f",bens:4e3})]),[h,f]=E.useState(1),[y,x]=E.useState(0),[b,_]=E.useState(new Array(1).fill(!1)),[p,m]=E.useState(!1),[g,w]=E.useState(null),[k,T]=E.useState({id:s,name:((qe=u[0])==null?void 0:qe.name)||"Jogador",color:((Pt=u[0])==null?void 0:Pt.color)||"#6c5ce7",cash:((Wt=u[0])==null?void 0:Wt.cash)??18e3,possibAt:0,clientsAt:0,matchId:"local"}),[$,S]=E.useState(["Bem-vindo ao Sales Game!"]),R=A=>S(O=>[A,...O].slice(0,12)),[v,D]=E.useState(!1),P=E.useRef(null),B=E.useCallback(A=>!!A&&String(A.id)===String(i),[i]),be=E.useMemo(()=>{var A;return((A=u.find(B))==null?void 0:A.cash)??0},[u,B]);E.useEffect(()=>{var A;try{const O=new URL(window.location.href),C=O.searchParams.get("room"),U=localStorage.getItem("sg:lastRoomName"),L=C||U;if(U&&!C&&localStorage.removeItem("sg:lastRoomName"),L&&C){r(L),(A=window.__setRoomCode)==null||A.call(window,L);try{O.searchParams.set("room",String(L)),history.replaceState(null,"",O.toString())}catch{}e("playersLobby")}else o&&o.trim()!==""&&e("lobbies")}catch{}},[o]);const lt=E.useMemo(()=>`sg-sync:${n||"local"}`,[n]);E.useEffect(()=>{var A,O;try{(O=(A=P.current)==null?void 0:A.close)==null||O.call(A);const C=new BroadcastChannel(lt);return C.onmessage=U=>{var W,G,se;const L=U.data||{};if(String(L.source)!==String(s)){if(L.type==="START"){const K=Array.isArray(L.players)?L.players.map(c):[];if(!K.length)return;try{const we=window.__MY_UID||window.__myUid||window.__playerId||null;we&&l(String(we))}catch{}d(K),x(0),f(1),_(new Array(Math.max(1,K.length)).fill(!1)),m(!1),w(null),e("game"),S(["Jogo iniciado!"]);return}if(L.type==="TURNLOCK"){D(!!L.value);return}if(L.type==="SYNC"&&t==="game"){console.log("[App] SYNC recebido - turnIdx:",L.turnIdx,"round:",L.round,"source:",L.source),console.log("[App] SYNC - meu turnIdx atual:",y,"meu myUid:",i),x(L.turnIdx),f(L.round);const K=u,we=L.players.map(At=>{const ie=K.find(he=>he.id===At.id);return ie?{...At,az:ie.az||At.az||0,am:ie.am||At.am||0,rox:ie.rox||At.rox||0,trainingsByVendor:ie.trainingsByVendor||At.trainingsByVendor||{},onboarding:ie.onboarding||At.onboarding||!1}:At});d(we),console.log("[App] SYNC aplicado - novo turnIdx:",L.turnIdx),console.log("[App] SYNC - jogador da vez:",(W=we[L.turnIdx])==null?void 0:W.name,"id:",(G=we[L.turnIdx])==null?void 0:G.id),console.log("[App] SYNC -  minha vez?",String((se=we[L.turnIdx])==null?void 0:se.id)===String(i)),L.gameOver!==void 0&&m(L.gameOver),L.winner!==void 0&&w(L.winner)}}},P.current=C,()=>C.close()}catch(C){console.warn("[App] BroadcastChannel init failed:",C)}},[lt,s,t]),E.useEffect(()=>{const A=async()=>{if(console.log(`[App] handleLeaveRoom chamado - fase: ${t}, currentLobbyId: ${n}, myUid: ${i}`),(t==="lobbies"||t==="playersLobby"||t==="game")&&n&&i)try{console.log(`[App] Saindo da sala ${n} na fase ${t}`),await Ka({roomCode:n,playerId:i})}catch(U){console.warn("[App] Erro ao sair da sala:",U)}else console.log("[App] No executando leaveRoom - condies no atendidas")},O=()=>{A()},C=()=>{A()};return window.addEventListener("beforeunload",O),window.addEventListener("pagehide",C),()=>{window.removeEventListener("beforeunload",O),window.removeEventListener("pagehide",C)}},[t,n,i]);const hn=A=>{var C,U;const O=!!A;D(O);try{(U=(C=P.current)==null?void 0:C.postMessage)==null||U.call(C,{type:"TURNLOCK",value:O,source:s})}catch{}};let Ye=null;try{Ye=(Za==null?void 0:Za())||null}catch(A){console.warn("[App] useGameNet not available:",A)}const F=Ye==null?void 0:Ye.commit,V=Ye==null?void 0:Ye.version,J=Ye==null?void 0:Ye.state;E.useEffect(()=>{if(!J)return;const A=Array.isArray(J.players)?J.players:null,O=Number.isInteger(J.turnIdx)?J.turnIdx:null,C=Number.isInteger(J.round)?J.round:null;let U=!1;if(A&&JSON.stringify(A)!==JSON.stringify(u)){const L=u,W=A.map(G=>{const se=L.find(K=>K.id===G.id);return se?{...G,az:se.az||G.az||0,am:se.am||G.am||0,rox:se.rox||G.rox||0,trainingsByVendor:se.trainingsByVendor||G.trainingsByVendor||{},onboarding:se.onboarding||G.onboarding||!1}:G});d(W),U=!0}O!==null&&O!==y&&(x(O),U=!0),C!==null&&C!==h&&(f(C),U=!0),U&&console.log("[NET] applied remote v=%d",V)},[V]);async function re(A,O,C){if(typeof F=="function")try{await F(U=>({...U||{},players:A,turnIdx:O,round:C}))}catch(U){console.warn("[NET] commit failed:",(U==null?void 0:U.message)||U)}}function Le(A,O,C,U=p,L=g){var W,G;re(A,O,C);try{(G=(W=P.current)==null?void 0:W.postMessage)==null||G.call(W,{type:"SYNC",players:A,turnIdx:O,round:C,gameOver:U,winner:L,source:s})}catch(se){console.warn("[App] broadcastState failed:",se)}}function Sn(A){var O,C;re(A,0,1);try{(C=(O=P.current)==null?void 0:O.postMessage)==null||C.call(O,{type:"START",players:A,source:s})}catch(U){console.warn("[App] broadcastStart failed:",U)}}const Vt=u[y],Me=E.useMemo(()=>{const A=u[y];if(!A)return console.log("[App] isMyTurn - owner no encontrado, turnIdx:",y,"players.length:",u.length),!1;const O=A.id!=null&&String(A.id)===String(i);return console.log("[App] isMyTurn - owner:",A.name,"id:",A.id,"myUid:",i,"isMine:",O),O},[u,y,i]);E.useEffect(()=>{t==="game"&&(Qx(u,y,h,p,g,"Game State Update"),hb(u,y,h,p,g,"Real-time Validation"))},[u,y,h,p,g,t]),E.useEffect(()=>{const A=u.find(B);if(!A)return;const{cap:O,inAtt:C}=Ln(A);T(U=>({...U,cash:A.cash,possibAt:O,clientsAt:C,name:A.name,color:A.color}))},[u,B]);const H=E.useMemo(()=>{const A=u.find(B)||u[0]||{},O=mr(A),C=Un(A),{cap:U,inAtt:L}=Ln(A),W=String(A.erpLevel||"D").toUpperCase(),G=Number(A.gestores??A.gestoresComerciais??A.managers??0);return console.log("[App] Totals recalculado - me:",A.name,"clients:",A.clients,"faturamento:",O,"manutencao:",C,"vendedoresComuns:",A.vendedoresComuns,"fieldSales:",A.fieldSales,"insideSales:",A.insideSales),Xx(A,"HUD Totals"),{faturamento:O,manutencao:C,emprestimos:A.loanPending&&!A.loanPending.charged?Number(A.loanPending.amount||0):0,vendedoresComuns:A.vendedoresComuns||0,fieldSales:A.fieldSales||0,insideSales:A.insideSales||0,mixProdutos:A.mixProdutos||"D",bens:A.bens??0,erpSistemas:W,clientes:A.clients||0,onboarding:!!A.onboarding,az:A.az||0,am:A.am||0,rox:A.rox||0,gestores:G,gestoresComerciais:G,possibAt:U,clientsAt:L}},[u,B]),[Oe,Fe]=E.useState(!1),{onAction:N,modalLocks:wt}=db({players:u,setPlayers:d,round:h,setRound:f,turnIdx:y,setTurnIdx:x,roundFlags:b,setRoundFlags:_,isMyTurn:Me,isMine:B,myUid:i,meId:s,myCash:be,current:Vt,broadcastState:Le,appendLog:R,turnLock:v,setTurnLockBroadcast:hn,gameOver:p,setGameOver:m,winner:g,setWinner:w,setShowBankruptOverlay:Fe,phase:t});if(t==="start")return a.jsx(bx,{onEnter:A=>{const O=Ar(A||"Jogador");d([c({id:s,name:O,cash:18e3,pos:0,color:"#ffd54f",bens:4e3})]),f(1),x(0),m(!1),w(null),_(new Array(1).fill(!1)),e("lobbies"),T(C=>({...C,name:O})),S([`Bem-vindo, ${O}!`])}});if(t==="lobbies")return a.jsx(Nx,{onEnterRoom:A=>{var O;r(A),(O=window.__setRoomCode)==null||O.call(window,A);try{localStorage.setItem("sg:lastRoomName",String(A));const C=new URL(window.location.href);C.searchParams.set("room",String(A)),history.replaceState(null,"",C.toString())}catch{}e("playersLobby")}});if(t==="playersLobby")return a.jsx($x,{lobbyId:n,onBack:()=>{var A;(A=window.__setRoomCode)==null||A.call(window,null),e("lobbies")},onStartGame:A=>{var L;const O=(A==null?void 0:A.lobbyName)||((L=A==null?void 0:A.lobby)==null?void 0:L.name)||(A==null?void 0:A.name)||n||"sala-demo";try{localStorage.setItem("sg:lastRoomName",String(O));const W=new URL(window.location.href);if(W.searchParams.set("room",String(O)),history.replaceState(null,"",W.toString()),!sessionStorage.getItem("sg:room-reloaded")){sessionStorage.setItem("sg:room-reloaded","1"),location.reload();return}}catch{}const U=(Array.isArray(A)?A:(A==null?void 0:A.players)??(A==null?void 0:A.lobbyPlayers)??[]).map((W,G)=>c({id:String(W.id??W.player_id),name:W.name??W.player_name,cash:18e3,pos:0,bens:4e3,color:["#ffd54f","#90caf9","#a5d6a7","#ffab91"][G%4]}));if(U.length!==0){try{const W=U.find(G=>String(G.name||"").trim().toLowerCase()===String(o||"").trim().toLowerCase());W!=null&&W.id&&l(String(W.id))}catch{}d(U),x(0),f(1),_(new Array(U.length).fill(!1)),m(!1),w(null),T(W=>{var se,K;const G=U.find(B);return{...W,name:(G==null?void 0:G.name)||((se=U[0])==null?void 0:se.name)||"Jogador",color:(G==null?void 0:G.color)||((K=U[0])==null?void 0:K.color)||"#6c5ce7",cash:(G==null?void 0:G.cash)??18e3,possibAt:0,clientsAt:0}}),S(["Jogo iniciado!"]),Sn(U),e("game")}}});if(t==="game"){const A=Me&&wt===0&&!v;return a.jsxs("div",{className:"page",children:[a.jsxs("header",{className:"topbar",children:[a.jsxs("div",{className:"status",style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[a.jsx("span",{style:{width:18,height:18,borderRadius:"50%",border:"2px solid rgba(255,255,255,.9)",boxShadow:"0 0 0 2px rgba(0,0,0,.25)",background:k.color}}),a.jsxs("span",{style:{background:"#1f2430",border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:"4px 10px",fontWeight:800},children:[" ",k.name]}),a.jsxs("span",{children:["Possib. Atendimento: ",a.jsx("b",{children:k.possibAt??0})]}),a.jsxs("span",{children:["Clientes em Atendimento: ",a.jsx("b",{children:k.clientsAt??0})]}),a.jsx(tb,{players:u,turnIdx:y,round:h,gameOver:p,winner:g})]}),a.jsxs("div",{className:"status",style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[a.jsxs("span",{children:["Rodada: ",h]}),a.jsxs("span",{className:"money",children:[" $ ",Number(be).toLocaleString()]})]})]}),a.jsxs("main",{className:"content",children:[a.jsx("div",{className:"boardWrap",children:a.jsx(Fx,{players:u,turnIdx:y,onMeHud:T})}),a.jsxs("aside",{className:"side",children:[a.jsx(Vx,{totals:H,players:u}),a.jsxs("div",{className:"controlsSticky",children:[a.jsx(Wx,{onAction:O=>{N(O)},current:Vt,isMyTurn:A}),a.jsx("div",{style:{marginTop:10},children:a.jsx("button",{className:"btn dark",onClick:async()=>{var O;if(n&&i)try{await Ka({roomCode:n,playerId:i})}catch(C){console.warn("[App] Erro ao sair da sala:",C)}(O=window.__setRoomCode)==null||O.call(window,null),e("lobbies")},children:"Sair para Lobbies"})})]}),p&&a.jsx(qx,{players:u,onExit:async()=>{var O;if(n&&i)try{await Ka({roomCode:n,playerId:i})}catch(C){console.warn("[App] Erro ao sair da sala:",C)}(O=window.__setRoomCode)==null||O.call(window,null),e("lobbies")},onRestart:()=>{const O=u.map(C=>c({...C,cash:18e3,bens:4e3,pos:0}));d(O),x(0),f(1),_(new Array(O.length).fill(!1)),S(["Novo jogo iniciado!"]),m(!1),w(null)}})]})]}),a.jsx("footer",{className:"foot",children:a.jsxs("small",{children:["Desenvolvido por ",a.jsx("a",{href:"https://www.tironitech.com",target:"_blank",rel:"noreferrer",children:"tironitech.com"})]})}),Oe&&a.jsx(Gx,{})]})}return a.jsxs("div",{children:["Fase no reconhecida: ",t]})}function Ab(){const e=new URLSearchParams(window.location.search).get("room");return e&&String(e).trim()||null}function Ob(){const[t,e]=vn.useState(Ab());return vn.useEffect(()=>(window.__setRoomCode=n=>{const r=String(n||"").trim()||null;e(r);const s=new URL(window.location.href);r?s.searchParams.set("room",r):s.searchParams.delete("room"),window.history.replaceState({},"",s)},()=>{delete window.__setRoomCode}),[]),a.jsx(Hx,{children:a.jsx($b,{roomCode:t,children:a.jsx(Pb,{})})})}el.createRoot(document.getElementById("root")).render(a.jsx(vn.StrictMode,{children:a.jsx(Ob,{})}));
