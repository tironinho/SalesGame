(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var kn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Gm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var Of={exports:{}},Ea={},$f={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ni=Symbol.for("react.element"),qm=Symbol.for("react.portal"),Hm=Symbol.for("react.fragment"),Jm=Symbol.for("react.strict_mode"),Km=Symbol.for("react.profiler"),Ym=Symbol.for("react.provider"),Qm=Symbol.for("react.context"),Xm=Symbol.for("react.forward_ref"),Zm=Symbol.for("react.suspense"),eg=Symbol.for("react.memo"),tg=Symbol.for("react.lazy"),zu=Symbol.iterator;function ng(t){return t===null||typeof t!="object"?null:(t=zu&&t[zu]||t["@@iterator"],typeof t=="function"?t:null)}var Pf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lf=Object.assign,If={};function ns(t,e,n){this.props=t,this.context=e,this.refs=If,this.updater=n||Pf}ns.prototype.isReactComponent={};ns.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ns.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Mf(){}Mf.prototype=ns.prototype;function zc(t,e,n){this.props=t,this.context=e,this.refs=If,this.updater=n||Pf}var Fc=zc.prototype=new Mf;Fc.constructor=zc;Lf(Fc,ns.prototype);Fc.isPureReactComponent=!0;var Fu=Array.isArray,Bf=Object.prototype.hasOwnProperty,Vc={current:null},Uf={key:!0,ref:!0,__self:!0,__source:!0};function zf(t,e,n){var r,o={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)Bf.call(e,r)&&!Uf.hasOwnProperty(r)&&(o[r]=e[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:ni,type:t,key:s,ref:i,props:o,_owner:Vc.current}}function rg(t,e){return{$$typeof:ni,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wc(t){return typeof t=="object"&&t!==null&&t.$$typeof===ni}function og(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Vu=/\/+/g;function Ha(t,e){return typeof t=="object"&&t!==null&&t.key!=null?og(""+t.key):e.toString(36)}function Bi(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case ni:case qm:i=!0}}if(i)return i=t,o=o(i),t=r===""?"."+Ha(i,0):r,Fu(o)?(n="",t!=null&&(n=t.replace(Vu,"$&/")+"/"),Bi(o,e,n,"",function(u){return u})):o!=null&&(Wc(o)&&(o=rg(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(Vu,"$&/")+"/")+t)),e.push(o)),1;if(i=0,r=r===""?".":r+":",Fu(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+Ha(s,l);i+=Bi(s,e,n,c,o)}else if(c=ng(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+Ha(s,l++),i+=Bi(s,e,n,c,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function hi(t,e,n){if(t==null)return t;var r=[],o=0;return Bi(t,r,"","",function(s){return e.call(n,s,o++)}),r}function sg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},Ui={transition:null},ig={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:Ui,ReactCurrentOwner:Vc};function Ff(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:hi,forEach:function(t,e,n){hi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hi(t,function(){e++}),e},toArray:function(t){return hi(t,function(e){return e})||[]},only:function(t){if(!Wc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};je.Component=ns;je.Fragment=Hm;je.Profiler=Km;je.PureComponent=zc;je.StrictMode=Jm;je.Suspense=Zm;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ig;je.act=Ff;je.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Lf({},t.props),o=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=Vc.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Bf.call(e,c)&&!Uf.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ni,type:t.type,key:o,ref:s,props:r,_owner:i}};je.createContext=function(t){return t={$$typeof:Qm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ym,_context:t},t.Consumer=t};je.createElement=zf;je.createFactory=function(t){var e=zf.bind(null,t);return e.type=t,e};je.createRef=function(){return{current:null}};je.forwardRef=function(t){return{$$typeof:Xm,render:t}};je.isValidElement=Wc;je.lazy=function(t){return{$$typeof:tg,_payload:{_status:-1,_result:t},_init:sg}};je.memo=function(t,e){return{$$typeof:eg,type:t,compare:e===void 0?null:e}};je.startTransition=function(t){var e=Ui.transition;Ui.transition={};try{t()}finally{Ui.transition=e}};je.unstable_act=Ff;je.useCallback=function(t,e){return Jt.current.useCallback(t,e)};je.useContext=function(t){return Jt.current.useContext(t)};je.useDebugValue=function(){};je.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};je.useEffect=function(t,e){return Jt.current.useEffect(t,e)};je.useId=function(){return Jt.current.useId()};je.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};je.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};je.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};je.useMemo=function(t,e){return Jt.current.useMemo(t,e)};je.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};je.useRef=function(t){return Jt.current.useRef(t)};je.useState=function(t){return Jt.current.useState(t)};je.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};je.useTransition=function(){return Jt.current.useTransition()};je.version="18.3.1";$f.exports=je;var E=$f.exports;const pe=Wm(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag=E,lg=Symbol.for("react.element"),cg=Symbol.for("react.fragment"),ug=Object.prototype.hasOwnProperty,dg=ag.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fg={key:!0,ref:!0,__self:!0,__source:!0};function Vf(t,e,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)ug.call(e,r)&&!fg.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:lg,type:t,key:s,ref:i,props:o,_owner:dg.current}}Ea.Fragment=cg;Ea.jsx=Vf;Ea.jsxs=Vf;Of.exports=Ea;var a=Of.exports,Al={},Wf={exports:{}},hn={},Gf={exports:{}},qf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,te){var re=G.length;G.push(te);e:for(;0<re;){var P=re-1>>>1,Oe=G[P];if(0<o(Oe,te))G[P]=te,G[re]=Oe,re=P;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var te=G[0],re=G.pop();if(re!==te){G[0]=re;e:for(var P=0,Oe=G.length,ln=Oe>>>1;P<ln;){var ce=2*(P+1)-1,ht=G[ce],Ot=ce+1,De=G[Ot];if(0>o(ht,re))Ot<Oe&&0>o(De,ht)?(G[P]=De,G[Ot]=re,P=Ot):(G[P]=ht,G[ce]=re,P=ce);else if(Ot<Oe&&0>o(De,re))G[P]=De,G[Ot]=re,P=Ot;else break e}}return te}function o(G,te){var re=G.sortIndex-te.sortIndex;return re!==0?re:G.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,h=null,f=3,g=!1,x=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(G){for(var te=n(u);te!==null;){if(te.callback===null)r(u);else if(te.startTime<=G)r(u),te.sortIndex=te.expirationTime,e(c,te);else break;te=n(u)}}function w(G){if(b=!1,v(G),!x)if(n(c)!==null)x=!0,We(k);else{var te=n(u);te!==null&&Ze(w,te.startTime-G)}}function k(G,te){x=!1,b&&(b=!1,p(S),S=-1),g=!0;var re=f;try{for(v(te),h=n(c);h!==null&&(!(h.expirationTime>te)||G&&!N());){var P=h.callback;if(typeof P=="function"){h.callback=null,f=h.priorityLevel;var Oe=P(h.expirationTime<=te);te=t.unstable_now(),typeof Oe=="function"?h.callback=Oe:h===n(c)&&r(c),v(te)}else r(c);h=n(c)}if(h!==null)var ln=!0;else{var ce=n(u);ce!==null&&Ze(w,ce.startTime-te),ln=!1}return ln}finally{h=null,f=re,g=!1}}var T=!1,D=null,S=-1,A=5,y=-1;function N(){return!(t.unstable_now()-y<A)}function O(){if(D!==null){var G=t.unstable_now();y=G;var te=!0;try{te=D(!0,G)}finally{te?L():(T=!1,D=null)}}else T=!1}var L;if(typeof m=="function")L=function(){m(O)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Se=U.port2;U.port1.onmessage=O,L=function(){Se.postMessage(null)}}else L=function(){_(O,0)};function We(G){D=G,T||(T=!0,L())}function Ze(G,te){S=_(function(){G(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,We(k))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(G){switch(f){case 1:case 2:case 3:var te=3;break;default:te=f}var re=f;f=te;try{return G()}finally{f=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,te){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var re=f;f=G;try{return te()}finally{f=re}},t.unstable_scheduleCallback=function(G,te,re){var P=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?P+re:P):re=P,G){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=re+Oe,G={id:d++,callback:te,priorityLevel:G,startTime:re,expirationTime:Oe,sortIndex:-1},re>P?(G.sortIndex=re,e(u,G),n(c)===null&&G===n(u)&&(b?(p(S),S=-1):b=!0,Ze(w,re-P))):(G.sortIndex=Oe,e(c,G),x||g||(x=!0,We(k))),G},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(G){var te=f;return function(){var re=f;f=te;try{return G.apply(this,arguments)}finally{f=re}}}})(qf);Gf.exports=qf;var hg=Gf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg=E,fn=hg;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hf=new Set,Is={};function yo(t,e){Jo(t,e),Jo(t+"Capture",e)}function Jo(t,e){for(Is[t]=e,t=0;t<e.length;t++)Hf.add(e[t])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ol=Object.prototype.hasOwnProperty,mg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wu={},Gu={};function gg(t){return Ol.call(Gu,t)?!0:Ol.call(Wu,t)?!1:mg.test(t)?Gu[t]=!0:(Wu[t]=!0,!1)}function vg(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yg(t,e,n,r){if(e===null||typeof e>"u"||vg(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kt(t,e,n,r,o,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new Kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new Kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new Kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new Kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new Kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new Kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new Kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new Kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new Kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gc=/[\-:]([a-z])/g;function qc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gc,qc);At[e]=new Kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gc,qc);At[e]=new Kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gc,qc);At[e]=new Kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new Kt(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new Kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hc(t,e,n,r){var o=At.hasOwnProperty(e)?At[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yg(e,n,o,r)&&(n=null),r||o===null?gg(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var yr=pg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pi=Symbol.for("react.element"),Do=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),Jc=Symbol.for("react.strict_mode"),$l=Symbol.for("react.profiler"),Jf=Symbol.for("react.provider"),Kf=Symbol.for("react.context"),Kc=Symbol.for("react.forward_ref"),Pl=Symbol.for("react.suspense"),Ll=Symbol.for("react.suspense_list"),Yc=Symbol.for("react.memo"),Cr=Symbol.for("react.lazy"),Yf=Symbol.for("react.offscreen"),qu=Symbol.iterator;function us(t){return t===null||typeof t!="object"?null:(t=qu&&t[qu]||t["@@iterator"],typeof t=="function"?t:null)}var ct=Object.assign,Ja;function xs(t){if(Ja===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ja=e&&e[1]||""}return`
`+Ja+t}var Ka=!1;function Ya(t,e){if(!t||Ka)return"";Ka=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,l=s.length-1;1<=i&&0<=l&&o[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==s[l]){var c=`
`+o[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{Ka=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xs(t):""}function xg(t){switch(t.tag){case 5:return xs(t.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 2:case 15:return t=Ya(t.type,!1),t;case 11:return t=Ya(t.type.render,!1),t;case 1:return t=Ya(t.type,!0),t;default:return""}}function Il(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case No:return"Fragment";case Do:return"Portal";case $l:return"Profiler";case Jc:return"StrictMode";case Pl:return"Suspense";case Ll:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Kf:return(t.displayName||"Context")+".Consumer";case Jf:return(t._context.displayName||"Context")+".Provider";case Kc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Yc:return e=t.displayName||null,e!==null?e:Il(t.type)||"Memo";case Cr:e=t._payload,t=t._init;try{return Il(t(e))}catch{}}return null}function bg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Il(e);case 8:return e===Jc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wg(t){var e=Qf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function mi(t){t._valueTracker||(t._valueTracker=wg(t))}function Xf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Qf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ml(t,e){var n=e.checked;return ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hu(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=zr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Zf(t,e){e=e.checked,e!=null&&Hc(t,"checked",e,!1)}function Bl(t,e){Zf(t,e);var n=zr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ul(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ul(t,e.type,zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ju(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ul(t,e,n){(e!=="number"||Qi(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bs=Array.isArray;function Fo(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+zr(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function zl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ku(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(bs(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zr(n)}}function eh(t,e){var n=zr(e.value),r=zr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Yu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function th(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?th(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gi,nh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gi=gi||document.createElement("div"),gi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ms(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Es={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sg=["Webkit","ms","Moz","O"];Object.keys(Es).forEach(function(t){Sg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Es[e]=Es[t]})});function rh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Es.hasOwnProperty(t)&&Es[t]?(""+e).trim():e+"px"}function oh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=rh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var _g=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vl(t,e){if(e){if(_g[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Wl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gl=null;function Qc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ql=null,Vo=null,Wo=null;function Qu(t){if(t=si(t)){if(typeof ql!="function")throw Error(M(280));var e=t.stateNode;e&&(e=Ta(e),ql(t.stateNode,t.type,e))}}function sh(t){Vo?Wo?Wo.push(t):Wo=[t]:Vo=t}function ih(){if(Vo){var t=Vo,e=Wo;if(Wo=Vo=null,Qu(t),e)for(t=0;t<e.length;t++)Qu(e[t])}}function ah(t,e){return t(e)}function lh(){}var Qa=!1;function ch(t,e,n){if(Qa)return t(e,n);Qa=!0;try{return ah(t,e,n)}finally{Qa=!1,(Vo!==null||Wo!==null)&&(lh(),ih())}}function Bs(t,e){var n=t.stateNode;if(n===null)return null;var r=Ta(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var Hl=!1;if(fr)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){Hl=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{Hl=!1}function Eg(t,e,n,r,o,s,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var ks=!1,Xi=null,Zi=!1,Jl=null,kg={onError:function(t){ks=!0,Xi=t}};function Cg(t,e,n,r,o,s,i,l,c){ks=!1,Xi=null,Eg.apply(kg,arguments)}function jg(t,e,n,r,o,s,i,l,c){if(Cg.apply(this,arguments),ks){if(ks){var u=Xi;ks=!1,Xi=null}else throw Error(M(198));Zi||(Zi=!0,Jl=u)}}function xo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function uh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xu(t){if(xo(t)!==t)throw Error(M(188))}function Rg(t){var e=t.alternate;if(!e){if(e=xo(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return Xu(o),t;if(s===r)return Xu(o),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function dh(t){return t=Rg(t),t!==null?fh(t):null}function fh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fh(t);if(e!==null)return e;t=t.sibling}return null}var hh=fn.unstable_scheduleCallback,Zu=fn.unstable_cancelCallback,Tg=fn.unstable_shouldYield,Dg=fn.unstable_requestPaint,vt=fn.unstable_now,Ng=fn.unstable_getCurrentPriorityLevel,Xc=fn.unstable_ImmediatePriority,ph=fn.unstable_UserBlockingPriority,ea=fn.unstable_NormalPriority,Ag=fn.unstable_LowPriority,mh=fn.unstable_IdlePriority,ka=null,Zn=null;function Og(t){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(ka,t,void 0,(t.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:Lg,$g=Math.log,Pg=Math.LN2;function Lg(t){return t>>>=0,t===0?32:31-($g(t)/Pg|0)|0}var vi=64,yi=4194304;function ws(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ta(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var l=i&~o;l!==0?r=ws(l):(s&=i,s!==0&&(r=ws(s)))}else i=n&~o,i!==0?r=ws(i):s!==0&&(r=ws(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Un(e),o=1<<n,r|=t[n],e&=~o;return r}function Ig(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mg(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Un(s),l=1<<i,c=o[i];c===-1?(!(l&n)||l&r)&&(o[i]=Ig(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function Kl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function gh(){var t=vi;return vi<<=1,!(vi&4194240)&&(vi=64),t}function Xa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ri(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Un(e),t[e]=n}function Bg(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Un(n),s=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~s}}function Zc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Un(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var Fe=0;function vh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yh,eu,xh,bh,wh,Yl=!1,xi=[],Or=null,$r=null,Pr=null,Us=new Map,zs=new Map,Rr=[],Ug="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ed(t,e){switch(t){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":Us.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zs.delete(e.pointerId)}}function fs(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},e!==null&&(e=si(e),e!==null&&eu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function zg(t,e,n,r,o){switch(e){case"focusin":return Or=fs(Or,t,e,n,r,o),!0;case"dragenter":return $r=fs($r,t,e,n,r,o),!0;case"mouseover":return Pr=fs(Pr,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return Us.set(s,fs(Us.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,zs.set(s,fs(zs.get(s)||null,t,e,n,r,o)),!0}return!1}function Sh(t){var e=no(t.target);if(e!==null){var n=xo(e);if(n!==null){if(e=n.tag,e===13){if(e=uh(n),e!==null){t.blockedOn=e,wh(t.priority,function(){xh(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ql(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gl=r,n.target.dispatchEvent(r),Gl=null}else return e=si(n),e!==null&&eu(e),t.blockedOn=n,!1;e.shift()}return!0}function td(t,e,n){zi(t)&&n.delete(e)}function Fg(){Yl=!1,Or!==null&&zi(Or)&&(Or=null),$r!==null&&zi($r)&&($r=null),Pr!==null&&zi(Pr)&&(Pr=null),Us.forEach(td),zs.forEach(td)}function hs(t,e){t.blockedOn===e&&(t.blockedOn=null,Yl||(Yl=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,Fg)))}function Fs(t){function e(o){return hs(o,t)}if(0<xi.length){hs(xi[0],t);for(var n=1;n<xi.length;n++){var r=xi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Or!==null&&hs(Or,t),$r!==null&&hs($r,t),Pr!==null&&hs(Pr,t),Us.forEach(e),zs.forEach(e),n=0;n<Rr.length;n++)r=Rr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rr.length&&(n=Rr[0],n.blockedOn===null);)Sh(n),n.blockedOn===null&&Rr.shift()}var Go=yr.ReactCurrentBatchConfig,na=!0;function Vg(t,e,n,r){var o=Fe,s=Go.transition;Go.transition=null;try{Fe=1,tu(t,e,n,r)}finally{Fe=o,Go.transition=s}}function Wg(t,e,n,r){var o=Fe,s=Go.transition;Go.transition=null;try{Fe=4,tu(t,e,n,r)}finally{Fe=o,Go.transition=s}}function tu(t,e,n,r){if(na){var o=Ql(t,e,n,r);if(o===null)ll(t,e,r,ra,n),ed(t,r);else if(zg(o,t,e,n,r))r.stopPropagation();else if(ed(t,r),e&4&&-1<Ug.indexOf(t)){for(;o!==null;){var s=si(o);if(s!==null&&yh(s),s=Ql(t,e,n,r),s===null&&ll(t,e,r,ra,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else ll(t,e,r,null,n)}}var ra=null;function Ql(t,e,n,r){if(ra=null,t=Qc(r),t=no(t),t!==null)if(e=xo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=uh(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ra=t,null}function _h(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ng()){case Xc:return 1;case ph:return 4;case ea:case Ag:return 16;case mh:return 536870912;default:return 16}default:return 16}}var Nr=null,nu=null,Fi=null;function Eh(){if(Fi)return Fi;var t,e=nu,n=e.length,r,o="value"in Nr?Nr.value:Nr.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return Fi=o.slice(t,1<r?1-r:void 0)}function Vi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bi(){return!0}function nd(){return!1}function pn(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?bi:nd,this.isPropagationStopped=nd,this}return ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),e}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ru=pn(rs),oi=ct({},rs,{view:0,detail:0}),Gg=pn(oi),Za,el,ps,Ca=ct({},oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ou,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ps&&(ps&&t.type==="mousemove"?(Za=t.screenX-ps.screenX,el=t.screenY-ps.screenY):el=Za=0,ps=t),Za)},movementY:function(t){return"movementY"in t?t.movementY:el}}),rd=pn(Ca),qg=ct({},Ca,{dataTransfer:0}),Hg=pn(qg),Jg=ct({},oi,{relatedTarget:0}),tl=pn(Jg),Kg=ct({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),Yg=pn(Kg),Qg=ct({},rs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xg=pn(Qg),Zg=ct({},rs,{data:0}),od=pn(Zg),e0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=n0[t])?!!e[t]:!1}function ou(){return r0}var o0=ct({},oi,{key:function(t){if(t.key){var e=e0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?t0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ou,charCode:function(t){return t.type==="keypress"?Vi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),s0=pn(o0),i0=ct({},Ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sd=pn(i0),a0=ct({},oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ou}),l0=pn(a0),c0=ct({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),u0=pn(c0),d0=ct({},Ca,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),f0=pn(d0),h0=[9,13,27,32],su=fr&&"CompositionEvent"in window,Cs=null;fr&&"documentMode"in document&&(Cs=document.documentMode);var p0=fr&&"TextEvent"in window&&!Cs,kh=fr&&(!su||Cs&&8<Cs&&11>=Cs),id=" ",ad=!1;function Ch(t,e){switch(t){case"keyup":return h0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ao=!1;function m0(t,e){switch(t){case"compositionend":return jh(e);case"keypress":return e.which!==32?null:(ad=!0,id);case"textInput":return t=e.data,t===id&&ad?null:t;default:return null}}function g0(t,e){if(Ao)return t==="compositionend"||!su&&Ch(t,e)?(t=Eh(),Fi=nu=Nr=null,Ao=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kh&&e.locale!=="ko"?null:e.data;default:return null}}var v0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ld(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!v0[t.type]:e==="textarea"}function Rh(t,e,n,r){sh(r),e=oa(e,"onChange"),0<e.length&&(n=new ru("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var js=null,Vs=null;function y0(t){Bh(t,0)}function ja(t){var e=Po(t);if(Xf(e))return t}function x0(t,e){if(t==="change")return e}var Th=!1;if(fr){var nl;if(fr){var rl="oninput"in document;if(!rl){var cd=document.createElement("div");cd.setAttribute("oninput","return;"),rl=typeof cd.oninput=="function"}nl=rl}else nl=!1;Th=nl&&(!document.documentMode||9<document.documentMode)}function ud(){js&&(js.detachEvent("onpropertychange",Dh),Vs=js=null)}function Dh(t){if(t.propertyName==="value"&&ja(Vs)){var e=[];Rh(e,Vs,t,Qc(t)),ch(y0,e)}}function b0(t,e,n){t==="focusin"?(ud(),js=e,Vs=n,js.attachEvent("onpropertychange",Dh)):t==="focusout"&&ud()}function w0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ja(Vs)}function S0(t,e){if(t==="click")return ja(e)}function _0(t,e){if(t==="input"||t==="change")return ja(e)}function E0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vn=typeof Object.is=="function"?Object.is:E0;function Ws(t,e){if(Vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Ol.call(e,o)||!Vn(t[o],e[o]))return!1}return!0}function dd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fd(t,e){var n=dd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dd(n)}}function Nh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Nh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ah(){for(var t=window,e=Qi();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qi(t.document)}return e}function iu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function k0(t){var e=Ah(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Nh(n.ownerDocument.documentElement,n)){if(r!==null&&iu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!t.extend&&s>r&&(o=r,r=s,s=o),o=fd(n,s);var i=fd(n,r);o&&i&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var C0=fr&&"documentMode"in document&&11>=document.documentMode,Oo=null,Xl=null,Rs=null,Zl=!1;function hd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zl||Oo==null||Oo!==Qi(r)||(r=Oo,"selectionStart"in r&&iu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rs&&Ws(Rs,r)||(Rs=r,r=oa(Xl,"onSelect"),0<r.length&&(e=new ru("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Oo)))}function wi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $o={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},ol={},Oh={};fr&&(Oh=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function Ra(t){if(ol[t])return ol[t];if(!$o[t])return t;var e=$o[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Oh)return ol[t]=e[n];return t}var $h=Ra("animationend"),Ph=Ra("animationiteration"),Lh=Ra("animationstart"),Ih=Ra("transitionend"),Mh=new Map,pd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(t,e){Mh.set(t,e),yo(e,[t])}for(var sl=0;sl<pd.length;sl++){var il=pd[sl],j0=il.toLowerCase(),R0=il[0].toUpperCase()+il.slice(1);Vr(j0,"on"+R0)}Vr($h,"onAnimationEnd");Vr(Ph,"onAnimationIteration");Vr(Lh,"onAnimationStart");Vr("dblclick","onDoubleClick");Vr("focusin","onFocus");Vr("focusout","onBlur");Vr(Ih,"onTransitionEnd");Jo("onMouseEnter",["mouseout","mouseover"]);Jo("onMouseLeave",["mouseout","mouseover"]);Jo("onPointerEnter",["pointerout","pointerover"]);Jo("onPointerLeave",["pointerout","pointerover"]);yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ss));function md(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jg(r,e,void 0,t),t.currentTarget=null}function Bh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&o.isPropagationStopped())break e;md(o,l,u),s=c}else for(i=0;i<r.length;i++){if(l=r[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&o.isPropagationStopped())break e;md(o,l,u),s=c}}}if(Zi)throw t=Jl,Zi=!1,Jl=null,t}function tt(t,e){var n=e[oc];n===void 0&&(n=e[oc]=new Set);var r=t+"__bubble";n.has(r)||(Uh(e,t,2,!1),n.add(r))}function al(t,e,n){var r=0;e&&(r|=4),Uh(n,t,r,e)}var Si="_reactListening"+Math.random().toString(36).slice(2);function Gs(t){if(!t[Si]){t[Si]=!0,Hf.forEach(function(n){n!=="selectionchange"&&(T0.has(n)||al(n,!1,t),al(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Si]||(e[Si]=!0,al("selectionchange",!1,e))}}function Uh(t,e,n,r){switch(_h(e)){case 1:var o=Vg;break;case 4:o=Wg;break;default:o=tu}n=o.bind(null,e,n,t),o=void 0,!Hl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function ll(t,e,n,r,o){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;i=i.return}for(;l!==null;){if(i=no(l),i===null)return;if(c=i.tag,c===5||c===6){r=s=i;continue e}l=l.parentNode}}r=r.return}ch(function(){var u=s,d=Qc(n),h=[];e:{var f=Mh.get(t);if(f!==void 0){var g=ru,x=t;switch(t){case"keypress":if(Vi(n)===0)break e;case"keydown":case"keyup":g=s0;break;case"focusin":x="focus",g=tl;break;case"focusout":x="blur",g=tl;break;case"beforeblur":case"afterblur":g=tl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=rd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Hg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=l0;break;case $h:case Ph:case Lh:g=Yg;break;case Ih:g=u0;break;case"scroll":g=Gg;break;case"wheel":g=f0;break;case"copy":case"cut":case"paste":g=Xg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=sd}var b=(e&4)!==0,_=!b&&t==="scroll",p=b?f!==null?f+"Capture":null:f;b=[];for(var m=u,v;m!==null;){v=m;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,p!==null&&(w=Bs(m,p),w!=null&&b.push(qs(m,w,v)))),_)break;m=m.return}0<b.length&&(f=new g(f,x,null,n,d),h.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Gl&&(x=n.relatedTarget||n.fromElement)&&(no(x)||x[hr]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=u,x=x?no(x):null,x!==null&&(_=xo(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=u),g!==x)){if(b=rd,w="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(b=sd,w="onPointerLeave",p="onPointerEnter",m="pointer"),_=g==null?f:Po(g),v=x==null?f:Po(x),f=new b(w,m+"leave",g,n,d),f.target=_,f.relatedTarget=v,w=null,no(d)===u&&(b=new b(p,m+"enter",x,n,d),b.target=v,b.relatedTarget=_,w=b),_=w,g&&x)t:{for(b=g,p=x,m=0,v=b;v;v=wo(v))m++;for(v=0,w=p;w;w=wo(w))v++;for(;0<m-v;)b=wo(b),m--;for(;0<v-m;)p=wo(p),v--;for(;m--;){if(b===p||p!==null&&b===p.alternate)break t;b=wo(b),p=wo(p)}b=null}else b=null;g!==null&&gd(h,f,g,b,!1),x!==null&&_!==null&&gd(h,_,x,b,!0)}}e:{if(f=u?Po(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var k=x0;else if(ld(f))if(Th)k=_0;else{k=w0;var T=b0}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=S0);if(k&&(k=k(t,u))){Rh(h,k,n,d);break e}T&&T(t,f,u),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Ul(f,"number",f.value)}switch(T=u?Po(u):window,t){case"focusin":(ld(T)||T.contentEditable==="true")&&(Oo=T,Xl=u,Rs=null);break;case"focusout":Rs=Xl=Oo=null;break;case"mousedown":Zl=!0;break;case"contextmenu":case"mouseup":case"dragend":Zl=!1,hd(h,n,d);break;case"selectionchange":if(C0)break;case"keydown":case"keyup":hd(h,n,d)}var D;if(su)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ao?Ch(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(kh&&n.locale!=="ko"&&(Ao||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ao&&(D=Eh()):(Nr=d,nu="value"in Nr?Nr.value:Nr.textContent,Ao=!0)),T=oa(u,S),0<T.length&&(S=new od(S,t,null,n,d),h.push({event:S,listeners:T}),D?S.data=D:(D=jh(n),D!==null&&(S.data=D)))),(D=p0?m0(t,n):g0(t,n))&&(u=oa(u,"onBeforeInput"),0<u.length&&(d=new od("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=D))}Bh(h,e)})}function qs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function oa(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Bs(t,n),s!=null&&r.unshift(qs(t,s,o)),s=Bs(t,e),s!=null&&r.push(qs(t,s,o))),t=t.return}return r}function wo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gd(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,o?(c=Bs(n,s),c!=null&&i.unshift(qs(n,c,l))):o||(c=Bs(n,s),c!=null&&i.push(qs(n,c,l)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var D0=/\r\n?/g,N0=/\u0000|\uFFFD/g;function vd(t){return(typeof t=="string"?t:""+t).replace(D0,`
`).replace(N0,"")}function _i(t,e,n){if(e=vd(e),vd(t)!==e&&n)throw Error(M(425))}function sa(){}var ec=null,tc=null;function nc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rc=typeof setTimeout=="function"?setTimeout:void 0,A0=typeof clearTimeout=="function"?clearTimeout:void 0,yd=typeof Promise=="function"?Promise:void 0,O0=typeof queueMicrotask=="function"?queueMicrotask:typeof yd<"u"?function(t){return yd.resolve(null).then(t).catch($0)}:rc;function $0(t){setTimeout(function(){throw t})}function cl(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),Fs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Fs(e)}function Lr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var os=Math.random().toString(36).slice(2),Qn="__reactFiber$"+os,Hs="__reactProps$"+os,hr="__reactContainer$"+os,oc="__reactEvents$"+os,P0="__reactListeners$"+os,L0="__reactHandles$"+os;function no(t){var e=t[Qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hr]||n[Qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=xd(t);t!==null;){if(n=t[Qn])return n;t=xd(t)}return e}t=n,n=t.parentNode}return null}function si(t){return t=t[Qn]||t[hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Po(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function Ta(t){return t[Hs]||null}var sc=[],Lo=-1;function Wr(t){return{current:t}}function nt(t){0>Lo||(t.current=sc[Lo],sc[Lo]=null,Lo--)}function Xe(t,e){Lo++,sc[Lo]=t.current,t.current=e}var Fr={},Mt=Wr(Fr),on=Wr(!1),lo=Fr;function Ko(t,e){var n=t.type.contextTypes;if(!n)return Fr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function sn(t){return t=t.childContextTypes,t!=null}function ia(){nt(on),nt(Mt)}function bd(t,e,n){if(Mt.current!==Fr)throw Error(M(168));Xe(Mt,e),Xe(on,n)}function zh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(M(108,bg(t)||"Unknown",o));return ct({},n,r)}function aa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fr,lo=Mt.current,Xe(Mt,t),Xe(on,on.current),!0}function wd(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=zh(t,e,lo),r.__reactInternalMemoizedMergedChildContext=t,nt(on),nt(Mt),Xe(Mt,t)):nt(on),Xe(on,n)}var ar=null,Da=!1,ul=!1;function Fh(t){ar===null?ar=[t]:ar.push(t)}function I0(t){Da=!0,Fh(t)}function Gr(){if(!ul&&ar!==null){ul=!0;var t=0,e=Fe;try{var n=ar;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ar=null,Da=!1}catch(o){throw ar!==null&&(ar=ar.slice(t+1)),hh(Xc,Gr),o}finally{Fe=e,ul=!1}}return null}var Io=[],Mo=0,la=null,ca=0,bn=[],wn=0,co=null,lr=1,cr="";function Xr(t,e){Io[Mo++]=ca,Io[Mo++]=la,la=t,ca=e}function Vh(t,e,n){bn[wn++]=lr,bn[wn++]=cr,bn[wn++]=co,co=t;var r=lr;t=cr;var o=32-Un(r)-1;r&=~(1<<o),n+=1;var s=32-Un(e)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,lr=1<<32-Un(e)+o|n<<o|r,cr=s+t}else lr=1<<s|n<<o|r,cr=t}function au(t){t.return!==null&&(Xr(t,1),Vh(t,1,0))}function lu(t){for(;t===la;)la=Io[--Mo],Io[Mo]=null,ca=Io[--Mo],Io[Mo]=null;for(;t===co;)co=bn[--wn],bn[wn]=null,cr=bn[--wn],bn[wn]=null,lr=bn[--wn],bn[wn]=null}var dn=null,un=null,ot=!1,Mn=null;function Wh(t,e){var n=_n(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dn=t,un=Lr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=co!==null?{id:lr,overflow:cr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_n(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dn=t,un=null,!0):!1;default:return!1}}function ic(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ac(t){if(ot){var e=un;if(e){var n=e;if(!Sd(t,e)){if(ic(t))throw Error(M(418));e=Lr(n.nextSibling);var r=dn;e&&Sd(t,e)?Wh(r,n):(t.flags=t.flags&-4097|2,ot=!1,dn=t)}}else{if(ic(t))throw Error(M(418));t.flags=t.flags&-4097|2,ot=!1,dn=t}}}function _d(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dn=t}function Ei(t){if(t!==dn)return!1;if(!ot)return _d(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nc(t.type,t.memoizedProps)),e&&(e=un)){if(ic(t))throw Gh(),Error(M(418));for(;e;)Wh(t,e),e=Lr(e.nextSibling)}if(_d(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=Lr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=dn?Lr(t.stateNode.nextSibling):null;return!0}function Gh(){for(var t=un;t;)t=Lr(t.nextSibling)}function Yo(){un=dn=null,ot=!1}function cu(t){Mn===null?Mn=[t]:Mn.push(t)}var M0=yr.ReactCurrentBatchConfig;function ms(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var o=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var l=o.refs;i===null?delete l[s]:l[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function ki(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ed(t){var e=t._init;return e(t._payload)}function qh(t){function e(p,m){if(t){var v=p.deletions;v===null?(p.deletions=[m],p.flags|=16):v.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function o(p,m){return p=Ur(p,m),p.index=0,p.sibling=null,p}function s(p,m,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<m?(p.flags|=2,m):v):(p.flags|=2,m)):(p.flags|=1048576,m)}function i(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,m,v,w){return m===null||m.tag!==6?(m=vl(v,p.mode,w),m.return=p,m):(m=o(m,v),m.return=p,m)}function c(p,m,v,w){var k=v.type;return k===No?d(p,m,v.props.children,w,v.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Cr&&Ed(k)===m.type)?(w=o(m,v.props),w.ref=ms(p,m,v),w.return=p,w):(w=Yi(v.type,v.key,v.props,null,p.mode,w),w.ref=ms(p,m,v),w.return=p,w)}function u(p,m,v,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=yl(v,p.mode,w),m.return=p,m):(m=o(m,v.children||[]),m.return=p,m)}function d(p,m,v,w,k){return m===null||m.tag!==7?(m=io(v,p.mode,w,k),m.return=p,m):(m=o(m,v),m.return=p,m)}function h(p,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=vl(""+m,p.mode,v),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case pi:return v=Yi(m.type,m.key,m.props,null,p.mode,v),v.ref=ms(p,null,m),v.return=p,v;case Do:return m=yl(m,p.mode,v),m.return=p,m;case Cr:var w=m._init;return h(p,w(m._payload),v)}if(bs(m)||us(m))return m=io(m,p.mode,v,null),m.return=p,m;ki(p,m)}return null}function f(p,m,v,w){var k=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:l(p,m,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case pi:return v.key===k?c(p,m,v,w):null;case Do:return v.key===k?u(p,m,v,w):null;case Cr:return k=v._init,f(p,m,k(v._payload),w)}if(bs(v)||us(v))return k!==null?null:d(p,m,v,w,null);ki(p,v)}return null}function g(p,m,v,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(v)||null,l(m,p,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case pi:return p=p.get(w.key===null?v:w.key)||null,c(m,p,w,k);case Do:return p=p.get(w.key===null?v:w.key)||null,u(m,p,w,k);case Cr:var T=w._init;return g(p,m,v,T(w._payload),k)}if(bs(w)||us(w))return p=p.get(v)||null,d(m,p,w,k,null);ki(m,w)}return null}function x(p,m,v,w){for(var k=null,T=null,D=m,S=m=0,A=null;D!==null&&S<v.length;S++){D.index>S?(A=D,D=null):A=D.sibling;var y=f(p,D,v[S],w);if(y===null){D===null&&(D=A);break}t&&D&&y.alternate===null&&e(p,D),m=s(y,m,S),T===null?k=y:T.sibling=y,T=y,D=A}if(S===v.length)return n(p,D),ot&&Xr(p,S),k;if(D===null){for(;S<v.length;S++)D=h(p,v[S],w),D!==null&&(m=s(D,m,S),T===null?k=D:T.sibling=D,T=D);return ot&&Xr(p,S),k}for(D=r(p,D);S<v.length;S++)A=g(D,p,S,v[S],w),A!==null&&(t&&A.alternate!==null&&D.delete(A.key===null?S:A.key),m=s(A,m,S),T===null?k=A:T.sibling=A,T=A);return t&&D.forEach(function(N){return e(p,N)}),ot&&Xr(p,S),k}function b(p,m,v,w){var k=us(v);if(typeof k!="function")throw Error(M(150));if(v=k.call(v),v==null)throw Error(M(151));for(var T=k=null,D=m,S=m=0,A=null,y=v.next();D!==null&&!y.done;S++,y=v.next()){D.index>S?(A=D,D=null):A=D.sibling;var N=f(p,D,y.value,w);if(N===null){D===null&&(D=A);break}t&&D&&N.alternate===null&&e(p,D),m=s(N,m,S),T===null?k=N:T.sibling=N,T=N,D=A}if(y.done)return n(p,D),ot&&Xr(p,S),k;if(D===null){for(;!y.done;S++,y=v.next())y=h(p,y.value,w),y!==null&&(m=s(y,m,S),T===null?k=y:T.sibling=y,T=y);return ot&&Xr(p,S),k}for(D=r(p,D);!y.done;S++,y=v.next())y=g(D,p,S,y.value,w),y!==null&&(t&&y.alternate!==null&&D.delete(y.key===null?S:y.key),m=s(y,m,S),T===null?k=y:T.sibling=y,T=y);return t&&D.forEach(function(O){return e(p,O)}),ot&&Xr(p,S),k}function _(p,m,v,w){if(typeof v=="object"&&v!==null&&v.type===No&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case pi:e:{for(var k=v.key,T=m;T!==null;){if(T.key===k){if(k=v.type,k===No){if(T.tag===7){n(p,T.sibling),m=o(T,v.props.children),m.return=p,p=m;break e}}else if(T.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Cr&&Ed(k)===T.type){n(p,T.sibling),m=o(T,v.props),m.ref=ms(p,T,v),m.return=p,p=m;break e}n(p,T);break}else e(p,T);T=T.sibling}v.type===No?(m=io(v.props.children,p.mode,w,v.key),m.return=p,p=m):(w=Yi(v.type,v.key,v.props,null,p.mode,w),w.ref=ms(p,m,v),w.return=p,p=w)}return i(p);case Do:e:{for(T=v.key;m!==null;){if(m.key===T)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(p,m.sibling),m=o(m,v.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=yl(v,p.mode,w),m.return=p,p=m}return i(p);case Cr:return T=v._init,_(p,m,T(v._payload),w)}if(bs(v))return x(p,m,v,w);if(us(v))return b(p,m,v,w);ki(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(p,m.sibling),m=o(m,v),m.return=p,p=m):(n(p,m),m=vl(v,p.mode,w),m.return=p,p=m),i(p)):n(p,m)}return _}var Qo=qh(!0),Hh=qh(!1),ua=Wr(null),da=null,Bo=null,uu=null;function du(){uu=Bo=da=null}function fu(t){var e=ua.current;nt(ua),t._currentValue=e}function lc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qo(t,e){da=t,uu=Bo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(rn=!0),t.firstContext=null)}function Cn(t){var e=t._currentValue;if(uu!==t)if(t={context:t,memoizedValue:e,next:null},Bo===null){if(da===null)throw Error(M(308));Bo=t,da.dependencies={lanes:0,firstContext:t}}else Bo=Bo.next=t;return e}var ro=null;function hu(t){ro===null?ro=[t]:ro.push(t)}function Jh(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,hu(e)):(n.next=o.next,o.next=n),e.interleaved=n,pr(t,r)}function pr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jr=!1;function pu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ir(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,pr(t,n)}return o=r.interleaved,o===null?(e.next=e,hu(r)):(e.next=o.next,o.next=e),r.interleaved=e,pr(t,n)}function Wi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zc(t,n)}}function kd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fa(t,e,n,r){var o=t.updateQueue;jr=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?s=u:i.next=u,i=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var h=o.baseState;i=0,d=u=c=null,l=s;do{var f=l.lane,g=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,b=l;switch(f=e,g=n,b.tag){case 1:if(x=b.payload,typeof x=="function"){h=x.call(g,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,f=typeof x=="function"?x.call(g,h,f):x,f==null)break e;h=ct({},h,f);break e;case 2:jr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=o.effects,f===null?o.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=h):d=d.next=g,i|=f;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;f=l,l=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(d===null&&(c=h),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=d,e=o.shared.interleaved,e!==null){o=e;do i|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);fo|=i,t.lanes=i,t.memoizedState=h}}function Cd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(M(191,o));o.call(r)}}}var ii={},er=Wr(ii),Js=Wr(ii),Ks=Wr(ii);function oo(t){if(t===ii)throw Error(M(174));return t}function mu(t,e){switch(Xe(Ks,e),Xe(Js,t),Xe(er,ii),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fl(e,t)}nt(er),Xe(er,e)}function Xo(){nt(er),nt(Js),nt(Ks)}function Yh(t){oo(Ks.current);var e=oo(er.current),n=Fl(e,t.type);e!==n&&(Xe(Js,t),Xe(er,n))}function gu(t){Js.current===t&&(nt(er),nt(Js))}var at=Wr(0);function ha(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dl=[];function vu(){for(var t=0;t<dl.length;t++)dl[t]._workInProgressVersionPrimary=null;dl.length=0}var Gi=yr.ReactCurrentDispatcher,fl=yr.ReactCurrentBatchConfig,uo=0,lt=null,_t=null,Rt=null,pa=!1,Ts=!1,Ys=0,B0=0;function Pt(){throw Error(M(321))}function yu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vn(t[n],e[n]))return!1;return!0}function xu(t,e,n,r,o,s){if(uo=s,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gi.current=t===null||t.memoizedState===null?V0:W0,t=n(r,o),Ts){s=0;do{if(Ts=!1,Ys=0,25<=s)throw Error(M(301));s+=1,Rt=_t=null,e.updateQueue=null,Gi.current=G0,t=n(r,o)}while(Ts)}if(Gi.current=ma,e=_t!==null&&_t.next!==null,uo=0,Rt=_t=lt=null,pa=!1,e)throw Error(M(300));return t}function bu(){var t=Ys!==0;return Ys=0,t}function Kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?lt.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function jn(){if(_t===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=Rt===null?lt.memoizedState:Rt.next;if(e!==null)Rt=e,_t=t;else{if(t===null)throw Error(M(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Rt===null?lt.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function Qs(t,e){return typeof e=="function"?e(t):e}function hl(t){var e=jn(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=_t,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var l=i=null,c=null,u=s;do{var d=u.lane;if((uo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,i=r):c=c.next=h,lt.lanes|=d,fo|=d}u=u.next}while(u!==null&&u!==s);c===null?i=r:c.next=l,Vn(r,e.memoizedState)||(rn=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do s=o.lane,lt.lanes|=s,fo|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pl(t){var e=jn(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);Vn(s,e.memoizedState)||(rn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Qh(){}function Xh(t,e){var n=lt,r=jn(),o=e(),s=!Vn(r.memoizedState,o);if(s&&(r.memoizedState=o,rn=!0),r=r.queue,wu(tp.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,Xs(9,ep.bind(null,n,r,o,e),void 0,null),Tt===null)throw Error(M(349));uo&30||Zh(n,e,o)}return o}function Zh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ep(t,e,n,r){e.value=n,e.getSnapshot=r,np(e)&&rp(t)}function tp(t,e,n){return n(function(){np(e)&&rp(t)})}function np(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vn(t,n)}catch{return!0}}function rp(t){var e=pr(t,1);e!==null&&zn(e,t,1,-1)}function jd(t){var e=Kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:t},e.queue=t,t=t.dispatch=F0.bind(null,lt,t),[e.memoizedState,t]}function Xs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function op(){return jn().memoizedState}function qi(t,e,n,r){var o=Kn();lt.flags|=t,o.memoizedState=Xs(1|e,n,void 0,r===void 0?null:r)}function Na(t,e,n,r){var o=jn();r=r===void 0?null:r;var s=void 0;if(_t!==null){var i=_t.memoizedState;if(s=i.destroy,r!==null&&yu(r,i.deps)){o.memoizedState=Xs(e,n,s,r);return}}lt.flags|=t,o.memoizedState=Xs(1|e,n,s,r)}function Rd(t,e){return qi(8390656,8,t,e)}function wu(t,e){return Na(2048,8,t,e)}function sp(t,e){return Na(4,2,t,e)}function ip(t,e){return Na(4,4,t,e)}function ap(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lp(t,e,n){return n=n!=null?n.concat([t]):null,Na(4,4,ap.bind(null,e,t),n)}function Su(){}function cp(t,e){var n=jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function up(t,e){var n=jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function dp(t,e,n){return uo&21?(Vn(n,e)||(n=gh(),lt.lanes|=n,fo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,rn=!0),t.memoizedState=n)}function U0(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=fl.transition;fl.transition={};try{t(!1),e()}finally{Fe=n,fl.transition=r}}function fp(){return jn().memoizedState}function z0(t,e,n){var r=Br(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hp(t))pp(e,n);else if(n=Jh(t,e,n,r),n!==null){var o=qt();zn(n,t,r,o),mp(n,e,r)}}function F0(t,e,n){var r=Br(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hp(t))pp(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,l=s(i,n);if(o.hasEagerState=!0,o.eagerState=l,Vn(l,i)){var c=e.interleaved;c===null?(o.next=o,hu(e)):(o.next=c.next,c.next=o),e.interleaved=o;return}}catch{}finally{}n=Jh(t,e,o,r),n!==null&&(o=qt(),zn(n,t,r,o),mp(n,e,r))}}function hp(t){var e=t.alternate;return t===lt||e!==null&&e===lt}function pp(t,e){Ts=pa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function mp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zc(t,n)}}var ma={readContext:Cn,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},V0={readContext:Cn,useCallback:function(t,e){return Kn().memoizedState=[t,e===void 0?null:e],t},useContext:Cn,useEffect:Rd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qi(4194308,4,ap.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qi(4194308,4,t,e)},useInsertionEffect:function(t,e){return qi(4,2,t,e)},useMemo:function(t,e){var n=Kn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Kn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=z0.bind(null,lt,t),[r.memoizedState,t]},useRef:function(t){var e=Kn();return t={current:t},e.memoizedState=t},useState:jd,useDebugValue:Su,useDeferredValue:function(t){return Kn().memoizedState=t},useTransition:function(){var t=jd(!1),e=t[0];return t=U0.bind(null,t[1]),Kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=lt,o=Kn();if(ot){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Tt===null)throw Error(M(349));uo&30||Zh(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,Rd(tp.bind(null,r,s,t),[t]),r.flags|=2048,Xs(9,ep.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Kn(),e=Tt.identifierPrefix;if(ot){var n=cr,r=lr;n=(r&~(1<<32-Un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ys++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=B0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},W0={readContext:Cn,useCallback:cp,useContext:Cn,useEffect:wu,useImperativeHandle:lp,useInsertionEffect:sp,useLayoutEffect:ip,useMemo:up,useReducer:hl,useRef:op,useState:function(){return hl(Qs)},useDebugValue:Su,useDeferredValue:function(t){var e=jn();return dp(e,_t.memoizedState,t)},useTransition:function(){var t=hl(Qs)[0],e=jn().memoizedState;return[t,e]},useMutableSource:Qh,useSyncExternalStore:Xh,useId:fp,unstable_isNewReconciler:!1},G0={readContext:Cn,useCallback:cp,useContext:Cn,useEffect:wu,useImperativeHandle:lp,useInsertionEffect:sp,useLayoutEffect:ip,useMemo:up,useReducer:pl,useRef:op,useState:function(){return pl(Qs)},useDebugValue:Su,useDeferredValue:function(t){var e=jn();return _t===null?e.memoizedState=t:dp(e,_t.memoizedState,t)},useTransition:function(){var t=pl(Qs)[0],e=jn().memoizedState;return[t,e]},useMutableSource:Qh,useSyncExternalStore:Xh,useId:fp,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function cc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Aa={isMounted:function(t){return(t=t._reactInternals)?xo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qt(),o=Br(t),s=dr(r,o);s.payload=e,n!=null&&(s.callback=n),e=Ir(t,s,o),e!==null&&(zn(e,t,o,r),Wi(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qt(),o=Br(t),s=dr(r,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ir(t,s,o),e!==null&&(zn(e,t,o,r),Wi(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),r=Br(t),o=dr(n,r);o.tag=2,e!=null&&(o.callback=e),e=Ir(t,o,r),e!==null&&(zn(e,t,r,n),Wi(e,t,r))}};function Td(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!Ws(n,r)||!Ws(o,s):!0}function gp(t,e,n){var r=!1,o=Fr,s=e.contextType;return typeof s=="object"&&s!==null?s=Cn(s):(o=sn(e)?lo:Mt.current,r=e.contextTypes,s=(r=r!=null)?Ko(t,o):Fr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Aa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function Dd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Aa.enqueueReplaceState(e,e.state,null)}function uc(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},pu(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=Cn(s):(s=sn(e)?lo:Mt.current,o.context=Ko(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(cc(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Aa.enqueueReplaceState(o,o.state,null),fa(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Zo(t,e){try{var n="",r=e;do n+=xg(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function ml(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var q0=typeof WeakMap=="function"?WeakMap:Map;function vp(t,e,n){n=dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){va||(va=!0,wc=r),dc(t,e)},n}function yp(t,e,n){n=dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){dc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){dc(t,e),typeof r!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function Nd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new q0;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=iv.bind(null,t,e,n),e.then(t,t))}function Ad(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Od(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=dr(-1,1),e.tag=2,Ir(n,e,1))),n.lanes|=1),t)}var H0=yr.ReactCurrentOwner,rn=!1;function Vt(t,e,n,r){e.child=t===null?Hh(e,null,n,r):Qo(e,t.child,n,r)}function $d(t,e,n,r,o){n=n.render;var s=e.ref;return qo(e,o),r=xu(t,e,n,r,s,o),n=bu(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,mr(t,e,o)):(ot&&n&&au(e),e.flags|=1,Vt(t,e,r,o),e.child)}function Pd(t,e,n,r,o){if(t===null){var s=n.type;return typeof s=="function"&&!Du(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,xp(t,e,s,r,o)):(t=Yi(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ws,n(i,r)&&t.ref===e.ref)return mr(t,e,o)}return e.flags|=1,t=Ur(s,r),t.ref=e.ref,t.return=e,e.child=t}function xp(t,e,n,r,o){if(t!==null){var s=t.memoizedProps;if(Ws(s,r)&&t.ref===e.ref)if(rn=!1,e.pendingProps=r=s,(t.lanes&o)!==0)t.flags&131072&&(rn=!0);else return e.lanes=t.lanes,mr(t,e,o)}return fc(t,e,n,r,o)}function bp(t,e,n){var r=e.pendingProps,o=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(zo,cn),cn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Xe(zo,cn),cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Xe(zo,cn),cn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Xe(zo,cn),cn|=r;return Vt(t,e,o,n),e.child}function wp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fc(t,e,n,r,o){var s=sn(n)?lo:Mt.current;return s=Ko(e,s),qo(e,o),n=xu(t,e,n,r,s,o),r=bu(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,mr(t,e,o)):(ot&&r&&au(e),e.flags|=1,Vt(t,e,n,o),e.child)}function Ld(t,e,n,r,o){if(sn(n)){var s=!0;aa(e)}else s=!1;if(qo(e,o),e.stateNode===null)Hi(t,e),gp(e,n,r),uc(e,n,r,o),r=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Cn(u):(u=sn(n)?lo:Mt.current,u=Ko(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Dd(e,i,r,u),jr=!1;var f=e.memoizedState;i.state=f,fa(e,r,i,o),c=e.memoizedState,l!==r||f!==c||on.current||jr?(typeof d=="function"&&(cc(e,n,d,r),c=e.memoizedState),(l=jr||Td(e,n,l,r,f,c,u))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),i.props=r,i.state=c,i.context=u,r=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,Kh(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Pn(e.type,l),i.props=u,h=e.pendingProps,f=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Cn(c):(c=sn(n)?lo:Mt.current,c=Ko(e,c));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Dd(e,i,r,c),jr=!1,f=e.memoizedState,i.state=f,fa(e,r,i,o);var x=e.memoizedState;l!==h||f!==x||on.current||jr?(typeof g=="function"&&(cc(e,n,g,r),x=e.memoizedState),(u=jr||Td(e,n,u,r,f,x,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,x,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,x,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),i.props=r,i.state=x,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return hc(t,e,n,r,s,o)}function hc(t,e,n,r,o,s){wp(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return o&&wd(e,n,!1),mr(t,e,s);r=e.stateNode,H0.current=e;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=Qo(e,t.child,null,s),e.child=Qo(e,null,l,s)):Vt(t,e,l,s),e.memoizedState=r.state,o&&wd(e,n,!0),e.child}function Sp(t){var e=t.stateNode;e.pendingContext?bd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bd(t,e.context,!1),mu(t,e.containerInfo)}function Id(t,e,n,r,o){return Yo(),cu(o),e.flags|=256,Vt(t,e,n,r),e.child}var pc={dehydrated:null,treeContext:null,retryLane:0};function mc(t){return{baseLanes:t,cachePool:null,transitions:null}}function _p(t,e,n){var r=e.pendingProps,o=at.current,s=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(o&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Xe(at,o&1),t===null)return ac(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Pa(i,r,0,null),t=io(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=mc(n),e.memoizedState=pc,t):_u(e,i));if(o=t.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return J0(t,e,i,r,l,o,n);if(s){s=r.fallback,i=e.mode,o=t.child,l=o.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ur(o,c),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?s=Ur(l,s):(s=io(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?mc(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=pc,r}return s=t.child,t=s.sibling,r=Ur(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _u(t,e){return e=Pa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ci(t,e,n,r){return r!==null&&cu(r),Qo(e,t.child,null,n),t=_u(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function J0(t,e,n,r,o,s,i){if(n)return e.flags&256?(e.flags&=-257,r=ml(Error(M(422))),Ci(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=Pa({mode:"visible",children:r.children},o,0,null),s=io(s,o,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Qo(e,t.child,null,i),e.child.memoizedState=mc(i),e.memoizedState=pc,s);if(!(e.mode&1))return Ci(t,e,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(M(419)),r=ml(s,r,void 0),Ci(t,e,i,r)}if(l=(i&t.childLanes)!==0,rn||l){if(r=Tt,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,pr(t,o),zn(r,t,o,-1))}return Tu(),r=ml(Error(M(421))),Ci(t,e,i,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=av.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,un=Lr(o.nextSibling),dn=e,ot=!0,Mn=null,t!==null&&(bn[wn++]=lr,bn[wn++]=cr,bn[wn++]=co,lr=t.id,cr=t.overflow,co=e),e=_u(e,r.children),e.flags|=4096,e)}function Md(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lc(t.return,e,n)}function gl(t,e,n,r,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function Ep(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;if(Vt(t,e,r.children,n),r=at.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Md(t,n,e);else if(t.tag===19)Md(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Xe(at,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&ha(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),gl(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&ha(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}gl(e,!0,n,null,s);break;case"together":gl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=Ur(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ur(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function K0(t,e,n){switch(e.tag){case 3:Sp(e),Yo();break;case 5:Yh(e);break;case 1:sn(e.type)&&aa(e);break;case 4:mu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;Xe(ua,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Xe(at,at.current&1),e.flags|=128,null):n&e.child.childLanes?_p(t,e,n):(Xe(at,at.current&1),t=mr(t,e,n),t!==null?t.sibling:null);Xe(at,at.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ep(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Xe(at,at.current),r)break;return null;case 22:case 23:return e.lanes=0,bp(t,e,n)}return mr(t,e,n)}var kp,gc,Cp,jp;kp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gc=function(){};Cp=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,oo(er.current);var s=null;switch(n){case"input":o=Ml(t,o),r=Ml(t,r),s=[];break;case"select":o=ct({},o,{value:void 0}),r=ct({},r,{value:void 0}),s=[];break;case"textarea":o=zl(t,o),r=zl(t,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sa)}Vl(n,r);var i;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Is.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Is.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&tt("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};jp=function(t,e,n,r){n!==r&&(e.flags|=4)};function gs(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Y0(t,e,n){var r=e.pendingProps;switch(lu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return sn(e.type)&&ia(),Lt(e),null;case 3:return r=e.stateNode,Xo(),nt(on),nt(Mt),vu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ei(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mn!==null&&(Ec(Mn),Mn=null))),gc(t,e),Lt(e),null;case 5:gu(e);var o=oo(Ks.current);if(n=e.type,t!==null&&e.stateNode!=null)Cp(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Lt(e),null}if(t=oo(er.current),Ei(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Qn]=e,r[Hs]=s,t=(e.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(o=0;o<Ss.length;o++)tt(Ss[o],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":Hu(r,s),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tt("invalid",r);break;case"textarea":Ku(r,s),tt("invalid",r)}Vl(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&_i(r.textContent,l,t),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&_i(r.textContent,l,t),o=["children",""+l]):Is.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&tt("scroll",r)}switch(n){case"input":mi(r),Ju(r,s,!0);break;case"textarea":mi(r),Yu(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=sa)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=th(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[Qn]=e,t[Hs]=r,kp(t,e,!1,!1),e.stateNode=t;e:{switch(i=Wl(n,r),n){case"dialog":tt("cancel",t),tt("close",t),o=r;break;case"iframe":case"object":case"embed":tt("load",t),o=r;break;case"video":case"audio":for(o=0;o<Ss.length;o++)tt(Ss[o],t);o=r;break;case"source":tt("error",t),o=r;break;case"img":case"image":case"link":tt("error",t),tt("load",t),o=r;break;case"details":tt("toggle",t),o=r;break;case"input":Hu(t,r),o=Ml(t,r),tt("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=ct({},r,{value:void 0}),tt("invalid",t);break;case"textarea":Ku(t,r),o=zl(t,r),tt("invalid",t);break;default:o=r}Vl(n,o),l=o;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?oh(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&nh(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ms(t,c):typeof c=="number"&&Ms(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Is.hasOwnProperty(s)?c!=null&&s==="onScroll"&&tt("scroll",t):c!=null&&Hc(t,s,c,i))}switch(n){case"input":mi(t),Ju(t,r,!1);break;case"textarea":mi(t),Yu(t);break;case"option":r.value!=null&&t.setAttribute("value",""+zr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Fo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Fo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=sa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)jp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=oo(Ks.current),oo(er.current),Ei(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qn]=e,(s=r.nodeValue!==n)&&(t=dn,t!==null))switch(t.tag){case 3:_i(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_i(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qn]=e,e.stateNode=r}return Lt(e),null;case 13:if(nt(at),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&un!==null&&e.mode&1&&!(e.flags&128))Gh(),Yo(),e.flags|=98560,s=!1;else if(s=Ei(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[Qn]=e}else Yo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),s=!1}else Mn!==null&&(Ec(Mn),Mn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||at.current&1?Et===0&&(Et=3):Tu())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return Xo(),gc(t,e),t===null&&Gs(e.stateNode.containerInfo),Lt(e),null;case 10:return fu(e.type._context),Lt(e),null;case 17:return sn(e.type)&&ia(),Lt(e),null;case 19:if(nt(at),s=e.memoizedState,s===null)return Lt(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)gs(s,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=ha(t),i!==null){for(e.flags|=128,gs(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Xe(at,at.current&1|2),e.child}t=t.sibling}s.tail!==null&&vt()>es&&(e.flags|=128,r=!0,gs(s,!1),e.lanes=4194304)}else{if(!r)if(t=ha(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!ot)return Lt(e),null}else 2*vt()-s.renderingStartTime>es&&n!==1073741824&&(e.flags|=128,r=!0,gs(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=vt(),e.sibling=null,n=at.current,Xe(at,r?n&1|2:n&1),e):(Lt(e),null);case 22:case 23:return Ru(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?cn&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function Q0(t,e){switch(lu(e),e.tag){case 1:return sn(e.type)&&ia(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xo(),nt(on),nt(Mt),vu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return gu(e),null;case 13:if(nt(at),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));Yo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(at),null;case 4:return Xo(),null;case 10:return fu(e.type._context),null;case 22:case 23:return Ru(),null;case 24:return null;default:return null}}var ji=!1,It=!1,X0=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Uo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ft(t,e,r)}else n.current=null}function vc(t,e,n){try{n()}catch(r){ft(t,e,r)}}var Bd=!1;function Z0(t,e){if(ec=na,t=Ah(),iu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||o!==0&&h.nodeType!==3||(l=i+o),h!==s||r!==0&&h.nodeType!==3||(c=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++u===o&&(l=i),f===s&&++d===r&&(c=i),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tc={focusedElem:t,selectionRange:n},na=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,_=x.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?b:Pn(e.type,b),_);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(w){ft(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return x=Bd,Bd=!1,x}function Ds(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&vc(e,n,s)}o=o.next}while(o!==r)}}function Oa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Rp(t){var e=t.alternate;e!==null&&(t.alternate=null,Rp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qn],delete e[Hs],delete e[oc],delete e[P0],delete e[L0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tp(t){return t.tag===5||t.tag===3||t.tag===4}function Ud(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sa));else if(r!==4&&(t=t.child,t!==null))for(xc(t,e,n),t=t.sibling;t!==null;)xc(t,e,n),t=t.sibling}function bc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bc(t,e,n),t=t.sibling;t!==null;)bc(t,e,n),t=t.sibling}var Dt=null,Ln=!1;function Sr(t,e,n){for(n=n.child;n!==null;)Dp(t,e,n),n=n.sibling}function Dp(t,e,n){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(ka,n)}catch{}switch(n.tag){case 5:It||Uo(n,e);case 6:var r=Dt,o=Ln;Dt=null,Sr(t,e,n),Dt=r,Ln=o,Dt!==null&&(Ln?(t=Dt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Dt.removeChild(n.stateNode));break;case 18:Dt!==null&&(Ln?(t=Dt,n=n.stateNode,t.nodeType===8?cl(t.parentNode,n):t.nodeType===1&&cl(t,n),Fs(t)):cl(Dt,n.stateNode));break;case 4:r=Dt,o=Ln,Dt=n.stateNode.containerInfo,Ln=!0,Sr(t,e,n),Dt=r,Ln=o;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&vc(n,e,i),o=o.next}while(o!==r)}Sr(t,e,n);break;case 1:if(!It&&(Uo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ft(n,e,l)}Sr(t,e,n);break;case 21:Sr(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,Sr(t,e,n),It=r):Sr(t,e,n);break;default:Sr(t,e,n)}}function zd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new X0),e.forEach(function(r){var o=lv.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function On(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:Dt=l.stateNode,Ln=!1;break e;case 3:Dt=l.stateNode.containerInfo,Ln=!0;break e;case 4:Dt=l.stateNode.containerInfo,Ln=!0;break e}l=l.return}if(Dt===null)throw Error(M(160));Dp(s,i,o),Dt=null,Ln=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){ft(o,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Np(e,t),e=e.sibling}function Np(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(On(e,t),Hn(t),r&4){try{Ds(3,t,t.return),Oa(3,t)}catch(b){ft(t,t.return,b)}try{Ds(5,t,t.return)}catch(b){ft(t,t.return,b)}}break;case 1:On(e,t),Hn(t),r&512&&n!==null&&Uo(n,n.return);break;case 5:if(On(e,t),Hn(t),r&512&&n!==null&&Uo(n,n.return),t.flags&32){var o=t.stateNode;try{Ms(o,"")}catch(b){ft(t,t.return,b)}}if(r&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Zf(o,s),Wl(l,i);var u=Wl(l,s);for(i=0;i<c.length;i+=2){var d=c[i],h=c[i+1];d==="style"?oh(o,h):d==="dangerouslySetInnerHTML"?nh(o,h):d==="children"?Ms(o,h):Hc(o,d,h,u)}switch(l){case"input":Bl(o,s);break;case"textarea":eh(o,s);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Fo(o,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?Fo(o,!!s.multiple,s.defaultValue,!0):Fo(o,!!s.multiple,s.multiple?[]:"",!1))}o[Hs]=s}catch(b){ft(t,t.return,b)}}break;case 6:if(On(e,t),Hn(t),r&4){if(t.stateNode===null)throw Error(M(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(b){ft(t,t.return,b)}}break;case 3:if(On(e,t),Hn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fs(e.containerInfo)}catch(b){ft(t,t.return,b)}break;case 4:On(e,t),Hn(t);break;case 13:On(e,t),Hn(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Cu=vt())),r&4&&zd(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(It=(u=It)||d,On(e,t),It=u):On(e,t),Hn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Q=t,d=t.child;d!==null;){for(h=Q=d;Q!==null;){switch(f=Q,g=f.child,f.tag){case 0:case 11:case 14:case 15:Ds(4,f,f.return);break;case 1:Uo(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(b){ft(r,n,b)}}break;case 5:Uo(f,f.return);break;case 22:if(f.memoizedState!==null){Vd(h);continue}}g!==null?(g.return=f,Q=g):Vd(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{o=h.stateNode,u?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,c=h.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=rh("display",i))}catch(b){ft(t,t.return,b)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(b){ft(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:On(e,t),Hn(t),r&4&&zd(t);break;case 21:break;default:On(e,t),Hn(t)}}function Hn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Tp(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Ms(o,""),r.flags&=-33);var s=Ud(t);bc(t,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,l=Ud(t);xc(t,l,i);break;default:throw Error(M(161))}}catch(c){ft(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ev(t,e,n){Q=t,Ap(t)}function Ap(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var o=Q,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||ji;if(!i){var l=o.alternate,c=l!==null&&l.memoizedState!==null||It;l=ji;var u=It;if(ji=i,(It=c)&&!u)for(Q=o;Q!==null;)i=Q,c=i.child,i.tag===22&&i.memoizedState!==null?Wd(o):c!==null?(c.return=i,Q=c):Wd(o);for(;s!==null;)Q=s,Ap(s),s=s.sibling;Q=o,ji=l,It=u}Fd(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,Q=s):Fd(t)}}function Fd(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||Oa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Cd(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cd(e,i,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Fs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}It||e.flags&512&&yc(e)}catch(f){ft(e,e.return,f)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Vd(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Wd(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Oa(4,e)}catch(c){ft(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(c){ft(e,o,c)}}var s=e.return;try{yc(e)}catch(c){ft(e,s,c)}break;case 5:var i=e.return;try{yc(e)}catch(c){ft(e,i,c)}}}catch(c){ft(e,e.return,c)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var tv=Math.ceil,ga=yr.ReactCurrentDispatcher,Eu=yr.ReactCurrentOwner,En=yr.ReactCurrentBatchConfig,Ae=0,Tt=null,bt=null,Nt=0,cn=0,zo=Wr(0),Et=0,Zs=null,fo=0,$a=0,ku=0,Ns=null,tn=null,Cu=0,es=1/0,sr=null,va=!1,wc=null,Mr=null,Ri=!1,Ar=null,ya=0,As=0,Sc=null,Ji=-1,Ki=0;function qt(){return Ae&6?vt():Ji!==-1?Ji:Ji=vt()}function Br(t){return t.mode&1?Ae&2&&Nt!==0?Nt&-Nt:M0.transition!==null?(Ki===0&&(Ki=gh()),Ki):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:_h(t.type)),t):1}function zn(t,e,n,r){if(50<As)throw As=0,Sc=null,Error(M(185));ri(t,n,r),(!(Ae&2)||t!==Tt)&&(t===Tt&&(!(Ae&2)&&($a|=n),Et===4&&Tr(t,Nt)),an(t,r),n===1&&Ae===0&&!(e.mode&1)&&(es=vt()+500,Da&&Gr()))}function an(t,e){var n=t.callbackNode;Mg(t,e);var r=ta(t,t===Tt?Nt:0);if(r===0)n!==null&&Zu(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Zu(n),e===1)t.tag===0?I0(Gd.bind(null,t)):Fh(Gd.bind(null,t)),O0(function(){!(Ae&6)&&Gr()}),n=null;else{switch(vh(r)){case 1:n=Xc;break;case 4:n=ph;break;case 16:n=ea;break;case 536870912:n=mh;break;default:n=ea}n=Up(n,Op.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Op(t,e){if(Ji=-1,Ki=0,Ae&6)throw Error(M(327));var n=t.callbackNode;if(Ho()&&t.callbackNode!==n)return null;var r=ta(t,t===Tt?Nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xa(t,r);else{e=r;var o=Ae;Ae|=2;var s=Pp();(Tt!==t||Nt!==e)&&(sr=null,es=vt()+500,so(t,e));do try{ov();break}catch(l){$p(t,l)}while(!0);du(),ga.current=s,Ae=o,bt!==null?e=0:(Tt=null,Nt=0,e=Et)}if(e!==0){if(e===2&&(o=Kl(t),o!==0&&(r=o,e=_c(t,o))),e===1)throw n=Zs,so(t,0),Tr(t,r),an(t,vt()),n;if(e===6)Tr(t,r);else{if(o=t.current.alternate,!(r&30)&&!nv(o)&&(e=xa(t,r),e===2&&(s=Kl(t),s!==0&&(r=s,e=_c(t,s))),e===1))throw n=Zs,so(t,0),Tr(t,r),an(t,vt()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:Zr(t,tn,sr);break;case 3:if(Tr(t,r),(r&130023424)===r&&(e=Cu+500-vt(),10<e)){if(ta(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){qt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=rc(Zr.bind(null,t,tn,sr),e);break}Zr(t,tn,sr);break;case 4:if(Tr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var i=31-Un(r);s=1<<i,i=e[i],i>o&&(o=i),r&=~s}if(r=o,r=vt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tv(r/1960))-r,10<r){t.timeoutHandle=rc(Zr.bind(null,t,tn,sr),r);break}Zr(t,tn,sr);break;case 5:Zr(t,tn,sr);break;default:throw Error(M(329))}}}return an(t,vt()),t.callbackNode===n?Op.bind(null,t):null}function _c(t,e){var n=Ns;return t.current.memoizedState.isDehydrated&&(so(t,e).flags|=256),t=xa(t,e),t!==2&&(e=tn,tn=n,e!==null&&Ec(e)),t}function Ec(t){tn===null?tn=t:tn.push.apply(tn,t)}function nv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Vn(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tr(t,e){for(e&=~ku,e&=~$a,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Un(e),r=1<<n;t[n]=-1,e&=~r}}function Gd(t){if(Ae&6)throw Error(M(327));Ho();var e=ta(t,0);if(!(e&1))return an(t,vt()),null;var n=xa(t,e);if(t.tag!==0&&n===2){var r=Kl(t);r!==0&&(e=r,n=_c(t,r))}if(n===1)throw n=Zs,so(t,0),Tr(t,e),an(t,vt()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zr(t,tn,sr),an(t,vt()),null}function ju(t,e){var n=Ae;Ae|=1;try{return t(e)}finally{Ae=n,Ae===0&&(es=vt()+500,Da&&Gr())}}function ho(t){Ar!==null&&Ar.tag===0&&!(Ae&6)&&Ho();var e=Ae;Ae|=1;var n=En.transition,r=Fe;try{if(En.transition=null,Fe=1,t)return t()}finally{Fe=r,En.transition=n,Ae=e,!(Ae&6)&&Gr()}}function Ru(){cn=zo.current,nt(zo)}function so(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,A0(n)),bt!==null)for(n=bt.return;n!==null;){var r=n;switch(lu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ia();break;case 3:Xo(),nt(on),nt(Mt),vu();break;case 5:gu(r);break;case 4:Xo();break;case 13:nt(at);break;case 19:nt(at);break;case 10:fu(r.type._context);break;case 22:case 23:Ru()}n=n.return}if(Tt=t,bt=t=Ur(t.current,null),Nt=cn=e,Et=0,Zs=null,ku=$a=fo=0,tn=Ns=null,ro!==null){for(e=0;e<ro.length;e++)if(n=ro[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}ro=null}return t}function $p(t,e){do{var n=bt;try{if(du(),Gi.current=ma,pa){for(var r=lt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}pa=!1}if(uo=0,Rt=_t=lt=null,Ts=!1,Ys=0,Eu.current=null,n===null||n.return===null){Et=1,Zs=e,bt=null;break}e:{var s=t,i=n.return,l=n,c=e;if(e=Nt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Ad(i);if(g!==null){g.flags&=-257,Od(g,i,l,s,e),g.mode&1&&Nd(s,u,e),e=g,c=u;var x=e.updateQueue;if(x===null){var b=new Set;b.add(c),e.updateQueue=b}else x.add(c);break e}else{if(!(e&1)){Nd(s,u,e),Tu();break e}c=Error(M(426))}}else if(ot&&l.mode&1){var _=Ad(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Od(_,i,l,s,e),cu(Zo(c,l));break e}}s=c=Zo(c,l),Et!==4&&(Et=2),Ns===null?Ns=[s]:Ns.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=vp(s,c,e);kd(s,p);break e;case 1:l=c;var m=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Mr===null||!Mr.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=yp(s,l,e);kd(s,w);break e}}s=s.return}while(s!==null)}Ip(n)}catch(k){e=k,bt===n&&n!==null&&(bt=n=n.return);continue}break}while(!0)}function Pp(){var t=ga.current;return ga.current=ma,t===null?ma:t}function Tu(){(Et===0||Et===3||Et===2)&&(Et=4),Tt===null||!(fo&268435455)&&!($a&268435455)||Tr(Tt,Nt)}function xa(t,e){var n=Ae;Ae|=2;var r=Pp();(Tt!==t||Nt!==e)&&(sr=null,so(t,e));do try{rv();break}catch(o){$p(t,o)}while(!0);if(du(),Ae=n,ga.current=r,bt!==null)throw Error(M(261));return Tt=null,Nt=0,Et}function rv(){for(;bt!==null;)Lp(bt)}function ov(){for(;bt!==null&&!Tg();)Lp(bt)}function Lp(t){var e=Bp(t.alternate,t,cn);t.memoizedProps=t.pendingProps,e===null?Ip(t):bt=e,Eu.current=null}function Ip(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Q0(n,e),n!==null){n.flags&=32767,bt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,bt=null;return}}else if(n=Y0(n,e,cn),n!==null){bt=n;return}if(e=e.sibling,e!==null){bt=e;return}bt=e=t}while(e!==null);Et===0&&(Et=5)}function Zr(t,e,n){var r=Fe,o=En.transition;try{En.transition=null,Fe=1,sv(t,e,n,r)}finally{En.transition=o,Fe=r}return null}function sv(t,e,n,r){do Ho();while(Ar!==null);if(Ae&6)throw Error(M(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Bg(t,s),t===Tt&&(bt=Tt=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ri||(Ri=!0,Up(ea,function(){return Ho(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=En.transition,En.transition=null;var i=Fe;Fe=1;var l=Ae;Ae|=4,Eu.current=null,Z0(t,n),Np(n,t),k0(tc),na=!!ec,tc=ec=null,t.current=n,ev(n),Dg(),Ae=l,Fe=i,En.transition=s}else t.current=n;if(Ri&&(Ri=!1,Ar=t,ya=o),s=t.pendingLanes,s===0&&(Mr=null),Og(n.stateNode),an(t,vt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(va)throw va=!1,t=wc,wc=null,t;return ya&1&&t.tag!==0&&Ho(),s=t.pendingLanes,s&1?t===Sc?As++:(As=0,Sc=t):As=0,Gr(),null}function Ho(){if(Ar!==null){var t=vh(ya),e=En.transition,n=Fe;try{if(En.transition=null,Fe=16>t?16:t,Ar===null)var r=!1;else{if(t=Ar,Ar=null,ya=0,Ae&6)throw Error(M(331));var o=Ae;for(Ae|=4,Q=t.current;Q!==null;){var s=Q,i=s.child;if(Q.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Q=u;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:Ds(8,d,s)}var h=d.child;if(h!==null)h.return=d,Q=h;else for(;Q!==null;){d=Q;var f=d.sibling,g=d.return;if(Rp(d),d===u){Q=null;break}if(f!==null){f.return=g,Q=f;break}Q=g}}}var x=s.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var _=b.sibling;b.sibling=null,b=_}while(b!==null)}}Q=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,Q=i;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ds(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,Q=p;break e}Q=s.return}}var m=t.current;for(Q=m;Q!==null;){i=Q;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,Q=v;else e:for(i=m;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Oa(9,l)}}catch(k){ft(l,l.return,k)}if(l===i){Q=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Q=w;break e}Q=l.return}}if(Ae=o,Gr(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(ka,t)}catch{}r=!0}return r}finally{Fe=n,En.transition=e}}return!1}function qd(t,e,n){e=Zo(n,e),e=vp(t,e,1),t=Ir(t,e,1),e=qt(),t!==null&&(ri(t,1,e),an(t,e))}function ft(t,e,n){if(t.tag===3)qd(t,t,n);else for(;e!==null;){if(e.tag===3){qd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mr===null||!Mr.has(r))){t=Zo(n,t),t=yp(e,t,1),e=Ir(e,t,1),t=qt(),e!==null&&(ri(e,1,t),an(e,t));break}}e=e.return}}function iv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(Nt&n)===n&&(Et===4||Et===3&&(Nt&130023424)===Nt&&500>vt()-Cu?so(t,0):ku|=n),an(t,e)}function Mp(t,e){e===0&&(t.mode&1?(e=yi,yi<<=1,!(yi&130023424)&&(yi=4194304)):e=1);var n=qt();t=pr(t,e),t!==null&&(ri(t,e,n),an(t,n))}function av(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Mp(t,n)}function lv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),Mp(t,n)}var Bp;Bp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||on.current)rn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return rn=!1,K0(t,e,n);rn=!!(t.flags&131072)}else rn=!1,ot&&e.flags&1048576&&Vh(e,ca,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hi(t,e),t=e.pendingProps;var o=Ko(e,Mt.current);qo(e,n),o=xu(null,e,r,t,o,n);var s=bu();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sn(r)?(s=!0,aa(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,pu(e),o.updater=Aa,e.stateNode=o,o._reactInternals=e,uc(e,r,t,n),e=hc(null,e,r,!0,s,n)):(e.tag=0,ot&&s&&au(e),Vt(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Hi(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=uv(r),t=Pn(r,t),o){case 0:e=fc(null,e,r,t,n);break e;case 1:e=Ld(null,e,r,t,n);break e;case 11:e=$d(null,e,r,t,n);break e;case 14:e=Pd(null,e,r,Pn(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Pn(r,o),fc(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Pn(r,o),Ld(t,e,r,o,n);case 3:e:{if(Sp(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,o=s.element,Kh(t,e),fa(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Zo(Error(M(423)),e),e=Id(t,e,r,n,o);break e}else if(r!==o){o=Zo(Error(M(424)),e),e=Id(t,e,r,n,o);break e}else for(un=Lr(e.stateNode.containerInfo.firstChild),dn=e,ot=!0,Mn=null,n=Hh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yo(),r===o){e=mr(t,e,n);break e}Vt(t,e,r,n)}e=e.child}return e;case 5:return Yh(e),t===null&&ac(e),r=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,i=o.children,nc(r,o)?i=null:s!==null&&nc(r,s)&&(e.flags|=32),wp(t,e),Vt(t,e,i,n),e.child;case 6:return t===null&&ac(e),null;case 13:return _p(t,e,n);case 4:return mu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Qo(e,null,r,n):Vt(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Pn(r,o),$d(t,e,r,o,n);case 7:return Vt(t,e,e.pendingProps,n),e.child;case 8:return Vt(t,e,e.pendingProps.children,n),e.child;case 12:return Vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,s=e.memoizedProps,i=o.value,Xe(ua,r._currentValue),r._currentValue=i,s!==null)if(Vn(s.value,i)){if(s.children===o.children&&!on.current){e=mr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=dr(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),lc(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(M(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),lc(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Vt(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,qo(e,n),o=Cn(o),r=r(o),e.flags|=1,Vt(t,e,r,n),e.child;case 14:return r=e.type,o=Pn(r,e.pendingProps),o=Pn(r.type,o),Pd(t,e,r,o,n);case 15:return xp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Pn(r,o),Hi(t,e),e.tag=1,sn(r)?(t=!0,aa(e)):t=!1,qo(e,n),gp(e,r,o),uc(e,r,o,n),hc(null,e,r,!0,t,n);case 19:return Ep(t,e,n);case 22:return bp(t,e,n)}throw Error(M(156,e.tag))};function Up(t,e){return hh(t,e)}function cv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,e,n,r){return new cv(t,e,n,r)}function Du(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uv(t){if(typeof t=="function")return Du(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kc)return 11;if(t===Yc)return 14}return 2}function Ur(t,e){var n=t.alternate;return n===null?(n=_n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yi(t,e,n,r,o,s){var i=2;if(r=t,typeof t=="function")Du(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case No:return io(n.children,o,s,e);case Jc:i=8,o|=8;break;case $l:return t=_n(12,n,e,o|2),t.elementType=$l,t.lanes=s,t;case Pl:return t=_n(13,n,e,o),t.elementType=Pl,t.lanes=s,t;case Ll:return t=_n(19,n,e,o),t.elementType=Ll,t.lanes=s,t;case Yf:return Pa(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jf:i=10;break e;case Kf:i=9;break e;case Kc:i=11;break e;case Yc:i=14;break e;case Cr:i=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=_n(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function io(t,e,n,r){return t=_n(7,t,r,e),t.lanes=n,t}function Pa(t,e,n,r){return t=_n(22,t,r,e),t.elementType=Yf,t.lanes=n,t.stateNode={isHidden:!1},t}function vl(t,e,n){return t=_n(6,t,null,e),t.lanes=n,t}function yl(t,e,n){return e=_n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dv(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xa(0),this.expirationTimes=Xa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xa(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Nu(t,e,n,r,o,s,i,l,c){return t=new dv(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=_n(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pu(s),t}function fv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Do,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function zp(t){if(!t)return Fr;t=t._reactInternals;e:{if(xo(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(sn(n))return zh(t,n,e)}return e}function Fp(t,e,n,r,o,s,i,l,c){return t=Nu(n,r,!0,t,o,s,i,l,c),t.context=zp(null),n=t.current,r=qt(),o=Br(n),s=dr(r,o),s.callback=e??null,Ir(n,s,o),t.current.lanes=o,ri(t,o,r),an(t,r),t}function La(t,e,n,r){var o=e.current,s=qt(),i=Br(o);return n=zp(n),e.context===null?e.context=n:e.pendingContext=n,e=dr(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ir(o,e,i),t!==null&&(zn(t,o,i,s),Wi(t,o,i)),i}function ba(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Au(t,e){Hd(t,e),(t=t.alternate)&&Hd(t,e)}function hv(){return null}var Vp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ou(t){this._internalRoot=t}Ia.prototype.render=Ou.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));La(t,e,null,null)};Ia.prototype.unmount=Ou.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ho(function(){La(null,t,null,null)}),e[hr]=null}};function Ia(t){this._internalRoot=t}Ia.prototype.unstable_scheduleHydration=function(t){if(t){var e=bh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rr.length&&e!==0&&e<Rr[n].priority;n++);Rr.splice(n,0,t),n===0&&Sh(t)}};function $u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ma(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jd(){}function pv(t,e,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var u=ba(i);s.call(u)}}var i=Fp(e,r,t,0,null,!1,!1,"",Jd);return t._reactRootContainer=i,t[hr]=i.current,Gs(t.nodeType===8?t.parentNode:t),ho(),i}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var u=ba(c);l.call(u)}}var c=Nu(t,0,!1,null,null,!1,!1,"",Jd);return t._reactRootContainer=c,t[hr]=c.current,Gs(t.nodeType===8?t.parentNode:t),ho(function(){La(e,c,n,r)}),c}function Ba(t,e,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var l=o;o=function(){var c=ba(i);l.call(c)}}La(e,i,t,o)}else i=pv(n,e,t,o,r);return ba(i)}yh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ws(e.pendingLanes);n!==0&&(Zc(e,n|1),an(e,vt()),!(Ae&6)&&(es=vt()+500,Gr()))}break;case 13:ho(function(){var r=pr(t,1);if(r!==null){var o=qt();zn(r,t,1,o)}}),Au(t,1)}};eu=function(t){if(t.tag===13){var e=pr(t,134217728);if(e!==null){var n=qt();zn(e,t,134217728,n)}Au(t,134217728)}};xh=function(t){if(t.tag===13){var e=Br(t),n=pr(t,e);if(n!==null){var r=qt();zn(n,t,e,r)}Au(t,e)}};bh=function(){return Fe};wh=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};ql=function(t,e,n){switch(e){case"input":if(Bl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=Ta(r);if(!o)throw Error(M(90));Xf(r),Bl(r,o)}}}break;case"textarea":eh(t,n);break;case"select":e=n.value,e!=null&&Fo(t,!!n.multiple,e,!1)}};ah=ju;lh=ho;var mv={usingClientEntryPoint:!1,Events:[si,Po,Ta,sh,ih,ju]},vs={findFiberByHostInstance:no,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gv={bundleType:vs.bundleType,version:vs.version,rendererPackageName:vs.rendererPackageName,rendererConfig:vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=dh(t),t===null?null:t.stateNode},findFiberByHostInstance:vs.findFiberByHostInstance||hv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ti=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ti.isDisabled&&Ti.supportsFiber)try{ka=Ti.inject(gv),Zn=Ti}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mv;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$u(e))throw Error(M(200));return fv(t,e,null,n)};hn.createRoot=function(t,e){if(!$u(t))throw Error(M(299));var n=!1,r="",o=Vp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Nu(t,1,!1,null,null,n,!1,r,o),t[hr]=e.current,Gs(t.nodeType===8?t.parentNode:t),new Ou(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=dh(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return ho(t)};hn.hydrate=function(t,e,n){if(!Ma(e))throw Error(M(200));return Ba(null,t,e,!0,n)};hn.hydrateRoot=function(t,e,n){if(!$u(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=Vp;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=Fp(e,null,t,1,n??null,o,!1,s,i),t[hr]=e.current,Gs(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Ia(e)};hn.render=function(t,e,n){if(!Ma(e))throw Error(M(200));return Ba(null,t,e,!1,n)};hn.unmountComponentAtNode=function(t){if(!Ma(t))throw Error(M(40));return t._reactRootContainer?(ho(function(){Ba(null,null,t,!1,function(){t._reactRootContainer=null,t[hr]=null})}),!0):!1};hn.unstable_batchedUpdates=ju;hn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ma(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return Ba(t,e,n,!1,r)};hn.version="18.3.1-next-f1338f8080-20240426";function Wp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wp)}catch(t){console.error(t)}}Wp(),Wf.exports=hn;var vv=Wf.exports,Kd=vv;Al.createRoot=Kd.createRoot,Al.hydrateRoot=Kd.hydrateRoot;const yv="modulepreload",xv=function(t){return"/"+t},Yd={},ai=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(c=>{if(c=xv(c),c in Yd)return;Yd[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":yv,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},bv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ai(async()=>{const{default:r}=await Promise.resolve().then(()=>ss);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Pu extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class wv extends Pu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Qd extends Pu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Xd extends Pu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var kc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(kc||(kc={}));var Sv=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?s(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class _v{constructor(e,{headers:n={},customFetch:r,region:o=kc.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=bv(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Sv(this,void 0,void 0,function*(){try{const{headers:o,method:s,body:i}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const h=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),o),body:d}).catch(b=>{throw new wv(b)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Qd(h);if(!h.ok)throw new Xd(h);let g=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return g==="application/json"?x=yield h.json():g==="application/octet-stream"?x=yield h.blob():g==="text/event-stream"?x=h:g==="multipart/form-data"?x=yield h.formData():x=yield h.text(),{data:x,error:null,response:h}}catch(o){return{data:null,error:o,response:o instanceof Xd||o instanceof Qd?o.context:void 0}}})}}var nn={},Lu={},Ua={},li={},za={},Fa={},Ev=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ts=Ev();const kv=ts.fetch,Gp=ts.fetch.bind(ts),qp=ts.Headers,Cv=ts.Request,jv=ts.Response,ss=Object.freeze(Object.defineProperty({__proto__:null,Headers:qp,Request:Cv,Response:jv,default:Gp,fetch:kv},Symbol.toStringTag,{value:"Module"})),Rv=Gm(ss);var Va={};Object.defineProperty(Va,"__esModule",{value:!0});let Tv=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Va.default=Tv;var Hp=kn&&kn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fa,"__esModule",{value:!0});const Dv=Hp(Rv),Nv=Hp(Va);let Av=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Dv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let o=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var i,l,c,u;let d=null,h=null,f=null,g=s.status,x=s.statusText;if(s.ok){if(this.method!=="HEAD"){const m=await s.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?h=m:h=JSON.parse(m))}const _=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),p=(c=s.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");_&&p&&p.length>1&&(f=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,g=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const _=await s.text();try{d=JSON.parse(_),Array.isArray(d)&&s.status===404&&(h=[],d=null,g=200,x="OK")}catch{s.status===404&&_===""?(g=204,x="No Content"):d={message:_}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,g=200,x="OK"),d&&this.shouldThrowOnError)throw new Nv.default(d)}return{error:d,data:h,count:f,status:g,statusText:x}});return this.shouldThrowOnError||(o=o.catch(s=>{var i,l,c;return{error:{message:`${(i=s==null?void 0:s.name)!==null&&i!==void 0?i:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}};Fa.default=Av;var Ov=kn&&kn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(za,"__esModule",{value:!0});const $v=Ov(Fa);let Pv=class extends $v.default{select(e){let n=!1;const r=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:o,referencedTable:s=o}={}){const i=s?`${s}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:o=r}={}){const s=typeof o>"u"?"offset":`${o}.offset`,i=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:o=!1,wal:s=!1,format:i="text"}={}){var l;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,o?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};za.default=Pv;var Lv=kn&&kn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(li,"__esModule",{value:!0});const Iv=Lv(za);let Mv=class extends Iv.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:o}={}){let s="";o==="plain"?s="pl":o==="phrase"?s="ph":o==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};li.default=Mv;var Bv=kn&&kn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ua,"__esModule",{value:!0});const ys=Bv(li);let Uv=class{constructor(e,{headers:n={},schema:r,fetch:o}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=o}select(e,{head:n=!1,count:r}={}){const o=n?"HEAD":"GET";let s=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new ys.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var o;const s="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ys.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:o,defaultToNull:s=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),o&&this.headers.append("Prefer",`count=${o}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ys.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:n}={}){var r;const o="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new ys.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new ys.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Ua.default=Uv;var Jp=kn&&kn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lu,"__esModule",{value:!0});const zv=Jp(Ua),Fv=Jp(li);let Vv=class Kp{constructor(e,{headers:n={},schema:r,fetch:o}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=o}from(e){const n=new URL(`${this.url}/${e}`);return new zv.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Kp(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:o=!1,count:s}={}){var i;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;r||o?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=n);const d=new Headers(this.headers);return s&&d.set("Prefer",`count=${s}`),new Fv.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};Lu.default=Vv;var is=kn&&kn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nn,"__esModule",{value:!0});nn.PostgrestError=nn.PostgrestBuilder=nn.PostgrestTransformBuilder=nn.PostgrestFilterBuilder=nn.PostgrestQueryBuilder=nn.PostgrestClient=void 0;const Yp=is(Lu);nn.PostgrestClient=Yp.default;const Qp=is(Ua);nn.PostgrestQueryBuilder=Qp.default;const Xp=is(li);nn.PostgrestFilterBuilder=Xp.default;const Zp=is(za);nn.PostgrestTransformBuilder=Zp.default;const em=is(Fa);nn.PostgrestBuilder=em.default;const tm=is(Va);nn.PostgrestError=tm.default;var Wv=nn.default={PostgrestClient:Yp.default,PostgrestQueryBuilder:Qp.default,PostgrestFilterBuilder:Xp.default,PostgrestTransformBuilder:Zp.default,PostgrestBuilder:em.default,PostgrestError:tm.default};const{PostgrestClient:Gv,PostgrestQueryBuilder:lw,PostgrestFilterBuilder:cw,PostgrestTransformBuilder:uw,PostgrestBuilder:dw,PostgrestError:fw}=Wv;class qv{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Hv="2.15.5",Jv=`realtime-js/${Hv}`,Kv="1.0.0",Cc=1e4,Yv=1e3,Qv=100;var Os;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Os||(Os={}));var wt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(wt||(wt={}));var In;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(In||(In={}));var jc;(function(t){t.websocket="websocket"})(jc||(jc={}));var to;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(to||(to={}));class Xv{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const o=n.getUint8(1),s=n.getUint8(2);let i=this.HEADER_LENGTH+2;const l=r.decode(e.slice(i,i+o));i=i+o;const c=r.decode(e.slice(i,i+s));i=i+s;const u=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class nm{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ye;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ye||(Ye={}));const Zd=(t,e,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,i)=>(s[i]=Zv(i,t,e,o),s),{})},Zv=(t,e,n,r)=>{const o=e.find(l=>l.name===t),s=o==null?void 0:o.type,i=n[t];return s&&!r.includes(s)?rm(s,i):Rc(i)},rm=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return ry(e,n)}switch(t){case Ye.bool:return ey(e);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return ty(e);case Ye.json:case Ye.jsonb:return ny(e);case Ye.timestamp:return oy(e);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return Rc(e);default:return Rc(e)}},Rc=t=>t,ey=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ty=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ny=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},ry=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const i=t.slice(1,n);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(l=>rm(e,l))}return t},oy=t=>typeof t=="string"?t.replace(" ","T"):t,om=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class xl{constructor(e,n,r={},o=Cc){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ef;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ef||(ef={}));class $s{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:s,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$s.syncState(this.state,o,s,i),this.pendingDiffs.forEach(c=>{this.state=$s.syncDiff(this.state,c,s,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},o=>{const{onJoin:s,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=$s.syncDiff(this.state,o,s,i),l())}),this.onJoin((o,s,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:s,newPresences:i})}),this.onLeave((o,s,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:s,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){const s=this.cloneDeep(e),i=this.transformState(n),l={},c={};return this.map(s,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const h=s[u];if(h){const f=d.map(_=>_.presence_ref),g=h.map(_=>_.presence_ref),x=d.filter(_=>g.indexOf(_.presence_ref)<0),b=h.filter(_=>f.indexOf(_.presence_ref)<0);x.length>0&&(l[u]=x),b.length>0&&(c[u]=b)}else l[u]=d}),this.syncDiff(s,{joins:l,leaves:c},r,o)}static syncDiff(e,n,r,o){const{joins:s,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(s,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(g=>g.presence_ref),f=d.filter(g=>h.indexOf(g.presence_ref)<0);e[l].unshift(...f)}r(l,d,c)}),this.map(i,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,o(l,u,c),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const o=e[r];return"metas"in o?n[r]=o.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tf;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(tf||(tf={}));var Ps;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ps||(Ps={}));var ir;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ir||(ir={}));class Iu{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new xl(this,In.join,this.params,this.timeout),this.rejoinTimer=new nm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(In.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new $s(this),this.broadcastEndpointURL=om(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,o,s;if(this.socket.isConnected()||this.socket.connect(),this.state==wt.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,u=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&o!==void 0?o:[],d=!!this.bindings[Ps.PRESENCE]&&this.bindings[Ps.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(ir.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(ir.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var x;if(this.socket.setAuth(),g===void 0){e==null||e(ir.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,_=(x=b==null?void 0:b.length)!==null&&x!==void 0?x:0,p=[];for(let m=0;m<_;m++){const v=b[m],{filter:{event:w,schema:k,table:T,filter:D}}=v,S=g&&g[m];if(S&&S.event===w&&S.schema===k&&S.table===T&&S.filter===D)p.push(Object.assign(Object.assign({},v),{id:S.id}));else{this.unsubscribe(),this.state=wt.errored,e==null||e(ir.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(ir.SUBSCRIBED);return}}).receive("error",g=>{this.state=wt.errored,e==null||e(ir.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ir.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===wt.joined&&e===Ps.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=u.body)===null||o===void 0?void 0:o.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var i,l,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=wt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(In.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new xl(this,In.leave,{},e),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const o=new AbortController,s=setTimeout(()=>o.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(s),i}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new xl(this,e,n,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Qv){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,s;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=In;if(r&&[l,c,u,d].indexOf(i)>=0&&r!==this._joinRef())return;let f=this._onMessage(i,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(g=>{var x,b,_;return((x=g.filter)===null||x===void 0?void 0:x.event)==="*"||((_=(b=g.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===i}).map(g=>g.callback(f,r)):(s=this.bindings[i])===null||s===void 0||s.filter(g=>{var x,b,_,p,m,v;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in g){const w=g.id,k=(x=g.filter)===null||x===void 0?void 0:x.event;return w&&((b=n.ids)===null||b===void 0?void 0:b.includes(w))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const w=(m=(p=g==null?void 0:g.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return w==="*"||w===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===i}).map(g=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:b,table:_,commit_timestamp:p,type:m,errors:v}=x;f=Object.assign(Object.assign({},{schema:b,table:_,commit_timestamp:p,eventType:m,new:{},old:{},errors:v}),this._getPayloadRecords(x))}g.callback(f,r)})}_isClosed(){return this.state===wt.closed}_isJoined(){return this.state===wt.joined}_isJoining(){return this.state===wt.joining}_isLeaving(){return this.state===wt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const o=e.toLocaleLowerCase(),s={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(s):this.bindings[o]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var s;return!(((s=o.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Iu.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(In.close,{},e)}_onError(e){this._on(In.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Zd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Zd(e.columns,e.old_record)),n}}const bl=()=>{},Di={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sy=[1e3,2e3,5e3,1e4],iy=1e4,ay=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ly{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Cc,this.transport=null,this.heartbeatIntervalMs=Di.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bl,this.ref=0,this.reconnectTimer=null,this.logger=bl,this.conn=null,this.sendBuffer=[],this.serializer=new Xv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...i)=>ai(async()=>{const{default:l}=await Promise.resolve().then(()=>ss);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...i)=>s(...i)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${jc.websocket}`,this.httpEndpoint=om(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=qv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Kv}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Os.connecting:return to.Connecting;case Os.open:return to.Open;case Os.closing:return to.Closing;default:return to.Closed}}isConnected(){return this.connectionState()===to.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(s=>s.topic===r);if(o)return o;{const s=new Iu(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:o,ref:s}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${s})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Yv,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Di.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:s,ref:i}=n,l=i?`(${i})`:"",c=s.status||"";this.log("receive",`${c} ${r} ${o} ${l}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(o,s,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(In.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${r}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([ay],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const o={access_token:n,version:Jv};n&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(In.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new nm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Di.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,o,s,i,l,c,u,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Cc,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:Di.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:bl,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>sy[h-1]||iy,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Mu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function St(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class cy extends Mu{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tc extends Mu{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var uy=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?s(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const sm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ai(async()=>{const{default:r}=await Promise.resolve().then(()=>ss);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},dy=()=>uy(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ai(()=>Promise.resolve().then(()=>ss),void 0)).Response:Response}),Dc=t=>{if(Array.isArray(t))return t.map(n=>Dc(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[o]=Dc(r)}),e},fy=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var bo=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?s(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const wl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),hy=(t,e,n)=>bo(void 0,void 0,void 0,function*(){const r=yield dy();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{const s=t.status||500,i=(o==null?void 0:o.statusCode)||s+"";e(new cy(wl(o),s,i))}).catch(o=>{e(new Tc(wl(o),o))}):e(new Tc(wl(t),t))}),py=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?o:(fy(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function ci(t,e,n,r,o,s){return bo(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(n,py(e,r,o,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>hy(c,l,r))})})}function wa(t,e,n,r){return bo(this,void 0,void 0,function*(){return ci(t,"GET",e,n,r)})}function Yn(t,e,n,r,o){return bo(this,void 0,void 0,function*(){return ci(t,"POST",e,r,o,n)})}function Nc(t,e,n,r,o){return bo(this,void 0,void 0,function*(){return ci(t,"PUT",e,r,o,n)})}function my(t,e,n,r){return bo(this,void 0,void 0,function*(){return ci(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function im(t,e,n,r,o){return bo(this,void 0,void 0,function*(){return ci(t,"DELETE",e,r,o,n)})}var zt=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?s(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const gy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},nf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vy{constructor(e,n={},r,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=sm(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,o){return zt(this,void 0,void 0,function*(){try{let s;const i=Object.assign(Object.assign({},nf),o);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),o!=null&&o.headers&&(l=Object.assign(Object.assign({},l),o.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(e=="PUT"?Nc:Yn)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(St(s))return{data:null,error:s};throw s}})}upload(e,n,r){return zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return zt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:nf.upsert},o),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Nc(this.fetch,l.toString(),c,{headers:d});return{data:{path:s,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(St(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return zt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const s=yield Yn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+s.url),l=i.searchParams.get("token");if(!l)throw new Mu("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}update(e,n,r){return zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return zt(this,void 0,void 0,function*(){try{return{data:yield Yn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(St(o))return{data:null,error:o};throw o}})}copy(e,n,r){return zt(this,void 0,void 0,function*(){try{return{data:{path:(yield Yn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(St(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return zt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),s=yield Yn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(St(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return zt(this,void 0,void 0,function*(){try{const o=yield Yn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${s}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(St(o))return{data:null,error:o};throw o}})}download(e,n){return zt(this,void 0,void 0,function*(){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=s?`?${s}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield wa(this.fetch,`${this.url}/${o}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(St(l))return{data:null,error:l};throw l}})}info(e){return zt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield wa(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Dc(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}exists(e){return zt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield my(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r)&&r instanceof Tc){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),o=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&o.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&o.push(c);let u=o.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return zt(this,void 0,void 0,function*(){try{return{data:yield im(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}list(e,n,r){return zt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},gy),n),{prefix:e||""});return{data:yield Yn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(St(o))return{data:null,error:o};throw o}})}listV2(e,n){return zt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Yn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const yy="2.12.1",xy={"X-Client-Info":`storage-js/${yy}`};var So=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?s(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class by{constructor(e,n={},r,o){this.shouldThrowOnError=!1;const s=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},xy),n),this.fetch=sm(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return So(this,void 0,void 0,function*(){try{return{data:yield wa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(St(e))return{data:null,error:e};throw e}})}getBucket(e){return So(this,void 0,void 0,function*(){try{return{data:yield wa(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return So(this,void 0,void 0,function*(){try{return{data:yield Yn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return So(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}emptyBucket(e){return So(this,void 0,void 0,function*(){try{return{data:yield Yn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}deleteBucket(e){return So(this,void 0,void 0,function*(){try{return{data:yield im(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}}class wy extends by{constructor(e,n={},r,o){super(e,n,r,o)}from(e){return new vy(this.url,this.headers,e,this.fetch)}}const Sy="2.57.4";let _s="";typeof Deno<"u"?_s="deno":typeof document<"u"?_s="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_s="react-native":_s="node";const _y={"X-Client-Info":`supabase-js-${_s}/${Sy}`},Ey={headers:_y},ky={schema:"public"},Cy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jy={};var Ry=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?s(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Ty=t=>{let e;return t?e=t:typeof fetch>"u"?e=Gp:e=fetch,(...n)=>e(...n)},Dy=()=>typeof Headers>"u"?qp:Headers,Ny=(t,e,n)=>{const r=Ty(n),o=Dy();return(s,i)=>Ry(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new o(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},i),{headers:u}))})};var Ay=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?s(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};function Oy(t){return t.endsWith("/")?t:t+"/"}function $y(t,e){var n,r;const{db:o,auth:s,realtime:i,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},c),o),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Ay(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function Py(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Oy(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const am="2.71.1",jo=30*1e3,Ac=3,Sl=Ac*jo,Ly="http://localhost:9999",Iy="supabase.auth.token",My={"X-Client-Info":`gotrue-js/${am}`},Oc="X-Supabase-Api-Version",lm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},By=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Uy=10*60*1e3;class Bu extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function we(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class zy extends Bu{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Fy(t){return we(t)&&t.name==="AuthApiError"}class cm extends Bu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class qr extends Bu{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}}class kr extends qr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Vy(t){return we(t)&&t.name==="AuthSessionMissingError"}class Ni extends qr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ai extends qr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Oi extends qr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Wy(t){return we(t)&&t.name==="AuthImplicitGrantRedirectError"}class rf extends qr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $c extends qr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function _l(t){return we(t)&&t.name==="AuthRetryableFetchError"}class of extends qr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Pc extends qr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Sa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sf=` 	
\r=`.split(""),Gy=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<sf.length;e+=1)t[sf[e].charCodeAt(0)]=-2;for(let e=0;e<Sa.length;e+=1)t[Sa[e].charCodeAt(0)]=e;return t})();function af(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Sa[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Sa[r]),e.queuedBits-=6}}function um(t,e,n){const r=Gy[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function lf(t){const e=[],n=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},s=i=>{Jy(i,r,n)};for(let i=0;i<t.length;i+=1)um(t.charCodeAt(i),o,s);return e.join("")}function qy(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Hy(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}qy(r,e)}}function Jy(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ky(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)um(t.charCodeAt(o),n,r);return new Uint8Array(e)}function Yy(t){const e=[];return Hy(t,n=>e.push(n)),new Uint8Array(e)}function Qy(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};return t.forEach(o=>af(o,n,r)),af(null,n,r),e.join("")}function Xy(t){return Math.round(Date.now()/1e3)+t}function Zy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const $n=()=>typeof window<"u"&&typeof document<"u",Kr={tested:!1,writable:!1},dm=()=>{if(!$n())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kr.tested)return Kr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Kr.tested=!0,Kr.writable=!0}catch{Kr.tested=!0,Kr.writable=!1}return Kr.writable};function ex(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,s)=>{e[s]=o})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}const fm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ai(async()=>{const{default:r}=await Promise.resolve().then(()=>ss);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},tx=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ro=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Yr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},_r=async(t,e)=>{await t.removeItem(e)};class Wa{constructor(){this.promise=new Wa.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Wa.promiseConstructor=Promise;function El(t){const e=t.split(".");if(e.length!==3)throw new Pc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!By.test(e[r]))throw new Pc("JWT not in base64url format");return{header:JSON.parse(lf(e[0])),payload:JSON.parse(lf(e[1])),signature:Ky(e[2]),raw:{header:e[0],payload:e[1]}}}async function nx(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function rx(t,e){return new Promise((r,o)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await t(s);if(!e(s,null,i)){r(i);return}}catch(i){if(!e(s,i)){o(i);return}}})()})}function ox(t){return("0"+t.toString(16)).substr(-2)}function sx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let s=0;s<56;s++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,ox).join("")}async function ix(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(s=>String.fromCharCode(s)).join("")}async function ax(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await ix(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _o(t,e,n=!1){const r=sx();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await Ro(t,`${e}-code-verifier`,o);const s=await ax(r);return[s,r===s?"plain":"s256"]}const lx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cx(t){const e=t.headers.get(Oc);if(!e||!e.match(lx))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ux(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function dx(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const fx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Eo(t){if(!fx.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kl(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cf(t){return JSON.parse(JSON.stringify(t))}var hx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const eo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),px=[502,503,504];async function uf(t){var e;if(!tx(t))throw new $c(eo(t),0);if(px.includes(t.status))throw new $c(eo(t),t.status);let n;try{n=await t.json()}catch(s){throw new cm(eo(s),s)}let r;const o=cx(t);if(o&&o.getTime()>=lm["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new of(eo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new kr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0))throw new of(eo(n),t.status,n.weak_password.reasons);throw new zy(eo(n),t.status||500,r)}const mx=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function Ce(t,e,n,r){var o;const s=Object.assign({},r==null?void 0:r.headers);s[Oc]||(s[Oc]=lm["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const i=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await gx(t,e,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function gx(t,e,n,r,o,s){const i=mx(e,r,o,s);let l;try{l=await t(n,Object.assign({},i))}catch(c){throw console.error(c),new $c(eo(c),0)}if(l.ok||await uf(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await uf(c)}}function or(t){var e;let n=null;bx(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Xy(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function df(t){const e=or(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Dr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function vx(t){return{data:t,error:null}}function yx(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s}=t,i=hx(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function xx(t){return t}function bx(t){return t.access_token&&t.refresh_token&&t.expires_in}const Cl=["global","local","others"];var wx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};class Sx{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=fm(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Cl[0]){if(Cl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cl.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Dr})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=wx(e,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:yx,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(we(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Dr})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,o,s,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:xx});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(x=>{const b=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(x.split(";")[1].split("=")[1]);u[`${_}Page`]=b}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(we(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Eo(e);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Dr})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Eo(e);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Dr})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Eo(e);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Dr})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Eo(e.userId);try{const{data:n,error:r}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(we(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Eo(e.userId),Eo(e.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}}function ff(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function _x(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ko={debug:!!(globalThis&&dm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ex extends hm{}async function kx(t,e,n){ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ko.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Ex(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ko.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}_x();const Cx={url:Ly,storageKey:Iy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:My,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hf(t,e,n){return await n()}const Co={};class ei{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ei.nextInstanceID,ei.nextInstanceID+=1,this.instanceID>0&&$n()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Cx),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Sx({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=fm(o.fetch),this.lock=o.lock||hf,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:$n()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=kx:this.lock=hf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:dm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ff(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=ff(this.memoryStorage)),$n()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Co[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Co[this.storageKey]=Object.assign(Object.assign({},Co[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Co[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Co[this.storageKey]=Object.assign(Object.assign({},Co[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${am}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=ex(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),$n()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Wy(s)){const c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return we(n)?{error:n}:{error:new cm("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,o;try{const s=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:or}),{data:i,error:l}=s;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(we(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,o;try{let s;if("email"in e){const{email:d,password:h,options:f}=e;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await _o(this.storage,this.storageKey)),s=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:x},xform:or})}else if("phone"in e){const{phone:d,password:h,options:f}=e;s=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(o=f==null?void 0:f.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:or})}else throw new Ai("You must provide either an email or phone number and a password");const{data:i,error:l}=s;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(we(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:i,options:l}=e;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:df})}else if("phone"in e){const{phone:s,password:i,options:l}=e;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:df})}else throw new Ai("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ni}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(we(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,o,s,i,l,c,u,d,h,f,g;let x,b;if("message"in e)x=e.message,b=e.signature;else{const{chain:_,wallet:p,statement:m,options:v}=e;let w;if($n())if(typeof p=="object")w=p;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))w=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=p}const k=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const T=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),m?{statement:m}:null));let D;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")D=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)D=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)x=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),b=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${k.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(o=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=v==null?void 0:v.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const T=await w.signMessage(new TextEncoder().encode(x),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=T}}try{const{data:_,error:p}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Qy(b)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:or});if(p)throw p;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Ni}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:p})}catch(_){if(we(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const n=await Yr(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/");try{const{data:s,error:i}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:or});if(await _r(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Ni}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:i})}catch(s){if(we(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:o,access_token:s,nonce:i}=e,l=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:or}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ni}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(we(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,o,s,i;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await _o(this.storage,this.storageKey));const{error:h}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=c==null?void 0:c.data)!==null&&o!==void 0?o:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ai("You must provide either an email or phone number.")}catch(l){if(we(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let o,s;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:or});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(we(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,r,o;try{let s=null,i=null;return this.flowType==="pkce"&&([s,i]=await _o(this.storage,this.storageKey)),await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:vx})}catch(s){if(we(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new kr;const{error:o}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(we(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:s}=e,{error:i}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:o,options:s}=e,{data:i,error:l}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Ai("You must provide either an email or phone number and a type")}catch(n){if(we(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Yr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Sl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const i=await Yr(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=kl()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Dr}):await this._useSession(async n=>{var r,o,s;const{data:i,error:l}=n;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kr}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:Dr})})}catch(n){if(we(n))return Vy(n)&&(await this._removeSession(),await _r(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:o,error:s}=r;if(s)throw s;if(!o.session)throw new kr;const i=o.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await _o(this.storage,this.storageKey));const{data:u,error:d}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Dr});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new kr;const n=Date.now()/1e3;let r=n,o=!0,s=null;const{payload:i}=El(e.access_token);if(i.exp&&(r=i.exp,o=r<=n),o){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(we(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:i,error:l}=n;if(l)throw l;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new kr;const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(we(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!$n())throw new Oi("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Oi(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new rf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Oi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new rf("No code detected.");const{data:m,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:s,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=e;if(!s||!l||!i||!u)throw new Oi("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const g=f-d;g*1e3<=jo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const x=f-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,d);const{data:b,error:_}=await this._getUser(s);if(_)throw _;const p={provider_token:r,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:i,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(r){if(we(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Yr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:s}=n;if(s)return{error:s};const i=(r=o.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(Fy(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await _r(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Zy(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,o;try{const{data:{session:s},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await _o(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(we(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:o}=await this._useSession(async s=>{var i,l,c,u,d;const{data:h,error:f}=s;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return $n()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(we(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,o;const{data:s,error:i}=n;if(i)throw i;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await rx(async o=>(o>0&&await nx(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:or})),(o,s)=>{const i=200*Math.pow(2,o);return s&&_l(s)&&Date.now()+i-r<jo})}catch(r){if(this._debug(n,"error",r),we(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),$n()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await Yr(this.storage,this.storageKey);if(o&&this.userStorage){let i=await Yr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:o.user},await Ro(this.userStorage,this.storageKey+"-user",i)),o.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:kl()}else if(o&&!o.user&&!o.user){const i=await Yr(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(o.user=i.user,await _r(this.storage,this.storageKey+"-user"),await Ro(this.storage,this.storageKey,o)):o.user=kl()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const s=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Sl;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Sl}s`),s){if(this.autoRefreshToken&&o.refresh_token){const{error:i}=await this._callRefreshToken(o.refresh_token);i&&(console.error(i),_l(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(o.access_token);!l&&(i!=null&&i.user)?(o.user=i.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new kr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Wa;const{data:s,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new kr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(o,"error",s),we(s)){const i={session:null,error:s};return _l(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){s.push(c)}});if(await Promise.all(i),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ro(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const s=cf(o);await Ro(this.storage,this.storageKey,s)}else{const o=cf(n);await Ro(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await _r(this.storage,this.storageKey),await _r(this.storage,this.storageKey+"-code-verifier"),await _r(this.storage,this.storageKey+"-user"),this.userStorage&&await _r(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&$n()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),jo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/jo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${jo}ms, refresh threshold is ${Ac} ticks`),o<=Ac&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof hm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$n()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,i]=await _o(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);o.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;return s?{data:null,error:s}:await Ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,o;const{data:s,error:i}=n;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((o=c==null?void 0:c.totp)===null||o===void 0)&&o.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;if(s)return{data:null,error:s};const{data:i,error:l}=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(n){if(we(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;return s?{data:null,error:s}:await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(we(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],o=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),s=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:o,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=El(o.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((r=(n=o.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+Uy>o)return r;const{data:s,error:i}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,r=s.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:x}=await this.getSession();if(x||!g.session)return{data:null,error:x};r=g.session.access_token}const{header:o,payload:s,signature:i,raw:{header:l,payload:c}}=El(r);n!=null&&n.allowExpired||ux(s.exp);const u=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:o,signature:i},error:null}}const d=dx(o.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,Yy(`${l}.${c}`)))throw new Pc("Invalid JWT signature");return{data:{claims:s,header:o,signature:i},error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}}ei.nextInstanceID=0;const jx=ei;class Rx extends jx{constructor(e){super(e)}}var Tx=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?s(d.value):o(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class Dx{constructor(e,n,r){var o,s,i;this.supabaseUrl=e,this.supabaseKey=n;const l=Py(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:ky,realtime:jy,auth:Object.assign(Object.assign({},Cy),{storageKey:c}),global:Ey},d=$y(r??{},u);this.storageKey=(o=d.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=Ny(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Gv(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new wy(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new _v(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Tx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:s,storageKey:i,flowType:l,lock:c,debug:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Rx({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:s,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new ly(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const pm=(t,e,n)=>new Dx(t,e,n);function Nx(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Nx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ax="https://wjylzxsfevdlhqunvfqc.supabase.co",Ox="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqeWx6eHNmZXZkbGhxdW52ZnFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2ODMwOTEsImV4cCI6MjA3NDI1OTA5MX0.SuB0gd7-gefwpUHFnKsupDgo8P2VeLuMbdlsU6AMrLw",Ve=pm(Ax,Ox,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}});function $x(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function ti(){const t="sg_tab_player_id";let e=sessionStorage.getItem(t);return e||(e=$x(),sessionStorage.setItem(t,e)),e}function po(t="Jogador"){const e="sg_tab_player_name";let n=sessionStorage.getItem(e);return n||(n=t,sessionStorage.setItem(e,n)),n}function Px(t){return sessionStorage.setItem("sg_tab_player_name",t??"Jogador"),t}const Lx="/dynamic-data-visualization-3d.jpg",Ix="/SalesGame_Logo-removebg-preview.png",Mx="/Multiplier-Copia.png",Bx="/WhatsApp_Image_2025-06-24_at_16.47.00-removebg-preview.png";function Ux({onEnter:t}){const[e,n]=E.useState(po("")),r=E.useRef(null);E.useEffect(()=>{var i;(i=r.current)==null||i.focus()},[]);function o(){const i=(e||"").trim();i&&(Px(i),t==null||t(i))}function s(i){i.key==="Enter"&&o()}return a.jsxs("div",{className:"start",children:[a.jsx("img",{className:"startBg",src:Lx,alt:""}),a.jsx("div",{className:"startShade"}),a.jsx("div",{className:"startHeader",children:a.jsx("img",{className:"startLogo",src:Ix,alt:"Sales GAME"})}),a.jsx("div",{className:"startCenter",children:a.jsxs("div",{className:"startCard",children:[a.jsx("label",{className:"startLabel",htmlFor:"playerName",children:"Nome do Jogador"}),a.jsx("input",{id:"playerName",ref:r,className:"startInput",placeholder:"Digite seu nome",value:e,onChange:i=>n(i.target.value),onKeyDown:s,maxLength:30}),a.jsx("button",{className:"startBtn",onClick:o,children:"Entrar"})]})}),a.jsxs("div",{className:"startFooter",children:[a.jsxs("div",{className:"startLinks",children:[a.jsx("div",{children:"@multiplier.educacao"}),a.jsx("div",{children:"https://multipliereducacao.com.br/"})]}),a.jsx("div",{className:"startBrand",children:a.jsx("img",{className:"startBrandLogo",src:Mx,alt:"Multiplier"})})]}),a.jsx("img",{className:"startCoach",src:Bx,alt:"",draggable:"false"})]})}async function zx(){const{data:t,error:e}=await Ve.from("lobbies").select(`
      id,
      name,
      max_players,
      status,
      created_at,
      lobby_players!left(count)
    `).order("created_at",{ascending:!0});if(e)throw e;return(t||[]).map(n=>{var r,o;return{id:n.id,name:n.name,max:n.max_players,status:n.status||"open",players:(((o=(r=n.lobby_players)==null?void 0:r[0])==null?void 0:o.count)??0)|0}})}function Fx(t){const e=Ve.channel("lobbies-list").on("postgres_changes",{event:"*",schema:"public",table:"lobbies"},()=>t==null?void 0:t()).on("postgres_changes",{event:"*",schema:"public",table:"lobby_players"},()=>t==null?void 0:t()).subscribe();return()=>Ve.removeChannel(e)}async function Vx({name:t,hostId:e,max:n=4}){if(!e)throw new Error("hostId obrigatrio em createLobby");const o={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,name:t,host_id:e,max_players:Number(n)||4,status:"open",created_at:new Date().toISOString()},{data:s,error:i}=await Ve.from("lobbies").insert(o).select("id").single();if(i)throw i;return s.id}async function Lc({lobbyId:t,playerId:e,playerName:n,ready:r=!1}){const{data:o,error:s}=await Ve.from("lobbies").select("id, max_players, status, host_id").eq("id",t).single();if(s)throw s;if(o.status!=="open")throw new Error("Sala fechada.");const{count:i,error:l}=await Ve.from("lobby_players").select("lobby_id",{count:"exact",head:!0}).eq("lobby_id",t);if(l)throw l;if((i||0)>=o.max_players)throw new Error("Sala cheia.");try{window.__MY_UID=e}catch{}const{error:c}=await Ve.from("lobby_players").upsert({lobby_id:t,player_id:e,player_name:n,ready:!!r,joined_at:new Date().toISOString()},{onConflict:"lobby_id,player_id"});if(c)throw c;o.host_id||await Ve.from("lobbies").update({host_id:e}).eq("id",t)}async function pf({lobbyId:t,playerId:e}){var l;const{data:n,error:r}=await Ve.from("lobbies").select("id, host_id").eq("id",t).single();if(r)throw r;const{error:o}=await Ve.from("lobby_players").delete().match({lobby_id:t,player_id:e});if(o)throw o;const{data:s,error:i}=await Ve.from("lobby_players").select("player_id, joined_at").eq("lobby_id",t).order("joined_at",{ascending:!0});if(i)throw i;if(!s||s.length===0){await Ve.from("lobbies").delete().eq("id",t);return}if((n==null?void 0:n.host_id)===e){const c=(l=s[0])==null?void 0:l.player_id;c&&await Ve.from("lobbies").update({host_id:c}).eq("id",t)}}async function mf(t){const{data:e,error:n}=await Ve.from("lobby_players").select("player_id, player_name, ready, joined_at").eq("lobby_id",t).order("joined_at",{ascending:!0});if(n)throw n;return e||[]}async function Wx({lobbyId:t,playerId:e,ready:n}){const{error:r}=await Ve.from("lobby_players").update({ready:n}).match({lobby_id:t,player_id:e});if(r)throw r}async function Gx(t,e,n){return Wx({lobbyId:t,playerId:e,ready:n})}async function qx({lobbyId:t,playerId:e,playerName:n}){const{error:r}=await Ve.from("lobby_players").update({player_name:n}).match({lobby_id:t,player_id:e});if(r)throw r}async function gf(t,e){const{error:n}=await Ve.from("lobbies").update({status:e}).eq("id",t);if(n)throw n}function Hx(t,e){let n=0;const r=()=>{n&&cancelAnimationFrame(n),n=requestAnimationFrame(()=>e==null?void 0:e())},o=Ve.channel(`lobby-${t}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},s=>{console.debug("[rt] lobby_players:INSERT",s.new),r()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},s=>{console.debug("[rt] lobby_players:UPDATE",s.new),r()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},s=>{console.debug("[rt] lobby_players:DELETE",s.old),r()}).on("postgres_changes",{event:"*",schema:"public",table:"lobbies",filter:`id=eq.${t}`},s=>{console.debug("[rt] lobbies:*",s.new||s.old),r()}).subscribe();return()=>{n&&cancelAnimationFrame(n),Ve.removeChannel(o)}}async function Jx(t){const{data:e,error:n}=await Ve.from("lobbies").select("id,name,status,max_players,host_id,created_at").eq("id",t).single();if(n)throw n;return e}async function Kx({lobbyId:t}){var o;const{data:e}=await Ve.from("lobby_players").select("player_id, player_name, ready").eq("lobby_id",t),{data:n,error:r}=await Ve.from("matches").insert({lobby_id:t,host_id:((o=e==null?void 0:e[0])==null?void 0:o.player_id)||null,state:{players:e},created_at:new Date().toISOString()}).select("id").single();if(r)throw r;return n}async function Yx(t){const{data:e,error:n}=await Ve.from("matches").select("id, lobby_id, created_at").eq("lobby_id",t).order("created_at",{ascending:!1}).limit(1);if(n)throw n;return(e==null?void 0:e[0])||null}async function jl({roomCode:t,playerId:e}){if(!t||!e){console.log("[leaveRoom] Parmetros invlidos:",{roomCode:t,playerId:e});return}try{console.log(`[leaveRoom] Tentando remover jogador ${e} da sala ${t}`);const{data:n,error:r}=await Ve.from("lobbies").select("id, name, host_id").eq("id",t).single();if(r){console.warn("[leaveRoom] Erro ao buscar lobby:",r);return}if(!n){console.log(`[leaveRoom] Lobby ${t} no encontrado`);return}console.log("[leaveRoom] Lobby encontrado:",n);const{error:o}=await Ve.from("lobby_players").delete().match({lobby_id:t,player_id:e});o?console.warn("[leaveRoom] Erro ao remover jogador:",o):console.log(`[leaveRoom] Jogador ${e} removido do lobby ${t}`);const{data:s,error:i}=await Ve.from("lobby_players").select("player_id").eq("lobby_id",t);if(i){console.warn("[leaveRoom] Erro ao contar jogadores restantes:",i);return}if(!s||s.length===0){const{error:l}=await Ve.from("lobbies").delete().eq("id",t);l?console.warn("[leaveRoom] Erro ao deletar lobby vazio:",l):console.log(`[leaveRoom] Lobby ${t} deletado com sucesso (sem jogadores)`)}else if(console.log(`[leaveRoom] Jogador ${e} saiu do lobby ${t}. Restam ${s.length} jogadores.`),n.host_id===e&&s.length>0){const l=s[0].player_id,{error:c}=await Ve.from("lobbies").update({host_id:l}).eq("id",t);c?console.warn("[leaveRoom] Erro ao transferir host:",c):console.log(`[leaveRoom] Host transferido para ${l}`)}}catch(n){console.error("[leaveRoom] Erro inesperado:",n)}}function Qx({onEnterRoom:t}){const[e,n]=E.useState([]),[r,o]=E.useState(!1);async function s(){o(!0);try{const u=await zx();n(u)}finally{o(!1)}}E.useEffect(()=>(s(),Fx(()=>s())),[]);async function i(){const u=po("Jogador"),d=`Sala de ${u}`,h=prompt("Nome do lobby:",d)||d,f=ti();try{const g=await Vx({name:h,hostId:f,max:4});await Lc({lobbyId:g,playerId:f,playerName:u,ready:!1}),t==null||t(g)}catch(g){alert(g.message||"No foi possvel criar o lobby."),await s()}}async function l(u){try{const d=po("Jogador"),h=ti();await Lc({lobbyId:u,playerId:h,playerName:d,ready:!1}),t==null||t(u)}catch(d){alert(d.message||"No foi possvel entrar no lobby.")}}const c={page:{minHeight:"100vh",background:"#0f0f12",color:"#e9ecf1",padding:"32px 16px",display:"flex",justifyContent:"center"},container:{width:"100%",maxWidth:980},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:16,marginBottom:16,flexWrap:"wrap"},title:{fontSize:28,fontWeight:800,color:"#fff"},actions:{display:"flex",gap:10},btn:{padding:"12px 16px",border:0,borderRadius:12,fontWeight:800,cursor:"pointer"},btnPrimary:{background:"#4f46e5",color:"#fff",boxShadow:"0 8px 24px rgba(79,70,229,.25)"},btnSecondary:{background:"#20222a",color:"#fff",border:"1px solid #2b2e38"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:14},card:{background:"linear-gradient(180deg, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0.00) 100%)",border:"1px solid rgba(255,255,255,.08)",borderRadius:16,padding:16,display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 20px rgba(0,0,0,.25)"},cardHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},lobbyName:{fontSize:18,fontWeight:800,color:"#fff",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},meta:{fontSize:13,color:"#b8c0cc"},joinBtn:{padding:"10px 14px",borderRadius:10,border:0,background:"#7c3aed",color:"#fff",fontWeight:800,cursor:"pointer",boxShadow:"0 10px 20px rgba(124,58,237,.25)"},disabled:{opacity:.6,cursor:"not-allowed",filter:"grayscale(.3)"},empty:{marginTop:24,padding:18,borderRadius:12,border:"1px dashed rgba(255,255,255,.12)",color:"#c7cfdb",textAlign:"center"}};return a.jsx("div",{style:c.page,children:a.jsxs("div",{style:c.container,children:[a.jsxs("div",{style:c.headerRow,children:[a.jsx("h2",{style:c.title,children:"SalesGame  Lobbies"}),a.jsxs("div",{style:c.actions,children:[a.jsx("button",{style:{...c.btn,...c.btnPrimary},onClick:i,children:"Criar Lobby"}),a.jsx("button",{style:{...c.btn,...c.btnSecondary},onClick:s,disabled:r,children:r?"Atualizando":"Atualizar"})]})]}),e.length===0&&!r?a.jsxs("div",{style:c.empty,children:["Nenhuma sala criada ainda. Clique em ",a.jsx("b",{children:"Criar Lobby"})," para comear."]}):a.jsx("div",{style:c.grid,children:e.map(u=>{const d=(u.players??0)>=(u.max??4),h=(u.status??"open")==="open",f=d||!h;return a.jsxs("div",{style:c.card,children:[a.jsxs("div",{style:c.cardHeader,children:[a.jsx("div",{style:c.lobbyName,title:u.name,children:u.name}),a.jsxs("span",{style:c.meta,children:[u.players??0,"/",u.max??4]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("span",{style:c.meta,children:["status: ",u.status??"open"]}),a.jsx("button",{style:{...c.joinBtn,...f?c.disabled:{}},disabled:f,onClick:()=>l(u.id),title:f?d?"Sala cheia":"Sala no est aberta":"Entrar na sala",children:"Entrar"})]})]},u.id)})})]})})}function Xx({lobbyId:t,onBack:e,onStartGame:n}){const r=ti(),o=po("Jogador"),[s,i]=E.useState(null),[l,c]=E.useState([]),[u,d]=E.useState(!0),[h,f]=E.useState(!1),g=E.useRef(!1),x=E.useRef(!0),b=E.useRef(!1),_=E.useRef(!1),p=E.useMemo(()=>(s==null?void 0:s.host_id)===r,[s,r]),m=E.useMemo(()=>l.find(y=>y.player_id===r),[l,r]),v=E.useMemo(()=>l.filter(y=>y.ready).length,[l]),w=p&&(s==null?void 0:s.status)==="open"&&l.length>=1&&v===l.length;console.log("[PlayersLobby] Debug:",{players:l.length,readyCount:v,lobbyStatus:s==null?void 0:s.status,amHost:p,canStart:w,meId:r,meName:o});async function k(y){if(_.current)return;const N=await Yx(t);if(N!=null&&N.id){_.current=!0;const O=(y||[]).map((L,U)=>({id:L.player_id,name:L.player_name,index:U}));n==null||n({lobbyId:t,matchId:N==null?void 0:N.id,players:O,me:{id:r,name:o}})}}async function T(){x.current&&d(!0);try{console.log("[PlayersLobby] refreshAll - buscando lobby:",t);const[y,N]=await Promise.all([Jx(t),mf(t)]);console.log("[PlayersLobby] refreshAll - lobby:",y,"players:",N),i(y),c(N);const O=N.find(L=>L.player_id===r);if(console.log("[PlayersLobby] refreshAll - mine:",O,"meId:",r),!O&&!g.current&&(y==null?void 0:y.status)==="open"){console.log("[PlayersLobby] refreshAll - entrando na sala"),g.current=!0;try{await Lc({lobbyId:t,playerId:r,playerName:o,ready:!1}),console.log("[PlayersLobby] refreshAll - entrada na sala bem-sucedida");const L=await mf(t);console.log("[PlayersLobby] refreshAll - jogadores aps entrada:",L),c(L)}catch(L){console.error("[PlayersLobby] refreshAll - erro ao entrar na sala:",L)}}if(O&&!b.current&&o&&O.player_name!==o){console.log("[PlayersLobby] refreshAll - sincronizando nome"),b.current=!0;try{await qx({lobbyId:t,playerId:r,playerName:o})}catch{}}await k(N)}catch(y){console.error("[PlayersLobby] refreshAll - erro:",y)}finally{x.current&&(x.current=!1,d(!1))}}E.useEffect(()=>{const y=()=>{pf({lobbyId:t,playerId:r}).catch(()=>{})},N=()=>y();return window.addEventListener("pagehide",N),window.addEventListener("beforeunload",N),()=>{window.removeEventListener("pagehide",N),window.removeEventListener("beforeunload",N)}},[t,r]),E.useEffect(()=>(g.current=!1,x.current=!0,b.current=!1,_.current=!1,T(),Hx(t,()=>T())),[t]);async function D(y){if(!m)return;f(!0);const N=m.ready;c(O=>O.map(L=>L.player_id===r?{...L,ready:y}:L));try{await Gx(t,r,y)}catch(O){c(L=>L.map(U=>U.player_id===r?{...U,ready:N}:U)),console.error("setReadyUI failed",O)}finally{f(!1)}}async function S(){try{await pf({lobbyId:t,playerId:r})}finally{e==null||e()}}async function A(){if(!w)return;const y=s==null?void 0:s.status;await gf(t,"locked");try{const N=await Kx({lobbyId:t});_.current=!0;const O=l.map((L,U)=>({id:L.player_id,name:L.player_name,index:U}));n==null||n({lobbyId:t,matchId:N==null?void 0:N.id,players:O,me:{id:r,name:o}})}catch(N){console.error("startMatch failed",N),await gf(t,y||"open")}}return a.jsx("div",{style:Pe.page,children:a.jsxs("div",{style:Pe.container,children:[a.jsxs("div",{style:Pe.top,children:[a.jsx("button",{style:Pe.backBtn,onClick:S,children:" Voltar"}),a.jsxs("h2",{style:Pe.title,children:["SalesGame  ",(s==null?void 0:s.name)||"..."]})]}),a.jsxs("div",{style:Pe.table,children:[a.jsxs("div",{style:Pe.thead,children:[a.jsx("div",{style:Pe.colPlayer,children:"Jogador"}),a.jsx("div",{style:Pe.colReady,children:"Pronto?"})]}),u?a.jsx("div",{style:Pe.loading,children:"Carregando..."}):l.map(y=>a.jsxs("div",{style:Pe.row,children:[a.jsxs("div",{style:Pe.colPlayer,children:[a.jsx("span",{style:Pe.avatar,children:(y.player_name||"?").slice(0,2).toLowerCase()}),a.jsx("span",{children:y.player_name||"Annimo"}),(s==null?void 0:s.host_id)===y.player_id&&a.jsx("span",{style:Pe.badgeHost,children:"Host"}),y.player_id===r&&a.jsx("span",{style:Pe.badgeYou,children:"Voc"})]}),a.jsx("div",{style:Pe.colReady,children:y.player_id===r?a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{style:{...Pe.btn,...m!=null&&m.ready?Pe.btnGhost:Pe.btnDark},onClick:()=>D(!1),disabled:h||!(m!=null&&m.ready),children:"No pronto"}),a.jsxs("button",{style:{...Pe.btn,...m!=null&&m.ready?Pe.btnPrimary:Pe.btnPurple},onClick:()=>D(!0),disabled:h||!!(m!=null&&m.ready),children:[" ",m!=null&&m.ready?"Pronto":"Ficar pronto"]})]}):a.jsx("span",{style:y.ready?Pe.pillReady:Pe.pillWait,children:y.ready?"Pronto":"Aguardando"})})]},y.player_id))]}),a.jsxs("div",{style:Pe.footer,children:[a.jsxs("div",{style:Pe.statusWrap,children:[a.jsx("span",{style:{...Pe.dot,background:(s==null?void 0:s.status)==="open"?"#22c55e":"#f59e0b"}}),a.jsxs("span",{children:["status: ",(s==null?void 0:s.status)||"..."]}),a.jsxs("span",{style:{marginLeft:12},children:["Prontos: ",v,"/",l.length]})]}),a.jsxs("div",{style:{display:"flex",gap:12},children:[a.jsx("button",{style:{...Pe.btn,...w?Pe.btnPrimary:Pe.disabled},onClick:A,disabled:!w,children:"Iniciar partida"}),a.jsx("button",{style:{...Pe.btn,...Pe.btnDark},onClick:S,children:"Sair da sala"})]})]})]})})}const Pe={page:{minHeight:"100vh",background:"#0f0f12",color:"#e9ecf1",padding:"24px 16px",display:"flex",justifyContent:"center"},container:{width:"100%",maxWidth:980},top:{display:"flex",alignItems:"center",gap:12,marginBottom:16},backBtn:{padding:"10px 14px",background:"#20222a",border:"1px solid #2b2e38",borderRadius:12,color:"#fff",cursor:"pointer"},title:{margin:0,fontSize:28,fontWeight:800},table:{background:"rgba(255,255,255,.02)",border:"1px solid rgba(255,255,255,.08)",borderRadius:16,overflow:"hidden"},thead:{display:"grid",gridTemplateColumns:"1fr 220px",padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,.08)",color:"#c7cfdb"},row:{display:"grid",gridTemplateColumns:"1fr 220px",padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,.06)"},colPlayer:{display:"flex",alignItems:"center",gap:10,minWidth:0},colReady:{display:"flex",alignItems:"center",justifyContent:"flex-end"},avatar:{width:28,height:28,borderRadius:999,background:"#1f2430",display:"grid",placeItems:"center",color:"#c7cfdb",fontSize:12,textTransform:"lowercase"},badgeHost:{marginLeft:8,fontSize:12,background:"#fde68a",color:"#111827",padding:"2px 8px",borderRadius:999,fontWeight:800},badgeYou:{marginLeft:8,fontSize:12,background:"#bfdbfe",color:"#111827",padding:"2px 8px",borderRadius:999,fontWeight:800},loading:{padding:16,color:"#c7cfdb"},pillReady:{background:"rgba(34,197,94,.15)",color:"#22c55e",padding:"6px 10px",borderRadius:999,fontWeight:700},pillWait:{background:"rgba(245,158,11,.14)",color:"#f59e0b",padding:"6px 10px",borderRadius:999,fontWeight:700},footer:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:16},statusWrap:{display:"flex",alignItems:"center",gap:6,color:"#c7cfdb"},dot:{width:8,height:8,borderRadius:"50%"},btn:{padding:"12px 16px",border:0,borderRadius:12,fontWeight:800,cursor:"pointer"},btnPrimary:{background:"#4f46e5",color:"#fff",boxShadow:"0 8px 24px rgba(79,70,229,.25)"},btnPurple:{background:"#7c3aed",color:"#fff"},btnDark:{background:"#20222a",color:"#fff",border:"1px solid #2b2e38"},btnGhost:{background:"transparent",color:"#e9ecf1",border:"1px solid rgba(255,255,255,.15)"},disabled:{opacity:.5,cursor:"not-allowed",filter:"grayscale(.25)"}},Zx="/board.jpg",Ic=800,Mc=700,Ga=[{nx:.9278494291885221,ny:.9008218764923216},{nx:.8188460351743289,ny:.9120818357755046},{nx:.7145819191607529,ny:.920124663834921},{nx:.6016291268127121,ny:.920124663834921},{nx:.49104597346497997,ny:.9233417950586875},{nx:.37888306078370876,ny:.920124663834921},{nx:.24618327676643012,ny:.9152989669992712},{nx:.21695772909595804,ny:.7994822429436751},{nx:.1853625424251774,ny:.7270967904089275},{nx:.1340203640851589,ny:.6354085505315806},{nx:.12851782363977485,ny:.5145797598627787},{nx:.12664165103189493,ny:.37392795883361923},{nx:.05347091932457786,ny:.30017152658662094},{nx:.051594746716697934,ny:.20240137221269297},{nx:.14540337711069418,ny:.12006861063464837},{nx:.23921200750469043,ny:.11663807890222985},{nx:.3771106941838649,ny:.11663807890222985},{nx:.5037523452157598,ny:.12006861063464837},{nx:.5975609756097561,ny:.1320754716981132},{nx:.5984990619136961,ny:.24356775300171526},{nx:.5065666041275797,ny:.2692967409948542},{nx:.398686679174484,ny:.27101200686106347},{nx:.28893058161350843,ny:.27101200686106347},{nx:.2373358348968105,ny:.3687821612349914},{nx:.23921200750469043,ny:.48027444253859347},{nx:.24202626641651032,ny:.5660377358490566},{nx:.26454033771106944,ny:.6895368782161235},{nx:.3330206378986867,ny:.6946826758147513},{nx:.35647279549718575,ny:.5831903945111492},{nx:.35647279549718575,ny:.4716981132075472},{nx:.3818011257035647,ny:.37735849056603776},{nx:.5225140712945591,ny:.3653516295025729},{nx:.6238273921200751,ny:.3687821612349914},{nx:.7223264540337712,ny:.40308747855917665},{nx:.6613508442776735,ny:.5197255574614065},{nx:.5300187617260788,ny:.5025728987993139},{nx:.4427767354596623,ny:.5694682675814752},{nx:.4896810506566604,ny:.6861063464837049},{nx:.6163227016885553,ny:.6861063464837049},{nx:.724202626641651,ny:.6861063464837049},{nx:.8273921200750469,ny:.660377358490566},{nx:.8395872420262664,ny:.5368782161234992},{nx:.8395872420262664,ny:.4339622641509434},{nx:.8283302063789869,ny:.313893653516295},{nx:.7176360225140713,ny:.30017152658662094},{nx:.6876172607879925,ny:.22298456260720412},{nx:.698874296435272,ny:.1457975986277873},{nx:.8020637898686679,ny:.11663807890222985},{nx:.8958724202626641,ny:.11663807890222985},{nx:.9446529080675422,ny:.21783876500857632},{nx:.9446529080675422,ny:.3293310463121784},{nx:.9380863039399625,ny:.45797598627787306},{nx:.9409005628517824,ny:.5711835334476844},{nx:.950281425891182,ny:.6723842195540308},{nx:.9540337711069419,ny:.7804459691252144}],ao=Ga.length;function mm(t,e,n){return{x:t.nx*e,y:t.ny*n}}Ga.map(t=>[t.nx*Ic,t.ny*Mc]);function eb({visible:t=!0,boardWidth:e,boardHeight:n}){return t?a.jsx("div",{className:"markersLayer",children:Ga.map((r,o)=>{const{x:s,y:i}=mm(r,e,n);return a.jsx("div",{className:"marker",style:{left:s,top:i},title:`Casa ${o+1}`,children:o+1},o)})}):null}function tb({boardRef:t,expected:e=55,onFinish:n,initial:r=[]}){const[o,s]=E.useState(r);function i(g){if(!(t!=null&&t.current))return;const x=t.current.getBoundingClientRect(),b=g.clientX-x.left,_=g.clientY-x.top,p=b/x.width,m=_/x.height;s(v=>v.length>=e?v:[...v,{nx:p,ny:m}])}function l(){s(g=>g.slice(0,-1))}function c(){s([])}const u=E.useMemo(()=>JSON.stringify(o,null,2),[o]);async function d(){try{await navigator.clipboard.writeText(u),alert("Copiado para a rea de transferncia!")}catch{alert("No foi possvel copiar. Use o boto Baixar.")}}function h(){const g=new Blob([u],{type:"application/json"}),x=URL.createObjectURL(g),b=document.createElement("a");b.href=x,b.download="track-points-55.json",document.body.appendChild(b),b.click(),b.remove(),URL.revokeObjectURL(x)}function f(){n==null||n(o),console.log(`TRACK_POINTS_NORM (cole em src/data/track.js):
`,u),alert("Finalizado! O JSON foi impresso no console. Copie e cole em src/data/track.js")}return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"recLayer",onClick:i}),a.jsx("div",{className:"recDotsLayer",pointerEvents:"none",children:o.map((g,x)=>a.jsx("div",{className:"recDot",style:{left:`${g.nx*100}%`,top:`${g.ny*100}%`},title:`Casa ${x+1}`,children:x+1},x))}),a.jsxs("div",{className:"recToolbar",children:[a.jsxs("div",{className:"recInfo",children:[a.jsx("b",{children:"Gravando trilha"}),"  clique nas casas na ordem.",a.jsxs("span",{children:["Marcados: ",a.jsx("b",{children:o.length})," / ",e]})]}),a.jsxs("div",{className:"recBtns",children:[a.jsx("button",{onClick:l,disabled:!o.length,children:"Desfazer"}),a.jsx("button",{onClick:c,disabled:!o.length,children:"Limpar"}),a.jsx("button",{onClick:d,disabled:!o.length,children:"Copiar JSON"}),a.jsx("button",{onClick:h,disabled:!o.length,children:"Baixar .json"}),a.jsx("button",{onClick:f,disabled:o.length!==e,children:"Finalizar"})]})]})]})}const nb=40,rb=1.15,ob=3,sb="0 8px 18px rgba(0,0,0,.35)",vf={cash:18e3,possibAt:0,clientsAt:0,faturamento:770,manutencao:1150,emprestimos:0,vendedoresComuns:0,fieldSales:0,insideSales:0,mixDBens:4e3,erpClientes:0,manualOnboarding:!0,azul:0,amarelo:0,roxo:0,gestores:0};function ib({players:t,turnIdx:e,recordTrack:n=!1,matchId:r,me:o,onMeHud:s}){const i=E.useRef(null),[l,c]=E.useState({w:Ic,h:Mc}),u=(o==null?void 0:o.id)||ti(),d=po("Jogador"),h=E.useMemo(()=>(t==null?void 0:t.find(w=>w.id===u))||null,[t,u]),f=(o==null?void 0:o.name)||(h==null?void 0:h.name)||d,g=(h==null?void 0:h.color)||"#6c5ce7",x=E.useMemo(()=>`sg_stats_v1:${r||"local"}:${u}`,[r,u]),[b,_]=E.useState(()=>{try{const w=sessionStorage.getItem(x);return w?JSON.parse(w):vf}catch{return vf}});E.useEffect(()=>{try{sessionStorage.setItem(x,JSON.stringify(b))}catch{}},[x,b]),E.useEffect(()=>{const w={id:u,name:f,color:g,cash:b.cash,possibAt:b.possibAt,clientsAt:b.clientsAt,matchId:r||"local"};s==null||s(w),document.dispatchEvent(new CustomEvent("sg:meHud",{detail:w}))},[u,f,g,b.cash,b.possibAt,b.clientsAt,r]),E.useLayoutEffect(()=>{if(!i.current)return;const w=i.current,k=new ResizeObserver(T=>{for(const D of T){const S=D.contentRect;c({w:S.width,h:S.height})}});return k.observe(w),()=>k.disconnect()},[]);const p=l.w/Ic,m=l.h/Mc,v=Math.min(p,m);return a.jsxs("div",{className:"board",ref:i,children:[a.jsx("img",{src:Zx,alt:"Board",className:"boardImg"}),n&&a.jsx(tb,{boardRef:i,expected:55,onFinish:w=>{console.log("TRACK_POINTS_NORM (cole em src/data/track.js):",JSON.stringify(w,null,2))}}),!n&&a.jsxs(a.Fragment,{children:[a.jsx(eb,{visible:!1,boardWidth:l.w,boardHeight:l.h}),t.map((w,k)=>{const T=k===e,D=(w.pos%ao+ao)%ao,S=Ga[D],A=mm(S,l.w,l.h),y=k*12*v,O=nb*v*(T?rb:1),L=Math.max(2,ob*v),U=["","","","","","","",""],Se=U[k%U.length];return a.jsx("div",{className:"token",style:{position:"absolute",left:A.x+y,top:A.y-y,transform:"translate(-50%, -50%)",width:O,height:O,borderRadius:"50%",background:w.color,border:`${L}px solid rgba(255,255,255,.95)`,boxShadow:sb,pointerEvents:"none",display:"grid",placeItems:"center",color:"#000",fontWeight:900,userSelect:"none",zIndex:T?4:3,fontSize:`${Math.max(16,O*.6)}px`},title:`${w.name}  Casa ${D+1}`,"aria-label":`${w.name} est na casa ${D+1}`,children:T?"":Se},w.id)})]})]})}function ab({totals:t,players:e}){return E.useEffect(()=>{console.groupCollapsed("[HUD] totals"),console.log(t),console.groupEnd()},[t]),a.jsxs("div",{className:"hud",children:[a.jsxs("div",{className:"panel",children:[a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Faturamento:"})," ",a.jsxs("span",{className:"pos",children:["$ ",t.faturamento]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Manuteno:"})," ",a.jsxs("span",{className:"neg",children:["$ ",t.manutencao]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Emprstimos:"})," ",a.jsxs("span",{children:["$ ",t.emprestimos]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Vendedores Comuns:"})," ",a.jsx("span",{children:t.vendedoresComuns})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Field Sales:"})," ",a.jsx("span",{children:t.fieldSales})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Inside Sales:"})," ",a.jsx("span",{children:t.insideSales})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Mix Produtos:"})," ",a.jsx("span",{children:t.mixProdutos})," ",a.jsx("b",{children:" Bens:"})," ",a.jsxs("span",{children:["$ ",t.bens]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"ERP/Sistemas:"})," ",a.jsx("span",{children:t.erpSistemas})," ",a.jsx("b",{children:" Clientes:"})," ",a.jsx("span",{children:t.clientes})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Manual Onboarding:"})," "]}),a.jsxs("div",{children:[a.jsx("b",{children:"Azul:"})," ",a.jsx("span",{children:t.az||0})," ",a.jsx("b",{children:" Amarelo: "}),a.jsx("span",{children:t.am||0})," ",a.jsx("b",{children:"Roxo:"})," ",a.jsx("span",{children:t.rox||0})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Gestores Comerciais:"})," ",a.jsx("span",{children:t.gestores??t.gestoresComerciais??0})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Capacidade:"})," ",a.jsx("span",{children:t.possibAt??0}),"  ",a.jsx("b",{children:"Em Atendimento:"})," ",a.jsx("span",{children:t.clientsAt??0})]})]}),a.jsxs("div",{className:"score",children:[a.jsx("div",{className:"title",children:"Placar"}),e.map(n=>a.jsxs("div",{className:"row",children:[a.jsx("span",{children:n.name}),a.jsx("span",{children:n.cash})]},n.id))]})]})}function lb({onAction:t,current:e,isMyTurn:n=!0}){const r=!!(e!=null&&e.bankrupt),o=!!n&&!r;E.useEffect(()=>{console.groupCollapsed("[Controls] render"),console.log("current player:",e),console.log("isMyTurn prop:",n),console.log("isBankrupt:",r),console.log("canRoll (final):",o),console.groupEnd()},[e==null?void 0:e.id,e==null?void 0:e.name,e==null?void 0:e.bankrupt,n,o]);const s=()=>{if(console.log("[Controls] click => Rolar Dado & Andar (canRoll=%s)",o),!o)return;const c=Math.floor(Math.random()*6)+1,u=0,d=`Dado: ${c}`;console.log("[Controls] onAction ROLL => steps=%d cashDelta=%d note=%s",c,u,d),t==null||t({type:"ROLL",steps:c,cashDelta:u,note:d})},i=async()=>{r||(console.log("[Controls] click => Recuperao Financeira"),t==null||t({type:"RECOVERY_MODAL"}))},l=async()=>{r||(console.log("[Controls] click => Declarar Falncia"),t==null||t({type:"BANKRUPT_MODAL"}))};return a.jsxs("div",{className:`controls ${o?"":"is-wait"} ${r?"is-bankrupt":""}`,children:[a.jsx("button",{className:"btn primary",onClick:i,disabled:r,"aria-disabled":r,children:"RECUPERAO FINANCEIRA"}),a.jsx("button",{className:"btn dark",onClick:l,disabled:r,"aria-disabled":r,children:"DECLARAR FALNCIA"}),a.jsxs("div",{className:"turnBox",children:[a.jsxs("div",{children:["Vez de: ",a.jsx("b",{children:e==null?void 0:e.name})]}),a.jsx("button",{className:"btn go",onClick:s,disabled:!o,"aria-disabled":!o,children:"Rolar Dado & Andar"})]})]})}function ui({children:t,onClose:e,zIndex:n=3e3}){const r=()=>{typeof e=="function"&&e()};return a.jsx("div",{className:"sg-modal-backdrop",style:{position:"fixed",inset:0,background:"rgba(8,10,16,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:n},onClick:r,children:a.jsx("div",{className:"sg-modal-card",style:{position:"relative",background:"#0f1420",border:"1px solid rgba(255,255,255,.1)",borderRadius:14,width:"min(780px, 92vw)",maxWidth:"92vw",color:"#fff",boxShadow:"0 20px 60px rgba(0,0,0,.45)"},onClick:o=>o.stopPropagation(),children:t})})}function cb({players:t=[],onExit:e,onResolve:n}){const r=E.useMemo(()=>{const c=[...t].map(u=>({...u,patrimonio:(Number(u.cash)||0)+(Number(u.bens)||0)})).sort((u,d)=>d.patrimonio-u.patrimonio);return[c[1],c[0],c[2]]},[t]),o=r==null?void 0:r[1],s=r==null?void 0:r[0],i=r==null?void 0:r[2],l=()=>{n?n({action:"EXIT"}):e==null||e()};return a.jsx(ui,{zIndex:2147483647,onClose:()=>{},children:a.jsxs("div",{style:Bn.wrap,children:[a.jsx("h1",{style:Bn.title,children:" Fim da 5 Rodada"}),a.jsxs("p",{style:Bn.subtitle,children:["Vence quem tiver ",a.jsx("b",{children:"Saldo + Bens"}),". Eis o pdio:"]}),a.jsxs("div",{style:Bn.podium,children:[a.jsx(Rl,{place:"second",player:s}),a.jsx(Rl,{place:"first",player:o,big:!0}),a.jsx(Rl,{place:"third",player:i})]}),a.jsx("div",{style:{display:"flex",gap:12,marginTop:18,flexWrap:"wrap",justifyContent:"center"},children:a.jsx("button",{style:Bn.btn,onClick:l,children:" Voltar aos Lobbies"})})]})})}function Rl({place:t,player:e,big:n}){if(!e)return a.jsx("div",{style:{width:220}});const r={first:Tl("#d4af37","#f5d76e"),second:Tl("#9fa4ad","#cfd4db"),third:Tl("#b87333","#d28c45")},o={first:"1",second:"2",third:"3"}[t],s=r[t].ring,i=r[t].face;return a.jsxs("div",{style:{...Bn.medalCol,transform:n?"translateY(-18px)":"none"},children:[a.jsx("div",{style:Bn.ribbon}),a.jsx("div",{style:{...Bn.medal,...s,width:n?180:150,height:n?180:150},children:a.jsx("div",{style:{...Bn.medalFace,...i},children:a.jsx("div",{style:Bn.medalNumber,children:o})})}),a.jsxs("div",{style:Bn.cardBelow,children:[a.jsx("div",{style:{fontWeight:900,fontSize:16,lineHeight:1.2,textAlign:"center"},children:e.name}),a.jsxs("div",{style:{opacity:.9,fontSize:13,marginTop:4,textAlign:"center"},children:["Saldo: ",a.jsxs("b",{children:["$ ",Number(e.cash||0).toLocaleString()]}),a.jsx("br",{}),"Bens: ",a.jsxs("b",{children:["$ ",Number(e.bens||0).toLocaleString()]})]}),a.jsxs("div",{style:{marginTop:6,fontWeight:900,textAlign:"center"},children:["Patrimnio: ",a.jsxs("b",{children:["$ ",Number(e.patrimonio||0).toLocaleString()]})]})]})]})}function Tl(t,e){return{ring:{background:`radial-gradient(circle at 35% 30%, ${e} 0%, ${t} 65%, #000 120%)`,boxShadow:"0 12px 30px rgba(0,0,0,.35), inset 0 0 12px rgba(255,255,255,.12)"},face:{background:`conic-gradient(from 0deg, ${e}, ${t}, ${e})`}}}const Bn={wrap:{pointerEvents:"auto",border:"1px solid rgba(255,255,255,.15)",background:"#11161f",color:"#eef1f6",borderRadius:16,padding:20,width:"min(900px, 92vw)",maxWidth:"92vw",textAlign:"center"},title:{margin:"0 0 6px",fontWeight:900,fontSize:28},subtitle:{margin:"0 0 14px",opacity:.9},podium:{display:"flex",alignItems:"flex-end",justifyContent:"center",gap:24,padding:"10px 0",flexWrap:"wrap"},medalCol:{display:"flex",flexDirection:"column",alignItems:"center"},ribbon:{width:16,height:70,background:"linear-gradient(#e41f1f,#9e1313)",borderRadius:4,marginBottom:-12},medal:{borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"3px solid rgba(255,255,255,.18)"},medalFace:{width:"85%",height:"85%",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 8px 18px rgba(0,0,0,.35), inset 0 -6px 10px rgba(255,255,255,.08)"},medalNumber:{fontWeight:900,fontSize:28,letterSpacing:1,textShadow:"0 2px 4px rgba(0,0,0,.45)"},cardBelow:{background:"#19202c",border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"10px 12px",width:220,marginTop:10},btn:{background:"#2a3342",color:"#fff",border:"1px solid rgba(255,255,255,.18)",borderRadius:10,padding:"10px 14px",fontWeight:800,cursor:"pointer"}},gm=E.createContext(null);function ub({children:t}){const[e,n]=E.useState([]),r=E.useRef(null),o=d=>{const h=r.current;r.current=null,n(f=>f.slice(0,-1)),h&&h(d)},s=()=>o({action:"SKIP"}),i=()=>o(!1),l=d=>{var g;const h=((g=crypto==null?void 0:crypto.randomUUID)==null?void 0:g.call(crypto))||String(Date.now()+Math.random()),f=pe.cloneElement(d,{onResolve:x=>o(x)});n(x=>[...x,{id:h,el:f}])},c=()=>new Promise(d=>{r.current=d}),u=E.useMemo(()=>({pushModal:l,awaitTop:c,resolveTop:o,closeModal:s,popModal:i}),[]);return a.jsxs(gm.Provider,{value:u,children:[t,e.map(({id:d,el:h})=>a.jsx(pe.Fragment,{children:h},d))]})}const Ht=()=>E.useContext(gm);function db({playerName:t="Jogador"}){const{resolveTop:e,closeModal:n}=Ht();return a.jsx(ui,{width:700,onClose:n,children:a.jsx("div",{className:"bankruptcyModal",children:a.jsxs("div",{className:"paper",style:{padding:24},children:[a.jsx("h2",{style:{marginTop:0},children:"Declarar Falncia"}),a.jsxs("p",{children:["Tem certeza que deseja declarar ",a.jsx("b",{children:"Falncia"}),", ",a.jsx("b",{children:t}),"?",a.jsx("br",{}),"Esta ao  irreversvel e voc no poder mais jogar."]}),a.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:24},children:[a.jsx("button",{onClick:()=>{n(),e(!1)},className:"btn",children:"Cancelar"}),a.jsx("button",{onClick:()=>{n(),e(!0)},className:"btn btn-danger",children:"Sim, declarar falncia"})]})]})})})}const Wt={comum:{cap:2,baseFat:600,incFat:100,baseDesp:100,incDesp:100},inside:{cap:5,baseFat:1500,incFat:500,baseDesp:2e3,incDesp:100},field:{cap:5,baseFat:1500,incFat:500,baseDesp:2e3,incDesp:100}},Bc={baseDesp:3e3,incDesp:500,boostByCert:[.2,.3,.4,.6]},vm={A:{fat:1200,desp:700},B:{fat:600,desp:400},C:{fat:300,desp:200},D:{fat:100,desp:50}},ym={A:{fat:1e3,desp:400},B:{fat:500,desp:200},C:{fat:200,desp:100},D:{fat:70,desp:50}},Gt=t=>Number(t||0),ur=(t={},e)=>{var n;return new Set(((n=t==null?void 0:t.trainingsByVendor)==null?void 0:n[e])||[]).size},yf=t=>Number((t==null?void 0:t.az)||0)>0,xf=t=>Number((t==null?void 0:t.am)||0)>0,bf=t=>Number((t==null?void 0:t.rox)||0)>0,xm=t=>ur(t,"gestor");function gr(t={}){const e=Math.max(0,Gt(t.vendedoresComuns)),n=Math.max(0,Gt(t.insideSales)),r=Math.max(0,Gt(t.fieldSales)),o=e*Wt.comum.cap,s=n*Wt.inside.cap,i=r*Wt.field.cap,l=o+s+i,c=Math.max(0,Gt(t.clients)),u=Math.min(c,l);return{cap:l,inAtt:u}}function Hr(t={}){var D,S;const e=Gt(t.vendedoresComuns),n=Gt(t.insideSales),r=Gt(t.fieldSales),o=Gt(t.gestores??t.gestoresComerciais??t.managers),s=ur(t,"comum"),i=ur(t,"inside"),l=ur(t,"field"),c=ur(t,"gestor"),u=e*(Wt.comum.baseFat+Wt.comum.incFat*s),d=n*(Wt.inside.baseFat+Wt.inside.incFat*i),h=r*(Wt.field.baseFat+Wt.field.incFat*l);let f=u+d+h;const g=e+n+r,x=g>0?Math.min(1,o*7/g):0,b=Bc.boostByCert[Math.min(3,Math.max(0,c))]||0;f=f*(1+x*b);const _=String(t.mixProdutos||"D").toUpperCase(),p=(((D=vm[_])==null?void 0:D.fat)||0)*Gt(t.clients),m=String(t.erpLevel||"D").toUpperCase(),v=g+o,w=(((S=ym[m])==null?void 0:S.fat)||0)*v,k=Gt(t.revenue);return Math.max(0,Math.floor(f+p+w+k))}function xr(t={}){var k,T;const e=Gt(t.vendedoresComuns),n=Gt(t.insideSales),r=Gt(t.fieldSales),o=Gt(t.gestores??t.gestoresComerciais??t.managers),s=ur(t,"comum"),i=ur(t,"inside"),l=ur(t,"field"),c=ur(t,"gestor"),u=e*(Wt.comum.baseDesp+Wt.comum.incDesp*s),d=n*(Wt.inside.baseDesp+Wt.inside.incDesp*i),h=r*(Wt.field.baseDesp+Wt.field.incDesp*l),f=o*(Bc.baseDesp+Bc.incDesp*c),g=String(t.mixProdutos||"D").toUpperCase(),x=(((k=vm[g])==null?void 0:k.desp)||0)*Gt(t.clients),b=String(t.erpLevel||"D").toUpperCase(),_=e+n+r+o,p=(((T=ym[b])==null?void 0:T.desp)||0)*_;return Math.max(0,Math.floor(u+d+h+f+x+p+0+1e3))}function Qe(t,e={}){var o,s;const n={...t},r=(i,l)=>{n[i]=(n[i]??0)+l};if(Number.isFinite(e.cashDelta)&&r("cash",Number(e.cashDelta)),Number.isFinite(e.clientsDelta)&&r("clients",Number(e.clientsDelta)),Number.isFinite(e.manutencaoDelta)&&r("manutencao",Number(e.manutencaoDelta)),Number.isFinite(e.bensDelta)&&r("bens",Number(e.bensDelta)),Number.isFinite(e.vendedoresComunsDelta)&&r("vendedoresComuns",Number(e.vendedoresComunsDelta)),Number.isFinite(e.fieldSalesDelta)&&r("fieldSales",Number(e.fieldSalesDelta)),Number.isFinite(e.insideSalesDelta)&&r("insideSales",Number(e.insideSalesDelta)),Number.isFinite(e.gestoresDelta)){const i=Number(e.gestoresDelta);n.gestores=(n.gestores??0)+i,n.gestoresComerciais=(n.gestoresComerciais??0)+i,n.managers=(n.managers??0)+i}if(Number.isFinite(e.revenueDelta)&&r("revenue",Number(e.revenueDelta)),typeof e.mixProdutosSet<"u"){n.mixProdutos=e.mixProdutosSet;const i=String(e.mixProdutosSet).toUpperCase();["A","B","C","D"].includes(i)&&(n.mixOwned={...n.mixOwned||{},[i]:!0},(o=n.reducedLevels)!=null&&o.MIX&&(n.reducedLevels={...n.reducedLevels,MIX:n.reducedLevels.MIX.filter(l=>l!==i)}))}if(e.mixBaseSet&&(n.mixBase={...n.mixBase||{},...e.mixBaseSet}),typeof e.erpLevelSet<"u"){n.erpLevel=e.erpLevelSet;const i=String(e.erpLevelSet).toUpperCase();["A","B","C","D"].includes(i)&&(n.erpOwned={...n.erpOwned||{},[i]:!0},(s=n.reducedLevels)!=null&&s.ERP&&(n.reducedLevels={...n.reducedLevels,ERP:n.reducedLevels.ERP.filter(l=>l!==i)}))}return Array.isArray(e.trainingsPush)&&e.trainingsPush.length&&(n.trainings=[...n.trainings||[],...e.trainingsPush]),Array.isArray(e.directBuysPush)&&e.directBuysPush.length&&(n.directBuys=[...n.directBuys||[],...e.directBuysPush]),n}function wf(t,e){const{purchases:n=[],grandTotal:r=0}=e||{},o={personalizado:"az",fieldsales:"am",imersaomultiplier:"rox"},s={...t};return s.cash=(s.cash??0)-Number(r||0),s.bens=(s.bens??0)+Number(r||0),s.onboarding=!0,n.forEach(i=>{var h;const{vendorType:l,items:c=[]}=i||{};c.forEach(f=>{const g=o[f==null?void 0:f.id];g&&(s[g]=(s[g]??0)+1)});const u=String(l||"comum"),d=new Set(((h=s.trainingsByVendor)==null?void 0:h[u])||[]);c.forEach(f=>{f!=null&&f.id&&d.add(f.id)}),s.trainingsByVendor={...s.trainingsByVendor||{},[u]:Array.from(d)}}),s}function Ls(t,e,n){return t===e?!1:t<e?n>t&&n<=e:n>t||n<=e}function Fn(t){return t.reduce((e,n)=>e+(n!=null&&n.bankrupt?0:1),0)}function Sn(t,e){var s;const n=t.length;if(n===0)return 0;let r=(e+1)%n,o=0;for(;o<n;){if(!((s=t[r])!=null&&s.bankrupt))return r;r=(r+1)%n,o++}return e}class bm{constructor(){this.errors=[],this.warnings=[]}validateGameState(e,n,r,o,s){return this.errors=[],this.warnings=[],this.validatePlayers(e),this.validateTurnState(e,n),this.validateGameOverState(e,o,s),this.validateRoundState(e,r),{isValid:this.errors.length===0,errors:this.errors,warnings:this.warnings}}validatePlayers(e){if(!Array.isArray(e)||e.length===0){this.addError("Jogadores invlidos: deve ser um array no vazio");return}e.forEach((n,r)=>{this.validatePlayer(n,r)}),this.validatePlayerUniqueness(e),this.validateAlivePlayers(e)}validatePlayer(e,n){const r=`Jogador ${n+1} (${e.name||"Sem nome"})`;e.id||this.addError(`${r}: ID  obrigatrio`),(typeof e.cash!="number"||e.cash<0)&&this.addError(`${r}: Cash deve ser um nmero no negativo (atual: ${e.cash})`),(typeof e.clients!="number"||e.clients<0)&&this.addError(`${r}: Clientes deve ser um nmero no negativo (atual: ${e.clients})`),this.validateResourceCounts(e,r),this.validateCalculations(e,r)}validateResourceCounts(e,n){["vendedoresComuns","fieldSales","insideSales","gestores","gestoresComerciais","managers"].forEach(s=>{const i=e[s];i!==void 0&&(typeof i!="number"||i<0)&&this.addError(`${n}: ${s} deve ser um nmero no negativo (atual: ${i})`)}),["az","am","rox"].forEach(s=>{const i=e[s];i!==void 0&&(typeof i!="number"||i<0)&&this.addError(`${n}: Certificado ${s} deve ser um nmero no negativo (atual: ${i})`)})}validateCalculations(e,n){try{const r=Hr(e),o=xr(e),{cap:s,inAtt:i}=gr(e);(typeof r!="number"||r<0)&&this.addError(`${n}: Faturamento calculado invlido: ${r}`),(typeof o!="number"||o<0)&&this.addError(`${n}: Manuteno calculada invlida: ${o}`),(typeof s!="number"||s<0)&&this.addError(`${n}: Capacidade calculada invlida: ${s}`),(typeof i!="number"||i<0||i>s)&&this.addError(`${n}: Clientes em atendimento invlido: ${i} (capacidade: ${s})`),this.isInitialState(e)&&o!==1150&&this.addError(`${n}: Manuteno inicial deve ser 1150, mas  ${o}`)}catch(r){this.addError(`${n}: Erro ao calcular faturamento/manuteno: ${r.message}`)}}isInitialState(e){return e.vendedoresComuns===1&&e.clients===1&&e.fieldSales===0&&e.insideSales===0&&e.gestores===0&&e.mixProdutos==="D"&&e.erpLevel==="D"&&(e.az||0)===0&&(e.am||0)===0&&(e.rox||0)===0}validatePlayerUniqueness(e){const n=e.map(o=>o.id).filter(Boolean),r=new Set(n);n.length!==r.size&&this.addError("IDs de jogadores devem ser nicos")}validateAlivePlayers(e){const n=Fn(e);n===0&&this.addError("No pode haver zero jogadores vivos"),n===1&&this.addWarning("Apenas 1 jogador vivo - jogo deve terminar")}validateTurnState(e,n){if(typeof n!="number"||n<0||n>=e.length){this.addError(`TurnIdx invlido: ${n} (deve estar entre 0 e ${e.length-1})`);return}const r=e[n];if(!r){this.addError(`Jogador do turno no encontrado no ndice ${n}`);return}r.bankrupt&&this.addError(`Jogador do turno (${r.name}) est falido`)}validateGameOverState(e,n,r){const o=Fn(e);n&&o>1&&this.addError("Jogo marcado como terminado mas h mais de 1 jogador vivo"),n&&!r&&this.addError("Jogo terminado mas no h vencedor definido"),r&&!n&&this.addError("H vencedor definido mas jogo no terminou"),r&&r.bankrupt&&this.addError("Vencedor no pode estar falido")}validateRoundState(e,n){(typeof n!="number"||n<1)&&this.addError(`Rodada invlida: ${n} (deve ser >= 1)`),n>10&&this.addWarning(`Rodada muito alta: ${n} (jogo pode estar travado)`)}validateAction(e,n,r){switch(this.errors=[],this.warnings=[],e.type){case"MOVE":this.validateMoveAction(e,n);break;case"BUY":this.validateBuyAction(e,n);break;case"HIRE":this.validateHireAction(e,n);break;case"BANKRUPT":this.validateBankruptAction(e,n);break;default:this.addWarning(`Tipo de ao no reconhecido: ${e.type}`)}return{isValid:this.errors.length===0,errors:this.errors,warnings:this.warnings}}validateMoveAction(e,n){(typeof e.steps!="number"||e.steps<1||e.steps>6)&&this.addError(`Passos invlidos: ${e.steps} (deve estar entre 1 e 6)`)}validateBuyAction(e,n){const r=e.cost||e.price||0;r>n.cash&&this.addError(`Saldo insuficiente: precisa de ${r}, tem ${n.cash}`)}validateHireAction(e,n){const r=e.cost||0;r>n.cash&&this.addError(`Saldo insuficiente para contratao: precisa de ${r}, tem ${n.cash}`)}validateBankruptAction(e,n){n.bankrupt||this.addWarning("Jogador declarando falncia mas no est marcado como falido")}addError(e){this.errors.push(e)}addWarning(e){this.warnings.push(e)}}function fb(t,e,n,r,o){return new bm().validateGameState(t,e,n,r,o)}function hb(t,e,n){return new bm().validateAction(t,e,n)}class pb{constructor(){this.enabled=!1,this.logs=[],this.maxLogs=1e4,this.originalConsole={log:console.log,warn:console.warn,error:console.error,debug:console.debug,info:console.info},this.prefixes=["[DEBUG]","[NET]","[App]","[SG]","[Controls]","[HUD]","[DEBUG MODE]","[PlayersLobby]","[leaveRoom]","[GameNet]","[useTurnEngine]","[useGameSync]"]}shouldCapture(e){if(!this.enabled)return!1;const n=e.map(r=>{if(typeof r=="object")try{return JSON.stringify(r)}catch{return String(r)}return String(r)}).join(" ");return this.prefixes.some(r=>n.includes(r))}addLog(e,n){this.logs.length>=this.maxLogs&&(this.logs=this.logs.slice(-Math.floor(this.maxLogs*.9)));const r=Date.now(),o={timestamp:r,time:new Date(r).toISOString(),level:e,args:n.map(s=>{if(typeof s=="object"&&s!==null)try{return JSON.parse(JSON.stringify(s,(i,l)=>typeof l=="function"?"[Function]":l===void 0?"[undefined]":Array.isArray(l)&&l.length>100?`[Array(${l.length}) - truncado]`:l))}catch{return String(s)}return s}),message:n.map(s=>{if(typeof s=="object")try{return JSON.stringify(s)}catch{return String(s)}return String(s)}).join(" ")};this.logs.push(o)}interceptLog(...e){this.shouldCapture(e)&&this.addLog("log",e),this.originalConsole.log.apply(console,e)}interceptWarn(...e){this.shouldCapture(e)&&this.addLog("warn",e),this.originalConsole.warn.apply(console,e)}interceptError(...e){this.addLog("error",e),this.originalConsole.error.apply(console,e)}interceptDebug(...e){this.shouldCapture(e)&&this.addLog("debug",e),this.originalConsole.debug.apply(console,e)}interceptInfo(...e){this.shouldCapture(e)&&this.addLog("info",e),this.originalConsole.info.apply(console,e)}enable(){this.enabled||(this.enabled=!0,console.log=this.interceptLog.bind(this),console.warn=this.interceptWarn.bind(this),console.error=this.interceptError.bind(this),console.debug=this.interceptDebug.bind(this),console.info=this.interceptInfo.bind(this),console.log("[LogCapture]  Captura de logs ativada"))}disable(){this.enabled&&(this.enabled=!1,console.log=this.originalConsole.log,console.warn=this.originalConsole.warn,console.error=this.originalConsole.error,console.debug=this.originalConsole.debug,console.info=this.originalConsole.info,console.log("[LogCapture]  Captura de logs desativada"))}clear(){this.logs=[],console.log("[LogCapture]  Histrico de logs limpo")}getLogs(){return[...this.logs]}getStats(){const e=this.logs.length,n={log:0,warn:0,error:0,debug:0,info:0};return this.logs.forEach(r=>{n[r.level]=(n[r.level]||0)+1}),{total:e,byLevel:n,enabled:this.enabled}}exportAsText(){const e=["=".repeat(80),"RELATRIO DE LOGS - Sales Game","=".repeat(80),`Data/Hora: ${new Date().toISOString()}`,`Total de logs: ${this.logs.length}`,`Estatsticas: ${JSON.stringify(this.getStats(),null,2)}`,"=".repeat(80),""];return this.logs.forEach(n=>{const r={log:"",warn:"",error:"",debug:"",info:""}[n.level]||"";e.push(`[${n.time}] ${r} [${n.level.toUpperCase()}]`),n.args.forEach((o,s)=>{typeof o=="object"?e.push(`  Arg ${s+1}: ${JSON.stringify(o,null,2)}`):e.push(`  Arg ${s+1}: ${o}`)}),e.push("")}),e.join(`
`)}exportAsJSON(){return{timestamp:new Date().toISOString(),stats:this.getStats(),logs:this.logs}}exportFull(){return{timestamp:new Date().toISOString(),stats:this.getStats(),text:this.exportAsText(),json:this.exportAsJSON()}}}const Xn=new pb,mb=()=>Xn.clear(),Uc=()=>Xn.getStats(),gb=()=>Xn.exportAsText(),vb=()=>Xn.exportAsJSON();class yb{constructor(){this.enabled=!1,this.validationHistory=[],this.maxHistorySize=100}toggle(){return this.enabled=!this.enabled,this.enabled&&Xn.enable(),console.log(`[DEBUG MODE] ${this.enabled?"ATIVADO":"DESATIVADO"}`),this.enabled}validateGameState(e,n,r,o,s,i=""){if(!this.enabled)return;const l=fb(e,n,r,o,s);return this.addToHistory({type:"GAME_STATE",context:i,timestamp:Date.now(),result:l}),l.isValid||console.error("[DEBUG MODE]  Estado do jogo invlido:",l.errors),l.warnings.length>0&&console.warn("[DEBUG MODE]  Avisos:",l.warnings),l}validateAction(e,n,r,o=""){if(!this.enabled)return;const s=hb(e,n,r);return this.addToHistory({type:"ACTION",context:o,timestamp:Date.now(),action:e.type,player:n.name,result:s}),s.isValid||console.error(`[DEBUG MODE]  Ao invlida (${e.type}):`,s.errors),s}validateResourceChange(e,n,r,o){if(!this.enabled)return;const s=[],i=[];if(n.clients!==r.clients){const u=r.clients-n.clients;r.clients<0&&s.push(`Clientes no pode ser negativo: ${r.clients}`),Math.abs(u)>10&&i.push(`Mudana grande de clientes: ${u}`)}if(n.cash!==r.cash){const u=r.cash-n.cash;r.cash<0&&s.push(`Cash no pode ser negativo: ${r.cash}`),Math.abs(u)>5e4&&i.push(`Mudana grande de cash: ${u}`)}["vendedoresComuns","fieldSales","insideSales","gestores"].forEach(u=>{if(n[u]!==r[u]){const d=r[u]-n[u];r[u]<0&&s.push(`${u} no pode ser negativo: ${r[u]}`),Math.abs(d)>5&&i.push(`Mudana grande de ${u}: ${d}`)}});const c={isValid:s.length===0,errors:s,warnings:i};return this.addToHistory({type:"RESOURCE_CHANGE",context:o,timestamp:Date.now(),player:e.name,oldState:n,newState:r,result:c}),c.isValid||console.error("[DEBUG MODE]  Mudana de recurso invlida:",c.errors),c}validateCalculations(e,n=""){if(this.enabled)try{const r=Hr(e),o=xr(e),{cap:s,inAtt:i}=gr(e),l=[],c=[];(typeof r!="number"||r<0)&&l.push(`Faturamento invlido: ${r}`),(typeof o!="number"||o<0)&&l.push(`Manuteno invlida: ${o}`),(typeof s!="number"||s<0)&&l.push(`Capacidade invlida: ${s}`),(typeof i!="number"||i<0||i>s)&&l.push(`Clientes em atendimento invlido: ${i} (capacidade: ${s})`),this.isInitialState(e)&&o!==1150&&l.push(`Manuteno inicial deve ser 1150, mas  ${o}`);const u={isValid:l.length===0,errors:l,warnings:c,calculations:{faturamento:r,manutencao:o,cap:s,inAtt:i}};return this.addToHistory({type:"CALCULATIONS",context:n,timestamp:Date.now(),player:e.name,result:u}),u.isValid||console.error("[DEBUG MODE]  Clculos invlidos:",u.errors),u}catch(r){return console.error("[DEBUG MODE]  Erro ao validar clculos:",r),{isValid:!1,errors:[r.message],warnings:[]}}}isInitialState(e){return e.vendedoresComuns===1&&e.clients===1&&e.fieldSales===0&&e.insideSales===0&&e.gestores===0&&e.mixProdutos==="D"&&e.erpLevel==="D"}addToHistory(e){this.validationHistory.unshift(e),this.validationHistory.length>this.maxHistorySize&&(this.validationHistory=this.validationHistory.slice(0,this.maxHistorySize))}getHistory(){return this.validationHistory}clearHistory(){this.validationHistory=[]}getStats(){const e=this.validationHistory.length,n=this.validationHistory.filter(o=>!o.result.isValid).length,r=this.validationHistory.filter(o=>o.result.warnings.length>0).length;return{total:e,errors:n,warnings:r,errorRate:e>0?n/e*100:0,warningRate:e>0?r/e*100:0}}exportReport(){const e=this.getStats(),n={timestamp:new Date().toISOString(),stats:e,history:this.validationHistory};return console.log("[DEBUG MODE]  Relatrio de validao:",n),n}exportFullReport(){const e=this.exportReport(),n=Xn.exportFull();return{timestamp:new Date().toISOString(),validation:e,logs:n,text:this.exportFullReportAsText(e,n)}}exportFullReportAsText(e,n){return["=".repeat(80),"RELATRIO COMPLETO DE DEBUG - Sales Game","=".repeat(80),`Data/Hora: ${new Date().toISOString()}`,"","--- VALIDAES ---",`Total de validaes: ${e.stats.total}`,`Erros: ${e.stats.errors}`,`Avisos: ${e.stats.warnings}`,`Taxa de erro: ${e.stats.errorRate.toFixed(2)}%`,"","--- LOGS CAPTURADOS ---",`Total de logs: ${n.stats.total}`,`Logs por nvel: ${JSON.stringify(n.stats.byLevel,null,2)}`,"","--- HISTRICO DE VALIDAES ---",...e.history.map(o=>`[${new Date(o.timestamp).toISOString()}] ${o.type} - ${o.context||""} - ${JSON.stringify(o.result,null,2)}`),"","--- LOGS DETALHADOS ---",n.text,"=".repeat(80)].join(`
`)}}const mo=new yb,xb=(t,e,n,r,o,s)=>mo.validateGameState(t,e,n,r,o,s),bb=(t,e)=>mo.validateCalculations(t,e),Sf=()=>mo.getStats(),wb=()=>mo.exportReport(),wm=()=>mo.exportFullReport();function Sb({players:t,turnIdx:e,round:n,gameOver:r,winner:o}){const[s,i]=E.useState(!1),[l,c]=E.useState({total:0,errors:0,warnings:0,errorRate:0,warningRate:0}),[u,d]=E.useState({total:0,byLevel:{},enabled:!1}),[h,f]=E.useState(!1),[g,x]=E.useState({x:0,y:0}),[b,_]=E.useState({x:0,y:0}),p=E.useRef(null);E.useEffect(()=>{const A=()=>{c(Sf()),d(Uc())};A();const y=setInterval(A,1e3);return()=>clearInterval(y)},[]);const m=()=>{const A=mo.toggle();i(A)},v=()=>{const A=wb(),y=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),N=URL.createObjectURL(y),O=document.createElement("a");O.href=N,O.download=`debug-report-${new Date().toISOString().slice(0,19)}.json`,O.click(),URL.revokeObjectURL(N)},w=()=>{const A=wm(),y=new Blob([A.text],{type:"text/plain;charset=utf-8"}),N=URL.createObjectURL(y),O=document.createElement("a");O.href=N,O.download=`debug-logs-completo-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`,O.click(),URL.revokeObjectURL(N);const L=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),U=URL.createObjectURL(L),Se=document.createElement("a");Se.href=U,Se.download=`debug-logs-completo-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,Se.click(),URL.revokeObjectURL(U),console.log("[DebugPanel]  Relatrio completo exportado (texto + JSON)")},k=()=>{mo.clearHistory(),mb(),c(Sf()),d(Uc()),console.log("[DebugPanel]  Todos os logs foram limpos")},T=A=>{if(A.target.closest("button"))return;f(!0);const y=p.current.getBoundingClientRect();_({x:A.clientX-y.left,y:A.clientY-y.top})},D=A=>{h&&x({x:A.clientX-b.x,y:A.clientY-b.y})},S=()=>{f(!1)};return E.useEffect(()=>{if(h)return document.addEventListener("mousemove",D),document.addEventListener("mouseup",S),()=>{document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",S)}},[h,b]),s?a.jsxs("div",{ref:p,style:{position:"fixed",top:g.y||10,left:g.x||10,zIndex:9999,background:"#1a1a1a",color:"#fff",padding:"12px",borderRadius:"8px",border:"1px solid #333",minWidth:"300px",maxHeight:"80vh",overflow:"auto",fontSize:"12px",fontFamily:"monospace",cursor:h?"grabbing":"grab",userSelect:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},onMouseDown:T,children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[a.jsx("h3",{style:{margin:0,color:"#4CAF50"},children:" Debug Panel"}),a.jsx("button",{onClick:m,style:{background:"#ff4444",color:"#fff",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",fontSize:"10px"},children:""})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estatsticas de Validao"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Total: ",l.total]}),a.jsxs("div",{style:{color:l.errors>0?"#ff4444":"#4CAF50"},children:["Erros: ",l.errors]}),a.jsxs("div",{style:{color:l.warnings>0?"#FFC107":"#4CAF50"},children:["Avisos: ",l.warnings]}),a.jsxs("div",{children:["Taxa Erro: ",l.errorRate.toFixed(1),"%"]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estatsticas de Logs"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Total: ",u.total]}),a.jsxs("div",{style:{color:u.enabled?"#4CAF50":"#ff4444"},children:["Status: ",u.enabled?" Ativo":" Inativo"]}),u.byLevel&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Logs: ",u.byLevel.log||0]}),a.jsxs("div",{style:{color:"#FFC107"},children:["Warns: ",u.byLevel.warn||0]}),a.jsxs("div",{style:{color:"#ff4444"},children:["Errors: ",u.byLevel.error||0]}),a.jsxs("div",{children:["Debug: ",u.byLevel.debug||0]})]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estado do Jogo"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Jogadores: ",t.length]}),a.jsxs("div",{children:["Turno: ",e+1]}),a.jsxs("div",{children:["Rodada: ",n]}),a.jsxs("div",{style:{color:r?"#ff4444":"#4CAF50"},children:["Status: ",r?"Fim":"Ativo"]}),o&&a.jsxs("div",{children:["Vencedor: ",o.name]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Jogadores"}),t.map((A,y)=>{var N;return a.jsxs("div",{style:{background:y===e?"#333":"transparent",padding:"4px",borderRadius:"4px",marginBottom:"2px",border:A.bankrupt?"1px solid #ff4444":"1px solid transparent"},children:[a.jsxs("div",{style:{fontWeight:"bold"},children:[A.name," ",A.bankrupt?"":""," ",y===e?"":""]}),a.jsxs("div",{style:{fontSize:"10px",opacity:.8},children:["Cash: $",((N=A.cash)==null?void 0:N.toLocaleString())||0," | Clientes: ",A.clients||0," | Vendedores: ",A.vendedoresComuns||0]})]},A.id)})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[a.jsx("button",{onClick:w,style:{background:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px",fontWeight:"bold"},title:"Exporta relatrio completo com todos os logs (texto + JSON)",children:" Exportar Logs Completos"}),a.jsx("button",{onClick:v,style:{background:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px"},title:"Exporta apenas relatrio de validao (JSON)",children:" Exportar Validao"}),a.jsx("button",{onClick:k,style:{background:"#FF9800",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px"},title:"Limpa todos os logs e histrico de validao",children:" Limpar Tudo"})]}),a.jsxs("div",{style:{marginTop:"12px",padding:"8px",background:"#333",borderRadius:"4px",fontSize:"10px"},children:[a.jsx("div",{style:{color:"#FFC107",marginBottom:"4px"},children:" Instrues:"}),a.jsx("div",{children:' Clique em " Debug" para ativar/desativar'}),a.jsx("div",{children:" Logs so capturados automaticamente quando debug est ativo"}),a.jsx("div",{children:' " Exportar Logs Completos" gera arquivo .txt e .json'}),a.jsx("div",{children:" Compartilhe o arquivo .txt para anlise de problemas"}),a.jsx("div",{children:" Todos os console.log com prefixos [DEBUG], [NET], [App], etc. so capturados"})]})]}):a.jsx("div",{style:{background:"#1a1a1a",color:"#fff",padding:"6px 10px",borderRadius:"4px",border:"1px solid #333",cursor:"pointer",fontSize:"11px",fontFamily:"monospace",display:"inline-block",userSelect:"none"},onClick:m,children:" Debug"})}function vr({onResolve:t,requiredAmount:e=0,currentCash:n=0,title:r="Saldo insuficiente",message:o="Seu saldo atual no  suficiente para concluir esta compra.",okLabel:s="OK",showRecoveryOptions:i=!1,canClose:l=!0}){const c=E.useRef(null),u=E.useMemo(()=>Math.max(0,Number(e||0)-Number(n||0)),[e,n]),d=b=>`$ ${Number(b||0).toLocaleString()}`,h=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"ACK"})},f=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),!(i||!l)&&(t==null||t({action:"SKIP"}))},g=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"RECOVERY"})},x=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"BANKRUPT"})};return E.useEffect(()=>{const b=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var _,p;return(p=(_=c.current)==null?void 0:_.focus)==null?void 0:p.call(_)},0),()=>{document.body.style.overflow=b}},[]),a.jsx("div",{style:Xt.wrap,role:"dialog","aria-modal":"true",onMouseDown:b=>{b.target===b.currentTarget&&b.stopPropagation()},children:a.jsxs("div",{style:Xt.card,onMouseDown:b=>b.stopPropagation(),children:[!i&&l&&a.jsx("button",{type:"button",style:Xt.close,onClick:f,"aria-label":"Fechar",children:""}),a.jsx("div",{style:Xt.icon,children:""}),a.jsx("h2",{style:Xt.title,children:r}),a.jsx("p",{style:Xt.msg,children:o}),a.jsxs("div",{style:Xt.grid,children:[a.jsxs("div",{style:Xt.row,children:[a.jsx("span",{children:"Necessrio:"}),a.jsx("b",{children:d(e)})]}),a.jsxs("div",{style:Xt.row,children:[a.jsx("span",{children:"Seu saldo:"}),a.jsx("b",{children:d(n)})]}),a.jsxs("div",{style:{...Xt.row,color:"#fca5a5"},children:[a.jsx("span",{children:"Faltam:"}),a.jsx("b",{children:d(u)})]})]}),a.jsx("div",{style:Xt.actions,children:i?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",style:{...Xt.btn,background:"#f59e0b",color:"#fff",marginRight:"8px"},onClick:g,children:"Recuperao Financeira"}),a.jsx("button",{type:"button",style:{...Xt.btn,background:"#dc2626",color:"#fff"},onClick:x,children:"Declarar Falncia"})]}):a.jsx("button",{ref:c,type:"button",style:{...Xt.btn,background:"#6b7280",color:"#fff"},onClick:h,children:s})})]})})}const Xt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"grid",placeItems:"center",zIndex:1100},card:{width:"min(440px, 92vw)",background:"#1f2330",color:"#e9ecf1",borderRadius:16,padding:"18px 18px 16px",border:"1px solid rgba(255,255,255,.12)",boxShadow:"0 18px 50px rgba(0,0,0,.5)",position:"relative"},close:{position:"absolute",right:10,top:10,width:34,height:34,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},icon:{fontSize:28,lineHeight:1,marginBottom:6},title:{margin:"2px 0 6px",fontWeight:900,fontSize:20},msg:{opacity:.95,margin:"0 0 10px"},grid:{border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",marginBottom:12,background:"#171b26"},row:{display:"flex",justifyContent:"space-between",padding:"4px 0"},actions:{display:"flex",justifyContent:"center",marginTop:6},btn:{minWidth:120,padding:"10px 16px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer"}},Zt={A:{compra:1e4,despesa:400,faturamento:1e3,color:"#1d4ed8",pill:"NVEL A"},B:{compra:4e3,despesa:200,faturamento:500,color:"#16a34a",pill:"NVEL B"},C:{compra:1500,despesa:100,faturamento:200,color:"#f59e0b",pill:"NVEL C"},D:{compra:500,despesa:50,faturamento:70,color:"#6b7280",pill:"NVEL D"}};function _f({onResolve:t,currentCash:e=0,currentLevel:n=null,erpOwned:r=null}){const o=E.useRef(null),{pushModal:s,awaitTop:i}=Ht(),l=u=>{var d,h;(d=u==null?void 0:u.preventDefault)==null||d.call(u),(h=u==null?void 0:u.stopPropagation)==null||h.call(u),t==null||t({action:"SKIP"})},c=async u=>{if(r?r[u]===!0:n===u)return;const h=Zt[u],f=Number((h==null?void 0:h.compra)||0),g=Number(e||0);if(g<f){s(a.jsx(vr,{requiredAmount:f,currentCash:g,title:"Saldo insuficiente para comprar ERP",message:`Voc precisa de $ ${f.toLocaleString()} para o ERP nvel ${u}, mas possui $ ${g.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",level:u,values:h})};return E.useEffect(()=>{const u=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var d,h;return(h=(d=o.current)==null?void 0:d.focus)==null?void 0:h.call(d)},0),()=>{document.body.style.overflow=u}},[]),a.jsx("div",{style:Ke.wrap,role:"dialog","aria-modal":"true","aria-label":"ERP/Sistemas",children:a.jsxs("div",{style:Ke.card,children:[a.jsx("button",{ref:o,type:"button",style:Ke.close,onClick:l,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Ke.title,children:["Escolha o nvel de ",a.jsx("b",{children:"ERP / Sistemas"}),":"]}),a.jsxs("div",{style:Ke.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"ERP / SISTEMAS"}),a.jsxs("div",{children:[a.jsx("b",{children:"Impacto mensal:"})," adiciona ",a.jsx("b",{children:"Despesa"})," e ",a.jsx("b",{children:"Faturamento"})," de acordo com o nvel."]}),a.jsxs("div",{children:["O nvel ",a.jsx("b",{children:"D"})," tambm pode ser adquirido."]})]}),a.jsxs("div",{style:Ke.saldo,children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsxs("div",{style:Ke.table,children:[a.jsxs("div",{style:Ke.trHead,children:[a.jsx("div",{style:Ke.th}),a.jsx("div",{style:{...Ke.th,background:"#10214d"},children:"Nvel A"}),a.jsx("div",{style:{...Ke.th,background:"#0f3a1c"},children:"Nvel B"}),a.jsx("div",{style:{...Ke.th,background:"#4a3705"},children:"Nvel C"}),a.jsx("div",{style:{...Ke.th,background:"#2a2f3b"},children:"Nvel D"})]}),a.jsx(Dl,{label:"COMPRA",fmt:!0,vA:Zt.A.compra,vB:Zt.B.compra,vC:Zt.C.compra,vD:Zt.D.compra}),a.jsx(Dl,{label:"DESPESA",fmt:!0,vA:Zt.A.despesa,vB:Zt.B.despesa,vC:Zt.C.despesa,vD:Zt.D.despesa}),a.jsx(Dl,{label:"FATURAMENTO",fmt:!0,vA:Zt.A.faturamento,vB:Zt.B.faturamento,vC:Zt.C.faturamento,vD:Zt.D.faturamento})]}),a.jsx("div",{style:Ke.cards,children:["A","B","C","D"].map(u=>{const d=Zt[u],h=r?r[u]===!0:n===u,f=h;return a.jsxs("div",{style:{...Ke.cardItem,borderColor:h?"#16a34a":"rgba(255,255,255,.15)",opacity:f?.6:1},children:[a.jsx("div",{style:{...Ke.pill,background:h?"#16a34a":"#fff",color:h?"#fff":"#111"},children:h?" ADQUIRIDO":d.pill}),a.jsx("div",{style:{...Ke.cardBadge,background:d.color}}),a.jsxs("ul",{style:Ke.lines,children:[a.jsxs("li",{children:["Compra: ",a.jsxs("b",{children:["$ ",d.compra.toLocaleString()]})]}),a.jsxs("li",{children:["Despesa: ",a.jsxs("b",{children:["$ ",d.despesa.toLocaleString()]})]}),a.jsxs("li",{children:["Faturamento: ",a.jsxs("b",{children:["$ ",d.faturamento.toLocaleString()]})]})]}),a.jsx("button",{type:"button",style:{...Ke.buyBtn,background:f?"#6b7280":"#2442f9",cursor:f?"not-allowed":"pointer"},onClick:()=>c(u),disabled:f,title:f?`ERP nvel ${u} j adquirido`:`Comprar ERP nvel ${u}`,children:f?"J Adquirido":`Comprar ${u}`})]},u)})}),a.jsx("div",{style:Ke.actions,children:a.jsx("button",{type:"button",style:{...Ke.bigBtn,background:"#444"},onClick:l,children:"No comprar"})})]})})}function Dl({label:t,vA:e,vB:n,vC:r,vD:o,fmt:s}){const i=l=>s?`$ ${Number(l).toLocaleString()}`:l;return a.jsxs("div",{style:Ke.tr,children:[a.jsx("div",{style:{...Ke.td,fontWeight:700},children:t}),a.jsx("div",{style:Ke.td,children:i(e)}),a.jsx("div",{style:Ke.td,children:i(n)}),a.jsx("div",{style:Ke.td,children:i(r)}),a.jsx("div",{style:Ke.td,children:i(o)})]})}const Ke={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldo:{margin:"0 0 10px",padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,overflow:"hidden",marginBottom:12},trHead:{display:"grid",gridTemplateColumns:"1fr repeat(4, 1fr)",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"1fr repeat(4, 1fr)",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255/.06)"},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,marginTop:8},cardItem:{background:"#0f1320",border:"1px solid",borderRadius:14,padding:"12px",display:"flex",flexDirection:"column",gap:8},cardBadge:{width:"100%",height:6,borderRadius:999,opacity:.9},pill:{alignSelf:"flex-start",fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999,color:"#111"},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},buyBtn:{marginTop:"auto",padding:"10px 12px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer",background:"#2442f9",color:"#fff"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:14},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",color:"#fff",fontWeight:900,cursor:"pointer"}},$i=[{id:"personalizado",label:`Treinamento de venda personalizado
Casagrande Consultores`,price:500,cert:"azul",colors:{bg:"#0f2848",border:"#3b82f6",pill:"#60a5fa"}},{id:"fieldsales",label:`Curso Field Sales Collab
Multiplier Educao e
Casagrande Consultores`,price:500,cert:"amarelo",colors:{bg:"#3a3202",border:"#facc15",pill:"#fde047"}},{id:"imersaomultiplier",label:`Pacote Imerses
Multiplier Educao`,price:500,cert:"roxo",colors:{bg:"#2b0840",border:"#a855f7",pill:"#c084fc"}}];function Ef({onResolve:t,ownedByType:e={},canTrain:n={}}){const r=S=>typeof S=="string"&&S.trim()!==""&&!Number.isNaN(Number(S))?Number(S):S,o=S=>{const A=r(S);return typeof A=="number"?A>0:!!A},s=E.useMemo(()=>({comum:o(n.comum),field:o(n.field),inside:o(n.inside),gestor:o(n.gestor)}),[n]),i=$i.map(S=>S.id),l=E.useMemo(()=>[{id:"comum",label:"Vend. Comum"},{id:"field",label:"Field Sales"},{id:"inside",label:"Inside Sales"},{id:"gestor",label:"Gestor"}].filter(S=>s[S.id]).filter(S=>{const A=e[S.id]instanceof Set?e[S.id]:new Set(e[S.id]||[]);return i.some(y=>!A.has(y))}),[e,s]),[c,u]=E.useState(()=>new Set),[d,h]=E.useState(()=>new Set);E.useEffect(()=>{c.size===0&&l.length>0&&u(new Set([l[0].id]))},[l,c.size]);const f=E.useRef(null),g=E.useMemo(()=>{const S=[];if(d.size>0){const A=Array.from(d).map(N=>$i.find(O=>O.id===N)).filter(Boolean),y=A.reduce((N,O)=>N+((O==null?void 0:O.price)||0),0);c.forEach(N=>{S.push({vendorType:N,items:A,total:y})})}return S},[c,d]),x=E.useMemo(()=>g.reduce((S,A)=>S+A.total,0),[g]),b=E.useMemo(()=>{const S={azul:0,amarelo:0,roxo:0};return d.size>0&&Array.from(d).map(y=>$i.find(N=>N.id===y)).filter(Boolean).forEach(y=>{S[y.cert]=(S[y.cert]||0)+c.size}),S},[d,c.size]),_=E.useMemo(()=>{const S={};if(d.size>0){const A=Array.from(d);c.forEach(y=>{S[y]=A})}return S},[d,c]),p=S=>{u(A=>{const y=new Set(A);return y.has(S)?y.delete(S):y.add(S),y})},m=S=>{Array.from(c).some(y=>(e[y]instanceof Set?e[y]:new Set(e[y]||[])).has(S))||h(y=>{const N=new Set(y);return N.has(S)?N.delete(S):N.add(S),N})},v=()=>{g.length!==0&&(t==null||t({action:"BUY",purchases:g,grandTotal:x,bensDelta:x,certsCount:b,ownedUpdate:_}))},w=()=>{u(new Set),h(new Set)},k=S=>{var A,y;(A=S==null?void 0:S.preventDefault)==null||A.call(S),(y=S==null?void 0:S.stopPropagation)==null||y.call(S),t==null||t({action:"SKIP"})};E.useEffect(()=>{const S=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var A,y;return(y=(A=f.current)==null?void 0:A.focus)==null?void 0:y.call(A)},0),()=>{document.body.style.overflow=S}},[]);const T=l.length===0,D=!Object.values(s).some(Boolean);return a.jsx("div",{style:Ft.wrap,role:"dialog","aria-modal":"true",children:a.jsxs("div",{style:Ft.card,children:[a.jsx("button",{ref:f,type:"button",style:Ft.close,onClick:k,"aria-label":"Fechar",children:""}),a.jsx("h2",{style:Ft.title,children:"Escolha os vendedores e treinamentos que deseja comprar:"}),T?a.jsx("div",{style:Ft.allDoneBox,children:D?"Nenhum profissional disponvel para treinar no momento.":"Todos os treinamentos j foram comprados para os profissionais disponveis."}):a.jsx(a.Fragment,{children:a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("p",{style:{margin:"0 0 8px",opacity:.9,fontSize:"14px"},children:"Selecione os tipos de vendedores que deseja treinar:"}),a.jsx("div",{style:{...Ft.vendorRow,gridTemplateColumns:`repeat(${l.length}, minmax(0,1fr))`},children:l.map(S=>a.jsx("button",{type:"button",onClick:()=>p(S.id),style:{...Ft.vendorBtn,background:c.has(S.id)?"#6f5bd6":"#2a2f3b",borderColor:c.has(S.id)?"rgba(255,255,255,.35)":"rgba(255,255,255,.15)"},children:S.label},S.id))})]})}),!T&&c.size>0&&a.jsxs(a.Fragment,{children:[a.jsx("p",{style:{margin:"10px 2px 14px",opacity:.9},children:"Escolha os treinamentos que sero aplicados a todos os tipos selecionados:"}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",background:"#2a2f3b",borderRadius:"8px",border:"1px solid rgba(255,255,255,.15)"},children:[a.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Tipos selecionados:"}),a.jsx("div",{style:{fontSize:"14px",opacity:.9},children:Array.from(c).map(S=>{const A=l.find(y=>y.id===S);return A==null?void 0:A.label}).join(", ")})]}),a.jsx("div",{style:Ft.products,children:$i.map(S=>{const A=d.has(S.id),y=Array.from(c).some(N=>(e[N]instanceof Set?e[N]:new Set(e[N]||[])).has(S.id));return a.jsxs("button",{type:"button",onClick:()=>m(S.id),disabled:y,style:{...Ft.productCard,background:S.colors.bg,borderColor:S.colors.border,boxShadow:A?`0 0 0 3px ${S.colors.pill}`:"none",opacity:y?.45:1,cursor:y?"not-allowed":"pointer"},title:y?"J adquirido para algum tipo selecionado":void 0,children:[a.jsxs("div",{style:Ft.pill(S.colors.pill),children:["Certificado ",S.cert==="azul"?"Azul":S.cert==="amarelo"?"Amarelo":"Roxo"]}),a.jsx("div",{style:{whiteSpace:"pre-line",fontWeight:800,marginBottom:10},children:S.label}),a.jsxs("div",{style:{fontSize:22,fontWeight:900},children:["$ ",S.price.toLocaleString()]})]},S.id)})})]}),a.jsxs("div",{style:Ft.actionsRow,children:[a.jsx("button",{type:"button",style:{...Ft.smallBtn,background:"#3a4152"},onClick:w,children:"Limpar Tudo"}),a.jsx("div",{style:{flex:1}}),a.jsxs("div",{style:{fontWeight:900},children:["Total: $ ",x.toLocaleString(),c.size>1&&a.jsxs("span",{style:{fontSize:"12px",opacity:.8,marginLeft:"8px"},children:["(",d.size," treinamentos  ",c.size," tipos)"]})]})]}),a.jsxs("div",{style:Ft.btnRow,children:[a.jsx("button",{type:"button",style:{...Ft.bigBtn,background:"#444"},onClick:k,children:"No comprar"}),a.jsxs("button",{type:"button",disabled:g.length===0,style:{...Ft.bigBtn,background:g.length>0?"#6f5bd6":"#3a3a3a",opacity:g.length>0?1:.6,cursor:g.length>0?"pointer":"not-allowed"},onClick:v,children:["Comprar (",g.length," tipo",g.length!==1?"s":"",")"]})]})]})]})})}const Ft={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",maxWidth:980,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},allDoneBox:{background:"#0f1320",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"14px",fontWeight:800,textAlign:"center"},vendorRow:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:10,marginBottom:12},vendorBtn:{padding:"10px 12px",borderRadius:10,border:"1px solid",color:"#fff",fontWeight:800,cursor:"pointer"},products:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:12,margin:"4px 0 10px"},productCard:{textAlign:"center",padding:"16px 14px",borderRadius:14,border:"2px solid",color:"#fff"},pill:t=>({display:"inline-block",background:t,color:"#111",fontWeight:900,padding:"4px 8px",borderRadius:999,marginBottom:8}),actionsRow:{display:"flex",alignItems:"center",gap:12,margin:"6px 0 6px"},smallBtn:{padding:"10px 14px",borderRadius:10,border:"none",color:"#fff",fontWeight:800,cursor:"pointer"},btnRow:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:12},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",color:"#fff",fontWeight:900,cursor:"pointer"}};function _b({onResolve:t,currentCash:e=0}){const n=E.useRef(null),r=i=>{var l,c;(l=i==null?void 0:i.preventDefault)==null||l.call(i),(c=i==null?void 0:i.stopPropagation)==null||c.call(i),t==null||t({action:"SKIP"})};E.useEffect(()=>{const i=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var l,c;return(c=(l=n.current)==null?void 0:l.focus)==null?void 0:c.call(l)},0),()=>{document.body.style.overflow=i}},[]);const o=i=>()=>{t==null||t({action:"OPEN",open:String(i).toUpperCase()})},s=[{key:"mix",title:"Mix Produtos",lines:["Nvel A: $12000","Nvel B: $6000","Nvel C: $3000","Nvel D: $1000"],onBuy:o("MIX")},{key:"gestor",title:"Gestor Comercial",lines:["Contratao: $5000","Manuteno: $3000"],onBuy:o("MANAGER")},{key:"inside",title:"Inside Sales",lines:["Contratao: $3000","Manuteno: $2000"],onBuy:o("INSIDE")},{key:"field",title:"Field Sales",lines:["Contratao: $3000","Manuteno: $2000"],onBuy:o("FIELD")},{key:"vendedor",title:"Vendedor Comum",lines:["Contratao: $1500","Despesas: $1000"],onBuy:o("COMMON")},{key:"erp",title:"ERP/Sistemas",lines:["Nvel A: $10000","Nvel B: $4000","Nvel C: $1500","Nvel D: $500"],onBuy:o("ERP")},{key:"carteira",title:"Carteira de Clientes",lines:["Aquisio: $1000"],onBuy:o("CLIENTS")},{key:"training",title:"Treinamento",lines:["Azul: $500","Amarelo: $500","Roxo: $500"],onBuy:o("TRAINING")}];return a.jsx("div",{style:Jn.wrap,role:"dialog","aria-modal":"true",children:a.jsxs("div",{style:Jn.card,children:[a.jsx("button",{ref:n,type:"button",style:Jn.close,onClick:r,"aria-label":"Fechar",children:""}),a.jsx("h2",{style:Jn.title,children:"Direto de Compra  escolha uma casa para adquirir:"}),a.jsxs("div",{style:{marginBottom:8,opacity:.8,fontSize:13},children:["Saldo atual: ",a.jsxs("b",{children:["$",Number(e).toLocaleString()]})]}),a.jsx("div",{style:Jn.grid,children:s.map(i=>a.jsxs("div",{style:Jn.cell,children:[a.jsx("div",{style:Jn.cellTitle,children:i.title}),a.jsx("ul",{style:Jn.lines,children:i.lines.map((l,c)=>a.jsx("li",{children:l},c))}),a.jsx("button",{type:"button",style:Jn.buyBtn,onClick:i.onBuy,children:"Comprar"})]},i.key))}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:16},children:a.jsx("button",{type:"button",style:{...Jn.buyBtn,background:"#666"},onClick:r,children:"No Comprar"})})]})})}const Jn={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(1000px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 16px",fontWeight:800},grid:{display:"grid",gridTemplateColumns:"repeat(4, minmax(180px, 1fr))",gap:12},cell:{background:"#0f1320",border:"1px solid rgba(255,255,255,.08)",borderRadius:12,padding:12,display:"flex",flexDirection:"column",gap:8,minHeight:160},cellTitle:{fontWeight:800,marginBottom:4},lines:{margin:0,padding:"0 0 0 16px",opacity:.85,lineHeight:1.3},buyBtn:{marginTop:"auto",alignSelf:"center",minWidth:140,padding:"10px 14px",borderRadius:10,border:"none",background:"#3fbf49",color:"#09110f",fontWeight:900,cursor:"pointer"}};function kf({onResolve:t,currentCash:e=0}){const n=E.useRef(null),[r,o]=E.useState(""),{pushModal:s,awaitTop:i}=Ht(),l=3e3,c=2e3,u=1500,d=E.useMemo(()=>{const m=Number(r);return Number.isFinite(m)&&m>0?Math.floor(m):0},[r]),h=d*l,f=d>0,g=Math.max(0,Math.floor(Number(e||0)/l)),x=m=>{var v,w;(v=m==null?void 0:m.preventDefault)==null||v.call(m),(w=m==null?void 0:m.stopPropagation)==null||w.call(m),t==null||t({action:"SKIP"})},b=m=>{const v=Number(r)||0,w=Math.min(g||1/0,v+m);o(w||"")},_=()=>o(g||""),p=async()=>{if(!f)return;const m=Number(e||0),v=Number(h||0);if(m<v){s(a.jsx(vr,{requiredAmount:v,currentCash:m,title:"Saldo insuficiente para contratar Inside Sales",message:`Voc precisa de $ ${v.toLocaleString()} mas possui $ ${m.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",qty:d,headcount:d,unitHire:l,total:h,cost:h,totalCost:h,baseExpense:c,baseRevenue:u})};return E.useEffect(()=>{const m=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var v,w;return(w=(v=n.current)==null?void 0:v.focus)==null?void 0:w.call(v)},0),()=>{document.body.style.overflow=m}},[]),a.jsx("div",{style:dt.wrap,role:"dialog","aria-modal":"true","aria-label":"Inside Sales",children:a.jsxs("div",{style:dt.card,children:[a.jsx("button",{ref:n,type:"button",style:dt.close,onClick:x,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:dt.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Inside Sales"})," quer comprar:"]}),a.jsxs("div",{style:dt.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"INSIDE SALES (SDR/BDR + CLOSER + CS)"}),a.jsxs("div",{children:[a.jsx("b",{children:"Base para clculo despesa:"}),"  quantidade ",a.jsx("b",{children:"field sales"})," ou ",a.jsx("b",{children:"inside sales"}),"."]}),a.jsxs("div",{children:[a.jsx("b",{children:"Base para clculo faturamento:"}),"  quantidade ",a.jsx("b",{children:"mxima de clientes que cada vendedor pode atender"}),"."]})]}),a.jsxs("div",{style:dt.saldoRow,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:g})]})]}),a.jsxs("div",{style:dt.inputRow,children:[a.jsx("input",{type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Inside Sales",value:r,onChange:m=>o(m.target.value),style:dt.input}),a.jsxs("div",{style:dt.quickBtns,children:[a.jsx("button",{type:"button",style:dt.quickBtn,onClick:()=>b(1),children:"+1"}),a.jsx("button",{type:"button",style:dt.quickBtn,onClick:()=>b(5),children:"+5"}),a.jsx("button",{type:"button",style:dt.quickBtn,onClick:()=>b(10),children:"+10"}),a.jsx("button",{type:"button",style:{...dt.quickBtn,fontWeight:900},onClick:_,children:"Mx"})]}),a.jsxs("div",{style:dt.totalBox,children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(h).toLocaleString()]})]})]}),a.jsxs("div",{style:dt.cards,children:[a.jsx(Pi,{title:"Sem certificado",bg:"#2a2f3b",pill:"BASE",lines:[`Contratao: $ ${l.toLocaleString()}`,`Despesa: $ ${c.toLocaleString()}`,`Faturamento: $ ${u.toLocaleString()}`]}),a.jsx(Pi,{title:"1 certificado",bg:"#f1c40f",pill:"NVEL 1",dark:!0,lines:["Contratao: ","Despesa: $ 2.100","Faturamento: $ 2.000"]}),a.jsx(Pi,{title:"2 certificados",bg:"#a78bfa",pill:"NVEL 2",dark:!0,lines:["Contratao: ","Despesa: $ 2.200","Faturamento: $ 2.500"]}),a.jsx(Pi,{title:"3 certificados",bg:"#8b5cf6",pill:"NVEL 3",dark:!0,lines:["Contratao: ","Despesa: $ 2.300","Faturamento: $ 3.000"]})]}),a.jsxs("div",{style:dt.actions,children:[a.jsx("button",{type:"button",style:{...dt.bigBtn,background:"#666",color:"#fff"},onClick:x,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...dt.bigBtn,background:f?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:p,disabled:!f,title:f?void 0:"Informe uma quantidade vlida",children:["Comprar ",f?`($ ${h.toLocaleString()})`:""]})]})]})})}function Pi({title:t,pill:e,lines:n,bg:r,dark:o=!1}){return a.jsxs("div",{style:{...dt.cardItem,background:r,color:o?"#111":"#fff",borderColor:"rgba(255,255,255,.15)"},children:[a.jsxs("div",{style:dt.cardHeader,children:[a.jsx("span",{style:{...dt.pill,background:o?"#111":"#fff",color:o?"#fff":"#111"},children:e}),a.jsx("div",{style:{fontWeight:900},children:t})]}),a.jsx("ul",{style:dt.lines,children:n.map((s,i)=>a.jsx("li",{children:s},i))})]})}const dt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldoRow:{display:"flex",justifyContent:"space-between",gap:12,padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10,marginBottom:8},inputRow:{display:"grid",gridTemplateColumns:"1fr auto auto",alignItems:"center",gap:10,marginBottom:12},input:{height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6},quickBtn:{minWidth:44,height:42,borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",fontWeight:800,cursor:"pointer",padding:"0 10px"},totalBox:{padding:"8px 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#0f1320",fontWeight:900},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,margin:"8px 0 14px"},cardItem:{border:"1px solid",borderRadius:14,padding:"14px"},cardHeader:{display:"flex",alignItems:"center",gap:8,marginBottom:8},pill:{fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:8},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function Cf({onResolve:t,unitAcquisition:e=1e3,unitMaintenance:n=50,currentCash:r=0}){const o=E.useRef(null),s=E.useRef(null),{pushModal:i,awaitTop:l}=Ht(),[c,u]=E.useState(""),d=E.useMemo(()=>{const k=Math.floor(Number(c));return Number.isFinite(k)&&k>0?k:0},[c]),h=Number(e||0),f=Number(n||0),g=Number(r||0),x=E.useMemo(()=>h<=0?0:Math.max(0,Math.floor(g/h)),[g,h]),b=d*h,_=d*f,p=d>0,m=k=>{var T,D;(T=k==null?void 0:k.preventDefault)==null||T.call(k),(D=k==null?void 0:k.stopPropagation)==null||D.call(k),t==null||t({action:"SKIP"})},v=async()=>{if(p){if(g<b){i(a.jsx(vr,{requiredAmount:b,currentCash:g,title:"Saldo insuficiente para comprar clientes",message:"Voc no possui saldo suficiente para concluir esta aquisio.",okLabel:"Entendi"})),await l();return}t==null||t({action:"BUY",qty:d,unitAcquisition:h,totalCost:b,unitMaintenance:f,maintenanceDelta:_,bensDelta:b,clientsAdded:d})}};E.useEffect(()=>{const k=document.body.style.overflow;document.body.style.overflow="hidden";const T=setTimeout(()=>{var A,y;return(y=(A=o.current)==null?void 0:A.focus)==null?void 0:y.call(A)},0),D=setTimeout(()=>{var A,y;return(y=(A=s.current)==null?void 0:A.focus)==null?void 0:y.call(A)},50),S=A=>{A.key==="Enter"&&(A.preventDefault(),v())};return window.addEventListener("keydown",S),()=>{document.body.style.overflow=k,window.removeEventListener("keydown",S),clearTimeout(T),clearTimeout(D)}},[]);const w=k=>{const T=Math.max(0,Math.min(Math.floor(Number(k)||0),1e6));u(String(T))};return a.jsx("div",{style:jt.wrap,role:"dialog","aria-modal":"true",onMouseDown:k=>{k.target===k.currentTarget&&k.stopPropagation()},children:a.jsxs("div",{style:jt.card,onMouseDown:k=>k.stopPropagation(),children:[a.jsx("button",{ref:o,type:"button",style:jt.close,onClick:m,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:jt.title,children:["Voc pode escolher quantos clientes quer comprar,",a.jsx("br",{}),"Digite o nmero de clientes:"]}),a.jsxs("p",{style:jt.warn,children:[a.jsx("b",{children:"Mas cuidado com a capacidade de atendimento da sua equipe!"}),a.jsx("br",{}),"Se o jogador adquirir mais clientes do que os vendedores podem atender, assim que passar na casa ",a.jsx("i",{children:"Faturamento do Ms"})," no receber o faturamento dos clientes excedentes e perder o(s) cliente(s) que no foram atendidos."]}),a.jsxs("div",{style:jt.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",g.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:x})]})]}),a.jsxs("div",{style:jt.qtyRow,children:[a.jsx("input",{ref:s,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Clientes",value:c,onChange:k=>w(k.target.value),style:jt.input}),a.jsxs("div",{style:jt.quickBtns,children:[a.jsx("button",{type:"button",style:jt.qbtn,onClick:()=>w(d+1),children:"+1"}),a.jsx("button",{type:"button",style:jt.qbtn,onClick:()=>w(d+5),children:"+5"}),a.jsx("button",{type:"button",style:jt.qbtn,onClick:()=>w(d+10),children:"+10"}),a.jsx("button",{type:"button",style:jt.qbtn,onClick:()=>w(x),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:jt.summary,children:[a.jsxs("div",{children:["Preo por cliente: ",a.jsxs("b",{children:["$ ",h.toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal por cliente: ",a.jsxs("b",{children:["$ ",f.toLocaleString()]})]})]}),a.jsxs("div",{style:jt.summaryStrong,children:[a.jsxs("div",{children:["Total compra: ",a.jsxs("b",{children:["$ ",Number(b).toLocaleString()]})]}),a.jsxs("div",{children:["Manuteno mensal adicionada: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]})]}),a.jsxs("div",{style:jt.actions,children:[a.jsx("button",{type:"button",style:{...jt.bigBtn,background:"#666",color:"#fff"},onClick:m,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...jt.bigBtn,background:p?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:v,disabled:!p,title:p?g<b?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",p?`($ ${b.toLocaleString()})`:""]})]})]})})}const jt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(820px, 92vw)",maxWidth:820,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},warn:{background:"#271c12",border:"1px solid rgba(255,180,0,.35)",color:"#ffd489",borderRadius:10,padding:"10px 12px",margin:"0 0 12px"},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},summary:{display:"flex",justifyContent:"space-between",gap:10,border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginBottom:8,fontWeight:700,flexWrap:"wrap"},summaryStrong:{display:"flex",justifyContent:"space-between",gap:10,border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginBottom:10,fontWeight:800,flexWrap:"wrap"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:4,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function jf({onResolve:t,unitHire:e=5e3,unitExpense:n=3e3,managesUpTo:r=7,currentCash:o=0}){const s=E.useRef(null),i=E.useRef(null),{pushModal:l,awaitTop:c}=Ht(),[u,d]=E.useState(""),h=Number(e||0),f=Number(n||0),g=Number(o||0),x=E.useMemo(()=>{const T=Math.floor(Number(u));return Number.isFinite(T)&&T>0?T:0},[u]),b=E.useMemo(()=>h<=0?0:Math.max(0,Math.floor(g/h)),[g,h]),_=x*h,p=x*f,m=x>0,v=T=>{const D=Math.floor(Number(T)||0),S=Math.max(0,Math.min(D,1e6));d(String(S))},w=T=>{var D,S;(D=T==null?void 0:T.preventDefault)==null||D.call(T),(S=T==null?void 0:T.stopPropagation)==null||S.call(T),t==null||t({action:"SKIP"})},k=async()=>{if(m){if(g<_){l(a.jsx(vr,{requiredAmount:_,currentCash:g,title:"Saldo insuficiente para contratar Gestores",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await c();return}t==null||t({action:"BUY",role:"MANAGER",qty:x,headcount:x,gestoresDelta:x,unitHire:h,unitExpense:f,totalHire:_,totalExpense:p,cost:_,total:_,cashDelta:-_,expenseDelta:p,hudUpdate:{category:"Gestores Comerciais",addQty:x}})}};return E.useEffect(()=>{const T=document.body.style.overflow;document.body.style.overflow="hidden";const D=setTimeout(()=>{var y,N;return(N=(y=s.current)==null?void 0:y.focus)==null?void 0:N.call(y)},0),S=setTimeout(()=>{var y,N;return(N=(y=i.current)==null?void 0:y.focus)==null?void 0:N.call(y)},60),A=y=>{y.key==="Enter"&&(y.preventDefault(),k())};return window.addEventListener("keydown",A),()=>{document.body.style.overflow=T,window.removeEventListener("keydown",A),clearTimeout(D),clearTimeout(S)}},[]),a.jsx("div",{style:Be.wrap,role:"dialog","aria-modal":"true",onMouseDown:T=>{T.target===T.currentTarget&&T.stopPropagation()},children:a.jsxs("div",{style:Be.card,onMouseDown:T=>T.stopPropagation(),children:[a.jsx("button",{ref:s,type:"button",style:Be.close,onClick:w,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Be.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Gestores"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de gestores:"]}),a.jsxs("div",{style:Be.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",g.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{style:Be.qtyRow,children:[a.jsx("input",{ref:i,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Gestores",value:u,onChange:T=>v(T.target.value),style:Be.input}),a.jsxs("div",{style:Be.quickBtns,children:[a.jsx("button",{type:"button",style:Be.qbtn,onClick:()=>v(x+1),children:"+1"}),a.jsx("button",{type:"button",style:Be.qbtn,onClick:()=>v(x+5),children:"+5"}),a.jsx("button",{type:"button",style:Be.qbtn,onClick:()=>v(x+10),children:"+10"}),a.jsx("button",{type:"button",style:Be.qbtn,onClick:()=>v(b),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:Be.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"GESTOR COMERCIAL"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo de despesa: ",a.jsx("b",{children:"x quantidade de Gestores"}),".",a.jsx("br",{}),"Cada Gestor gerencia at ",a.jsx("b",{children:r})," colaboradores."]}),a.jsxs("div",{style:Be.table,children:[a.jsxs("div",{style:Be.trHead,children:[a.jsx("div",{style:Be.th,children:"Certificao"}),a.jsx("div",{style:Be.th,children:"Contratao"}),a.jsx("div",{style:Be.th,children:"Despesa"}),a.jsx("div",{style:Be.th,children:"Efeito"})]}),a.jsx(Li,{label:"Sem Certificado",hire:5e3,expense:3e3,revenue:"potencializa colaboradores em 20%"}),a.jsx(Li,{label:"Com 1 certificado",hire:"-",expense:3500,revenue:"potencializa colaboradores em 30%"}),a.jsx(Li,{label:"Com 2 certificados",hire:"-",expense:4e3,revenue:"potencializa colaboradores em 40%"}),a.jsx(Li,{label:"Com 3 certificados",hire:"-",expense:4500,revenue:"potencializa colaboradores em 60%"})]})]}),a.jsxs("div",{style:Be.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / gestor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / gestor"]})]}),a.jsxs("div",{style:Be.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]})]}),a.jsxs("div",{style:Be.actions,children:[a.jsx("button",{type:"button",style:{...Be.bigBtn,background:"#666",color:"#fff"},onClick:w,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...Be.bigBtn,background:m?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:k,disabled:!m,title:m?g<_?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",m?`(${x})`:""]})]})]})})}function Li({label:t,hire:e,expense:n,revenue:r}){const o=s=>typeof s=="number"?`$ ${Number(s).toLocaleString()}`:s;return a.jsxs("div",{style:Be.tr,children:[a.jsx("div",{style:Be.td,children:t}),a.jsx("div",{style:Be.td,children:o(e)}),a.jsx("div",{style:Be.td,children:o(n)}),a.jsx("div",{style:Be.td,children:r})]})}const Be={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"12px",background:"#101522",marginBottom:12},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,overflow:"hidden"},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 3fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 3fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function Rf({onResolve:t,unitHire:e=3e3,unitExpense:n=2e3,attendsUpTo:r=5,currentCash:o=0}){const s=E.useRef(null),i=E.useRef(null),{pushModal:l,awaitTop:c}=Ht(),[u,d]=E.useState(""),h=Number(e||0),f=Number(n||0),g=Number(o||0),x=E.useMemo(()=>{const S=Math.floor(Number(u));return Number.isFinite(S)&&S>0?S:0},[u]),b=E.useMemo(()=>h<=0?0:Math.max(0,Math.floor(g/h)),[g,h]),_=x*h,p=x*f,v=x*1500,w=x>0,k=S=>{const A=Math.floor(Number(S)||0),y=Math.max(0,Math.min(A,1e6));d(String(y))},T=S=>{var A,y;(A=S==null?void 0:S.preventDefault)==null||A.call(S),(y=S==null?void 0:S.stopPropagation)==null||y.call(S),t==null||t({action:"SKIP"})},D=async()=>{if(w){if(g<_){l(a.jsx(vr,{requiredAmount:_,currentCash:g,title:"Saldo insuficiente para contratar Field Sales",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await c();return}t==null||t({action:"BUY",qty:x,unitHire:h,unitExpense:f,totalHire:_,totalExpense:p,cashDelta:-_,expenseDelta:p,revenueDelta:v,cost:_,total:_,role:"FIELD"})}};return E.useEffect(()=>{const S=document.body.style.overflow;document.body.style.overflow="hidden";const A=setTimeout(()=>{var O,L;return(L=(O=s.current)==null?void 0:O.focus)==null?void 0:L.call(O)},0),y=setTimeout(()=>{var O,L;return(L=(O=i.current)==null?void 0:O.focus)==null?void 0:L.call(O)},50),N=O=>{O.key==="Enter"&&(O.preventDefault(),D())};return window.addEventListener("keydown",N),()=>{document.body.style.overflow=S,window.removeEventListener("keydown",N),clearTimeout(A),clearTimeout(y)}},[]),a.jsx("div",{style:Ue.wrap,role:"dialog","aria-modal":"true",onMouseDown:S=>{S.target===S.currentTarget&&S.stopPropagation()},children:a.jsxs("div",{style:Ue.card,onMouseDown:S=>S.stopPropagation(),children:[a.jsx("button",{ref:s,type:"button",style:Ue.close,onClick:T,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Ue.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Field Sales"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de vendedores:"]}),a.jsxs("div",{style:Ue.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",g.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{style:Ue.qtyRow,children:[a.jsx("input",{ref:i,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Field Sales",value:u,onChange:S=>k(S.target.value),style:Ue.input}),a.jsxs("div",{style:Ue.quickBtns,children:[a.jsx("button",{type:"button",style:Ue.qbtn,onClick:()=>k(x+1),children:"+1"}),a.jsx("button",{type:"button",style:Ue.qbtn,onClick:()=>k(x+5),children:"+5"}),a.jsx("button",{type:"button",style:Ue.qbtn,onClick:()=>k(x+10),children:"+10"}),a.jsx("button",{type:"button",style:Ue.qbtn,onClick:()=>k(b),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:Ue.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"FIELD SALES (REPRESENTANTES COMERCIAIS)"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo de despesa: ",a.jsx("b",{children:"x quantidade de Field Sales"}),".",a.jsx("br",{}),"Base para clculo de faturamento: ",a.jsx("b",{children:"x quantidade mxima de clientes que cada vendedor pode atender"}),".",a.jsx("br",{}),"Cada vendedor atende at ",a.jsx("b",{children:r})," clientes."]}),a.jsxs("div",{style:Ue.table,children:[a.jsxs("div",{style:Ue.trHead,children:[a.jsx("div",{style:Ue.th,children:"Certificao"}),a.jsx("div",{style:Ue.th,children:"Contratao"}),a.jsx("div",{style:Ue.th,children:"Despesa"}),a.jsx("div",{style:Ue.th,children:"Faturamento"})]}),a.jsx(Ii,{label:"S/ Certificado",hire:"$ 3.000",expense:"$ 2.000",revenue:"$ 1.500"}),a.jsx(Ii,{label:"Com 1 certificado",hire:"-",expense:"$ 2.100",revenue:"$ 2.000"}),a.jsx(Ii,{label:"Com 2 certificados",hire:"-",expense:"$ 2.200",revenue:"$ 2.500"}),a.jsx(Ii,{label:"Com 3 certificados",hire:"-",expense:"$ 2.300",revenue:"$ 3.000"})]})]}),a.jsxs("div",{style:Ue.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / vendedor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / vendedor"]})]}),a.jsxs("div",{style:Ue.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]})]}),a.jsxs("div",{style:Ue.actions,children:[a.jsx("button",{type:"button",style:{...Ue.bigBtn,background:"#666",color:"#fff"},onClick:T,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...Ue.bigBtn,background:w?"#75e16c":"#365b31",color:"#0b120a"},onClick:D,disabled:!w,title:w?g<_?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",w?`(${x})`:""]})]})]})})}function Ii({label:t,hire:e,expense:n,revenue:r}){return a.jsxs("div",{style:Ue.tr,children:[a.jsx("div",{style:Ue.td,children:t}),a.jsx("div",{style:Ue.td,children:e}),a.jsx("div",{style:Ue.td,children:n}),a.jsx("div",{style:Ue.td,children:r})]})}const Ue={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"12px",background:"#101522",marginBottom:12},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,overflow:"hidden"},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function Tf({onResolve:t,unitHire:e=1500,unitExpense:n=1e3,attendsUpTo:r=2,currentCash:o=0}){const[s,i]=E.useState(""),l=E.useRef(null),c=E.useRef(null),{pushModal:u,awaitTop:d}=Ht(),h=Number(e||0),f=Number(n||0),g=Number(o||0),x=600,b=E.useMemo(()=>{const D=Math.floor(Number(s));return Number.isFinite(D)&&D>0?D:0},[s]),_=E.useMemo(()=>h<=0?0:Math.max(0,Math.floor(g/h)),[g,h]),p=E.useMemo(()=>b*h,[b,h]),m=E.useMemo(()=>b*f,[b,f]),v=b>0,w=D=>{const S=Math.floor(Number(D)||0),A=Math.max(0,Math.min(S,1e6));i(String(A))},k=D=>{var S;(S=D==null?void 0:D.stopPropagation)==null||S.call(D),t==null||t({action:"SKIP"})},T=async()=>{if(!v)return;if(g<p){u(a.jsx(vr,{requiredAmount:p,currentCash:g,title:"Saldo insuficiente para contratar vendedores",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await d();return}const D={action:"BUY",role:"COMMON",qty:b,headcount:b,unitHire:h,unitExpense:f,totalHire:p,totalExpense:m,total:p,cost:p,attendsUpTo:r,cashDelta:-p,expenseDelta:m,revenueDelta:x*b,revenuePerSeller:x,hudUpdate:{category:"Vendedores Comuns",addQty:b}};t==null||t(D)};return E.useEffect(()=>{const D=document.body.style.overflow;document.body.style.overflow="hidden";const S=setTimeout(()=>{var N,O;return(O=(N=l.current)==null?void 0:N.focus)==null?void 0:O.call(N)},0),A=setTimeout(()=>{var N,O;return(O=(N=c.current)==null?void 0:N.focus)==null?void 0:O.call(N)},50),y=N=>{N.key==="Enter"&&(N.preventDefault(),T())};return window.addEventListener("keydown",y),()=>{document.body.style.overflow=D,window.removeEventListener("keydown",y),clearTimeout(S),clearTimeout(A)}},[]),a.jsx("div",{style:ze.wrap,role:"dialog","aria-modal":"true","aria-label":"Comprar Vendedores Comuns",onMouseDown:D=>{D.target===D.currentTarget&&D.stopPropagation()},children:a.jsxs("div",{style:ze.card,onMouseDown:D=>D.stopPropagation(),children:[a.jsx("button",{ref:l,type:"button",style:ze.close,onClick:k,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:ze.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Vendedores Comuns"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de vendedores:"]}),a.jsxs("div",{style:ze.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",g.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:_})]})]}),a.jsxs("div",{style:ze.qtyRow,children:[a.jsx("input",{ref:c,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Vendedores Comuns",value:s,onChange:D=>w(D.target.value),style:ze.input}),a.jsxs("div",{style:ze.quickBtns,children:[a.jsx("button",{type:"button",style:ze.qbtn,onClick:()=>w(b+1),children:"+1"}),a.jsx("button",{type:"button",style:ze.qbtn,onClick:()=>w(b+5),children:"+5"}),a.jsx("button",{type:"button",style:ze.qbtn,onClick:()=>w(b+10),children:"+10"}),a.jsx("button",{type:"button",style:ze.qbtn,onClick:()=>w(_),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:ze.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"VENDEDOR COMUM (FAZ TUDO)"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo despesa: ",a.jsx("b",{children:"x quantidade vendedor comum"}),".",a.jsx("br",{}),"Base para clculo faturamento: ",a.jsx("b",{children:"x quantidade mxima de clientes que cada vendedor pode atender"}),".",a.jsx("br",{}),a.jsxs("b",{children:["Atende at ",r," clientes"]}),"."]}),a.jsxs("div",{style:ze.table,children:[a.jsxs("div",{style:ze.trHead,children:[a.jsx("div",{style:ze.th,children:"Certificao"}),a.jsx("div",{style:ze.th,children:"Contratao"}),a.jsx("div",{style:ze.th,children:"Despesa"}),a.jsx("div",{style:ze.th,children:"Faturamento"})]}),a.jsx(Mi,{label:"S/ Certificado",hire:"$ 1.500",expense:"$ 1.000",revenue:"$ 600"}),a.jsx(Mi,{label:"Com 1 certificado",hire:"-",expense:"$ 1.100",revenue:"$ 700"}),a.jsx(Mi,{label:"Com 2 certificados",hire:"-",expense:"$ 1.200",revenue:"$ 800"}),a.jsx(Mi,{label:"Com 3 certificados",hire:"-",expense:"$ 1.300",revenue:"$ 900"})]})]}),a.jsxs("div",{style:ze.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / vendedor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / vendedor"]})]}),a.jsxs("div",{style:ze.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(m).toLocaleString()]})]})]}),a.jsxs("div",{style:ze.actions,children:[a.jsx("button",{type:"button",style:{...ze.bigBtn,background:"#666",color:"#fff"},onClick:k,children:"No comprar"}),a.jsx("button",{type:"button",disabled:!v,style:{...ze.bigBtn,background:v?"#7cbe1a":"#3a3f4a",color:"#0d1200",fontWeight:900},onClick:T,title:v?g<p?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:"Comprar"})]})]})})}function Mi({label:t,hire:e,expense:n,revenue:r}){return a.jsxs("div",{style:ze.tr,children:[a.jsx("div",{style:ze.td,children:t}),a.jsx("div",{style:ze.td,children:e}),a.jsx("div",{style:ze.td,children:n}),a.jsx("div",{style:ze.td,children:r})]})}const ze={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#111522",color:"#eef2f7",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{background:"#161a28",border:"1px solid rgba(255,255,255,.12)",borderRadius:14,padding:14,marginTop:6},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,overflow:"hidden",marginTop:8},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function Df({onResolve:t,currentCash:e,currentLevel:n=null,mixOwned:r=null}){const o=E.useRef(null),{pushModal:s,awaitTop:i}=Ht(),l={A:{compra:12e3,despesa:700,faturamento:1200,color:"#1d4ed8",pill:"NVEL A",label:"100 produtos"},B:{compra:6e3,despesa:400,faturamento:600,color:"#16a34a",pill:"NVEL B",label:"50 produtos"},C:{compra:3e3,despesa:200,faturamento:300,color:"#f59e0b",pill:"NVEL C",label:"20 produtos"},D:{compra:1e3,despesa:50,faturamento:100,color:"#6b7280",pill:"NVEL D",label:"5 produtos"}};async function c(d){if(r?r[d]===!0:n===d)return;const f=l[d],g=Number((f==null?void 0:f.compra)||0),x=Number(e);if(Number.isFinite(x)&&x>=0&&x<g){s(a.jsx(vr,{requiredAmount:g,currentCash:x,title:"Saldo insuficiente para adquirir o Mix de Produtos",message:`Voc precisa de $ ${g.toLocaleString()} mas possui $ ${x.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",level:d,...f})}function u(){t==null||t({action:"SKIP"})}return E.useEffect(()=>{const d=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var h,f;return(f=(h=o.current)==null?void 0:h.focus)==null?void 0:f.call(h)},0),()=>{document.body.style.overflow=d}},[]),a.jsx("div",{style:en.wrap,role:"dialog","aria-modal":"true","aria-label":"Mix de Produtos",children:a.jsxs("div",{style:en.card,children:[a.jsx("button",{ref:o,type:"button",style:en.close,onClick:u,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:en.title,children:["Escolha um ",a.jsx("b",{children:"mix de produtos"}),":"]}),a.jsxs("div",{style:en.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"MIX DE PRODUTOS"}),a.jsxs("div",{children:["Base para clculo de ",a.jsx("b",{children:"Despesa"}),"/",a.jsx("b",{children:"Faturamento"}),": multiplicar pela ",a.jsx("b",{children:"quantidade total de clientes"}),"."]})]}),Number.isFinite(Number(e))&&a.jsxs("div",{style:en.saldo,children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsx("div",{style:en.cards,children:["A","B","C","D"].map(d=>{const h=l[d],f=r?r[d]===!0:n===d,g=f;return a.jsxs("div",{style:{...en.cardItem,borderColor:f?"#16a34a":"rgba(255,255,255,.15)",opacity:g?.6:1},children:[a.jsx("div",{style:{...en.pill,background:f?"#16a34a":"#fff",color:f?"#fff":"#111"},children:f?" ADQUIRIDO":h.pill}),a.jsx("div",{style:{...en.cardBadge,background:h.color}}),a.jsxs("ul",{style:en.lines,children:[a.jsx("li",{children:a.jsx("b",{children:h.label})}),a.jsxs("li",{children:["Compra: ",a.jsxs("b",{children:["$ ",h.compra.toLocaleString()]})]}),a.jsxs("li",{children:["Despesa: ",a.jsxs("b",{children:["$ ",h.despesa.toLocaleString()]})]}),a.jsxs("li",{children:["Faturamento: ",a.jsxs("b",{children:["$ ",h.faturamento.toLocaleString()]})]})]}),a.jsx("button",{type:"button",style:{...en.buyBtn,background:g?"#6b7280":"#2442f9",cursor:g?"not-allowed":"pointer"},onClick:()=>c(d),disabled:g,title:g?`Mix nvel ${d} j adquirido`:`Comprar Mix de Produtos ${d}`,children:g?"J Adquirido":`Comprar ${d}`})]},d)})}),a.jsx("div",{style:en.actions,children:a.jsx("button",{type:"button",style:{...en.bigBtn,background:"#444",color:"#fff"},onClick:u,children:"No comprar"})})]})})}const en={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldo:{margin:"0 0 10px",padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,marginTop:8},cardItem:{background:"#0f1320",border:"1px solid",borderRadius:14,padding:"12px",display:"flex",flexDirection:"column",gap:8},cardBadge:{width:"100%",height:6,borderRadius:999,opacity:.9},pill:{alignSelf:"flex-start",fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999,color:"#111"},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},buyBtn:{marginTop:"auto",padding:"10px 12px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer",background:"#2442f9",color:"#fff"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:14},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function Eb({onResolve:t,player:e={}}){const n=E.useRef(null),r=(_,p=0)=>Number.isFinite(Number(_))?Number(_):p,o=_=>r(_.am,0)>0,s=_=>r(_.az,0)>0,i=_=>r(_.rox,0)>0,l=_=>String(_.erpLevel||_.erpSistemas||"D").toUpperCase()==="A",c=_=>{const p=String(_.mixProdutos||"D").toUpperCase();return p==="A"||p==="B"},u=_=>{var m;const p=v=>{if(!v)return 0;try{const w=Array.isArray(v)?v:Object.values(v);return new Set(w).size}catch{return 0}};return(m=_.trainingsByVendor)!=null&&m.gestor?p(_.trainingsByVendor.gestor):r(_.gestoresCertificados,0)},d=_=>r(_.vendedoresComuns)+r(_.insideSales)+r(_.fieldSales)+r(_.gestores??_.gestoresComerciais??_.managers),h=E.useMemo(()=>[{id:"gov_fgts",kind:"SORTE",title:"Ao Governamental Positiva",text:"Liberao de FGTS aumentou o poder de compra. Receba 5 novos clientes (se tiver equipe para atender).",clientsDelta:5},{id:"referral_bonus",kind:"SORTE",title:"Indicao Lucrativa",text:"Um cliente indicou amigos e a primeira compra foi tima. Receba R$ 800,00.",cashDelta:800},{id:"network_cert_mgr",kind:"SORTE",title:"Rede Estratgica",text:"Para cada gestor com certificado, receba R$ 5.000,00.",_compute:_=>({cashDelta:5e3*u(_)})},{id:"innovation_invest",kind:"SORTE",title:"Inovao Premiada",text:"Se tiver infraestrutura (mix/sistemas) nvel A ou B, receba aporte de R$ 25.000,00.",_compute:_=>({cashDelta:c(_)?25e3:0})},{id:"segmentation",kind:"SORTE",title:"Segmentao Inteligente",text:"Novo segmento lucrativo. Receba R$ 1.000,00.",cashDelta:1e3},{id:"casa_bonus_10k",kind:"SORTE",title:"Casagrande Insights",text:"Implementao bem-sucedida. Receba R$ 10.000,00.",cashDelta:1e4},{id:"casa_network_7k",kind:"SORTE",title:"Rede de Contatos Valiosa",text:"Parceria estratgica. Ganhe R$ 7.000,00.",cashDelta:7e3},{id:"casa_strategy_5k",kind:"SORTE",title:"Estratgia Personalizada",text:"Processos melhorados. Receba R$ 5.000,00.",cashDelta:5e3},{id:"casa_best_practices_8k",kind:"SORTE",title:"Melhores Prticas",text:"Eficincia aumentada. Receba R$ 8.000,00.",cashDelta:8e3},{id:"casa_start_6k",kind:"SORTE",title:"Satisfao do Cliente em Alta",text:"Fidelidade e vendas sobem. Receba R$ 6.000,00.",cashDelta:6e3},{id:"casa_change_cert_blue",kind:"SORTE",title:"Gesto de Mudanas Bem-sucedida",text:"Um vendedor generalista concluiu todos os treinamentos. Ganhe um certificado AZUL para esse vendedor.",_compute:()=>({certDelta:{az:1}})},{id:"training_roi_team",kind:"SORTE",title:"Treinamento Personalizado",text:"Receba R$ 500,00 por membro participante.",_compute:_=>({cashDelta:500*Math.max(0,d(_))})},{id:"purple_award_25k",kind:"SORTE",title:"Profissional do Ano (Roxo)",text:"Se houver pelo menos um colaborador com certificado roxo, receba R$ 25.000,00.",_compute:_=>({cashDelta:i(_)?25e3:0})},{id:"reputation_1500",kind:"SORTE",title:"Reputao Impecvel",text:"timas avaliaes elevam a confiana. Receba R$ 1.500,00.",cashDelta:1500},{id:"client_cheer_per_client",kind:"SORTE",title:"Cliente Promotor",text:"Ganhe R$ 500,00 por cada cliente atual.",_compute:_=>({cashDelta:500*Math.max(0,r(_.clients))})},{id:"big_order_freight_save",kind:"SORTE",title:"Grande Pedido + Frete Econmico",text:"Receba R$ 1.500,00.",cashDelta:1500},{id:"sales_win_2k",kind:"SORTE",title:"Vitria de Vendas",text:"Venda aguardada foi fechada. Receba R$ 2.000,00.",cashDelta:2e3},{id:"missed_admission",kind:"REVES",title:"Admisso No Reportada",text:"Multa governamental. Pague R$ 3.000,00.",cashDelta:-3e3},{id:"office_renovation",kind:"REVES",title:"Renovao Custosa",text:"Gastos de obra. Pague R$ 7.000,00.",cashDelta:-7e3},{id:"env_fine_20k",kind:"REVES",title:"Impacto Ambiental",text:"Multa ambiental. Pague R$ 20.000,00.",cashDelta:-2e4},{id:"key_client_at_risk",kind:"REVES",title:"Cliente Chave em Risco",text:"Sem certificado AMARELO: perca 1 cliente e pague R$ 2.000,00.",_compute:_=>o(_)?{clientsDelta:0,cashDelta:0,_overrideText:"Voc possui certificado amarelo. Nada acontece."}:{clientsDelta:-1,cashDelta:-2e3}},{id:"social_crisis",kind:"REVES",title:"Crise nas Redes",text:"Pague R$ 400,00 e perca 2 clientes.",cashDelta:-400,clientsDelta:-2},{id:"car_break",kind:"REVES",title:"Carro Quebrou",text:"Conserto urgente. Pague R$ 1.000,00.",cashDelta:-1e3},{id:"service_improvement_1k",kind:"REVES",title:"Aprimoramentos de Servio",text:"Pague R$ 1.000,00.",cashDelta:-1e3},{id:"recovery_failed_5k",kind:"REVES",title:"Recuperao Mal Sucedida",text:"Cancele grande pedido. Pague R$ 5.000,00.",cashDelta:-5e3},{id:"discount_pressure_1k",kind:"REVES",title:"Descontos Forados",text:"Sem certificado verde: perca R$ 1.000,00 de lucro.",cashDelta:-1e3},{id:"domino_2k",kind:"REVES",title:"Efeito Domin",text:"Cancelamentos em cadeia. Perca R$ 2.000,00.",cashDelta:-2e3},{id:"needs_change_lose4",kind:"REVES",title:"Necessidades Mudaram",text:"Sem certificado AZUL: perca 4 clientes.",_compute:_=>s(_)?{clientsDelta:0,_overrideText:"Voc possui certificado azul. Nada acontece."}:{clientsDelta:-4}},{id:"payroll_error_1k",kind:"REVES",title:"Erro na Folha",text:"Corrigir problema. Pague R$ 1.000,00.",cashDelta:-1e3},{id:"strike_lose5",kind:"REVES",title:"Greve Inesperada",text:"Atrasos e perdas. Perca 5 clientes.",clientsDelta:-5},{id:"customs_hold_3k",kind:"REVES",title:"Alfndega",text:"Pague R$ 3.000,00.",cashDelta:-3e3},{id:"cyber_breach_7k_or_A",kind:"REVES",title:"Falha de Segurana",text:"Se NO tiver sistemas nvel A, pague R$ 7.000,00.",_compute:_=>({cashDelta:l(_)?0:-7e3})},{id:"supplier_issue_2k",kind:"REVES",title:"Fornecedor em Crise",text:"Expedio expressa. Pague R$ 2.000,00.",cashDelta:-2e3},{id:"reg_change_30k",kind:"REVES",title:"Regulamentao Nova",text:"Adequao de processos. Pague R$ 30.000,00.",cashDelta:-3e4},{id:"bad_mix_2500",kind:"REVES",title:"Mix de Produtos Desequilibrado",text:"Descontos e liquidaes. Pague R$ 2.500,00.",cashDelta:-2500},{id:"quality_crisis",kind:"REVES",title:"Crise de Qualidade",text:"Perca 1 cliente e pague R$ 1.000,00.",cashDelta:-1e3,clientsDelta:-1}],[]),[f]=E.useState(()=>h[Math.floor(Math.random()*h.length)]),g=E.useMemo(()=>{const _={action:"APPLY_CARD",kind:f.kind,id:f.id,title:f.title};if(typeof f._compute=="function"){const m=f._compute(e||{}),{_overrideText:v,...w}=m||{};return{text:v||f.text,payload:{..._,...w}}}const p={};return Number.isFinite(f.cashDelta)&&(p.cashDelta=Number(f.cashDelta)),Number.isFinite(f.clientsDelta)&&(p.clientsDelta=Number(f.clientsDelta)),{text:f.text,payload:{..._,...p}}},[f,e]),x=()=>t==null?void 0:t(g.payload),b=()=>t==null?void 0:t({action:"SKIP"});return E.useEffect(()=>{const _=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var p,m;return(m=(p=n.current)==null?void 0:p.focus)==null?void 0:m.call(p)},0),()=>{document.body.style.overflow=_}},[]),a.jsx("div",{style:Er.wrap,role:"dialog","aria-modal":"true","aria-label":"Sorte e Revs",children:a.jsxs("div",{style:Er.card,children:[a.jsx("button",{ref:n,style:Er.close,onClick:b,"aria-label":"Fechar",children:""}),a.jsx("div",{style:Er.badge(f.kind),children:f.kind==="SORTE"?"SORTE":"REVS"}),f.title&&a.jsx("h2",{style:Er.title,children:f.title}),a.jsx("p",{style:Er.text,children:g.text}),a.jsx("div",{style:Er.footer,children:a.jsx("button",{type:"button",style:Er.okBtn,onClick:x,children:"OK"})})]})})}const Er={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(760px, 92vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:18,padding:"22px",border:"1px solid rgba(255,255,255,.12)",boxShadow:"0 10px 40px rgba(0,0,0,.4)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},badge:t=>({display:"inline-block",padding:"6px 12px",borderRadius:999,fontWeight:900,marginBottom:8,background:t==="SORTE"?"#22c55e":"#ef4444",color:"#111"}),title:{margin:"2px 0 6px",fontWeight:900},text:{fontSize:18,lineHeight:1.5,opacity:.95,margin:"6px 0 14px"},footer:{display:"flex",justifyContent:"center"},okBtn:{minWidth:140,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer",background:"#fff",color:"#111"}};function kb({value:t=0,onResolve:e}){const n=Number(t||0),r=o=>{var s,i;(s=o==null?void 0:o.preventDefault)==null||s.call(o),(i=o==null?void 0:o.stopPropagation)==null||i.call(o),e==null||e({action:"OK"})};return a.jsx(ui,{zIndex:2147483647,onClose:()=>e==null?void 0:e({action:"CLOSE"}),children:a.jsxs("div",{style:{padding:28,textAlign:"center",pointerEvents:"auto"},children:[a.jsx("div",{style:{fontWeight:900,fontSize:28,color:"#4caf50",letterSpacing:.5,marginBottom:6},children:"FATURAMENTO DO MS"}),a.jsx("div",{style:{opacity:.9,marginBottom:16},children:"Ser creditado o valor do Faturamento ao seu Saldo"}),a.jsxs("div",{style:{fontSize:18,marginBottom:24},children:["no valor de: ",a.jsxs("b",{children:["$ ",n.toLocaleString()]})]}),a.jsx("button",{type:"button",onClick:r,className:"btn",style:{minWidth:120,background:"#8bd65a",color:"#1a1f2a",fontWeight:800,borderRadius:10},children:"OK"})]})})}function Cb({expense:t=0,loanCharge:e=0,onResolve:n}){const r=Number(t||0)+Number(e||0),o=s=>{var i,l;(i=s==null?void 0:s.preventDefault)==null||i.call(s),(l=s==null?void 0:s.stopPropagation)==null||l.call(s),n==null||n({action:"OK"})};return a.jsx(ui,{zIndex:2147483647,onClose:()=>n==null?void 0:n({action:"CLOSE"}),children:a.jsxs("div",{style:{padding:28,textAlign:"center",pointerEvents:"auto"},children:[a.jsx("div",{style:{fontWeight:900,fontSize:26,color:"#ffb74d",letterSpacing:.5,marginBottom:6},children:"DESPESAS DO MS"}),a.jsxs("div",{style:{marginBottom:8},children:["Despesas operacionais:",a.jsxs("b",{children:["-$ ",Number(t).toLocaleString()]})]}),Number(e)>0&&a.jsxs("div",{style:{marginBottom:8,color:"#ffd54f"},children:["Emprstimo cobrado nesta rodada:",a.jsxs("b",{children:["-$ ",Number(e).toLocaleString()]})]}),a.jsxs("div",{style:{margin:"6px 0 18px",opacity:.85},children:["Total a debitar: ",a.jsxs("b",{children:["-$ ",r.toLocaleString()]})]}),a.jsx("button",{type:"button",onClick:o,className:"btn",style:{minWidth:120,background:"#ffcc80",color:"#1a1f2a",fontWeight:800,borderRadius:10},children:"OK"})]})})}const Te={backdrop:{position:"fixed",inset:0,background:"rgba(0,0,0,.6)",display:"grid",placeItems:"center",zIndex:9999},card:{width:"min(920px, 96vw)",maxHeight:"90vh",overflow:"auto",background:"#15161a",color:"#e9ecf1",border:"1px solid rgba(255,255,255,.08)",borderRadius:20,boxShadow:"0 20px 50px rgba(0,0,0,.5)"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 16px",borderBottom:"1px solid rgba(255,255,255,.08)"},closeBtn:{width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#fff",fontSize:20,cursor:"pointer"},body:{padding:16},lead:{opacity:.95,lineHeight:1.5},bullets:{margin:"8px 0 16px 18px"},rowBtns:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:12,flexWrap:"wrap"},cta:{padding:"12px 16px",border:0,borderRadius:12,color:"#fff",fontWeight:900,cursor:"pointer",boxShadow:"0 10px 24px rgba(0,0,0,.25)"},back:{padding:"10px 14px",borderRadius:12,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#e9ecf1",cursor:"pointer"},subHeader:{marginBottom:8},infoRow:{display:"flex",gap:8,alignItems:"baseline",margin:"4px 0"},input:{width:"100%",padding:"12px 12px",borderRadius:12,background:"#0f1115",color:"#fff",border:"1px solid rgba(255,255,255,.15)",marginTop:10},option:{padding:16,background:"rgba(255,255,255,.04)",border:"1px solid rgba(255,255,255,.08)",borderRadius:14,textAlign:"center",cursor:"pointer"},spin:{width:34,height:34,borderRadius:8,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#fff",fontSize:18,cursor:"pointer"}};function jb({playerName:t,loanAvailable:e,hasPendingLoan:n,onGoLoan:r,onGoReduce:o,onGoFire:s,onDeclareBankruptcy:i}){return a.jsxs("div",{style:Te.body,children:[a.jsxs("p",{style:Te.lead,children:["Voc est sem dinheiro, ",t,". Escolha uma das opes:"]}),n&&a.jsx("div",{style:{...Te.lead,color:"#ef4444",fontWeight:"bold",marginBottom:"16px"},children:" Voc j possui um emprstimo pendente. Cada jogador s pode ter um emprstimo por vez."}),a.jsxs("ul",{style:Te.bullets,children:[a.jsxs("li",{children:["Pedir ",a.jsx("b",{children:"emprstimo"})," nico com 50% de juros garantido por 50% dos seus ",a.jsx("b",{children:"BENS"})," (limite ",`$ ${e}`,")."]}),a.jsxs("li",{children:[a.jsx("b",{children:"Reduzir"})," nveis de ",a.jsx("b",{children:"MIX de Produtos"})," ou ",a.jsx("b",{children:"ERP/Sistemas"})," e receber 50% do valor pago."]}),a.jsxs("li",{children:[a.jsx("b",{children:"Demitir"})," funcionrios e receber 50% do valor total."]})]}),a.jsxs("div",{style:Te.rowBtns,children:[a.jsx("button",{style:{...Te.cta,background:"#ef4444"},onClick:s,children:"DEMITIR"}),a.jsx("button",{style:{...Te.cta,background:"#a16207"},onClick:o,children:"REDUZIR"}),a.jsx("button",{style:{...Te.cta,background:n?"#6b7280":"#16a34a",cursor:n?"not-allowed":"pointer"},onClick:n?void 0:r,disabled:n,children:n?"EMPRSTIMO (J REALIZADO)":"EMPRSTIMO"}),a.jsx("button",{style:{...Te.cta,background:"#d32f2f",fontWeight:"bold"},onClick:i,children:"DECLARAR FALNCIA"})]})]})}function Rb({loanAvailable:t,alreadyHasLoan:e=!1,onBack:n,onConfirm:r}){const[o,s]=E.useState(""),i=E.useMemo(()=>Math.max(0,Math.floor(Number(o)||0)),[o]),l=!e&&i>0&&i<=Number(t||0),c=()=>{if(e){r==null||r({type:"LOAN_DENIED",reason:"ALREADY_TAKEN"});return}const u=Math.max(0,Math.floor(Number(t)||0)),d=Math.max(0,Math.min(u,i));if(d>0){const h={type:"LOAN",amount:d,cashDelta:d,loan:{amount:d,charged:!1}};console.log("[DEBUG] RecoveryLoan enviando payload:",h),r==null||r(h)}else r==null||r({type:"LOAN_DENIED",reason:"INVALID_AMOUNT"})};return a.jsxs("div",{style:Te.body,children:[a.jsx("div",{style:Te.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"EMPRSTIMO"})}),a.jsxs("p",{children:["Voc pode realizar um emprstimo colocando ",a.jsx("b",{children:"50% dos seus BENS"})," como garantia (pago na prxima Despesas Operacionais)."]}),a.jsxs("div",{style:Te.infoRow,children:[a.jsx("span",{children:"Valor disponvel:"})," ",a.jsxs("b",{children:["$",Number(t||0)]})]}),a.jsxs("div",{style:Te.infoRow,children:[a.jsx("span",{children:"Valor garantia:"})," ",a.jsxs("b",{children:["$",Number(t||0)]})]}),e&&a.jsx("div",{style:{...Te.infoRow,color:"#fca5a5",border:"1px solid rgba(255,0,0,.25)",padding:"8px 10px",borderRadius:8,background:"rgba(255,0,0,.06)"},children:"Voc j possui um emprstimo ativo. No  possvel pegar outro."}),a.jsx("input",{style:Te.input,type:"number",min:0,max:Math.max(0,Number(t||0)),placeholder:"Digite o valor que quer emprestar",value:o,onChange:u=>s(u.target.value),disabled:e}),a.jsxs("div",{style:{fontSize:12,opacity:.8,marginTop:6},children:["Mx: $",Number(t||0),"  valor ser somado ao seu saldo e cobrado na prxima Despesas Operacionais."]}),a.jsxs("div",{style:Te.rowBtns,children:[a.jsx("button",{style:Te.back,onClick:n,children:" Voltar"}),a.jsx("button",{style:{...Te.cta,background:"#16a34a",opacity:l?1:.6,cursor:l?"pointer":"not-allowed"},onClick:c,disabled:!l,children:"Pegar Emprstimo"})]})]})}function Tb(t){const{options:e=[],optionsMix:n,optionsErp:r,mixOwned:o,erpOwned:s,credits:i,snapshot:l,onBack:c,onConfirm:u}=t,d=(...y)=>console.log("[RecoveryReduce]",...y),h={MIX:{accent:"#06B6D4",soft:"rgba(6,182,212,.14)",ring:"rgba(6,182,212,.45)",glow:"rgba(6,182,212,.35)",pillBg:"rgba(6,182,212,.18)",pillFg:"#9FF1FF"},ERP:{accent:"#8B5CF6",soft:"rgba(139,92,246,.14)",ring:"rgba(139,92,246,.45)",glow:"rgba(139,92,246,.35)",pillBg:"rgba(139,92,246,.18)",pillFg:"#E9D5FF"}},f=["A","B","C","D"],g=(y,N,O)=>f.map(L=>({key:`${y}-${L}`,group:y,level:L,label:`Nvel ${L}`,credit:Number((N==null?void 0:N[L])??0),owned:!!(O!=null&&O[L])})),x=E.useMemo(()=>Array.isArray(n)&&n.length?n:i!=null&&i.MIX?g("MIX",i.MIX,o):g("MIX",{A:0,B:0,C:0,D:0},o),[n,i,o]),b=E.useMemo(()=>Array.isArray(r)&&r.length?r:i!=null&&i.ERP?g("ERP",i.ERP,s):g("ERP",{A:0,B:0,C:0,D:0},s),[r,i,s]);E.useEffect(()=>{console.groupCollapsed("[RecoveryReduce] props snapshot"),console.log("mixCards:",x),console.log("erpCards:",b),console.log("mixOwned:",o),console.log("erpOwned:",s),console.log("credits:",i),console.groupEnd()},[x,b,o,s,i]);const[_,p]=E.useState([]),[m,v]=E.useState(new Set),[w,k]=E.useState(!1),T=y=>{y.level!=="D"&&(!y.owned||y.owned===!1||m.has(y.key)||y.alreadyReduced||p(N=>N.some(L=>L.key===y.key)?N.filter(L=>L.key!==y.key):[...N,y]))},D=E.useMemo(()=>_.reduce((y,N)=>y+Number(N.credit||0),0),[_]),S=y=>_.some(N=>N.key===y.key),A=y=>{var re,P;const N=S(y),O=y.level==="D",L=y.owned===!0,U=O||!L||m.has(y.key)||y.alreadyReduced||w,Se=h[y.group]||h.MIX,We={...Te.option,position:"relative",borderRadius:14,background:U?"rgba(148,163,184,.12)":Se.soft,border:N?`2.5px solid ${Se.accent}`:"1px solid rgba(148,163,184,.25)",boxShadow:N?`0 0 0 2px ${Se.ring}, 0 10px 24px ${Se.glow}`:"none",cursor:U?"not-allowed":"pointer",opacity:U?.35:1,transition:"transform .06s ease-out, box-shadow .12s ease-out, border-color .12s"},Ze={fontWeight:900,fontSize:16,marginBottom:8,color:U?"#CBD5E1":"#E5F9FF"},G={fontWeight:700,marginTop:2,color:U?"#A1A1AA":"#FFFFFF"},te={position:"absolute",top:8,right:8,fontSize:11,padding:"3px 8px",borderRadius:999,background:U?"rgba(148,163,184,.22)":Se.pillBg,color:U?"#E5E7EB":Se.pillFg,border:`1px solid ${U?"rgba(148,163,184,.35)":Se.ring}`,letterSpacing:.2};return a.jsxs("button",{onClick:()=>T(y),disabled:U,"aria-pressed":N,style:We,title:O?"Nvel D  o bsico e no pode ser reduzido.":L?m.has(y.key)?"Nvel j reduzido nesta sesso.":y.alreadyReduced?"Este nvel j foi reduzido anteriormente. Compre o nvel novamente para poder reduzir.":"":"Este nvel no est disponvel. Compre o nvel novamente para poder reduzir.",onMouseDown:Oe=>!U&&(Oe.currentTarget.style.transform="translateY(1px)"),onMouseUp:Oe=>Oe.currentTarget.style.transform="translateY(0)",onMouseLeave:Oe=>Oe.currentTarget.style.transform="translateY(0)",children:[a.jsx("span",{style:te,children:O?"bsico":L?m.has(y.key)?"vendido":y.alreadyReduced?"j reduzido":"adquirido":"zerado"}),a.jsx("div",{style:Ze,children:y.label}),a.jsx("div",{style:{color:U?"#A1A1AA":"#BFEFFF"},children:"Crdito ao reduzir:"}),a.jsxs("div",{style:G,children:["$",((P=(re=y.credit).toLocaleString)==null?void 0:P.call(re))??y.credit]})]},y.key)};return a.jsxs("div",{style:Te.body,children:[a.jsx("div",{style:Te.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"REDUZIR NVEL MIX/ERP"})}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[a.jsxs("div",{style:{padding:8,borderRadius:8,background:"rgba(255,255,255,0.05)"},children:[a.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"MIX PRODUTOS"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12},children:x.map(A)})]}),a.jsxs("div",{style:{padding:8,borderRadius:8,background:"rgba(255,255,255,0.05)"},children:[a.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"ERP/SISTEMAS"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12},children:b.map(A)})]})]}),a.jsxs("div",{style:{marginTop:10,display:"flex",justifyContent:"space-between",alignItems:"center",opacity:.92},children:[a.jsxs("div",{children:["Selecionados: ",a.jsx("b",{children:_.length}),"    Total: ",a.jsxs("b",{children:["$",D.toLocaleString()]})]}),a.jsx("div",{style:{fontSize:12,opacity:.7},children:"S  possvel selecionar nveis adquiridos."})]}),a.jsxs("div",{style:Te.rowBtns,children:[a.jsx("button",{style:Te.back,onClick:c,disabled:w,children:" Voltar"}),a.jsx("button",{style:{...Te.cta,background:"#F59E0B",color:"#101010",fontWeight:900,opacity:_.length&&!w?1:.55},onClick:()=>{if(!_.length||w)return;k(!0),v(N=>{const O=new Set(N);return _.forEach(L=>O.add(L.key)),O});const y={items:_.map(N=>({...N,selected:!0})),total:D};d("confirm payload =>",y),u==null||u(y),p([]),k(!1)},disabled:!_.length||w,children:"REDUZIR"})]})]})}function Db({roles:t=[],onBack:e,onConfirm:n}){const r=E.useMemo(()=>t.map(f=>{const g=Number(f.unit??f.total??0),x=Number(f.owned??f.qty??0);return{...f,unit:g,owned:x}}),[t]),[o,s]=E.useState(()=>{const f={};return r.forEach(g=>{f[g.key]=0}),f}),i=f=>`R$ ${Number(f||0).toLocaleString("pt-BR")}`,l=f=>Math.floor(Number(f||0)*.5),c=(f,g)=>{s(x=>{const b=r.find(m=>m.key===f);if(!b)return x;const _=Number(x[f]||0),p=Math.max(0,Math.min(b.owned,_+g));return p===_?x:{...x,[f]:p}})},u=E.useMemo(()=>{const f={};return r.forEach(g=>{const x=Number(o[g.key]||0);f[g.key]=l(g.unit)*x}),f},[o,r]),d=E.useMemo(()=>Object.values(u).reduce((f,g)=>f+g,0),[u]),h=()=>{if(d<=0)return;const f={};r.forEach(g=>{f[g.key]=Number(o[g.key]||0)}),n==null||n({type:"FIRE",items:f,creditByRole:u,totalCredit:d,amount:d,note:`Demisses +${i(d)}`})};return a.jsxs("div",{style:Te.body,children:[a.jsx("div",{style:Te.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"DEMITIR FUNCIONRIOS"})}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr 1.2fr 1fr",gap:8,opacity:.9,fontWeight:700,marginBottom:6},children:[a.jsx("div",{children:"Cargo"}),a.jsx("div",{children:"Valor Unitrio"}),a.jsx("div",{children:"Qtd demitir"}),a.jsx("div",{children:"Crdito"})]}),a.jsx("div",{style:{display:"grid",gap:12},children:r.map(f=>{const g=Number(o[f.key]||0),x=Number(f.unit||0),b=Number(f.owned||0),_=l(x),p=_*g,m=g<=0,v=g>=b||b<=0;return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr 1.2fr 1fr",alignItems:"center",gap:8},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:800},children:f.label}),a.jsxs("div",{style:{opacity:.75,fontSize:12},children:["Possui: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{children:[a.jsx("div",{children:a.jsx("b",{children:i(x)})}),a.jsxs("div",{style:{opacity:.75,fontSize:12},children:["Crdito por un.: ",a.jsx("b",{children:i(_)})]})]}),a.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[a.jsx("button",{style:{...Te.spin,opacity:m?.5:1,cursor:m?"not-allowed":"pointer"},disabled:m,onClick:()=>c(f.key,-1),children:"-"}),a.jsx("div",{style:{minWidth:28,textAlign:"center",fontWeight:800},children:g}),a.jsx("button",{style:{...Te.spin,opacity:v?.5:1,cursor:v?"not-allowed":"pointer"},disabled:v,onClick:()=>c(f.key,1),children:"+"})]}),a.jsx("div",{children:a.jsx("b",{children:i(p)})})]},f.key)})}),a.jsxs("div",{style:{marginTop:12,textAlign:"right",fontWeight:900},children:["Total a resgatar: ",a.jsx("b",{children:i(d)})]}),a.jsxs("div",{style:Te.rowBtns,children:[a.jsx("button",{style:Te.back,onClick:e,children:" Voltar"}),a.jsx("button",{style:{...Te.cta,background:"#ef4444",opacity:d>0?1:.6},onClick:h,disabled:d<=0,children:"DEMITIR"})]})]})}function Nf({playerName:t="Jogador",bens:e=0,currentPlayer:n,canClose:r=!0}){var A;const{resolveTop:o,popModal:s}=(Ht==null?void 0:Ht())||{},[i,l]=E.useState("menu"),c=()=>{r&&(s?s(!1):o==null||o(null))},u=E.useMemo(()=>({A:12e3,B:6e3,C:3e3,D:1e3}),[]),d=E.useMemo(()=>({A:1e4,B:4e3,C:1500,D:500}),[]),h=y=>{if(y==null)return"";const N=String(y).trim().toUpperCase();if(["A","B","C","D"].includes(N))return N;const O=Number(N);return O===1?"A":O===2?"B":O===3?"C":O===4?"D":""},f=E.useMemo(()=>{const y=n||{};return{name:y.name??t,bens:Number(y.bens??e??0),vendedoresComuns:Number(y.vendedoresComuns??0),fieldSales:Number(y.fieldSales??0),insideSales:Number(y.insideSales??0),gestores:Number(y.gestores??y.gestoresComerciais??0),raw:y}},[n,t,e]);E.useEffect(()=>{console.group("[RecoveryModal] mount snapshot"),console.log("raw player =>",f.raw),console.groupEnd()},[f.raw]);const g=E.useMemo(()=>Math.max(0,Math.floor(f.bens*.5)),[f.bens]),x=E.useMemo(()=>{var N;const y=(N=f.raw)==null?void 0:N.loanPending;return y&&Number(y.amount)>0},[(A=f.raw)==null?void 0:A.loanPending]),b=E.useMemo(()=>[{key:"mix",label:"MIX PRODUTOS",credit:1500},{key:"erp",label:"ERP/SISTEMAS",credit:1500}],[]),_=E.useMemo(()=>[{key:"comum",label:"Vendedor Comum",unit:1500,owned:f.vendedoresComuns},{key:"field",label:"Field Sales",unit:3e3,owned:f.fieldSales},{key:"inside",label:"Inside Sales",unit:3e3,owned:f.insideSales},{key:"gestor",label:"Gestor",unit:5e3,owned:f.gestores}],[f]),p=E.useMemo(()=>{const y=f.raw||{};return h(y.mixProdutosLetter??y.mixProdutos??y.mixProducts??y.mixLevelLetter??y.mixLevel??y.mix_level??y.mix??y.mix_produtos??y.mix_products)},[f.raw]),m=E.useMemo(()=>{var N;const y=f.raw||{};return h(y.erpSistemasLetter??y.erpSistemas??((N=y.erpSystems)==null?void 0:N.level)??y.erpSystemsLetter??y.erpLevelLetter??y.erpLevel??y.erp_level??y.erp??y.erp_sistemas)},[f.raw]),v=E.useMemo(()=>{const y=f.raw||{},N=y.mixOwned??y.mix??{},O=new Set;return N.A===!0&&O.add("A"),N.B===!0&&O.add("B"),N.C===!0&&O.add("C"),N.D===!0&&O.add("D"),O.size===0&&O.add("D"),O},[f.raw]),w=E.useMemo(()=>{const y=f.raw||{},N=y.erpOwned??y.erp??{},O=new Set;return N.A===!0&&O.add("A"),N.B===!0&&O.add("B"),N.C===!0&&O.add("C"),N.D===!0&&O.add("D"),O.size===0&&O.add("D"),O},[f.raw]);E.useEffect(()=>{console.group("[RecoveryModal] owned detect"),console.log("mixLetter(panel):",p," -> ownedMix =",Object.fromEntries(["A","B","C","D"].map(y=>[y,v.has(y)]))),console.log("erpLetter(panel):",m," -> ownedErp =",Object.fromEntries(["A","B","C","D"].map(y=>[y,w.has(y)]))),console.groupEnd()},[p,m,v,w]);const k=E.useMemo(()=>{var N,O;const y=f.raw||{};return{MIX:Array.isArray((N=y.reducedLevels)==null?void 0:N.MIX)?y.reducedLevels.MIX:[],ERP:Array.isArray((O=y.reducedLevels)==null?void 0:O.ERP)?y.reducedLevels.ERP:[]}},[f.raw]),T=E.useMemo(()=>["A","B","C","D"].map(y=>({key:`mix-${y}`,group:"MIX",level:y,label:`Nvel ${y}`,credit:(u[y]||0)/2,owned:v.has(y),alreadyReduced:k.MIX.includes(y)})),[v,u,k.MIX]),D=E.useMemo(()=>["A","B","C","D"].map(y=>({key:`erp-${y}`,group:"ERP",level:y,label:`Nvel ${y}`,credit:(d[y]||0)/2,owned:w.has(y),alreadyReduced:k.ERP.includes(y)})),[w,d,k.ERP]),S=E.useMemo(()=>({MIX:{A:u.A/2,B:u.B/2,C:u.C/2,D:u.D/2},ERP:{A:d.A/2,B:d.B/2,C:d.C/2,D:d.D/2}}),[u,d]);return a.jsx("div",{style:Te.backdrop,children:a.jsxs("div",{style:Te.card,children:[a.jsxs("div",{style:Te.header,children:[a.jsx("div",{style:{fontWeight:900,fontSize:22},children:"RECUPERAO FINANCEIRA"}),r&&a.jsx("button",{onClick:c,style:Te.closeBtn,children:""})]}),i==="menu"&&a.jsx(jb,{playerName:f.name,loanAvailable:g,hasPendingLoan:x,onGoLoan:()=>l("loan"),onGoReduce:()=>l("reduce"),onGoFire:()=>l("fire"),onDeclareBankruptcy:()=>o==null?void 0:o({type:"TRIGGER_BANKRUPTCY"})}),i==="loan"&&a.jsx(Rb,{loanAvailable:g,onBack:()=>l("menu"),onConfirm:y=>{console.log("[DEBUG] RecoveryModal recebeu payload do RecoveryLoan:",y),console.log("[DEBUG] RecoveryModal chamando resolveTop com:",y);const N=o==null?void 0:o(y);console.log("[DEBUG] RecoveryModal resolveTop retornou:",N)}}),i==="reduce"&&a.jsx(Tb,{options:b,optionsMix:T,optionsErp:D,mixOwned:{A:v.has("A"),B:v.has("B"),C:v.has("C"),D:v.has("D")},erpOwned:{A:w.has("A"),B:w.has("B"),C:w.has("C"),D:w.has("D")},credits:S,snapshot:f,onBack:()=>l("menu"),onConfirm:y=>{if(Array.isArray(y==null?void 0:y.items)){const L=Number(y.total??y.items.filter(U=>U.selected).reduce((U,Se)=>U+Number(Se.credit||0),0));o==null||o({type:"REDUCE",amount:L,items:y.items,note:`Reduo mltipla +R$ ${L.toLocaleString()}`});return}const N=Number((y==null?void 0:y.credit)||(y==null?void 0:y.amount)||0),O=y&&y.group&&y.level?{group:String(y.group).toUpperCase(),level:String(y.level).toUpperCase(),credit:N}:null;o==null||o({type:"REDUCE",amount:N,group:O==null?void 0:O.group,level:O==null?void 0:O.level,selection:O,note:O?`Reduo ${O.group} nvel ${O.level} +R$ ${N.toLocaleString()}`:`Reduo +R$ ${N.toLocaleString()}`})}}),i==="fire"&&a.jsx(Db,{roles:_,onBack:()=>l("menu"),onConfirm:y=>o==null?void 0:o(y)})]},i)})}function Nb({playerName:t="Jogador",balanceText:e=""}){const{resolveTop:n,closeModal:r}=Ht(),o=E.useRef(null);E.useEffect(()=>{var u;const c=document.body.style.overflow;return document.body.style.overflow="hidden",(u=o.current)==null||u.focus(),()=>{document.body.style.overflow=c}},[]),E.useEffect(()=>{const c=u=>{(u.key==="Escape"||u.key==="Enter"||u.key===" ")&&(u.preventDefault(),u.stopPropagation())};return document.addEventListener("keydown",c,!0),()=>document.removeEventListener("keydown",c,!0)},[]);const s=c=>{c.preventDefault(),c.stopPropagation()},i=()=>{n(!1),r==null||r()},l=()=>{n(!0),r==null||r()};return a.jsxs(ui,{width:780,onClose:i,children:[a.jsx("style",{children:`
        .sg-modal-panel {
          background:#111827; border:1px solid rgba(255,255,255,0.08);
          border-radius:16px; padding:20px 22px 18px; color:#e5e7eb;
          position:relative; box-shadow:0 10px 35px rgba(0,0,0,.55);
        }
        .sg-modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
        .sg-modal-title{font-size:22px;font-weight:700;margin:0}
        .sg-icon-close{background:transparent;border:0;color:#9ca3af;font-size:24px;line-height:1;cursor:pointer}
        .sg-icon-close:hover{color:#e5e7eb}

        .sg-modal-infos{display:flex;justify-content:space-between;align-items:center;
          font-size:14px;color:#cbd5e1;margin:6px 0 12px}
        .sg-modal-infos .right{opacity:.8}

        .sg-callout-warning{
          background:rgba(250,204,21,.12); border:1px solid rgba(250,204,21,.45);
          border-radius:12px; padding:14px 16px; margin-bottom:14px
        }
        .sg-callout-title{font-weight:700;margin-bottom:6px;color:#fde68a}
        .sg-muted{opacity:.7}

        .sg-modal-body{margin:8px 2px 14px;font-size:15px;line-height:1.5}

        .sg-modal-actions{display:flex;justify-content:space-between;gap:12px;margin-top:10px}
        .sg-btn{font-weight:600;border:0;cursor:pointer;padding:12px 18px}
        .sg-pill{border-radius:999px}
        .sg-btn-neutral{background:#374151;color:#e5e7eb}
        .sg-btn-neutral:hover{background:#4b5563}
        .sg-btn-danger{background:#b91c1c;color:#fff}
        .sg-btn-danger:hover{background:#991b1b}
        .sg-btn:focus{outline:2px solid rgba(255,255,255,.35);outline-offset:2px}
      `}),a.jsxs("div",{className:"sg-modal-panel",role:"dialog","aria-modal":"true","aria-labelledby":"bk-title","aria-describedby":"bk-desc",onClick:s,onMouseDown:s,onKeyDown:s,children:[a.jsxs("div",{className:"sg-modal-header",children:[a.jsx("h2",{id:"bk-title",className:"sg-modal-title",children:"Declarar Falncia"}),a.jsx("button",{className:"sg-icon-close","aria-label":"Fechar",onClick:i,children:""})]}),a.jsxs("div",{className:"sg-modal-infos",children:[a.jsx("div",{className:"left",children:e?a.jsxs(a.Fragment,{children:["Saldo disponvel: ",a.jsx("b",{children:e})]}):a.jsx(a.Fragment,{children:""})}),a.jsx("div",{className:"right",children:"Ao permanente nesta partida"})]}),a.jsxs("div",{className:"sg-callout-warning",id:"bk-desc",children:[a.jsx("div",{className:"sg-callout-title",children:"Ateno"}),a.jsxs("p",{children:[t,", ao confirmar, voc ser marcado como ",a.jsx("b",{children:"FALIDO"}),". Seu turno ser ",a.jsx("b",{children:"sempre pulado"})," e voc no poder mais executar aes."]}),a.jsx("p",{className:"sg-muted",children:"Esta deciso  irreversvel at o fim da partida."})]}),a.jsx("div",{className:"sg-modal-body",children:a.jsxs("p",{children:["Confirme abaixo para encerrar sua participao ativa. Voc continuar visvel no placar como ",a.jsx("b",{children:"FALIDO"}),"."]})}),a.jsxs("div",{className:"sg-modal-actions",children:[a.jsx("button",{className:"sg-btn sg-pill sg-btn-neutral",onClick:i,children:"Cancelar"}),a.jsx("button",{ref:o,className:"sg-btn sg-pill sg-btn-danger",onClick:l,children:"Declarar Falncia"})]})]})]})}function Ab({players:t,setPlayers:e,round:n,setRound:r,turnIdx:o,setTurnIdx:s,roundFlags:i,setRoundFlags:l,isMyTurn:c,isMine:u,myUid:d,meId:h,myCash:f,current:g,broadcastState:x,appendLog:b,turnLock:_,setTurnLockBroadcast:p,gameOver:m,setGameOver:v,winner:w,setWinner:k,setShowBankruptOverlay:T}){const{pushModal:D,awaitTop:S,closeTop:A}=(Ht==null?void 0:Ht())||{},[y,N]=pe.useState(0),O=pe.useRef(0);pe.useEffect(()=>{O.current=y},[y]);const L=pe.useRef(!1),U=pe.useRef(!1),Se=pe.useRef(null),We=pe.useRef(null);pe.useEffect(()=>{c?console.log("[DEBUG] modalLocks sync - isMyTurn:",c,"modalLocks:",y):y>0&&(console.log("[DEBUG] modalLocks sync - resetando modalLocks para 0 (no  minha vez)"),N(0),O.current=0,L.current=!1)},[c,y]),pe.useEffect(()=>(_?(Se.current&&clearTimeout(Se.current),Se.current=setTimeout(()=>{const J=te.current,Ge=String(J||"")===String(d),$e=O.current,Ne=L.current;console.warn("[DEBUG]  TIMEOUT DE SEGURANA - turnLock ativo h mais de 30s",{isLockOwner:Ge,currentModalLocks:$e,currentOpening:Ne,lockOwner:J}),Ge&&$e===0&&!Ne&&(console.warn("[DEBUG]  FORANDO LIBERAO DO TURNLOCK (timeout de segurana)"),p(!1),U.current=!1)},3e4)):Se.current&&(clearTimeout(Se.current),Se.current=null),()=>{Se.current&&(clearTimeout(Se.current),Se.current=null)}),[_,d,p]);const[Ze,G]=pe.useState(null),te=pe.useRef(null);pe.useEffect(()=>{te.current=Ze},[Ze]);const re=pe.useRef(null),P=pe.useRef(n);pe.useEffect(()=>{P.current=n,console.log("[DEBUG]  currentRoundRef atualizado para:",n)},[n]);const Oe=pe.useRef(t);pe.useEffect(()=>{Oe.current=t},[t]);const ln=pe.useRef(o);pe.useEffect(()=>{ln.current=o},[o]);const ce=pe.useRef(m);pe.useEffect(()=>{ce.current=m},[m]);const ht=pe.useRef(!1),Ot=pe.useRef(!1);pe.useEffect(()=>{const J=t[o];J&&String(J.id)===String(d)?(console.log("[DEBUG]  minha vez - atualizando lockOwner para:",d,"turnIdx:",o),G(String(d)),re.current&&(re.current.nextTurnIdx===o?(console.log("[DEBUG] Limpando pendingTurnDataRef - turno j foi processado (nextTurnIdx === turnIdx)"),re.current=null):console.log("[DEBUG] Mantendo pendingTurnDataRef - prximo turno:",re.current.nextTurnIdx,"turno atual:",o))):(Ze===String(d)&&(console.log("[DEBUG] No  mais minha vez - limpando lockOwner"),G(null)),re.current&&re.current.nextTurnIdx!==o&&(console.log("[DEBUG] Limpando pendingTurnDataRef - no  minha vez e dados no so para turno atual"),re.current=null))},[o,t,d,Ze]);const De=async J=>{if(!(D&&S))return null;L.current=!0,N($e=>{const Ne=$e+1;return O.current=Ne,We.current=null,console.log("[DEBUG] openModalAndWait - ABRINDO modal, modalLocks:",$e,"->",Ne,"openingModalRef:",L.current),Ne});let Ge=!1;try{D(J),await new Promise(Ne=>setTimeout(Ne,100)),L.current=!1,console.log("[DEBUG] openModalAndWait - Modal renderizada, openingModalRef:",L.current);const $e=await S();return Ge=!0,await new Promise(Ne=>setTimeout(Ne,50)),$e}catch($e){return console.error("[DEBUG]  ERRO ao abrir/aguardar modal:",$e),Ge=!0,L.current=!1,N(Ne=>{const Qt=Math.max(0,Ne-1);return O.current=Qt,Qt===0&&(We.current=Date.now()),console.log("[DEBUG] openModalAndWait - ERRO, decrementando modalLocks:",Ne,"->",Qt),Qt}),null}finally{Ge||(L.current=!1),Ge&&N($e=>{const Ne=Math.max(0,$e-1);return O.current=Ne,Ne===0&&(We.current=Date.now(),console.log("[DEBUG] openModalAndWait - LTIMA MODAL FECHADA - timestamp:",We.current)),console.log("[DEBUG] openModalAndWait - FECHANDO modal, modalLocks:",$e,"->",Ne),Ne})}},Jr=pe.useCallback((J,Ge)=>{const $e=t[J],Ne=Math.max(0,Number(Ge||0));return Number(($e==null?void 0:$e.cash)||0)>=Ne},[t]),rt=pe.useCallback((J,Ge,$e)=>{const Ne=Jr(J,Ge);return Ne||b(`Saldo insuficiente${$e?" para "+$e:""}. Use RECUPERAO (demitir / emprestar / reduzir) ou declare FALNCIA.`),Ne},[Jr,b]),as=pe.useCallback((J,Ge,$e)=>{var Rn;if(Ge<=5)return!1;const Ne=(J||[]).filter(mt=>!(mt!=null&&mt.bankrupt));if(Ne.length===0){console.log("[DEBUG]  FIM DE JOGO - Nenhum jogador vivo restante"),e(J),k(null),v(!0),r(5),P.current=5,b("Fim de jogo! Todos os jogadores falidos."),re.current=null,p(!1);try{x(J||[],$e||o,5,!0,null,{round:5,gameOver:!0,winner:null})}catch{}return!0}const pt=((Rn=Ne.map(mt=>({player:mt,patrimonio:(mt.cash||0)+(mt.bens||0),cash:mt.cash||0})).sort((mt,mn)=>{var Tn,z;return mn.patrimonio-mt.patrimonio||mn.cash-mt.cash||String(((Tn=mt.player)==null?void 0:Tn.name)||"").localeCompare(String(((z=mn.player)==null?void 0:z.name)||""))})[0])==null?void 0:Rn.player)||null;console.log("[ENDGAME] finalizando: vencedor=",(pt==null?void 0:pt.name)||"N/A",", round=5"),e(J),k(pt),v(!0),r(5),P.current=5,b(`Fim de jogo! 5 rodadas completas. Vencedor: ${(pt==null?void 0:pt.name)||""}`),re.current=null,p(!1);try{x(J||[],$e||o,5,!0,pt,{round:5,gameOver:!0,winner:pt})}catch{}return!0},[b,x,v,r,p,k,o]),ls=pe.useCallback((J,Ge,$e)=>{var Ne,Qt,pt,Rn,mt,mn,Tn,z;if(console.log("[DEBUG]  advanceAndMaybeLap chamada - steps:",J,"deltaCash:",Ge,"note:",$e),!(ce.current||ht.current||Ot.current||!t.length)){if(U.current){console.warn("[DEBUG]  advanceAndMaybeLap - mudana de turno j em progresso, ignorando");return}if(O.current>0||L.current){console.warn("[DEBUG]  advanceAndMaybeLap - h modais abertas, aguardando...",{modalLocks:O.current,opening:L.current}),setTimeout(()=>{O.current===0&&!L.current&&ls(J,Ge,$e)},200);return}U.current=!0,p(!0),G(String(d));try{const R=o,ue=t[R];if(!ue){p(!1),U.current=!1;return}console.log("[DEBUG]  POSIO INICIAL - Jogador:",ue.name,"Posio:",ue.pos,"Saldo:",ue.cash);const le=async(j,I,H,Z=t)=>{var se,he,de,fe,et,Ie,ke,xt,Je,gt,Ct,$t,xn,Nn,An;const W=Number(((se=Z[R])==null?void 0:se.cash)||0);if(W>=j){console.log("[DEBUG]  Saldo suficiente! Processando pagamento de:",j);const me=Z.map(($,ge)=>ge!==R?$:{...$,cash:Math.max(0,($.cash||0)-j),pos:$.pos});return e(me),x(me,o,P.current),!0}L.current=!0;const ne=await De(a.jsx(vr,{requiredAmount:j,currentCash:W,title:`Saldo insuficiente para ${H} ${I}`,message:`Voc precisa ${H} R$ ${j.toLocaleString()} mas possui apenas R$ ${W.toLocaleString()}.`,showRecoveryOptions:!0}));if(!ne)return p(!1),!1;if(ne.action==="RECOVERY"){console.log("[DEBUG] Abrindo RecoveryModal para jogador:",Z[R]);const me=await De(a.jsx(Nf,{currentPlayer:Z[R],canClose:!1}));if(console.log("[DEBUG] RecoveryModal retornou:",me),me){console.log("[DEBUG] recoveryModalRes existe, tipo:",me.type,"action:",me.action);let $=Z;if(me.type==="FIRE"){console.log("[DEBUG]  Condio FIRE atendida! Processando demisses:",me);const ee={cashDelta:Number(me.amount||0),vendedoresComunsDelta:-Number(((he=me.items)==null?void 0:he.comum)||0),fieldSalesDelta:-Number(((de=me.items)==null?void 0:de.field)||0),insideSalesDelta:-Number(((fe=me.items)==null?void 0:fe.inside)||0),gestoresDelta:-Number(((et=me.items)==null?void 0:et.gestor)||0)};console.log("[DEBUG] Deltas de demisso:",ee),$=Z.map((oe,xe)=>xe!==R?oe:{...Qe(oe,ee),pos:oe.pos}),console.log("[DEBUG] Novo saldo aps demisses:",(Ie=$[R])==null?void 0:Ie.cash),e($),x($,o,P.current)}else if(me.type==="LOAN"){console.log("[DEBUG]  Condio LOAN atendida! Processando emprstimo:",me);const ee=(ke=Z[R])==null?void 0:ke.loanPending;if(ee&&Number(ee.amount)>0){console.log("[DEBUG]  Jogador j possui emprstimo pendente:",ee);const xe=await De(a.jsx(vr,{requiredAmount:j,currentCash:((xt=Z[R])==null?void 0:xt.cash)||0,title:"Emprstimo j realizado",message:`Voc j possui um emprstimo pendente de R$ ${Number(ee.amount).toLocaleString()}. Cada jogador s pode ter um emprstimo por vez.`,showRecoveryOptions:!1,canClose:!1}));if(!xe||xe.action!=="BANKRUPT")return p(!1),!1;const ve=Z.map((Ut,cs)=>cs===R?{...Ut,bankrupt:!0}:Ut);if(Fn(ve)<=1){const Ut=ve.findIndex(cs=>!(cs!=null&&cs.bankrupt));return k(Ut>=0?ve[Ut]:null),e(ve),v(!0),p(!1),x(ve,o,n,!0,Ut>=0?ve[Ut]:null),!1}const Me=Sn(ve,R);return e(ve),s(Me),p(!1),x(ve,Me,P.current),!1}const oe=Number(me.amount||0);console.log("[DEBUG] Valor do emprstimo:",oe),console.log("[DEBUG] Saldo atual do jogador:",(Je=Z[R])==null?void 0:Je.cash),$=Z.map((xe,ve)=>ve!==R?xe:{...xe,cash:(Number(xe.cash)||0)+oe,loanPending:{amount:oe,charged:!1,shouldChargeOnNextExpenses:!0},pos:xe.pos}),console.log("[DEBUG] Novo saldo do jogador:",(gt=$[R])==null?void 0:gt.cash),console.log("[DEBUG] Novo loanPending:",(Ct=$[R])==null?void 0:Ct.loanPending),e($),x($,o,P.current)}else if(me.type==="REDUCE"){console.log("[DEBUG]  Condio REDUCE atendida! Processando reduo:",me);const ee=me.items||[];let oe=0;console.log("[DEBUG] Selees para reduzir:",ee),$=Z.map((xe,ve)=>{if(ve!==R)return xe;let be={...xe};for(const Me of ee)Me.selected&&(oe+=Number(Me.credit||0),Me.group==="MIX"?be.mixOwned={...be.mixOwned||{},[Me.level]:!1}:Me.group==="ERP"&&(be.erpOwned={...be.erpOwned||{},[Me.level]:!1}));return be.cash=(Number(be.cash)||0)+oe,be.pos=xe.pos,be}),console.log("[DEBUG] Total de crdito da reduo:",oe),console.log("[DEBUG] Novo saldo aps reduo:",($t=$[R])==null?void 0:$t.cash),e($),x($,o,P.current)}else console.log("[DEBUG]  Nenhuma condio foi atendida! Tipo:",me.type,"Action:",me.action);const ge=Number(((xn=$[R])==null?void 0:xn.cash)||0);if(console.log("[DEBUG] Verificando saldo aps recuperao - Novo saldo:",ge,"Necessrio:",j),ge>=j){console.log("[DEBUG]  Saldo suficiente aps recuperao! Processando pagamento de:",j);const ee=$.map((oe,xe)=>xe!==R?oe:{...oe,cash:Math.max(0,(oe.cash||0)-j),pos:oe.pos});return console.log("[DEBUG]  PAGAMENTO - Saldo antes:",(Nn=$[R])==null?void 0:Nn.cash,"Valor a pagar:",j,"Saldo aps:",(An=ee[R])==null?void 0:An.cash),e(ee),x(ee,o,P.current),!0}else return console.log("[DEBUG]  Saldo ainda insuficiente aps recuperao. Continuando recurso..."),await le(j,I,H,$)}else return p(!1),!1}else if(ne.action==="BANKRUPT"){const me=Z.map((ee,oe)=>oe===R?{...ee,bankrupt:!0}:ee);if(Fn(me)<=1){const ee=me.findIndex(oe=>!(oe!=null&&oe.bankrupt));return k(ee>=0?me[ee]:null),e(me),v(!0),p(!1),x(me,o,n,!0,ee>=0?me[ee]:null),!1}const ge=Sn(me,R);return e(me),s(ge),p(!1),x(me,ge,P.current),!1}else return p(!1),!1},_e=ue.pos,C=(_e+J)%ao,B=C<_e,K=B&&_e>=ao-1;console.log("[DEBUG]  MOVIMENTO - De posio:",_e,"Para posio:",C,"Steps:",J,"Lap:",B,"CompletedLap:",K);const Ee=Ls(_e,C,0)||B,V=P.current,ae=t.filter(j=>!(j!=null&&j.bankrupt)).length,F=t.map((j,I)=>{if(I!==R)return j;const H=(j.cash||0)+(Ge||0),Z=Number(j.lastRevenueRound)||0;let W=!1,ne=C;if(Ee){const se=Math.max(Z,V);return V===5&&ae>1&&(W=!0,ne=0),{...j,pos:ne,cash:Math.max(0,H),lastRevenueRound:se,waitingAtRevenue:W}}return{...j,pos:ne,cash:Math.max(0,H),lastRevenueRound:Z,waitingAtRevenue:!1}});console.log("[DEBUG]  APS MOVIMENTO - Jogador:",(Ne=F[R])==null?void 0:Ne.name,"Posio:",(Qt=F[R])==null?void 0:Qt.pos,"Saldo:",(pt=F[R])==null?void 0:pt.cash,"lastRevenueRound:",(Rn=F[R])==null?void 0:Rn.lastRevenueRound,"waitingAtRevenue:",(mt=F[R])==null?void 0:mt.waitingAtRevenue);let qe=P.current,q=[...i],ie=!1,Re=!1;if(B&&(console.log("[DEBUG]  VOLTA COMPLETA DETECTADA (lap=true) - Jogador completou uma volta completa!",{jogador:ue.name,posicaoAnterior:_e,posicaoNova:C,rodadaAtual:P.current}),q.length<t.length&&(q=[...q,...new Array(t.length-q.length).fill(!1)]),q[R]=!0,console.log("[DEBUG]  Flag marcada por volta completa (lap) - Flags:",q.map((j,I)=>{var H;return`${(H=t[I])==null?void 0:H.name}:${j}`}).join(", "))),Ee){q.length<t.length&&(q=[...q,...new Array(t.length-q.length).fill(!1)]),q[R]?console.log("[DEBUG]  Jogador j tinha flag marcada (por lap) - Flags:",q.map((W,ne)=>{var se;return`${(se=t[ne])==null?void 0:se.name}:${W}`}).join(", ")):(q[R]=!0,console.log("[DEBUG]  Jogador passou pela casa 0 (crossedStart1ForRound) - Flags:",q.map((W,ne)=>{var se;return`${(se=t[ne])==null?void 0:se.name}:${W}`}).join(", ")));const j=F.filter(W=>!(W!=null&&W.bankrupt)),I=F.map((W,ne)=>W!=null&&W.bankrupt?-1:ne).filter(W=>W>=0),H=F.filter(W=>!(W!=null&&W.bankrupt)),Z=H.length>0&&H.every(W=>(Number(W.lastRevenueRound)||0)>=P.current);if(console.log("[DEBUG]  Verificando allAliveDone - Rodada atual:",P.current,"Jogadores vivos:",H.map(W=>({name:W.name,lastRevenueRound:W.lastRevenueRound}))),console.log("[DEBUG]  Verificao de rodada - Jogador:",(mn=F[R])==null?void 0:mn.name,"Rodada atual:",P.current,"round do closure:",n),console.log("[DEBUG]  Jogadores vivos:",I.map(W=>{var ne;return`${(ne=F[W])==null?void 0:ne.name}:${q[W]}`}).join(", ")),console.log("[DEBUG]  Total de jogadores vivos:",I.length),console.log("[DEBUG]  Flags completas:",q.map((W,ne)=>{var se;return`${(se=F[ne])==null?void 0:se.name}:${W?"":""}`}).join(", ")),console.log("[DEBUG]  Todos passaram pela casa 0?",Z),Z){const W=P.current;if(qe=W+1,ie=!0,W===5&&ie){console.log("[ENDGAME] detectado: fim da 5 (tentaria round=6)"),as(F,6,o);return}console.log("[DEBUG]  Calculando incremento - round (ref):",W,"round (closure):",n,"nextRound:",qe),q=q.map((se,he)=>{var de;return(de=F[he])!=null&&de.bankrupt?q[he]:!1}),console.log("[DEBUG]  RODADA INCREMENTADA - Nova rodada:",qe,"Rodada anterior (ref):",W,"Rodada anterior (closure):",n,"Jogadores vivos:",H.length),console.log("[DEBUG]  Flags resetadas:",q.map((se,he)=>{var de;return`${(de=F[he])==null?void 0:de.name}:${se}`}).join(", ")),b(` Rodada ${qe} iniciada! Todos os jogadores vivos passaram pela casa de faturamento.`)}else{const W=H.filter(ne=>(Number(ne.lastRevenueRound)||0)<P.current).map(ne=>ne.name);console.log("[DEBUG]  Rodada NO incrementada - ainda faltam jogadores completarem o ms:",W.join(", "))}}l(q),console.log("[DEBUG] roundFlags updated / round closed:",q.map((j,I)=>{var H;return`${(H=F[I])==null?void 0:H.name}:${j}`}).join(", "));let ut=Sn(F,R);if(P.current===5){let j=0;for(;j<F.length;){const I=F[ut];if(!I.bankrupt&&I.waitingAtRevenue!==!0)break;ut=(ut+1)%F.length,j++}}Ge&&b(`${ue.name} ${Ge>0?"ganhou":"pagou"} $${Math.abs(Ge).toLocaleString()}`),$e&&b($e),e(F),r(j=>{let I=j;return ie?qe>j?(I=qe,console.log("[DEBUG]  RODADA INCREMENTADA - Rodada anterior:",j,"Nova rodada:",I,"nextRound calculado:",qe),console.log("[DEBUG]  Rodada incrementada com sucesso!"),b(` Rodada ${I} iniciada! Todos os jogadores vivos passaram pela casa de faturamento.`)):(I=j+1,console.log("[DEBUG]  RODADA INCREMENTADA (forado) - Rodada anterior:",j,"Nova rodada:",I,"nextRound calculado:",qe),console.log("[DEBUG]  Rodada incrementada com sucesso (forado devido a sincronizao)!"),b(` Rodada ${I} iniciada! Todos os jogadores vivos passaram pela casa de faturamento.`)):(I=Math.max(qe,j),I!==j&&console.log("[DEBUG]  Rodada atualizada via Math.max - prevRound:",j,"nextRound:",qe,"finalRound:",I)),P.current=I,I});const He=qe,ye=q;if(re.current={nextPlayers:F,nextTurnIdx:ut,nextRound:He,nextRoundFlags:ye,timestamp:Date.now(),shouldIncrementRound:ie,endGame:Re},console.log("[DEBUG]  pendingTurnDataRef preenchido - prximo turno:",ut,"rodada atual:",n,"prxima rodada:",He,"nextRound calculado:",qe,"shouldIncrementRound:",ie,"rodada foi incrementada?",qe>n,"roundFlags:",ye.map((j,I)=>{var H;return`${(H=F[I])==null?void 0:H.name}:${j}`}).join(", ")),as(F,qe,o)){re.current=null,U.current=!1,L.current=!1;return}const Le=C+1,gn=Ls(_e,C,0),Y=Ls(_e,C,22);let X=!1;if((Le===6||Le===16||Le===32||Le===49)&&c&&D&&S&&(X=!0,L.current=!0,(async()=>{var W,ne,se,he,de;const j=((W=t[R])==null?void 0:W.erpLevel)||null,I=((ne=t[R])==null?void 0:ne.erpOwned)||((se=t[R])==null?void 0:se.erp)||{},H=await De(a.jsx(_f,{currentCash:((he=F[R])==null?void 0:he.cash)??f,currentLevel:j,erpOwned:I}));if(!H||H.action!=="BUY")return;const Z=Number(((de=H.values)==null?void 0:de.compra)||0);if(!rt(R,Z,"comprar ERP")){p(!1);return}e(fe=>{const et=fe.map((Ie,ke)=>ke!==R?Ie:Qe(Ie,{cashDelta:-Z,erpLevelSet:H.level}));return x(et,o,P.current),et})})()),(Le===2||Le===11||Le===19||Le===47)&&c&&D&&S&&(L.current=!0,(async()=>{var Z,W,ne,se;const j=t.find(u)||F[R],I=await De(a.jsx(Ef,{canTrain:{comum:Number(j==null?void 0:j.vendedoresComuns)||0,field:Number(j==null?void 0:j.fieldSales)||0,inside:Number(j==null?void 0:j.insideSales)||0,gestor:Number((j==null?void 0:j.gestores)??(j==null?void 0:j.gestoresComerciais)??(j==null?void 0:j.managers))||0},ownedByType:{comum:((Z=j==null?void 0:j.trainingsByVendor)==null?void 0:Z.comum)||[],field:((W=j==null?void 0:j.trainingsByVendor)==null?void 0:W.field)||[],inside:((ne=j==null?void 0:j.trainingsByVendor)==null?void 0:ne.inside)||[],gestor:((se=j==null?void 0:j.trainingsByVendor)==null?void 0:se.gestor)||[]}}));if(!I||I.action!=="BUY")return;const H=Number(I.grandTotal||0);if(!rt(R,H,"comprar Treinamento")){p(!1);return}e(he=>{const de=he.map((fe,et)=>et!==R?fe:wf(fe,I));return x(de,o,P.current),de})})()),(Le===5||Le===10||Le===43)&&c&&D&&S&&(L.current=!0,(async()=>{var H,Z,W,ne,se,he,de,fe,et,Ie,ke,xt,Je,gt,Ct,$t,xn,Nn,An;const j=((H=F[R])==null?void 0:H.cash)??f,I=await De(a.jsx(_b,{currentCash:j}));if(I){if(I.action==="OPEN"){const me=String(I.open||"").toUpperCase();if(me==="MIX"){const $=((Z=t[R])==null?void 0:Z.mixProdutos)||null,ge=((W=t[R])==null?void 0:W.mixOwned)||((ne=t[R])==null?void 0:ne.mix)||{},ee=await De(a.jsx(Df,{currentCash:((se=F[R])==null?void 0:se.cash)??f,currentLevel:$,mixOwned:ge}));if(ee&&ee.action==="BUY"){const oe=Number(ee.compra||0),xe=String(ee.level||"D");if(!rt(R,oe,"comprar MIX")){p(!1);return}e(ve=>{const be=ve.map((Me,Ut)=>Ut!==R?Me:Qe(Me,{cashDelta:-oe,mixProdutosSet:xe,mixBaseSet:{despesaPorCliente:Number(ee.despesa||0),faturamentoPorCliente:Number(ee.faturamento||0)}}));return x(be,o,P.current),be})}return}if(me==="MANAGER"){const $=await De(a.jsx(jf,{currentCash:((he=F[R])==null?void 0:he.cash)??f}));if($&&($.action==="BUY"||$.action==="HIRE")){const ge=Number($.headcount??$.qty??$.managersQty??1),ee=Number(typeof $.cashDelta<"u"?$.cashDelta:-Number($.cost??$.total??$.totalHire??0)),oe=ee<0?-ee:0;if(oe>0&&!rt(R,oe,"contratar Gestor")){p(!1);return}const xe=Number($.expenseDelta??$.totalExpense??$.maintenanceDelta??0);e(ve=>{const be=ve.map((Me,Ut)=>Ut!==R?Me:Qe(Me,{cashDelta:ee,gestoresDelta:ge,manutencaoDelta:xe}));return x(be,o,P.current),be})}return}if(me==="INSIDE"){const $=await De(a.jsx(kf,{currentCash:((de=F[R])==null?void 0:de.cash)??f}));if($&&($.action==="BUY"||$.action==="HIRE")){const ge=Number($.cost??$.total??0);if(!rt(R,ge,"contratar Inside Sales")){p(!1);return}const ee=Number($.headcount??$.qty??1);e(oe=>{const xe=oe.map((ve,be)=>be!==R?ve:Qe(ve,{cashDelta:-ge,insideSalesDelta:ee}));return x(xe,o,P.current),xe})}return}if(me==="FIELD"){const $=await De(a.jsx(Rf,{currentCash:((fe=F[R])==null?void 0:fe.cash)??f}));if($&&($.action==="HIRE"||$.action==="BUY")){const ge=Number($.headcount??$.qty??1),ee={cashDelta:Number($.cashDelta??-Number($.totalHire??$.total??$.cost??0)),manutencaoDelta:Number($.expenseDelta??$.totalExpense??0),revenueDelta:Number($.revenueDelta??0),fieldSalesDelta:ge},oe=ee.cashDelta<0?-ee.cashDelta:0;if(oe>0&&!rt(R,oe,"contratar Field Sales")){p(!1);return}e(xe=>{const ve=xe.map((be,Me)=>Me!==R?be:Qe(be,ee));return x(ve,o,P.current),ve})}return}if(me==="COMMON"){const $=await De(a.jsx(Tf,{currentCash:((et=F[R])==null?void 0:et.cash)??f}));if($&&$.action==="BUY"){const ge=Number($.headcount??$.qty??0),ee={cashDelta:Number($.cashDelta??-Number($.totalHire??$.total??$.cost??0)),vendedoresComunsDelta:ge,manutencaoDelta:Number($.expenseDelta??$.totalExpense??0),revenueDelta:Number($.revenueDelta??0)},oe=ee.cashDelta<0?-ee.cashDelta:0;if(oe>0&&!rt(R,oe,"contratar Vendedores Comuns")){p(!1);return}e(xe=>{const ve=xe.map((be,Me)=>Me!==R?be:Qe(be,ee));return x(ve,o,P.current),ve})}return}if(me==="ERP"){const $=((Ie=t[R])==null?void 0:Ie.erpLevel)||null,ge=((ke=t[R])==null?void 0:ke.erpOwned)||((xt=t[R])==null?void 0:xt.erp)||{},ee=await De(a.jsx(_f,{currentCash:((Je=F[R])==null?void 0:Je.cash)??f,currentLevel:$,erpOwned:ge}));if(ee&&ee.action==="BUY"){const oe=Number(((gt=ee.values)==null?void 0:gt.compra)||0);if(!rt(R,oe,"comprar ERP")){p(!1);return}e(xe=>{const ve=xe.map((be,Me)=>Me!==R?be:Qe(be,{cashDelta:-oe,erpLevelSet:ee.level}));return x(ve,o,P.current),ve})}return}if(me==="CLIENTS"){const $=await De(a.jsx(Cf,{currentCash:((Ct=F[R])==null?void 0:Ct.cash)??f}));if($&&$.action==="BUY"){const ge=Number($.totalCost||0);if(!rt(R,ge,"comprar Clientes")){p(!1);return}const ee=Number($.qty||0),oe=Number($.maintenanceDelta||0),xe=Number($.bensDelta||ge);e(ve=>{const be=ve.map((Me,Ut)=>Ut!==R?Me:Qe(Me,{cashDelta:-ge,clientsDelta:ee,manutencaoDelta:oe,bensDelta:xe}));return x(be,o,P.current),be})}return}if(me==="TRAINING"){const $=t.find(u)||F[R],ge=await De(a.jsx(Ef,{canTrain:{comum:Number($==null?void 0:$.vendedoresComuns)||0,field:Number($==null?void 0:$.fieldSales)||0,inside:Number($==null?void 0:$.insideSales)||0,gestor:Number(($==null?void 0:$.gestores)??($==null?void 0:$.gestoresComerciais)??($==null?void 0:$.managers))||0},ownedByType:{comum:(($t=$==null?void 0:$.trainingsByVendor)==null?void 0:$t.comum)||[],field:((xn=$==null?void 0:$.trainingsByVendor)==null?void 0:xn.field)||[],inside:((Nn=$==null?void 0:$.trainingsByVendor)==null?void 0:Nn.inside)||[],gestor:((An=$==null?void 0:$.trainingsByVendor)==null?void 0:An.gestor)||[]}}));if(ge&&ge.action==="BUY"){const ee=Number(ge.grandTotal||0);if(!rt(R,ee,"comprar Treinamento")){p(!1);return}e(oe=>{const xe=oe.map((ve,be)=>be!==R?ve:wf(ve,ge));return x(xe,o,P.current),xe})}return}}if(I.action==="BUY"){if(I.kind==="CLIENTS"||I.modal==="CLIENTS"||typeof I.clientsQty<"u"||typeof I.numClients<"u"||typeof I.totalCost<"u"||typeof I.maintenanceDelta<"u"){const ge=Number(I.totalCost??I.total??I.amount??0);if(!rt(R,ge,"comprar Clientes")){p(!1);return}const ee=Number(I.clientsQty??I.numClients??I.qty??0),oe=Number(I.maintenanceDelta??I.maintenance??I.mexp??0),xe=Number(I.bensDelta??ge);e(ve=>{const be=ve.map((Me,Ut)=>Ut!==R?Me:Qe(Me,{cashDelta:-ge,clientsDelta:ee,manutencaoDelta:oe,bensDelta:xe}));return x(be,o,P.current),be});return}const $=Number(I.total??I.amount??0);if(!rt(R,$,"esta compra")){p(!1);return}e(ge=>{const ee=ge.map((oe,xe)=>xe!==R?oe:Qe(oe,{cashDelta:-$,directBuysPush:[I.item||{total:$}]}));return x(ee,o,P.current),ee})}}})()),(Le===12||Le===21||Le===30||Le===42||Le===53)&&c&&D&&S&&(L.current=!0,(async()=>{var Z;const j=await De(a.jsx(kf,{currentCash:((Z=F[R])==null?void 0:Z.cash)??f}));if(!j||j.action!=="HIRE"&&j.action!=="BUY")return;const I=Number(j.cost??j.total??0);if(!rt(R,I,"contratar Inside Sales")){p(!1);return}const H=Number(j.headcount??j.qty??1);e(W=>{const ne=W.map((se,he)=>he!==R?se:Qe(se,{cashDelta:-I,insideSalesDelta:H}));return x(ne,o,P.current),ne})})()),[4,8,15,17,20,27,34,36,39,46,52,55].includes(Le)&&c&&D&&S&&(L.current=!0,(async()=>{var ne;const j=await De(a.jsx(Cf,{currentCash:((ne=F[R])==null?void 0:ne.cash)??f}));if(!j||j.action!=="BUY")return;const I=Number(j.totalCost||0);if(!rt(R,I,"comprar Clientes")){p(!1);return}const H=Number(j.qty||0),Z=Number(j.maintenanceDelta||0),W=Number(j.bensDelta||I);e(se=>{const he=se.map((de,fe)=>fe!==R?de:Qe(de,{cashDelta:-I,clientsDelta:H,manutencaoDelta:Z,bensDelta:W}));return x(he,o,P.current),he})})()),[18,24,29,51].includes(Le)&&c&&D&&S&&(L.current=!0,(async()=>{var ne;const j=await De(a.jsx(jf,{currentCash:((ne=F[R])==null?void 0:ne.cash)??f}));if(!j||j.action!=="BUY"&&j.action!=="HIRE")return;const I=Number(j.headcount??j.qty??j.managersQty??1),H=Number(typeof j.cashDelta<"u"?j.cashDelta:-Number(j.cost??j.total??j.totalHire??0)),Z=H<0?-H:0;if(Z>0&&!rt(R,Z,"contratar Gestor")){p(!1);return}const W=Number(j.expenseDelta??j.totalExpense??j.maintenanceDelta??0);e(se=>{const he=se.map((de,fe)=>fe!==R?de:Qe(de,{cashDelta:H,gestoresDelta:I,manutencaoDelta:W}));return x(he,o,P.current),he})})()),[13,25,33,38,50].includes(Le)&&c&&D&&S&&(L.current=!0,(async()=>{var I;const j=await De(a.jsx(Rf,{currentCash:((I=F[R])==null?void 0:I.cash)??f}));if(j&&(j.action==="HIRE"||j.action==="BUY")){const H=Number(j.headcount??j.qty??1),Z={cashDelta:Number(j.cashDelta??-Number(j.totalHire??j.total??j.cost??0)),manutencaoDelta:Number(j.expenseDelta??j.totalExpense??0),revenueDelta:Number(j.revenueDelta??0),fieldSalesDelta:H},W=Z.cashDelta<0?-Z.cashDelta:0;if(W>0&&!rt(R,W,"contratar Field Sales")){p(!1);return}e(ne=>{const se=ne.map((he,de)=>de!==R?he:Qe(he,Z));return x(se,o,P.current),se})}})()),[9,28,40,45].includes(Le)&&c&&D&&S&&(L.current=!0,(async()=>{var W;const j=await De(a.jsx(Tf,{currentCash:((W=F[R])==null?void 0:W.cash)??f}));if(!j||j.action!=="BUY")return;const I=Number(j.headcount??j.qty??0),H={cashDelta:Number(j.cashDelta??-Number(j.totalHire??j.total??j.cost??0)),vendedoresComunsDelta:I,manutencaoDelta:Number(j.expenseDelta??j.totalExpense??0),revenueDelta:Number(j.revenueDelta??0)},Z=H.cashDelta<0?-H.cashDelta:0;if(Z>0&&!rt(R,Z,"contratar Vendedores Comuns")){p(!1);return}e(ne=>{const se=ne.map((he,de)=>de!==R?he:Qe(he,H));return x(se,o,P.current),se})})()),[7,31,44].includes(Le)&&c&&D&&S&&(L.current=!0,(async()=>{var ne,se,he,de;const j=((ne=t[R])==null?void 0:ne.mixProdutos)||null,I=((se=t[R])==null?void 0:se.mixOwned)||((he=t[R])==null?void 0:he.mix)||{},H=await De(a.jsx(Df,{currentCash:((de=F[R])==null?void 0:de.cash)??f,currentLevel:j,mixOwned:I}));if(!H||H.action!=="BUY")return;const Z=Number(H.compra||0);if(!rt(R,Z,"comprar MIX")){p(!1);return}const W=String(H.level||"D");e(fe=>{const et=fe.map((Ie,ke)=>ke!==R?Ie:Qe(Ie,{cashDelta:-Z,mixProdutosSet:W,mixBaseSet:{despesaPorCliente:Number(H.despesa||0),faturamentoPorCliente:Number(H.faturamento||0)}}));return x(et,o,P.current),et})})()),[3,14,22,26,35,41,48,54].includes(Le)&&c&&D&&S&&(L.current=!0,(async()=>{const j=await De(a.jsx(Eb,{}));if(!j||j.action!=="APPLY_CARD")return;const I=F[R]||t.find(u)||{};let H=Number.isFinite(j.cashDelta)?Number(j.cashDelta):0,Z=Number.isFinite(j.clientsDelta)?Number(j.clientsDelta):0;if(H<0){const ne=-H;await le(ne,"Sorte & Revs","pagar",F)}if(e(ne=>{const se=ne.map((he,de)=>{var et;if(de!==R)return he;let fe={...he};if(H&&(fe.cash=Math.max(0,(fe.cash??0)+H)),Z){const Ie=fe.clients||0;fe.clients=Math.max(0,Ie+Z),console.log("[DEBUG] SorteReves - Clientes alterados:",Ie,"->",fe.clients,"delta:",Z)}if(j.gainSpecialCell&&(fe.fieldSales=(fe.fieldSales||0)+(j.gainSpecialCell.fieldSales||0),fe.support=(fe.support||0)+(j.gainSpecialCell.support||0),fe.gestores=(fe.gestores||0)+(j.gainSpecialCell.manager||0),fe.gestoresComerciais=(fe.gestoresComerciais||0)+(j.gainSpecialCell.manager||0),fe.managers=(fe.managers||0)+(j.gainSpecialCell.manager||0)),j.id==="casa_change_cert_blue"){fe.az=(fe.az||0)+1;const Ie=new Set(((et=fe.trainingsByVendor)==null?void 0:et.comum)||[]);Ie.add("personalizado"),fe.trainingsByVendor={...fe.trainingsByVendor||{},comum:Array.from(Ie)}}return fe});return x(se,o,P.current),se}),j.perClientBonus||j.perCertifiedManagerBonus||j.mixLevelBonusABOnly){const ne=F[R]||t.find(u)||{};let se=0;if(j.perClientBonus&&(se+=(Number(ne.clients)||0)*Number(j.perClientBonus||0)),j.perCertifiedManagerBonus&&(se+=xm(ne)*Number(j.perCertifiedManagerBonus||0)),j.mixLevelBonusABOnly){const he=String(ne.mixProdutos||"").toUpperCase();(he==="A"||he==="B")&&(se+=Number(j.mixLevelBonusABOnly||0))}se&&e(he=>{const de=he.map((fe,et)=>et===R?{...fe,cash:(Number(fe.cash)||0)+se}:fe);return x(de,o,P.current),de})}})()),gn&&c&&D&&S){L.current=!0;const j=F[R]||{},I=Math.max(0,Math.floor(Hr(j)));(async()=>{await De(a.jsx(kb,{value:I})),e(H=>{const Z=H.map((W,ne)=>ne!==R?W:{...W,cash:(W.cash||0)+I});return x(Z,o,P.current),Z}),b(`${j.name} recebeu faturamento do ms: +$${I.toLocaleString()}`);try{setTimeout(()=>A==null?void 0:A({action:"AUTO_CLOSE_BELOW"}),0)}catch{}})()}if(Y&&c&&D&&S){L.current=!0,console.log("[DEBUG]  DESPESAS OPERACIONAIS - Jogador:",(Tn=F[R])==null?void 0:Tn.name,"Posio atual:",(z=F[R])==null?void 0:z.pos);const j=F[R]||{},I=Math.max(0,Math.floor(xr(j))),H=j.loanPending||{},Z=Number(H.amount)>0&&!H.charged&&H.shouldChargeOnNextExpenses===!0,W=Z?Math.max(0,Math.floor(Number(H.amount))):0;console.log("[DEBUG]  DESPESAS - Valor:",I,"Emprstimo a cobrar:",W,"Total:",I+W),console.log("[DEBUG]  EMPRSTIMO - Detalhes:",{amount:Number(H.amount),charged:H.charged,shouldChargeOnNextExpenses:H.shouldChargeOnNextExpenses,currentRound:n,shouldCharge:Z}),(async()=>{var he,de,fe;await De(a.jsx(Cb,{expense:I,loanCharge:W}));const ne=I+W;console.log("[DEBUG]  ANTES handleInsufficientFunds - Saldo atual:",(he=F[R])==null?void 0:he.cash,"Total a pagar:",ne,"Posio:",(de=F[R])==null?void 0:de.pos);const se=await le(ne,"Despesas Operacionais","pagar",F);if(console.log("[DEBUG]  APS handleInsufficientFunds - canPayExpenses:",se,"Posio atual:",(fe=F[R])==null?void 0:fe.pos),!se){console.log("[DEBUG]  canPayExpenses  false - no liberando turno aqui, deixando tick() gerenciar");return}Z&&e(et=>{const Ie=et.map((ke,xt)=>{var gt;if(xt!==R)return ke;const Je={...ke};return Je.loanPending={...ke.loanPending||{},charged:!0,chargedAtRound:n,shouldChargeOnNextExpenses:!1},Je.pos=((gt=F[R])==null?void 0:gt.pos)??ke.pos,Je});return x(Ie,o,P.current),Ie}),b(`${j.name} pagou despesas operacionais: -$${I.toLocaleString()}`),W>0&&b(`${j.name} teve emprstimo cobrado: -$${W.toLocaleString()}`),e(et=>{var ke,xt,Je;const Ie=et.map((gt,Ct)=>{var $t;return Ct!==R?gt:{...gt,pos:(($t=F[R])==null?void 0:$t.pos)??gt.pos}});return console.log("[DEBUG]  DESPESAS FINALIZADAS - Jogador:",(ke=Ie[R])==null?void 0:ke.name,"Posio final:",(xt=Ie[R])==null?void 0:xt.pos,"Saldo final:",(Je=Ie[R])==null?void 0:Je.cash),Ie})})()}const qa=Date.now();let kt=0;const nr=200,rr=()=>{var he;if(kt++,kt>nr){console.warn("[DEBUG]  TIMEOUT - excedeu tentativas mximas, forando desbloqueio");const de=te.current;String(de||"")===String(d)&&(p(!1),U.current=!1,O.current>0&&(console.warn("[DEBUG]  Forando modalLocks para 0 (timeout)"),O.current=0,N(0)),L.current=!1);return}const j=O.current,I=L.current,H=te.current,Z=String(H||"")===String(d);if(console.log("[DEBUG] tick - tentativa:",kt,"modalLocks:",j,"openingModalRef:",I,"lockOwner:",H,"myUid:",d,"isLockOwner:",Z),I){console.log("[DEBUG]  tick - modal est sendo aberta, aguardando..."),setTimeout(rr,150);return}const W=We.current?Date.now()-We.current:1/0;if(j===0&&(W>=200||!We.current)){const de=re.current;if(!!(de!=null&&de.endGame||ht.current)&&!Ot.current){Ot.current=!0,ht.current=!1;const ke=Array.isArray(Oe.current)?Oe.current:(de==null?void 0:de.nextPlayers)||[],xt=(ke||[]).filter(gt=>!(gt!=null&&gt.bankrupt));let Je=null;xt.length>0&&(Je=((he=xt.map(Ct=>({p:Ct,patrimonio:(Number(Ct.cash)||0)+(Number(Ct.bens)||0),cash:Number(Ct.cash)||0})).sort((Ct,$t)=>{var xn,Nn;return $t.patrimonio-Ct.patrimonio||$t.cash-Ct.cash||String(((xn=Ct.p)==null?void 0:xn.name)||"").localeCompare(String(((Nn=$t.p)==null?void 0:Nn.name)||""))})[0])==null?void 0:he.p)||null),console.log("[ENDGAME] finalizando: vencedor=%s, round=5",(Je==null?void 0:Je.name)||""),e(ke||[]),v(!0),k(Je),r(5),P.current=5,re.current=null,U.current=!1,L.current=!1,p(!1),x(ke||[],ln.current,5,!0,Je,{round:5,gameOver:!0,winner:Je});return}const et=t[o],Ie=et&&String(et.id)===String(d);if(Z||Ie&&!H){const ke=re.current;if(console.log("[DEBUG]  tick - verificando pendingTurnDataRef:",ke?`prximo turno: ${ke.nextTurnIdx}`:"null"),ke){const xt=O.current,Je=L.current,gt=o,Ct=te.current,$t=String(Ct||"")===String(d),xn=We.current?Date.now()-We.current:1/0,Nn=xt===0&&!Je&&(xn>=200||!We.current);if(Nn&&gt===o&&$t){if(console.log("[DEBUG]  Mudando turno - de:",o,"para:",ke.nextTurnIdx,"finalModalLocks:",xt,"finalOpening:",Je,"timeSinceLastModalClosed:",xn),ke.endGame){const ge=Math.min(5,Number(ke.nextRound||5)),ee=t.filter(ve=>!(ve!=null&&ve.bankrupt));let oe=null;ee.length>0&&(oe=ee.map(be=>({...be,patrimonio:(be.cash||0)+(be.bens||0)})).sort((be,Me)=>Me.patrimonio-be.patrimonio)[0]||null),console.log("[DEBUG]  FIM DE JOGO no tick - Rodada:",ge,"Vencedor:",(oe==null?void 0:oe.name)||null),k(oe),v(!0),b("Fim de jogo! 5 rodadas completas."),r(ve=>{const be=Math.min(5,Math.max(ve,ge));return P.current=be,be});const xe={};ke.nextRoundFlags&&(xe.roundFlags=ke.nextRoundFlags),xe.round=ge,xe.gameOver=!0,xe.winner=oe,x(t,o,ge,!0,oe,xe),re.current=null,p(!1),U.current=!1;return}U.current=!0;const An=ke.nextRound,me=ke.shouldIncrementRound||!1;console.log("[DEBUG]  Broadcast - Rodada a ser transmitida:",An,"Rodada atual no estado:",n,"shouldIncrement:",me),s(ke.nextTurnIdx),r(ge=>{const ee=Math.max(ge,An);return ee!==ge&&console.log("[DEBUG]  Rodada atualizada no tick - de:",ge,"para:",ee),P.current=ee,ee});const $={};ke.nextRoundFlags&&($.roundFlags=ke.nextRoundFlags),ke.shouldIncrementRound&&($.round=An),x(ke.nextPlayers,ke.nextTurnIdx,An,m,w,$),re.current=null,p(!1),U.current=!1,console.log("[DEBUG]  Turno mudado com sucesso - Rodada:",An)}else{console.log("[DEBUG]  tick - condies no atendidas, no mudando turno",{finalModalLocks:xt,finalOpening:Je,finalCanChangeTurn:Nn,timeSinceLastModalClosed:xn,finalTurnIdx:gt,turnIdx:o,finalIsLockOwner:$t,isLockOwner:Z}),console.log("[DEBUG]  tick - condies no atendidas, no mudando turno",{finalModalLocks:xt,finalOpening:Je,finalTurnIdx:gt,turnIdx:o,finalIsLockOwner:$t,isLockOwner:Z}),setTimeout(rr,150);return}}else{console.log("[DEBUG]  tick - turnData  null, no mudando turno. turnIdx atual:",o,"lockOwner:",H,"isLockOwner:",Z);const xt=We.current?Date.now()-We.current:1/0,Je=j===0&&(xt>=200||!We.current);if(Z&&Je&&!I)if(kt<10){console.log("[DEBUG]  tick - tentando novamente em 200ms (pode ser que pendingTurnDataRef ainda no foi preenchido)"),setTimeout(rr,200);return}else console.warn("[DEBUG]  tick - excedeu tentativas de retry, liberando turnLock"),p(!1),U.current=!1;else p(!1),U.current=!1}}else console.log("[DEBUG]  tick - no sou o dono do cadeado e no  minha vez, no mudando turno",{isLockOwner:Z,isCurrentPlayerMe:Ie,currentLockOwner:H,myUid:d,turnIdx:o}),Ie||(p(!1),U.current=!1);return}setTimeout(rr,100)};let yn=0;const qn=50,Uu=()=>{yn++;const j=L.current,I=O.current>0;if((j||I)&&yn<qn){console.log("[DEBUG]  checkBeforeTick - modal sendo aberta ou j aberta, aguardando...",{hasOpening:j,hasLocks:I,modalLocks:O.current,attempt:yn}),setTimeout(Uu,200);return}yn>=qn&&(console.warn("[DEBUG]  checkBeforeTick - excedeu tentativas, forando avano do turno",{hasOpening:j,hasLocks:I,modalLocks:O.current}),O.current>0&&(console.warn("[DEBUG]  checkBeforeTick - forando modalLocks para 0"),O.current=0,N(0)),L.current=!1),console.log("[DEBUG]  checkBeforeTick - iniciando tick, sem modais abertas"),rr()};setTimeout(Uu,500)}catch(R){throw console.error("[DEBUG] Erro em advanceAndMaybeLap:",R),te.current===String(d)&&p(!1),R}finally{te.current===String(d)?setTimeout(()=>{te.current===String(d)&&(p(!1),U.current=!1)},100):U.current=!1}}},[t,n,o,i,c,u,d,f,m,b,x,e,r,s,l,p,rt,as,D,S,A]),di=pe.useCallback(()=>{if(m||!t.length)return;const J=Sn(t,o);s(J),x(t,J,P.current)},[x,m,t,n,s,o]),st=pe.useCallback(J=>{var Ge,$e,Ne,Qt,pt,Rn,mt,mn,Tn;if(!(!(J!=null&&J.type)||ce.current||ht.current||Ot.current)){if(J.type==="ROLL"){if(!c)return;try{ls(J.steps,J.cashDelta,J.note)}catch(z){console.error("[DEBUG] Erro em advanceAndMaybeLap:",z),te.current===String(d)&&p(!1)}return}if(J.type==="RECOVERY"){const z=Math.floor(Math.random()*3e3)+1e3,R=t.find(u);if(!R)return;const ue=t.map(le=>u(le)?{...le,cash:le.cash+z}:le);b(`${R.name} ativou Recuperao Financeira (+$${z})`),e(ue),x(ue,o,P.current);return}if(J.type==="RECOVERY_CUSTOM"){const z=Number(J.amount||0),R=t.find(u);if(!R)return;const ue=t.map(le=>u(le)?{...le,cash:le.cash+z}:le);b(`${R.name} recuperou +$${z}`),e(ue),x(ue,o,P.current);return}if(J.type==="RECOVERY_MODAL"){if(!c||!D||!S)return;(async()=>{const z=await De(a.jsx(Nf,{playerName:(g==null?void 0:g.name)||"Jogador",currentPlayer:g}));if(z){if(z&&z.type==="TRIGGER_BANKRUPTCY"){st({type:"BANKRUPT"});return}switch(z.type){case"FIRE":st==null||st({type:"RECOVERY_FIRE",items:z.items,amount:z.totalCredit??z.amount??0,note:z.note,creditByRole:z.creditByRole});break;case"REDUCE":{const R=Array.isArray(z.items)&&z.items.length>0,ue=R?z.items.map((B,K)=>({...B,group:String(B.group||B.tipo||"").toUpperCase(),level:String(B.level||B.nivel||"").toUpperCase(),credit:Number(B.credit??B.amount??0),selected:K===0?!0:!!B.selected})):void 0,le=R&&(ue==null?void 0:ue[0])||z.selection||z.sel||(z.group&&z.level?{group:String(z.group).toUpperCase(),level:String(z.level).toUpperCase(),credit:Number(z.credit??z.amount??0)}:null),_e=Number((R?z.total??z.totalCredit:void 0)??(le==null?void 0:le.credit)??z.amount??0),C=z.note||(R?`Reduo mltipla +R$ ${_e.toLocaleString()}`:le?`Reduo ${le.group} nvel ${le.level} +R$ ${_e.toLocaleString()}`:`Reduo +R$ ${_e.toLocaleString()}`);st==null||st({type:"RECOVERY_REDUCE",items:ue,selection:le||null,amount:_e,note:C});break}case"LOAN":{const R=typeof z.amount=="object"&&z.amount!==null?z.amount:{amount:Number(z.amount??0),cashDelta:Number(z.cashDelta??z.amount??0),loan:z.loan},ue=Number(R.amount??0),le=Number(R.cashDelta??ue??0),_e=R.loan??z.loan??{};st==null||st({type:"RECOVERY_LOAN",amount:ue,cashDelta:le,loan:_e,note:z.note});break}default:z.amount>0&&(st==null||st({type:"RECOVERY_CUSTOM",amount:z.amount,note:z.note}))}}})();return}if(J.type==="BANKRUPT_MODAL"){if(!c||!D||!S)return;(async()=>await De(a.jsx(Nb,{playerName:(g==null?void 0:g.name)||"Jogador"}))&&(st==null||st({type:"BANKRUPT"})))();return}if(J.type==="RECOVERY_FIRE"){const z=Number(J.amount||0),R=J.items||{},ue={cashDelta:z,vendedoresComunsDelta:-Number(R.comum||0),fieldSalesDelta:-Number(R.field||0),insideSalesDelta:-Number(R.inside||0),gestoresDelta:-Number(R.gestor||0)},le=o;e(_e=>{const C=_e.map((B,K)=>K!==le?B:Qe(B,ue));return x(C,o,P.current),C}),b(`${((Ge=t[le])==null?void 0:Ge.name)||"Jogador"}: ${J.note||"Demisses"}`);return}if(J.type==="RECOVERY_LOAN"){const z=Math.max(0,Number(J.amount||0));if(!z)return;const R=o,ue=t[R];if(ue!=null&&ue.loanPending&&!ue.loanPending.charged){b(`${(ue==null?void 0:ue.name)||"Jogador"} j possui um emprstimo pendente.`);return}e(le=>{const _e=le.map((C,B)=>B!==R?C:{...C,cash:(Number(C.cash)||0)+z,loanPending:{amount:z,charged:!1,shouldChargeOnNextExpenses:!0}});return x(_e,o,P.current),_e}),b(`${(ue==null?void 0:ue.name)||"Jogador"} pegou emprstimo: +$${z.toLocaleString()}`);return}if(J.type==="BUY_MIX"||J.kind==="MIX_BUY"||J.type==="DIRECT_BUY_MIX"){const z=String(J.level||"").toUpperCase(),R=Math.max(0,Number(J.price??0));if(!["A","B","C","D"].includes(z)){p(!1);return}const ue=o;if(!Jr(ue,R)){b("Saldo insuficiente para comprar MIX"),p(!1);return}e(le=>{const _e=le.map((C,B)=>{if(B!==ue)return C;const K={...C.mixOwned||C.mix||{},D:!0};return K[z]=!0,{...C,cash:Math.max(0,(Number(C.cash)||0)-R),mixOwned:K,mix:K,mixLevel:z,mixProdutos:z}});return x(_e,o,P.current),_e}),b(`${(($e=t[ue])==null?void 0:$e.name)||"Jogador"} comprou MIX nvel ${z} por -$${R.toLocaleString()}`),p(!1);return}if(J.type==="BUY_ERP"||J.kind==="ERP_BUY"||J.type==="DIRECT_BUY_ERP"){const z=String(J.level||"").toUpperCase(),R=Math.max(0,Number(J.price??0));if(!["A","B","C","D"].includes(z)){p(!1);return}const ue=o;if(!Jr(ue,R)){b("Saldo insuficiente para comprar ERP"),p(!1);return}e(le=>{const _e=le.map((C,B)=>{if(B!==ue)return C;const K={...C.erpOwned||C.erp||{},D:!0};return K[z]=!0,{...C,cash:Math.max(0,(Number(C.cash)||0)-R),erpOwned:K,erp:K,erpLevel:z,erpSystems:{...C.erpSystems||{},level:z}}});return x(_e,o,P.current),_e}),b(`${((Ne=t[ue])==null?void 0:Ne.name)||"Jogador"} comprou ERP nvel ${z} por -$${R.toLocaleString()}`),p(!1);return}if(J.type==="RECOVERY_REDUCE"){const z=q=>String(q||"").toUpperCase(),R=q=>{const ie=String(q||"").toUpperCase();return ie==="MIX"||ie==="ERP"?ie:ie.includes("MIX")?"MIX":ie.includes("ERP")?"ERP":""},le=(()=>{if(Array.isArray(J.items)&&J.items.length)return J.items.filter(ie=>(ie==null?void 0:ie.selected)??!0).map(ie=>({group:R(ie.group||ie.kind),level:z(ie.level),credit:Math.max(0,Number(ie.credit??ie.amount??0))})).filter(ie=>(ie.group==="MIX"||ie.group==="ERP")&&["A","B","C"].includes(ie.level));const q=J.selection||J.target||null;if(q){const ie={group:R(q.group||q.kind),level:z(q.level),credit:Math.max(0,Number(q.credit??q.amount??J.amount??0))};if((ie.group==="MIX"||ie.group==="ERP")&&["A","B","C"].includes(ie.level))return[ie]}return[]})();if(!le.length){const q=Math.max(0,Number(J.amount??0));if(q>0){const ie=o;e(Re=>{const ut=Re.map((He,ye)=>ye!==ie?He:{...He,cash:(Number(He.cash)||0)+q});return x(ut,o,P.current),ut})}return}const _e=(q,ie)=>{const Re={A:!1,B:!1,C:!1,D:!1,...q||{}},ut=z(ie);return!Re.A&&!Re.B&&!Re.C&&!Re.D&&(["A","B","C","D"].includes(ut)?Re[ut]=!0:Re.D=!0),Re},C=q=>q!=null&&q.A?"A":q!=null&&q.B?"B":q!=null&&q.C?"C":q!=null&&q.D?"D":"-",B=o,K=t[B];if(le.some(q=>q.level==="D")){b("No  possvel reduzir o nvel D (bsico).");return}const V=Array.isArray((Qt=K.reducedLevels)==null?void 0:Qt.MIX)?K.reducedLevels.MIX:[],ae=Array.isArray((pt=K.reducedLevels)==null?void 0:pt.ERP)?K.reducedLevels.ERP:[];if(le.some(q=>q.group==="MIX"&&V.includes(q.level)||q.group==="ERP"&&ae.includes(q.level))){b("No  possvel reduzir um nvel que j foi reduzido anteriormente.");return}e(q=>{const ie=q.map((Re,ut)=>{var fi,qa;if(ut!==B)return Re;let He={A:!1,B:!1,C:!1,D:!1,...Re.mixOwned||Re.mix||{}},ye={A:!1,B:!1,C:!1,D:!1,...Re.erpOwned||Re.erp||{}};He=_e(He,Re.mixProdutos),ye=_e(ye,Re.erpSistemas);const Le=[...Array.isArray((fi=Re.reducedLevels)==null?void 0:fi.MIX)?Re.reducedLevels.MIX:[]],gn=[...Array.isArray((qa=Re.reducedLevels)==null?void 0:qa.ERP)?Re.reducedLevels.ERP:[]];let Y=0,X=String(Re.mixProdutos||"D").toUpperCase(),it=String(Re.erpLevel||Re.erpSistemas||"D").toUpperCase();for(const kt of le)if(Y+=Math.max(0,Number(kt.credit||0)),kt.group==="MIX"){if(kt.level===X){const nr=["A","B","C","D"],rr=nr.indexOf(X);for(let yn=rr+1;yn<nr.length;yn++){const qn=nr[yn];if(He[qn]||qn==="D"){X=qn;break}}}delete He[kt.level],He[kt.level]=!1,Le.includes(kt.level)||Le.push(kt.level)}else if(kt.group==="ERP"){if(kt.level===it){const nr=["A","B","C","D"],rr=nr.indexOf(it);for(let yn=rr+1;yn<nr.length;yn++){const qn=nr[yn];if(ye[qn]||qn==="D"){it=qn;break}}}delete ye[kt.level],ye[kt.level]=!1,gn.includes(kt.level)||gn.push(kt.level)}He.A||He.B||He.C||(He.D=!0,He.A=!1,He.B=!1,He.C=!1),ye.A||ye.B||ye.C||(ye.D=!0,ye.A=!1,ye.B=!1,ye.C=!1);const Wn=C(He),Gn=C(ye),br=Wn!=="-"?Wn:X||"D",Dn=Gn!=="-"?Gn:it||"D",tr={...He},wr={...ye};return{...Re,cash:(Number(Re.cash)||0)+Y,mixOwned:tr,erpOwned:wr,mix:tr,erp:wr,mixProdutos:br,erpLevel:Dn,erpSistemas:Dn,reducedLevels:{MIX:Le,ERP:gn}}});return x(ie,o,P.current),ie});const qe=le.reduce((q,ie)=>q+Math.max(0,Number(ie.credit||0)),0);if(le.length===1){const q=le[0];b(`${(K==null?void 0:K.name)||"Jogador"} reduziu ${q.group} nvel ${q.level} e recebeu +$${qe.toLocaleString()}`)}else b(`${(K==null?void 0:K.name)||"Jogador"} reduziu ${le.length} nveis e recebeu +$${qe.toLocaleString()}`);return}if(J.type==="BANKRUPT"){const z=o;try{String((Rn=t[z])==null?void 0:Rn.id)===String(d)&&(T==null||T(!0))}catch{}const R=t.map((_e,C)=>C===z?{..._e,bankrupt:!0}:_e);if(b(`${((mt=t[z])==null?void 0:mt.name)||"Jogador"} declarou FALNCIA.`),Fn(R)<=1){const _e=R.findIndex(C=>!(C!=null&&C.bankrupt));k(_e>=0?R[_e]:null),e(R),v(!0),p(!1),x(R,o,n,!0,_e>=0?R[_e]:null);return}const le=Sn(R,z);e(R),s(le),p(!1),x(R,le,P.current),console.log("[DEBUG]  advanceAndMaybeLap finalizada (falncia) - posio final:",(mn=R[le])==null?void 0:mn.pos);return}console.log("[DEBUG]  advanceAndMaybeLap finalizada normalmente - posio final:",(Tn=nextPlayers[curIdx])==null?void 0:Tn.pos)}},[t,n,o,c,u,d,f,m,b,x,e,r,s,p,v,k,rt,D,S,A,T]);return pe.useEffect(()=>{if(y===0&&_&&!L.current){const J=te.current;String(J||"")===String(d)?(console.log("[DEBUG]  Destravando turnLock - modalLocks: 0, sou o lockOwner"),p(!1),U.current=!1):c||(console.log("[DEBUG]  Destravando turnLock - no  minha vez e no sou lockOwner"),p(!1),U.current=!1)}},[y,_,Ze,d,c,p]),pe.useEffect(()=>{if(c&&y===0&&_&&!L.current){const J=te.current;String(J||"")===String(d)?(console.log("[DEBUG]  Destravando turnLock -  minha vez e sou o lockOwner"),p(!1),U.current=!1):J||(console.log("[DEBUG]  Destravando turnLock -  minha vez mas no h lockOwner"),p(!1),U.current=!1)}},[c,y,_,Ze,d,p]),pe.useEffect(()=>()=>{Se.current&&(clearTimeout(Se.current),Se.current=null),U.current=!1,L.current=!1},[]),{advanceAndMaybeLap:ls,onAction:st,nextTurn:di,modalLocks:y,lockOwner:Ze}}class Ob{constructor(){this.errors=[],this.warnings=[],this.validationCount=0,this.isEnabled=!1}validatePlayerState(e,n=""){const r=[],o=[];e.cash<0&&r.push(` Saldo negativo: ${e.cash} (${n})`),e.clients<0&&r.push(` Clientes negativos: ${e.clients} (${n})`),e.vendedoresComuns<0&&r.push(` Vendedores comuns negativos: ${e.vendedoresComuns} (${n})`),e.fieldSales<0&&r.push(` Field sales negativos: ${e.fieldSales} (${n})`),e.insideSales<0&&r.push(` Inside sales negativos: ${e.insideSales} (${n})`),["A","B","C","D"].includes(e.erpLevel)||r.push(` Nvel ERP invlido: ${e.erpLevel} (${n})`),["A","B","C","D"].includes(e.mixProdutos)||r.push(` Nvel Mix invlido: ${e.mixProdutos} (${n})`),(e.pos<0||e.pos>=55)&&r.push(` Posio invlida: ${e.pos} (deve estar entre 0 e 54) (${n})`),(e.az<0||e.am<0||e.rox<0)&&r.push(` Certificados negativos: az=${e.az}, am=${e.am}, rox=${e.rox} (${n})`);const{cap:l,inAtt:c}=gr(e);c>l&&o.push(` Atendimento (${c}) maior que capacidade (${l}) (${n})`);const u=Hr(e),d=xr(e);return u<0&&r.push(` Faturamento negativo: ${u} (${n})`),d<0&&r.push(` Despesas negativas: ${d} (${n})`),this.errors.push(...r),this.warnings.push(...o),{errors:r,warnings:o}}validateTurnState(e,n,r=""){const o=[],s=[];(n<0||n>=e.length)&&o.push(` turnIdx invlido: ${n} (deve estar entre 0 e ${e.length-1}) (${r})`);const i=e[n];i||o.push(` Jogador do turno no existe: ndice ${n} (${r})`),i&&i.bankrupt&&o.push(` Jogador do turno est falido: ${i.name} (${r})`);const l=Fn(e);if(l===0&&o.push(` Nenhum jogador vivo restante (${r})`),l>1){const c=Sn(e,n),u=e[c];(!u||u.bankrupt)&&o.push(` Prximo jogador invlido: ndice ${c} (${r})`)}return this.errors.push(...o),this.warnings.push(...s),{errors:o,warnings:s}}validateAction(e,n,r,o=""){const s=[],i=[];return["ROLL_DICE","BUY","DONT_BUY","BANKRUPT","RECOVERY"].includes(e)||s.push(` Ao invlida: ${e} (${o})`),e!=="BANKRUPT"&&n.bankrupt&&s.push(` Jogador falido no pode executar ao: ${e} (${o})`),e==="BUY"&&n.cash<0&&s.push(` Jogador sem saldo no pode comprar (${o})`),this.errors.push(...s),this.warnings.push(...i),{errors:s,warnings:i}}validateSynchronization(e,n,r=""){const o=[],s=[];return e.turnIdx!==n.turnIdx&&o.push(` turnIdx dessincronizado: local=${e.turnIdx}, remote=${n.turnIdx} (${r})`),e.round!==n.round&&o.push(` round dessincronizado: local=${e.round}, remote=${n.round} (${r})`),e.gameOver!==n.gameOver&&o.push(` gameOver dessincronizado: local=${e.gameOver}, remote=${n.gameOver} (${r})`),e.winner!==n.winner&&o.push(` winner dessincronizado: local=${e.winner}, remote=${n.winner} (${r})`),e.players.length!==n.players.length&&o.push(` Nmero de jogadores dessincronizado: local=${e.players.length}, remote=${n.players.length} (${r})`),this.errors.push(...o),this.warnings.push(...s),{errors:o,warnings:s}}validateBusinessRules(e,n,r=""){const o=[],s=[];n==="TAKE_LOAN"&&e.loanPending&&o.push(` Jogador j tem emprstimo pendente (${r})`),(n==="BUY_ERP_LEVEL_D"||n==="BUY_MIX_LEVEL_D")&&o.push(` Nvel D no pode ser comprado (j possui) (${r})`);const i=e.vendedoresComuns+e.fieldSales+e.insideSales;return i>20&&s.push(` Muitos vendedores: ${i} (mximo recomendado: 20) (${r})`),e.cash<0&&!e.bankrupt&&o.push(` Jogador com saldo negativo deve declarar falncia (${r})`),this.errors.push(...o),this.warnings.push(...s),{errors:o,warnings:s}}validateGameState(e,n,r,o,s,i=""){this.validationCount++,console.log(` [Validao ${this.validationCount}] ${i}`),e.forEach((l,c)=>{this.validatePlayerState(l,`Jogador ${c+1} (${l.name})`)}),this.validateTurnState(e,n,`Turno ${n}`),o&&!s&&this.errors.push(" Jogo terminado mas sem vencedor definido"),s&&!o&&this.warnings.push(" Vencedor definido mas jogo no terminado"),this.reportValidation(i)}reportValidation(e=""){const n=this.errors.length,r=this.warnings.length;n>0&&(console.group(` ERROS ENCONTRADOS (${n}) - ${e}`),this.errors.forEach((o,s)=>{console.error(`${s+1}. ${o}`)}),console.groupEnd()),r>0&&(console.group(` AVISOS (${r}) - ${e}`),this.warnings.forEach((o,s)=>{console.warn(`${s+1}. ${o}`)}),console.groupEnd()),n===0&&r===0&&console.log(` Validao OK - ${e}`),this.errors=[],this.warnings=[]}enable(){this.isEnabled=!0,console.log(" Validador em tempo real ATIVADO")}disable(){this.isEnabled=!1,console.log(" Validador em tempo real DESATIVADO")}clear(){this.errors=[],this.warnings=[],this.validationCount=0,console.log(" Validador limpo")}getStats(){return{validationCount:this.validationCount,isEnabled:this.isEnabled,totalErrors:this.errors.length,totalWarnings:this.warnings.length}}}const go=new Ob,$b=(t,e,n,r,o,s="")=>{go.isEnabled&&go.validateGameState(t,e,n,r,o,s)},Sm=()=>go.enable(),_m=()=>go.disable(),Em=()=>go.clear(),km=()=>go.getStats();typeof window<"u"&&(window.enableRealTimeValidation=Sm,window.disableRealTimeValidation=_m,window.clearValidationLogs=Em,window.getValidationStats=km,window.realTimeValidator=go,console.log(" Validador em tempo real carregado!"),console.log('Execute "enableRealTimeValidation()" para ativar'),console.log('Execute "getValidationStats()" para ver estatsticas'));const yt=(t={})=>({id:"test-player-1",name:"Jogador Teste",cash:18e3,pos:0,color:"#ffd54f",bens:4e3,clients:1,vendedoresComuns:1,fieldSales:0,insideSales:0,gestores:0,gestoresComerciais:0,managers:0,erpLevel:"D",mixProdutos:"D",az:0,am:0,rox:0,trainingsByVendor:{},onboarding:!1,bankrupt:!1,loanPending:null,...t}),Pb=(t=[yt()])=>({players:t,turnIdx:0,round:1,gameOver:!1,winner:null}),Cm=()=>{console.group(" Testes de Clculos Bsicos");const t=yt(),e=Hr(t);console.assert(e===770,`Faturamento inicial deve ser 770, mas foi ${e}`);const n=xr(t);console.assert(n===1200,`Despesas iniciais devem ser 1200, mas foram ${n}`);const{cap:r,inAtt:o}=gr(t);console.assert(r===2,`Capacidade inicial deve ser 2, mas foi ${r}`),console.assert(o===1,`Atendimento inicial deve ser 1, mas foi ${o}`),console.log(" Clculos bsicos: OK"),console.groupEnd()},jm=()=>{console.group(" Testes de Movimento e Posio");const e=(yt({pos:0}).pos+4)%55;console.assert(e===4,`Movimento de 4 casas deve resultar em posio 4, mas foi ${e}`);const r=(yt({pos:54}).pos+1)%55;console.assert(r===0,`Volta completa deve resultar em posio 0, mas foi ${r}`);const o=Ls(0,4,0);console.assert(o===!1,"No deve ter cruzado casa 0 ao mover de 0 para 4");const s=Ls(54,0,0);console.assert(s===!0,"Deve ter cruzado casa 0 ao dar volta completa"),console.log(" Movimento e posio: OK"),console.groupEnd()},Rm=()=>{console.group(" Testes de Certificados");const t=yt();console.assert(yf(t)===!1,"Jogador no deve ter certificado azul inicialmente"),console.assert(xf(t)===!1,"Jogador no deve ter certificado amarelo inicialmente"),console.assert(bf(t)===!1,"Jogador no deve ter certificado roxo inicialmente");const e={...t,az:1,am:1,rox:1};console.assert(yf(e)===!0,"Jogador deve ter certificado azul aps adicionar"),console.assert(xf(e)===!0,"Jogador deve ter certificado amarelo aps adicionar"),console.assert(bf(e)===!0,"Jogador deve ter certificado roxo aps adicionar");const n=xm(t);console.assert(n===0,`Contagem inicial de gestores deve ser 0, mas foi ${n}`),console.log(" Certificados: OK"),console.groupEnd()},Tm=()=>{console.group(" Testes de Falncia");const t=[yt({id:"p1",bankrupt:!1}),yt({id:"p2",bankrupt:!0}),yt({id:"p3",bankrupt:!1})],e=Fn(t);console.assert(e===2,`Deve haver 2 jogadores vivos, mas foram ${e}`);const n=Sn(t,0);console.assert(n===2,`Prximo jogador vivo aps ndice 0 deve ser 2, mas foi ${n}`);const r=t.map(s=>({...s,bankrupt:!0})),o=Fn(r);console.assert(o===0,`Todos os jogadores falidos devem resultar em 0 vivos, mas foram ${o}`),console.log(" Falncia: OK"),console.groupEnd()},Dm=()=>{console.group(" Testes de Aplicao de Deltas");const t=yt(),e=Qe(t,{cashDelta:1e3});console.assert(e.cash===19e3,`Adicionar 1000 deve resultar em 19000, mas foi ${e.cash}`);const n=Qe(t,{clientsDelta:2});console.assert(n.clients===3,`Adicionar 2 clientes deve resultar em 3, mas foi ${n.clients}`);const r=Qe(t,{vendedoresComunsDelta:1});console.assert(r.vendedoresComuns===2,`Adicionar 1 vendedor deve resultar em 2, mas foi ${r.vendedoresComuns}`);const o=Qe(t,{cashDelta:-500,clientsDelta:1,vendedoresComunsDelta:1});console.assert(o.cash===17500,`Mltiplos deltas: cash deve ser 17500, mas foi ${o.cash}`),console.assert(o.clients===2,`Mltiplos deltas: clients deve ser 2, mas foi ${o.clients}`),console.assert(o.vendedoresComuns===2,`Mltiplos deltas: vendedoresComuns deve ser 2, mas foi ${o.vendedoresComuns}`),console.log(" Aplicao de deltas: OK"),console.groupEnd()},Nm=()=>{console.group(" Testes de Nveis ERP e Mix");const t=yt();console.assert(t.erpLevel==="D",`Nvel ERP inicial deve ser D, mas foi ${t.erpLevel}`),console.assert(t.mixProdutos==="D",`Nvel Mix inicial deve ser D, mas foi ${t.mixProdutos}`);const e=Qe(t,{erpLevelSet:"A"});console.assert(e.erpLevel==="A",`Nvel ERP deve ser A aps mudana, mas foi ${e.erpLevel}`);const n=Qe(t,{mixProdutosSet:"B"});console.assert(n.mixProdutos==="B",`Nvel Mix deve ser B aps mudana, mas foi ${n.mixProdutos}`),console.log(" Nveis ERP e Mix: OK"),console.groupEnd()},Am=()=>{console.group(" Testes de Turnos");const t=[yt({id:"p1"}),yt({id:"p2"}),yt({id:"p3"})],e=Sn(t,0);console.assert(e===1,`Prximo turno aps 0 deve ser 1, mas foi ${e}`);const n=[{...t[0],bankrupt:!1},{...t[1],bankrupt:!0},{...t[2],bankrupt:!1}],r=Sn(n,0);console.assert(r===2,`Prximo turno aps 0 com jogador 1 falido deve ser 2, mas foi ${r}`);const o=Sn(t,2);console.assert(o===0,`Prximo turno aps ltimo jogador deve ser 0, mas foi ${o}`),console.log(" Turnos: OK"),console.groupEnd()},Om=()=>{console.group(" Testes de Regras de Negcio");const e=yt({cash:100}).cash>=1e3;console.assert(e===!1,"Jogador com 100 no deve poder pagar 1000");const n=yt({vendedoresComuns:10,fieldSales:5,insideSales:3}),{cap:r}=gr(n);console.assert(r>0,"Jogador com muitos vendedores deve ter capacidade > 0");const o=yt({loanPending:{amount:5e3,dueRound:2,charged:!1}});console.assert(o.loanPending!==null,"Jogador deve ter emprstimo pendente"),console.assert(o.loanPending.amount===5e3,"Valor do emprstimo deve ser 5000"),console.log(" Regras de negcio: OK"),console.groupEnd()},$m=()=>{console.group(" Testes de Integrao");const t=Pb([yt({id:"p1",name:"Jogador 1"}),yt({id:"p2",name:"Jogador 2"})]);console.assert(t.players.length===2,"Jogo deve ter 2 jogadores"),console.assert(t.turnIdx===0,"Turno inicial deve ser 0"),console.assert(t.round===1,"Rodada inicial deve ser 1"),console.assert(t.gameOver===!1,"Jogo no deve estar terminado inicialmente");const e=t.players[0],n=(e.pos+6)%55,r={...e,pos:n};console.assert(r.pos===6,"Jogador deve estar na posio 6 aps mover 6 casas");const o=2e3,s=r.cash>=o;console.assert(s===!0,"Jogador deve poder pagar 2000");const i=Qe(r,{cashDelta:-o});console.assert(i.cash===16e3,"Aps compra de 2000, saldo deve ser 16000"),console.log(" Integrao: OK"),console.groupEnd()},Pm=()=>{console.group(" EXECUTANDO TESTES REGRESSIVOS COMPLETOS"),console.log("Iniciando validao automtica de todas as funcionalidades...");try{Cm(),jm(),Rm(),Tm(),Dm(),Nm(),Am(),Om(),$m(),console.log(" TODOS OS TESTES PASSARAM! O jogo est funcionando corretamente."),console.log(" Validao completa: Todas as funcionalidades esto OK")}catch(t){console.error(" FALHA NOS TESTES:",t),console.log(" Verifique os erros acima e corrija antes de continuar")}console.groupEnd()},Lm=()=>{console.group(" Testes de Problemas Reportados");const t=yt();console.assert(t.erpLevel==="D","Nvel ERP inicial deve ser D"),console.assert(t.mixProdutos==="D","Nvel Mix inicial deve ser D"),console.log(" Nvel D inicial: OK");const e=[yt({id:"p1"}),yt({id:"p2"})],n=Sn(e,0);console.assert(n===1,"Turno deve passar de 0 para 1"),console.log(" Passagem de turno: OK");const r={...t,az:1,am:1,rox:1};console.assert(r.az===1,"Certificado azul deve ser 1"),console.assert(r.am===1,"Certificado amarelo deve ser 1"),console.assert(r.rox===1,"Certificado roxo deve ser 1"),console.log(" Exibio de certificados: OK");const o={...t,bankrupt:!0},s=Fn([t,o]);console.assert(s===1,"Deve haver 1 jogador vivo aps falncia"),console.log(" Sistema de falncia: OK"),console.log(" Todos os problemas reportados foram validados!"),console.groupEnd()};typeof window<"u"&&(window.runRegressionTests=Pm,window.testReportedIssues=Lm,window.testBasicCalculations=Cm,window.testMovementAndPosition=jm,window.testCertificates=Rm,window.testBankruptcy=Tm,window.testDeltaApplication=Dm,window.testLevels=Nm,window.testTurns=Am,window.testBusinessRules=Om,window.testIntegration=$m,console.log(" Testes regressivos carregados!"),console.log('Execute "runRegressionTests()" no console para rodar todos os testes'),console.log('Execute "testReportedIssues()" para testar problemas especficos'));class vo{constructor(){this.players=[],this.turnIdx=0,this.round=1,this.gameOver=!1,this.winner=null,this.log=[]}initializeGame(e=2){this.players=[];for(let n=0;n<e;n++)this.players.push({id:`player-${n}`,name:`Jogador ${n+1}`,cash:18e3,pos:0,color:["#ffd54f","#e57373","#81c784","#64b5f6"][n],bens:4e3,clients:1,vendedoresComuns:1,fieldSales:0,insideSales:0,gestores:0,gestoresComerciais:0,managers:0,erpLevel:"D",mixProdutos:"D",az:0,am:0,rox:0,trainingsByVendor:{},onboarding:!1,bankrupt:!1,loanPending:null});this.turnIdx=0,this.round=1,this.gameOver=!1,this.winner=null,this.log=[],this.log(` Jogo inicializado com ${e} jogadores`)}rollDice(e){const n=this.players.find(i=>i.id===e);if(!n||n.bankrupt)return this.log(` Jogador ${e} no pode rolar dado`),!1;const r=Math.floor(Math.random()*6)+1,o=(n.pos+r)%55,s=n.pos>o;return n.pos=o,this.log(` ${n.name} rolou ${r}, moveu para posio ${o}`),s&&(this.round++,this.log(` ${n.name} completou uma volta! Rodada ${this.round}`)),{dice:r,newPos:o,crossedStart:s}}buyItem(e,n,r){const o=this.players.find(s=>s.id===e);return!o||o.bankrupt?(this.log(` Jogador ${e} no pode comprar`),!1):o.cash<r?(this.log(` ${o.name} no tem saldo suficiente para comprar ${n}`),!1):(o.cash-=r,this.log(` ${o.name} comprou ${n} por ${r}`),!0)}applyCard(e,n,r){const o=this.players.find(l=>l.id===e);if(!o||o.bankrupt)return this.log(` Jogador ${e} no pode receber carta`),!1;const s=o.cash,i=o.clients;return Object.assign(o,Qe(o,r)),this.log(` ${o.name} recebeu carta ${n}:`),this.log(`   Dinheiro: ${s}  ${o.cash} (${r.cashDelta||0})`),this.log(`   Clientes: ${i}  ${o.clients} (${r.clientsDelta||0})`),!0}declareBankruptcy(e){const n=this.players.find(o=>o.id===e);return!n||n.bankrupt?(this.log(` Jogador ${e} no pode declarar falncia`),!1):(n.bankrupt=!0,this.log(` ${n.name} declarou falncia!`),Fn(this.players)<=1&&this.endGame(),!0)}nextTurn(){if(Fn(this.players)<=1){this.endGame();return}this.turnIdx=Sn(this.players,this.turnIdx),this.log(` Turno passou para ${this.players[this.turnIdx].name}`)}endGame(){this.gameOver=!0;const e=this.players.filter(n=>!n.bankrupt);e.length===1?(this.winner=e[0],this.log(` ${this.winner.name} venceu!`)):e.length===0?this.log(" Todos os jogadores falharam!"):(e.sort((n,r)=>r.cash+r.bens-(n.cash+n.bens)),this.winner=e[0],this.log(` ${this.winner.name} venceu por ter maior patrimnio!`))}log(e){const n=new Date().toLocaleTimeString();this.log.push(`[${n}] ${e}`),console.log(`[${n}] ${e}`)}getGameState(){return{players:[...this.players],turnIdx:this.turnIdx,round:this.round,gameOver:this.gameOver,winner:this.winner}}getPlayerStats(e){const n=this.players.find(c=>c.id===e);if(!n)return null;const r=Hr(n),o=xr(n),{cap:s,inAtt:i}=gr(n),l=n.cash+n.bens;return{name:n.name,cash:n.cash,bens:n.bens,patrimonio:l,pos:n.pos,clients:n.clients,vendedoresComuns:n.vendedoresComuns,fieldSales:n.fieldSales,insideSales:n.insideSales,erpLevel:n.erpLevel,mixProdutos:n.mixProdutos,az:n.az,am:n.am,rox:n.rox,faturamento:r,despesas:o,lucro:r-o,capacidade:s,atendimento:i,bankrupt:n.bankrupt}}}const Im=()=>{console.group(" Teste de Fluxo Completo do Jogo");const t=new vo;t.initializeGame(2);for(let e=0;e<10;e++){const n=t.players[t.turnIdx];if(!t.rollDice(n.id))break;if(Math.random()<.3){const o=Math.floor(Math.random()*5e3)+1e3;t.buyItem(n.id,"Item",o)}if(Math.random()<.2){const o={cashDelta:Math.floor(Math.random()*4e3)-2e3,clientsDelta:Math.floor(Math.random()*3)-1};t.applyCard(n.id,"Sorte/Revs",o)}if(t.nextTurn(),t.gameOver)break}console.log(" Fluxo completo testado"),console.groupEnd()},Mm=()=>{console.group(" Teste de Fluxo de Falncia");const t=new vo;t.initializeGame(2);const e=t.players[0];e.cash=100;const n=xr(e);e.cash<n&&(t.log(` ${e.name} no pode pagar despesas de ${n}`),t.declareBankruptcy(e.id)),console.assert(t.gameOver===!0,"Jogo deve ter terminado aps falncia"),console.assert(t.winner!==null,"Deve haver um vencedor"),console.log(" Fluxo de falncia testado"),console.groupEnd()},Bm=()=>{console.group(" Teste de Gerenciamento de Turnos");const t=new vo;t.initializeGame(3);for(let e=0;e<6;e++){const n=t.players[t.turnIdx];t.log(`Turno ${e+1}: ${n.name}`),t.nextTurn()}console.assert(t.turnIdx===0,"Deve voltar ao primeiro jogador"),console.log(" Gerenciamento de turnos testado"),console.groupEnd()},Um=()=>{console.group(" Teste de Gerenciamento de Recursos");const t=new vo;t.initializeGame(1);const e=t.players[0];t.buyItem(e.id,"Vendedor Comum",2e3),e.vendedoresComuns+=1,e.az=1,e.am=1,e.rox=1;const n=Hr(e),r=xr(e),{cap:o}=gr(e);console.assert(n>770,"Faturamento deve aumentar com mais vendedores"),console.assert(r>1200,"Despesas devem aumentar com mais vendedores"),console.assert(o>2,"Capacidade deve aumentar com mais vendedores"),console.log(" Gerenciamento de recursos testado"),console.groupEnd()},zm=()=>{console.group(" Teste de Sincronizao");const t=new vo,e=new vo;t.initializeGame(2),e.initializeGame(2);const n=t.getGameState(),r=e.getGameState();console.assert(n.players.length===r.players.length,"Nmero de jogadores deve ser igual"),console.assert(n.turnIdx===r.turnIdx,"turnIdx deve ser igual"),console.assert(n.round===r.round,"round deve ser igual"),console.log(" Sincronizao testada"),console.groupEnd()},Fm=()=>{console.group(" EXECUTANDO TESTES DE INTEGRAO"),console.log("Iniciando validao de integrao...");try{Im(),Mm(),Bm(),Um(),zm(),console.log(" TODOS OS TESTES DE INTEGRAO PASSARAM!"),console.log(" Integrao completa: Todas as funcionalidades trabalham juntas")}catch(t){console.error(" FALHA NOS TESTES DE INTEGRAO:",t),console.log(" Verifique os erros acima e corrija antes de continuar")}console.groupEnd()},To=()=>{const t=new vo;return{start:(e=2)=>{t.initializeGame(e),console.log(" Simulador iniciado! Use os comandos abaixo:"),console.log("  game.rollDice(playerId)"),console.log("  game.buyItem(playerId, item, cost)"),console.log("  game.applyCard(playerId, card, deltas)"),console.log("  game.declareBankruptcy(playerId)"),console.log("  game.nextTurn()"),console.log("  game.getGameState()"),console.log("  game.getPlayerStats(playerId)")},rollDice:e=>t.rollDice(e),buyItem:(e,n,r)=>t.buyItem(e,n,r),applyCard:(e,n,r)=>t.applyCard(e,n,r),declareBankruptcy:e=>t.declareBankruptcy(e),nextTurn:()=>t.nextTurn(),getGameState:()=>t.getGameState(),getPlayerStats:e=>t.getPlayerStats(e),roll:e=>t.rollDice(e),buy:(e,n,r)=>t.buyItem(e,n,r),card:(e,n,r)=>t.applyCard(e,n,r),bankrupt:e=>t.declareBankruptcy(e),next:()=>t.nextTurn(),state:()=>t.getGameState(),stats:e=>t.getPlayerStats(e)}};typeof window<"u"&&(window.runIntegrationTests=Fm,window.testCompleteGameFlow=Im,window.testBankruptcyFlow=Mm,window.testTurnManagement=Bm,window.testResourceManagement=Um,window.testSynchronization=zm,window.createInteractiveSimulator=To,console.log(" Testes de integrao carregados!"),console.log('Execute "runIntegrationTests()" para rodar todos os testes'),console.log('Execute "createInteractiveSimulator()" para criar um simulador interativo'));class _a{constructor(){this.results=[],this.errors=[],this.warnings=[]}log(e,n="info"){const r={message:e,type:n,timestamp:Date.now()};this.results.push(r),n==="error"&&this.errors.push(r),n==="warning"&&this.warnings.push(r),console.log(`[${n.toUpperCase()}] ${e}`)}testBasicTurnAlternation(){this.log(" TESTE 1: Alternncia Bsica de Turnos","info");const e=[{id:"p1",name:"Jogador 1",pos:0,bankrupt:!1},{id:"p2",name:"Jogador 2",pos:0,bankrupt:!1}];let n=0;const r=[];for(let c=0;c<10;c++){const u=e[n];r.push({turn:c+1,playerId:u.id,playerName:u.name,turnIdx:n}),n=(n+1)%e.length}const o=r.filter(c=>c.playerId==="p1"),s=r.filter(c=>c.playerId==="p2");o.length===5&&s.length===5?this.log(" Alternncia bsica funcionando corretamente","info"):this.log(` Alternncia bsica falhou: P1=${o.length}, P2=${s.length}`,"error");let i=null,l=!0;for(const c of r){if(i===c.playerId){l=!1;break}i=c.playerId}l?this.log(" Ordem de alternncia correta","info"):this.log(" Ordem de alternncia incorreta","error")}testAllBoardSpaces(){this.log(" TESTE 2: Verificao de Todas as Casas do Tabuleiro","info");const e={erp:[6,16,32,49],training:[2,11,19,47],directBuy:[5,10,43],insideSales:[12,21,30,42,53],clients:[4,8,15,17,20,27,34,36,39,46,52,55],manager:[18,24,29,51],fieldSales:[13,25,33,38,50],commonSellers:[9,28,40,45],mixProducts:[7,31,44],luckMisfortune:[3,14,22,26,35,41,48,54],faturamento:[0],despesas:[22]},n=new Set;Object.values(e).forEach(i=>{i.forEach(l=>n.add(l))});const r=[];for(let i=1;i<=ao;i++)!n.has(i)&&i!==1&&r.push(i);r.length===0?this.log(` Todas as ${ao} casas esto mapeadas`,"info"):this.log(` Casas no mapeadas: ${r.join(", ")}`,"error");const o={};Object.entries(e).forEach(([i,l])=>{l.forEach(c=>{o[c]||(o[c]=[]),o[c].push(i)})});const s=Object.entries(o).filter(([i,l])=>l.length>1);s.length===0?this.log(" Nenhuma casa tem tipos duplicados","info"):s.forEach(([i,l])=>{this.log(` Casa ${i} tem mltiplos tipos: ${l.join(", ")}`,"warning")}),Object.entries(e).forEach(([i,l])=>{this.log(`  ${i}: ${l.length} casas (${l.join(", ")})`,"info")})}testButtonNotLockedForBothPlayers(){this.log(" TESTE 3: Boto No Trava para Ambos Jogadores","info");const e=[{id:"p1",name:"Jogador 1",bankrupt:!1},{id:"p2",name:"Jogador 2",bankrupt:!1}];[{turnIdx:0,turnLock:!1,modalLocks:0,gameOver:!1},{turnIdx:1,turnLock:!1,modalLocks:0,gameOver:!1},{turnIdx:0,turnLock:!0,modalLocks:1,gameOver:!1},{turnIdx:1,turnLock:!0,modalLocks:0,gameOver:!1}].forEach((r,o)=>{const s=e[r.turnIdx],i=r.turnIdx===0&&!s.bankrupt,l=r.turnIdx===1&&!s.bankrupt,c=i&&r.modalLocks===0&&!r.turnLock&&!r.gameOver,u=l&&r.modalLocks===0&&!r.turnLock&&!r.gameOver;r.modalLocks===0&&!r.turnLock&&(!c&&!u?this.log(` Estado ${o}: Nenhum jogador pode rolar quando deveria`,"error"):this.log(` Estado ${o}: Pelo menos um jogador pode rolar`,"info")),r.turnIdx===0&&u&&this.log(` Estado ${o}: P2 pode rolar quando  turno de P1`,"error"),r.turnIdx===1&&c&&this.log(` Estado ${o}: P1 pode rolar quando  turno de P2`,"error")})}testModalsDontBlockTurnIndefinitely(){this.log(" TESTE 4: Modais No Bloqueiam Turno Indefinidamente","info");let e=0,n=!1;const r=[];[{action:"open",type:"clients"},{action:"open",type:"insufficientFunds"},{action:"close",type:"insufficientFunds"},{action:"close",type:"clients"}].forEach((s,i)=>{s.action==="open"?(e++,i===0&&(n=!0)):(e=Math.max(0,e-1),e===0&&setTimeout(()=>{n=!1,r.push({event:"turnUnlocked",timestamp:Date.now()})},200)),r.push({event:s.action,type:s.type,modalLocks:e,turnLock:n})}),setTimeout(()=>{n&&e===0?this.log(" turnLock no foi liberado aps fechar todas as modais","error"):this.log(" turnLock foi liberado corretamente aps fechar todas as modais","info")},500)}testBankruptPlayersSkipped(){this.log(" TESTE 5: Jogadores Falidos So Pulados","info");const e=[{id:"p1",name:"Jogador 1",bankrupt:!1},{id:"p2",name:"Jogador 2",bankrupt:!0},{id:"p3",name:"Jogador 3",bankrupt:!1}];let n=0;const r=[];for(let l=0;l<6;l++){let c=e[n];for(;c.bankrupt;)n=(n+1)%e.length,c=e[n];r.push({turn:l+1,playerId:c.id,turnIdx:n}),n=(n+1)%e.length}const o=r.filter(l=>l.playerId==="p2");o.length===0?this.log(" Jogador falido foi pulado corretamente","info"):this.log(` Jogador falido teve ${o.length} turnos (deveria ser 0)`,"error");const s=r.filter(l=>l.playerId==="p1"),i=r.filter(l=>l.playerId==="p3");s.length===3&&i.length===3?this.log(" Jogadores vivos alternaram corretamente","info"):this.log(` Alternncia incorreta: P1=${s.length}, P3=${i.length}`,"error")}testMultiplayerSync(){this.log(" TESTE 6: Sincronizao Multiplayer","info");const e={turnIdx:0,lastLocalState:{turnIdx:0,timestamp:Date.now()-1e3}},n={turnIdx:1};Date.now()-e.lastLocalState.timestamp<5e3&&e.lastLocalState.turnIdx!==n.turnIdx?this.log(" Proteo contra reverso de turnIdx funcionando","info"):(e.turnIdx=n.turnIdx,this.log(" Sincronizao de turnIdx funcionando","info"))}testSafetyTimeout(){this.log(" TESTE 7: Timeout de Segurana do TurnLock","info");let e=!0,n=0;const r=Date.now(),o=3e4,s=()=>{const i=Date.now()-r;i>=o&&e&&n===0?(e=!1,this.log(" Timeout de segurana liberou turnLock aps 30s","info")):i<o&&setTimeout(s,1e3)};s()}async runAllTests(){this.log(" Iniciando Testes de Alternncia de Turnos","info"),this.log("=".repeat(60),"info");try{return this.testBasicTurnAlternation(),this.testAllBoardSpaces(),this.testButtonNotLockedForBothPlayers(),this.testModalsDontBlockTurnIndefinitely(),this.testBankruptPlayersSkipped(),this.testMultiplayerSync(),this.testSafetyTimeout(),await new Promise(e=>setTimeout(e,1e3)),this.log("=".repeat(60),"info"),this.log(` Testes concludos: ${this.results.filter(e=>e.type==="info").length}`,"info"),this.log(` Avisos: ${this.warnings.length}`,"warning"),this.log(` Erros: ${this.errors.length}`,this.errors.length>0?"error":"info"),{success:this.errors.length===0,results:this.results,errors:this.errors,warnings:this.warnings}}catch(e){return this.log(` Erro ao executar testes: ${e.message}`,"error"),{success:!1,error:e.message,results:this.results,errors:this.errors,warnings:this.warnings}}}}typeof window<"u"&&(window.TurnAlternationTester=_a,console.log("%c TurnAlternationTester disponvel","color: #4CAF50; font-weight: bold"),console.log("Execute: const tester = new TurnAlternationTester(); tester.runAllTests()"));class Lb{constructor(){this.isRunning=!1,this.testResults=[],this.validationEnabled=!1,this.simulator=null}async runAllTests(){var n,r,o,s,i;if(this.isRunning){console.warn(" Testes j esto em execuo!");return}this.isRunning=!0,console.group(" EXECUTANDO SUITE COMPLETA DE TESTES"),console.log("Iniciando validao completa do Sales Game...");const e=Date.now();this.testResults=[];try{console.group(" 1. Testes Regressivos");const l=Date.now();Pm();const c=Date.now()-l;this.testResults.push({name:"Regressivos",time:c,status:"PASS"}),console.log(` Testes regressivos concludos em ${c}ms`),console.groupEnd(),console.group(" 2. Testes de Integrao");const u=Date.now();Fm();const d=Date.now()-u;this.testResults.push({name:"Integrao",time:d,status:"PASS"}),console.log(` Testes de integrao concludos em ${d}ms`),console.groupEnd(),console.group(" 3. Testes de Problemas Reportados");const h=Date.now();Lm();const f=Date.now()-h;this.testResults.push({name:"Problemas Reportados",time:f,status:"PASS"}),console.log(` Testes de problemas reportados concludos em ${f}ms`),console.groupEnd(),console.group(" 4. Testes de Alternncia de Turnos");const g=Date.now(),b=await new _a().runAllTests(),_=Date.now()-g;this.testResults.push({name:"Alternncia de Turnos",time:_,status:b.success?"PASS":"FAIL",errors:((n=b.errors)==null?void 0:n.length)||0,warnings:((r=b.warnings)==null?void 0:r.length)||0}),b.success?(console.log(` Testes de alternncia de turnos concludos em ${_}ms`),console.log(`   - Erros: ${((o=b.errors)==null?void 0:o.length)||0}`),console.log(`   - Avisos: ${((s=b.warnings)==null?void 0:s.length)||0}`)):(console.log(` Testes de alternncia de turnos falharam em ${_}ms`),console.log(`   - Erros: ${((i=b.errors)==null?void 0:i.length)||0}`)),console.groupEnd();const p=Date.now()-e;this.printSummary(p)}catch(l){console.error(" FALHA NA SUITE DE TESTES:",l),this.testResults.push({name:"Geral",time:0,status:"FAIL",error:l.message})}finally{this.isRunning=!1,console.groupEnd()}}enableRealTimeValidation(){Sm(),this.validationEnabled=!0,console.log(" Validao em tempo real ATIVADA")}disableRealTimeValidation(){_m(),this.validationEnabled=!1,console.log(" Validao em tempo real DESATIVADA")}getValidationStats(){const e=km();return console.log(" Estatsticas de Validao:",e),e}clearValidationLogs(){Em(),console.log(" Logs de validao limpos")}createSimulator(e=2){return this.simulator=To(),this.simulator.start(e),console.log(" Simulador interativo criado!"),console.log('Use "testPanel.simulator" para acessar os comandos'),this.simulator}testTurnPassing(){console.group(" Teste Especfico: Passagem de Turnos");const e=To();e.start(2);for(let n=0;n<6;n++){const r=e.getGameState(),o=r.players[r.turnIdx];console.log(`Turno ${n+1}: ${o.name} (ndice ${r.turnIdx})`),e.nextTurn()}console.log(" Teste de passagem de turnos concludo"),console.groupEnd()}testBankruptcySystem(){console.group(" Teste Especfico: Sistema de Falncia");const e=To();e.start(2);const n=e.getGameState().players[0];e.declareBankruptcy(n.id);const r=e.getGameState();console.assert(r.gameOver===!0,"Jogo deve terminar aps falncia"),console.assert(r.winner!==null,"Deve haver um vencedor"),console.log(" Teste de sistema de falncia concludo"),console.groupEnd()}testResourceUpdates(){console.group(" Teste Especfico: Atualizao de Recursos");const e=To();e.start(1);const n=e.getGameState().players[0],r=e.getPlayerStats(n.id);e.card(n.id,"Revs",{clientsDelta:-2});const o=e.getPlayerStats(n.id);console.assert(o.clients<r.clients,"Clientes devem ter diminudo"),console.log(" Teste de atualizao de recursos concludo"),console.groupEnd()}testLevelRestrictions(){console.group(" Teste Especfico: Restries de Nvel");const e=To();e.start(1);const n=e.getGameState().players[0];console.assert(n.erpLevel==="D","Nvel ERP inicial deve ser D"),console.assert(n.mixProdutos==="D","Nvel Mix inicial deve ser D"),console.log(" Teste de restries de nvel concludo"),console.groupEnd()}async testTurnAlternation(){var r,o,s,i,l;console.group(" Teste Especfico: Alternncia de Turnos");const n=await new _a().runAllTests();return n.success?(console.log(" Todos os testes de alternncia de turnos passaram!"),console.log(`   - Total de testes: ${((r=n.results)==null?void 0:r.length)||0}`),console.log(`   - Erros: ${((o=n.errors)==null?void 0:o.length)||0}`),console.log(`   - Avisos: ${((s=n.warnings)==null?void 0:s.length)||0}`)):(console.log(" Alguns testes de alternncia de turnos falharam"),console.log(`   - Erros: ${((i=n.errors)==null?void 0:i.length)||0}`),(l=n.errors)==null||l.forEach(c=>{console.error(`   - ${c.message}`)})),console.groupEnd(),n}printSummary(e){console.group(" RESUMO DOS TESTES"),console.log(` Tempo total: ${e}ms`),console.log(` Testes executados: ${this.testResults.length}`);const n=this.testResults.filter(o=>o.status==="PASS").length,r=this.testResults.filter(o=>o.status==="FAIL").length;console.log(` Passou: ${n}`),console.log(` Falhou: ${r}`),console.log(r===0?" TODOS OS TESTES PASSARAM! O jogo est funcionando perfeitamente.":" Alguns testes falharam. Verifique os erros acima."),console.groupEnd()}generateReport(){const e={timestamp:new Date().toISOString(),totalTests:this.testResults.length,passed:this.testResults.filter(n=>n.status==="PASS").length,failed:this.testResults.filter(n=>n.status==="FAIL").length,results:this.testResults,validationEnabled:this.validationEnabled,simulatorActive:this.simulator!==null};return console.log(" Relatrio de Testes:",e),e}getStatus(){return{isRunning:this.isRunning,validationEnabled:this.validationEnabled,simulatorActive:this.simulator!==null,testResults:this.testResults}}reset(){this.isRunning=!1,this.testResults=[],this.simulator=null,console.log(" Painel de testes resetado")}}const Yt=new Lb,Ib=()=>Yt.runAllTests(),Mb=()=>Yt.enableRealTimeValidation(),Bb=()=>Yt.disableRealTimeValidation(),Ub=()=>Yt.getValidationStats(),zb=()=>Yt.clearValidationLogs(),Fb=t=>Yt.createSimulator(t),Vb=()=>Yt.testTurnPassing(),Wb=()=>Yt.testBankruptcySystem(),Gb=()=>Yt.testResourceUpdates(),qb=()=>Yt.testLevelRestrictions(),Hb=()=>Yt.testTurnAlternation(),Jb=()=>Yt.generateReport(),Kb=()=>Yt.getStatus(),Yb=()=>Yt.reset();typeof window<"u"&&(window.runAllTests=Ib,window.enableValidation=Mb,window.disableValidation=Bb,window.getValidationStats=Ub,window.clearLogs=zb,window.createSimulator=Fb,window.testTurnPassing=Vb,window.testBankruptcySystem=Wb,window.testResourceUpdates=Gb,window.testLevelRestrictions=qb,window.testTurnAlternation=Hb,window.generateReport=Jb,window.getStatus=Kb,window.reset=Yb,window.testPanel=Yt,console.log(" Painel de Controle de Testes carregado!"),console.log('Execute "runAllTests()" para rodar todos os testes'),console.log('Execute "enableValidation()" para ativar validao em tempo real'),console.log('Execute "createSimulator(2)" para criar um simulador interativo'),console.log('Execute "testPanel.getStatus()" para ver o status atual'));typeof window<"u"&&(window.TurnAlternationTester=_a,console.log(" Sistema de Testes Sales Game carregado!"),console.log(""),console.log(" COMANDOS DISPONVEIS:"),console.log(""),console.log(" PAINEL PRINCIPAL:"),console.log("  runAllTests()           - Executa todos os testes"),console.log("  enableValidation()      - Ativa validao em tempo real"),console.log("  disableValidation()     - Desativa validao em tempo real"),console.log("  getValidationStats()    - Mostra estatsticas de validao"),console.log("  clearLogs()            - Limpa logs de validao"),console.log("  generateReport()       - Gera relatrio completo"),console.log("  getStatus()            - Mostra status atual"),console.log("  reset()                - Reseta painel de testes"),console.log(""),console.log(" TESTES DE ALTERNNCIA DE TURNOS:"),console.log("  const turnTester = new TurnAlternationTester()"),console.log("  turnTester.runAllTests() - Executa todos os testes de turnos"),console.log("  turnTester.testBasicTurnAlternation() - Testa alternncia bsica"),console.log("  turnTester.testAllBoardSpaces() - Verifica todas as casas"),console.log("  turnTester.testButtonNotLockedForBothPlayers() - Testa boto"),console.log(""),console.log(" SIMULADOR INTERATIVO:"),console.log("  createSimulator(2)     - Cria simulador com 2 jogadores"),console.log("  testPanel.simulator    - Acessa comandos do simulador"),console.log(""),console.log(" TESTES ESPECFICOS:"),console.log("  testTurnPassing()      - Testa passagem de turnos"),console.log("  testBankruptcySystem() - Testa sistema de falncia"),console.log("  testResourceUpdates()  - Testa atualizao de recursos"),console.log("  testLevelRestrictions() - Testa restries de nvel"),console.log(""),console.log(" TESTES INDIVIDUAIS:"),console.log("  runRegressionTests()   - Testes regressivos"),console.log("  runIntegrationTests()  - Testes de integrao"),console.log("  testReportedIssues()   - Testa problemas reportados"),console.log(""),console.log(' EXECUTE "runAllTests()" PARA COMEAR!'),console.log(""));const Qb="https://wjylzxsfevdlhqunvfqc.supabase.co",Xb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqeWx6eHNmZXZkbGhxdW52ZnFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2ODMwOTEsImV4cCI6MjA3NDI1OTA5MX0.SuB0gd7-gefwpUHFnKsupDgo8P2VeLuMbdlsU6AMrLw",Af=globalThis,Qr=Af.__sg_supabase||(Af.__sg_supabase=pm(Qb,Xb,{auth:{persistSession:!0,autoRefreshToken:!0,storageKey:"salesgame-auth"},realtime:{params:{eventsPerSecond:10}}})),Vm=E.createContext(null),Nl=()=>E.useContext(Vm);function Zb({roomCode:t,hostId:e,children:n}){const r=!!Qr&&!!t,o=String(t||"").trim(),[s,i]=E.useState(!1),[l,c]=E.useState({}),[u,d]=E.useState(0),h=E.useRef(l),f=E.useRef(u),g=E.useRef(0),x=E.useRef(null),b=E.useRef(null);E.useEffect(()=>{h.current=l},[l]),E.useEffect(()=>{f.current=u},[u]);const _=async v=>{const{data:w,error:k}=await Qr.from("rooms").select("id, code, host_id, state, version, updated_at").eq("code",v).order("updated_at",{ascending:!1}).limit(1).maybeSingle();return k?(console.warn("[NET] getLatestRoomByCode error:",k.message||k),null):w};E.useEffect(()=>{if(!r)return;let v=!1;return(async()=>{let w=await _(o);if(!w){const k={code:o,state:{},version:0,host_id:e||null},{data:T,error:D}=await Qr.from("rooms").insert(k).select("id, code, host_id, state, version, updated_at").maybeSingle();if(D){console.warn("[NET] rooms/create:",D.message||D);return}if(v)return;T?w=T:w=await _(o)}v||(w&&(x.current=w.id,b.current=w.updated_at,c(w.state||{}),d(w.version??0)),i(!0))})(),()=>{v=!0}},[r,o,e]),E.useEffect(()=>{if(!r)return;const v=Qr.channel(`rooms:${o}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`code=eq.${o}`},w=>{const k=w.new||w.old||{};if(typeof k.version=="number"&&k.version>f.current){if(b.current&&k.updated_at){const T=new Date(k.updated_at).getTime(),D=new Date(b.current).getTime();if(T<D){console.log("[NET] realtime - ignorando evento de row antiga",{rowVersion:k.version,currentVersion:f.current,rowUpdatedAt:k.updated_at,knownUpdatedAt:b.current});return}}d(k.version),k.state&&c(k.state),k.updated_at&&(b.current=k.updated_at),k.id&&(x.current=k.id),g.current=Date.now(),console.log("[NET] applied remote v=%d",k.version)}}).subscribe();return()=>{try{Qr.removeChannel(v)}catch{}}},[r,o]),E.useEffect(()=>{if(!r)return;const v=setInterval(async()=>{if(Date.now()-(g.current||0)<2e3)return;const w=await _(o);w&&w.version>f.current&&(d(w.version),c(w.state||{}),w.updated_at&&(b.current=w.updated_at),w.id&&(x.current=w.id))},700);return()=>clearInterval(v)},[r,o]);const p=async v=>{var D;if(!r||!s)return;const w=3,k=new Date().toISOString();for(let S=1;S<=w;S++){let A=await _(o);if(!A){const We={code:o,state:{},version:0,host_id:e||null},{data:Ze,error:G}=await Qr.from("rooms").insert(We).select("id, code, host_id, state, version, updated_at").maybeSingle();if(G){if(console.warn(`[NET] commit - insert failed (attempt ${S}/${w}):`,G.message||G),S<w){await new Promise(te=>setTimeout(te,50*S));continue}return}if(Ze)A=Ze,x.current=A.id,b.current=A.updated_at;else if(A=await _(o),!A){if(console.warn(`[NET] commit - no row after insert (attempt ${S}/${w})`),S<w){await new Promise(te=>setTimeout(te,50*S));continue}return}}A.id&&(x.current=A.id);const y=A.state||{},N=typeof v=="function"?v(y)||{}:v||{},O=x.current||A.id;if(!O){if(console.warn("[NET] commit - no target ID available"),S<w){await new Promise(We=>setTimeout(We,50*S));continue}return}const{data:L,error:U}=await Qr.from("rooms").update({state:N,version:(A.version||0)+1,updated_at:k}).eq("id",O).eq("version",A.version).select("state, version, updated_at").maybeSingle();if(!U&&L){c(L.state||{}),d(L.version??(A.version||0)+1),L.updated_at&&(b.current=L.updated_at),S>1&&console.log(`[NET] commit succeeded on attempt ${S}/${w}`);return}if(((U==null?void 0:U.code)==="PGRST116"||((D=U==null?void 0:U.message)==null?void 0:D.includes("0 rows"))||(U==null?void 0:U.code)==="23505"||(U==null?void 0:U.message)&&U.message.includes("version"))&&S<w){console.warn(`[NET] commit conflict (attempt ${S}/${w}):`,(U==null?void 0:U.message)||U,"- retrying..."),await new Promise(We=>setTimeout(We,50*S));continue}console.warn(`[NET] commit conflict (attempt ${S}/${w}):`,(U==null?void 0:U.message)||U)}const T=await _(o);T?(c(T.state||{}),d(T.version??0),T.updated_at&&(b.current=T.updated_at),T.id&&(x.current=T.id),console.warn("[NET] commit failed after retries, resynced to latest state")):console.warn("[NET] commit fallback resync failed: no row found")},m=E.useMemo(()=>({enabled:r,ready:s,state:l,version:u,commit:p}),[r,s,l,u]);return a.jsx(Vm.Provider,{value:m,children:n})}function ew(){var R,ue,le,_e;const[t,e]=E.useState("start"),[n,r]=E.useState(null),o=E.useMemo(()=>ti(),[]),s=E.useMemo(()=>po(""),[]),[i,l]=E.useState(o);E.useMemo(()=>Object.freeze({mixProdutos:"D",erpLevel:"D",clients:1,vendedoresComuns:1}),[]);const c=(C={})=>({...C,mixProdutos:C.mixProdutos??"D",erpLevel:C.erpLevel??"D",clients:C.clients??1,vendedoresComuns:C.vendedoresComuns??1}),[u,d]=E.useState([c({id:o,name:s||"Jogador",cash:18e3,pos:0,color:"#ffd54f",bens:4e3})]),[h,f]=E.useState(1),[g,x]=E.useState(0),[b,_]=E.useState(new Array(1).fill(!1)),[p,m]=E.useState(!1),[v,w]=E.useState(null),[k,T]=E.useState({id:o,name:((R=u[0])==null?void 0:R.name)||"Jogador",color:((ue=u[0])==null?void 0:ue.color)||"#6c5ce7",cash:((le=u[0])==null?void 0:le.cash)??18e3,possibAt:0,clientsAt:0,matchId:"local"}),[D,S]=E.useState(["Bem-vindo ao Sales Game!"]),A=C=>S(B=>[C,...B].slice(0,12)),[y,N]=E.useState(!1),[O,L]=E.useState(null),U=E.useRef(null),Se=E.useRef(null),We=E.useRef(0),Ze=pe.useCallback(C=>!!C&&String(C.id)===String(i),[i]),G=E.useMemo(()=>{var C;return((C=u.find(Ze))==null?void 0:C.cash)??0},[u,Ze]);E.useEffect(()=>{var C;try{const B=new URL(window.location.href),K=B.searchParams.get("room"),Ee=localStorage.getItem("sg:lastRoomName"),V=K||Ee;if(Ee&&!K&&localStorage.removeItem("sg:lastRoomName"),V&&K){r(V),(C=window.__setRoomCode)==null||C.call(window,V);try{B.searchParams.set("room",String(V)),history.replaceState(null,"",B.toString())}catch{}e("playersLobby")}else s&&s.trim()!==""&&e("lobbies")}catch{}},[s]);const te=E.useMemo(()=>`sg-sync:${n||"local"}`,[n]);E.useEffect(()=>{var C,B;try{(B=(C=U.current)==null?void 0:C.close)==null||B.call(C);const K=new BroadcastChannel(te);return K.onmessage=Ee=>{var ae,F,qe,q;const V=Ee.data||{};if(String(V.source)!==String(o)){if(V.type==="START"){const ie=Array.isArray(V.players)?V.players.map(c):[];if(!ie.length)return;try{const Re=window.__MY_UID||window.__myUid||window.__playerId||null;Re&&l(String(Re))}catch{}d(ie),x(0),f(1),_(new Array(Math.max(1,ie.length)).fill(!1)),m(!1),w(null),e("game"),S(["Jogo iniciado!"]);return}if(V.type==="TURNLOCK"){N(!!V.value);return}if(V.type==="SYNC"&&t==="game"){if(P!=null&&P.enabled&&(P!=null&&P.ready)&&ce){console.log("[App] SYNC ignorado - netState ativo, usando Supabase como autoridade nica");return}const ie=Number(V.version||0),Re=Number(V.timestamp||0),ut=De.current;if(console.log("[App] SYNC recebido - verso remota:",ie,"verso local:",ut,"turnIdx:",V.turnIdx,"round:",V.round,"source:",V.source),console.log("[App] SYNC - meu turnIdx atual:",g,"meu myUid:",i),ie>0&&ut>0&&ie<ut){console.log("[App] SYNC -  REJEITANDO estado remoto - verso antiga:",ie,"< verso local:",ut);return}const He=Date.now(),ye=ht.current;if(ie>ut&&(De.current=ie,console.log("[App] SYNC -  Aceitando verso remota:",ie,"> verso local:",ut)),V.turnIdx!==g)if(ye&&He-ye.timestamp<5e3)if(ye.turnIdx!==g){const X=V.turnIdx===ye.turnIdx;let it=!1;X?(console.log("[App] SYNC -  IGNORANDO turnIdx remoto - tentando reverter mudana local recente (mantendo resto do snapshot)",{lastLocalTurnIdx:ye.turnIdx,currentLocalTurnIdx:g,remoteTurnIdx:V.turnIdx,timeSinceLocalChange:He-ye.timestamp,isReverting:!0}),it=!0):(console.log("[App] SYNC -  IGNORANDO turnIdx remoto - turnIdx local mudou recentemente (< 5s) (mantendo resto do snapshot)",{lastLocalTurnIdx:ye.turnIdx,currentLocalTurnIdx:g,remoteTurnIdx:V.turnIdx,timeSinceLocalChange:He-ye.timestamp}),it=!0),!it&&V.turnIdx!==void 0&&x(V.turnIdx)}else V.turnIdx===ye.turnIdx&&ye.turnIdx!==g?console.log("[App] SYNC -  IGNORANDO turnIdx remoto - tentando reverter para valor anterior (mantendo resto do snapshot)",{lastLocalTurnIdx:ye.turnIdx,currentLocalTurnIdx:g,remoteTurnIdx:V.turnIdx}):(x(V.turnIdx),console.log("[App] SYNC - Sincronizando turnIdx",{local:g,remote:V.turnIdx}));else ye&&V.turnIdx===ye.turnIdx&&ye.turnIdx!==g?console.log("[App] SYNC -  IGNORANDO turnIdx remoto - tentando reverter para valor anterior (sem mudana recente, mantendo resto do snapshot)",{lastLocalTurnIdx:ye.turnIdx,currentLocalTurnIdx:g,remoteTurnIdx:V.turnIdx}):(x(V.turnIdx),console.log("[App] SYNC - Sincronizando turnIdx",{local:g,remote:V.turnIdx}));if(Array.isArray(V.roundFlags)&&V.roundFlags.length>0&&_(Y=>{const X=V.roundFlags.map((it,Bt)=>Y[Bt]||!1||it);for(;X.length<Y.length;)X.push(Y[X.length]||!1);return console.log("[App] SYNC - roundFlags sincronizado:",X.map((it,Bt)=>{var vn;return`${(vn=u[Bt])==null?void 0:vn.name}:${it}`}).join(", ")),X}),V.round!==h)if(ye&&He-ye.timestamp<3e3){const Y=ye.round!==h;f(Y?X=>{const it=Math.max(X,V.round);return it>X&&console.log("[App] SYNC - Rodada incrementada via sincronizao:",X,"->",it),it}:V.round)}else f(Y=>Math.max(Y,V.round));const Le=u,gn=V.players.map(Y=>{const X=Le.find(Bt=>Bt.id===Y.id);if(!X)return Y;if(String(Y.id)===String(i)){const Bt=Number(X.clients||0),vn=Number(Y.clients||0),Wn=Number(X.vendedoresComuns||0),Gn=Number(Y.vendedoresComuns||0),br=Number(X.fieldSales||0),Dn=Number(Y.fieldSales||0),tr=Number(X.insideSales||0),wr=Number(Y.insideSales||0);return Bt>vn||Wn>Gn||br>Dn||tr>wr||X.mixProdutos&&X.mixProdutos!==Y.mixProdutos&&X.mixProdutos!=="D"||X.erpLevel&&X.erpLevel!==Y.erpLevel&&X.erpLevel!=="D"?(console.log("[App] SYNC - Detectadas compras locais, preservando estado local completo",{localClients:Bt,remoteClients:vn,localVendedores:Wn,remoteVendedores:Gn}),{...X,pos:Y.pos,bankrupt:Y.bankrupt??X.bankrupt,az:X.az||Y.az||0,am:X.am||Y.am||0,rox:X.rox||Y.rox||0,trainingsByVendor:X.trainingsByVendor||Y.trainingsByVendor||{},onboarding:X.onboarding||Y.onboarding||!1}):{...Y,cash:Math.max(Number(X.cash||0),Number(Y.cash||0)),clients:Math.max(Bt,vn),mixProdutos:X.mixProdutos??Y.mixProdutos,erpLevel:X.erpLevel??Y.erpLevel,vendedoresComuns:Math.max(Wn,Gn),fieldSales:Math.max(br,Dn),insideSales:Math.max(tr,wr),gestores:Math.max(Number(X.gestores??X.gestoresComerciais??X.managers??0),Number(Y.gestores??Y.gestoresComerciais??Y.managers??0)),gestoresComerciais:Math.max(Number(X.gestoresComerciais??X.gestores??X.managers??0),Number(Y.gestoresComerciais??Y.gestores??Y.managers??0)),managers:Math.max(Number(X.managers??X.gestores??X.gestoresComerciais??0),Number(Y.managers??Y.gestores??Y.gestoresComerciais??0)),bens:Math.max(Number(X.bens||0),Number(Y.bens||0)),manutencao:X.manutencao??Y.manutencao,loanPending:X.loanPending??Y.loanPending,az:X.az||Y.az||0,am:X.am||Y.am||0,rox:X.rox||Y.rox||0,trainingsByVendor:X.trainingsByVendor||Y.trainingsByVendor||{},onboarding:X.onboarding||Y.onboarding||!1}}return{...Y,az:X.az||Y.az||0,am:X.am||Y.am||0,rox:X.rox||Y.rox||0,trainingsByVendor:X.trainingsByVendor||Y.trainingsByVendor||{},onboarding:X.onboarding||Y.onboarding||!1}});d(gn),console.log("[App] SYNC aplicado - novo turnIdx:",V.turnIdx),console.log("[App] SYNC - jogador da vez:",(ae=gn[V.turnIdx])==null?void 0:ae.name,"id:",(F=gn[V.turnIdx])==null?void 0:F.id),console.log("[App] SYNC -  minha vez?",String((qe=gn[V.turnIdx])==null?void 0:qe.id)===String(i)),m(Y=>Y||!!V.gameOver),w(Y=>(p||V.gameOver)&&Y&&!V.winner?Y:V.winner??Y),V.gameOver===!0&&console.log(`[App] [ENDGAME] estado remoto aplicado: gameOver=true winner=${((q=V.winner)==null?void 0:q.name)??V.winner??"N/A"}`)}}},U.current=K,()=>K.close()}catch(K){console.warn("[App] BroadcastChannel init failed:",K)}},[te,o,t]),E.useEffect(()=>{const C=async()=>{if(console.log(`[App] handleLeaveRoom chamado - fase: ${t}, currentLobbyId: ${n}, myUid: ${i}`),(t==="lobbies"||t==="playersLobby"||t==="game")&&n&&i)try{console.log(`[App] Saindo da sala ${n} na fase ${t}`),await jl({roomCode:n,playerId:i})}catch(Ee){console.warn("[App] Erro ao sair da sala:",Ee)}else console.log("[App] No executando leaveRoom - condies no atendidas")},B=()=>{C()},K=()=>{C()};return window.addEventListener("beforeunload",B),window.addEventListener("pagehide",K),()=>{window.removeEventListener("beforeunload",B),window.removeEventListener("pagehide",K)}},[t,n,i]);const re=C=>{var K,Ee;const B=!!C;N(B);try{(Ee=(K=U.current)==null?void 0:K.postMessage)==null||Ee.call(K,{type:"TURNLOCK",value:B,source:o})}catch{}};let P=null;try{P=(Nl==null?void 0:Nl())||null}catch(C){console.warn("[App] useGameNet not available:",C)}const Oe=P==null?void 0:P.commit,ln=P==null?void 0:P.version,ce=P==null?void 0:P.state;pe.useRef(null);const ht=pe.useRef(null),Ot=pe.useRef(0),De=pe.useRef(0),Jr=pe.useRef(0);pe.useEffect(()=>{const C=ht.current,B=!C||C.turnIdx!==g,K=!C||C.round!==h,Ee=!C||JSON.stringify(C.players)!==JSON.stringify(u);if(B||K||Ee){const V=Date.now();(C?V-C.timestamp:1/0)>100?(ht.current={players:u,turnIdx:g,round:h,timestamp:V},B&&console.log("[App] lastLocalStateRef atualizado via useEffect - turnIdx mudou:",C==null?void 0:C.turnIdx,"->",g)):ht.current={...ht.current,players:u,turnIdx:g,round:h}}},[u,g,h]),E.useEffect(()=>{var Ee;if(!(P!=null&&P.enabled)||!(P!=null&&P.ready)||!ce)return;if(typeof ln=="number"){if(ln<=Jr.current)return;Jr.current=ln}const C=Array.isArray(ce.players)?ce.players:null,B=Number.isInteger(ce.turnIdx)?ce.turnIdx:null,K=Number.isInteger(ce.round)?ce.round:null;if(C&&d(C),B!==null&&x(B),K!==null){const V=K===1&&(B===0||B===null)&&Array.isArray(C)&&C.length>0&&C.every(ae=>Number((ae==null?void 0:ae.pos)??0)===0)&&(ce.gameOver===!1||ce.gameOver==null);f(ae=>V?1:Math.max(ae,K))}if(ce.roundFlags!==void 0){if(Array.isArray(ce.roundFlags))_(ce.roundFlags),console.log("[NET] applied remote includes roundFlags?",!0,"length:",ce.roundFlags.length);else if(typeof ce.roundFlags=="object"){const V=Object.values(ce.roundFlags);_(V),console.log("[NET] applied remote includes roundFlags?",!0,"converted from object, length:",V.length)}}typeof ce.turnLock=="boolean"&&(N(ce.turnLock),ce.turnLock&&!Se.current?Se.current=Date.now():ce.turnLock||(Se.current=null),ce.turnLock&&ce.lockOwner&&console.log("[LOCK] bloqueado: turnLockBroadcast=true lockOwner=",ce.lockOwner,"myId=",i)),ce.lockOwner!==void 0&&(L(ce.lockOwner),ht.current&&(ht.current.lockOwner=ce.lockOwner),console.log("[NET] applied remote includes lockOwner?",!0,"value:",ce.lockOwner)),We.current=Date.now(),m(V=>V||!!ce.gameOver),w(V=>(p||ce.gameOver)&&V&&!ce.winner?V:ce.winner??V),ce.gameOver===!0&&console.log(`[App] [ENDGAME] estado remoto aplicado: gameOver=true winner=${((Ee=ce.winner)==null?void 0:Ee.name)??ce.winner??"N/A"}`),console.log("[NET] applied remote v=%d",ln)},[ln,ce,P==null?void 0:P.enabled,P==null?void 0:P.ready]),E.useEffect(()=>{if(!y){Se.current=null;return}Se.current||(Se.current=Date.now());const C=setInterval(()=>{const B=Date.now(),K=Se.current?B-Se.current:0,Ee=u[g],V=Ee&&String(Ee.id)===String(i),ae=st&&V,F=O===i;K>8e3&&ae&&!F&&O!=null&&(console.warn("[LOCK-WATCHDOG] stole lock - turnLock travado por",K,"ms, liberando...",{isMyTurn:ae,lockOwner:O,myUid:i}),rt({turnLock:!1,lockOwner:i}),re(!1),L(i),Se.current=null)},1e3);return()=>clearInterval(C)},[y,st,g,u,O,i,Oe]);async function rt(C){if(typeof Oe=="function")try{await Oe(B=>({...B||{},...C||{}}))}catch(B){console.warn("[NET] commit failed:",(B==null?void 0:B.message)||B)}}function as(C,B,K,Ee=p,V=v,ae={}){var vn,Wn,Gn,br,Dn,tr;Ot.current=Ot.current+1;const F=Ot.current,qe=ae.roundFlags!==void 0?ae.roundFlags:b,q=ae.turnLock!==void 0?ae.turnLock:y,ie=((vn=ht.current)==null?void 0:vn.lockOwner)??null,Re=ae.lockOwner!==void 0?ae.lockOwner:ie,ut=ae.gameOver!==void 0?ae.gameOver:Ee,ye=!!p||!!((Wn=ht.current)!=null&&Wn.gameOver)?!0:!!ut,Le=ae.winner!==void 0?ae.winner:V,gn=v??((Gn=ht.current)==null?void 0:Gn.winner)??null,Y=ye?Le??gn:Le,X=ae.round!==void 0?ae.round:K,it=Math.max(Number(X||1),Number(h||1),Number(((br=ht.current)==null?void 0:br.round)||1)),Bt=Date.now();ht.current={players:C,turnIdx:B,round:it,gameOver:ye,winner:Y,lockOwner:Re,timestamp:Bt,version:F},De.current=F,console.log("[App] broadcastState - verso:",F,"turnIdx:",B,"round(next):",K,"round(safe):",it,"timestamp:",Bt),Object.keys(ae).length>0&&console.log("[NET] commit patch keys:",Object.keys(ae).join(", ")),rt({players:C,turnIdx:B,round:it,roundFlags:qe,turnLock:q,lockOwner:Re,gameOver:ye,winner:Y});try{(tr=(Dn=U.current)==null?void 0:Dn.postMessage)==null||tr.call(Dn,{type:"SYNC",version:F,players:C,turnIdx:B,round:it,roundFlags:qe,turnLock:q,lockOwner:Re,gameOver:ye,winner:Y,source:o,timestamp:Bt})}catch(wr){console.warn("[App] broadcastState failed:",wr)}}function ls(C){var B,K;rt({players:C,turnIdx:0,round:1});try{(K=(B=U.current)==null?void 0:B.postMessage)==null||K.call(B,{type:"START",players:C,source:o})}catch(Ee){console.warn("[App] broadcastStart failed:",Ee)}}const di=u[g],st=E.useMemo(()=>{if(g<0||g>=u.length)return console.warn("[App] isMyTurn - turnIdx invlido:",g,"players.length:",u.length),!1;const C=u[g];if(!C)return console.log("[App] isMyTurn - owner no encontrado, turnIdx:",g,"players.length:",u.length),!1;if(C.bankrupt)return console.log("[App] isMyTurn - owner est falido:",C.name),!1;const B=C.id!=null&&String(C.id)===String(i);return console.log("[App] isMyTurn - owner:",C.name,"id:",C.id,"myUid:",i,"isMine:",B),B},[u,g,i]);E.useEffect(()=>{t==="game"&&(xb(u,g,h,p,v,"Game State Update"),$b(u,g,h,p,v,"Real-time Validation"))},[u,g,h,p,v,t]),E.useEffect(()=>{const C=u.find(Ze);if(!C)return;const{cap:B,inAtt:K}=gr(C);T(Ee=>({...Ee,cash:C.cash,possibAt:B,clientsAt:K,name:C.name,color:C.color}))},[u,Ze]);const J=E.useMemo(()=>{const C=u.find(Ze)||u[0]||{},B=Hr(C),K=xr(C),{cap:Ee,inAtt:V}=gr(C),ae=String(C.erpLevel||"D").toUpperCase(),F=Number(C.gestores??C.gestoresComerciais??C.managers??0);return console.log("[App] Totals recalculado - me:",C.name,"clients:",C.clients,"faturamento:",B,"manutencao:",K,"vendedoresComuns:",C.vendedoresComuns,"fieldSales:",C.fieldSales,"insideSales:",C.insideSales),bb(C,"HUD Totals"),{faturamento:B,manutencao:K,emprestimos:C.loanPending&&!C.loanPending.charged?Number(C.loanPending.amount||0):0,vendedoresComuns:C.vendedoresComuns||0,fieldSales:C.fieldSales||0,insideSales:C.insideSales||0,mixProdutos:C.mixProdutos||"D",bens:C.bens??0,erpSistemas:ae,clientes:C.clients||0,onboarding:!!C.onboarding,az:C.az||0,am:C.am||0,rox:C.rox||0,gestores:F,gestoresComerciais:F,possibAt:Ee,clientsAt:V}},[u,Ze]),[Ge,$e]=E.useState(!1),{onAction:Ne,modalLocks:Qt}=Ab({players:u,setPlayers:d,round:h,setRound:f,turnIdx:g,setTurnIdx:x,roundFlags:b,setRoundFlags:_,isMyTurn:st,isMine:Ze,myUid:i,meId:o,myCash:G,current:di,broadcastState:as,appendLog:A,turnLock:y,setTurnLockBroadcast:re,gameOver:p,setGameOver:m,winner:v,setWinner:w,setShowBankruptOverlay:$e});if(t==="start")return a.jsx(Ux,{onEnter:C=>{const B=po(C||"Jogador");d([c({id:o,name:B,cash:18e3,pos:0,color:"#ffd54f",bens:4e3})]),f(1),x(0),m(!1),w(null),_(new Array(1).fill(!1)),e("lobbies"),T(K=>({...K,name:B})),S([`Bem-vindo, ${B}!`])}});if(t==="lobbies")return a.jsx(Qx,{onEnterRoom:C=>{var B;r(C),(B=window.__setRoomCode)==null||B.call(window,C);try{localStorage.setItem("sg:lastRoomName",String(C));const K=new URL(window.location.href);K.searchParams.set("room",String(C)),history.replaceState(null,"",K.toString())}catch{}e("playersLobby")}});if(t==="playersLobby")return a.jsx(Xx,{lobbyId:n,onBack:()=>{var C;(C=window.__setRoomCode)==null||C.call(window,null),e("lobbies")},onStartGame:C=>{var V;const B=(C==null?void 0:C.lobbyName)||((V=C==null?void 0:C.lobby)==null?void 0:V.name)||(C==null?void 0:C.name)||n||"sala-demo";try{localStorage.setItem("sg:lastRoomName",String(B));const ae=new URL(window.location.href);if(ae.searchParams.set("room",String(B)),history.replaceState(null,"",ae.toString()),!sessionStorage.getItem("sg:room-reloaded")){sessionStorage.setItem("sg:room-reloaded","1"),location.reload();return}}catch{}const Ee=(Array.isArray(C)?C:(C==null?void 0:C.players)??(C==null?void 0:C.lobbyPlayers)??[]).map((ae,F)=>c({id:String(ae.id??ae.player_id),name:ae.name??ae.player_name,cash:18e3,pos:0,bens:4e3,color:["#ffd54f","#90caf9","#a5d6a7","#ffab91"][F%4]}));if(Ee.length!==0){try{const ae=Ee.find(F=>String(F.name||"").trim().toLowerCase()===String(s||"").trim().toLowerCase());ae!=null&&ae.id&&l(String(ae.id))}catch{}d(Ee),x(0),f(1),_(new Array(Ee.length).fill(!1)),m(!1),w(null),T(ae=>{var qe,q;const F=Ee.find(Ze);return{...ae,name:(F==null?void 0:F.name)||((qe=Ee[0])==null?void 0:qe.name)||"Jogador",color:(F==null?void 0:F.color)||((q=Ee[0])==null?void 0:q.color)||"#6c5ce7",cash:(F==null?void 0:F.cash)??18e3,possibAt:0,clientsAt:0}}),S(["Jogo iniciado!"]),ls(Ee),e("game")}}});const pt=u[g],Rn=(pt==null?void 0:pt.bankrupt)===!0,mt=pt&&String(pt.id)===String(i),mn=h===5&&((_e=u[g])==null?void 0:_e.waitingAtRevenue),Tn=O==null||O===i,z=st&&mt&&Qt===0&&!y&&Tn&&!Rn&&!p&&!mn;return console.log("[App] controlsCanRoll - isMyTurn:",st,"isCurrentPlayerMe:",mt,"modalLocks:",Qt,"turnLock:",y,"lockOwner:",O,"lockOwnerOk:",Tn,"isBankrupt:",Rn,"gameOver:",p,"isWaitingRevenue:",mn,"result:",z),a.jsxs("div",{className:"page",children:[a.jsxs("header",{className:"topbar",children:[a.jsxs("div",{className:"status",style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[a.jsx("span",{style:{width:18,height:18,borderRadius:"50%",border:"2px solid rgba(255,255,255,.9)",boxShadow:"0 0 0 2px rgba(0,0,0,.25)",background:k.color}}),a.jsxs("span",{style:{background:"#1f2430",border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:"4px 10px",fontWeight:800},children:[" ",k.name]}),a.jsxs("span",{children:["Possib. Atendimento: ",a.jsx("b",{children:k.possibAt??0})]}),a.jsxs("span",{children:["Clientes em Atendimento: ",a.jsx("b",{children:k.clientsAt??0})]}),a.jsx(Sb,{players:u,turnIdx:g,round:h,gameOver:p,winner:v})]}),a.jsxs("div",{className:"status",style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[a.jsxs("span",{children:["Rodada: ",h]}),a.jsxs("span",{className:"money",children:[" $ ",Number(G).toLocaleString()]})]})]}),a.jsxs("main",{className:"content",children:[a.jsx("div",{className:"boardWrap",children:a.jsx(ib,{players:u,turnIdx:g,onMeHud:T})}),a.jsxs("aside",{className:"side",children:[a.jsx(ab,{totals:J,players:u}),a.jsxs("div",{className:"controlsSticky",children:[a.jsx(lb,{onAction:C=>{Ne(C)},current:di,isMyTurn:z}),a.jsx("div",{style:{marginTop:10},children:a.jsx("button",{className:"btn dark",onClick:async()=>{var C;if(n&&i)try{await jl({roomCode:n,playerId:i})}catch(B){console.warn("[App] Erro ao sair da sala:",B)}(C=window.__setRoomCode)==null||C.call(window,null),e("lobbies")},children:"Sair para Lobbies"})})]}),p&&a.jsx(cb,{players:u,onExit:async()=>{var C;if(n&&i)try{await jl({roomCode:n,playerId:i})}catch(B){console.warn("[App] Erro ao sair da sala:",B)}(C=window.__setRoomCode)==null||C.call(window,null),e("lobbies")},onRestart:()=>{const C=u.map(B=>c({...B,cash:18e3,bens:4e3,pos:0}));d(C),x(0),f(1),_(new Array(C.length).fill(!1)),S(["Novo jogo iniciado!"]),m(!1),w(null)}})]})]}),a.jsx("footer",{className:"foot",children:a.jsxs("small",{children:["Desenvolvido por ",a.jsx("a",{href:"https://www.tironitech.com",target:"_blank",rel:"noreferrer",children:"tironitech.com"})]})}),Ge&&a.jsx(db,{})]})}function tw(){const e=new URLSearchParams(window.location.search).get("room");return e&&String(e).trim()||null}function nw(){const[t,e]=pe.useState(tw());return pe.useEffect(()=>(window.__setRoomCode=n=>{const r=String(n||"").trim()||null;e(r);const o=new URL(window.location.href);r?o.searchParams.set("room",r):o.searchParams.delete("room"),window.history.replaceState({},"",o)},()=>{delete window.__setRoomCode}),[]),pe.useEffect(()=>(window.exportLogs=()=>{const n=wm(),r=new Blob([n.text],{type:"text/plain;charset=utf-8"}),o=URL.createObjectURL(r),s=document.createElement("a");return s.href=o,s.download=`debug-logs-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`,s.click(),URL.revokeObjectURL(o),console.log(" Logs exportados! Arquivo .txt baixado."),n},window.getLogsText=()=>gb(),window.getLogsJSON=()=>vb(),window.getLogStats=()=>Uc(),window.toggleLogCapture=()=>(Xn.enabled?(Xn.disable(),console.log(" Captura de logs DESATIVADA")):(Xn.enable(),console.log(" Captura de logs ATIVADA")),Xn.enabled),console.log("%c FUNES DE EXPORT DE LOGS DISPONVEIS:","color: #4CAF50; font-weight: bold; font-size: 14px"),console.log("%cexportLogs()","color: #2196F3; font-weight: bold","- Exporta logs completos (baixa arquivo .txt)"),console.log("%cgetLogsText()","color: #2196F3; font-weight: bold","- Retorna logs como string de texto"),console.log("%cgetLogsJSON()","color: #2196F3; font-weight: bold","- Retorna logs como objeto JSON"),console.log("%cgetLogStats()","color: #2196F3; font-weight: bold","- Retorna estatsticas dos logs"),console.log("%ctoggleLogCapture()","color: #2196F3; font-weight: bold","- Ativa/desativa captura de logs"),()=>{delete window.exportLogs,delete window.getLogsText,delete window.getLogsJSON,delete window.getLogStats,delete window.toggleLogCapture}),[]),a.jsx(ub,{children:a.jsx(Zb,{roomCode:t,children:a.jsx(ew,{})})})}Al.createRoot(document.getElementById("root")).render(a.jsx(pe.StrictMode,{children:a.jsx(nw,{})}));
//# sourceMappingURL=index-CCECDBib.js.map
