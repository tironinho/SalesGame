(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var An=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function um(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var bf={exports:{}},pa={},wf={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ks=Symbol.for("react.element"),cm=Symbol.for("react.portal"),dm=Symbol.for("react.fragment"),fm=Symbol.for("react.strict_mode"),hm=Symbol.for("react.profiler"),pm=Symbol.for("react.provider"),mm=Symbol.for("react.context"),gm=Symbol.for("react.forward_ref"),ym=Symbol.for("react.suspense"),vm=Symbol.for("react.memo"),xm=Symbol.for("react.lazy"),Ac=Symbol.iterator;function bm(t){return t===null||typeof t!="object"?null:(t=Ac&&t[Ac]||t["@@iterator"],typeof t=="function"?t:null)}var Sf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_f=Object.assign,kf={};function Ho(t,e,n){this.props=t,this.context=e,this.refs=kf,this.updater=n||Sf}Ho.prototype.isReactComponent={};Ho.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ho.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ef(){}Ef.prototype=Ho.prototype;function Tu(t,e,n){this.props=t,this.context=e,this.refs=kf,this.updater=n||Sf}var Ou=Tu.prototype=new Ef;Ou.constructor=Tu;_f(Ou,Ho.prototype);Ou.isPureReactComponent=!0;var Tc=Array.isArray,jf=Object.prototype.hasOwnProperty,Pu={current:null},Cf={key:!0,ref:!0,__self:!0,__source:!0};function Rf(t,e,n){var r,o={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)jf.call(e,r)&&!Cf.hasOwnProperty(r)&&(o[r]=e[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:Ks,type:t,key:s,ref:i,props:o,_owner:Pu.current}}function wm(t,e){return{$$typeof:Ks,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Lu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ks}function Sm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Oc=/\/+/g;function Ma(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Sm(""+t.key):e.toString(36)}function Ni(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Ks:case cm:i=!0}}if(i)return i=t,o=o(i),t=r===""?"."+Ma(i,0):r,Tc(o)?(n="",t!=null&&(n=t.replace(Oc,"$&/")+"/"),Ni(o,e,n,"",function(c){return c})):o!=null&&(Lu(o)&&(o=wm(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(Oc,"$&/")+"/")+t)),e.push(o)),1;if(i=0,r=r===""?".":r+":",Tc(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Ma(s,l);i+=Ni(s,e,n,u,o)}else if(u=bm(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Ma(s,l++),i+=Ni(s,e,n,u,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function ri(t,e,n){if(t==null)return t;var r=[],o=0;return Ni(t,r,"","",function(s){return e.call(n,s,o++)}),r}function _m(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nn={current:null},Di={transition:null},km={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:Di,ReactCurrentOwner:Pu};function Nf(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:ri,forEach:function(t,e,n){ri(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ri(t,function(){e++}),e},toArray:function(t){return ri(t,function(e){return e})||[]},only:function(t){if(!Lu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=Ho;$e.Fragment=dm;$e.Profiler=hm;$e.PureComponent=Tu;$e.StrictMode=fm;$e.Suspense=ym;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=km;$e.act=Nf;$e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_f({},t.props),o=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=Pu.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)jf.call(e,u)&&!Cf.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Ks,type:t.type,key:o,ref:s,props:r,_owner:i}};$e.createContext=function(t){return t={$$typeof:mm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pm,_context:t},t.Consumer=t};$e.createElement=Rf;$e.createFactory=function(t){var e=Rf.bind(null,t);return e.type=t,e};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:gm,render:t}};$e.isValidElement=Lu;$e.lazy=function(t){return{$$typeof:xm,_payload:{_status:-1,_result:t},_init:_m}};$e.memo=function(t,e){return{$$typeof:vm,type:t,compare:e===void 0?null:e}};$e.startTransition=function(t){var e=Di.transition;Di.transition={};try{t()}finally{Di.transition=e}};$e.unstable_act=Nf;$e.useCallback=function(t,e){return nn.current.useCallback(t,e)};$e.useContext=function(t){return nn.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return nn.current.useDeferredValue(t)};$e.useEffect=function(t,e){return nn.current.useEffect(t,e)};$e.useId=function(){return nn.current.useId()};$e.useImperativeHandle=function(t,e,n){return nn.current.useImperativeHandle(t,e,n)};$e.useInsertionEffect=function(t,e){return nn.current.useInsertionEffect(t,e)};$e.useLayoutEffect=function(t,e){return nn.current.useLayoutEffect(t,e)};$e.useMemo=function(t,e){return nn.current.useMemo(t,e)};$e.useReducer=function(t,e,n){return nn.current.useReducer(t,e,n)};$e.useRef=function(t){return nn.current.useRef(t)};$e.useState=function(t){return nn.current.useState(t)};$e.useSyncExternalStore=function(t,e,n){return nn.current.useSyncExternalStore(t,e,n)};$e.useTransition=function(){return nn.current.useTransition()};$e.version="18.3.1";wf.exports=$e;var E=wf.exports;const ge=lm(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em=E,jm=Symbol.for("react.element"),Cm=Symbol.for("react.fragment"),Rm=Object.prototype.hasOwnProperty,Nm=Em.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dm={key:!0,ref:!0,__self:!0,__source:!0};function Df(t,e,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)Rm.call(e,r)&&!Dm.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:jm,type:t,key:s,ref:i,props:o,_owner:Nm.current}}pa.Fragment=Cm;pa.jsx=Df;pa.jsxs=Df;bf.exports=pa;var a=bf.exports,_l={},Af={exports:{}},kn={},Tf={exports:{}},Of={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,ae){var ie=U.length;U.push(ae);e:for(;0<ie;){var Ne=ie-1>>>1,be=U[Ne];if(0<o(be,ae))U[Ne]=ae,U[ie]=be,ie=Ne;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var ae=U[0],ie=U.pop();if(ie!==ae){U[0]=ie;e:for(var Ne=0,be=U.length,re=be>>>1;Ne<re;){var De=2*(Ne+1)-1,qn=U[De],Lt=De+1,he=U[Lt];if(0>o(qn,ie))Lt<be&&0>o(he,qn)?(U[Ne]=he,U[Lt]=ie,Ne=Lt):(U[Ne]=qn,U[De]=ie,Ne=De);else if(Lt<be&&0>o(he,ie))U[Ne]=he,U[Lt]=ie,Ne=Lt;else break e}}return ae}function o(U,ae){var ie=U.sortIndex-ae.sortIndex;return ie!==0?ie:U.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var u=[],c=[],d=1,h=null,f=3,x=!1,y=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(U){for(var ae=n(c);ae!==null;){if(ae.callback===null)r(c);else if(ae.startTime<=U)r(c),ae.sortIndex=ae.expirationTime,e(u,ae);else break;ae=n(c)}}function w(U){if(b=!1,g(U),!y)if(n(u)!==null)y=!0,ct(j);else{var ae=n(c);ae!==null&&rt(w,ae.startTime-U)}}function j(U,ae){y=!1,b&&(b=!1,p(S),S=-1),x=!0;var ie=f;try{for(g(ae),h=n(u);h!==null&&(!(h.expirationTime>ae)||U&&!D());){var Ne=h.callback;if(typeof Ne=="function"){h.callback=null,f=h.priorityLevel;var be=Ne(h.expirationTime<=ae);ae=t.unstable_now(),typeof be=="function"?h.callback=be:h===n(u)&&r(u),g(ae)}else r(u);h=n(u)}if(h!==null)var re=!0;else{var De=n(c);De!==null&&rt(w,De.startTime-ae),re=!1}return re}finally{h=null,f=ie,x=!1}}var N=!1,R=null,S=-1,A=5,v=-1;function D(){return!(t.unstable_now()-v<A)}function T(){if(R!==null){var U=t.unstable_now();v=U;var ae=!0;try{ae=R(!0,U)}finally{ae?I():(N=!1,R=null)}}else N=!1}var I;if(typeof m=="function")I=function(){m(T)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,te=ee.port2;ee.port1.onmessage=T,I=function(){te.postMessage(null)}}else I=function(){_(T,0)};function ct(U){R=U,N||(N=!0,I())}function rt(U,ae){S=_(function(){U(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){y||x||(y=!0,ct(j))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var ae=3;break;default:ae=f}var ie=f;f=ae;try{return U()}finally{f=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,ae){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ie=f;f=U;try{return ae()}finally{f=ie}},t.unstable_scheduleCallback=function(U,ae,ie){var Ne=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Ne+ie:Ne):ie=Ne,U){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ie+be,U={id:d++,callback:ae,priorityLevel:U,startTime:ie,expirationTime:be,sortIndex:-1},ie>Ne?(U.sortIndex=ie,e(c,U),n(u)===null&&U===n(c)&&(b?(p(S),S=-1):b=!0,rt(w,ie-Ne))):(U.sortIndex=be,e(u,U),y||x||(y=!0,ct(j))),U},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(U){var ae=f;return function(){var ie=f;f=ae;try{return U.apply(this,arguments)}finally{f=ie}}}})(Of);Tf.exports=Of;var Am=Tf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm=E,_n=Am;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pf=new Set,Ns={};function lo(t,e){Bo(t,e),Bo(t+"Capture",e)}function Bo(t,e){for(Ns[t]=e,t=0;t<e.length;t++)Pf.add(e[t])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kl=Object.prototype.hasOwnProperty,Om=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pc={},Lc={};function Pm(t){return kl.call(Lc,t)?!0:kl.call(Pc,t)?!1:Om.test(t)?Lc[t]=!0:(Pc[t]=!0,!1)}function Lm(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $m(t,e,n,r){if(e===null||typeof e>"u"||Lm(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rn(t,e,n,r,o,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ut[t]=new rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ut[e]=new rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ut[t]=new rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ut[t]=new rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ut[t]=new rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ut[t]=new rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ut[t]=new rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ut[t]=new rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ut[t]=new rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var $u=/[\-:]([a-z])/g;function Iu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($u,Iu);Ut[e]=new rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($u,Iu);Ut[e]=new rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($u,Iu);Ut[e]=new rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ut[t]=new rn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ut[t]=new rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mu(t,e,n,r){var o=Ut.hasOwnProperty(e)?Ut[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($m(e,n,o,r)&&(n=null),r||o===null?Pm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var yr=Tm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oi=Symbol.for("react.element"),wo=Symbol.for("react.portal"),So=Symbol.for("react.fragment"),Bu=Symbol.for("react.strict_mode"),El=Symbol.for("react.profiler"),Lf=Symbol.for("react.provider"),$f=Symbol.for("react.context"),Uu=Symbol.for("react.forward_ref"),jl=Symbol.for("react.suspense"),Cl=Symbol.for("react.suspense_list"),zu=Symbol.for("react.memo"),_r=Symbol.for("react.lazy"),If=Symbol.for("react.offscreen"),$c=Symbol.iterator;function es(t){return t===null||typeof t!="object"?null:(t=$c&&t[$c]||t["@@iterator"],typeof t=="function"?t:null)}var pt=Object.assign,Ba;function cs(t){if(Ba===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ba=e&&e[1]||""}return`
`+Ba+t}var Ua=!1;function za(t,e){if(!t||Ua)return"";Ua=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,l=s.length-1;1<=i&&0<=l&&o[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==s[l]){var u=`
`+o[i].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=i&&0<=l);break}}}finally{Ua=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cs(t):""}function Im(t){switch(t.tag){case 5:return cs(t.type);case 16:return cs("Lazy");case 13:return cs("Suspense");case 19:return cs("SuspenseList");case 0:case 2:case 15:return t=za(t.type,!1),t;case 11:return t=za(t.type.render,!1),t;case 1:return t=za(t.type,!0),t;default:return""}}function Rl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case So:return"Fragment";case wo:return"Portal";case El:return"Profiler";case Bu:return"StrictMode";case jl:return"Suspense";case Cl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $f:return(t.displayName||"Context")+".Consumer";case Lf:return(t._context.displayName||"Context")+".Provider";case Uu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zu:return e=t.displayName||null,e!==null?e:Rl(t.type)||"Memo";case _r:e=t._payload,t=t._init;try{return Rl(t(e))}catch{}}return null}function Mm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rl(e);case 8:return e===Bu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Mf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Bm(t){var e=Mf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function si(t){t._valueTracker||(t._valueTracker=Bm(t))}function Bf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Mf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nl(t,e){var n=e.checked;return pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ic(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Mr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Uf(t,e){e=e.checked,e!=null&&Mu(t,"checked",e,!1)}function Dl(t,e){Uf(t,e);var n=Mr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Al(t,e.type,n):e.hasOwnProperty("defaultValue")&&Al(t,e.type,Mr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Al(t,e,n){(e!=="number"||zi(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ds=Array.isArray;function Oo(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Mr(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Tl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(ds(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Mr(n)}}function zf(t,e){var n=Mr(e.value),r=Mr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Uc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ff(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ol(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ff(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ii,Wf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ii=ii||document.createElement("div"),ii.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ii.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ds(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Um=["Webkit","ms","Moz","O"];Object.keys(ms).forEach(function(t){Um.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ms[e]=ms[t]})});function Vf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ms.hasOwnProperty(t)&&ms[t]?(""+e).trim():e+"px"}function Gf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Vf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var zm=pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pl(t,e){if(e){if(zm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Ll(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $l=null;function Fu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Il=null,Po=null,Lo=null;function zc(t){if(t=Qs(t)){if(typeof Il!="function")throw Error(B(280));var e=t.stateNode;e&&(e=xa(e),Il(t.stateNode,t.type,e))}}function qf(t){Po?Lo?Lo.push(t):Lo=[t]:Po=t}function Hf(){if(Po){var t=Po,e=Lo;if(Lo=Po=null,zc(t),e)for(t=0;t<e.length;t++)zc(e[t])}}function Kf(t,e){return t(e)}function Jf(){}var Fa=!1;function Yf(t,e,n){if(Fa)return t(e,n);Fa=!0;try{return Kf(t,e,n)}finally{Fa=!1,(Po!==null||Lo!==null)&&(Jf(),Hf())}}function As(t,e){var n=t.stateNode;if(n===null)return null;var r=xa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Ml=!1;if(fr)try{var ts={};Object.defineProperty(ts,"passive",{get:function(){Ml=!0}}),window.addEventListener("test",ts,ts),window.removeEventListener("test",ts,ts)}catch{Ml=!1}function Fm(t,e,n,r,o,s,i,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var gs=!1,Fi=null,Wi=!1,Bl=null,Wm={onError:function(t){gs=!0,Fi=t}};function Vm(t,e,n,r,o,s,i,l,u){gs=!1,Fi=null,Fm.apply(Wm,arguments)}function Gm(t,e,n,r,o,s,i,l,u){if(Vm.apply(this,arguments),gs){if(gs){var c=Fi;gs=!1,Fi=null}else throw Error(B(198));Wi||(Wi=!0,Bl=c)}}function uo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Qf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fc(t){if(uo(t)!==t)throw Error(B(188))}function qm(t){var e=t.alternate;if(!e){if(e=uo(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return Fc(o),t;if(s===r)return Fc(o),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function Xf(t){return t=qm(t),t!==null?Zf(t):null}function Zf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Zf(t);if(e!==null)return e;t=t.sibling}return null}var eh=_n.unstable_scheduleCallback,Wc=_n.unstable_cancelCallback,Hm=_n.unstable_shouldYield,Km=_n.unstable_requestPaint,bt=_n.unstable_now,Jm=_n.unstable_getCurrentPriorityLevel,Wu=_n.unstable_ImmediatePriority,th=_n.unstable_UserBlockingPriority,Vi=_n.unstable_NormalPriority,Ym=_n.unstable_LowPriority,nh=_n.unstable_IdlePriority,ma=null,nr=null;function Qm(t){if(nr&&typeof nr.onCommitFiberRoot=="function")try{nr.onCommitFiberRoot(ma,t,void 0,(t.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:eg,Xm=Math.log,Zm=Math.LN2;function eg(t){return t>>>=0,t===0?32:31-(Xm(t)/Zm|0)|0}var ai=64,li=4194304;function fs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gi(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var l=i&~o;l!==0?r=fs(l):(s&=i,s!==0&&(r=fs(s)))}else i=n&~o,i!==0?r=fs(i):s!==0&&(r=fs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wn(e),o=1<<n,r|=t[n],e&=~o;return r}function tg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ng(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Wn(s),l=1<<i,u=o[i];u===-1?(!(l&n)||l&r)&&(o[i]=tg(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Ul(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function rh(){var t=ai;return ai<<=1,!(ai&4194240)&&(ai=64),t}function Wa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Js(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wn(e),t[e]=n}function rg(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Wn(n),s=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~s}}function Vu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wn(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var Ze=0;function oh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var sh,Gu,ih,ah,lh,zl=!1,ui=[],Dr=null,Ar=null,Tr=null,Ts=new Map,Os=new Map,Er=[],og="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vc(t,e){switch(t){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Ts.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Os.delete(e.pointerId)}}function ns(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},e!==null&&(e=Qs(e),e!==null&&Gu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function sg(t,e,n,r,o){switch(e){case"focusin":return Dr=ns(Dr,t,e,n,r,o),!0;case"dragenter":return Ar=ns(Ar,t,e,n,r,o),!0;case"mouseover":return Tr=ns(Tr,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return Ts.set(s,ns(Ts.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Os.set(s,ns(Os.get(s)||null,t,e,n,r,o)),!0}return!1}function uh(t){var e=Yr(t.target);if(e!==null){var n=uo(e);if(n!==null){if(e=n.tag,e===13){if(e=Qf(n),e!==null){t.blockedOn=e,lh(t.priority,function(){ih(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ai(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$l=r,n.target.dispatchEvent(r),$l=null}else return e=Qs(n),e!==null&&Gu(e),t.blockedOn=n,!1;e.shift()}return!0}function Gc(t,e,n){Ai(t)&&n.delete(e)}function ig(){zl=!1,Dr!==null&&Ai(Dr)&&(Dr=null),Ar!==null&&Ai(Ar)&&(Ar=null),Tr!==null&&Ai(Tr)&&(Tr=null),Ts.forEach(Gc),Os.forEach(Gc)}function rs(t,e){t.blockedOn===e&&(t.blockedOn=null,zl||(zl=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,ig)))}function Ps(t){function e(o){return rs(o,t)}if(0<ui.length){rs(ui[0],t);for(var n=1;n<ui.length;n++){var r=ui[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dr!==null&&rs(Dr,t),Ar!==null&&rs(Ar,t),Tr!==null&&rs(Tr,t),Ts.forEach(e),Os.forEach(e),n=0;n<Er.length;n++)r=Er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Er.length&&(n=Er[0],n.blockedOn===null);)uh(n),n.blockedOn===null&&Er.shift()}var $o=yr.ReactCurrentBatchConfig,qi=!0;function ag(t,e,n,r){var o=Ze,s=$o.transition;$o.transition=null;try{Ze=1,qu(t,e,n,r)}finally{Ze=o,$o.transition=s}}function lg(t,e,n,r){var o=Ze,s=$o.transition;$o.transition=null;try{Ze=4,qu(t,e,n,r)}finally{Ze=o,$o.transition=s}}function qu(t,e,n,r){if(qi){var o=Fl(t,e,n,r);if(o===null)Za(t,e,r,Hi,n),Vc(t,r);else if(sg(o,t,e,n,r))r.stopPropagation();else if(Vc(t,r),e&4&&-1<og.indexOf(t)){for(;o!==null;){var s=Qs(o);if(s!==null&&sh(s),s=Fl(t,e,n,r),s===null&&Za(t,e,r,Hi,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else Za(t,e,r,null,n)}}var Hi=null;function Fl(t,e,n,r){if(Hi=null,t=Fu(r),t=Yr(t),t!==null)if(e=uo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Qf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hi=t,null}function ch(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jm()){case Wu:return 1;case th:return 4;case Vi:case Ym:return 16;case nh:return 536870912;default:return 16}default:return 16}}var Rr=null,Hu=null,Ti=null;function dh(){if(Ti)return Ti;var t,e=Hu,n=e.length,r,o="value"in Rr?Rr.value:Rr.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return Ti=o.slice(t,1<r?1-r:void 0)}function Oi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ci(){return!0}function qc(){return!1}function En(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ci:qc,this.isPropagationStopped=qc,this}return pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ci)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ci)},persist:function(){},isPersistent:ci}),e}var Ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ku=En(Ko),Ys=pt({},Ko,{view:0,detail:0}),ug=En(Ys),Va,Ga,os,ga=pt({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ju,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==os&&(os&&t.type==="mousemove"?(Va=t.screenX-os.screenX,Ga=t.screenY-os.screenY):Ga=Va=0,os=t),Va)},movementY:function(t){return"movementY"in t?t.movementY:Ga}}),Hc=En(ga),cg=pt({},ga,{dataTransfer:0}),dg=En(cg),fg=pt({},Ys,{relatedTarget:0}),qa=En(fg),hg=pt({},Ko,{animationName:0,elapsedTime:0,pseudoElement:0}),pg=En(hg),mg=pt({},Ko,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gg=En(mg),yg=pt({},Ko,{data:0}),Kc=En(yg),vg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bg[t])?!!e[t]:!1}function Ju(){return wg}var Sg=pt({},Ys,{key:function(t){if(t.key){var e=vg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Oi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ju,charCode:function(t){return t.type==="keypress"?Oi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_g=En(Sg),kg=pt({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jc=En(kg),Eg=pt({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ju}),jg=En(Eg),Cg=pt({},Ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rg=En(Cg),Ng=pt({},ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dg=En(Ng),Ag=[9,13,27,32],Yu=fr&&"CompositionEvent"in window,ys=null;fr&&"documentMode"in document&&(ys=document.documentMode);var Tg=fr&&"TextEvent"in window&&!ys,fh=fr&&(!Yu||ys&&8<ys&&11>=ys),Yc=" ",Qc=!1;function hh(t,e){switch(t){case"keyup":return Ag.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ph(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _o=!1;function Og(t,e){switch(t){case"compositionend":return ph(e);case"keypress":return e.which!==32?null:(Qc=!0,Yc);case"textInput":return t=e.data,t===Yc&&Qc?null:t;default:return null}}function Pg(t,e){if(_o)return t==="compositionend"||!Yu&&hh(t,e)?(t=dh(),Ti=Hu=Rr=null,_o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fh&&e.locale!=="ko"?null:e.data;default:return null}}var Lg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Lg[t.type]:e==="textarea"}function mh(t,e,n,r){qf(r),e=Ki(e,"onChange"),0<e.length&&(n=new Ku("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vs=null,Ls=null;function $g(t){jh(t,0)}function ya(t){var e=jo(t);if(Bf(e))return t}function Ig(t,e){if(t==="change")return e}var gh=!1;if(fr){var Ha;if(fr){var Ka="oninput"in document;if(!Ka){var Zc=document.createElement("div");Zc.setAttribute("oninput","return;"),Ka=typeof Zc.oninput=="function"}Ha=Ka}else Ha=!1;gh=Ha&&(!document.documentMode||9<document.documentMode)}function ed(){vs&&(vs.detachEvent("onpropertychange",yh),Ls=vs=null)}function yh(t){if(t.propertyName==="value"&&ya(Ls)){var e=[];mh(e,Ls,t,Fu(t)),Yf($g,e)}}function Mg(t,e,n){t==="focusin"?(ed(),vs=e,Ls=n,vs.attachEvent("onpropertychange",yh)):t==="focusout"&&ed()}function Bg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ya(Ls)}function Ug(t,e){if(t==="click")return ya(e)}function zg(t,e){if(t==="input"||t==="change")return ya(e)}function Fg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gn=typeof Object.is=="function"?Object.is:Fg;function $s(t,e){if(Gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!kl.call(e,o)||!Gn(t[o],e[o]))return!1}return!0}function td(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nd(t,e){var n=td(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=td(n)}}function vh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xh(){for(var t=window,e=zi();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zi(t.document)}return e}function Qu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Wg(t){var e=xh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vh(n.ownerDocument.documentElement,n)){if(r!==null&&Qu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!t.extend&&s>r&&(o=r,r=s,s=o),o=nd(n,s);var i=nd(n,r);o&&i&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Vg=fr&&"documentMode"in document&&11>=document.documentMode,ko=null,Wl=null,xs=null,Vl=!1;function rd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vl||ko==null||ko!==zi(r)||(r=ko,"selectionStart"in r&&Qu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xs&&$s(xs,r)||(xs=r,r=Ki(Wl,"onSelect"),0<r.length&&(e=new Ku("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ko)))}function di(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Eo={animationend:di("Animation","AnimationEnd"),animationiteration:di("Animation","AnimationIteration"),animationstart:di("Animation","AnimationStart"),transitionend:di("Transition","TransitionEnd")},Ja={},bh={};fr&&(bh=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function va(t){if(Ja[t])return Ja[t];if(!Eo[t])return t;var e=Eo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in bh)return Ja[t]=e[n];return t}var wh=va("animationend"),Sh=va("animationiteration"),_h=va("animationstart"),kh=va("transitionend"),Eh=new Map,od="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(t,e){Eh.set(t,e),lo(e,[t])}for(var Ya=0;Ya<od.length;Ya++){var Qa=od[Ya],Gg=Qa.toLowerCase(),qg=Qa[0].toUpperCase()+Qa.slice(1);Ur(Gg,"on"+qg)}Ur(wh,"onAnimationEnd");Ur(Sh,"onAnimationIteration");Ur(_h,"onAnimationStart");Ur("dblclick","onDoubleClick");Ur("focusin","onFocus");Ur("focusout","onBlur");Ur(kh,"onTransitionEnd");Bo("onMouseEnter",["mouseout","mouseover"]);Bo("onMouseLeave",["mouseout","mouseover"]);Bo("onPointerEnter",["pointerout","pointerover"]);Bo("onPointerLeave",["pointerout","pointerover"]);lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lo("onBeforeInput",["compositionend","keypress","textInput","paste"]);lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hg=new Set("cancel close invalid load scroll toggle".split(" ").concat(hs));function sd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Gm(r,e,void 0,t),t.currentTarget=null}function jh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var l=r[i],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&o.isPropagationStopped())break e;sd(o,l,c),s=u}else for(i=0;i<r.length;i++){if(l=r[i],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&o.isPropagationStopped())break e;sd(o,l,c),s=u}}}if(Wi)throw t=Bl,Wi=!1,Bl=null,t}function it(t,e){var n=e[Jl];n===void 0&&(n=e[Jl]=new Set);var r=t+"__bubble";n.has(r)||(Ch(e,t,2,!1),n.add(r))}function Xa(t,e,n){var r=0;e&&(r|=4),Ch(n,t,r,e)}var fi="_reactListening"+Math.random().toString(36).slice(2);function Is(t){if(!t[fi]){t[fi]=!0,Pf.forEach(function(n){n!=="selectionchange"&&(Hg.has(n)||Xa(n,!1,t),Xa(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fi]||(e[fi]=!0,Xa("selectionchange",!1,e))}}function Ch(t,e,n,r){switch(ch(e)){case 1:var o=ag;break;case 4:o=lg;break;default:o=qu}n=o.bind(null,e,n,t),o=void 0,!Ml||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Za(t,e,n,r,o){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;i=i.return}for(;l!==null;){if(i=Yr(l),i===null)return;if(u=i.tag,u===5||u===6){r=s=i;continue e}l=l.parentNode}}r=r.return}Yf(function(){var c=s,d=Fu(n),h=[];e:{var f=Eh.get(t);if(f!==void 0){var x=Ku,y=t;switch(t){case"keypress":if(Oi(n)===0)break e;case"keydown":case"keyup":x=_g;break;case"focusin":y="focus",x=qa;break;case"focusout":y="blur",x=qa;break;case"beforeblur":case"afterblur":x=qa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=dg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=jg;break;case wh:case Sh:case _h:x=pg;break;case kh:x=Rg;break;case"scroll":x=ug;break;case"wheel":x=Dg;break;case"copy":case"cut":case"paste":x=gg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Jc}var b=(e&4)!==0,_=!b&&t==="scroll",p=b?f!==null?f+"Capture":null:f;b=[];for(var m=c,g;m!==null;){g=m;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,p!==null&&(w=As(m,p),w!=null&&b.push(Ms(m,w,g)))),_)break;m=m.return}0<b.length&&(f=new x(f,y,null,n,d),h.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",f&&n!==$l&&(y=n.relatedTarget||n.fromElement)&&(Yr(y)||y[hr]))break e;if((x||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,x?(y=n.relatedTarget||n.toElement,x=c,y=y?Yr(y):null,y!==null&&(_=uo(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=c),x!==y)){if(b=Hc,w="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(b=Jc,w="onPointerLeave",p="onPointerEnter",m="pointer"),_=x==null?f:jo(x),g=y==null?f:jo(y),f=new b(w,m+"leave",x,n,d),f.target=_,f.relatedTarget=g,w=null,Yr(d)===c&&(b=new b(p,m+"enter",y,n,d),b.target=g,b.relatedTarget=_,w=b),_=w,x&&y)t:{for(b=x,p=y,m=0,g=b;g;g=ho(g))m++;for(g=0,w=p;w;w=ho(w))g++;for(;0<m-g;)b=ho(b),m--;for(;0<g-m;)p=ho(p),g--;for(;m--;){if(b===p||p!==null&&b===p.alternate)break t;b=ho(b),p=ho(p)}b=null}else b=null;x!==null&&id(h,f,x,b,!1),y!==null&&_!==null&&id(h,_,y,b,!0)}}e:{if(f=c?jo(c):window,x=f.nodeName&&f.nodeName.toLowerCase(),x==="select"||x==="input"&&f.type==="file")var j=Ig;else if(Xc(f))if(gh)j=zg;else{j=Bg;var N=Mg}else(x=f.nodeName)&&x.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=Ug);if(j&&(j=j(t,c))){mh(h,j,n,d);break e}N&&N(t,f,c),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Al(f,"number",f.value)}switch(N=c?jo(c):window,t){case"focusin":(Xc(N)||N.contentEditable==="true")&&(ko=N,Wl=c,xs=null);break;case"focusout":xs=Wl=ko=null;break;case"mousedown":Vl=!0;break;case"contextmenu":case"mouseup":case"dragend":Vl=!1,rd(h,n,d);break;case"selectionchange":if(Vg)break;case"keydown":case"keyup":rd(h,n,d)}var R;if(Yu)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else _o?hh(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(fh&&n.locale!=="ko"&&(_o||S!=="onCompositionStart"?S==="onCompositionEnd"&&_o&&(R=dh()):(Rr=d,Hu="value"in Rr?Rr.value:Rr.textContent,_o=!0)),N=Ki(c,S),0<N.length&&(S=new Kc(S,t,null,n,d),h.push({event:S,listeners:N}),R?S.data=R:(R=ph(n),R!==null&&(S.data=R)))),(R=Tg?Og(t,n):Pg(t,n))&&(c=Ki(c,"onBeforeInput"),0<c.length&&(d=new Kc("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=R))}jh(h,e)})}function Ms(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ki(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=As(t,n),s!=null&&r.unshift(Ms(t,s,o)),s=As(t,e),s!=null&&r.push(Ms(t,s,o))),t=t.return}return r}function ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function id(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,o?(u=As(n,s),u!=null&&i.unshift(Ms(n,u,l))):o||(u=As(n,s),u!=null&&i.push(Ms(n,u,l)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var Kg=/\r\n?/g,Jg=/\u0000|\uFFFD/g;function ad(t){return(typeof t=="string"?t:""+t).replace(Kg,`
`).replace(Jg,"")}function hi(t,e,n){if(e=ad(e),ad(t)!==e&&n)throw Error(B(425))}function Ji(){}var Gl=null,ql=null;function Hl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kl=typeof setTimeout=="function"?setTimeout:void 0,Yg=typeof clearTimeout=="function"?clearTimeout:void 0,ld=typeof Promise=="function"?Promise:void 0,Qg=typeof queueMicrotask=="function"?queueMicrotask:typeof ld<"u"?function(t){return ld.resolve(null).then(t).catch(Xg)}:Kl;function Xg(t){setTimeout(function(){throw t})}function el(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),Ps(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Ps(e)}function Or(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ud(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jo=Math.random().toString(36).slice(2),er="__reactFiber$"+Jo,Bs="__reactProps$"+Jo,hr="__reactContainer$"+Jo,Jl="__reactEvents$"+Jo,Zg="__reactListeners$"+Jo,e0="__reactHandles$"+Jo;function Yr(t){var e=t[er];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hr]||n[er]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ud(t);t!==null;){if(n=t[er])return n;t=ud(t)}return e}t=n,n=t.parentNode}return null}function Qs(t){return t=t[er]||t[hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function xa(t){return t[Bs]||null}var Yl=[],Co=-1;function zr(t){return{current:t}}function at(t){0>Co||(t.current=Yl[Co],Yl[Co]=null,Co--)}function st(t,e){Co++,Yl[Co]=t.current,t.current=e}var Br={},qt=zr(Br),mn=zr(!1),to=Br;function Uo(t,e){var n=t.type.contextTypes;if(!n)return Br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function gn(t){return t=t.childContextTypes,t!=null}function Yi(){at(mn),at(qt)}function cd(t,e,n){if(qt.current!==Br)throw Error(B(168));st(qt,e),st(mn,n)}function Rh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(B(108,Mm(t)||"Unknown",o));return pt({},n,r)}function Qi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Br,to=qt.current,st(qt,t),st(mn,mn.current),!0}function dd(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=Rh(t,e,to),r.__reactInternalMemoizedMergedChildContext=t,at(mn),at(qt),st(qt,t)):at(mn),st(mn,n)}var ar=null,ba=!1,tl=!1;function Nh(t){ar===null?ar=[t]:ar.push(t)}function t0(t){ba=!0,Nh(t)}function Fr(){if(!tl&&ar!==null){tl=!0;var t=0,e=Ze;try{var n=ar;for(Ze=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ar=null,ba=!1}catch(o){throw ar!==null&&(ar=ar.slice(t+1)),eh(Wu,Fr),o}finally{Ze=e,tl=!1}}return null}var Ro=[],No=0,Xi=null,Zi=0,Cn=[],Rn=0,no=null,lr=1,ur="";function qr(t,e){Ro[No++]=Zi,Ro[No++]=Xi,Xi=t,Zi=e}function Dh(t,e,n){Cn[Rn++]=lr,Cn[Rn++]=ur,Cn[Rn++]=no,no=t;var r=lr;t=ur;var o=32-Wn(r)-1;r&=~(1<<o),n+=1;var s=32-Wn(e)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,lr=1<<32-Wn(e)+o|n<<o|r,ur=s+t}else lr=1<<s|n<<o|r,ur=t}function Xu(t){t.return!==null&&(qr(t,1),Dh(t,1,0))}function Zu(t){for(;t===Xi;)Xi=Ro[--No],Ro[No]=null,Zi=Ro[--No],Ro[No]=null;for(;t===no;)no=Cn[--Rn],Cn[Rn]=null,ur=Cn[--Rn],Cn[Rn]=null,lr=Cn[--Rn],Cn[Rn]=null}var Sn=null,wn=null,ut=!1,zn=null;function Ah(t,e){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sn=t,wn=Or(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sn=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=no!==null?{id:lr,overflow:ur}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Sn=t,wn=null,!0):!1;default:return!1}}function Ql(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xl(t){if(ut){var e=wn;if(e){var n=e;if(!fd(t,e)){if(Ql(t))throw Error(B(418));e=Or(n.nextSibling);var r=Sn;e&&fd(t,e)?Ah(r,n):(t.flags=t.flags&-4097|2,ut=!1,Sn=t)}}else{if(Ql(t))throw Error(B(418));t.flags=t.flags&-4097|2,ut=!1,Sn=t}}}function hd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sn=t}function pi(t){if(t!==Sn)return!1;if(!ut)return hd(t),ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hl(t.type,t.memoizedProps)),e&&(e=wn)){if(Ql(t))throw Th(),Error(B(418));for(;e;)Ah(t,e),e=Or(e.nextSibling)}if(hd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wn=Or(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=Sn?Or(t.stateNode.nextSibling):null;return!0}function Th(){for(var t=wn;t;)t=Or(t.nextSibling)}function zo(){wn=Sn=null,ut=!1}function ec(t){zn===null?zn=[t]:zn.push(t)}var n0=yr.ReactCurrentBatchConfig;function ss(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var o=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var l=o.refs;i===null?delete l[s]:l[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function mi(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pd(t){var e=t._init;return e(t._payload)}function Oh(t){function e(p,m){if(t){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function o(p,m){return p=Ir(p,m),p.index=0,p.sibling=null,p}function s(p,m,g){return p.index=g,t?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function i(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,m,g,w){return m===null||m.tag!==6?(m=ll(g,p.mode,w),m.return=p,m):(m=o(m,g),m.return=p,m)}function u(p,m,g,w){var j=g.type;return j===So?d(p,m,g.props.children,w,g.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===_r&&pd(j)===m.type)?(w=o(m,g.props),w.ref=ss(p,m,g),w.return=p,w):(w=Ui(g.type,g.key,g.props,null,p.mode,w),w.ref=ss(p,m,g),w.return=p,w)}function c(p,m,g,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=ul(g,p.mode,w),m.return=p,m):(m=o(m,g.children||[]),m.return=p,m)}function d(p,m,g,w,j){return m===null||m.tag!==7?(m=eo(g,p.mode,w,j),m.return=p,m):(m=o(m,g),m.return=p,m)}function h(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ll(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case oi:return g=Ui(m.type,m.key,m.props,null,p.mode,g),g.ref=ss(p,null,m),g.return=p,g;case wo:return m=ul(m,p.mode,g),m.return=p,m;case _r:var w=m._init;return h(p,w(m._payload),g)}if(ds(m)||es(m))return m=eo(m,p.mode,g,null),m.return=p,m;mi(p,m)}return null}function f(p,m,g,w){var j=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return j!==null?null:l(p,m,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case oi:return g.key===j?u(p,m,g,w):null;case wo:return g.key===j?c(p,m,g,w):null;case _r:return j=g._init,f(p,m,j(g._payload),w)}if(ds(g)||es(g))return j!==null?null:d(p,m,g,w,null);mi(p,g)}return null}function x(p,m,g,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(g)||null,l(m,p,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case oi:return p=p.get(w.key===null?g:w.key)||null,u(m,p,w,j);case wo:return p=p.get(w.key===null?g:w.key)||null,c(m,p,w,j);case _r:var N=w._init;return x(p,m,g,N(w._payload),j)}if(ds(w)||es(w))return p=p.get(g)||null,d(m,p,w,j,null);mi(m,w)}return null}function y(p,m,g,w){for(var j=null,N=null,R=m,S=m=0,A=null;R!==null&&S<g.length;S++){R.index>S?(A=R,R=null):A=R.sibling;var v=f(p,R,g[S],w);if(v===null){R===null&&(R=A);break}t&&R&&v.alternate===null&&e(p,R),m=s(v,m,S),N===null?j=v:N.sibling=v,N=v,R=A}if(S===g.length)return n(p,R),ut&&qr(p,S),j;if(R===null){for(;S<g.length;S++)R=h(p,g[S],w),R!==null&&(m=s(R,m,S),N===null?j=R:N.sibling=R,N=R);return ut&&qr(p,S),j}for(R=r(p,R);S<g.length;S++)A=x(R,p,S,g[S],w),A!==null&&(t&&A.alternate!==null&&R.delete(A.key===null?S:A.key),m=s(A,m,S),N===null?j=A:N.sibling=A,N=A);return t&&R.forEach(function(D){return e(p,D)}),ut&&qr(p,S),j}function b(p,m,g,w){var j=es(g);if(typeof j!="function")throw Error(B(150));if(g=j.call(g),g==null)throw Error(B(151));for(var N=j=null,R=m,S=m=0,A=null,v=g.next();R!==null&&!v.done;S++,v=g.next()){R.index>S?(A=R,R=null):A=R.sibling;var D=f(p,R,v.value,w);if(D===null){R===null&&(R=A);break}t&&R&&D.alternate===null&&e(p,R),m=s(D,m,S),N===null?j=D:N.sibling=D,N=D,R=A}if(v.done)return n(p,R),ut&&qr(p,S),j;if(R===null){for(;!v.done;S++,v=g.next())v=h(p,v.value,w),v!==null&&(m=s(v,m,S),N===null?j=v:N.sibling=v,N=v);return ut&&qr(p,S),j}for(R=r(p,R);!v.done;S++,v=g.next())v=x(R,p,S,v.value,w),v!==null&&(t&&v.alternate!==null&&R.delete(v.key===null?S:v.key),m=s(v,m,S),N===null?j=v:N.sibling=v,N=v);return t&&R.forEach(function(T){return e(p,T)}),ut&&qr(p,S),j}function _(p,m,g,w){if(typeof g=="object"&&g!==null&&g.type===So&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case oi:e:{for(var j=g.key,N=m;N!==null;){if(N.key===j){if(j=g.type,j===So){if(N.tag===7){n(p,N.sibling),m=o(N,g.props.children),m.return=p,p=m;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===_r&&pd(j)===N.type){n(p,N.sibling),m=o(N,g.props),m.ref=ss(p,N,g),m.return=p,p=m;break e}n(p,N);break}else e(p,N);N=N.sibling}g.type===So?(m=eo(g.props.children,p.mode,w,g.key),m.return=p,p=m):(w=Ui(g.type,g.key,g.props,null,p.mode,w),w.ref=ss(p,m,g),w.return=p,p=w)}return i(p);case wo:e:{for(N=g.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(p,m.sibling),m=o(m,g.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=ul(g,p.mode,w),m.return=p,p=m}return i(p);case _r:return N=g._init,_(p,m,N(g._payload),w)}if(ds(g))return y(p,m,g,w);if(es(g))return b(p,m,g,w);mi(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(p,m.sibling),m=o(m,g),m.return=p,p=m):(n(p,m),m=ll(g,p.mode,w),m.return=p,p=m),i(p)):n(p,m)}return _}var Fo=Oh(!0),Ph=Oh(!1),ea=zr(null),ta=null,Do=null,tc=null;function nc(){tc=Do=ta=null}function rc(t){var e=ea.current;at(ea),t._currentValue=e}function Zl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Io(t,e){ta=t,tc=Do=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pn=!0),t.firstContext=null)}function Tn(t){var e=t._currentValue;if(tc!==t)if(t={context:t,memoizedValue:e,next:null},Do===null){if(ta===null)throw Error(B(308));Do=t,ta.dependencies={lanes:0,firstContext:t}}else Do=Do.next=t;return e}var Qr=null;function oc(t){Qr===null?Qr=[t]:Qr.push(t)}function Lh(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,oc(e)):(n.next=o.next,o.next=n),e.interleaved=n,pr(t,r)}function pr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kr=!1;function sc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $h(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Pr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,We&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,pr(t,n)}return o=r.interleaved,o===null?(e.next=e,oc(r)):(e.next=o.next,o.next=e),r.interleaved=e,pr(t,n)}function Pi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vu(t,n)}}function md(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function na(t,e,n,r){var o=t.updateQueue;kr=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var u=l,c=u.next;u.next=null,i===null?s=c:i.next=c,i=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(s!==null){var h=o.baseState;i=0,d=c=u=null,l=s;do{var f=l.lane,x=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,b=l;switch(f=e,x=n,b.tag){case 1:if(y=b.payload,typeof y=="function"){h=y.call(x,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,f=typeof y=="function"?y.call(x,h,f):y,f==null)break e;h=pt({},h,f);break e;case 2:kr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=o.effects,f===null?o.effects=[l]:f.push(l))}else x={eventTime:x,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=x,u=h):d=d.next=x,i|=f;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;f=l,l=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(d===null&&(u=h),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=d,e=o.shared.interleaved,e!==null){o=e;do i|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);oo|=i,t.lanes=i,t.memoizedState=h}}function gd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(B(191,o));o.call(r)}}}var Xs={},rr=zr(Xs),Us=zr(Xs),zs=zr(Xs);function Xr(t){if(t===Xs)throw Error(B(174));return t}function ic(t,e){switch(st(zs,e),st(Us,t),st(rr,Xs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ol(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ol(e,t)}at(rr),st(rr,e)}function Wo(){at(rr),at(Us),at(zs)}function Ih(t){Xr(zs.current);var e=Xr(rr.current),n=Ol(e,t.type);e!==n&&(st(Us,t),st(rr,n))}function ac(t){Us.current===t&&(at(rr),at(Us))}var ft=zr(0);function ra(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nl=[];function lc(){for(var t=0;t<nl.length;t++)nl[t]._workInProgressVersionPrimary=null;nl.length=0}var Li=yr.ReactCurrentDispatcher,rl=yr.ReactCurrentBatchConfig,ro=0,ht=null,Ct=null,Ot=null,oa=!1,bs=!1,Fs=0,r0=0;function Wt(){throw Error(B(321))}function uc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gn(t[n],e[n]))return!1;return!0}function cc(t,e,n,r,o,s){if(ro=s,ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Li.current=t===null||t.memoizedState===null?a0:l0,t=n(r,o),bs){s=0;do{if(bs=!1,Fs=0,25<=s)throw Error(B(301));s+=1,Ot=Ct=null,e.updateQueue=null,Li.current=u0,t=n(r,o)}while(bs)}if(Li.current=sa,e=Ct!==null&&Ct.next!==null,ro=0,Ot=Ct=ht=null,oa=!1,e)throw Error(B(300));return t}function dc(){var t=Fs!==0;return Fs=0,t}function Xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ht.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function On(){if(Ct===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=Ct.next;var e=Ot===null?ht.memoizedState:Ot.next;if(e!==null)Ot=e,Ct=t;else{if(t===null)throw Error(B(310));Ct=t,t={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Ot===null?ht.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Ws(t,e){return typeof e=="function"?e(t):e}function ol(t){var e=On(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Ct,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var l=i=null,u=null,c=s;do{var d=c.lane;if((ro&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,i=r):u=u.next=h,ht.lanes|=d,oo|=d}c=c.next}while(c!==null&&c!==s);u===null?i=r:u.next=l,Gn(r,e.memoizedState)||(pn=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do s=o.lane,ht.lanes|=s,oo|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sl(t){var e=On(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);Gn(s,e.memoizedState)||(pn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Mh(){}function Bh(t,e){var n=ht,r=On(),o=e(),s=!Gn(r.memoizedState,o);if(s&&(r.memoizedState=o,pn=!0),r=r.queue,fc(Fh.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,Vs(9,zh.bind(null,n,r,o,e),void 0,null),Pt===null)throw Error(B(349));ro&30||Uh(n,e,o)}return o}function Uh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zh(t,e,n,r){e.value=n,e.getSnapshot=r,Wh(e)&&Vh(t)}function Fh(t,e,n){return n(function(){Wh(e)&&Vh(t)})}function Wh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gn(t,n)}catch{return!0}}function Vh(t){var e=pr(t,1);e!==null&&Vn(e,t,1,-1)}function yd(t){var e=Xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:t},e.queue=t,t=t.dispatch=i0.bind(null,ht,t),[e.memoizedState,t]}function Vs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Gh(){return On().memoizedState}function $i(t,e,n,r){var o=Xn();ht.flags|=t,o.memoizedState=Vs(1|e,n,void 0,r===void 0?null:r)}function wa(t,e,n,r){var o=On();r=r===void 0?null:r;var s=void 0;if(Ct!==null){var i=Ct.memoizedState;if(s=i.destroy,r!==null&&uc(r,i.deps)){o.memoizedState=Vs(e,n,s,r);return}}ht.flags|=t,o.memoizedState=Vs(1|e,n,s,r)}function vd(t,e){return $i(8390656,8,t,e)}function fc(t,e){return wa(2048,8,t,e)}function qh(t,e){return wa(4,2,t,e)}function Hh(t,e){return wa(4,4,t,e)}function Kh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Jh(t,e,n){return n=n!=null?n.concat([t]):null,wa(4,4,Kh.bind(null,e,t),n)}function hc(){}function Yh(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Qh(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Xh(t,e,n){return ro&21?(Gn(n,e)||(n=rh(),ht.lanes|=n,oo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pn=!0),t.memoizedState=n)}function o0(t,e){var n=Ze;Ze=n!==0&&4>n?n:4,t(!0);var r=rl.transition;rl.transition={};try{t(!1),e()}finally{Ze=n,rl.transition=r}}function Zh(){return On().memoizedState}function s0(t,e,n){var r=$r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ep(t))tp(e,n);else if(n=Lh(t,e,n,r),n!==null){var o=en();Vn(n,t,r,o),np(n,e,r)}}function i0(t,e,n){var r=$r(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ep(t))tp(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,l=s(i,n);if(o.hasEagerState=!0,o.eagerState=l,Gn(l,i)){var u=e.interleaved;u===null?(o.next=o,oc(e)):(o.next=u.next,u.next=o),e.interleaved=o;return}}catch{}finally{}n=Lh(t,e,o,r),n!==null&&(o=en(),Vn(n,t,r,o),np(n,e,r))}}function ep(t){var e=t.alternate;return t===ht||e!==null&&e===ht}function tp(t,e){bs=oa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function np(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vu(t,n)}}var sa={readContext:Tn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},a0={readContext:Tn,useCallback:function(t,e){return Xn().memoizedState=[t,e===void 0?null:e],t},useContext:Tn,useEffect:vd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$i(4194308,4,Kh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $i(4194308,4,t,e)},useInsertionEffect:function(t,e){return $i(4,2,t,e)},useMemo:function(t,e){var n=Xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=s0.bind(null,ht,t),[r.memoizedState,t]},useRef:function(t){var e=Xn();return t={current:t},e.memoizedState=t},useState:yd,useDebugValue:hc,useDeferredValue:function(t){return Xn().memoizedState=t},useTransition:function(){var t=yd(!1),e=t[0];return t=o0.bind(null,t[1]),Xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ht,o=Xn();if(ut){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Pt===null)throw Error(B(349));ro&30||Uh(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,vd(Fh.bind(null,r,s,t),[t]),r.flags|=2048,Vs(9,zh.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Xn(),e=Pt.identifierPrefix;if(ut){var n=ur,r=lr;n=(r&~(1<<32-Wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=r0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},l0={readContext:Tn,useCallback:Yh,useContext:Tn,useEffect:fc,useImperativeHandle:Jh,useInsertionEffect:qh,useLayoutEffect:Hh,useMemo:Qh,useReducer:ol,useRef:Gh,useState:function(){return ol(Ws)},useDebugValue:hc,useDeferredValue:function(t){var e=On();return Xh(e,Ct.memoizedState,t)},useTransition:function(){var t=ol(Ws)[0],e=On().memoizedState;return[t,e]},useMutableSource:Mh,useSyncExternalStore:Bh,useId:Zh,unstable_isNewReconciler:!1},u0={readContext:Tn,useCallback:Yh,useContext:Tn,useEffect:fc,useImperativeHandle:Jh,useInsertionEffect:qh,useLayoutEffect:Hh,useMemo:Qh,useReducer:sl,useRef:Gh,useState:function(){return sl(Ws)},useDebugValue:hc,useDeferredValue:function(t){var e=On();return Ct===null?e.memoizedState=t:Xh(e,Ct.memoizedState,t)},useTransition:function(){var t=sl(Ws)[0],e=On().memoizedState;return[t,e]},useMutableSource:Mh,useSyncExternalStore:Bh,useId:Zh,unstable_isNewReconciler:!1};function Mn(t,e){if(t&&t.defaultProps){e=pt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function eu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sa={isMounted:function(t){return(t=t._reactInternals)?uo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=en(),o=$r(t),s=dr(r,o);s.payload=e,n!=null&&(s.callback=n),e=Pr(t,s,o),e!==null&&(Vn(e,t,o,r),Pi(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=en(),o=$r(t),s=dr(r,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Pr(t,s,o),e!==null&&(Vn(e,t,o,r),Pi(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),r=$r(t),o=dr(n,r);o.tag=2,e!=null&&(o.callback=e),e=Pr(t,o,r),e!==null&&(Vn(e,t,r,n),Pi(e,t,r))}};function xd(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!$s(n,r)||!$s(o,s):!0}function rp(t,e,n){var r=!1,o=Br,s=e.contextType;return typeof s=="object"&&s!==null?s=Tn(s):(o=gn(e)?to:qt.current,r=e.contextTypes,s=(r=r!=null)?Uo(t,o):Br),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function bd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sa.enqueueReplaceState(e,e.state,null)}function tu(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},sc(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=Tn(s):(s=gn(e)?to:qt.current,o.context=Uo(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(eu(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Sa.enqueueReplaceState(o,o.state,null),na(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Vo(t,e){try{var n="",r=e;do n+=Im(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function il(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var c0=typeof WeakMap=="function"?WeakMap:Map;function op(t,e,n){n=dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){aa||(aa=!0,fu=r),nu(t,e)},n}function sp(t,e,n){n=dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){nu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){nu(t,e),typeof r!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function wd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new c0;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=k0.bind(null,t,e,n),e.then(t,t))}function Sd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _d(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=dr(-1,1),e.tag=2,Pr(n,e,1))),n.lanes|=1),t)}var d0=yr.ReactCurrentOwner,pn=!1;function Qt(t,e,n,r){e.child=t===null?Ph(e,null,n,r):Fo(e,t.child,n,r)}function kd(t,e,n,r,o){n=n.render;var s=e.ref;return Io(e,o),r=cc(t,e,n,r,s,o),n=dc(),t!==null&&!pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,mr(t,e,o)):(ut&&n&&Xu(e),e.flags|=1,Qt(t,e,r,o),e.child)}function Ed(t,e,n,r,o){if(t===null){var s=n.type;return typeof s=="function"&&!wc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,ip(t,e,s,r,o)):(t=Ui(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:$s,n(i,r)&&t.ref===e.ref)return mr(t,e,o)}return e.flags|=1,t=Ir(s,r),t.ref=e.ref,t.return=e,e.child=t}function ip(t,e,n,r,o){if(t!==null){var s=t.memoizedProps;if($s(s,r)&&t.ref===e.ref)if(pn=!1,e.pendingProps=r=s,(t.lanes&o)!==0)t.flags&131072&&(pn=!0);else return e.lanes=t.lanes,mr(t,e,o)}return ru(t,e,n,r,o)}function ap(t,e,n){var r=e.pendingProps,o=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(To,bn),bn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,st(To,bn),bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,st(To,bn),bn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,st(To,bn),bn|=r;return Qt(t,e,o,n),e.child}function lp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ru(t,e,n,r,o){var s=gn(n)?to:qt.current;return s=Uo(e,s),Io(e,o),n=cc(t,e,n,r,s,o),r=dc(),t!==null&&!pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,mr(t,e,o)):(ut&&r&&Xu(e),e.flags|=1,Qt(t,e,n,o),e.child)}function jd(t,e,n,r,o){if(gn(n)){var s=!0;Qi(e)}else s=!1;if(Io(e,o),e.stateNode===null)Ii(t,e),rp(e,n,r),tu(e,n,r,o),r=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var u=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Tn(c):(c=gn(n)?to:qt.current,c=Uo(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||u!==c)&&bd(e,i,r,c),kr=!1;var f=e.memoizedState;i.state=f,na(e,r,i,o),u=e.memoizedState,l!==r||f!==u||mn.current||kr?(typeof d=="function"&&(eu(e,n,d,r),u=e.memoizedState),(l=kr||xd(e,n,l,r,f,u,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),i.props=r,i.state=u,i.context=c,r=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,$h(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Mn(e.type,l),i.props=c,h=e.pendingProps,f=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=Tn(u):(u=gn(n)?to:qt.current,u=Uo(e,u));var x=n.getDerivedStateFromProps;(d=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||f!==u)&&bd(e,i,r,u),kr=!1,f=e.memoizedState,i.state=f,na(e,r,i,o);var y=e.memoizedState;l!==h||f!==y||mn.current||kr?(typeof x=="function"&&(eu(e,n,x,r),y=e.memoizedState),(c=kr||xd(e,n,c,r,f,y,u)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,y,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,y,u)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),i.props=r,i.state=y,i.context=u,r=c):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return ou(t,e,n,r,s,o)}function ou(t,e,n,r,o,s){lp(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return o&&dd(e,n,!1),mr(t,e,s);r=e.stateNode,d0.current=e;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=Fo(e,t.child,null,s),e.child=Fo(e,null,l,s)):Qt(t,e,l,s),e.memoizedState=r.state,o&&dd(e,n,!0),e.child}function up(t){var e=t.stateNode;e.pendingContext?cd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cd(t,e.context,!1),ic(t,e.containerInfo)}function Cd(t,e,n,r,o){return zo(),ec(o),e.flags|=256,Qt(t,e,n,r),e.child}var su={dehydrated:null,treeContext:null,retryLane:0};function iu(t){return{baseLanes:t,cachePool:null,transitions:null}}function cp(t,e,n){var r=e.pendingProps,o=ft.current,s=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(o&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),st(ft,o&1),t===null)return Xl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Ea(i,r,0,null),t=eo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=iu(n),e.memoizedState=su,t):pc(e,i));if(o=t.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return f0(t,e,i,r,l,o,n);if(s){s=r.fallback,i=e.mode,o=t.child,l=o.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ir(o,u),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?s=Ir(l,s):(s=eo(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?iu(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=su,r}return s=t.child,t=s.sibling,r=Ir(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pc(t,e){return e=Ea({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gi(t,e,n,r){return r!==null&&ec(r),Fo(e,t.child,null,n),t=pc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function f0(t,e,n,r,o,s,i){if(n)return e.flags&256?(e.flags&=-257,r=il(Error(B(422))),gi(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=Ea({mode:"visible",children:r.children},o,0,null),s=eo(s,o,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Fo(e,t.child,null,i),e.child.memoizedState=iu(i),e.memoizedState=su,s);if(!(e.mode&1))return gi(t,e,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(B(419)),r=il(s,r,void 0),gi(t,e,i,r)}if(l=(i&t.childLanes)!==0,pn||l){if(r=Pt,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,pr(t,o),Vn(r,t,o,-1))}return bc(),r=il(Error(B(421))),gi(t,e,i,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=E0.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,wn=Or(o.nextSibling),Sn=e,ut=!0,zn=null,t!==null&&(Cn[Rn++]=lr,Cn[Rn++]=ur,Cn[Rn++]=no,lr=t.id,ur=t.overflow,no=e),e=pc(e,r.children),e.flags|=4096,e)}function Rd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Zl(t.return,e,n)}function al(t,e,n,r,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function dp(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;if(Qt(t,e,r.children,n),r=ft.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rd(t,n,e);else if(t.tag===19)Rd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(st(ft,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&ra(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),al(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&ra(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}al(e,!0,n,null,s);break;case"together":al(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ii(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Ir(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ir(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function h0(t,e,n){switch(e.tag){case 3:up(e),zo();break;case 5:Ih(e);break;case 1:gn(e.type)&&Qi(e);break;case 4:ic(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;st(ea,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(st(ft,ft.current&1),e.flags|=128,null):n&e.child.childLanes?cp(t,e,n):(st(ft,ft.current&1),t=mr(t,e,n),t!==null?t.sibling:null);st(ft,ft.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return dp(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),st(ft,ft.current),r)break;return null;case 22:case 23:return e.lanes=0,ap(t,e,n)}return mr(t,e,n)}var fp,au,hp,pp;fp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};au=function(){};hp=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Xr(rr.current);var s=null;switch(n){case"input":o=Nl(t,o),r=Nl(t,r),s=[];break;case"select":o=pt({},o,{value:void 0}),r=pt({},r,{value:void 0}),s=[];break;case"textarea":o=Tl(t,o),r=Tl(t,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ji)}Pl(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var l=o[c];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ns.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ns.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&it("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};pp=function(t,e,n,r){n!==r&&(e.flags|=4)};function is(t,e){if(!ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function p0(t,e,n){var r=e.pendingProps;switch(Zu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return gn(e.type)&&Yi(),Vt(e),null;case 3:return r=e.stateNode,Wo(),at(mn),at(qt),lc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&(mu(zn),zn=null))),au(t,e),Vt(e),null;case 5:ac(e);var o=Xr(zs.current);if(n=e.type,t!==null&&e.stateNode!=null)hp(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return Vt(e),null}if(t=Xr(rr.current),pi(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[er]=e,r[Bs]=s,t=(e.mode&1)!==0,n){case"dialog":it("cancel",r),it("close",r);break;case"iframe":case"object":case"embed":it("load",r);break;case"video":case"audio":for(o=0;o<hs.length;o++)it(hs[o],r);break;case"source":it("error",r);break;case"img":case"image":case"link":it("error",r),it("load",r);break;case"details":it("toggle",r);break;case"input":Ic(r,s),it("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},it("invalid",r);break;case"textarea":Bc(r,s),it("invalid",r)}Pl(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&hi(r.textContent,l,t),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&hi(r.textContent,l,t),o=["children",""+l]):Ns.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&it("scroll",r)}switch(n){case"input":si(r),Mc(r,s,!0);break;case"textarea":si(r),Uc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ji)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ff(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[er]=e,t[Bs]=r,fp(t,e,!1,!1),e.stateNode=t;e:{switch(i=Ll(n,r),n){case"dialog":it("cancel",t),it("close",t),o=r;break;case"iframe":case"object":case"embed":it("load",t),o=r;break;case"video":case"audio":for(o=0;o<hs.length;o++)it(hs[o],t);o=r;break;case"source":it("error",t),o=r;break;case"img":case"image":case"link":it("error",t),it("load",t),o=r;break;case"details":it("toggle",t),o=r;break;case"input":Ic(t,r),o=Nl(t,r),it("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=pt({},r,{value:void 0}),it("invalid",t);break;case"textarea":Bc(t,r),o=Tl(t,r),it("invalid",t);break;default:o=r}Pl(n,o),l=o;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Gf(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Wf(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ds(t,u):typeof u=="number"&&Ds(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ns.hasOwnProperty(s)?u!=null&&s==="onScroll"&&it("scroll",t):u!=null&&Mu(t,s,u,i))}switch(n){case"input":si(t),Mc(t,r,!1);break;case"textarea":si(t),Uc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Mr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Oo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Oo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Ji)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)pp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Xr(zs.current),Xr(rr.current),pi(e)){if(r=e.stateNode,n=e.memoizedProps,r[er]=e,(s=r.nodeValue!==n)&&(t=Sn,t!==null))switch(t.tag){case 3:hi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hi(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[er]=e,e.stateNode=r}return Vt(e),null;case 13:if(at(ft),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ut&&wn!==null&&e.mode&1&&!(e.flags&128))Th(),zo(),e.flags|=98560,s=!1;else if(s=pi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[er]=e}else zo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),s=!1}else zn!==null&&(mu(zn),zn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ft.current&1?Rt===0&&(Rt=3):bc())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return Wo(),au(t,e),t===null&&Is(e.stateNode.containerInfo),Vt(e),null;case 10:return rc(e.type._context),Vt(e),null;case 17:return gn(e.type)&&Yi(),Vt(e),null;case 19:if(at(ft),s=e.memoizedState,s===null)return Vt(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)is(s,!1);else{if(Rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=ra(t),i!==null){for(e.flags|=128,is(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return st(ft,ft.current&1|2),e.child}t=t.sibling}s.tail!==null&&bt()>Go&&(e.flags|=128,r=!0,is(s,!1),e.lanes=4194304)}else{if(!r)if(t=ra(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),is(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!ut)return Vt(e),null}else 2*bt()-s.renderingStartTime>Go&&n!==1073741824&&(e.flags|=128,r=!0,is(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=bt(),e.sibling=null,n=ft.current,st(ft,r?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return xc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bn&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function m0(t,e){switch(Zu(e),e.tag){case 1:return gn(e.type)&&Yi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wo(),at(mn),at(qt),lc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ac(e),null;case 13:if(at(ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));zo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return at(ft),null;case 4:return Wo(),null;case 10:return rc(e.type._context),null;case 22:case 23:return xc(),null;case 24:return null;default:return null}}var yi=!1,Gt=!1,g0=typeof WeakSet=="function"?WeakSet:Set,X=null;function Ao(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){gt(t,e,r)}else n.current=null}function lu(t,e,n){try{n()}catch(r){gt(t,e,r)}}var Nd=!1;function y0(t,e){if(Gl=qi,t=xh(),Qu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,l=-1,u=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var x;h!==n||o!==0&&h.nodeType!==3||(l=i+o),h!==s||r!==0&&h.nodeType!==3||(u=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(x=h.firstChild)!==null;)f=h,h=x;for(;;){if(h===t)break t;if(f===n&&++c===o&&(l=i),f===s&&++d===r&&(u=i),(x=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=x}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ql={focusedElem:t,selectionRange:n},qi=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,_=y.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?b:Mn(e.type,b),_);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(w){gt(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return y=Nd,Nd=!1,y}function ws(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&lu(e,n,s)}o=o.next}while(o!==r)}}function _a(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function uu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function mp(t){var e=t.alternate;e!==null&&(t.alternate=null,mp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[er],delete e[Bs],delete e[Jl],delete e[Zg],delete e[e0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gp(t){return t.tag===5||t.tag===3||t.tag===4}function Dd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ji));else if(r!==4&&(t=t.child,t!==null))for(cu(t,e,n),t=t.sibling;t!==null;)cu(t,e,n),t=t.sibling}function du(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(du(t,e,n),t=t.sibling;t!==null;)du(t,e,n),t=t.sibling}var Mt=null,Bn=!1;function xr(t,e,n){for(n=n.child;n!==null;)yp(t,e,n),n=n.sibling}function yp(t,e,n){if(nr&&typeof nr.onCommitFiberUnmount=="function")try{nr.onCommitFiberUnmount(ma,n)}catch{}switch(n.tag){case 5:Gt||Ao(n,e);case 6:var r=Mt,o=Bn;Mt=null,xr(t,e,n),Mt=r,Bn=o,Mt!==null&&(Bn?(t=Mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mt.removeChild(n.stateNode));break;case 18:Mt!==null&&(Bn?(t=Mt,n=n.stateNode,t.nodeType===8?el(t.parentNode,n):t.nodeType===1&&el(t,n),Ps(t)):el(Mt,n.stateNode));break;case 4:r=Mt,o=Bn,Mt=n.stateNode.containerInfo,Bn=!0,xr(t,e,n),Mt=r,Bn=o;break;case 0:case 11:case 14:case 15:if(!Gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&lu(n,e,i),o=o.next}while(o!==r)}xr(t,e,n);break;case 1:if(!Gt&&(Ao(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){gt(n,e,l)}xr(t,e,n);break;case 21:xr(t,e,n);break;case 22:n.mode&1?(Gt=(r=Gt)||n.memoizedState!==null,xr(t,e,n),Gt=r):xr(t,e,n);break;default:xr(t,e,n)}}function Ad(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new g0),e.forEach(function(r){var o=j0.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function $n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:Mt=l.stateNode,Bn=!1;break e;case 3:Mt=l.stateNode.containerInfo,Bn=!0;break e;case 4:Mt=l.stateNode.containerInfo,Bn=!0;break e}l=l.return}if(Mt===null)throw Error(B(160));yp(s,i,o),Mt=null,Bn=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(c){gt(o,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vp(e,t),e=e.sibling}function vp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($n(e,t),Yn(t),r&4){try{ws(3,t,t.return),_a(3,t)}catch(b){gt(t,t.return,b)}try{ws(5,t,t.return)}catch(b){gt(t,t.return,b)}}break;case 1:$n(e,t),Yn(t),r&512&&n!==null&&Ao(n,n.return);break;case 5:if($n(e,t),Yn(t),r&512&&n!==null&&Ao(n,n.return),t.flags&32){var o=t.stateNode;try{Ds(o,"")}catch(b){gt(t,t.return,b)}}if(r&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Uf(o,s),Ll(l,i);var c=Ll(l,s);for(i=0;i<u.length;i+=2){var d=u[i],h=u[i+1];d==="style"?Gf(o,h):d==="dangerouslySetInnerHTML"?Wf(o,h):d==="children"?Ds(o,h):Mu(o,d,h,c)}switch(l){case"input":Dl(o,s);break;case"textarea":zf(o,s);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var x=s.value;x!=null?Oo(o,!!s.multiple,x,!1):f!==!!s.multiple&&(s.defaultValue!=null?Oo(o,!!s.multiple,s.defaultValue,!0):Oo(o,!!s.multiple,s.multiple?[]:"",!1))}o[Bs]=s}catch(b){gt(t,t.return,b)}}break;case 6:if($n(e,t),Yn(t),r&4){if(t.stateNode===null)throw Error(B(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(b){gt(t,t.return,b)}}break;case 3:if($n(e,t),Yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ps(e.containerInfo)}catch(b){gt(t,t.return,b)}break;case 4:$n(e,t),Yn(t);break;case 13:$n(e,t),Yn(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(yc=bt())),r&4&&Ad(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Gt=(c=Gt)||d,$n(e,t),Gt=c):$n(e,t),Yn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(X=t,d=t.child;d!==null;){for(h=X=d;X!==null;){switch(f=X,x=f.child,f.tag){case 0:case 11:case 14:case 15:ws(4,f,f.return);break;case 1:Ao(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(b){gt(r,n,b)}}break;case 5:Ao(f,f.return);break;case 22:if(f.memoizedState!==null){Od(h);continue}}x!==null?(x.return=f,X=x):Od(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{o=h.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,u=h.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Vf("display",i))}catch(b){gt(t,t.return,b)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(b){gt(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:$n(e,t),Yn(t),r&4&&Ad(t);break;case 21:break;default:$n(e,t),Yn(t)}}function Yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gp(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Ds(o,""),r.flags&=-33);var s=Dd(t);du(t,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,l=Dd(t);cu(t,l,i);break;default:throw Error(B(161))}}catch(u){gt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function v0(t,e,n){X=t,xp(t)}function xp(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var o=X,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||yi;if(!i){var l=o.alternate,u=l!==null&&l.memoizedState!==null||Gt;l=yi;var c=Gt;if(yi=i,(Gt=u)&&!c)for(X=o;X!==null;)i=X,u=i.child,i.tag===22&&i.memoizedState!==null?Pd(o):u!==null?(u.return=i,X=u):Pd(o);for(;s!==null;)X=s,xp(s),s=s.sibling;X=o,yi=l,Gt=c}Td(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,X=s):Td(t)}}function Td(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gt||_a(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Gt)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Mn(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gd(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gd(e,i,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ps(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Gt||e.flags&512&&uu(e)}catch(f){gt(e,e.return,f)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Od(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function Pd(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_a(4,e)}catch(u){gt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(u){gt(e,o,u)}}var s=e.return;try{uu(e)}catch(u){gt(e,s,u)}break;case 5:var i=e.return;try{uu(e)}catch(u){gt(e,i,u)}}}catch(u){gt(e,e.return,u)}if(e===t){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var x0=Math.ceil,ia=yr.ReactCurrentDispatcher,mc=yr.ReactCurrentOwner,Dn=yr.ReactCurrentBatchConfig,We=0,Pt=null,_t=null,Bt=0,bn=0,To=zr(0),Rt=0,Gs=null,oo=0,ka=0,gc=0,Ss=null,fn=null,yc=0,Go=1/0,sr=null,aa=!1,fu=null,Lr=null,vi=!1,Nr=null,la=0,_s=0,hu=null,Mi=-1,Bi=0;function en(){return We&6?bt():Mi!==-1?Mi:Mi=bt()}function $r(t){return t.mode&1?We&2&&Bt!==0?Bt&-Bt:n0.transition!==null?(Bi===0&&(Bi=rh()),Bi):(t=Ze,t!==0||(t=window.event,t=t===void 0?16:ch(t.type)),t):1}function Vn(t,e,n,r){if(50<_s)throw _s=0,hu=null,Error(B(185));Js(t,n,r),(!(We&2)||t!==Pt)&&(t===Pt&&(!(We&2)&&(ka|=n),Rt===4&&jr(t,Bt)),yn(t,r),n===1&&We===0&&!(e.mode&1)&&(Go=bt()+500,ba&&Fr()))}function yn(t,e){var n=t.callbackNode;ng(t,e);var r=Gi(t,t===Pt?Bt:0);if(r===0)n!==null&&Wc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Wc(n),e===1)t.tag===0?t0(Ld.bind(null,t)):Nh(Ld.bind(null,t)),Qg(function(){!(We&6)&&Fr()}),n=null;else{switch(oh(r)){case 1:n=Wu;break;case 4:n=th;break;case 16:n=Vi;break;case 536870912:n=nh;break;default:n=Vi}n=Cp(n,bp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bp(t,e){if(Mi=-1,Bi=0,We&6)throw Error(B(327));var n=t.callbackNode;if(Mo()&&t.callbackNode!==n)return null;var r=Gi(t,t===Pt?Bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ua(t,r);else{e=r;var o=We;We|=2;var s=Sp();(Pt!==t||Bt!==e)&&(sr=null,Go=bt()+500,Zr(t,e));do try{S0();break}catch(l){wp(t,l)}while(!0);nc(),ia.current=s,We=o,_t!==null?e=0:(Pt=null,Bt=0,e=Rt)}if(e!==0){if(e===2&&(o=Ul(t),o!==0&&(r=o,e=pu(t,o))),e===1)throw n=Gs,Zr(t,0),jr(t,r),yn(t,bt()),n;if(e===6)jr(t,r);else{if(o=t.current.alternate,!(r&30)&&!b0(o)&&(e=ua(t,r),e===2&&(s=Ul(t),s!==0&&(r=s,e=pu(t,s))),e===1))throw n=Gs,Zr(t,0),jr(t,r),yn(t,bt()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Hr(t,fn,sr);break;case 3:if(jr(t,r),(r&130023424)===r&&(e=yc+500-bt(),10<e)){if(Gi(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){en(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Kl(Hr.bind(null,t,fn,sr),e);break}Hr(t,fn,sr);break;case 4:if(jr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var i=31-Wn(r);s=1<<i,i=e[i],i>o&&(o=i),r&=~s}if(r=o,r=bt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*x0(r/1960))-r,10<r){t.timeoutHandle=Kl(Hr.bind(null,t,fn,sr),r);break}Hr(t,fn,sr);break;case 5:Hr(t,fn,sr);break;default:throw Error(B(329))}}}return yn(t,bt()),t.callbackNode===n?bp.bind(null,t):null}function pu(t,e){var n=Ss;return t.current.memoizedState.isDehydrated&&(Zr(t,e).flags|=256),t=ua(t,e),t!==2&&(e=fn,fn=n,e!==null&&mu(e)),t}function mu(t){fn===null?fn=t:fn.push.apply(fn,t)}function b0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Gn(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jr(t,e){for(e&=~gc,e&=~ka,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wn(e),r=1<<n;t[n]=-1,e&=~r}}function Ld(t){if(We&6)throw Error(B(327));Mo();var e=Gi(t,0);if(!(e&1))return yn(t,bt()),null;var n=ua(t,e);if(t.tag!==0&&n===2){var r=Ul(t);r!==0&&(e=r,n=pu(t,r))}if(n===1)throw n=Gs,Zr(t,0),jr(t,e),yn(t,bt()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hr(t,fn,sr),yn(t,bt()),null}function vc(t,e){var n=We;We|=1;try{return t(e)}finally{We=n,We===0&&(Go=bt()+500,ba&&Fr())}}function so(t){Nr!==null&&Nr.tag===0&&!(We&6)&&Mo();var e=We;We|=1;var n=Dn.transition,r=Ze;try{if(Dn.transition=null,Ze=1,t)return t()}finally{Ze=r,Dn.transition=n,We=e,!(We&6)&&Fr()}}function xc(){bn=To.current,at(To)}function Zr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Yg(n)),_t!==null)for(n=_t.return;n!==null;){var r=n;switch(Zu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yi();break;case 3:Wo(),at(mn),at(qt),lc();break;case 5:ac(r);break;case 4:Wo();break;case 13:at(ft);break;case 19:at(ft);break;case 10:rc(r.type._context);break;case 22:case 23:xc()}n=n.return}if(Pt=t,_t=t=Ir(t.current,null),Bt=bn=e,Rt=0,Gs=null,gc=ka=oo=0,fn=Ss=null,Qr!==null){for(e=0;e<Qr.length;e++)if(n=Qr[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}Qr=null}return t}function wp(t,e){do{var n=_t;try{if(nc(),Li.current=sa,oa){for(var r=ht.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}oa=!1}if(ro=0,Ot=Ct=ht=null,bs=!1,Fs=0,mc.current=null,n===null||n.return===null){Rt=1,Gs=e,_t=null;break}e:{var s=t,i=n.return,l=n,u=e;if(e=Bt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=Sd(i);if(x!==null){x.flags&=-257,_d(x,i,l,s,e),x.mode&1&&wd(s,c,e),e=x,u=c;var y=e.updateQueue;if(y===null){var b=new Set;b.add(u),e.updateQueue=b}else y.add(u);break e}else{if(!(e&1)){wd(s,c,e),bc();break e}u=Error(B(426))}}else if(ut&&l.mode&1){var _=Sd(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),_d(_,i,l,s,e),ec(Vo(u,l));break e}}s=u=Vo(u,l),Rt!==4&&(Rt=2),Ss===null?Ss=[s]:Ss.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=op(s,u,e);md(s,p);break e;case 1:l=u;var m=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Lr===null||!Lr.has(g)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=sp(s,l,e);md(s,w);break e}}s=s.return}while(s!==null)}kp(n)}catch(j){e=j,_t===n&&n!==null&&(_t=n=n.return);continue}break}while(!0)}function Sp(){var t=ia.current;return ia.current=sa,t===null?sa:t}function bc(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Pt===null||!(oo&268435455)&&!(ka&268435455)||jr(Pt,Bt)}function ua(t,e){var n=We;We|=2;var r=Sp();(Pt!==t||Bt!==e)&&(sr=null,Zr(t,e));do try{w0();break}catch(o){wp(t,o)}while(!0);if(nc(),We=n,ia.current=r,_t!==null)throw Error(B(261));return Pt=null,Bt=0,Rt}function w0(){for(;_t!==null;)_p(_t)}function S0(){for(;_t!==null&&!Hm();)_p(_t)}function _p(t){var e=jp(t.alternate,t,bn);t.memoizedProps=t.pendingProps,e===null?kp(t):_t=e,mc.current=null}function kp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=m0(n,e),n!==null){n.flags&=32767,_t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rt=6,_t=null;return}}else if(n=p0(n,e,bn),n!==null){_t=n;return}if(e=e.sibling,e!==null){_t=e;return}_t=e=t}while(e!==null);Rt===0&&(Rt=5)}function Hr(t,e,n){var r=Ze,o=Dn.transition;try{Dn.transition=null,Ze=1,_0(t,e,n,r)}finally{Dn.transition=o,Ze=r}return null}function _0(t,e,n,r){do Mo();while(Nr!==null);if(We&6)throw Error(B(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(rg(t,s),t===Pt&&(_t=Pt=null,Bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vi||(vi=!0,Cp(Vi,function(){return Mo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dn.transition,Dn.transition=null;var i=Ze;Ze=1;var l=We;We|=4,mc.current=null,y0(t,n),vp(n,t),Wg(ql),qi=!!Gl,ql=Gl=null,t.current=n,v0(n),Km(),We=l,Ze=i,Dn.transition=s}else t.current=n;if(vi&&(vi=!1,Nr=t,la=o),s=t.pendingLanes,s===0&&(Lr=null),Qm(n.stateNode),yn(t,bt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(aa)throw aa=!1,t=fu,fu=null,t;return la&1&&t.tag!==0&&Mo(),s=t.pendingLanes,s&1?t===hu?_s++:(_s=0,hu=t):_s=0,Fr(),null}function Mo(){if(Nr!==null){var t=oh(la),e=Dn.transition,n=Ze;try{if(Dn.transition=null,Ze=16>t?16:t,Nr===null)var r=!1;else{if(t=Nr,Nr=null,la=0,We&6)throw Error(B(331));var o=We;for(We|=4,X=t.current;X!==null;){var s=X,i=s.child;if(X.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(X=c;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:ws(8,d,s)}var h=d.child;if(h!==null)h.return=d,X=h;else for(;X!==null;){d=X;var f=d.sibling,x=d.return;if(mp(d),d===c){X=null;break}if(f!==null){f.return=x,X=f;break}X=x}}}var y=s.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var _=b.sibling;b.sibling=null,b=_}while(b!==null)}}X=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,X=i;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ws(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,X=p;break e}X=s.return}}var m=t.current;for(X=m;X!==null;){i=X;var g=i.child;if(i.subtreeFlags&2064&&g!==null)g.return=i,X=g;else e:for(i=m;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_a(9,l)}}catch(j){gt(l,l.return,j)}if(l===i){X=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,X=w;break e}X=l.return}}if(We=o,Fr(),nr&&typeof nr.onPostCommitFiberRoot=="function")try{nr.onPostCommitFiberRoot(ma,t)}catch{}r=!0}return r}finally{Ze=n,Dn.transition=e}}return!1}function $d(t,e,n){e=Vo(n,e),e=op(t,e,1),t=Pr(t,e,1),e=en(),t!==null&&(Js(t,1,e),yn(t,e))}function gt(t,e,n){if(t.tag===3)$d(t,t,n);else for(;e!==null;){if(e.tag===3){$d(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Lr===null||!Lr.has(r))){t=Vo(n,t),t=sp(e,t,1),e=Pr(e,t,1),t=en(),e!==null&&(Js(e,1,t),yn(e,t));break}}e=e.return}}function k0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&n,Pt===t&&(Bt&n)===n&&(Rt===4||Rt===3&&(Bt&130023424)===Bt&&500>bt()-yc?Zr(t,0):gc|=n),yn(t,e)}function Ep(t,e){e===0&&(t.mode&1?(e=li,li<<=1,!(li&130023424)&&(li=4194304)):e=1);var n=en();t=pr(t,e),t!==null&&(Js(t,e,n),yn(t,n))}function E0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ep(t,n)}function j0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),Ep(t,n)}var jp;jp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mn.current)pn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pn=!1,h0(t,e,n);pn=!!(t.flags&131072)}else pn=!1,ut&&e.flags&1048576&&Dh(e,Zi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ii(t,e),t=e.pendingProps;var o=Uo(e,qt.current);Io(e,n),o=cc(null,e,r,t,o,n);var s=dc();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gn(r)?(s=!0,Qi(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,sc(e),o.updater=Sa,e.stateNode=o,o._reactInternals=e,tu(e,r,t,n),e=ou(null,e,r,!0,s,n)):(e.tag=0,ut&&s&&Xu(e),Qt(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ii(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=R0(r),t=Mn(r,t),o){case 0:e=ru(null,e,r,t,n);break e;case 1:e=jd(null,e,r,t,n);break e;case 11:e=kd(null,e,r,t,n);break e;case 14:e=Ed(null,e,r,Mn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Mn(r,o),ru(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Mn(r,o),jd(t,e,r,o,n);case 3:e:{if(up(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,o=s.element,$h(t,e),na(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Vo(Error(B(423)),e),e=Cd(t,e,r,n,o);break e}else if(r!==o){o=Vo(Error(B(424)),e),e=Cd(t,e,r,n,o);break e}else for(wn=Or(e.stateNode.containerInfo.firstChild),Sn=e,ut=!0,zn=null,n=Ph(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zo(),r===o){e=mr(t,e,n);break e}Qt(t,e,r,n)}e=e.child}return e;case 5:return Ih(e),t===null&&Xl(e),r=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,i=o.children,Hl(r,o)?i=null:s!==null&&Hl(r,s)&&(e.flags|=32),lp(t,e),Qt(t,e,i,n),e.child;case 6:return t===null&&Xl(e),null;case 13:return cp(t,e,n);case 4:return ic(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fo(e,null,r,n):Qt(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Mn(r,o),kd(t,e,r,o,n);case 7:return Qt(t,e,e.pendingProps,n),e.child;case 8:return Qt(t,e,e.pendingProps.children,n),e.child;case 12:return Qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,s=e.memoizedProps,i=o.value,st(ea,r._currentValue),r._currentValue=i,s!==null)if(Gn(s.value,i)){if(s.children===o.children&&!mn.current){e=mr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=dr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Zl(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(B(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Zl(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Qt(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Io(e,n),o=Tn(o),r=r(o),e.flags|=1,Qt(t,e,r,n),e.child;case 14:return r=e.type,o=Mn(r,e.pendingProps),o=Mn(r.type,o),Ed(t,e,r,o,n);case 15:return ip(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Mn(r,o),Ii(t,e),e.tag=1,gn(r)?(t=!0,Qi(e)):t=!1,Io(e,n),rp(e,r,o),tu(e,r,o,n),ou(null,e,r,!0,t,n);case 19:return dp(t,e,n);case 22:return ap(t,e,n)}throw Error(B(156,e.tag))};function Cp(t,e){return eh(t,e)}function C0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,r){return new C0(t,e,n,r)}function wc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function R0(t){if(typeof t=="function")return wc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uu)return 11;if(t===zu)return 14}return 2}function Ir(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ui(t,e,n,r,o,s){var i=2;if(r=t,typeof t=="function")wc(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case So:return eo(n.children,o,s,e);case Bu:i=8,o|=8;break;case El:return t=Nn(12,n,e,o|2),t.elementType=El,t.lanes=s,t;case jl:return t=Nn(13,n,e,o),t.elementType=jl,t.lanes=s,t;case Cl:return t=Nn(19,n,e,o),t.elementType=Cl,t.lanes=s,t;case If:return Ea(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Lf:i=10;break e;case $f:i=9;break e;case Uu:i=11;break e;case zu:i=14;break e;case _r:i=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Nn(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function eo(t,e,n,r){return t=Nn(7,t,r,e),t.lanes=n,t}function Ea(t,e,n,r){return t=Nn(22,t,r,e),t.elementType=If,t.lanes=n,t.stateNode={isHidden:!1},t}function ll(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function ul(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function N0(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wa(0),this.expirationTimes=Wa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wa(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Sc(t,e,n,r,o,s,i,l,u){return t=new N0(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sc(s),t}function D0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Rp(t){if(!t)return Br;t=t._reactInternals;e:{if(uo(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(gn(n))return Rh(t,n,e)}return e}function Np(t,e,n,r,o,s,i,l,u){return t=Sc(n,r,!0,t,o,s,i,l,u),t.context=Rp(null),n=t.current,r=en(),o=$r(n),s=dr(r,o),s.callback=e??null,Pr(n,s,o),t.current.lanes=o,Js(t,o,r),yn(t,r),t}function ja(t,e,n,r){var o=e.current,s=en(),i=$r(o);return n=Rp(n),e.context===null?e.context=n:e.pendingContext=n,e=dr(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Pr(o,e,i),t!==null&&(Vn(t,o,i,s),Pi(t,o,i)),i}function ca(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Id(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _c(t,e){Id(t,e),(t=t.alternate)&&Id(t,e)}function A0(){return null}var Dp=typeof reportError=="function"?reportError:function(t){console.error(t)};function kc(t){this._internalRoot=t}Ca.prototype.render=kc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));ja(t,e,null,null)};Ca.prototype.unmount=kc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;so(function(){ja(null,t,null,null)}),e[hr]=null}};function Ca(t){this._internalRoot=t}Ca.prototype.unstable_scheduleHydration=function(t){if(t){var e=ah();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Er.length&&e!==0&&e<Er[n].priority;n++);Er.splice(n,0,t),n===0&&uh(t)}};function Ec(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ra(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Md(){}function T0(t,e,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=ca(i);s.call(c)}}var i=Np(e,r,t,0,null,!1,!1,"",Md);return t._reactRootContainer=i,t[hr]=i.current,Is(t.nodeType===8?t.parentNode:t),so(),i}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var c=ca(u);l.call(c)}}var u=Sc(t,0,!1,null,null,!1,!1,"",Md);return t._reactRootContainer=u,t[hr]=u.current,Is(t.nodeType===8?t.parentNode:t),so(function(){ja(e,u,n,r)}),u}function Na(t,e,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var l=o;o=function(){var u=ca(i);l.call(u)}}ja(e,i,t,o)}else i=T0(n,e,t,o,r);return ca(i)}sh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fs(e.pendingLanes);n!==0&&(Vu(e,n|1),yn(e,bt()),!(We&6)&&(Go=bt()+500,Fr()))}break;case 13:so(function(){var r=pr(t,1);if(r!==null){var o=en();Vn(r,t,1,o)}}),_c(t,1)}};Gu=function(t){if(t.tag===13){var e=pr(t,134217728);if(e!==null){var n=en();Vn(e,t,134217728,n)}_c(t,134217728)}};ih=function(t){if(t.tag===13){var e=$r(t),n=pr(t,e);if(n!==null){var r=en();Vn(n,t,e,r)}_c(t,e)}};ah=function(){return Ze};lh=function(t,e){var n=Ze;try{return Ze=t,e()}finally{Ze=n}};Il=function(t,e,n){switch(e){case"input":if(Dl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=xa(r);if(!o)throw Error(B(90));Bf(r),Dl(r,o)}}}break;case"textarea":zf(t,n);break;case"select":e=n.value,e!=null&&Oo(t,!!n.multiple,e,!1)}};Kf=vc;Jf=so;var O0={usingClientEntryPoint:!1,Events:[Qs,jo,xa,qf,Hf,vc]},as={findFiberByHostInstance:Yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},P0={bundleType:as.bundleType,version:as.version,rendererPackageName:as.rendererPackageName,rendererConfig:as.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xf(t),t===null?null:t.stateNode},findFiberByHostInstance:as.findFiberByHostInstance||A0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xi.isDisabled&&xi.supportsFiber)try{ma=xi.inject(P0),nr=xi}catch{}}kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O0;kn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ec(e))throw Error(B(200));return D0(t,e,null,n)};kn.createRoot=function(t,e){if(!Ec(t))throw Error(B(299));var n=!1,r="",o=Dp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Sc(t,1,!1,null,null,n,!1,r,o),t[hr]=e.current,Is(t.nodeType===8?t.parentNode:t),new kc(e)};kn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=Xf(e),t=t===null?null:t.stateNode,t};kn.flushSync=function(t){return so(t)};kn.hydrate=function(t,e,n){if(!Ra(e))throw Error(B(200));return Na(null,t,e,!0,n)};kn.hydrateRoot=function(t,e,n){if(!Ec(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=Dp;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=Np(e,null,t,1,n??null,o,!1,s,i),t[hr]=e.current,Is(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Ca(e)};kn.render=function(t,e,n){if(!Ra(e))throw Error(B(200));return Na(null,t,e,!1,n)};kn.unmountComponentAtNode=function(t){if(!Ra(t))throw Error(B(40));return t._reactRootContainer?(so(function(){Na(null,null,t,!1,function(){t._reactRootContainer=null,t[hr]=null})}),!0):!1};kn.unstable_batchedUpdates=vc;kn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ra(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Na(t,e,n,!1,r)};kn.version="18.3.1-next-f1338f8080-20240426";function Ap(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ap)}catch(t){console.error(t)}}Ap(),Af.exports=kn;var L0=Af.exports,Bd=L0;_l.createRoot=Bd.createRoot,_l.hydrateRoot=Bd.hydrateRoot;const $0="modulepreload",I0=function(t){return"/"+t},Ud={},Zs=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(u=>{if(u=I0(u),u in Ud)return;Ud[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":$0,c||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((f,x)=>{h.addEventListener("load",f),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},M0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zs(async()=>{const{default:r}=await Promise.resolve().then(()=>Yo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class jc extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class B0 extends jc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class zd extends jc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Fd extends jc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(gu||(gu={}));var U0=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class z0{constructor(e,{headers:n={},customFetch:r,region:o=gu.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=M0(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return U0(this,void 0,void 0,function*(){try{const{headers:o,method:s,body:i}=n;let l={},{region:u}=n;u||(u=this.region);const c=new URL(`${this.url}/${e}`);u&&u!=="any"&&(l["x-region"]=u,c.searchParams.set("forceFunctionRegion",u));let d;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const h=yield this.fetch(c.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),o),body:d}).catch(b=>{throw new B0(b)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new zd(h);if(!h.ok)throw new Fd(h);let x=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return x==="application/json"?y=yield h.json():x==="application/octet-stream"?y=yield h.blob():x==="text/event-stream"?y=h:x==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(o){return{data:null,error:o,response:o instanceof Fd||o instanceof zd?o.context:void 0}}})}}var hn={},Cc={},Da={},ei={},Aa={},Ta={},F0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},qo=F0();const W0=qo.fetch,Tp=qo.fetch.bind(qo),Op=qo.Headers,V0=qo.Request,G0=qo.Response,Yo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Op,Request:V0,Response:G0,default:Tp,fetch:W0},Symbol.toStringTag,{value:"Module"})),q0=um(Yo);var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});let H0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Oa.default=H0;var Pp=An&&An.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ta,"__esModule",{value:!0});const K0=Pp(q0),J0=Pp(Oa);let Y0=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=K0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let o=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var i,l,u,c;let d=null,h=null,f=null,x=s.status,y=s.statusText;if(s.ok){if(this.method!=="HEAD"){const m=await s.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?h=m:h=JSON.parse(m))}const _=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),p=(u=s.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");_&&p&&p.length>1&&(f=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,x=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const _=await s.text();try{d=JSON.parse(_),Array.isArray(d)&&s.status===404&&(h=[],d=null,x=200,y="OK")}catch{s.status===404&&_===""?(x=204,y="No Content"):d={message:_}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,x=200,y="OK"),d&&this.shouldThrowOnError)throw new J0.default(d)}return{error:d,data:h,count:f,status:x,statusText:y}});return this.shouldThrowOnError||(o=o.catch(s=>{var i,l,u;return{error:{message:`${(i=s==null?void 0:s.name)!==null&&i!==void 0?i:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(u=s==null?void 0:s.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}};Ta.default=Y0;var Q0=An&&An.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Aa,"__esModule",{value:!0});const X0=Q0(Ta);let Z0=class extends X0.default{select(e){let n=!1;const r=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:o,referencedTable:s=o}={}){const i=s?`${s}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:o=r}={}){const s=typeof o>"u"?"offset":`${o}.offset`,i=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:o=!1,wal:s=!1,format:i="text"}={}){var l;const u=[e?"analyze":null,n?"verbose":null,r?"settings":null,o?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${u};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Aa.default=Z0;var ey=An&&An.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ei,"__esModule",{value:!0});const ty=ey(Aa);let ny=class extends ty.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:o}={}){let s="";o==="plain"?s="pl":o==="phrase"?s="ph":o==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};ei.default=ny;var ry=An&&An.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Da,"__esModule",{value:!0});const ls=ry(ei);let oy=class{constructor(e,{headers:n={},schema:r,fetch:o}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=o}select(e,{head:n=!1,count:r}={}){const o=n?"HEAD":"GET";let s=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new ls.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var o;const s="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(i.length>0){const l=[...new Set(i)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new ls.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:o,defaultToNull:s=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),o&&this.headers.append("Prefer",`count=${o}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new ls.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:n}={}){var r;const o="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new ls.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new ls.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Da.default=oy;var Lp=An&&An.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cc,"__esModule",{value:!0});const sy=Lp(Da),iy=Lp(ei);let ay=class $p{constructor(e,{headers:n={},schema:r,fetch:o}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=o}from(e){const n=new URL(`${this.url}/${e}`);return new sy.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new $p(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:o=!1,count:s}={}){var i;let l;const u=new URL(`${this.url}/rpc/${e}`);let c;r||o?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{u.searchParams.append(h,f)})):(l="POST",c=n);const d=new Headers(this.headers);return s&&d.set("Prefer",`count=${s}`),new iy.default({method:l,url:u,headers:d,schema:this.schemaName,body:c,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};Cc.default=ay;var Qo=An&&An.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hn,"__esModule",{value:!0});hn.PostgrestError=hn.PostgrestBuilder=hn.PostgrestTransformBuilder=hn.PostgrestFilterBuilder=hn.PostgrestQueryBuilder=hn.PostgrestClient=void 0;const Ip=Qo(Cc);hn.PostgrestClient=Ip.default;const Mp=Qo(Da);hn.PostgrestQueryBuilder=Mp.default;const Bp=Qo(ei);hn.PostgrestFilterBuilder=Bp.default;const Up=Qo(Aa);hn.PostgrestTransformBuilder=Up.default;const zp=Qo(Ta);hn.PostgrestBuilder=zp.default;const Fp=Qo(Oa);hn.PostgrestError=Fp.default;var ly=hn.default={PostgrestClient:Ip.default,PostgrestQueryBuilder:Mp.default,PostgrestFilterBuilder:Bp.default,PostgrestTransformBuilder:Up.default,PostgrestBuilder:zp.default,PostgrestError:Fp.default};const{PostgrestClient:uy,PostgrestQueryBuilder:ub,PostgrestFilterBuilder:cb,PostgrestTransformBuilder:db,PostgrestBuilder:fb,PostgrestError:hb}=ly;class cy{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const dy="2.15.5",fy=`realtime-js/${dy}`,hy="1.0.0",yu=1e4,py=1e3,my=100;var ks;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ks||(ks={}));var Et;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Et||(Et={}));var Un;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Un||(Un={}));var vu;(function(t){t.websocket="websocket"})(vu||(vu={}));var Jr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Jr||(Jr={}));class gy{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const o=n.getUint8(1),s=n.getUint8(2);let i=this.HEADER_LENGTH+2;const l=r.decode(e.slice(i,i+o));i=i+o;const u=r.decode(e.slice(i,i+s));i=i+s;const c=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:u,payload:c}}}class Wp{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ot;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ot||(ot={}));const Wd=(t,e,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,i)=>(s[i]=yy(i,t,e,o),s),{})},yy=(t,e,n,r)=>{const o=e.find(l=>l.name===t),s=o==null?void 0:o.type,i=n[t];return s&&!r.includes(s)?Vp(s,i):xu(i)},Vp=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return wy(e,n)}switch(t){case ot.bool:return vy(e);case ot.float4:case ot.float8:case ot.int2:case ot.int4:case ot.int8:case ot.numeric:case ot.oid:return xy(e);case ot.json:case ot.jsonb:return by(e);case ot.timestamp:return Sy(e);case ot.abstime:case ot.date:case ot.daterange:case ot.int4range:case ot.int8range:case ot.money:case ot.reltime:case ot.text:case ot.time:case ot.timestamptz:case ot.timetz:case ot.tsrange:case ot.tstzrange:return xu(e);default:return xu(e)}},xu=t=>t,vy=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},xy=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},by=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},wy=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const i=t.slice(1,n);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(l=>Vp(e,l))}return t},Sy=t=>typeof t=="string"?t.replace(" ","T"):t,Gp=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class cl{constructor(e,n,r={},o=yu){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Vd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Vd||(Vd={}));class Es{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:s,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Es.syncState(this.state,o,s,i),this.pendingDiffs.forEach(u=>{this.state=Es.syncDiff(this.state,u,s,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},o=>{const{onJoin:s,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Es.syncDiff(this.state,o,s,i),l())}),this.onJoin((o,s,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:s,newPresences:i})}),this.onLeave((o,s,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:s,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){const s=this.cloneDeep(e),i=this.transformState(n),l={},u={};return this.map(s,(c,d)=>{i[c]||(u[c]=d)}),this.map(i,(c,d)=>{const h=s[c];if(h){const f=d.map(_=>_.presence_ref),x=h.map(_=>_.presence_ref),y=d.filter(_=>x.indexOf(_.presence_ref)<0),b=h.filter(_=>f.indexOf(_.presence_ref)<0);y.length>0&&(l[c]=y),b.length>0&&(u[c]=b)}else l[c]=d}),this.syncDiff(s,{joins:l,leaves:u},r,o)}static syncDiff(e,n,r,o){const{joins:s,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(s,(l,u)=>{var c;const d=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(u),d.length>0){const h=e[l].map(x=>x.presence_ref),f=d.filter(x=>h.indexOf(x.presence_ref)<0);e[l].unshift(...f)}r(l,d,u)}),this.map(i,(l,u)=>{let c=e[l];if(!c)return;const d=u.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=c,o(l,c,u),c.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const o=e[r];return"metas"in o?n[r]=o.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Gd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Gd||(Gd={}));var js;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(js||(js={}));var ir;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ir||(ir={}));class Rc{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new cl(this,Un.join,this.params,this.timeout),this.rejoinTimer=new Wp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Et.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Un.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new Es(this),this.broadcastEndpointURL=Gp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,o,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Et.closed){const{config:{broadcast:i,presence:l,private:u}}=this.params,c=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(x=>x.filter))!==null&&o!==void 0?o:[],d=!!this.bindings[js.PRESENCE]&&this.bindings[js.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(x=>e==null?void 0:e(ir.CHANNEL_ERROR,x)),this._onClose(()=>e==null?void 0:e(ir.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:x})=>{var y;if(this.socket.setAuth(),x===void 0){e==null||e(ir.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,_=(y=b==null?void 0:b.length)!==null&&y!==void 0?y:0,p=[];for(let m=0;m<_;m++){const g=b[m],{filter:{event:w,schema:j,table:N,filter:R}}=g,S=x&&x[m];if(S&&S.event===w&&S.schema===j&&S.table===N&&S.filter===R)p.push(Object.assign(Object.assign({},g),{id:S.id}));else{this.unsubscribe(),this.state=Et.errored,e==null||e(ir.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(ir.SUBSCRIBED);return}}).receive("error",x=>{this.state=Et.errored,e==null||e(ir.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ir.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Et.joined&&e===js.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:i}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=c.body)===null||o===void 0?void 0:o.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var i,l,u;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Et.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Un.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new cl(this,Un.leave,{},e),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Et.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const o=new AbortController,s=setTimeout(()=>o.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(s),i}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new cl(this,e,n,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>my){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,s;const i=e.toLocaleLowerCase(),{close:l,error:u,leave:c,join:d}=Un;if(r&&[l,u,c,d].indexOf(i)>=0&&r!==this._joinRef())return;let f=this._onMessage(i,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(x=>{var y,b,_;return((y=x.filter)===null||y===void 0?void 0:y.event)==="*"||((_=(b=x.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===i}).map(x=>x.callback(f,r)):(s=this.bindings[i])===null||s===void 0||s.filter(x=>{var y,b,_,p,m,g;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in x){const w=x.id,j=(y=x.filter)===null||y===void 0?void 0:y.event;return w&&((b=n.ids)===null||b===void 0?void 0:b.includes(w))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const w=(m=(p=x==null?void 0:x.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return w==="*"||w===((g=n==null?void 0:n.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===i}).map(x=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:b,table:_,commit_timestamp:p,type:m,errors:g}=y;f=Object.assign(Object.assign({},{schema:b,table:_,commit_timestamp:p,eventType:m,new:{},old:{},errors:g}),this._getPayloadRecords(y))}x.callback(f,r)})}_isClosed(){return this.state===Et.closed}_isJoined(){return this.state===Et.joined}_isJoining(){return this.state===Et.joining}_isLeaving(){return this.state===Et.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const o=e.toLocaleLowerCase(),s={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(s):this.bindings[o]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var s;return!(((s=o.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Rc.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Un.close,{},e)}_onError(e){this._on(Un.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Et.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Wd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Wd(e.columns,e.old_record)),n}}const dl=()=>{},bi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},_y=[1e3,2e3,5e3,1e4],ky=1e4,Ey=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jy{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yu,this.transport=null,this.heartbeatIntervalMs=bi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dl,this.ref=0,this.reconnectTimer=null,this.logger=dl,this.conn=null,this.sendBuffer=[],this.serializer=new gy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...i)=>Zs(async()=>{const{default:l}=await Promise.resolve().then(()=>Yo);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...i)=>s(...i)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${vu.websocket}`,this.httpEndpoint=Gp(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=cy.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hy}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ks.connecting:return Jr.Connecting;case ks.open:return Jr.Open;case ks.closing:return Jr.Closing;default:return Jr.Closed}}isConnected(){return this.connectionState()===Jr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(s=>s.topic===r);if(o)return o;{const s=new Rc(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:o,ref:s}=e,i=()=>{this.encode(e,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${n} ${r} (${s})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(py,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},bi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:s,ref:i}=n,l=i?`(${i})`:"",u=s.status||"";this.log("receive",`${u} ${r} ${o} ${l}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(o,s,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Un.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${r}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Ey],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const o={access_token:n,version:fy};n&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(Un.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Wp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},bi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,o,s,i,l,u,c,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:yu,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:bi.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:dl,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:h=>_y[h-1]||ky,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Nc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function jt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Cy extends Nc{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bu extends Nc{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Ry=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const qp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zs(async()=>{const{default:r}=await Promise.resolve().then(()=>Yo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Ny=()=>Ry(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Zs(()=>Promise.resolve().then(()=>Yo),void 0)).Response:Response}),wu=t=>{if(Array.isArray(t))return t.map(n=>wu(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[o]=wu(r)}),e},Dy=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var co=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const fl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ay=(t,e,n)=>co(void 0,void 0,void 0,function*(){const r=yield Ny();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{const s=t.status||500,i=(o==null?void 0:o.statusCode)||s+"";e(new Cy(fl(o),s,i))}).catch(o=>{e(new bu(fl(o),o))}):e(new bu(fl(t),t))}),Ty=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?o:(Dy(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function ti(t,e,n,r,o,s){return co(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(n,Ty(e,r,o,s)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>i(u)).catch(u=>Ay(u,l,r))})})}function da(t,e,n,r){return co(this,void 0,void 0,function*(){return ti(t,"GET",e,n,r)})}function Zn(t,e,n,r,o){return co(this,void 0,void 0,function*(){return ti(t,"POST",e,r,o,n)})}function Su(t,e,n,r,o){return co(this,void 0,void 0,function*(){return ti(t,"PUT",e,r,o,n)})}function Oy(t,e,n,r){return co(this,void 0,void 0,function*(){return ti(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Hp(t,e,n,r,o){return co(this,void 0,void 0,function*(){return ti(t,"DELETE",e,r,o,n)})}var Jt=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const Py={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ly{constructor(e,n={},r,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=qp(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,o){return Jt(this,void 0,void 0,function*(){try{let s;const i=Object.assign(Object.assign({},qd),o);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const u=i.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),u&&s.append("metadata",this.encodeMetadata(u)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl),u&&s.append("metadata",this.encodeMetadata(u))):(s=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),o!=null&&o.headers&&(l=Object.assign(Object.assign({},l),o.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),h=yield(e=="PUT"?Su:Zn)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jt(s))return{data:null,error:s};throw s}})}upload(e,n,r){return Jt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return Jt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",n);try{let u;const c=Object.assign({upsert:qd.upsert},o),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",c.cacheControl)):(u=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield Su(this.fetch,l.toString(),u,{headers:d});return{data:{path:s,fullPath:h.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(jt(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,n){return Jt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const s=yield Zn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+s.url),l=i.searchParams.get("token");if(!l)throw new Nc("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Jt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Jt(this,void 0,void 0,function*(){try{return{data:yield Zn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(jt(o))return{data:null,error:o};throw o}})}copy(e,n,r){return Jt(this,void 0,void 0,function*(){try{return{data:{path:(yield Zn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(jt(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return Jt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),s=yield Zn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(jt(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return Jt(this,void 0,void 0,function*(){try{const o=yield Zn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${s}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(jt(o))return{data:null,error:o};throw o}})}download(e,n){return Jt(this,void 0,void 0,function*(){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=s?`?${s}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield da(this.fetch,`${this.url}/${o}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(jt(l))return{data:null,error:l};throw l}})}info(e){return Jt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield da(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:wu(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}exists(e){return Jt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Oy(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r)&&r instanceof bu){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),o=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&o.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&o.push(u);let c=o.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return Jt(this,void 0,void 0,function*(){try{return{data:yield Hp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Jt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Py),n),{prefix:e||""});return{data:yield Zn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(jt(o))return{data:null,error:o};throw o}})}listV2(e,n){return Jt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Zn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const $y="2.12.1",Iy={"X-Client-Info":`storage-js/${$y}`};var po=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class My{constructor(e,n={},r,o){this.shouldThrowOnError=!1;const s=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},Iy),n),this.fetch=qp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return po(this,void 0,void 0,function*(){try{return{data:yield da(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(jt(e))return{data:null,error:e};throw e}})}getBucket(e){return po(this,void 0,void 0,function*(){try{return{data:yield da(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return po(this,void 0,void 0,function*(){try{return{data:yield Zn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return po(this,void 0,void 0,function*(){try{return{data:yield Su(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return po(this,void 0,void 0,function*(){try{return{data:yield Zn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return po(this,void 0,void 0,function*(){try{return{data:yield Hp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jt(n))return{data:null,error:n};throw n}})}}class By extends My{constructor(e,n={},r,o){super(e,n,r,o)}from(e){return new Ly(this.url,this.headers,e,this.fetch)}}const Uy="2.57.4";let ps="";typeof Deno<"u"?ps="deno":typeof document<"u"?ps="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ps="react-native":ps="node";const zy={"X-Client-Info":`supabase-js-${ps}/${Uy}`},Fy={headers:zy},Wy={schema:"public"},Vy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Gy={};var qy=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const Hy=t=>{let e;return t?e=t:typeof fetch>"u"?e=Tp:e=fetch,(...n)=>e(...n)},Ky=()=>typeof Headers>"u"?Op:Headers,Jy=(t,e,n)=>{const r=Hy(n),o=Ky();return(s,i)=>qy(void 0,void 0,void 0,function*(){var l;const u=(l=yield e())!==null&&l!==void 0?l:t;let c=new o(i==null?void 0:i.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),r(s,Object.assign(Object.assign({},i),{headers:c}))})};var Yy=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};function Qy(t){return t.endsWith("/")?t:t+"/"}function Xy(t,e){var n,r;const{db:o,auth:s,realtime:i,global:l}=t,{db:u,auth:c,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},u),o),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Yy(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function Zy(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Qy(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Kp="2.71.1",xo=30*1e3,_u=3,hl=_u*xo,ev="http://localhost:9999",tv="supabase.auth.token",nv={"X-Client-Info":`gotrue-js/${Kp}`},ku="X-Supabase-Api-Version",Jp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},rv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ov=10*60*1e3;class Dc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function je(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class sv extends Dc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function iv(t){return je(t)&&t.name==="AuthApiError"}class Yp extends Dc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Wr extends Dc{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}}class Sr extends Wr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function av(t){return je(t)&&t.name==="AuthSessionMissingError"}class wi extends Wr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Si extends Wr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _i extends Wr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function lv(t){return je(t)&&t.name==="AuthImplicitGrantRedirectError"}class Hd extends Wr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Eu extends Wr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function pl(t){return je(t)&&t.name==="AuthRetryableFetchError"}class Kd extends Wr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ju extends Wr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const fa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Jd=` 	
\r=`.split(""),uv=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Jd.length;e+=1)t[Jd[e].charCodeAt(0)]=-2;for(let e=0;e<fa.length;e+=1)t[fa[e].charCodeAt(0)]=e;return t})();function Yd(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(fa[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(fa[r]),e.queuedBits-=6}}function Qp(t,e,n){const r=uv[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Qd(t){const e=[],n=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},s=i=>{fv(i,r,n)};for(let i=0;i<t.length;i+=1)Qp(t.charCodeAt(i),o,s);return e.join("")}function cv(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function dv(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}cv(r,e)}}function fv(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function hv(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)Qp(t.charCodeAt(o),n,r);return new Uint8Array(e)}function pv(t){const e=[];return dv(t,n=>e.push(n)),new Uint8Array(e)}function mv(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};return t.forEach(o=>Yd(o,n,r)),Yd(null,n,r),e.join("")}function gv(t){return Math.round(Date.now()/1e3)+t}function yv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const In=()=>typeof window<"u"&&typeof document<"u",Vr={tested:!1,writable:!1},Xp=()=>{if(!In())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vr.tested)return Vr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Vr.tested=!0,Vr.writable=!0}catch{Vr.tested=!0,Vr.writable=!1}return Vr.writable};function vv(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,s)=>{e[s]=o})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}const Zp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zs(async()=>{const{default:r}=await Promise.resolve().then(()=>Yo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},xv=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",bo=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Gr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},br=async(t,e)=>{await t.removeItem(e)};class Pa{constructor(){this.promise=new Pa.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Pa.promiseConstructor=Promise;function ml(t){const e=t.split(".");if(e.length!==3)throw new ju("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!rv.test(e[r]))throw new ju("JWT not in base64url format");return{header:JSON.parse(Qd(e[0])),payload:JSON.parse(Qd(e[1])),signature:hv(e[2]),raw:{header:e[0],payload:e[1]}}}async function bv(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function wv(t,e){return new Promise((r,o)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await t(s);if(!e(s,null,i)){r(i);return}}catch(i){if(!e(s,i)){o(i);return}}})()})}function Sv(t){return("0"+t.toString(16)).substr(-2)}function _v(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let s=0;s<56;s++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,Sv).join("")}async function kv(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(s=>String.fromCharCode(s)).join("")}async function Ev(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await kv(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mo(t,e,n=!1){const r=_v();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await bo(t,`${e}-code-verifier`,o);const s=await Ev(r);return[s,r===s?"plain":"s256"]}const jv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Cv(t){const e=t.headers.get(ku);if(!e||!e.match(jv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Rv(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Nv(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Dv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function go(t){if(!Dv.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gl(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Xd(t){return JSON.parse(JSON.stringify(t))}var Av=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Kr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Tv=[502,503,504];async function Zd(t){var e;if(!xv(t))throw new Eu(Kr(t),0);if(Tv.includes(t.status))throw new Eu(Kr(t),t.status);let n;try{n=await t.json()}catch(s){throw new Yp(Kr(s),s)}let r;const o=Cv(t);if(o&&o.getTime()>=Jp["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Kd(Kr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Sr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0))throw new Kd(Kr(n),t.status,n.weak_password.reasons);throw new sv(Kr(n),t.status||500,r)}const Ov=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function Le(t,e,n,r){var o;const s=Object.assign({},r==null?void 0:r.headers);s[ku]||(s[ku]=Jp["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const i=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",u=await Pv(t,e,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function Pv(t,e,n,r,o,s){const i=Ov(e,r,o,s);let l;try{l=await t(n,Object.assign({},i))}catch(u){throw console.error(u),new Eu(Kr(u),0)}if(l.ok||await Zd(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(u){await Zd(u)}}function or(t){var e;let n=null;Mv(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=gv(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function ef(t){const e=or(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Cr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Lv(t){return{data:t,error:null}}function $v(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s}=t,i=Av(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s},u=Object.assign({},i);return{data:{properties:l,user:u},error:null}}function Iv(t){return t}function Mv(t){return t.access_token&&t.refresh_token&&t.expires_in}const yl=["global","local","others"];var Bv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};class Uv{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Zp(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=yl[0]){if(yl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yl.join(", ")}`);try{return await Le(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Le(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Cr})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Bv(e,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await Le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:$v,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(je(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Le(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Cr})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,o,s,i,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await Le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:Iv});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,x=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return x.length>0&&(x.forEach(y=>{const b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(y.split(";")[1].split("=")[1]);c[`${_}Page`]=b}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(je(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){go(e);try{return await Le(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Cr})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){go(e);try{return await Le(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Cr})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){go(e);try{return await Le(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Cr})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){go(e.userId);try{const{data:n,error:r}=await Le(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(je(n))return{data:null,error:n};throw n}}async _deleteFactor(e){go(e.userId),go(e.id);try{return{data:await Le(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}}}function tf(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function zv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const yo={debug:!!(globalThis&&Xp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class em extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Fv extends em{}async function Wv(t,e,n){yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),yo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Fv(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(yo.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}zv();const Vv={url:ev,storageKey:tv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function nf(t,e,n){return await n()}const vo={};class qs{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=qs.nextInstanceID,qs.nextInstanceID+=1,this.instanceID>0&&In()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Vv),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Uv({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Zp(o.fetch),this.lock=o.lock||nf,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:In()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Wv:this.lock=nf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Xp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=tf(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=tf(this.memoryStorage)),In()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=vo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){vo[this.storageKey]=Object.assign(Object.assign({},vo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=vo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){vo[this.storageKey]=Object.assign(Object.assign({},vo[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Kp}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=vv(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),In()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),lv(s)){const u=(e=s.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return je(n)?{error:n}:{error:new Yp("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,o;try{const s=await Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:or}),{data:i,error:l}=s;if(l||!i)return{data:{user:null,session:null},error:l};const u=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(je(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,o;try{let s;if("email"in e){const{email:d,password:h,options:f}=e;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await mo(this.storage,this.storageKey)),s=await Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:x,code_challenge_method:y},xform:or})}else if("phone"in e){const{phone:d,password:h,options:f}=e;s=await Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(o=f==null?void 0:f.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:or})}else throw new Si("You must provide either an email or phone number and a password");const{data:i,error:l}=s;if(l||!i)return{data:{user:null,session:null},error:l};const u=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(je(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:i,options:l}=e;n=await Le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ef})}else if("phone"in e){const{phone:s,password:i,options:l}=e;n=await Le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ef})}else throw new Si("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new wi}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(je(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,o,s,i,l,u,c,d,h,f,x;let y,b;if("message"in e)y=e.message,b=e.signature;else{const{chain:_,wallet:p,statement:m,options:g}=e;let w;if(In())if(typeof p=="object")w=p;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))w=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=p}const j=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const N=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),m?{statement:m}:null));let R;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")R=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)R=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)y=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),b=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${j.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(o=(r=g==null?void 0:g.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=g==null?void 0:g.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const N=await w.signMessage(new TextEncoder().encode(y),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=N}}try{const{data:_,error:p}=await Le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:mv(b)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:or});if(p)throw p;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new wi}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:p})}catch(_){if(je(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const n=await Gr(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/");try{const{data:s,error:i}=await Le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:or});if(await br(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new wi}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:i})}catch(s){if(je(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:o,access_token:s,nonce:i}=e,l=await Le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:or}),{data:u,error:c}=l;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new wi}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(n){if(je(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,o,s,i;try{if("email"in e){const{email:l,options:u}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await mo(this.storage,this.storageKey));const{error:h}=await Le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:u}=e,{data:c,error:d}=await Le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=u==null?void 0:u.data)!==null&&o!==void 0?o:{},create_user:(s=u==null?void 0:u.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(i=u==null?void 0:u.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new Si("You must provide either an email or phone number.")}catch(l){if(je(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let o,s;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await Le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:or});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const u=i.session,c=i.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(o){if(je(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,r,o;try{let s=null,i=null;return this.flowType==="pkce"&&([s,i]=await mo(this.storage,this.storageKey)),await Le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:Lv})}catch(s){if(je(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Sr;const{error:o}=await Le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(je(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:s}=e,{error:i}=await Le(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:o,options:s}=e,{data:i,error:l}=await Le(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Si("You must provide either an email or phone number and a type")}catch(n){if(je(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Gr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<hl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const i=await Gr(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=gl()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,c,d)=>(!i&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:e},error:null}}const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Cr}):await this._useSession(async n=>{var r,o,s;const{data:i,error:l}=n;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Sr}:await Le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:Cr})})}catch(n){if(je(n))return av(n)&&(await this._removeSession(),await br(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:o,error:s}=r;if(s)throw s;if(!o.session)throw new Sr;const i=o.session;let l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=await mo(this.storage,this.storageKey));const{data:c,error:d}=await Le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:i.access_token,xform:Cr});if(d)throw d;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Sr;const n=Date.now()/1e3;let r=n,o=!0,s=null;const{payload:i}=ml(e.access_token);if(i.exp&&(r=i.exp,o=r<=n),o){const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:u}=await this._getUser(e.access_token);if(u)throw u;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(je(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:i,error:l}=n;if(l)throw l;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Sr;const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(je(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!In())throw new _i("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _i(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Hd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _i("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Hd("No code detected.");const{data:m,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:s,refresh_token:i,expires_in:l,expires_at:u,token_type:c}=e;if(!s||!l||!i||!c)throw new _i("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;u&&(f=parseInt(u));const x=f-d;x*1e3<=xo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);const y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);const{data:b,error:_}=await this._getUser(s);if(_)throw _;const p={provider_token:r,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:i,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(r){if(je(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Gr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:s}=n;if(s)return{error:s};const i=(r=o.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(iv(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await br(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=yv(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,o;try{const{data:{session:s},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await mo(this.storage,this.storageKey,!0));try{return await Le(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(je(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:o}=await this._useSession(async s=>{var i,l,u,c,d;const{data:h,error:f}=s;if(f)throw f;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Le(this.fetch,"GET",x,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return In()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(je(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,o;const{data:s,error:i}=n;if(i)throw i;return await Le(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(je(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await wv(async o=>(o>0&&await bv(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await Le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:or})),(o,s)=>{const i=200*Math.pow(2,o);return s&&pl(s)&&Date.now()+i-r<xo})}catch(r){if(this._debug(n,"error",r),je(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),In()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await Gr(this.storage,this.storageKey);if(o&&this.userStorage){let i=await Gr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:o.user},await bo(this.userStorage,this.storageKey+"-user",i)),o.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:gl()}else if(o&&!o.user&&!o.user){const i=await Gr(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(o.user=i.user,await br(this.storage,this.storageKey+"-user"),await bo(this.storage,this.storageKey,o)):o.user=gl()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const s=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<hl;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${hl}s`),s){if(this.autoRefreshToken&&o.refresh_token){const{error:i}=await this._callRefreshToken(o.refresh_token);i&&(console.error(i),pl(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(o.access_token);!l&&(i!=null&&i.user)?(o.user=i.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Sr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Pa;const{data:s,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new Sr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(o,"error",s),je(s)){const i={session:null,error:s};return pl(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(u){s.push(u)}});if(await Promise.all(i),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await bo(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const s=Xd(o);await bo(this.storage,this.storageKey,s)}else{const o=Xd(n);await bo(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await br(this.storage,this.storageKey),await br(this.storage,this.storageKey+"-code-verifier"),await br(this.storage,this.storageKey+"-user"),this.userStorage&&await br(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&In()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),xo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/xo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${xo}ms, refresh threshold is ${_u} ticks`),o<=_u&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof em)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!In()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,i]=await mo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);o.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;return s?{data:null,error:s}:await Le(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(je(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,o;const{data:s,error:i}=n;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:c}=await Le(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((o=u==null?void 0:u.totp)===null||o===void 0)&&o.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(n){if(je(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;if(s)return{data:null,error:s};const{data:i,error:l}=await Le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(n){if(je(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;return s?{data:null,error:s}:await Le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(je(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],o=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),s=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:o,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ml(o.access_token);let l=null;i.aal&&(l=i.aal);let u=l;((r=(n=o.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+ov>o)return r;const{data:s,error:i}=await Le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,r=s.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:x,error:y}=await this.getSession();if(y||!x.session)return{data:null,error:y};r=x.session.access_token}const{header:o,payload:s,signature:i,raw:{header:l,payload:u}}=ml(r);n!=null&&n.allowExpired||Rv(s.exp);const c=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:s,header:o,signature:i},error:null}}const d=Nv(o.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,pv(`${l}.${u}`)))throw new ju("Invalid JWT signature");return{data:{claims:s,header:o,signature:i},error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}}}qs.nextInstanceID=0;const Gv=qs;class qv extends Gv{constructor(e){super(e)}}var Hv=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class Kv{constructor(e,n,r){var o,s,i;this.supabaseUrl=e,this.supabaseKey=n;const l=Zy(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:Wy,realtime:Gy,auth:Object.assign(Object.assign({},Vy),{storageKey:u}),global:Fy},d=Xy(r??{},c);this.storageKey=(o=d.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=Jy(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new uy(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new By(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new z0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Hv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:s,storageKey:i,flowType:l,lock:u,debug:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qv({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:s,flowType:l,lock:u,debug:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new jy(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Jv=(t,e,n)=>new Kv(t,e,n);function Yv(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Yv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Qv="https://wjylzxsfevdlhqunvfqc.supabase.co",Xv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqeWx6eHNmZXZkbGhxdW52ZnFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2ODMwOTEsImV4cCI6MjA3NDI1OTA5MX0.SuB0gd7-gefwpUHFnKsupDgo8P2VeLuMbdlsU6AMrLw",rf=globalThis,ze=rf.__sg_supabase||(rf.__sg_supabase=Jv(Qv,Xv,{auth:{persistSession:!0,autoRefreshToken:!0,storageKey:"salesgame-auth"},realtime:{params:{eventsPerSecond:10}}}));function Zv(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function Hs(){const t="sg_tab_player_id";let e=sessionStorage.getItem(t);return e||(e=Zv(),sessionStorage.setItem(t,e)),e}function io(t="Jogador"){const e="sg_tab_player_name";let n=sessionStorage.getItem(e);return n||(n=t,sessionStorage.setItem(e,n)),n}function ex(t){return sessionStorage.setItem("sg_tab_player_name",t??"Jogador"),t}const tx="/dynamic-data-visualization-3d.jpg",nx="/SalesGame_Logo-removebg-preview.png",rx="/Multiplier-Copia.png",ox="/WhatsApp_Image_2025-06-24_at_16.47.00-removebg-preview.png";function sx({onEnter:t}){const[e,n]=E.useState(io("")),r=E.useRef(null);E.useEffect(()=>{var i;(i=r.current)==null||i.focus()},[]);function o(){const i=(e||"").trim();i&&(ex(i),t==null||t(i))}function s(i){i.key==="Enter"&&o()}return a.jsxs("div",{className:"start",children:[a.jsx("img",{className:"startBg",src:tx,alt:""}),a.jsx("div",{className:"startShade"}),a.jsx("div",{className:"startHeader",children:a.jsx("img",{className:"startLogo",src:nx,alt:"Sales GAME"})}),a.jsx("div",{className:"startCenter",children:a.jsxs("div",{className:"startCard",children:[a.jsx("label",{className:"startLabel",htmlFor:"playerName",children:"Nome do Jogador"}),a.jsx("input",{id:"playerName",ref:r,className:"startInput",placeholder:"Digite seu nome",value:e,onChange:i=>n(i.target.value),onKeyDown:s,maxLength:30}),a.jsx("button",{className:"startBtn",onClick:o,children:"Entrar"})]})}),a.jsxs("div",{className:"startFooter",children:[a.jsxs("div",{className:"startLinks",children:[a.jsx("div",{children:"@multiplier.educacao"}),a.jsx("div",{children:"https://multipliereducacao.com.br/"})]}),a.jsx("div",{className:"startBrand",children:a.jsx("img",{className:"startBrandLogo",src:rx,alt:"Multiplier"})})]}),a.jsx("img",{className:"startCoach",src:ox,alt:"",draggable:"false"})]})}async function ix(){const{data:t,error:e}=await ze.from("lobbies").select(`
      id,
      name,
      max_players,
      status,
      created_at,
      lobby_players!left(count)
    `).order("created_at",{ascending:!0});if(e)throw e;return(t||[]).map(n=>{var r,o;return{id:n.id,name:n.name,max:n.max_players,status:n.status||"open",players:(((o=(r=n.lobby_players)==null?void 0:r[0])==null?void 0:o.count)??0)|0}})}function ax(t){const e=ze.channel("lobbies-list").on("postgres_changes",{event:"*",schema:"public",table:"lobbies"},()=>t==null?void 0:t()).on("postgres_changes",{event:"*",schema:"public",table:"lobby_players"},()=>t==null?void 0:t()).subscribe();return()=>ze.removeChannel(e)}async function lx({name:t,hostId:e,max:n=4}){if(!e)throw new Error("hostId obrigatrio em createLobby");const o={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,name:t,host_id:e,max_players:Number(n)||4,status:"open",created_at:new Date().toISOString()},{data:s,error:i}=await ze.from("lobbies").insert(o).select("id").single();if(i)throw i;return s.id}async function Cu({lobbyId:t,playerId:e,playerName:n,ready:r=!1}){const{data:o,error:s}=await ze.from("lobbies").select("id, max_players, status, host_id").eq("id",t).single();if(s)throw s;if(o.status!=="open")throw new Error("Sala fechada.");const{count:i,error:l}=await ze.from("lobby_players").select("lobby_id",{count:"exact",head:!0}).eq("lobby_id",t);if(l)throw l;if((i||0)>=o.max_players)throw new Error("Sala cheia.");try{window.__MY_UID=e}catch{}const{error:u}=await ze.from("lobby_players").upsert({lobby_id:t,player_id:e,player_name:n,ready:!!r,joined_at:new Date().toISOString()},{onConflict:"lobby_id,player_id"});if(u)throw u;o.host_id||await ze.from("lobbies").update({host_id:e}).eq("id",t)}async function of({lobbyId:t,playerId:e}){var l;const{data:n,error:r}=await ze.from("lobbies").select("id, host_id").eq("id",t).single();if(r)throw r;const{error:o}=await ze.from("lobby_players").delete().match({lobby_id:t,player_id:e});if(o)throw o;const{data:s,error:i}=await ze.from("lobby_players").select("player_id, joined_at").eq("lobby_id",t).order("joined_at",{ascending:!0});if(i)throw i;if(!s||s.length===0){await ze.from("lobbies").delete().eq("id",t);return}if((n==null?void 0:n.host_id)===e){const u=(l=s[0])==null?void 0:l.player_id;u&&await ze.from("lobbies").update({host_id:u}).eq("id",t)}}async function sf(t){const{data:e,error:n}=await ze.from("lobby_players").select("player_id, player_name, ready, joined_at").eq("lobby_id",t).order("joined_at",{ascending:!0});if(n)throw n;return e||[]}async function ux({lobbyId:t,playerId:e,ready:n}){const{error:r}=await ze.from("lobby_players").update({ready:n}).match({lobby_id:t,player_id:e});if(r)throw r}async function cx(t,e,n){return ux({lobbyId:t,playerId:e,ready:n})}async function dx({lobbyId:t,playerId:e,playerName:n}){const{error:r}=await ze.from("lobby_players").update({player_name:n}).match({lobby_id:t,player_id:e});if(r)throw r}async function af(t,e){const{error:n}=await ze.from("lobbies").update({status:e}).eq("id",t);if(n)throw n}function fx(t,e){let n=0;const r=()=>{n&&cancelAnimationFrame(n),n=requestAnimationFrame(()=>e==null?void 0:e())},o=ze.channel(`lobby-${t}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},s=>{console.debug("[rt] lobby_players:INSERT",s.new),r()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},s=>{console.debug("[rt] lobby_players:UPDATE",s.new),r()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},s=>{console.debug("[rt] lobby_players:DELETE",s.old),r()}).on("postgres_changes",{event:"*",schema:"public",table:"lobbies",filter:`id=eq.${t}`},s=>{console.debug("[rt] lobbies:*",s.new||s.old),r()}).subscribe();return()=>{n&&cancelAnimationFrame(n),ze.removeChannel(o)}}async function hx(t){const{data:e,error:n}=await ze.from("lobbies").select("id,name,status,max_players,host_id,created_at").eq("id",t).single();if(n)throw n;return e}async function px({lobbyId:t}){var o;const{data:e}=await ze.from("lobby_players").select("player_id, player_name, ready").eq("lobby_id",t),{data:n,error:r}=await ze.from("matches").insert({lobby_id:t,host_id:((o=e==null?void 0:e[0])==null?void 0:o.player_id)||null,state:{players:e},created_at:new Date().toISOString()}).select("id").single();if(r)throw r;return n}async function mx(t){const{data:e,error:n}=await ze.from("matches").select("id, lobby_id, created_at").eq("lobby_id",t).order("created_at",{ascending:!1}).limit(1);if(n)throw n;return(e==null?void 0:e[0])||null}async function vl({roomCode:t,playerId:e}){if(!t||!e){console.log("[leaveRoom] Parmetros invlidos:",{roomCode:t,playerId:e});return}try{console.log(`[leaveRoom] Tentando remover jogador ${e} da sala ${t}`);const{data:n,error:r}=await ze.from("lobbies").select("id, name, host_id").eq("id",t).single();if(r){console.warn("[leaveRoom] Erro ao buscar lobby:",r);return}if(!n){console.log(`[leaveRoom] Lobby ${t} no encontrado`);return}console.log("[leaveRoom] Lobby encontrado:",n);const{error:o}=await ze.from("lobby_players").delete().match({lobby_id:t,player_id:e});o?console.warn("[leaveRoom] Erro ao remover jogador:",o):console.log(`[leaveRoom] Jogador ${e} removido do lobby ${t}`);const{data:s,error:i}=await ze.from("lobby_players").select("player_id").eq("lobby_id",t);if(i){console.warn("[leaveRoom] Erro ao contar jogadores restantes:",i);return}if(!s||s.length===0){const{error:l}=await ze.from("lobbies").delete().eq("id",t);l?console.warn("[leaveRoom] Erro ao deletar lobby vazio:",l):console.log(`[leaveRoom] Lobby ${t} deletado com sucesso (sem jogadores)`)}else if(console.log(`[leaveRoom] Jogador ${e} saiu do lobby ${t}. Restam ${s.length} jogadores.`),n.host_id===e&&s.length>0){const l=s[0].player_id,{error:u}=await ze.from("lobbies").update({host_id:l}).eq("id",t);u?console.warn("[leaveRoom] Erro ao transferir host:",u):console.log(`[leaveRoom] Host transferido para ${l}`)}}catch(n){console.error("[leaveRoom] Erro inesperado:",n)}}function gx({onEnterRoom:t}){const[e,n]=E.useState([]),[r,o]=E.useState(!1);async function s(){o(!0);try{const c=await ix();n(c)}finally{o(!1)}}E.useEffect(()=>(s(),ax(()=>s())),[]);async function i(){const c=io("Jogador"),d=`Sala de ${c}`,h=prompt("Nome do lobby:",d)||d,f=Hs();try{const x=await lx({name:h,hostId:f,max:4});await Cu({lobbyId:x,playerId:f,playerName:c,ready:!1}),t==null||t(x)}catch(x){alert(x.message||"No foi possvel criar o lobby."),await s()}}async function l(c){try{const d=io("Jogador"),h=Hs();await Cu({lobbyId:c,playerId:h,playerName:d,ready:!1}),t==null||t(c)}catch(d){alert(d.message||"No foi possvel entrar no lobby.")}}const u={page:{minHeight:"100vh",background:"#0f0f12",color:"#e9ecf1",padding:"32px 16px",display:"flex",justifyContent:"center"},container:{width:"100%",maxWidth:980},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:16,marginBottom:16,flexWrap:"wrap"},title:{fontSize:28,fontWeight:800,color:"#fff"},actions:{display:"flex",gap:10},btn:{padding:"12px 16px",border:0,borderRadius:12,fontWeight:800,cursor:"pointer"},btnPrimary:{background:"#4f46e5",color:"#fff",boxShadow:"0 8px 24px rgba(79,70,229,.25)"},btnSecondary:{background:"#20222a",color:"#fff",border:"1px solid #2b2e38"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:14},card:{background:"linear-gradient(180deg, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0.00) 100%)",border:"1px solid rgba(255,255,255,.08)",borderRadius:16,padding:16,display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 20px rgba(0,0,0,.25)"},cardHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},lobbyName:{fontSize:18,fontWeight:800,color:"#fff",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},meta:{fontSize:13,color:"#b8c0cc"},joinBtn:{padding:"10px 14px",borderRadius:10,border:0,background:"#7c3aed",color:"#fff",fontWeight:800,cursor:"pointer",boxShadow:"0 10px 20px rgba(124,58,237,.25)"},disabled:{opacity:.6,cursor:"not-allowed",filter:"grayscale(.3)"},empty:{marginTop:24,padding:18,borderRadius:12,border:"1px dashed rgba(255,255,255,.12)",color:"#c7cfdb",textAlign:"center"}};return a.jsx("div",{style:u.page,children:a.jsxs("div",{style:u.container,children:[a.jsxs("div",{style:u.headerRow,children:[a.jsx("h2",{style:u.title,children:"SalesGame  Lobbies"}),a.jsxs("div",{style:u.actions,children:[a.jsx("button",{style:{...u.btn,...u.btnPrimary},onClick:i,children:"Criar Lobby"}),a.jsx("button",{style:{...u.btn,...u.btnSecondary},onClick:s,disabled:r,children:r?"Atualizando":"Atualizar"})]})]}),e.length===0&&!r?a.jsxs("div",{style:u.empty,children:["Nenhuma sala criada ainda. Clique em ",a.jsx("b",{children:"Criar Lobby"})," para comear."]}):a.jsx("div",{style:u.grid,children:e.map(c=>{const d=(c.players??0)>=(c.max??4),h=(c.status??"open")==="open",f=d||!h;return a.jsxs("div",{style:u.card,children:[a.jsxs("div",{style:u.cardHeader,children:[a.jsx("div",{style:u.lobbyName,title:c.name,children:c.name}),a.jsxs("span",{style:u.meta,children:[c.players??0,"/",c.max??4]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("span",{style:u.meta,children:["status: ",c.status??"open"]}),a.jsx("button",{style:{...u.joinBtn,...f?u.disabled:{}},disabled:f,onClick:()=>l(c.id),title:f?d?"Sala cheia":"Sala no est aberta":"Entrar na sala",children:"Entrar"})]})]},c.id)})})]})})}function yx({lobbyId:t,onBack:e,onStartGame:n}){const r=Hs(),o=io("Jogador"),[s,i]=E.useState(null),[l,u]=E.useState([]),[c,d]=E.useState(!0),[h,f]=E.useState(!1),x=E.useRef(!1),y=E.useRef(!0),b=E.useRef(!1),_=E.useRef(!1),p=E.useMemo(()=>(s==null?void 0:s.host_id)===r,[s,r]),m=E.useMemo(()=>l.find(v=>v.player_id===r),[l,r]),g=E.useMemo(()=>l.filter(v=>v.ready).length,[l]),w=p&&(s==null?void 0:s.status)==="open"&&l.length>=1&&g===l.length;console.log("[PlayersLobby] Debug:",{players:l.length,readyCount:g,lobbyStatus:s==null?void 0:s.status,amHost:p,canStart:w,meId:r,meName:o});async function j(v){if(_.current)return;const D=await mx(t);if(D!=null&&D.id){_.current=!0;const T=(v||[]).map((I,ee)=>({id:I.player_id,name:I.player_name,index:ee}));n==null||n({lobbyId:t,matchId:D==null?void 0:D.id,players:T,me:{id:r,name:o}})}}async function N(){y.current&&d(!0);try{console.log("[PlayersLobby] refreshAll - buscando lobby:",t);const[v,D]=await Promise.all([hx(t),sf(t)]);console.log("[PlayersLobby] refreshAll - lobby:",v,"players:",D),i(v),u(D);const T=D.find(I=>I.player_id===r);if(console.log("[PlayersLobby] refreshAll - mine:",T,"meId:",r),!T&&!x.current&&(v==null?void 0:v.status)==="open"){console.log("[PlayersLobby] refreshAll - entrando na sala"),x.current=!0;try{await Cu({lobbyId:t,playerId:r,playerName:o,ready:!1}),console.log("[PlayersLobby] refreshAll - entrada na sala bem-sucedida");const I=await sf(t);console.log("[PlayersLobby] refreshAll - jogadores aps entrada:",I),u(I)}catch(I){console.error("[PlayersLobby] refreshAll - erro ao entrar na sala:",I)}}if(T&&!b.current&&o&&T.player_name!==o){console.log("[PlayersLobby] refreshAll - sincronizando nome"),b.current=!0;try{await dx({lobbyId:t,playerId:r,playerName:o})}catch{}}await j(D)}catch(v){console.error("[PlayersLobby] refreshAll - erro:",v)}finally{y.current&&(y.current=!1,d(!1))}}E.useEffect(()=>{const v=()=>{of({lobbyId:t,playerId:r}).catch(()=>{})},D=()=>v();return window.addEventListener("pagehide",D),window.addEventListener("beforeunload",D),()=>{window.removeEventListener("pagehide",D),window.removeEventListener("beforeunload",D)}},[t,r]),E.useEffect(()=>(x.current=!1,y.current=!0,b.current=!1,_.current=!1,N(),fx(t,()=>N())),[t]);async function R(v){if(!m)return;f(!0);const D=m.ready;u(T=>T.map(I=>I.player_id===r?{...I,ready:v}:I));try{await cx(t,r,v)}catch(T){u(I=>I.map(ee=>ee.player_id===r?{...ee,ready:D}:ee)),console.error("setReadyUI failed",T)}finally{f(!1)}}async function S(){try{await of({lobbyId:t,playerId:r})}finally{e==null||e()}}async function A(){if(!w)return;const v=s==null?void 0:s.status;await af(t,"locked");try{const D=await px({lobbyId:t});_.current=!0;const T=l.map((I,ee)=>({id:I.player_id,name:I.player_name,index:ee}));n==null||n({lobbyId:t,matchId:D==null?void 0:D.id,players:T,me:{id:r,name:o}})}catch(D){console.error("startMatch failed",D),await af(t,v||"open")}}return a.jsx("div",{style:Ge.page,children:a.jsxs("div",{style:Ge.container,children:[a.jsxs("div",{style:Ge.top,children:[a.jsx("button",{style:Ge.backBtn,onClick:S,children:" Voltar"}),a.jsxs("h2",{style:Ge.title,children:["SalesGame  ",(s==null?void 0:s.name)||"..."]})]}),a.jsxs("div",{style:Ge.table,children:[a.jsxs("div",{style:Ge.thead,children:[a.jsx("div",{style:Ge.colPlayer,children:"Jogador"}),a.jsx("div",{style:Ge.colReady,children:"Pronto?"})]}),c?a.jsx("div",{style:Ge.loading,children:"Carregando..."}):l.map(v=>a.jsxs("div",{style:Ge.row,children:[a.jsxs("div",{style:Ge.colPlayer,children:[a.jsx("span",{style:Ge.avatar,children:(v.player_name||"?").slice(0,2).toLowerCase()}),a.jsx("span",{children:v.player_name||"Annimo"}),(s==null?void 0:s.host_id)===v.player_id&&a.jsx("span",{style:Ge.badgeHost,children:"Host"}),v.player_id===r&&a.jsx("span",{style:Ge.badgeYou,children:"Voc"})]}),a.jsx("div",{style:Ge.colReady,children:v.player_id===r?a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{style:{...Ge.btn,...m!=null&&m.ready?Ge.btnGhost:Ge.btnDark},onClick:()=>R(!1),disabled:h||!(m!=null&&m.ready),children:"No pronto"}),a.jsxs("button",{style:{...Ge.btn,...m!=null&&m.ready?Ge.btnPrimary:Ge.btnPurple},onClick:()=>R(!0),disabled:h||!!(m!=null&&m.ready),children:[" ",m!=null&&m.ready?"Pronto":"Ficar pronto"]})]}):a.jsx("span",{style:v.ready?Ge.pillReady:Ge.pillWait,children:v.ready?"Pronto":"Aguardando"})})]},v.player_id))]}),a.jsxs("div",{style:Ge.footer,children:[a.jsxs("div",{style:Ge.statusWrap,children:[a.jsx("span",{style:{...Ge.dot,background:(s==null?void 0:s.status)==="open"?"#22c55e":"#f59e0b"}}),a.jsxs("span",{children:["status: ",(s==null?void 0:s.status)||"..."]}),a.jsxs("span",{style:{marginLeft:12},children:["Prontos: ",g,"/",l.length]})]}),a.jsxs("div",{style:{display:"flex",gap:12},children:[a.jsx("button",{style:{...Ge.btn,...w?Ge.btnPrimary:Ge.disabled},onClick:A,disabled:!w,children:"Iniciar partida"}),a.jsx("button",{style:{...Ge.btn,...Ge.btnDark},onClick:S,children:"Sair da sala"})]})]})]})})}const Ge={page:{minHeight:"100vh",background:"#0f0f12",color:"#e9ecf1",padding:"24px 16px",display:"flex",justifyContent:"center"},container:{width:"100%",maxWidth:980},top:{display:"flex",alignItems:"center",gap:12,marginBottom:16},backBtn:{padding:"10px 14px",background:"#20222a",border:"1px solid #2b2e38",borderRadius:12,color:"#fff",cursor:"pointer"},title:{margin:0,fontSize:28,fontWeight:800},table:{background:"rgba(255,255,255,.02)",border:"1px solid rgba(255,255,255,.08)",borderRadius:16,overflow:"hidden"},thead:{display:"grid",gridTemplateColumns:"1fr 220px",padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,.08)",color:"#c7cfdb"},row:{display:"grid",gridTemplateColumns:"1fr 220px",padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,.06)"},colPlayer:{display:"flex",alignItems:"center",gap:10,minWidth:0},colReady:{display:"flex",alignItems:"center",justifyContent:"flex-end"},avatar:{width:28,height:28,borderRadius:999,background:"#1f2430",display:"grid",placeItems:"center",color:"#c7cfdb",fontSize:12,textTransform:"lowercase"},badgeHost:{marginLeft:8,fontSize:12,background:"#fde68a",color:"#111827",padding:"2px 8px",borderRadius:999,fontWeight:800},badgeYou:{marginLeft:8,fontSize:12,background:"#bfdbfe",color:"#111827",padding:"2px 8px",borderRadius:999,fontWeight:800},loading:{padding:16,color:"#c7cfdb"},pillReady:{background:"rgba(34,197,94,.15)",color:"#22c55e",padding:"6px 10px",borderRadius:999,fontWeight:700},pillWait:{background:"rgba(245,158,11,.14)",color:"#f59e0b",padding:"6px 10px",borderRadius:999,fontWeight:700},footer:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:16},statusWrap:{display:"flex",alignItems:"center",gap:6,color:"#c7cfdb"},dot:{width:8,height:8,borderRadius:"50%"},btn:{padding:"12px 16px",border:0,borderRadius:12,fontWeight:800,cursor:"pointer"},btnPrimary:{background:"#4f46e5",color:"#fff",boxShadow:"0 8px 24px rgba(79,70,229,.25)"},btnPurple:{background:"#7c3aed",color:"#fff"},btnDark:{background:"#20222a",color:"#fff",border:"1px solid #2b2e38"},btnGhost:{background:"transparent",color:"#e9ecf1",border:"1px solid rgba(255,255,255,.15)"},disabled:{opacity:.5,cursor:"not-allowed",filter:"grayscale(.25)"}},vx="/board.jpg",Ru=800,Nu=700,La=[{nx:.9278494291885221,ny:.9008218764923216},{nx:.8188460351743289,ny:.9120818357755046},{nx:.7145819191607529,ny:.920124663834921},{nx:.6016291268127121,ny:.920124663834921},{nx:.49104597346497997,ny:.9233417950586875},{nx:.37888306078370876,ny:.920124663834921},{nx:.24618327676643012,ny:.9152989669992712},{nx:.21695772909595804,ny:.7994822429436751},{nx:.1853625424251774,ny:.7270967904089275},{nx:.1340203640851589,ny:.6354085505315806},{nx:.12851782363977485,ny:.5145797598627787},{nx:.12664165103189493,ny:.37392795883361923},{nx:.05347091932457786,ny:.30017152658662094},{nx:.051594746716697934,ny:.20240137221269297},{nx:.14540337711069418,ny:.12006861063464837},{nx:.23921200750469043,ny:.11663807890222985},{nx:.3771106941838649,ny:.11663807890222985},{nx:.5037523452157598,ny:.12006861063464837},{nx:.5975609756097561,ny:.1320754716981132},{nx:.5984990619136961,ny:.24356775300171526},{nx:.5065666041275797,ny:.2692967409948542},{nx:.398686679174484,ny:.27101200686106347},{nx:.28893058161350843,ny:.27101200686106347},{nx:.2373358348968105,ny:.3687821612349914},{nx:.23921200750469043,ny:.48027444253859347},{nx:.24202626641651032,ny:.5660377358490566},{nx:.26454033771106944,ny:.6895368782161235},{nx:.3330206378986867,ny:.6946826758147513},{nx:.35647279549718575,ny:.5831903945111492},{nx:.35647279549718575,ny:.4716981132075472},{nx:.3818011257035647,ny:.37735849056603776},{nx:.5225140712945591,ny:.3653516295025729},{nx:.6238273921200751,ny:.3687821612349914},{nx:.7223264540337712,ny:.40308747855917665},{nx:.6613508442776735,ny:.5197255574614065},{nx:.5300187617260788,ny:.5025728987993139},{nx:.4427767354596623,ny:.5694682675814752},{nx:.4896810506566604,ny:.6861063464837049},{nx:.6163227016885553,ny:.6861063464837049},{nx:.724202626641651,ny:.6861063464837049},{nx:.8273921200750469,ny:.660377358490566},{nx:.8395872420262664,ny:.5368782161234992},{nx:.8395872420262664,ny:.4339622641509434},{nx:.8283302063789869,ny:.313893653516295},{nx:.7176360225140713,ny:.30017152658662094},{nx:.6876172607879925,ny:.22298456260720412},{nx:.698874296435272,ny:.1457975986277873},{nx:.8020637898686679,ny:.11663807890222985},{nx:.8958724202626641,ny:.11663807890222985},{nx:.9446529080675422,ny:.21783876500857632},{nx:.9446529080675422,ny:.3293310463121784},{nx:.9380863039399625,ny:.45797598627787306},{nx:.9409005628517824,ny:.5711835334476844},{nx:.950281425891182,ny:.6723842195540308},{nx:.9540337711069419,ny:.7804459691252144}],Cs=La.length;function tm(t,e,n){return{x:t.nx*e,y:t.ny*n}}La.map(t=>[t.nx*Ru,t.ny*Nu]);function xx({visible:t=!0,boardWidth:e,boardHeight:n}){return t?a.jsx("div",{className:"markersLayer",children:La.map((r,o)=>{const{x:s,y:i}=tm(r,e,n);return a.jsx("div",{className:"marker",style:{left:s,top:i},title:`Casa ${o+1}`,children:o+1},o)})}):null}function bx({boardRef:t,expected:e=55,onFinish:n,initial:r=[]}){const[o,s]=E.useState(r);function i(x){if(!(t!=null&&t.current))return;const y=t.current.getBoundingClientRect(),b=x.clientX-y.left,_=x.clientY-y.top,p=b/y.width,m=_/y.height;s(g=>g.length>=e?g:[...g,{nx:p,ny:m}])}function l(){s(x=>x.slice(0,-1))}function u(){s([])}const c=E.useMemo(()=>JSON.stringify(o,null,2),[o]);async function d(){try{await navigator.clipboard.writeText(c),alert("Copiado para a rea de transferncia!")}catch{alert("No foi possvel copiar. Use o boto Baixar.")}}function h(){const x=new Blob([c],{type:"application/json"}),y=URL.createObjectURL(x),b=document.createElement("a");b.href=y,b.download="track-points-55.json",document.body.appendChild(b),b.click(),b.remove(),URL.revokeObjectURL(y)}function f(){n==null||n(o),console.log(`TRACK_POINTS_NORM (cole em src/data/track.js):
`,c),alert("Finalizado! O JSON foi impresso no console. Copie e cole em src/data/track.js")}return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"recLayer",onClick:i}),a.jsx("div",{className:"recDotsLayer",pointerEvents:"none",children:o.map((x,y)=>a.jsx("div",{className:"recDot",style:{left:`${x.nx*100}%`,top:`${x.ny*100}%`},title:`Casa ${y+1}`,children:y+1},y))}),a.jsxs("div",{className:"recToolbar",children:[a.jsxs("div",{className:"recInfo",children:[a.jsx("b",{children:"Gravando trilha"}),"  clique nas casas na ordem.",a.jsxs("span",{children:["Marcados: ",a.jsx("b",{children:o.length})," / ",e]})]}),a.jsxs("div",{className:"recBtns",children:[a.jsx("button",{onClick:l,disabled:!o.length,children:"Desfazer"}),a.jsx("button",{onClick:u,disabled:!o.length,children:"Limpar"}),a.jsx("button",{onClick:d,disabled:!o.length,children:"Copiar JSON"}),a.jsx("button",{onClick:h,disabled:!o.length,children:"Baixar .json"}),a.jsx("button",{onClick:f,disabled:o.length!==e,children:"Finalizar"})]})]})]})}const wx=40,Sx=1.15,_x=3,kx="0 8px 18px rgba(0,0,0,.35)",lf={cash:18e3,possibAt:0,clientsAt:0,faturamento:770,manutencao:1150,emprestimos:0,vendedoresComuns:0,fieldSales:0,insideSales:0,mixDBens:4e3,erpClientes:0,manualOnboarding:!0,azul:0,amarelo:0,roxo:0,gestores:0};function Ex({players:t,turnIdx:e,recordTrack:n=!1,matchId:r,me:o,onMeHud:s}){const i=E.useRef(null),[l,u]=E.useState({w:Ru,h:Nu}),c=(o==null?void 0:o.id)||Hs(),d=io("Jogador"),h=E.useMemo(()=>(t==null?void 0:t.find(w=>w.id===c))||null,[t,c]),f=(o==null?void 0:o.name)||(h==null?void 0:h.name)||d,x=(h==null?void 0:h.color)||"#6c5ce7",y=E.useMemo(()=>`sg_stats_v1:${r||"local"}:${c}`,[r,c]),[b,_]=E.useState(()=>{try{const w=sessionStorage.getItem(y);return w?JSON.parse(w):lf}catch{return lf}});E.useEffect(()=>{try{sessionStorage.setItem(y,JSON.stringify(b))}catch{}},[y,b]),E.useEffect(()=>{const w={id:c,name:f,color:x,cash:b.cash,possibAt:b.possibAt,clientsAt:b.clientsAt,matchId:r||"local"};s==null||s(w),document.dispatchEvent(new CustomEvent("sg:meHud",{detail:w}))},[c,f,x,b.cash,b.possibAt,b.clientsAt,r]),E.useLayoutEffect(()=>{if(!i.current)return;const w=i.current,j=new ResizeObserver(N=>{for(const R of N){const S=R.contentRect;u({w:S.width,h:S.height})}});return j.observe(w),()=>j.disconnect()},[]);const p=l.w/Ru,m=l.h/Nu,g=Math.min(p,m);return a.jsxs("div",{className:"board",ref:i,children:[a.jsx("img",{src:vx,alt:"Board",className:"boardImg"}),n&&a.jsx(bx,{boardRef:i,expected:55,onFinish:w=>{console.log("TRACK_POINTS_NORM (cole em src/data/track.js):",JSON.stringify(w,null,2))}}),!n&&a.jsxs(a.Fragment,{children:[a.jsx(xx,{visible:!1,boardWidth:l.w,boardHeight:l.h}),t.map((w,j)=>{const N=j===e,R=(w.pos%Cs+Cs)%Cs,S=La[R],A=tm(S,l.w,l.h),v=j*12*g,T=wx*g*(N?Sx:1),I=Math.max(2,_x*g),ee=["","","","","","","",""],te=ee[j%ee.length];return a.jsx("div",{className:"token",style:{position:"absolute",left:A.x+v,top:A.y-v,transform:"translate(-50%, -50%)",width:T,height:T,borderRadius:"50%",background:w.color,border:`${I}px solid rgba(255,255,255,.95)`,boxShadow:kx,pointerEvents:"none",display:"grid",placeItems:"center",color:"#000",fontWeight:900,userSelect:"none",zIndex:N?4:3,fontSize:`${Math.max(16,T*.6)}px`},title:`${w.name}  Casa ${R+1}`,"aria-label":`${w.name} est na casa ${R+1}`,children:N?"":te},w.id)})]})]})}function jx({totals:t,players:e}){return E.useEffect(()=>{console.groupCollapsed("[HUD] totals"),console.log(t),console.groupEnd()},[t]),a.jsxs("div",{className:"hud",children:[a.jsxs("div",{className:"panel",children:[a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Faturamento:"})," ",a.jsxs("span",{className:"pos",children:["$ ",t.faturamento]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Manuteno:"})," ",a.jsxs("span",{className:"neg",children:["$ ",t.manutencao]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Emprstimos:"})," ",a.jsxs("span",{children:["$ ",t.emprestimos]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Vendedores Comuns:"})," ",a.jsx("span",{children:t.vendedoresComuns})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Field Sales:"})," ",a.jsx("span",{children:t.fieldSales})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Inside Sales:"})," ",a.jsx("span",{children:t.insideSales})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Mix Produtos:"})," ",a.jsx("span",{children:t.mixProdutos})," ",a.jsx("b",{children:" Bens:"})," ",a.jsxs("span",{children:["$ ",t.bens]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"ERP/Sistemas:"})," ",a.jsx("span",{children:t.erpSistemas})," ",a.jsx("b",{children:" Clientes:"})," ",a.jsx("span",{children:t.clientes})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Manual Onboarding:"})," "]}),a.jsxs("div",{children:[a.jsx("b",{children:"Azul:"})," ",a.jsx("span",{children:t.az||0})," ",a.jsx("b",{children:" Amarelo: "}),a.jsx("span",{children:t.am||0})," ",a.jsx("b",{children:"Roxo:"})," ",a.jsx("span",{children:t.rox||0})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Gestores Comerciais:"})," ",a.jsx("span",{children:t.gestores??t.gestoresComerciais??0})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Capacidade:"})," ",a.jsx("span",{children:t.possibAt??0}),"  ",a.jsx("b",{children:"Em Atendimento:"})," ",a.jsx("span",{children:t.clientsAt??0})]})]}),a.jsxs("div",{className:"score",children:[a.jsx("div",{className:"title",children:"Placar"}),e.map(n=>a.jsxs("div",{className:"row",children:[a.jsx("span",{children:n.name}),a.jsx("span",{children:n.cash})]},n.id))]})]})}function Cx({onAction:t,current:e,isMyTurn:n=!0}){const r=!!(e!=null&&e.bankrupt),o=!!n&&!r;E.useEffect(()=>{console.groupCollapsed("[Controls] render"),console.log("current player:",e),console.log("isMyTurn prop:",n),console.log("isBankrupt:",r),console.log("canRoll (final):",o),console.groupEnd()},[e==null?void 0:e.id,e==null?void 0:e.name,e==null?void 0:e.bankrupt,n,o]);const s=()=>{if(console.log("[Controls] click => Rolar Dado & Andar (canRoll=%s)",o),!o)return;const u=Math.floor(Math.random()*6)+1,c=0,d=`Dado: ${u}`;console.log("[Controls] onAction ROLL => steps=%d cashDelta=%d note=%s",u,c,d),t==null||t({type:"ROLL",steps:u,cashDelta:c,note:d})},i=async()=>{r||(console.log("[Controls] click => Recuperao Financeira"),t==null||t({type:"RECOVERY_MODAL"}))},l=async()=>{r||(console.log("[Controls] click => Declarar Falncia"),t==null||t({type:"BANKRUPT_MODAL"}))};return a.jsxs("div",{className:`controls ${o?"":"is-wait"} ${r?"is-bankrupt":""}`,children:[a.jsx("button",{className:"btn primary",onClick:i,disabled:r,"aria-disabled":r,children:"RECUPERAO FINANCEIRA"}),a.jsx("button",{className:"btn dark",onClick:l,disabled:r,"aria-disabled":r,children:"DECLARAR FALNCIA"}),a.jsxs("div",{className:"turnBox",children:[a.jsxs("div",{children:["Vez de: ",a.jsx("b",{children:e==null?void 0:e.name})]}),a.jsx("button",{className:"btn go",onClick:s,disabled:!o,"aria-disabled":!o,children:"Rolar Dado & Andar"})]})]})}function ni({children:t,onClose:e,zIndex:n=3e3}){const r=()=>{typeof e=="function"&&e()};return a.jsx("div",{className:"sg-modal-backdrop",style:{position:"fixed",inset:0,background:"rgba(8,10,16,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:n},onClick:r,children:a.jsx("div",{className:"sg-modal-card",style:{position:"relative",background:"#0f1420",border:"1px solid rgba(255,255,255,.1)",borderRadius:14,width:"min(780px, 92vw)",maxWidth:"92vw",color:"#fff",boxShadow:"0 20px 60px rgba(0,0,0,.45)"},onClick:o=>o.stopPropagation(),children:t})})}function Rx({players:t=[],onExit:e,onResolve:n}){const r=E.useMemo(()=>{const u=[...t].map(c=>({...c,patrimonio:(Number(c.cash)||0)+(Number(c.bens)||0)})).sort((c,d)=>d.patrimonio-c.patrimonio);return[u[1],u[0],u[2]]},[t]),o=r==null?void 0:r[1],s=r==null?void 0:r[0],i=r==null?void 0:r[2],l=()=>{n?n({action:"EXIT"}):e==null||e()};return a.jsx(ni,{zIndex:2147483647,onClose:()=>{},children:a.jsxs("div",{style:Fn.wrap,children:[a.jsx("h1",{style:Fn.title,children:" Fim da 5 Rodada"}),a.jsxs("p",{style:Fn.subtitle,children:["Vence quem tiver ",a.jsx("b",{children:"Saldo + Bens"}),". Eis o pdio:"]}),a.jsxs("div",{style:Fn.podium,children:[a.jsx(xl,{place:"second",player:s}),a.jsx(xl,{place:"first",player:o,big:!0}),a.jsx(xl,{place:"third",player:i})]}),a.jsx("div",{style:{display:"flex",gap:12,marginTop:18,flexWrap:"wrap",justifyContent:"center"},children:a.jsx("button",{style:Fn.btn,onClick:l,children:" Voltar aos Lobbies"})})]})})}function xl({place:t,player:e,big:n}){if(!e)return a.jsx("div",{style:{width:220}});const r={first:bl("#d4af37","#f5d76e"),second:bl("#9fa4ad","#cfd4db"),third:bl("#b87333","#d28c45")},o={first:"1",second:"2",third:"3"}[t],s=r[t].ring,i=r[t].face;return a.jsxs("div",{style:{...Fn.medalCol,transform:n?"translateY(-18px)":"none"},children:[a.jsx("div",{style:Fn.ribbon}),a.jsx("div",{style:{...Fn.medal,...s,width:n?180:150,height:n?180:150},children:a.jsx("div",{style:{...Fn.medalFace,...i},children:a.jsx("div",{style:Fn.medalNumber,children:o})})}),a.jsxs("div",{style:Fn.cardBelow,children:[a.jsx("div",{style:{fontWeight:900,fontSize:16,lineHeight:1.2,textAlign:"center"},children:e.name}),a.jsxs("div",{style:{opacity:.9,fontSize:13,marginTop:4,textAlign:"center"},children:["Saldo: ",a.jsxs("b",{children:["$ ",Number(e.cash||0).toLocaleString()]}),a.jsx("br",{}),"Bens: ",a.jsxs("b",{children:["$ ",Number(e.bens||0).toLocaleString()]})]}),a.jsxs("div",{style:{marginTop:6,fontWeight:900,textAlign:"center"},children:["Patrimnio: ",a.jsxs("b",{children:["$ ",Number(e.patrimonio||0).toLocaleString()]})]})]})]})}function bl(t,e){return{ring:{background:`radial-gradient(circle at 35% 30%, ${e} 0%, ${t} 65%, #000 120%)`,boxShadow:"0 12px 30px rgba(0,0,0,.35), inset 0 0 12px rgba(255,255,255,.12)"},face:{background:`conic-gradient(from 0deg, ${e}, ${t}, ${e})`}}}const Fn={wrap:{pointerEvents:"auto",border:"1px solid rgba(255,255,255,.15)",background:"#11161f",color:"#eef1f6",borderRadius:16,padding:20,width:"min(900px, 92vw)",maxWidth:"92vw",textAlign:"center"},title:{margin:"0 0 6px",fontWeight:900,fontSize:28},subtitle:{margin:"0 0 14px",opacity:.9},podium:{display:"flex",alignItems:"flex-end",justifyContent:"center",gap:24,padding:"10px 0",flexWrap:"wrap"},medalCol:{display:"flex",flexDirection:"column",alignItems:"center"},ribbon:{width:16,height:70,background:"linear-gradient(#e41f1f,#9e1313)",borderRadius:4,marginBottom:-12},medal:{borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"3px solid rgba(255,255,255,.18)"},medalFace:{width:"85%",height:"85%",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 8px 18px rgba(0,0,0,.35), inset 0 -6px 10px rgba(255,255,255,.08)"},medalNumber:{fontWeight:900,fontSize:28,letterSpacing:1,textShadow:"0 2px 4px rgba(0,0,0,.45)"},cardBelow:{background:"#19202c",border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"10px 12px",width:220,marginTop:10},btn:{background:"#2a3342",color:"#fff",border:"1px solid rgba(255,255,255,.18)",borderRadius:10,padding:"10px 14px",fontWeight:800,cursor:"pointer"}},nm=E.createContext(null);function Nx({children:t}){const[e,n]=E.useState([]),r=E.useRef(null),o=d=>{const h=r.current;r.current=null,n(f=>f.slice(0,-1)),h&&h(d)},s=()=>o({action:"SKIP"}),i=()=>o(!1),l=d=>{var x;const h=((x=crypto==null?void 0:crypto.randomUUID)==null?void 0:x.call(crypto))||String(Date.now()+Math.random()),f=ge.cloneElement(d,{onResolve:y=>o(y)});n(y=>[...y,{id:h,el:f}])},u=()=>new Promise(d=>{r.current=d}),c=E.useMemo(()=>({pushModal:l,awaitTop:u,resolveTop:o,closeModal:s,popModal:i}),[]);return a.jsxs(nm.Provider,{value:c,children:[t,e.map(({id:d,el:h})=>a.jsx(ge.Fragment,{children:h},d))]})}const tn=()=>E.useContext(nm);function Dx({playerName:t="Jogador"}){const{resolveTop:e,closeModal:n}=tn();return a.jsx(ni,{width:700,onClose:n,children:a.jsx("div",{className:"bankruptcyModal",children:a.jsxs("div",{className:"paper",style:{padding:24},children:[a.jsx("h2",{style:{marginTop:0},children:"Declarar Falncia"}),a.jsxs("p",{children:["Tem certeza que deseja declarar ",a.jsx("b",{children:"Falncia"}),", ",a.jsx("b",{children:t}),"?",a.jsx("br",{}),"Esta ao  irreversvel e voc no poder mais jogar."]}),a.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:24},children:[a.jsx("button",{onClick:()=>{n(),e(!1)},className:"btn",children:"Cancelar"}),a.jsx("button",{onClick:()=>{n(),e(!0)},className:"btn btn-danger",children:"Sim, declarar falncia"})]})]})})})}const Xt={comum:{cap:2,baseFat:600,incFat:100,baseDesp:100,incDesp:100},inside:{cap:5,baseFat:1500,incFat:500,baseDesp:2e3,incDesp:100},field:{cap:5,baseFat:1500,incFat:500,baseDesp:2e3,incDesp:100}},Du={baseDesp:3e3,incDesp:500,boostByCert:[.2,.3,.4,.6]},rm={A:{fat:1200,desp:700},B:{fat:600,desp:400},C:{fat:300,desp:200},D:{fat:100,desp:50}},om={A:{fat:1e3,desp:400},B:{fat:500,desp:200},C:{fat:200,desp:100},D:{fat:70,desp:50}},Zt=t=>Number(t||0),cr=(t={},e)=>{var n;return new Set(((n=t==null?void 0:t.trainingsByVendor)==null?void 0:n[e])||[]).size},Ax=t=>cr(t,"gestor");function ha(t={}){const e=Math.max(0,Zt(t.vendedoresComuns)),n=Math.max(0,Zt(t.insideSales)),r=Math.max(0,Zt(t.fieldSales)),o=e*Xt.comum.cap,s=n*Xt.inside.cap,i=r*Xt.field.cap,l=o+s+i,u=Math.max(0,Zt(t.clients)),c=Math.min(u,l);return{cap:l,inAtt:c}}function $a(t={}){var R,S;const e=Zt(t.vendedoresComuns),n=Zt(t.insideSales),r=Zt(t.fieldSales),o=Zt(t.gestores??t.gestoresComerciais??t.managers),s=cr(t,"comum"),i=cr(t,"inside"),l=cr(t,"field"),u=cr(t,"gestor"),c=e*(Xt.comum.baseFat+Xt.comum.incFat*s),d=n*(Xt.inside.baseFat+Xt.inside.incFat*i),h=r*(Xt.field.baseFat+Xt.field.incFat*l);let f=c+d+h;const x=e+n+r,y=x>0?Math.min(1,o*7/x):0,b=Du.boostByCert[Math.min(3,Math.max(0,u))]||0;f=f*(1+y*b);const _=String(t.mixProdutos||"D").toUpperCase(),p=(((R=rm[_])==null?void 0:R.fat)||0)*Zt(t.clients),m=String(t.erpLevel||"D").toUpperCase(),g=x+o,w=(((S=om[m])==null?void 0:S.fat)||0)*g,j=Zt(t.revenue);return Math.max(0,Math.floor(f+p+w+j))}function Ia(t={}){var j,N;const e=Zt(t.vendedoresComuns),n=Zt(t.insideSales),r=Zt(t.fieldSales),o=Zt(t.gestores??t.gestoresComerciais??t.managers),s=cr(t,"comum"),i=cr(t,"inside"),l=cr(t,"field"),u=cr(t,"gestor"),c=e*(Xt.comum.baseDesp+Xt.comum.incDesp*s),d=n*(Xt.inside.baseDesp+Xt.inside.incDesp*i),h=r*(Xt.field.baseDesp+Xt.field.incDesp*l),f=o*(Du.baseDesp+Du.incDesp*u),x=String(t.mixProdutos||"D").toUpperCase(),y=(((j=rm[x])==null?void 0:j.desp)||0)*Zt(t.clients),b=String(t.erpLevel||"D").toUpperCase(),_=e+n+r+o,p=(((N=om[b])==null?void 0:N.desp)||0)*_;return Math.max(0,Math.floor(c+d+h+f+y+p+0+1e3))}function At(t,e={}){var o,s;const n={...t},r=(i,l)=>{n[i]=(n[i]??0)+l};if(Number.isFinite(e.cashDelta)&&r("cash",Number(e.cashDelta)),Number.isFinite(e.clientsDelta)&&r("clients",Number(e.clientsDelta)),Number.isFinite(e.manutencaoDelta)&&r("manutencao",Number(e.manutencaoDelta)),Number.isFinite(e.bensDelta)&&r("bens",Number(e.bensDelta)),Number.isFinite(e.vendedoresComunsDelta)&&r("vendedoresComuns",Number(e.vendedoresComunsDelta)),Number.isFinite(e.fieldSalesDelta)&&r("fieldSales",Number(e.fieldSalesDelta)),Number.isFinite(e.insideSalesDelta)&&r("insideSales",Number(e.insideSalesDelta)),Number.isFinite(e.gestoresDelta)){const i=Number(e.gestoresDelta);n.gestores=(n.gestores??0)+i,n.gestoresComerciais=(n.gestoresComerciais??0)+i,n.managers=(n.managers??0)+i}if(Number.isFinite(e.revenueDelta)&&r("revenue",Number(e.revenueDelta)),typeof e.mixProdutosSet<"u"){n.mixProdutos=e.mixProdutosSet;const i=String(e.mixProdutosSet).toUpperCase();["A","B","C","D"].includes(i)&&(n.mixOwned={...n.mixOwned||{},[i]:!0},(o=n.reducedLevels)!=null&&o.MIX&&(n.reducedLevels={...n.reducedLevels,MIX:n.reducedLevels.MIX.filter(l=>l!==i)}))}if(e.mixBaseSet&&(n.mixBase={...n.mixBase||{},...e.mixBaseSet}),typeof e.erpLevelSet<"u"){n.erpLevel=e.erpLevelSet;const i=String(e.erpLevelSet).toUpperCase();["A","B","C","D"].includes(i)&&(n.erpOwned={...n.erpOwned||{},[i]:!0},(s=n.reducedLevels)!=null&&s.ERP&&(n.reducedLevels={...n.reducedLevels,ERP:n.reducedLevels.ERP.filter(l=>l!==i)}))}return Array.isArray(e.trainingsPush)&&e.trainingsPush.length&&(n.trainings=[...n.trainings||[],...e.trainingsPush]),Array.isArray(e.directBuysPush)&&e.directBuysPush.length&&(n.directBuys=[...n.directBuys||[],...e.directBuysPush]),n}function uf(t,e){const{purchases:n=[],grandTotal:r=0}=e||{},o={personalizado:"az",fieldsales:"am",imersaomultiplier:"rox"},s={...t};return s.cash=(s.cash??0)-Number(r||0),s.bens=(s.bens??0)+Number(r||0),s.onboarding=!0,n.forEach(i=>{var h;const{vendorType:l,items:u=[]}=i||{};u.forEach(f=>{const x=o[f==null?void 0:f.id];x&&(s[x]=(s[x]??0)+1)});const c=String(l||"comum"),d=new Set(((h=s.trainingsByVendor)==null?void 0:h[c])||[]);u.forEach(f=>{f!=null&&f.id&&d.add(f.id)}),s.trainingsByVendor={...s.trainingsByVendor||{},[c]:Array.from(d)}}),s}function wl(t,e,n){return t===e?!1:t<e?n>t&&n<=e:n>t||n<=e}function Rs(t){return t.reduce((e,n)=>e+(n!=null&&n.bankrupt?0:1),0)}function us(t,e){var s;const n=t.length;if(n===0)return 0;let r=(e+1)%n,o=0;for(;o<n;){if(!((s=t[r])!=null&&s.bankrupt))return r;r=(r+1)%n,o++}return e}class sm{constructor(){this.errors=[],this.warnings=[]}validateGameState(e,n,r,o,s){return this.errors=[],this.warnings=[],this.validatePlayers(e),this.validateTurnState(e,n),this.validateGameOverState(e,o,s),this.validateRoundState(e,r),{isValid:this.errors.length===0,errors:this.errors,warnings:this.warnings}}validatePlayers(e){if(!Array.isArray(e)||e.length===0){this.addError("Jogadores invlidos: deve ser um array no vazio");return}e.forEach((n,r)=>{this.validatePlayer(n,r)}),this.validatePlayerUniqueness(e),this.validateAlivePlayers(e)}validatePlayer(e,n){const r=`Jogador ${n+1} (${e.name||"Sem nome"})`;e.id||this.addError(`${r}: ID  obrigatrio`),(typeof e.cash!="number"||e.cash<0)&&this.addError(`${r}: Cash deve ser um nmero no negativo (atual: ${e.cash})`),(typeof e.clients!="number"||e.clients<0)&&this.addError(`${r}: Clientes deve ser um nmero no negativo (atual: ${e.clients})`),this.validateResourceCounts(e,r),this.validateCalculations(e,r)}validateResourceCounts(e,n){["vendedoresComuns","fieldSales","insideSales","gestores","gestoresComerciais","managers"].forEach(s=>{const i=e[s];i!==void 0&&(typeof i!="number"||i<0)&&this.addError(`${n}: ${s} deve ser um nmero no negativo (atual: ${i})`)}),["az","am","rox"].forEach(s=>{const i=e[s];i!==void 0&&(typeof i!="number"||i<0)&&this.addError(`${n}: Certificado ${s} deve ser um nmero no negativo (atual: ${i})`)})}validateCalculations(e,n){try{const r=$a(e),o=Ia(e),{cap:s,inAtt:i}=ha(e);(typeof r!="number"||r<0)&&this.addError(`${n}: Faturamento calculado invlido: ${r}`),(typeof o!="number"||o<0)&&this.addError(`${n}: Manuteno calculada invlida: ${o}`),(typeof s!="number"||s<0)&&this.addError(`${n}: Capacidade calculada invlida: ${s}`),(typeof i!="number"||i<0||i>s)&&this.addError(`${n}: Clientes em atendimento invlido: ${i} (capacidade: ${s})`),this.isInitialState(e)&&o!==1150&&this.addError(`${n}: Manuteno inicial deve ser 1150, mas  ${o}`)}catch(r){this.addError(`${n}: Erro ao calcular faturamento/manuteno: ${r.message}`)}}isInitialState(e){return e.vendedoresComuns===1&&e.clients===1&&e.fieldSales===0&&e.insideSales===0&&e.gestores===0&&e.mixProdutos==="D"&&e.erpLevel==="D"&&(e.az||0)===0&&(e.am||0)===0&&(e.rox||0)===0}validatePlayerUniqueness(e){const n=e.map(o=>o.id).filter(Boolean),r=new Set(n);n.length!==r.size&&this.addError("IDs de jogadores devem ser nicos")}validateAlivePlayers(e){const n=Rs(e);n===0&&this.addError("No pode haver zero jogadores vivos"),n===1&&this.addWarning("Apenas 1 jogador vivo - jogo deve terminar")}validateTurnState(e,n){if(typeof n!="number"||n<0||n>=e.length){this.addError(`TurnIdx invlido: ${n} (deve estar entre 0 e ${e.length-1})`);return}const r=e[n];if(!r){this.addError(`Jogador do turno no encontrado no ndice ${n}`);return}r.bankrupt&&this.addError(`Jogador do turno (${r.name}) est falido`)}validateGameOverState(e,n,r){const o=Rs(e);n&&o>1&&this.addError("Jogo marcado como terminado mas h mais de 1 jogador vivo"),n&&!r&&this.addError("Jogo terminado mas no h vencedor definido"),r&&!n&&this.addError("H vencedor definido mas jogo no terminou"),r&&r.bankrupt&&this.addError("Vencedor no pode estar falido")}validateRoundState(e,n){(typeof n!="number"||n<1)&&this.addError(`Rodada invlida: ${n} (deve ser >= 1)`),n>10&&this.addWarning(`Rodada muito alta: ${n} (jogo pode estar travado)`)}validateAction(e,n,r){switch(this.errors=[],this.warnings=[],e.type){case"MOVE":this.validateMoveAction(e,n);break;case"BUY":this.validateBuyAction(e,n);break;case"HIRE":this.validateHireAction(e,n);break;case"BANKRUPT":this.validateBankruptAction(e,n);break;default:this.addWarning(`Tipo de ao no reconhecido: ${e.type}`)}return{isValid:this.errors.length===0,errors:this.errors,warnings:this.warnings}}validateMoveAction(e,n){(typeof e.steps!="number"||e.steps<1||e.steps>6)&&this.addError(`Passos invlidos: ${e.steps} (deve estar entre 1 e 6)`)}validateBuyAction(e,n){const r=e.cost||e.price||0;r>n.cash&&this.addError(`Saldo insuficiente: precisa de ${r}, tem ${n.cash}`)}validateHireAction(e,n){const r=e.cost||0;r>n.cash&&this.addError(`Saldo insuficiente para contratao: precisa de ${r}, tem ${n.cash}`)}validateBankruptAction(e,n){n.bankrupt||this.addWarning("Jogador declarando falncia mas no est marcado como falido")}addError(e){this.errors.push(e)}addWarning(e){this.warnings.push(e)}}function Tx(t,e,n,r,o){return new sm().validateGameState(t,e,n,r,o)}function Ox(t,e,n){return new sm().validateAction(t,e,n)}class Px{constructor(){this.enabled=!1,this.logs=[],this.maxLogs=1e4,this.originalConsole={log:console.log,warn:console.warn,error:console.error,debug:console.debug,info:console.info},this.prefixes=["[DEBUG]","[NET]","[App]","[SG]","[Controls]","[HUD]","[DEBUG MODE]","[PlayersLobby]","[leaveRoom]","[GameNet]","[useTurnEngine]","[useGameSync]"]}shouldCapture(e){if(!this.enabled)return!1;const n=e.map(r=>{if(typeof r=="object")try{return JSON.stringify(r)}catch{return String(r)}return String(r)}).join(" ");return this.prefixes.some(r=>n.includes(r))}addLog(e,n){this.logs.length>=this.maxLogs&&(this.logs=this.logs.slice(-Math.floor(this.maxLogs*.9)));const r=Date.now(),o={timestamp:r,time:new Date(r).toISOString(),level:e,args:n.map(s=>{if(typeof s=="object"&&s!==null)try{return JSON.parse(JSON.stringify(s,(i,l)=>typeof l=="function"?"[Function]":l===void 0?"[undefined]":Array.isArray(l)&&l.length>100?`[Array(${l.length}) - truncado]`:l))}catch{return String(s)}return s}),message:n.map(s=>{if(typeof s=="object")try{return JSON.stringify(s)}catch{return String(s)}return String(s)}).join(" ")};this.logs.push(o)}interceptLog(...e){this.shouldCapture(e)&&this.addLog("log",e),this.originalConsole.log.apply(console,e)}interceptWarn(...e){this.shouldCapture(e)&&this.addLog("warn",e),this.originalConsole.warn.apply(console,e)}interceptError(...e){this.addLog("error",e),this.originalConsole.error.apply(console,e)}interceptDebug(...e){this.shouldCapture(e)&&this.addLog("debug",e),this.originalConsole.debug.apply(console,e)}interceptInfo(...e){this.shouldCapture(e)&&this.addLog("info",e),this.originalConsole.info.apply(console,e)}enable(){this.enabled||(this.enabled=!0,console.log=this.interceptLog.bind(this),console.warn=this.interceptWarn.bind(this),console.error=this.interceptError.bind(this),console.debug=this.interceptDebug.bind(this),console.info=this.interceptInfo.bind(this),console.log("[LogCapture]  Captura de logs ativada"))}disable(){this.enabled&&(this.enabled=!1,console.log=this.originalConsole.log,console.warn=this.originalConsole.warn,console.error=this.originalConsole.error,console.debug=this.originalConsole.debug,console.info=this.originalConsole.info,console.log("[LogCapture]  Captura de logs desativada"))}clear(){this.logs=[],console.log("[LogCapture]  Histrico de logs limpo")}getLogs(){return[...this.logs]}getStats(){const e=this.logs.length,n={log:0,warn:0,error:0,debug:0,info:0};return this.logs.forEach(r=>{n[r.level]=(n[r.level]||0)+1}),{total:e,byLevel:n,enabled:this.enabled}}exportAsText(){const e=["=".repeat(80),"RELATRIO DE LOGS - Sales Game","=".repeat(80),`Data/Hora: ${new Date().toISOString()}`,`Total de logs: ${this.logs.length}`,`Estatsticas: ${JSON.stringify(this.getStats(),null,2)}`,"=".repeat(80),""];return this.logs.forEach(n=>{const r={log:"",warn:"",error:"",debug:"",info:""}[n.level]||"";e.push(`[${n.time}] ${r} [${n.level.toUpperCase()}]`),n.args.forEach((o,s)=>{typeof o=="object"?e.push(`  Arg ${s+1}: ${JSON.stringify(o,null,2)}`):e.push(`  Arg ${s+1}: ${o}`)}),e.push("")}),e.join(`
`)}exportAsJSON(){return{timestamp:new Date().toISOString(),stats:this.getStats(),logs:this.logs}}exportFull(){return{timestamp:new Date().toISOString(),stats:this.getStats(),text:this.exportAsText(),json:this.exportAsJSON()}}}const tr=new Px,Lx=()=>tr.clear(),Au=()=>tr.getStats(),$x=()=>tr.exportAsText(),Ix=()=>tr.exportAsJSON();class Mx{constructor(){this.enabled=!1,this.validationHistory=[],this.maxHistorySize=100}toggle(){return this.enabled=!this.enabled,this.enabled&&tr.enable(),console.log(`[DEBUG MODE] ${this.enabled?"ATIVADO":"DESATIVADO"}`),this.enabled}validateGameState(e,n,r,o,s,i=""){if(!this.enabled)return;const l=Tx(e,n,r,o,s);return this.addToHistory({type:"GAME_STATE",context:i,timestamp:Date.now(),result:l}),l.isValid||console.error("[DEBUG MODE]  Estado do jogo invlido:",l.errors),l.warnings.length>0&&console.warn("[DEBUG MODE]  Avisos:",l.warnings),l}validateAction(e,n,r,o=""){if(!this.enabled)return;const s=Ox(e,n,r);return this.addToHistory({type:"ACTION",context:o,timestamp:Date.now(),action:e.type,player:n.name,result:s}),s.isValid||console.error(`[DEBUG MODE]  Ao invlida (${e.type}):`,s.errors),s}validateResourceChange(e,n,r,o){if(!this.enabled)return;const s=[],i=[];if(n.clients!==r.clients){const c=r.clients-n.clients;r.clients<0&&s.push(`Clientes no pode ser negativo: ${r.clients}`),Math.abs(c)>10&&i.push(`Mudana grande de clientes: ${c}`)}if(n.cash!==r.cash){const c=r.cash-n.cash;r.cash<0&&s.push(`Cash no pode ser negativo: ${r.cash}`),Math.abs(c)>5e4&&i.push(`Mudana grande de cash: ${c}`)}["vendedoresComuns","fieldSales","insideSales","gestores"].forEach(c=>{if(n[c]!==r[c]){const d=r[c]-n[c];r[c]<0&&s.push(`${c} no pode ser negativo: ${r[c]}`),Math.abs(d)>5&&i.push(`Mudana grande de ${c}: ${d}`)}});const u={isValid:s.length===0,errors:s,warnings:i};return this.addToHistory({type:"RESOURCE_CHANGE",context:o,timestamp:Date.now(),player:e.name,oldState:n,newState:r,result:u}),u.isValid||console.error("[DEBUG MODE]  Mudana de recurso invlida:",u.errors),u}validateCalculations(e,n=""){if(this.enabled)try{const r=$a(e),o=Ia(e),{cap:s,inAtt:i}=ha(e),l=[],u=[];(typeof r!="number"||r<0)&&l.push(`Faturamento invlido: ${r}`),(typeof o!="number"||o<0)&&l.push(`Manuteno invlida: ${o}`),(typeof s!="number"||s<0)&&l.push(`Capacidade invlida: ${s}`),(typeof i!="number"||i<0||i>s)&&l.push(`Clientes em atendimento invlido: ${i} (capacidade: ${s})`),this.isInitialState(e)&&o!==1150&&l.push(`Manuteno inicial deve ser 1150, mas  ${o}`);const c={isValid:l.length===0,errors:l,warnings:u,calculations:{faturamento:r,manutencao:o,cap:s,inAtt:i}};return this.addToHistory({type:"CALCULATIONS",context:n,timestamp:Date.now(),player:e.name,result:c}),c.isValid||console.error("[DEBUG MODE]  Clculos invlidos:",c.errors),c}catch(r){return console.error("[DEBUG MODE]  Erro ao validar clculos:",r),{isValid:!1,errors:[r.message],warnings:[]}}}isInitialState(e){return e.vendedoresComuns===1&&e.clients===1&&e.fieldSales===0&&e.insideSales===0&&e.gestores===0&&e.mixProdutos==="D"&&e.erpLevel==="D"}addToHistory(e){this.validationHistory.unshift(e),this.validationHistory.length>this.maxHistorySize&&(this.validationHistory=this.validationHistory.slice(0,this.maxHistorySize))}getHistory(){return this.validationHistory}clearHistory(){this.validationHistory=[]}getStats(){const e=this.validationHistory.length,n=this.validationHistory.filter(o=>!o.result.isValid).length,r=this.validationHistory.filter(o=>o.result.warnings.length>0).length;return{total:e,errors:n,warnings:r,errorRate:e>0?n/e*100:0,warningRate:e>0?r/e*100:0}}exportReport(){const e=this.getStats(),n={timestamp:new Date().toISOString(),stats:e,history:this.validationHistory};return console.log("[DEBUG MODE]  Relatrio de validao:",n),n}exportFullReport(){const e=this.exportReport(),n=tr.exportFull();return{timestamp:new Date().toISOString(),validation:e,logs:n,text:this.exportFullReportAsText(e,n)}}exportFullReportAsText(e,n){return["=".repeat(80),"RELATRIO COMPLETO DE DEBUG - Sales Game","=".repeat(80),`Data/Hora: ${new Date().toISOString()}`,"","--- VALIDAES ---",`Total de validaes: ${e.stats.total}`,`Erros: ${e.stats.errors}`,`Avisos: ${e.stats.warnings}`,`Taxa de erro: ${e.stats.errorRate.toFixed(2)}%`,"","--- LOGS CAPTURADOS ---",`Total de logs: ${n.stats.total}`,`Logs por nvel: ${JSON.stringify(n.stats.byLevel,null,2)}`,"","--- HISTRICO DE VALIDAES ---",...e.history.map(o=>`[${new Date(o.timestamp).toISOString()}] ${o.type} - ${o.context||""} - ${JSON.stringify(o.result,null,2)}`),"","--- LOGS DETALHADOS ---",n.text,"=".repeat(80)].join(`
`)}}const ao=new Mx,Bx=(t,e,n,r,o,s)=>ao.validateGameState(t,e,n,r,o,s),Ux=(t,e)=>ao.validateCalculations(t,e),cf=()=>ao.getStats(),zx=()=>ao.exportReport(),im=()=>ao.exportFullReport();function Fx({players:t,turnIdx:e,round:n,gameOver:r,winner:o}){const[s,i]=E.useState(!1),[l,u]=E.useState({total:0,errors:0,warnings:0,errorRate:0,warningRate:0}),[c,d]=E.useState({total:0,byLevel:{},enabled:!1}),[h,f]=E.useState(!1),[x,y]=E.useState({x:0,y:0}),[b,_]=E.useState({x:0,y:0}),p=E.useRef(null);E.useEffect(()=>{const A=()=>{u(cf()),d(Au())};A();const v=setInterval(A,1e3);return()=>clearInterval(v)},[]);const m=()=>{const A=ao.toggle();i(A)},g=()=>{const A=zx(),v=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),D=URL.createObjectURL(v),T=document.createElement("a");T.href=D,T.download=`debug-report-${new Date().toISOString().slice(0,19)}.json`,T.click(),URL.revokeObjectURL(D)},w=()=>{const A=im(),v=new Blob([A.text],{type:"text/plain;charset=utf-8"}),D=URL.createObjectURL(v),T=document.createElement("a");T.href=D,T.download=`debug-logs-completo-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`,T.click(),URL.revokeObjectURL(D);const I=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),ee=URL.createObjectURL(I),te=document.createElement("a");te.href=ee,te.download=`debug-logs-completo-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,te.click(),URL.revokeObjectURL(ee),console.log("[DebugPanel]  Relatrio completo exportado (texto + JSON)")},j=()=>{ao.clearHistory(),Lx(),u(cf()),d(Au()),console.log("[DebugPanel]  Todos os logs foram limpos")},N=A=>{if(A.target.closest("button"))return;f(!0);const v=p.current.getBoundingClientRect();_({x:A.clientX-v.left,y:A.clientY-v.top})},R=A=>{h&&y({x:A.clientX-b.x,y:A.clientY-b.y})},S=()=>{f(!1)};return E.useEffect(()=>{if(h)return document.addEventListener("mousemove",R),document.addEventListener("mouseup",S),()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",S)}},[h,b]),s?a.jsxs("div",{ref:p,style:{position:"fixed",top:x.y||10,left:x.x||10,zIndex:9999,background:"#1a1a1a",color:"#fff",padding:"12px",borderRadius:"8px",border:"1px solid #333",minWidth:"300px",maxHeight:"80vh",overflow:"auto",fontSize:"12px",fontFamily:"monospace",cursor:h?"grabbing":"grab",userSelect:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},onMouseDown:N,children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[a.jsx("h3",{style:{margin:0,color:"#4CAF50"},children:" Debug Panel"}),a.jsx("button",{onClick:m,style:{background:"#ff4444",color:"#fff",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",fontSize:"10px"},children:""})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estatsticas de Validao"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Total: ",l.total]}),a.jsxs("div",{style:{color:l.errors>0?"#ff4444":"#4CAF50"},children:["Erros: ",l.errors]}),a.jsxs("div",{style:{color:l.warnings>0?"#FFC107":"#4CAF50"},children:["Avisos: ",l.warnings]}),a.jsxs("div",{children:["Taxa Erro: ",l.errorRate.toFixed(1),"%"]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estatsticas de Logs"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Total: ",c.total]}),a.jsxs("div",{style:{color:c.enabled?"#4CAF50":"#ff4444"},children:["Status: ",c.enabled?" Ativo":" Inativo"]}),c.byLevel&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Logs: ",c.byLevel.log||0]}),a.jsxs("div",{style:{color:"#FFC107"},children:["Warns: ",c.byLevel.warn||0]}),a.jsxs("div",{style:{color:"#ff4444"},children:["Errors: ",c.byLevel.error||0]}),a.jsxs("div",{children:["Debug: ",c.byLevel.debug||0]})]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estado do Jogo"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Jogadores: ",t.length]}),a.jsxs("div",{children:["Turno: ",e+1]}),a.jsxs("div",{children:["Rodada: ",n]}),a.jsxs("div",{style:{color:r?"#ff4444":"#4CAF50"},children:["Status: ",r?"Fim":"Ativo"]}),o&&a.jsxs("div",{children:["Vencedor: ",o.name]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Jogadores"}),t.map((A,v)=>{var D;return a.jsxs("div",{style:{background:v===e?"#333":"transparent",padding:"4px",borderRadius:"4px",marginBottom:"2px",border:A.bankrupt?"1px solid #ff4444":"1px solid transparent"},children:[a.jsxs("div",{style:{fontWeight:"bold"},children:[A.name," ",A.bankrupt?"":""," ",v===e?"":""]}),a.jsxs("div",{style:{fontSize:"10px",opacity:.8},children:["Cash: $",((D=A.cash)==null?void 0:D.toLocaleString())||0," | Clientes: ",A.clients||0," | Vendedores: ",A.vendedoresComuns||0]})]},A.id)})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[a.jsx("button",{onClick:w,style:{background:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px",fontWeight:"bold"},title:"Exporta relatrio completo com todos os logs (texto + JSON)",children:" Exportar Logs Completos"}),a.jsx("button",{onClick:g,style:{background:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px"},title:"Exporta apenas relatrio de validao (JSON)",children:" Exportar Validao"}),a.jsx("button",{onClick:j,style:{background:"#FF9800",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px"},title:"Limpa todos os logs e histrico de validao",children:" Limpar Tudo"})]}),a.jsxs("div",{style:{marginTop:"12px",padding:"8px",background:"#333",borderRadius:"4px",fontSize:"10px"},children:[a.jsx("div",{style:{color:"#FFC107",marginBottom:"4px"},children:" Instrues:"}),a.jsx("div",{children:' Clique em " Debug" para ativar/desativar'}),a.jsx("div",{children:" Logs so capturados automaticamente quando debug est ativo"}),a.jsx("div",{children:' " Exportar Logs Completos" gera arquivo .txt e .json'}),a.jsx("div",{children:" Compartilhe o arquivo .txt para anlise de problemas"}),a.jsx("div",{children:" Todos os console.log com prefixos [DEBUG], [NET], [App], etc. so capturados"})]})]}):a.jsx("div",{style:{background:"#1a1a1a",color:"#fff",padding:"6px 10px",borderRadius:"4px",border:"1px solid #333",cursor:"pointer",fontSize:"11px",fontFamily:"monospace",display:"inline-block",userSelect:"none"},onClick:m,children:" Debug"})}function gr({onResolve:t,requiredAmount:e=0,currentCash:n=0,title:r="Saldo insuficiente",message:o="Seu saldo atual no  suficiente para concluir esta compra.",okLabel:s="OK",showRecoveryOptions:i=!1,canClose:l=!0}){const u=E.useRef(null),c=E.useMemo(()=>Math.max(0,Number(e||0)-Number(n||0)),[e,n]),d=b=>`$ ${Number(b||0).toLocaleString()}`,h=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"ACK"})},f=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),!(i||!l)&&(t==null||t({action:"SKIP"}))},x=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"RECOVERY"})},y=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"BANKRUPT"})};return E.useEffect(()=>{const b=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var _,p;return(p=(_=u.current)==null?void 0:_.focus)==null?void 0:p.call(_)},0),()=>{document.body.style.overflow=b}},[]),a.jsx("div",{style:un.wrap,role:"dialog","aria-modal":"true",onMouseDown:b=>{b.target===b.currentTarget&&b.stopPropagation()},children:a.jsxs("div",{style:un.card,onMouseDown:b=>b.stopPropagation(),children:[!i&&l&&a.jsx("button",{type:"button",style:un.close,onClick:f,"aria-label":"Fechar",children:""}),a.jsx("div",{style:un.icon,children:""}),a.jsx("h2",{style:un.title,children:r}),a.jsx("p",{style:un.msg,children:o}),a.jsxs("div",{style:un.grid,children:[a.jsxs("div",{style:un.row,children:[a.jsx("span",{children:"Necessrio:"}),a.jsx("b",{children:d(e)})]}),a.jsxs("div",{style:un.row,children:[a.jsx("span",{children:"Seu saldo:"}),a.jsx("b",{children:d(n)})]}),a.jsxs("div",{style:{...un.row,color:"#fca5a5"},children:[a.jsx("span",{children:"Faltam:"}),a.jsx("b",{children:d(c)})]})]}),a.jsx("div",{style:un.actions,children:i?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",style:{...un.btn,background:"#f59e0b",color:"#fff",marginRight:"8px"},onClick:x,children:"Recuperao Financeira"}),a.jsx("button",{type:"button",style:{...un.btn,background:"#dc2626",color:"#fff"},onClick:y,children:"Declarar Falncia"})]}):a.jsx("button",{ref:u,type:"button",style:{...un.btn,background:"#6b7280",color:"#fff"},onClick:h,children:s})})]})})}const un={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"grid",placeItems:"center",zIndex:1100},card:{width:"min(440px, 92vw)",background:"#1f2330",color:"#e9ecf1",borderRadius:16,padding:"18px 18px 16px",border:"1px solid rgba(255,255,255,.12)",boxShadow:"0 18px 50px rgba(0,0,0,.5)",position:"relative"},close:{position:"absolute",right:10,top:10,width:34,height:34,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},icon:{fontSize:28,lineHeight:1,marginBottom:6},title:{margin:"2px 0 6px",fontWeight:900,fontSize:20},msg:{opacity:.95,margin:"0 0 10px"},grid:{border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",marginBottom:12,background:"#171b26"},row:{display:"flex",justifyContent:"space-between",padding:"4px 0"},actions:{display:"flex",justifyContent:"center",marginTop:6},btn:{minWidth:120,padding:"10px 16px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer"}},cn={A:{compra:1e4,despesa:400,faturamento:1e3,color:"#1d4ed8",pill:"NVEL A"},B:{compra:4e3,despesa:200,faturamento:500,color:"#16a34a",pill:"NVEL B"},C:{compra:1500,despesa:100,faturamento:200,color:"#f59e0b",pill:"NVEL C"},D:{compra:500,despesa:50,faturamento:70,color:"#6b7280",pill:"NVEL D"}};function df({onResolve:t,currentCash:e=0,currentLevel:n=null,erpOwned:r=null}){const o=E.useRef(null),{pushModal:s,awaitTop:i}=tn(),l=c=>{var d,h;(d=c==null?void 0:c.preventDefault)==null||d.call(c),(h=c==null?void 0:c.stopPropagation)==null||h.call(c),t==null||t({action:"SKIP"})},u=async c=>{if(r?r[c]===!0:n===c)return;const h=cn[c],f=Number((h==null?void 0:h.compra)||0),x=Number(e||0);if(x<f){s(a.jsx(gr,{requiredAmount:f,currentCash:x,title:"Saldo insuficiente para comprar ERP",message:`Voc precisa de $ ${f.toLocaleString()} para o ERP nvel ${c}, mas possui $ ${x.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",level:c,values:h})};return E.useEffect(()=>{const c=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var d,h;return(h=(d=o.current)==null?void 0:d.focus)==null?void 0:h.call(d)},0),()=>{document.body.style.overflow=c}},[]),a.jsx("div",{style:nt.wrap,role:"dialog","aria-modal":"true","aria-label":"ERP/Sistemas",children:a.jsxs("div",{style:nt.card,children:[a.jsx("button",{ref:o,type:"button",style:nt.close,onClick:l,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:nt.title,children:["Escolha o nvel de ",a.jsx("b",{children:"ERP / Sistemas"}),":"]}),a.jsxs("div",{style:nt.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"ERP / SISTEMAS"}),a.jsxs("div",{children:[a.jsx("b",{children:"Impacto mensal:"})," adiciona ",a.jsx("b",{children:"Despesa"})," e ",a.jsx("b",{children:"Faturamento"})," de acordo com o nvel."]}),a.jsxs("div",{children:["O nvel ",a.jsx("b",{children:"D"})," tambm pode ser adquirido."]})]}),a.jsxs("div",{style:nt.saldo,children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsxs("div",{style:nt.table,children:[a.jsxs("div",{style:nt.trHead,children:[a.jsx("div",{style:nt.th}),a.jsx("div",{style:{...nt.th,background:"#10214d"},children:"Nvel A"}),a.jsx("div",{style:{...nt.th,background:"#0f3a1c"},children:"Nvel B"}),a.jsx("div",{style:{...nt.th,background:"#4a3705"},children:"Nvel C"}),a.jsx("div",{style:{...nt.th,background:"#2a2f3b"},children:"Nvel D"})]}),a.jsx(Sl,{label:"COMPRA",fmt:!0,vA:cn.A.compra,vB:cn.B.compra,vC:cn.C.compra,vD:cn.D.compra}),a.jsx(Sl,{label:"DESPESA",fmt:!0,vA:cn.A.despesa,vB:cn.B.despesa,vC:cn.C.despesa,vD:cn.D.despesa}),a.jsx(Sl,{label:"FATURAMENTO",fmt:!0,vA:cn.A.faturamento,vB:cn.B.faturamento,vC:cn.C.faturamento,vD:cn.D.faturamento})]}),a.jsx("div",{style:nt.cards,children:["A","B","C","D"].map(c=>{const d=cn[c],h=r?r[c]===!0:n===c,f=h;return a.jsxs("div",{style:{...nt.cardItem,borderColor:h?"#16a34a":"rgba(255,255,255,.15)",opacity:f?.6:1},children:[a.jsx("div",{style:{...nt.pill,background:h?"#16a34a":"#fff",color:h?"#fff":"#111"},children:h?" ADQUIRIDO":d.pill}),a.jsx("div",{style:{...nt.cardBadge,background:d.color}}),a.jsxs("ul",{style:nt.lines,children:[a.jsxs("li",{children:["Compra: ",a.jsxs("b",{children:["$ ",d.compra.toLocaleString()]})]}),a.jsxs("li",{children:["Despesa: ",a.jsxs("b",{children:["$ ",d.despesa.toLocaleString()]})]}),a.jsxs("li",{children:["Faturamento: ",a.jsxs("b",{children:["$ ",d.faturamento.toLocaleString()]})]})]}),a.jsx("button",{type:"button",style:{...nt.buyBtn,background:f?"#6b7280":"#2442f9",cursor:f?"not-allowed":"pointer"},onClick:()=>u(c),disabled:f,title:f?`ERP nvel ${c} j adquirido`:`Comprar ERP nvel ${c}`,children:f?"J Adquirido":`Comprar ${c}`})]},c)})}),a.jsx("div",{style:nt.actions,children:a.jsx("button",{type:"button",style:{...nt.bigBtn,background:"#444"},onClick:l,children:"No comprar"})})]})})}function Sl({label:t,vA:e,vB:n,vC:r,vD:o,fmt:s}){const i=l=>s?`$ ${Number(l).toLocaleString()}`:l;return a.jsxs("div",{style:nt.tr,children:[a.jsx("div",{style:{...nt.td,fontWeight:700},children:t}),a.jsx("div",{style:nt.td,children:i(e)}),a.jsx("div",{style:nt.td,children:i(n)}),a.jsx("div",{style:nt.td,children:i(r)}),a.jsx("div",{style:nt.td,children:i(o)})]})}const nt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldo:{margin:"0 0 10px",padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,overflow:"hidden",marginBottom:12},trHead:{display:"grid",gridTemplateColumns:"1fr repeat(4, 1fr)",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"1fr repeat(4, 1fr)",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255/.06)"},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,marginTop:8},cardItem:{background:"#0f1320",border:"1px solid",borderRadius:14,padding:"12px",display:"flex",flexDirection:"column",gap:8},cardBadge:{width:"100%",height:6,borderRadius:999,opacity:.9},pill:{alignSelf:"flex-start",fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999,color:"#111"},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},buyBtn:{marginTop:"auto",padding:"10px 12px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer",background:"#2442f9",color:"#fff"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:14},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",color:"#fff",fontWeight:900,cursor:"pointer"}},ki=[{id:"personalizado",label:`Treinamento de venda personalizado
Casagrande Consultores`,price:500,cert:"azul",colors:{bg:"#0f2848",border:"#3b82f6",pill:"#60a5fa"}},{id:"fieldsales",label:`Curso Field Sales Collab
Multiplier Educao e
Casagrande Consultores`,price:500,cert:"amarelo",colors:{bg:"#3a3202",border:"#facc15",pill:"#fde047"}},{id:"imersaomultiplier",label:`Pacote Imerses
Multiplier Educao`,price:500,cert:"roxo",colors:{bg:"#2b0840",border:"#a855f7",pill:"#c084fc"}}];function ff({onResolve:t,ownedByType:e={},canTrain:n={}}){const r=S=>typeof S=="string"&&S.trim()!==""&&!Number.isNaN(Number(S))?Number(S):S,o=S=>{const A=r(S);return typeof A=="number"?A>0:!!A},s=E.useMemo(()=>({comum:o(n.comum),field:o(n.field),inside:o(n.inside),gestor:o(n.gestor)}),[n]),i=ki.map(S=>S.id),l=E.useMemo(()=>[{id:"comum",label:"Vend. Comum"},{id:"field",label:"Field Sales"},{id:"inside",label:"Inside Sales"},{id:"gestor",label:"Gestor"}].filter(S=>s[S.id]).filter(S=>{const A=e[S.id]instanceof Set?e[S.id]:new Set(e[S.id]||[]);return i.some(v=>!A.has(v))}),[e,s]),[u,c]=E.useState(()=>new Set),[d,h]=E.useState(()=>new Set);E.useEffect(()=>{u.size===0&&l.length>0&&c(new Set([l[0].id]))},[l,u.size]);const f=E.useRef(null),x=E.useMemo(()=>{const S=[];if(d.size>0){const A=Array.from(d).map(D=>ki.find(T=>T.id===D)).filter(Boolean),v=A.reduce((D,T)=>D+((T==null?void 0:T.price)||0),0);u.forEach(D=>{S.push({vendorType:D,items:A,total:v})})}return S},[u,d]),y=E.useMemo(()=>x.reduce((S,A)=>S+A.total,0),[x]),b=E.useMemo(()=>{const S={azul:0,amarelo:0,roxo:0};return d.size>0&&Array.from(d).map(v=>ki.find(D=>D.id===v)).filter(Boolean).forEach(v=>{S[v.cert]=(S[v.cert]||0)+u.size}),S},[d,u.size]),_=E.useMemo(()=>{const S={};if(d.size>0){const A=Array.from(d);u.forEach(v=>{S[v]=A})}return S},[d,u]),p=S=>{c(A=>{const v=new Set(A);return v.has(S)?v.delete(S):v.add(S),v})},m=S=>{Array.from(u).some(v=>(e[v]instanceof Set?e[v]:new Set(e[v]||[])).has(S))||h(v=>{const D=new Set(v);return D.has(S)?D.delete(S):D.add(S),D})},g=()=>{x.length!==0&&(t==null||t({action:"BUY",purchases:x,grandTotal:y,bensDelta:y,certsCount:b,ownedUpdate:_}))},w=()=>{c(new Set),h(new Set)},j=S=>{var A,v;(A=S==null?void 0:S.preventDefault)==null||A.call(S),(v=S==null?void 0:S.stopPropagation)==null||v.call(S),t==null||t({action:"SKIP"})};E.useEffect(()=>{const S=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var A,v;return(v=(A=f.current)==null?void 0:A.focus)==null?void 0:v.call(A)},0),()=>{document.body.style.overflow=S}},[]);const N=l.length===0,R=!Object.values(s).some(Boolean);return a.jsx("div",{style:Yt.wrap,role:"dialog","aria-modal":"true",children:a.jsxs("div",{style:Yt.card,children:[a.jsx("button",{ref:f,type:"button",style:Yt.close,onClick:j,"aria-label":"Fechar",children:""}),a.jsx("h2",{style:Yt.title,children:"Escolha os vendedores e treinamentos que deseja comprar:"}),N?a.jsx("div",{style:Yt.allDoneBox,children:R?"Nenhum profissional disponvel para treinar no momento.":"Todos os treinamentos j foram comprados para os profissionais disponveis."}):a.jsx(a.Fragment,{children:a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("p",{style:{margin:"0 0 8px",opacity:.9,fontSize:"14px"},children:"Selecione os tipos de vendedores que deseja treinar:"}),a.jsx("div",{style:{...Yt.vendorRow,gridTemplateColumns:`repeat(${l.length}, minmax(0,1fr))`},children:l.map(S=>a.jsx("button",{type:"button",onClick:()=>p(S.id),style:{...Yt.vendorBtn,background:u.has(S.id)?"#6f5bd6":"#2a2f3b",borderColor:u.has(S.id)?"rgba(255,255,255,.35)":"rgba(255,255,255,.15)"},children:S.label},S.id))})]})}),!N&&u.size>0&&a.jsxs(a.Fragment,{children:[a.jsx("p",{style:{margin:"10px 2px 14px",opacity:.9},children:"Escolha os treinamentos que sero aplicados a todos os tipos selecionados:"}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",background:"#2a2f3b",borderRadius:"8px",border:"1px solid rgba(255,255,255,.15)"},children:[a.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Tipos selecionados:"}),a.jsx("div",{style:{fontSize:"14px",opacity:.9},children:Array.from(u).map(S=>{const A=l.find(v=>v.id===S);return A==null?void 0:A.label}).join(", ")})]}),a.jsx("div",{style:Yt.products,children:ki.map(S=>{const A=d.has(S.id),v=Array.from(u).some(D=>(e[D]instanceof Set?e[D]:new Set(e[D]||[])).has(S.id));return a.jsxs("button",{type:"button",onClick:()=>m(S.id),disabled:v,style:{...Yt.productCard,background:S.colors.bg,borderColor:S.colors.border,boxShadow:A?`0 0 0 3px ${S.colors.pill}`:"none",opacity:v?.45:1,cursor:v?"not-allowed":"pointer"},title:v?"J adquirido para algum tipo selecionado":void 0,children:[a.jsxs("div",{style:Yt.pill(S.colors.pill),children:["Certificado ",S.cert==="azul"?"Azul":S.cert==="amarelo"?"Amarelo":"Roxo"]}),a.jsx("div",{style:{whiteSpace:"pre-line",fontWeight:800,marginBottom:10},children:S.label}),a.jsxs("div",{style:{fontSize:22,fontWeight:900},children:["$ ",S.price.toLocaleString()]})]},S.id)})})]}),a.jsxs("div",{style:Yt.actionsRow,children:[a.jsx("button",{type:"button",style:{...Yt.smallBtn,background:"#3a4152"},onClick:w,children:"Limpar Tudo"}),a.jsx("div",{style:{flex:1}}),a.jsxs("div",{style:{fontWeight:900},children:["Total: $ ",y.toLocaleString(),u.size>1&&a.jsxs("span",{style:{fontSize:"12px",opacity:.8,marginLeft:"8px"},children:["(",d.size," treinamentos  ",u.size," tipos)"]})]})]}),a.jsxs("div",{style:Yt.btnRow,children:[a.jsx("button",{type:"button",style:{...Yt.bigBtn,background:"#444"},onClick:j,children:"No comprar"}),a.jsxs("button",{type:"button",disabled:x.length===0,style:{...Yt.bigBtn,background:x.length>0?"#6f5bd6":"#3a3a3a",opacity:x.length>0?1:.6,cursor:x.length>0?"pointer":"not-allowed"},onClick:g,children:["Comprar (",x.length," tipo",x.length!==1?"s":"",")"]})]})]})]})})}const Yt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",maxWidth:980,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},allDoneBox:{background:"#0f1320",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"14px",fontWeight:800,textAlign:"center"},vendorRow:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:10,marginBottom:12},vendorBtn:{padding:"10px 12px",borderRadius:10,border:"1px solid",color:"#fff",fontWeight:800,cursor:"pointer"},products:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:12,margin:"4px 0 10px"},productCard:{textAlign:"center",padding:"16px 14px",borderRadius:14,border:"2px solid",color:"#fff"},pill:t=>({display:"inline-block",background:t,color:"#111",fontWeight:900,padding:"4px 8px",borderRadius:999,marginBottom:8}),actionsRow:{display:"flex",alignItems:"center",gap:12,margin:"6px 0 6px"},smallBtn:{padding:"10px 14px",borderRadius:10,border:"none",color:"#fff",fontWeight:800,cursor:"pointer"},btnRow:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:12},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",color:"#fff",fontWeight:900,cursor:"pointer"}};function Wx({onResolve:t,currentCash:e=0}){const n=E.useRef(null),r=i=>{var l,u;(l=i==null?void 0:i.preventDefault)==null||l.call(i),(u=i==null?void 0:i.stopPropagation)==null||u.call(i),t==null||t({action:"SKIP"})};E.useEffect(()=>{const i=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var l,u;return(u=(l=n.current)==null?void 0:l.focus)==null?void 0:u.call(l)},0),()=>{document.body.style.overflow=i}},[]);const o=i=>()=>{t==null||t({action:"OPEN",open:String(i).toUpperCase()})},s=[{key:"mix",title:"Mix Produtos",lines:["Nvel A: $12000","Nvel B: $6000","Nvel C: $3000","Nvel D: $1000"],onBuy:o("MIX")},{key:"gestor",title:"Gestor Comercial",lines:["Contratao: $5000","Manuteno: $3000"],onBuy:o("MANAGER")},{key:"inside",title:"Inside Sales",lines:["Contratao: $3000","Manuteno: $2000"],onBuy:o("INSIDE")},{key:"field",title:"Field Sales",lines:["Contratao: $3000","Manuteno: $2000"],onBuy:o("FIELD")},{key:"vendedor",title:"Vendedor Comum",lines:["Contratao: $1500","Despesas: $1000"],onBuy:o("COMMON")},{key:"erp",title:"ERP/Sistemas",lines:["Nvel A: $10000","Nvel B: $4000","Nvel C: $1500","Nvel D: $500"],onBuy:o("ERP")},{key:"carteira",title:"Carteira de Clientes",lines:["Aquisio: $1000"],onBuy:o("CLIENTS")},{key:"training",title:"Treinamento",lines:["Azul: $500","Amarelo: $500","Roxo: $500"],onBuy:o("TRAINING")}];return a.jsx("div",{style:Qn.wrap,role:"dialog","aria-modal":"true",children:a.jsxs("div",{style:Qn.card,children:[a.jsx("button",{ref:n,type:"button",style:Qn.close,onClick:r,"aria-label":"Fechar",children:""}),a.jsx("h2",{style:Qn.title,children:"Direto de Compra  escolha uma casa para adquirir:"}),a.jsxs("div",{style:{marginBottom:8,opacity:.8,fontSize:13},children:["Saldo atual: ",a.jsxs("b",{children:["$",Number(e).toLocaleString()]})]}),a.jsx("div",{style:Qn.grid,children:s.map(i=>a.jsxs("div",{style:Qn.cell,children:[a.jsx("div",{style:Qn.cellTitle,children:i.title}),a.jsx("ul",{style:Qn.lines,children:i.lines.map((l,u)=>a.jsx("li",{children:l},u))}),a.jsx("button",{type:"button",style:Qn.buyBtn,onClick:i.onBuy,children:"Comprar"})]},i.key))}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:16},children:a.jsx("button",{type:"button",style:{...Qn.buyBtn,background:"#666"},onClick:r,children:"No Comprar"})})]})})}const Qn={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(1000px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 16px",fontWeight:800},grid:{display:"grid",gridTemplateColumns:"repeat(4, minmax(180px, 1fr))",gap:12},cell:{background:"#0f1320",border:"1px solid rgba(255,255,255,.08)",borderRadius:12,padding:12,display:"flex",flexDirection:"column",gap:8,minHeight:160},cellTitle:{fontWeight:800,marginBottom:4},lines:{margin:0,padding:"0 0 0 16px",opacity:.85,lineHeight:1.3},buyBtn:{marginTop:"auto",alignSelf:"center",minWidth:140,padding:"10px 14px",borderRadius:10,border:"none",background:"#3fbf49",color:"#09110f",fontWeight:900,cursor:"pointer"}};function hf({onResolve:t,currentCash:e=0}){const n=E.useRef(null),[r,o]=E.useState(""),{pushModal:s,awaitTop:i}=tn(),l=3e3,u=2e3,c=1500,d=E.useMemo(()=>{const m=Number(r);return Number.isFinite(m)&&m>0?Math.floor(m):0},[r]),h=d*l,f=d>0,x=Math.max(0,Math.floor(Number(e||0)/l)),y=m=>{var g,w;(g=m==null?void 0:m.preventDefault)==null||g.call(m),(w=m==null?void 0:m.stopPropagation)==null||w.call(m),t==null||t({action:"SKIP"})},b=m=>{const g=Number(r)||0,w=Math.min(x||1/0,g+m);o(w||"")},_=()=>o(x||""),p=async()=>{if(!f)return;const m=Number(e||0),g=Number(h||0);if(m<g){s(a.jsx(gr,{requiredAmount:g,currentCash:m,title:"Saldo insuficiente para contratar Inside Sales",message:`Voc precisa de $ ${g.toLocaleString()} mas possui $ ${m.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",qty:d,headcount:d,unitHire:l,total:h,cost:h,totalCost:h,baseExpense:u,baseRevenue:c})};return E.useEffect(()=>{const m=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var g,w;return(w=(g=n.current)==null?void 0:g.focus)==null?void 0:w.call(g)},0),()=>{document.body.style.overflow=m}},[]),a.jsx("div",{style:mt.wrap,role:"dialog","aria-modal":"true","aria-label":"Inside Sales",children:a.jsxs("div",{style:mt.card,children:[a.jsx("button",{ref:n,type:"button",style:mt.close,onClick:y,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:mt.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Inside Sales"})," quer comprar:"]}),a.jsxs("div",{style:mt.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"INSIDE SALES (SDR/BDR + CLOSER + CS)"}),a.jsxs("div",{children:[a.jsx("b",{children:"Base para clculo despesa:"}),"  quantidade ",a.jsx("b",{children:"field sales"})," ou ",a.jsx("b",{children:"inside sales"}),"."]}),a.jsxs("div",{children:[a.jsx("b",{children:"Base para clculo faturamento:"}),"  quantidade ",a.jsx("b",{children:"mxima de clientes que cada vendedor pode atender"}),"."]})]}),a.jsxs("div",{style:mt.saldoRow,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:x})]})]}),a.jsxs("div",{style:mt.inputRow,children:[a.jsx("input",{type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Inside Sales",value:r,onChange:m=>o(m.target.value),style:mt.input}),a.jsxs("div",{style:mt.quickBtns,children:[a.jsx("button",{type:"button",style:mt.quickBtn,onClick:()=>b(1),children:"+1"}),a.jsx("button",{type:"button",style:mt.quickBtn,onClick:()=>b(5),children:"+5"}),a.jsx("button",{type:"button",style:mt.quickBtn,onClick:()=>b(10),children:"+10"}),a.jsx("button",{type:"button",style:{...mt.quickBtn,fontWeight:900},onClick:_,children:"Mx"})]}),a.jsxs("div",{style:mt.totalBox,children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(h).toLocaleString()]})]})]}),a.jsxs("div",{style:mt.cards,children:[a.jsx(Ei,{title:"Sem certificado",bg:"#2a2f3b",pill:"BASE",lines:[`Contratao: $ ${l.toLocaleString()}`,`Despesa: $ ${u.toLocaleString()}`,`Faturamento: $ ${c.toLocaleString()}`]}),a.jsx(Ei,{title:"1 certificado",bg:"#f1c40f",pill:"NVEL 1",dark:!0,lines:["Contratao: ","Despesa: $ 2.100","Faturamento: $ 2.000"]}),a.jsx(Ei,{title:"2 certificados",bg:"#a78bfa",pill:"NVEL 2",dark:!0,lines:["Contratao: ","Despesa: $ 2.200","Faturamento: $ 2.500"]}),a.jsx(Ei,{title:"3 certificados",bg:"#8b5cf6",pill:"NVEL 3",dark:!0,lines:["Contratao: ","Despesa: $ 2.300","Faturamento: $ 3.000"]})]}),a.jsxs("div",{style:mt.actions,children:[a.jsx("button",{type:"button",style:{...mt.bigBtn,background:"#666",color:"#fff"},onClick:y,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...mt.bigBtn,background:f?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:p,disabled:!f,title:f?void 0:"Informe uma quantidade vlida",children:["Comprar ",f?`($ ${h.toLocaleString()})`:""]})]})]})})}function Ei({title:t,pill:e,lines:n,bg:r,dark:o=!1}){return a.jsxs("div",{style:{...mt.cardItem,background:r,color:o?"#111":"#fff",borderColor:"rgba(255,255,255,.15)"},children:[a.jsxs("div",{style:mt.cardHeader,children:[a.jsx("span",{style:{...mt.pill,background:o?"#111":"#fff",color:o?"#fff":"#111"},children:e}),a.jsx("div",{style:{fontWeight:900},children:t})]}),a.jsx("ul",{style:mt.lines,children:n.map((s,i)=>a.jsx("li",{children:s},i))})]})}const mt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldoRow:{display:"flex",justifyContent:"space-between",gap:12,padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10,marginBottom:8},inputRow:{display:"grid",gridTemplateColumns:"1fr auto auto",alignItems:"center",gap:10,marginBottom:12},input:{height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6},quickBtn:{minWidth:44,height:42,borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",fontWeight:800,cursor:"pointer",padding:"0 10px"},totalBox:{padding:"8px 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#0f1320",fontWeight:900},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,margin:"8px 0 14px"},cardItem:{border:"1px solid",borderRadius:14,padding:"14px"},cardHeader:{display:"flex",alignItems:"center",gap:8,marginBottom:8},pill:{fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:8},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function pf({onResolve:t,unitAcquisition:e=1e3,unitMaintenance:n=50,currentCash:r=0}){const o=E.useRef(null),s=E.useRef(null),{pushModal:i,awaitTop:l}=tn(),[u,c]=E.useState(""),d=E.useMemo(()=>{const j=Math.floor(Number(u));return Number.isFinite(j)&&j>0?j:0},[u]),h=Number(e||0),f=Number(n||0),x=Number(r||0),y=E.useMemo(()=>h<=0?0:Math.max(0,Math.floor(x/h)),[x,h]),b=d*h,_=d*f,p=d>0,m=j=>{var N,R;(N=j==null?void 0:j.preventDefault)==null||N.call(j),(R=j==null?void 0:j.stopPropagation)==null||R.call(j),t==null||t({action:"SKIP"})},g=async()=>{if(p){if(x<b){i(a.jsx(gr,{requiredAmount:b,currentCash:x,title:"Saldo insuficiente para comprar clientes",message:"Voc no possui saldo suficiente para concluir esta aquisio.",okLabel:"Entendi"})),await l();return}t==null||t({action:"BUY",qty:d,unitAcquisition:h,totalCost:b,unitMaintenance:f,maintenanceDelta:_,bensDelta:b,clientsAdded:d})}};E.useEffect(()=>{const j=document.body.style.overflow;document.body.style.overflow="hidden";const N=setTimeout(()=>{var A,v;return(v=(A=o.current)==null?void 0:A.focus)==null?void 0:v.call(A)},0),R=setTimeout(()=>{var A,v;return(v=(A=s.current)==null?void 0:A.focus)==null?void 0:v.call(A)},50),S=A=>{A.key==="Enter"&&(A.preventDefault(),g())};return window.addEventListener("keydown",S),()=>{document.body.style.overflow=j,window.removeEventListener("keydown",S),clearTimeout(N),clearTimeout(R)}},[]);const w=j=>{const N=Math.max(0,Math.min(Math.floor(Number(j)||0),1e6));c(String(N))};return a.jsx("div",{style:Tt.wrap,role:"dialog","aria-modal":"true",onMouseDown:j=>{j.target===j.currentTarget&&j.stopPropagation()},children:a.jsxs("div",{style:Tt.card,onMouseDown:j=>j.stopPropagation(),children:[a.jsx("button",{ref:o,type:"button",style:Tt.close,onClick:m,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Tt.title,children:["Voc pode escolher quantos clientes quer comprar,",a.jsx("br",{}),"Digite o nmero de clientes:"]}),a.jsxs("p",{style:Tt.warn,children:[a.jsx("b",{children:"Mas cuidado com a capacidade de atendimento da sua equipe!"}),a.jsx("br",{}),"Se o jogador adquirir mais clientes do que os vendedores podem atender, assim que passar na casa ",a.jsx("i",{children:"Faturamento do Ms"})," no receber o faturamento dos clientes excedentes e perder o(s) cliente(s) que no foram atendidos."]}),a.jsxs("div",{style:Tt.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",x.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:y})]})]}),a.jsxs("div",{style:Tt.qtyRow,children:[a.jsx("input",{ref:s,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Clientes",value:u,onChange:j=>w(j.target.value),style:Tt.input}),a.jsxs("div",{style:Tt.quickBtns,children:[a.jsx("button",{type:"button",style:Tt.qbtn,onClick:()=>w(d+1),children:"+1"}),a.jsx("button",{type:"button",style:Tt.qbtn,onClick:()=>w(d+5),children:"+5"}),a.jsx("button",{type:"button",style:Tt.qbtn,onClick:()=>w(d+10),children:"+10"}),a.jsx("button",{type:"button",style:Tt.qbtn,onClick:()=>w(y),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:Tt.summary,children:[a.jsxs("div",{children:["Preo por cliente: ",a.jsxs("b",{children:["$ ",h.toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal por cliente: ",a.jsxs("b",{children:["$ ",f.toLocaleString()]})]})]}),a.jsxs("div",{style:Tt.summaryStrong,children:[a.jsxs("div",{children:["Total compra: ",a.jsxs("b",{children:["$ ",Number(b).toLocaleString()]})]}),a.jsxs("div",{children:["Manuteno mensal adicionada: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]})]}),a.jsxs("div",{style:Tt.actions,children:[a.jsx("button",{type:"button",style:{...Tt.bigBtn,background:"#666",color:"#fff"},onClick:m,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...Tt.bigBtn,background:p?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:g,disabled:!p,title:p?x<b?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",p?`($ ${b.toLocaleString()})`:""]})]})]})})}const Tt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(820px, 92vw)",maxWidth:820,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},warn:{background:"#271c12",border:"1px solid rgba(255,180,0,.35)",color:"#ffd489",borderRadius:10,padding:"10px 12px",margin:"0 0 12px"},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},summary:{display:"flex",justifyContent:"space-between",gap:10,border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginBottom:8,fontWeight:700,flexWrap:"wrap"},summaryStrong:{display:"flex",justifyContent:"space-between",gap:10,border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginBottom:10,fontWeight:800,flexWrap:"wrap"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:4,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function mf({onResolve:t,unitHire:e=5e3,unitExpense:n=3e3,managesUpTo:r=7,currentCash:o=0}){const s=E.useRef(null),i=E.useRef(null),{pushModal:l,awaitTop:u}=tn(),[c,d]=E.useState(""),h=Number(e||0),f=Number(n||0),x=Number(o||0),y=E.useMemo(()=>{const N=Math.floor(Number(c));return Number.isFinite(N)&&N>0?N:0},[c]),b=E.useMemo(()=>h<=0?0:Math.max(0,Math.floor(x/h)),[x,h]),_=y*h,p=y*f,m=y>0,g=N=>{const R=Math.floor(Number(N)||0),S=Math.max(0,Math.min(R,1e6));d(String(S))},w=N=>{var R,S;(R=N==null?void 0:N.preventDefault)==null||R.call(N),(S=N==null?void 0:N.stopPropagation)==null||S.call(N),t==null||t({action:"SKIP"})},j=async()=>{if(m){if(x<_){l(a.jsx(gr,{requiredAmount:_,currentCash:x,title:"Saldo insuficiente para contratar Gestores",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await u();return}t==null||t({action:"BUY",role:"MANAGER",qty:y,headcount:y,gestoresDelta:y,unitHire:h,unitExpense:f,totalHire:_,totalExpense:p,cost:_,total:_,cashDelta:-_,expenseDelta:p,hudUpdate:{category:"Gestores Comerciais",addQty:y}})}};return E.useEffect(()=>{const N=document.body.style.overflow;document.body.style.overflow="hidden";const R=setTimeout(()=>{var v,D;return(D=(v=s.current)==null?void 0:v.focus)==null?void 0:D.call(v)},0),S=setTimeout(()=>{var v,D;return(D=(v=i.current)==null?void 0:v.focus)==null?void 0:D.call(v)},60),A=v=>{v.key==="Enter"&&(v.preventDefault(),j())};return window.addEventListener("keydown",A),()=>{document.body.style.overflow=N,window.removeEventListener("keydown",A),clearTimeout(R),clearTimeout(S)}},[]),a.jsx("div",{style:Ye.wrap,role:"dialog","aria-modal":"true",onMouseDown:N=>{N.target===N.currentTarget&&N.stopPropagation()},children:a.jsxs("div",{style:Ye.card,onMouseDown:N=>N.stopPropagation(),children:[a.jsx("button",{ref:s,type:"button",style:Ye.close,onClick:w,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Ye.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Gestores"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de gestores:"]}),a.jsxs("div",{style:Ye.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",x.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{style:Ye.qtyRow,children:[a.jsx("input",{ref:i,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Gestores",value:c,onChange:N=>g(N.target.value),style:Ye.input}),a.jsxs("div",{style:Ye.quickBtns,children:[a.jsx("button",{type:"button",style:Ye.qbtn,onClick:()=>g(y+1),children:"+1"}),a.jsx("button",{type:"button",style:Ye.qbtn,onClick:()=>g(y+5),children:"+5"}),a.jsx("button",{type:"button",style:Ye.qbtn,onClick:()=>g(y+10),children:"+10"}),a.jsx("button",{type:"button",style:Ye.qbtn,onClick:()=>g(b),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:Ye.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"GESTOR COMERCIAL"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo de despesa: ",a.jsx("b",{children:"x quantidade de Gestores"}),".",a.jsx("br",{}),"Cada Gestor gerencia at ",a.jsx("b",{children:r})," colaboradores."]}),a.jsxs("div",{style:Ye.table,children:[a.jsxs("div",{style:Ye.trHead,children:[a.jsx("div",{style:Ye.th,children:"Certificao"}),a.jsx("div",{style:Ye.th,children:"Contratao"}),a.jsx("div",{style:Ye.th,children:"Despesa"}),a.jsx("div",{style:Ye.th,children:"Efeito"})]}),a.jsx(ji,{label:"Sem Certificado",hire:5e3,expense:3e3,revenue:"potencializa colaboradores em 20%"}),a.jsx(ji,{label:"Com 1 certificado",hire:"-",expense:3500,revenue:"potencializa colaboradores em 30%"}),a.jsx(ji,{label:"Com 2 certificados",hire:"-",expense:4e3,revenue:"potencializa colaboradores em 40%"}),a.jsx(ji,{label:"Com 3 certificados",hire:"-",expense:4500,revenue:"potencializa colaboradores em 60%"})]})]}),a.jsxs("div",{style:Ye.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / gestor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / gestor"]})]}),a.jsxs("div",{style:Ye.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]})]}),a.jsxs("div",{style:Ye.actions,children:[a.jsx("button",{type:"button",style:{...Ye.bigBtn,background:"#666",color:"#fff"},onClick:w,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...Ye.bigBtn,background:m?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:j,disabled:!m,title:m?x<_?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",m?`(${y})`:""]})]})]})})}function ji({label:t,hire:e,expense:n,revenue:r}){const o=s=>typeof s=="number"?`$ ${Number(s).toLocaleString()}`:s;return a.jsxs("div",{style:Ye.tr,children:[a.jsx("div",{style:Ye.td,children:t}),a.jsx("div",{style:Ye.td,children:o(e)}),a.jsx("div",{style:Ye.td,children:o(n)}),a.jsx("div",{style:Ye.td,children:r})]})}const Ye={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"12px",background:"#101522",marginBottom:12},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,overflow:"hidden"},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 3fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 3fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function gf({onResolve:t,unitHire:e=3e3,unitExpense:n=2e3,attendsUpTo:r=5,currentCash:o=0}){const s=E.useRef(null),i=E.useRef(null),{pushModal:l,awaitTop:u}=tn(),[c,d]=E.useState(""),h=Number(e||0),f=Number(n||0),x=Number(o||0),y=E.useMemo(()=>{const S=Math.floor(Number(c));return Number.isFinite(S)&&S>0?S:0},[c]),b=E.useMemo(()=>h<=0?0:Math.max(0,Math.floor(x/h)),[x,h]),_=y*h,p=y*f,g=y*1500,w=y>0,j=S=>{const A=Math.floor(Number(S)||0),v=Math.max(0,Math.min(A,1e6));d(String(v))},N=S=>{var A,v;(A=S==null?void 0:S.preventDefault)==null||A.call(S),(v=S==null?void 0:S.stopPropagation)==null||v.call(S),t==null||t({action:"SKIP"})},R=async()=>{if(w){if(x<_){l(a.jsx(gr,{requiredAmount:_,currentCash:x,title:"Saldo insuficiente para contratar Field Sales",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await u();return}t==null||t({action:"BUY",qty:y,unitHire:h,unitExpense:f,totalHire:_,totalExpense:p,cashDelta:-_,expenseDelta:p,revenueDelta:g,cost:_,total:_,role:"FIELD"})}};return E.useEffect(()=>{const S=document.body.style.overflow;document.body.style.overflow="hidden";const A=setTimeout(()=>{var T,I;return(I=(T=s.current)==null?void 0:T.focus)==null?void 0:I.call(T)},0),v=setTimeout(()=>{var T,I;return(I=(T=i.current)==null?void 0:T.focus)==null?void 0:I.call(T)},50),D=T=>{T.key==="Enter"&&(T.preventDefault(),R())};return window.addEventListener("keydown",D),()=>{document.body.style.overflow=S,window.removeEventListener("keydown",D),clearTimeout(A),clearTimeout(v)}},[]),a.jsx("div",{style:Qe.wrap,role:"dialog","aria-modal":"true",onMouseDown:S=>{S.target===S.currentTarget&&S.stopPropagation()},children:a.jsxs("div",{style:Qe.card,onMouseDown:S=>S.stopPropagation(),children:[a.jsx("button",{ref:s,type:"button",style:Qe.close,onClick:N,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Qe.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Field Sales"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de vendedores:"]}),a.jsxs("div",{style:Qe.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",x.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{style:Qe.qtyRow,children:[a.jsx("input",{ref:i,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Field Sales",value:c,onChange:S=>j(S.target.value),style:Qe.input}),a.jsxs("div",{style:Qe.quickBtns,children:[a.jsx("button",{type:"button",style:Qe.qbtn,onClick:()=>j(y+1),children:"+1"}),a.jsx("button",{type:"button",style:Qe.qbtn,onClick:()=>j(y+5),children:"+5"}),a.jsx("button",{type:"button",style:Qe.qbtn,onClick:()=>j(y+10),children:"+10"}),a.jsx("button",{type:"button",style:Qe.qbtn,onClick:()=>j(b),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:Qe.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"FIELD SALES (REPRESENTANTES COMERCIAIS)"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo de despesa: ",a.jsx("b",{children:"x quantidade de Field Sales"}),".",a.jsx("br",{}),"Base para clculo de faturamento: ",a.jsx("b",{children:"x quantidade mxima de clientes que cada vendedor pode atender"}),".",a.jsx("br",{}),"Cada vendedor atende at ",a.jsx("b",{children:r})," clientes."]}),a.jsxs("div",{style:Qe.table,children:[a.jsxs("div",{style:Qe.trHead,children:[a.jsx("div",{style:Qe.th,children:"Certificao"}),a.jsx("div",{style:Qe.th,children:"Contratao"}),a.jsx("div",{style:Qe.th,children:"Despesa"}),a.jsx("div",{style:Qe.th,children:"Faturamento"})]}),a.jsx(Ci,{label:"S/ Certificado",hire:"$ 3.000",expense:"$ 2.000",revenue:"$ 1.500"}),a.jsx(Ci,{label:"Com 1 certificado",hire:"-",expense:"$ 2.100",revenue:"$ 2.000"}),a.jsx(Ci,{label:"Com 2 certificados",hire:"-",expense:"$ 2.200",revenue:"$ 2.500"}),a.jsx(Ci,{label:"Com 3 certificados",hire:"-",expense:"$ 2.300",revenue:"$ 3.000"})]})]}),a.jsxs("div",{style:Qe.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / vendedor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / vendedor"]})]}),a.jsxs("div",{style:Qe.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]})]}),a.jsxs("div",{style:Qe.actions,children:[a.jsx("button",{type:"button",style:{...Qe.bigBtn,background:"#666",color:"#fff"},onClick:N,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...Qe.bigBtn,background:w?"#75e16c":"#365b31",color:"#0b120a"},onClick:R,disabled:!w,title:w?x<_?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",w?`(${y})`:""]})]})]})})}function Ci({label:t,hire:e,expense:n,revenue:r}){return a.jsxs("div",{style:Qe.tr,children:[a.jsx("div",{style:Qe.td,children:t}),a.jsx("div",{style:Qe.td,children:e}),a.jsx("div",{style:Qe.td,children:n}),a.jsx("div",{style:Qe.td,children:r})]})}const Qe={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"12px",background:"#101522",marginBottom:12},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,overflow:"hidden"},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function yf({onResolve:t,unitHire:e=1500,unitExpense:n=1e3,attendsUpTo:r=2,currentCash:o=0}){const[s,i]=E.useState(""),l=E.useRef(null),u=E.useRef(null),{pushModal:c,awaitTop:d}=tn(),h=Number(e||0),f=Number(n||0),x=Number(o||0),y=600,b=E.useMemo(()=>{const R=Math.floor(Number(s));return Number.isFinite(R)&&R>0?R:0},[s]),_=E.useMemo(()=>h<=0?0:Math.max(0,Math.floor(x/h)),[x,h]),p=E.useMemo(()=>b*h,[b,h]),m=E.useMemo(()=>b*f,[b,f]),g=b>0,w=R=>{const S=Math.floor(Number(R)||0),A=Math.max(0,Math.min(S,1e6));i(String(A))},j=R=>{var S;(S=R==null?void 0:R.stopPropagation)==null||S.call(R),t==null||t({action:"SKIP"})},N=async()=>{if(!g)return;if(x<p){c(a.jsx(gr,{requiredAmount:p,currentCash:x,title:"Saldo insuficiente para contratar vendedores",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await d();return}const R={action:"BUY",role:"COMMON",qty:b,headcount:b,unitHire:h,unitExpense:f,totalHire:p,totalExpense:m,total:p,cost:p,attendsUpTo:r,cashDelta:-p,expenseDelta:m,revenueDelta:y*b,revenuePerSeller:y,hudUpdate:{category:"Vendedores Comuns",addQty:b}};t==null||t(R)};return E.useEffect(()=>{const R=document.body.style.overflow;document.body.style.overflow="hidden";const S=setTimeout(()=>{var D,T;return(T=(D=l.current)==null?void 0:D.focus)==null?void 0:T.call(D)},0),A=setTimeout(()=>{var D,T;return(T=(D=u.current)==null?void 0:D.focus)==null?void 0:T.call(D)},50),v=D=>{D.key==="Enter"&&(D.preventDefault(),N())};return window.addEventListener("keydown",v),()=>{document.body.style.overflow=R,window.removeEventListener("keydown",v),clearTimeout(S),clearTimeout(A)}},[]),a.jsx("div",{style:Xe.wrap,role:"dialog","aria-modal":"true","aria-label":"Comprar Vendedores Comuns",onMouseDown:R=>{R.target===R.currentTarget&&R.stopPropagation()},children:a.jsxs("div",{style:Xe.card,onMouseDown:R=>R.stopPropagation(),children:[a.jsx("button",{ref:l,type:"button",style:Xe.close,onClick:j,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Xe.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Vendedores Comuns"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de vendedores:"]}),a.jsxs("div",{style:Xe.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",x.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:_})]})]}),a.jsxs("div",{style:Xe.qtyRow,children:[a.jsx("input",{ref:u,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Vendedores Comuns",value:s,onChange:R=>w(R.target.value),style:Xe.input}),a.jsxs("div",{style:Xe.quickBtns,children:[a.jsx("button",{type:"button",style:Xe.qbtn,onClick:()=>w(b+1),children:"+1"}),a.jsx("button",{type:"button",style:Xe.qbtn,onClick:()=>w(b+5),children:"+5"}),a.jsx("button",{type:"button",style:Xe.qbtn,onClick:()=>w(b+10),children:"+10"}),a.jsx("button",{type:"button",style:Xe.qbtn,onClick:()=>w(_),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:Xe.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"VENDEDOR COMUM (FAZ TUDO)"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo despesa: ",a.jsx("b",{children:"x quantidade vendedor comum"}),".",a.jsx("br",{}),"Base para clculo faturamento: ",a.jsx("b",{children:"x quantidade mxima de clientes que cada vendedor pode atender"}),".",a.jsx("br",{}),a.jsxs("b",{children:["Atende at ",r," clientes"]}),"."]}),a.jsxs("div",{style:Xe.table,children:[a.jsxs("div",{style:Xe.trHead,children:[a.jsx("div",{style:Xe.th,children:"Certificao"}),a.jsx("div",{style:Xe.th,children:"Contratao"}),a.jsx("div",{style:Xe.th,children:"Despesa"}),a.jsx("div",{style:Xe.th,children:"Faturamento"})]}),a.jsx(Ri,{label:"S/ Certificado",hire:"$ 1.500",expense:"$ 1.000",revenue:"$ 600"}),a.jsx(Ri,{label:"Com 1 certificado",hire:"-",expense:"$ 1.100",revenue:"$ 700"}),a.jsx(Ri,{label:"Com 2 certificados",hire:"-",expense:"$ 1.200",revenue:"$ 800"}),a.jsx(Ri,{label:"Com 3 certificados",hire:"-",expense:"$ 1.300",revenue:"$ 900"})]})]}),a.jsxs("div",{style:Xe.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / vendedor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / vendedor"]})]}),a.jsxs("div",{style:Xe.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(m).toLocaleString()]})]})]}),a.jsxs("div",{style:Xe.actions,children:[a.jsx("button",{type:"button",style:{...Xe.bigBtn,background:"#666",color:"#fff"},onClick:j,children:"No comprar"}),a.jsx("button",{type:"button",disabled:!g,style:{...Xe.bigBtn,background:g?"#7cbe1a":"#3a3f4a",color:"#0d1200",fontWeight:900},onClick:N,title:g?x<p?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:"Comprar"})]})]})})}function Ri({label:t,hire:e,expense:n,revenue:r}){return a.jsxs("div",{style:Xe.tr,children:[a.jsx("div",{style:Xe.td,children:t}),a.jsx("div",{style:Xe.td,children:e}),a.jsx("div",{style:Xe.td,children:n}),a.jsx("div",{style:Xe.td,children:r})]})}const Xe={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#111522",color:"#eef2f7",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{background:"#161a28",border:"1px solid rgba(255,255,255,.12)",borderRadius:14,padding:14,marginTop:6},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,overflow:"hidden",marginTop:8},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function vf({onResolve:t,currentCash:e,currentLevel:n=null,mixOwned:r=null}){const o=E.useRef(null),{pushModal:s,awaitTop:i}=tn(),l={A:{compra:12e3,despesa:700,faturamento:1200,color:"#1d4ed8",pill:"NVEL A",label:"100 produtos"},B:{compra:6e3,despesa:400,faturamento:600,color:"#16a34a",pill:"NVEL B",label:"50 produtos"},C:{compra:3e3,despesa:200,faturamento:300,color:"#f59e0b",pill:"NVEL C",label:"20 produtos"},D:{compra:1e3,despesa:50,faturamento:100,color:"#6b7280",pill:"NVEL D",label:"5 produtos"}};async function u(d){if(r?r[d]===!0:n===d)return;const f=l[d],x=Number((f==null?void 0:f.compra)||0),y=Number(e);if(Number.isFinite(y)&&y>=0&&y<x){s(a.jsx(gr,{requiredAmount:x,currentCash:y,title:"Saldo insuficiente para adquirir o Mix de Produtos",message:`Voc precisa de $ ${x.toLocaleString()} mas possui $ ${y.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",level:d,...f})}function c(){t==null||t({action:"SKIP"})}return E.useEffect(()=>{const d=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var h,f;return(f=(h=o.current)==null?void 0:h.focus)==null?void 0:f.call(h)},0),()=>{document.body.style.overflow=d}},[]),a.jsx("div",{style:dn.wrap,role:"dialog","aria-modal":"true","aria-label":"Mix de Produtos",children:a.jsxs("div",{style:dn.card,children:[a.jsx("button",{ref:o,type:"button",style:dn.close,onClick:c,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:dn.title,children:["Escolha um ",a.jsx("b",{children:"mix de produtos"}),":"]}),a.jsxs("div",{style:dn.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"MIX DE PRODUTOS"}),a.jsxs("div",{children:["Base para clculo de ",a.jsx("b",{children:"Despesa"}),"/",a.jsx("b",{children:"Faturamento"}),": multiplicar pela ",a.jsx("b",{children:"quantidade total de clientes"}),"."]})]}),Number.isFinite(Number(e))&&a.jsxs("div",{style:dn.saldo,children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsx("div",{style:dn.cards,children:["A","B","C","D"].map(d=>{const h=l[d],f=r?r[d]===!0:n===d,x=f;return a.jsxs("div",{style:{...dn.cardItem,borderColor:f?"#16a34a":"rgba(255,255,255,.15)",opacity:x?.6:1},children:[a.jsx("div",{style:{...dn.pill,background:f?"#16a34a":"#fff",color:f?"#fff":"#111"},children:f?" ADQUIRIDO":h.pill}),a.jsx("div",{style:{...dn.cardBadge,background:h.color}}),a.jsxs("ul",{style:dn.lines,children:[a.jsx("li",{children:a.jsx("b",{children:h.label})}),a.jsxs("li",{children:["Compra: ",a.jsxs("b",{children:["$ ",h.compra.toLocaleString()]})]}),a.jsxs("li",{children:["Despesa: ",a.jsxs("b",{children:["$ ",h.despesa.toLocaleString()]})]}),a.jsxs("li",{children:["Faturamento: ",a.jsxs("b",{children:["$ ",h.faturamento.toLocaleString()]})]})]}),a.jsx("button",{type:"button",style:{...dn.buyBtn,background:x?"#6b7280":"#2442f9",cursor:x?"not-allowed":"pointer"},onClick:()=>u(d),disabled:x,title:x?`Mix nvel ${d} j adquirido`:`Comprar Mix de Produtos ${d}`,children:x?"J Adquirido":`Comprar ${d}`})]},d)})}),a.jsx("div",{style:dn.actions,children:a.jsx("button",{type:"button",style:{...dn.bigBtn,background:"#444",color:"#fff"},onClick:c,children:"No comprar"})})]})})}const dn={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldo:{margin:"0 0 10px",padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,marginTop:8},cardItem:{background:"#0f1320",border:"1px solid",borderRadius:14,padding:"12px",display:"flex",flexDirection:"column",gap:8},cardBadge:{width:"100%",height:6,borderRadius:999,opacity:.9},pill:{alignSelf:"flex-start",fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999,color:"#111"},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},buyBtn:{marginTop:"auto",padding:"10px 12px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer",background:"#2442f9",color:"#fff"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:14},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function Vx({onResolve:t,player:e={}}){const n=E.useRef(null),r=(_,p=0)=>Number.isFinite(Number(_))?Number(_):p,o=_=>r(_.am,0)>0,s=_=>r(_.az,0)>0,i=_=>r(_.rox,0)>0,l=_=>String(_.erpLevel||_.erpSistemas||"D").toUpperCase()==="A",u=_=>{const p=String(_.mixProdutos||"D").toUpperCase();return p==="A"||p==="B"},c=_=>{var m;const p=g=>{if(!g)return 0;try{const w=Array.isArray(g)?g:Object.values(g);return new Set(w).size}catch{return 0}};return(m=_.trainingsByVendor)!=null&&m.gestor?p(_.trainingsByVendor.gestor):r(_.gestoresCertificados,0)},d=_=>r(_.vendedoresComuns)+r(_.insideSales)+r(_.fieldSales)+r(_.gestores??_.gestoresComerciais??_.managers),h=E.useMemo(()=>[{id:"gov_fgts",kind:"SORTE",title:"Ao Governamental Positiva",text:"Liberao de FGTS aumentou o poder de compra. Receba 5 novos clientes (se tiver equipe para atender).",clientsDelta:5},{id:"referral_bonus",kind:"SORTE",title:"Indicao Lucrativa",text:"Um cliente indicou amigos e a primeira compra foi tima. Receba R$ 800,00.",cashDelta:800},{id:"network_cert_mgr",kind:"SORTE",title:"Rede Estratgica",text:"Para cada gestor com certificado, receba R$ 5.000,00.",_compute:_=>({cashDelta:5e3*c(_)})},{id:"innovation_invest",kind:"SORTE",title:"Inovao Premiada",text:"Se tiver infraestrutura (mix/sistemas) nvel A ou B, receba aporte de R$ 25.000,00.",_compute:_=>({cashDelta:u(_)?25e3:0})},{id:"segmentation",kind:"SORTE",title:"Segmentao Inteligente",text:"Novo segmento lucrativo. Receba R$ 1.000,00.",cashDelta:1e3},{id:"casa_bonus_10k",kind:"SORTE",title:"Casagrande Insights",text:"Implementao bem-sucedida. Receba R$ 10.000,00.",cashDelta:1e4},{id:"casa_network_7k",kind:"SORTE",title:"Rede de Contatos Valiosa",text:"Parceria estratgica. Ganhe R$ 7.000,00.",cashDelta:7e3},{id:"casa_strategy_5k",kind:"SORTE",title:"Estratgia Personalizada",text:"Processos melhorados. Receba R$ 5.000,00.",cashDelta:5e3},{id:"casa_best_practices_8k",kind:"SORTE",title:"Melhores Prticas",text:"Eficincia aumentada. Receba R$ 8.000,00.",cashDelta:8e3},{id:"casa_start_6k",kind:"SORTE",title:"Satisfao do Cliente em Alta",text:"Fidelidade e vendas sobem. Receba R$ 6.000,00.",cashDelta:6e3},{id:"casa_change_cert_blue",kind:"SORTE",title:"Gesto de Mudanas Bem-sucedida",text:"Um vendedor generalista concluiu todos os treinamentos. Ganhe um certificado AZUL para esse vendedor.",_compute:()=>({certDelta:{az:1}})},{id:"training_roi_team",kind:"SORTE",title:"Treinamento Personalizado",text:"Receba R$ 500,00 por membro participante.",_compute:_=>({cashDelta:500*Math.max(0,d(_))})},{id:"purple_award_25k",kind:"SORTE",title:"Profissional do Ano (Roxo)",text:"Se houver pelo menos um colaborador com certificado roxo, receba R$ 25.000,00.",_compute:_=>({cashDelta:i(_)?25e3:0})},{id:"reputation_1500",kind:"SORTE",title:"Reputao Impecvel",text:"timas avaliaes elevam a confiana. Receba R$ 1.500,00.",cashDelta:1500},{id:"client_cheer_per_client",kind:"SORTE",title:"Cliente Promotor",text:"Ganhe R$ 500,00 por cada cliente atual.",_compute:_=>({cashDelta:500*Math.max(0,r(_.clients))})},{id:"big_order_freight_save",kind:"SORTE",title:"Grande Pedido + Frete Econmico",text:"Receba R$ 1.500,00.",cashDelta:1500},{id:"sales_win_2k",kind:"SORTE",title:"Vitria de Vendas",text:"Venda aguardada foi fechada. Receba R$ 2.000,00.",cashDelta:2e3},{id:"missed_admission",kind:"REVES",title:"Admisso No Reportada",text:"Multa governamental. Pague R$ 3.000,00.",cashDelta:-3e3},{id:"office_renovation",kind:"REVES",title:"Renovao Custosa",text:"Gastos de obra. Pague R$ 7.000,00.",cashDelta:-7e3},{id:"env_fine_20k",kind:"REVES",title:"Impacto Ambiental",text:"Multa ambiental. Pague R$ 20.000,00.",cashDelta:-2e4},{id:"key_client_at_risk",kind:"REVES",title:"Cliente Chave em Risco",text:"Sem certificado AMARELO: perca 1 cliente e pague R$ 2.000,00.",_compute:_=>o(_)?{clientsDelta:0,cashDelta:0,_overrideText:"Voc possui certificado amarelo. Nada acontece."}:{clientsDelta:-1,cashDelta:-2e3}},{id:"social_crisis",kind:"REVES",title:"Crise nas Redes",text:"Pague R$ 400,00 e perca 2 clientes.",cashDelta:-400,clientsDelta:-2},{id:"car_break",kind:"REVES",title:"Carro Quebrou",text:"Conserto urgente. Pague R$ 1.000,00.",cashDelta:-1e3},{id:"service_improvement_1k",kind:"REVES",title:"Aprimoramentos de Servio",text:"Pague R$ 1.000,00.",cashDelta:-1e3},{id:"recovery_failed_5k",kind:"REVES",title:"Recuperao Mal Sucedida",text:"Cancele grande pedido. Pague R$ 5.000,00.",cashDelta:-5e3},{id:"discount_pressure_1k",kind:"REVES",title:"Descontos Forados",text:"Sem certificado verde: perca R$ 1.000,00 de lucro.",cashDelta:-1e3},{id:"domino_2k",kind:"REVES",title:"Efeito Domin",text:"Cancelamentos em cadeia. Perca R$ 2.000,00.",cashDelta:-2e3},{id:"needs_change_lose4",kind:"REVES",title:"Necessidades Mudaram",text:"Sem certificado AZUL: perca 4 clientes.",_compute:_=>s(_)?{clientsDelta:0,_overrideText:"Voc possui certificado azul. Nada acontece."}:{clientsDelta:-4}},{id:"payroll_error_1k",kind:"REVES",title:"Erro na Folha",text:"Corrigir problema. Pague R$ 1.000,00.",cashDelta:-1e3},{id:"strike_lose5",kind:"REVES",title:"Greve Inesperada",text:"Atrasos e perdas. Perca 5 clientes.",clientsDelta:-5},{id:"customs_hold_3k",kind:"REVES",title:"Alfndega",text:"Pague R$ 3.000,00.",cashDelta:-3e3},{id:"cyber_breach_7k_or_A",kind:"REVES",title:"Falha de Segurana",text:"Se NO tiver sistemas nvel A, pague R$ 7.000,00.",_compute:_=>({cashDelta:l(_)?0:-7e3})},{id:"supplier_issue_2k",kind:"REVES",title:"Fornecedor em Crise",text:"Expedio expressa. Pague R$ 2.000,00.",cashDelta:-2e3},{id:"reg_change_30k",kind:"REVES",title:"Regulamentao Nova",text:"Adequao de processos. Pague R$ 30.000,00.",cashDelta:-3e4},{id:"bad_mix_2500",kind:"REVES",title:"Mix de Produtos Desequilibrado",text:"Descontos e liquidaes. Pague R$ 2.500,00.",cashDelta:-2500},{id:"quality_crisis",kind:"REVES",title:"Crise de Qualidade",text:"Perca 1 cliente e pague R$ 1.000,00.",cashDelta:-1e3,clientsDelta:-1}],[]),[f]=E.useState(()=>h[Math.floor(Math.random()*h.length)]),x=E.useMemo(()=>{const _={action:"APPLY_CARD",kind:f.kind,id:f.id,title:f.title};if(typeof f._compute=="function"){const m=f._compute(e||{}),{_overrideText:g,...w}=m||{};return{text:g||f.text,payload:{..._,...w}}}const p={};return Number.isFinite(f.cashDelta)&&(p.cashDelta=Number(f.cashDelta)),Number.isFinite(f.clientsDelta)&&(p.clientsDelta=Number(f.clientsDelta)),{text:f.text,payload:{..._,...p}}},[f,e]),y=()=>t==null?void 0:t(x.payload),b=()=>t==null?void 0:t({action:"SKIP"});return E.useEffect(()=>{const _=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var p,m;return(m=(p=n.current)==null?void 0:p.focus)==null?void 0:m.call(p)},0),()=>{document.body.style.overflow=_}},[]),a.jsx("div",{style:wr.wrap,role:"dialog","aria-modal":"true","aria-label":"Sorte e Revs",children:a.jsxs("div",{style:wr.card,children:[a.jsx("button",{ref:n,style:wr.close,onClick:b,"aria-label":"Fechar",children:""}),a.jsx("div",{style:wr.badge(f.kind),children:f.kind==="SORTE"?"SORTE":"REVS"}),f.title&&a.jsx("h2",{style:wr.title,children:f.title}),a.jsx("p",{style:wr.text,children:x.text}),a.jsx("div",{style:wr.footer,children:a.jsx("button",{type:"button",style:wr.okBtn,onClick:y,children:"OK"})})]})})}const wr={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(760px, 92vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:18,padding:"22px",border:"1px solid rgba(255,255,255,.12)",boxShadow:"0 10px 40px rgba(0,0,0,.4)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},badge:t=>({display:"inline-block",padding:"6px 12px",borderRadius:999,fontWeight:900,marginBottom:8,background:t==="SORTE"?"#22c55e":"#ef4444",color:"#111"}),title:{margin:"2px 0 6px",fontWeight:900},text:{fontSize:18,lineHeight:1.5,opacity:.95,margin:"6px 0 14px"},footer:{display:"flex",justifyContent:"center"},okBtn:{minWidth:140,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer",background:"#fff",color:"#111"}};function Gx({value:t=0,onResolve:e}){const n=Number(t||0),r=o=>{var s,i;(s=o==null?void 0:o.preventDefault)==null||s.call(o),(i=o==null?void 0:o.stopPropagation)==null||i.call(o),e==null||e({action:"OK"})};return a.jsx(ni,{zIndex:2147483647,onClose:()=>e==null?void 0:e({action:"CLOSE"}),children:a.jsxs("div",{style:{padding:28,textAlign:"center",pointerEvents:"auto"},children:[a.jsx("div",{style:{fontWeight:900,fontSize:28,color:"#4caf50",letterSpacing:.5,marginBottom:6},children:"FATURAMENTO DO MS"}),a.jsx("div",{style:{opacity:.9,marginBottom:16},children:"Ser creditado o valor do Faturamento ao seu Saldo"}),a.jsxs("div",{style:{fontSize:18,marginBottom:24},children:["no valor de: ",a.jsxs("b",{children:["$ ",n.toLocaleString()]})]}),a.jsx("button",{type:"button",onClick:r,className:"btn",style:{minWidth:120,background:"#8bd65a",color:"#1a1f2a",fontWeight:800,borderRadius:10},children:"OK"})]})})}function qx({expense:t=0,loanCharge:e=0,onResolve:n}){const r=Number(t||0)+Number(e||0),o=s=>{var i,l;(i=s==null?void 0:s.preventDefault)==null||i.call(s),(l=s==null?void 0:s.stopPropagation)==null||l.call(s),n==null||n({action:"OK"})};return a.jsx(ni,{zIndex:2147483647,onClose:()=>n==null?void 0:n({action:"CLOSE"}),children:a.jsxs("div",{style:{padding:28,textAlign:"center",pointerEvents:"auto"},children:[a.jsx("div",{style:{fontWeight:900,fontSize:26,color:"#ffb74d",letterSpacing:.5,marginBottom:6},children:"DESPESAS DO MS"}),a.jsxs("div",{style:{marginBottom:8},children:["Despesas operacionais:",a.jsxs("b",{children:["-$ ",Number(t).toLocaleString()]})]}),Number(e)>0&&a.jsxs("div",{style:{marginBottom:8,color:"#ffd54f"},children:["Emprstimo cobrado nesta rodada:",a.jsxs("b",{children:["-$ ",Number(e).toLocaleString()]})]}),a.jsxs("div",{style:{margin:"6px 0 18px",opacity:.85},children:["Total a debitar: ",a.jsxs("b",{children:["-$ ",r.toLocaleString()]})]}),a.jsx("button",{type:"button",onClick:o,className:"btn",style:{minWidth:120,background:"#ffcc80",color:"#1a1f2a",fontWeight:800,borderRadius:10},children:"OK"})]})})}const Ue={backdrop:{position:"fixed",inset:0,background:"rgba(0,0,0,.6)",display:"grid",placeItems:"center",zIndex:9999},card:{width:"min(920px, 96vw)",maxHeight:"90vh",overflow:"auto",background:"#15161a",color:"#e9ecf1",border:"1px solid rgba(255,255,255,.08)",borderRadius:20,boxShadow:"0 20px 50px rgba(0,0,0,.5)"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 16px",borderBottom:"1px solid rgba(255,255,255,.08)"},closeBtn:{width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#fff",fontSize:20,cursor:"pointer"},body:{padding:16},lead:{opacity:.95,lineHeight:1.5},bullets:{margin:"8px 0 16px 18px"},rowBtns:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:12,flexWrap:"wrap"},cta:{padding:"12px 16px",border:0,borderRadius:12,color:"#fff",fontWeight:900,cursor:"pointer",boxShadow:"0 10px 24px rgba(0,0,0,.25)"},back:{padding:"10px 14px",borderRadius:12,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#e9ecf1",cursor:"pointer"},subHeader:{marginBottom:8},infoRow:{display:"flex",gap:8,alignItems:"baseline",margin:"4px 0"},input:{width:"100%",padding:"12px 12px",borderRadius:12,background:"#0f1115",color:"#fff",border:"1px solid rgba(255,255,255,.15)",marginTop:10},option:{padding:16,background:"rgba(255,255,255,.04)",border:"1px solid rgba(255,255,255,.08)",borderRadius:14,textAlign:"center",cursor:"pointer"},spin:{width:34,height:34,borderRadius:8,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#fff",fontSize:18,cursor:"pointer"}};function Hx({playerName:t,loanAvailable:e,hasPendingLoan:n,onGoLoan:r,onGoReduce:o,onGoFire:s,onDeclareBankruptcy:i}){return a.jsxs("div",{style:Ue.body,children:[a.jsxs("p",{style:Ue.lead,children:["Voc est sem dinheiro, ",t,". Escolha uma das opes:"]}),n&&a.jsx("div",{style:{...Ue.lead,color:"#ef4444",fontWeight:"bold",marginBottom:"16px"},children:" Voc j possui um emprstimo pendente. Cada jogador s pode ter um emprstimo por vez."}),a.jsxs("ul",{style:Ue.bullets,children:[a.jsxs("li",{children:["Pedir ",a.jsx("b",{children:"emprstimo"})," nico com 50% de juros garantido por 50% dos seus ",a.jsx("b",{children:"BENS"})," (limite ",`$ ${e}`,")."]}),a.jsxs("li",{children:[a.jsx("b",{children:"Reduzir"})," nveis de ",a.jsx("b",{children:"MIX de Produtos"})," ou ",a.jsx("b",{children:"ERP/Sistemas"})," e receber 50% do valor pago."]}),a.jsxs("li",{children:[a.jsx("b",{children:"Demitir"})," funcionrios e receber 50% do valor total."]})]}),a.jsxs("div",{style:Ue.rowBtns,children:[a.jsx("button",{style:{...Ue.cta,background:"#ef4444"},onClick:s,children:"DEMITIR"}),a.jsx("button",{style:{...Ue.cta,background:"#a16207"},onClick:o,children:"REDUZIR"}),a.jsx("button",{style:{...Ue.cta,background:n?"#6b7280":"#16a34a",cursor:n?"not-allowed":"pointer"},onClick:n?void 0:r,disabled:n,children:n?"EMPRSTIMO (J REALIZADO)":"EMPRSTIMO"}),a.jsx("button",{style:{...Ue.cta,background:"#d32f2f",fontWeight:"bold"},onClick:i,children:"DECLARAR FALNCIA"})]})]})}function Kx({loanAvailable:t,alreadyHasLoan:e=!1,onBack:n,onConfirm:r}){const[o,s]=E.useState(""),i=E.useMemo(()=>Math.max(0,Math.floor(Number(o)||0)),[o]),l=!e&&i>0&&i<=Number(t||0),u=()=>{if(e){r==null||r({type:"LOAN_DENIED",reason:"ALREADY_TAKEN"});return}const c=Math.max(0,Math.floor(Number(t)||0)),d=Math.max(0,Math.min(c,i));if(d>0){const h={type:"LOAN",amount:d,cashDelta:d,loan:{amount:d,charged:!1}};console.log("[DEBUG] RecoveryLoan enviando payload:",h),r==null||r(h)}else r==null||r({type:"LOAN_DENIED",reason:"INVALID_AMOUNT"})};return a.jsxs("div",{style:Ue.body,children:[a.jsx("div",{style:Ue.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"EMPRSTIMO"})}),a.jsxs("p",{children:["Voc pode realizar um emprstimo colocando ",a.jsx("b",{children:"50% dos seus BENS"})," como garantia (pago na prxima Despesas Operacionais)."]}),a.jsxs("div",{style:Ue.infoRow,children:[a.jsx("span",{children:"Valor disponvel:"})," ",a.jsxs("b",{children:["$",Number(t||0)]})]}),a.jsxs("div",{style:Ue.infoRow,children:[a.jsx("span",{children:"Valor garantia:"})," ",a.jsxs("b",{children:["$",Number(t||0)]})]}),e&&a.jsx("div",{style:{...Ue.infoRow,color:"#fca5a5",border:"1px solid rgba(255,0,0,.25)",padding:"8px 10px",borderRadius:8,background:"rgba(255,0,0,.06)"},children:"Voc j possui um emprstimo ativo. No  possvel pegar outro."}),a.jsx("input",{style:Ue.input,type:"number",min:0,max:Math.max(0,Number(t||0)),placeholder:"Digite o valor que quer emprestar",value:o,onChange:c=>s(c.target.value),disabled:e}),a.jsxs("div",{style:{fontSize:12,opacity:.8,marginTop:6},children:["Mx: $",Number(t||0),"  valor ser somado ao seu saldo e cobrado na prxima Despesas Operacionais."]}),a.jsxs("div",{style:Ue.rowBtns,children:[a.jsx("button",{style:Ue.back,onClick:n,children:" Voltar"}),a.jsx("button",{style:{...Ue.cta,background:"#16a34a",opacity:l?1:.6,cursor:l?"pointer":"not-allowed"},onClick:u,disabled:!l,children:"Pegar Emprstimo"})]})]})}function Jx(t){const{options:e=[],optionsMix:n,optionsErp:r,mixOwned:o,erpOwned:s,credits:i,snapshot:l,onBack:u,onConfirm:c}=t,d=(...v)=>console.log("[RecoveryReduce]",...v),h={MIX:{accent:"#06B6D4",soft:"rgba(6,182,212,.14)",ring:"rgba(6,182,212,.45)",glow:"rgba(6,182,212,.35)",pillBg:"rgba(6,182,212,.18)",pillFg:"#9FF1FF"},ERP:{accent:"#8B5CF6",soft:"rgba(139,92,246,.14)",ring:"rgba(139,92,246,.45)",glow:"rgba(139,92,246,.35)",pillBg:"rgba(139,92,246,.18)",pillFg:"#E9D5FF"}},f=["A","B","C","D"],x=(v,D,T)=>f.map(I=>({key:`${v}-${I}`,group:v,level:I,label:`Nvel ${I}`,credit:Number((D==null?void 0:D[I])??0),owned:!!(T!=null&&T[I])})),y=E.useMemo(()=>Array.isArray(n)&&n.length?n:i!=null&&i.MIX?x("MIX",i.MIX,o):x("MIX",{A:0,B:0,C:0,D:0},o),[n,i,o]),b=E.useMemo(()=>Array.isArray(r)&&r.length?r:i!=null&&i.ERP?x("ERP",i.ERP,s):x("ERP",{A:0,B:0,C:0,D:0},s),[r,i,s]);E.useEffect(()=>{console.groupCollapsed("[RecoveryReduce] props snapshot"),console.log("mixCards:",y),console.log("erpCards:",b),console.log("mixOwned:",o),console.log("erpOwned:",s),console.log("credits:",i),console.groupEnd()},[y,b,o,s,i]);const[_,p]=E.useState([]),[m,g]=E.useState(new Set),[w,j]=E.useState(!1),N=v=>{v.level!=="D"&&(!v.owned||v.owned===!1||m.has(v.key)||v.alreadyReduced||p(D=>D.some(I=>I.key===v.key)?D.filter(I=>I.key!==v.key):[...D,v]))},R=E.useMemo(()=>_.reduce((v,D)=>v+Number(D.credit||0),0),[_]),S=v=>_.some(D=>D.key===v.key),A=v=>{var ie,Ne;const D=S(v),T=v.level==="D",I=v.owned===!0,ee=T||!I||m.has(v.key)||v.alreadyReduced||w,te=h[v.group]||h.MIX,ct={...Ue.option,position:"relative",borderRadius:14,background:ee?"rgba(148,163,184,.12)":te.soft,border:D?`2.5px solid ${te.accent}`:"1px solid rgba(148,163,184,.25)",boxShadow:D?`0 0 0 2px ${te.ring}, 0 10px 24px ${te.glow}`:"none",cursor:ee?"not-allowed":"pointer",opacity:ee?.35:1,transition:"transform .06s ease-out, box-shadow .12s ease-out, border-color .12s"},rt={fontWeight:900,fontSize:16,marginBottom:8,color:ee?"#CBD5E1":"#E5F9FF"},U={fontWeight:700,marginTop:2,color:ee?"#A1A1AA":"#FFFFFF"},ae={position:"absolute",top:8,right:8,fontSize:11,padding:"3px 8px",borderRadius:999,background:ee?"rgba(148,163,184,.22)":te.pillBg,color:ee?"#E5E7EB":te.pillFg,border:`1px solid ${ee?"rgba(148,163,184,.35)":te.ring}`,letterSpacing:.2};return a.jsxs("button",{onClick:()=>N(v),disabled:ee,"aria-pressed":D,style:ct,title:T?"Nvel D  o bsico e no pode ser reduzido.":I?m.has(v.key)?"Nvel j reduzido nesta sesso.":v.alreadyReduced?"Este nvel j foi reduzido anteriormente. Compre o nvel novamente para poder reduzir.":"":"Este nvel no est disponvel. Compre o nvel novamente para poder reduzir.",onMouseDown:be=>!ee&&(be.currentTarget.style.transform="translateY(1px)"),onMouseUp:be=>be.currentTarget.style.transform="translateY(0)",onMouseLeave:be=>be.currentTarget.style.transform="translateY(0)",children:[a.jsx("span",{style:ae,children:T?"bsico":I?m.has(v.key)?"vendido":v.alreadyReduced?"j reduzido":"adquirido":"zerado"}),a.jsx("div",{style:rt,children:v.label}),a.jsx("div",{style:{color:ee?"#A1A1AA":"#BFEFFF"},children:"Crdito ao reduzir:"}),a.jsxs("div",{style:U,children:["$",((Ne=(ie=v.credit).toLocaleString)==null?void 0:Ne.call(ie))??v.credit]})]},v.key)};return a.jsxs("div",{style:Ue.body,children:[a.jsx("div",{style:Ue.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"REDUZIR NVEL MIX/ERP"})}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[a.jsxs("div",{style:{padding:8,borderRadius:8,background:"rgba(255,255,255,0.05)"},children:[a.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"MIX PRODUTOS"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12},children:y.map(A)})]}),a.jsxs("div",{style:{padding:8,borderRadius:8,background:"rgba(255,255,255,0.05)"},children:[a.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"ERP/SISTEMAS"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12},children:b.map(A)})]})]}),a.jsxs("div",{style:{marginTop:10,display:"flex",justifyContent:"space-between",alignItems:"center",opacity:.92},children:[a.jsxs("div",{children:["Selecionados: ",a.jsx("b",{children:_.length}),"    Total: ",a.jsxs("b",{children:["$",R.toLocaleString()]})]}),a.jsx("div",{style:{fontSize:12,opacity:.7},children:"S  possvel selecionar nveis adquiridos."})]}),a.jsxs("div",{style:Ue.rowBtns,children:[a.jsx("button",{style:Ue.back,onClick:u,disabled:w,children:" Voltar"}),a.jsx("button",{style:{...Ue.cta,background:"#F59E0B",color:"#101010",fontWeight:900,opacity:_.length&&!w?1:.55},onClick:()=>{if(!_.length||w)return;j(!0),g(D=>{const T=new Set(D);return _.forEach(I=>T.add(I.key)),T});const v={items:_.map(D=>({...D,selected:!0})),total:R};d("confirm payload =>",v),c==null||c(v),p([]),j(!1)},disabled:!_.length||w,children:"REDUZIR"})]})]})}function Yx({roles:t=[],onBack:e,onConfirm:n}){const r=E.useMemo(()=>t.map(f=>{const x=Number(f.unit??f.total??0),y=Number(f.owned??f.qty??0);return{...f,unit:x,owned:y}}),[t]),[o,s]=E.useState(()=>{const f={};return r.forEach(x=>{f[x.key]=0}),f}),i=f=>`R$ ${Number(f||0).toLocaleString("pt-BR")}`,l=f=>Math.floor(Number(f||0)*.5),u=(f,x)=>{s(y=>{const b=r.find(m=>m.key===f);if(!b)return y;const _=Number(y[f]||0),p=Math.max(0,Math.min(b.owned,_+x));return p===_?y:{...y,[f]:p}})},c=E.useMemo(()=>{const f={};return r.forEach(x=>{const y=Number(o[x.key]||0);f[x.key]=l(x.unit)*y}),f},[o,r]),d=E.useMemo(()=>Object.values(c).reduce((f,x)=>f+x,0),[c]),h=()=>{if(d<=0)return;const f={};r.forEach(x=>{f[x.key]=Number(o[x.key]||0)}),n==null||n({type:"FIRE",items:f,creditByRole:c,totalCredit:d,amount:d,note:`Demisses +${i(d)}`})};return a.jsxs("div",{style:Ue.body,children:[a.jsx("div",{style:Ue.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"DEMITIR FUNCIONRIOS"})}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr 1.2fr 1fr",gap:8,opacity:.9,fontWeight:700,marginBottom:6},children:[a.jsx("div",{children:"Cargo"}),a.jsx("div",{children:"Valor Unitrio"}),a.jsx("div",{children:"Qtd demitir"}),a.jsx("div",{children:"Crdito"})]}),a.jsx("div",{style:{display:"grid",gap:12},children:r.map(f=>{const x=Number(o[f.key]||0),y=Number(f.unit||0),b=Number(f.owned||0),_=l(y),p=_*x,m=x<=0,g=x>=b||b<=0;return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr 1.2fr 1fr",alignItems:"center",gap:8},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:800},children:f.label}),a.jsxs("div",{style:{opacity:.75,fontSize:12},children:["Possui: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{children:[a.jsx("div",{children:a.jsx("b",{children:i(y)})}),a.jsxs("div",{style:{opacity:.75,fontSize:12},children:["Crdito por un.: ",a.jsx("b",{children:i(_)})]})]}),a.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[a.jsx("button",{style:{...Ue.spin,opacity:m?.5:1,cursor:m?"not-allowed":"pointer"},disabled:m,onClick:()=>u(f.key,-1),children:"-"}),a.jsx("div",{style:{minWidth:28,textAlign:"center",fontWeight:800},children:x}),a.jsx("button",{style:{...Ue.spin,opacity:g?.5:1,cursor:g?"not-allowed":"pointer"},disabled:g,onClick:()=>u(f.key,1),children:"+"})]}),a.jsx("div",{children:a.jsx("b",{children:i(p)})})]},f.key)})}),a.jsxs("div",{style:{marginTop:12,textAlign:"right",fontWeight:900},children:["Total a resgatar: ",a.jsx("b",{children:i(d)})]}),a.jsxs("div",{style:Ue.rowBtns,children:[a.jsx("button",{style:Ue.back,onClick:e,children:" Voltar"}),a.jsx("button",{style:{...Ue.cta,background:"#ef4444",opacity:d>0?1:.6},onClick:h,disabled:d<=0,children:"DEMITIR"})]})]})}function xf({playerName:t="Jogador",bens:e=0,currentPlayer:n,canClose:r=!0}){var A;const{resolveTop:o,popModal:s}=(tn==null?void 0:tn())||{},[i,l]=E.useState("menu"),u=()=>{r&&(s?s(!1):o==null||o(null))},c=E.useMemo(()=>({A:12e3,B:6e3,C:3e3,D:1e3}),[]),d=E.useMemo(()=>({A:1e4,B:4e3,C:1500,D:500}),[]),h=v=>{if(v==null)return"";const D=String(v).trim().toUpperCase();if(["A","B","C","D"].includes(D))return D;const T=Number(D);return T===1?"A":T===2?"B":T===3?"C":T===4?"D":""},f=E.useMemo(()=>{const v=n||{};return{name:v.name??t,bens:Number(v.bens??e??0),vendedoresComuns:Number(v.vendedoresComuns??0),fieldSales:Number(v.fieldSales??0),insideSales:Number(v.insideSales??0),gestores:Number(v.gestores??v.gestoresComerciais??0),raw:v}},[n,t,e]);E.useEffect(()=>{console.group("[RecoveryModal] mount snapshot"),console.log("raw player =>",f.raw),console.groupEnd()},[f.raw]);const x=E.useMemo(()=>Math.max(0,Math.floor(f.bens*.5)),[f.bens]),y=E.useMemo(()=>{var D;const v=(D=f.raw)==null?void 0:D.loanPending;return v&&Number(v.amount)>0},[(A=f.raw)==null?void 0:A.loanPending]),b=E.useMemo(()=>[{key:"mix",label:"MIX PRODUTOS",credit:1500},{key:"erp",label:"ERP/SISTEMAS",credit:1500}],[]),_=E.useMemo(()=>[{key:"comum",label:"Vendedor Comum",unit:1500,owned:f.vendedoresComuns},{key:"field",label:"Field Sales",unit:3e3,owned:f.fieldSales},{key:"inside",label:"Inside Sales",unit:3e3,owned:f.insideSales},{key:"gestor",label:"Gestor",unit:5e3,owned:f.gestores}],[f]),p=E.useMemo(()=>{const v=f.raw||{};return h(v.mixProdutosLetter??v.mixProdutos??v.mixProducts??v.mixLevelLetter??v.mixLevel??v.mix_level??v.mix??v.mix_produtos??v.mix_products)},[f.raw]),m=E.useMemo(()=>{var D;const v=f.raw||{};return h(v.erpSistemasLetter??v.erpSistemas??((D=v.erpSystems)==null?void 0:D.level)??v.erpSystemsLetter??v.erpLevelLetter??v.erpLevel??v.erp_level??v.erp??v.erp_sistemas)},[f.raw]),g=E.useMemo(()=>{const v=f.raw||{},D=v.mixOwned??v.mix??{},T=new Set;return D.A===!0&&T.add("A"),D.B===!0&&T.add("B"),D.C===!0&&T.add("C"),D.D===!0&&T.add("D"),T.size===0&&T.add("D"),T},[f.raw]),w=E.useMemo(()=>{const v=f.raw||{},D=v.erpOwned??v.erp??{},T=new Set;return D.A===!0&&T.add("A"),D.B===!0&&T.add("B"),D.C===!0&&T.add("C"),D.D===!0&&T.add("D"),T.size===0&&T.add("D"),T},[f.raw]);E.useEffect(()=>{console.group("[RecoveryModal] owned detect"),console.log("mixLetter(panel):",p," -> ownedMix =",Object.fromEntries(["A","B","C","D"].map(v=>[v,g.has(v)]))),console.log("erpLetter(panel):",m," -> ownedErp =",Object.fromEntries(["A","B","C","D"].map(v=>[v,w.has(v)]))),console.groupEnd()},[p,m,g,w]);const j=E.useMemo(()=>{var D,T;const v=f.raw||{};return{MIX:Array.isArray((D=v.reducedLevels)==null?void 0:D.MIX)?v.reducedLevels.MIX:[],ERP:Array.isArray((T=v.reducedLevels)==null?void 0:T.ERP)?v.reducedLevels.ERP:[]}},[f.raw]),N=E.useMemo(()=>["A","B","C","D"].map(v=>({key:`mix-${v}`,group:"MIX",level:v,label:`Nvel ${v}`,credit:(c[v]||0)/2,owned:g.has(v),alreadyReduced:j.MIX.includes(v)})),[g,c,j.MIX]),R=E.useMemo(()=>["A","B","C","D"].map(v=>({key:`erp-${v}`,group:"ERP",level:v,label:`Nvel ${v}`,credit:(d[v]||0)/2,owned:w.has(v),alreadyReduced:j.ERP.includes(v)})),[w,d,j.ERP]),S=E.useMemo(()=>({MIX:{A:c.A/2,B:c.B/2,C:c.C/2,D:c.D/2},ERP:{A:d.A/2,B:d.B/2,C:d.C/2,D:d.D/2}}),[c,d]);return a.jsx("div",{style:Ue.backdrop,children:a.jsxs("div",{style:Ue.card,children:[a.jsxs("div",{style:Ue.header,children:[a.jsx("div",{style:{fontWeight:900,fontSize:22},children:"RECUPERAO FINANCEIRA"}),r&&a.jsx("button",{onClick:u,style:Ue.closeBtn,children:""})]}),i==="menu"&&a.jsx(Hx,{playerName:f.name,loanAvailable:x,hasPendingLoan:y,onGoLoan:()=>l("loan"),onGoReduce:()=>l("reduce"),onGoFire:()=>l("fire"),onDeclareBankruptcy:()=>o==null?void 0:o({type:"TRIGGER_BANKRUPTCY"})}),i==="loan"&&a.jsx(Kx,{loanAvailable:x,onBack:()=>l("menu"),onConfirm:v=>{console.log("[DEBUG] RecoveryModal recebeu payload do RecoveryLoan:",v),console.log("[DEBUG] RecoveryModal chamando resolveTop com:",v);const D=o==null?void 0:o(v);console.log("[DEBUG] RecoveryModal resolveTop retornou:",D)}}),i==="reduce"&&a.jsx(Jx,{options:b,optionsMix:N,optionsErp:R,mixOwned:{A:g.has("A"),B:g.has("B"),C:g.has("C"),D:g.has("D")},erpOwned:{A:w.has("A"),B:w.has("B"),C:w.has("C"),D:w.has("D")},credits:S,snapshot:f,onBack:()=>l("menu"),onConfirm:v=>{if(Array.isArray(v==null?void 0:v.items)){const I=Number(v.total??v.items.filter(ee=>ee.selected).reduce((ee,te)=>ee+Number(te.credit||0),0));o==null||o({type:"REDUCE",amount:I,items:v.items,note:`Reduo mltipla +R$ ${I.toLocaleString()}`});return}const D=Number((v==null?void 0:v.credit)||(v==null?void 0:v.amount)||0),T=v&&v.group&&v.level?{group:String(v.group).toUpperCase(),level:String(v.level).toUpperCase(),credit:D}:null;o==null||o({type:"REDUCE",amount:D,group:T==null?void 0:T.group,level:T==null?void 0:T.level,selection:T,note:T?`Reduo ${T.group} nvel ${T.level} +R$ ${D.toLocaleString()}`:`Reduo +R$ ${D.toLocaleString()}`})}}),i==="fire"&&a.jsx(Yx,{roles:_,onBack:()=>l("menu"),onConfirm:v=>o==null?void 0:o(v)})]},i)})}function Qx({playerName:t="Jogador",balanceText:e=""}){const{resolveTop:n,closeModal:r}=tn(),o=E.useRef(null);E.useEffect(()=>{var c;const u=document.body.style.overflow;return document.body.style.overflow="hidden",(c=o.current)==null||c.focus(),()=>{document.body.style.overflow=u}},[]),E.useEffect(()=>{const u=c=>{(c.key==="Escape"||c.key==="Enter"||c.key===" ")&&(c.preventDefault(),c.stopPropagation())};return document.addEventListener("keydown",u,!0),()=>document.removeEventListener("keydown",u,!0)},[]);const s=u=>{u.preventDefault(),u.stopPropagation()},i=()=>{n(!1),r==null||r()},l=()=>{n(!0),r==null||r()};return a.jsxs(ni,{width:780,onClose:i,children:[a.jsx("style",{children:`
        .sg-modal-panel {
          background:#111827; border:1px solid rgba(255,255,255,0.08);
          border-radius:16px; padding:20px 22px 18px; color:#e5e7eb;
          position:relative; box-shadow:0 10px 35px rgba(0,0,0,.55);
        }
        .sg-modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
        .sg-modal-title{font-size:22px;font-weight:700;margin:0}
        .sg-icon-close{background:transparent;border:0;color:#9ca3af;font-size:24px;line-height:1;cursor:pointer}
        .sg-icon-close:hover{color:#e5e7eb}

        .sg-modal-infos{display:flex;justify-content:space-between;align-items:center;
          font-size:14px;color:#cbd5e1;margin:6px 0 12px}
        .sg-modal-infos .right{opacity:.8}

        .sg-callout-warning{
          background:rgba(250,204,21,.12); border:1px solid rgba(250,204,21,.45);
          border-radius:12px; padding:14px 16px; margin-bottom:14px
        }
        .sg-callout-title{font-weight:700;margin-bottom:6px;color:#fde68a}
        .sg-muted{opacity:.7}

        .sg-modal-body{margin:8px 2px 14px;font-size:15px;line-height:1.5}

        .sg-modal-actions{display:flex;justify-content:space-between;gap:12px;margin-top:10px}
        .sg-btn{font-weight:600;border:0;cursor:pointer;padding:12px 18px}
        .sg-pill{border-radius:999px}
        .sg-btn-neutral{background:#374151;color:#e5e7eb}
        .sg-btn-neutral:hover{background:#4b5563}
        .sg-btn-danger{background:#b91c1c;color:#fff}
        .sg-btn-danger:hover{background:#991b1b}
        .sg-btn:focus{outline:2px solid rgba(255,255,255,.35);outline-offset:2px}
      `}),a.jsxs("div",{className:"sg-modal-panel",role:"dialog","aria-modal":"true","aria-labelledby":"bk-title","aria-describedby":"bk-desc",onClick:s,onMouseDown:s,onKeyDown:s,children:[a.jsxs("div",{className:"sg-modal-header",children:[a.jsx("h2",{id:"bk-title",className:"sg-modal-title",children:"Declarar Falncia"}),a.jsx("button",{className:"sg-icon-close","aria-label":"Fechar",onClick:i,children:""})]}),a.jsxs("div",{className:"sg-modal-infos",children:[a.jsx("div",{className:"left",children:e?a.jsxs(a.Fragment,{children:["Saldo disponvel: ",a.jsx("b",{children:e})]}):a.jsx(a.Fragment,{children:""})}),a.jsx("div",{className:"right",children:"Ao permanente nesta partida"})]}),a.jsxs("div",{className:"sg-callout-warning",id:"bk-desc",children:[a.jsx("div",{className:"sg-callout-title",children:"Ateno"}),a.jsxs("p",{children:[t,", ao confirmar, voc ser marcado como ",a.jsx("b",{children:"FALIDO"}),". Seu turno ser ",a.jsx("b",{children:"sempre pulado"})," e voc no poder mais executar aes."]}),a.jsx("p",{className:"sg-muted",children:"Esta deciso  irreversvel at o fim da partida."})]}),a.jsx("div",{className:"sg-modal-body",children:a.jsxs("p",{children:["Confirme abaixo para encerrar sua participao ativa. Voc continuar visvel no placar como ",a.jsx("b",{children:"FALIDO"}),"."]})}),a.jsxs("div",{className:"sg-modal-actions",children:[a.jsx("button",{className:"sg-btn sg-pill sg-btn-neutral",onClick:i,children:"Cancelar"}),a.jsx("button",{ref:o,className:"sg-btn sg-pill sg-btn-danger",onClick:l,children:"Declarar Falncia"})]})]})]})}function Xx({players:t,setPlayers:e,round:n,setRound:r,turnIdx:o,setTurnIdx:s,roundFlags:i,setRoundFlags:l,isMyTurn:u,isMine:c,myUid:d,meId:h,myCash:f,current:x,broadcastState:y,appendLog:b,turnLock:_,setTurnLockBroadcast:p,gameOver:m,setGameOver:g,winner:w,setWinner:j,setShowBankruptOverlay:N}){const{pushModal:R,awaitTop:S,closeTop:A}=(tn==null?void 0:tn())||{},[v,D]=ge.useState(0),T=ge.useRef(0);ge.useEffect(()=>{T.current=v},[v]);const I=ge.useRef(!1),ee=ge.useRef(!1),te=ge.useRef(null),ct=ge.useRef(null),rt=ge.useCallback(H=>{if(!Array.isArray(H)||H.length===0)return H;const Ve=[...H].filter(Boolean);let Ce=Ve.every(Oe=>Number.isInteger(Oe.seat))?Ve.sort((Oe,Te)=>Oe.seat-Te.seat):Ve.sort((Oe,Te)=>String((Oe==null?void 0:Oe.id)??(Oe==null?void 0:Oe.player_id)??"").localeCompare(String((Te==null?void 0:Te.id)??(Te==null?void 0:Te.player_id)??""))),Nt=0;const O=new Set(Ce.filter(Oe=>Number.isInteger(Oe.seat)).map(Oe=>Oe.seat));return Ce=Ce.map(Oe=>{if(Number.isInteger(Oe.seat))return Oe;for(;O.has(Nt);)Nt++;return O.add(Nt),{...Oe,seat:Nt++}}),Ce=Ce.sort((Oe,Te)=>Oe.seat-Te.seat),Ce},[]),U=ge.useMemo(()=>rt(t),[t,rt]);ge.useEffect(()=>{u?console.log("[DEBUG] modalLocks sync - isMyTurn:",u,"modalLocks:",v):v>0&&(console.log("[DEBUG] modalLocks sync - resetando modalLocks para 0 (no  minha vez)"),D(0),T.current=0,I.current=!1)},[u,v]),ge.useEffect(()=>(_?(te.current&&clearTimeout(te.current),te.current=setTimeout(()=>{const H=Ne.current,Ve=String(H||"")===String(d),Fe=T.current,Ce=I.current;console.warn("[DEBUG]  TIMEOUT DE SEGURANA - turnLock ativo h mais de 30s",{isLockOwner:Ve,currentModalLocks:Fe,currentOpening:Ce,lockOwner:H}),Ve&&Fe===0&&!Ce&&(console.warn("[DEBUG]  FORANDO LIBERAO DO TURNLOCK (timeout de segurana)"),p(!1),ee.current=!1)},3e4)):te.current&&(clearTimeout(te.current),te.current=null),()=>{te.current&&(clearTimeout(te.current),te.current=null)}),[_,d,p]);const[ae,ie]=ge.useState(null),Ne=ge.useRef(null);ge.useEffect(()=>{Ne.current=ae},[ae]);const be=ge.useRef(null),re=ge.useRef(n);ge.useEffect(()=>{re.current=n,console.log("[DEBUG]  currentRoundRef atualizado para:",n)},[n]);const De=ge.useRef(t);ge.useEffect(()=>{De.current=t},[t]);const qn=ge.useRef(o);ge.useEffect(()=>{qn.current=o},[o]);const Lt=ge.useRef(m);ge.useEffect(()=>{Lt.current=m},[m]);const he=ge.useRef(!1),Hn=ge.useRef(!1);ge.useEffect(()=>{const H=t[o];H&&String(H.id)===String(d)?(console.log("[DEBUG]  minha vez - atualizando lockOwner para:",d,"turnIdx:",o),ie(String(d)),be.current&&(be.current.nextTurnIdx===o?(console.log("[DEBUG] Limpando pendingTurnDataRef - turno j foi processado (nextTurnIdx === turnIdx)"),be.current=null):console.log("[DEBUG] Mantendo pendingTurnDataRef - prximo turno:",be.current.nextTurnIdx,"turno atual:",o))):(ae===String(d)&&(console.log("[DEBUG] No  mais minha vez - limpando lockOwner"),ie(null)),be.current&&be.current.nextTurnIdx!==o&&(console.log("[DEBUG] Limpando pendingTurnDataRef - no  minha vez e dados no so para turno atual"),be.current=null))},[o,t,d,ae]);const Ae=async H=>{if(!(R&&S))return null;I.current=!0,D(Fe=>{const Ce=Fe+1;return T.current=Ce,ct.current=null,console.log("[DEBUG] openModalAndWait - ABRINDO modal, modalLocks:",Fe,"->",Ce,"openingModalRef:",I.current),Ce});let Ve=!1;try{R(H),await new Promise(Ce=>setTimeout(Ce,100)),I.current=!1,console.log("[DEBUG] openModalAndWait - Modal renderizada, openingModalRef:",I.current);const Fe=await S();return Ve=!0,await new Promise(Ce=>setTimeout(Ce,50)),Fe}catch(Fe){return console.error("[DEBUG]  ERRO ao abrir/aguardar modal:",Fe),Ve=!0,I.current=!1,D(Ce=>{const Nt=Math.max(0,Ce-1);return T.current=Nt,Nt===0&&(ct.current=Date.now()),console.log("[DEBUG] openModalAndWait - ERRO, decrementando modalLocks:",Ce,"->",Nt),Nt}),null}finally{Ve||(I.current=!1),Ve&&D(Fe=>{const Ce=Math.max(0,Fe-1);return T.current=Ce,Ce===0&&(ct.current=Date.now(),console.log("[DEBUG] openModalAndWait - LTIMA MODAL FECHADA - timestamp:",ct.current)),console.log("[DEBUG] openModalAndWait - FECHANDO modal, modalLocks:",Fe,"->",Ce),Ce})}},vr=ge.useCallback((H,Ve)=>{const Fe=t[H],Ce=Math.max(0,Number(Ve||0));return Number((Fe==null?void 0:Fe.cash)||0)>=Ce},[t]),et=ge.useCallback((H,Ve,Fe)=>{const Ce=vr(H,Ve);return Ce||b(`Saldo insuficiente${Fe?" para "+Fe:""}. Use RECUPERAO (demitir / emprestar / reduzir) ou declare FALNCIA.`),Ce},[vr,b]),fo=ge.useCallback((H,Ve,Fe)=>{var Oe;if(Ve<=5)return!1;const Ce=(H||[]).filter(Te=>!(Te!=null&&Te.bankrupt));if(Ce.length===0){console.log("[DEBUG]  FIM DE JOGO - Nenhum jogador vivo restante"),e(H),j(null),g(!0),r(5),re.current=5,b("Fim de jogo! Todos os jogadores falidos."),be.current=null,p(!1);try{y(H||[],Fe||o,5,!0,null,{round:5,gameOver:!0,winner:null})}catch{}return!0}const O=((Oe=Ce.map(Te=>({player:Te,patrimonio:(Te.cash||0)+(Te.bens||0),cash:Te.cash||0})).sort((Te,vn)=>{var $t,z;return vn.patrimonio-Te.patrimonio||vn.cash-Te.cash||String((($t=Te.player)==null?void 0:$t.name)||"").localeCompare(String(((z=vn.player)==null?void 0:z.name)||""))})[0])==null?void 0:Oe.player)||null;console.log("[ENDGAME] finalizando: vencedor=",(O==null?void 0:O.name)||"N/A",", round=5"),e(H),j(O),g(!0),r(5),re.current=5,b(`Fim de jogo! 5 rodadas completas. Vencedor: ${(O==null?void 0:O.name)||""}`),be.current=null,p(!1);try{y(H||[],Fe||o,5,!0,O,{round:5,gameOver:!0,winner:O})}catch{}return!0},[b,y,g,r,p,j,o]),on=ge.useCallback((H,Ve,Fe)=>{var Ce,Nt;if(console.log("[DEBUG]  advanceAndMaybeLap chamada - steps:",H,"deltaCash:",Ve,"note:",Fe),!(Lt.current||he.current||Hn.current||!t.length)){if(ee.current){console.warn("[DEBUG]  advanceAndMaybeLap - mudana de turno j em progresso, ignorando");return}if(T.current>0||I.current){console.warn("[DEBUG]  advanceAndMaybeLap - h modais abertas, aguardando...",{modalLocks:T.current,opening:I.current}),setTimeout(()=>{T.current===0&&!I.current&&on(H,Ve,Fe)},200);return}ee.current=!0,p(!0),ie(String(d));try{const O=o,Oe=U[O];if(!Oe){p(!1),ee.current=!1;return}const Te=String(Oe.id);console.log("[DEBUG]  POSIO INICIAL - Jogador:",Oe.name,"Posio:",Oe.pos,"Saldo:",Oe.cash);const vn=async(k,L,q,Y=t)=>{var G,se,le,fe,qe,Ke,Pe,St,tt,xt,Dt,Ft,jn,Pn,Ln;const xe=Number(((G=Y[O])==null?void 0:G.cash)||0);if(xe>=k){console.log("[DEBUG]  Saldo suficiente! Processando pagamento de:",k);const we=rt(Y).map(P=>String(P.id)!==Te?P:{...P,cash:Math.max(0,(P.cash||0)-k),pos:P.pos});return e(we),y(we,o,re.current),!0}I.current=!0;const ye=await Ae(a.jsx(gr,{requiredAmount:k,currentCash:xe,title:`Saldo insuficiente para ${q} ${L}`,message:`Voc precisa ${q} R$ ${k.toLocaleString()} mas possui apenas R$ ${xe.toLocaleString()}.`,showRecoveryOptions:!0}));if(!ye)return p(!1),!1;if(ye.action==="RECOVERY"){console.log("[DEBUG] Abrindo RecoveryModal para jogador:",Y[O]);const we=await Ae(a.jsx(xf,{currentPlayer:Y[O],canClose:!1}));if(console.log("[DEBUG] RecoveryModal retornou:",we),we){console.log("[DEBUG] recoveryModalRes existe, tipo:",we.type,"action:",we.action);let P=Y;if(we.type==="FIRE"){console.log("[DEBUG]  Condio FIRE atendida! Processando demisses:",we);const Z={cashDelta:Number(we.amount||0),vendedoresComunsDelta:-Number(((se=we.items)==null?void 0:se.comum)||0),fieldSalesDelta:-Number(((le=we.items)==null?void 0:le.field)||0),insideSalesDelta:-Number(((fe=we.items)==null?void 0:fe.inside)||0),gestoresDelta:-Number(((qe=we.items)==null?void 0:qe.gestor)||0)};console.log("[DEBUG] Deltas de demisso:",Z),P=Y.map((ue,_e)=>_e!==O?ue:{...At(ue,Z),pos:ue.pos}),console.log("[DEBUG] Novo saldo aps demisses:",(Ke=P[O])==null?void 0:Ke.cash),e(P),y(P,o,re.current)}else if(we.type==="LOAN"){console.log("[DEBUG]  Condio LOAN atendida! Processando emprstimo:",we);const Z=(Pe=Y[O])==null?void 0:Pe.loanPending;if(Z&&Number(Z.amount)>0){console.log("[DEBUG]  Jogador j possui emprstimo pendente:",Z);const _e=await Ae(a.jsx(gr,{requiredAmount:k,currentCash:((St=Y[O])==null?void 0:St.cash)||0,title:"Emprstimo j realizado",message:`Voc j possui um emprstimo pendente de R$ ${Number(Z.amount).toLocaleString()}. Cada jogador s pode ter um emprstimo por vez.`,showRecoveryOptions:!1,canClose:!1}));if(!_e||_e.action!=="BANKRUPT")return p(!1),!1;const Se=Y.map((Kt,Zo)=>Zo===O?{...Kt,bankrupt:!0}:Kt);if(Rs(Se)<=1){const Kt=Se.findIndex(Zo=>!(Zo!=null&&Zo.bankrupt));return j(Kt>=0?Se[Kt]:null),e(Se),g(!0),p(!1),y(Se,o,n,!0,Kt>=0?Se[Kt]:null),!1}const Je=us(Se,O);return e(Se),s(Je),p(!1),y(Se,Je,re.current),!1}const ue=Number(we.amount||0);console.log("[DEBUG] Valor do emprstimo:",ue),console.log("[DEBUG] Saldo atual do jogador:",(tt=Y[O])==null?void 0:tt.cash),P=Y.map((_e,Se)=>Se!==O?_e:{..._e,cash:(Number(_e.cash)||0)+ue,loanPending:{amount:ue,charged:!1,shouldChargeOnNextExpenses:!0},pos:_e.pos}),console.log("[DEBUG] Novo saldo do jogador:",(xt=P[O])==null?void 0:xt.cash),console.log("[DEBUG] Novo loanPending:",(Dt=P[O])==null?void 0:Dt.loanPending),e(P),y(P,o,re.current)}else if(we.type==="REDUCE"){console.log("[DEBUG]  Condio REDUCE atendida! Processando reduo:",we);const Z=we.items||[];let ue=0;console.log("[DEBUG] Selees para reduzir:",Z),P=Y.map((_e,Se)=>{if(Se!==O)return _e;let ke={..._e};for(const Je of Z)Je.selected&&(ue+=Number(Je.credit||0),Je.group==="MIX"?ke.mixOwned={...ke.mixOwned||{},[Je.level]:!1}:Je.group==="ERP"&&(ke.erpOwned={...ke.erpOwned||{},[Je.level]:!1}));return ke.cash=(Number(ke.cash)||0)+ue,ke.pos=_e.pos,ke}),console.log("[DEBUG] Total de crdito da reduo:",ue),console.log("[DEBUG] Novo saldo aps reduo:",(Ft=P[O])==null?void 0:Ft.cash),e(P),y(P,o,re.current)}else console.log("[DEBUG]  Nenhuma condio foi atendida! Tipo:",we.type,"Action:",we.action);const Ee=Number(((jn=P[O])==null?void 0:jn.cash)||0);if(console.log("[DEBUG] Verificando saldo aps recuperao - Novo saldo:",Ee,"Necessrio:",k),Ee>=k){console.log("[DEBUG]  Saldo suficiente aps recuperao! Processando pagamento de:",k);const Z=P.map((ue,_e)=>_e!==O?ue:{...ue,cash:Math.max(0,(ue.cash||0)-k),pos:ue.pos});return console.log("[DEBUG]  PAGAMENTO - Saldo antes:",(Pn=P[O])==null?void 0:Pn.cash,"Valor a pagar:",k,"Saldo aps:",(Ln=Z[O])==null?void 0:Ln.cash),e(Z),y(Z,o,re.current),!0}else return console.log("[DEBUG]  Saldo ainda insuficiente aps recuperao. Continuando recurso..."),await vn(k,L,q,P)}else return p(!1),!1}else if(ye.action==="BANKRUPT"){const we=Y.map((Z,ue)=>ue===O?{...Z,bankrupt:!0}:Z);if(Rs(we)<=1){const Z=we.findIndex(ue=>!(ue!=null&&ue.bankrupt));return j(Z>=0?we[Z]:null),e(we),g(!0),p(!1),y(we,o,n,!0,Z>=0?we[Z]:null),!1}const Ee=us(we,O);return e(we),s(Ee),p(!1),y(we,Ee,re.current),!1}else return p(!1),!1},$t=Oe.pos,z=($t+H)%Cs,pe=z<$t,Re=pe&&$t>=Cs-1;console.log("[DEBUG]  MOVIMENTO - De posio:",$t,"Para posio:",z,"Steps:",H,"Lap:",pe,"CompletedLap:",Re);const ve=wl($t,z,0)||pe,Me=re.current,Be=t.filter(k=>!(k!=null&&k.bankrupt)).length,K=rt(t).map(k=>{if(String(k.id)!==Te)return k;const L=(k.cash||0)+(Ve||0),q=Number(k.lastRevenueRound)||0;let Y=!1,xe=z;if(ve){const ye=Math.max(q,Me);return Me===5&&Be>1&&(Y=!0,xe=0),{...k,pos:xe,cash:Math.max(0,L),lastRevenueRound:ye,waitingAtRevenue:Y}}return{...k,pos:xe,cash:Math.max(0,L),lastRevenueRound:q,waitingAtRevenue:!1}}),C=K.find(k=>String(k.id)===Te);console.log("[DEBUG]  APS MOVIMENTO - Jogador:",C==null?void 0:C.name,"Posio:",C==null?void 0:C.pos,"Saldo:",C==null?void 0:C.cash,"lastRevenueRound:",C==null?void 0:C.lastRevenueRound,"waitingAtRevenue:",C==null?void 0:C.waitingAtRevenue);let F=re.current,J=[...i],oe=!1,W=!1;if(pe){console.log("[DEBUG]  VOLTA COMPLETA DETECTADA (lap=true) - Jogador completou uma volta completa!",{jogador:Oe.name,posicaoAnterior:$t,posicaoNova:z,rodadaAtual:re.current}),J.length<t.length&&(J=[...J,...new Array(t.length-J.length).fill(!1)]);const k=U.findIndex(L=>String(L.id)===Te);k>=0&&(J[k]=!0),console.log("[DEBUG]  Flag marcada por volta completa (lap) - Flags:",J.map((L,q)=>{var Y;return`${(Y=U[q])==null?void 0:Y.name}:${L}`}).join(", "))}if(ve){J.length<t.length&&(J=[...J,...new Array(t.length-J.length).fill(!1)]);const k=U.findIndex(G=>String(G.id)===Te);k>=0&&(J[k]?console.log("[DEBUG]  Jogador j tinha flag marcada (por lap) - Flags:",J.map((G,se)=>{var le;return`${(le=U[se])==null?void 0:le.name}:${G}`}).join(", ")):(J[k]=!0,console.log("[DEBUG]  Jogador passou pela casa 0 (crossedStart1ForRound) - Flags:",J.map((G,se)=>{var le;return`${(le=U[se])==null?void 0:le.name}:${G}`}).join(", "))));const L=K.filter(G=>!(G!=null&&G.bankrupt)),q=K.map((G,se)=>G!=null&&G.bankrupt?-1:se).filter(G=>G>=0),Y=K.filter(G=>!(G!=null&&G.bankrupt)),xe=Y.length>0&&Y.every(G=>(Number(G.lastRevenueRound)||0)>=re.current);console.log("[DEBUG]  Verificando allAliveDone - Rodada atual:",re.current,"Jogadores vivos:",Y.map(G=>({name:G.name,lastRevenueRound:G.lastRevenueRound})));const ye=K.find(G=>String(G.id)===Te);if(console.log("[DEBUG]  Verificao de rodada - Jogador:",ye==null?void 0:ye.name,"Rodada atual:",re.current,"round do closure:",n),console.log("[DEBUG]  Jogadores vivos:",q.map(G=>{const se=K[G],le=U.findIndex(fe=>String(fe.id)===String(se==null?void 0:se.id));return`${se==null?void 0:se.name}:${le>=0?J[le]:!1}`}).join(", ")),console.log("[DEBUG]  Total de jogadores vivos:",q.length),console.log("[DEBUG]  Flags completas:",J.map((G,se)=>{var le;return`${(le=K[se])==null?void 0:le.name}:${G?"":""}`}).join(", ")),console.log("[DEBUG]  Todos passaram pela casa 0?",xe),xe){const G=re.current;if(F=G+1,oe=!0,G===5&&oe){console.log("[ENDGAME] detectado: fim da 5 (tentaria round=6)"),fo(K,6,o);return}console.log("[DEBUG]  Calculando incremento - round (ref):",G,"round (closure):",n,"nextRound:",F),J=J.map((le,fe)=>{var qe;return(qe=K[fe])!=null&&qe.bankrupt?J[fe]:!1}),console.log("[DEBUG]  RODADA INCREMENTADA - Nova rodada:",F,"Rodada anterior (ref):",G,"Rodada anterior (closure):",n,"Jogadores vivos:",Y.length),console.log("[DEBUG]  Flags resetadas:",J.map((le,fe)=>{var qe;return`${(qe=K[fe])==null?void 0:qe.name}:${le}`}).join(", ")),b(` Rodada ${F} iniciada! Todos os jogadores vivos passaram pela casa de faturamento.`)}else{const G=Y.filter(se=>(Number(se.lastRevenueRound)||0)<re.current).map(se=>se.name);console.log("[DEBUG]  Rodada NO incrementada - ainda faltam jogadores completarem o ms:",G.join(", "))}}l(J),console.log("[DEBUG] roundFlags updated / round closed:",J.map((k,L)=>{var q;return`${(q=K[L])==null?void 0:q.name}:${k}`}).join(", "));let ce=us(K,O);if(re.current===5){let k=0;for(;k<K.length;){const L=K[ce];if(!L.bankrupt&&L.waitingAtRevenue!==!0)break;ce=(ce+1)%K.length,k++}}Ve&&b(`${Oe.name} ${Ve>0?"ganhou":"pagou"} $${Math.abs(Ve).toLocaleString()}`),Fe&&b(Fe),e(K),r(k=>{let L=k;return oe?F>k?(L=F,console.log("[DEBUG]  RODADA INCREMENTADA - Rodada anterior:",k,"Nova rodada:",L,"nextRound calculado:",F),console.log("[DEBUG]  Rodada incrementada com sucesso!"),b(` Rodada ${L} iniciada! Todos os jogadores vivos passaram pela casa de faturamento.`)):(L=k+1,console.log("[DEBUG]  RODADA INCREMENTADA (forado) - Rodada anterior:",k,"Nova rodada:",L,"nextRound calculado:",F),console.log("[DEBUG]  Rodada incrementada com sucesso (forado devido a sincronizao)!"),b(` Rodada ${L} iniciada! Todos os jogadores vivos passaram pela casa de faturamento.`)):(L=Math.max(F,k),L!==k&&console.log("[DEBUG]  Rodada atualizada via Math.max - prevRound:",k,"nextRound:",F,"finalRound:",L)),re.current=L,L});const M=F,V=J;if(be.current={nextPlayers:K,nextTurnIdx:ce,nextRound:M,nextRoundFlags:V,timestamp:Date.now(),shouldIncrementRound:oe,endGame:W},console.log("[DEBUG]  pendingTurnDataRef preenchido - prximo turno:",ce,"rodada atual:",n,"prxima rodada:",M,"nextRound calculado:",F,"shouldIncrementRound:",oe,"rodada foi incrementada?",F>n,"roundFlags:",V.map((k,L)=>{var q;return`${(q=K[L])==null?void 0:q.name}:${k}`}).join(", ")),fo(K,F,o)){be.current=null,ee.current=!1,I.current=!1;return}const $=z+1,Ie=wl($t,z,0),me=wl($t,z,22);let He=!1;if(($===6||$===16||$===32||$===49)&&u&&R&&S&&(He=!0,I.current=!0,(async()=>{var xe,ye,G,se,le;const k=((xe=t[O])==null?void 0:xe.erpLevel)||null,L=((ye=t[O])==null?void 0:ye.erpOwned)||((G=t[O])==null?void 0:G.erp)||{},q=await Ae(a.jsx(df,{currentCash:((se=K[O])==null?void 0:se.cash)??f,currentLevel:k,erpOwned:L}));if(!q||q.action!=="BUY")return;const Y=Number(((le=q.values)==null?void 0:le.compra)||0);if(!et(O,Y,"comprar ERP")){p(!1);return}e(fe=>{const qe=fe.map((Ke,Pe)=>Pe!==O?Ke:At(Ke,{cashDelta:-Y,erpLevelSet:q.level}));return y(qe,o,re.current),qe})})()),($===2||$===11||$===19||$===47)&&u&&R&&S&&(I.current=!0,(async()=>{var Y,xe,ye,G;const k=t.find(c)||K[O],L=await Ae(a.jsx(ff,{canTrain:{comum:Number(k==null?void 0:k.vendedoresComuns)||0,field:Number(k==null?void 0:k.fieldSales)||0,inside:Number(k==null?void 0:k.insideSales)||0,gestor:Number((k==null?void 0:k.gestores)??(k==null?void 0:k.gestoresComerciais)??(k==null?void 0:k.managers))||0},ownedByType:{comum:((Y=k==null?void 0:k.trainingsByVendor)==null?void 0:Y.comum)||[],field:((xe=k==null?void 0:k.trainingsByVendor)==null?void 0:xe.field)||[],inside:((ye=k==null?void 0:k.trainingsByVendor)==null?void 0:ye.inside)||[],gestor:((G=k==null?void 0:k.trainingsByVendor)==null?void 0:G.gestor)||[]}}));if(!L||L.action!=="BUY")return;const q=Number(L.grandTotal||0);if(!et(O,q,"comprar Treinamento")){p(!1);return}e(se=>{const le=se.map((fe,qe)=>qe!==O?fe:uf(fe,L));return y(le,o,re.current),le})})()),($===5||$===10||$===43)&&u&&R&&S&&(I.current=!0,(async()=>{var q,Y,xe,ye,G,se,le,fe,qe,Ke,Pe,St,tt,xt,Dt,Ft,jn,Pn,Ln;const k=((q=K[O])==null?void 0:q.cash)??f,L=await Ae(a.jsx(Wx,{currentCash:k}));if(L){if(L.action==="OPEN"){const we=String(L.open||"").toUpperCase();if(we==="MIX"){const P=((Y=t[O])==null?void 0:Y.mixProdutos)||null,Ee=((xe=t[O])==null?void 0:xe.mixOwned)||((ye=t[O])==null?void 0:ye.mix)||{},Z=await Ae(a.jsx(vf,{currentCash:((G=K[O])==null?void 0:G.cash)??f,currentLevel:P,mixOwned:Ee}));if(Z&&Z.action==="BUY"){const ue=Number(Z.compra||0),_e=String(Z.level||"D");if(!et(O,ue,"comprar MIX")){p(!1);return}e(Se=>{const ke=Se.map((Je,Kt)=>Kt!==O?Je:At(Je,{cashDelta:-ue,mixProdutosSet:_e,mixBaseSet:{despesaPorCliente:Number(Z.despesa||0),faturamentoPorCliente:Number(Z.faturamento||0)}}));return y(ke,o,re.current),ke})}return}if(we==="MANAGER"){const P=await Ae(a.jsx(mf,{currentCash:((se=K[O])==null?void 0:se.cash)??f}));if(P&&(P.action==="BUY"||P.action==="HIRE")){const Ee=Number(P.headcount??P.qty??P.managersQty??1),Z=Number(typeof P.cashDelta<"u"?P.cashDelta:-Number(P.cost??P.total??P.totalHire??0)),ue=Z<0?-Z:0;if(ue>0&&!et(O,ue,"contratar Gestor")){p(!1);return}const _e=Number(P.expenseDelta??P.totalExpense??P.maintenanceDelta??0);e(Se=>{const ke=Se.map((Je,Kt)=>Kt!==O?Je:At(Je,{cashDelta:Z,gestoresDelta:Ee,manutencaoDelta:_e}));return y(ke,o,re.current),ke})}return}if(we==="INSIDE"){const P=await Ae(a.jsx(hf,{currentCash:((le=K[O])==null?void 0:le.cash)??f}));if(P&&(P.action==="BUY"||P.action==="HIRE")){const Ee=Number(P.cost??P.total??0);if(!et(O,Ee,"contratar Inside Sales")){p(!1);return}const Z=Number(P.headcount??P.qty??1);e(ue=>{const _e=ue.map((Se,ke)=>ke!==O?Se:At(Se,{cashDelta:-Ee,insideSalesDelta:Z}));return y(_e,o,re.current),_e})}return}if(we==="FIELD"){const P=await Ae(a.jsx(gf,{currentCash:((fe=K[O])==null?void 0:fe.cash)??f}));if(P&&(P.action==="HIRE"||P.action==="BUY")){const Ee=Number(P.headcount??P.qty??1),Z={cashDelta:Number(P.cashDelta??-Number(P.totalHire??P.total??P.cost??0)),manutencaoDelta:Number(P.expenseDelta??P.totalExpense??0),revenueDelta:Number(P.revenueDelta??0),fieldSalesDelta:Ee},ue=Z.cashDelta<0?-Z.cashDelta:0;if(ue>0&&!et(O,ue,"contratar Field Sales")){p(!1);return}e(_e=>{const Se=_e.map((ke,Je)=>Je!==O?ke:At(ke,Z));return y(Se,o,re.current),Se})}return}if(we==="COMMON"){const P=await Ae(a.jsx(yf,{currentCash:((qe=K[O])==null?void 0:qe.cash)??f}));if(P&&P.action==="BUY"){const Ee=Number(P.headcount??P.qty??0),Z={cashDelta:Number(P.cashDelta??-Number(P.totalHire??P.total??P.cost??0)),vendedoresComunsDelta:Ee,manutencaoDelta:Number(P.expenseDelta??P.totalExpense??0),revenueDelta:Number(P.revenueDelta??0)},ue=Z.cashDelta<0?-Z.cashDelta:0;if(ue>0&&!et(O,ue,"contratar Vendedores Comuns")){p(!1);return}e(_e=>{const Se=_e.map((ke,Je)=>Je!==O?ke:At(ke,Z));return y(Se,o,re.current),Se})}return}if(we==="ERP"){const P=((Ke=t[O])==null?void 0:Ke.erpLevel)||null,Ee=((Pe=t[O])==null?void 0:Pe.erpOwned)||((St=t[O])==null?void 0:St.erp)||{},Z=await Ae(a.jsx(df,{currentCash:((tt=K[O])==null?void 0:tt.cash)??f,currentLevel:P,erpOwned:Ee}));if(Z&&Z.action==="BUY"){const ue=Number(((xt=Z.values)==null?void 0:xt.compra)||0);if(!et(O,ue,"comprar ERP")){p(!1);return}e(_e=>{const Se=_e.map((ke,Je)=>Je!==O?ke:At(ke,{cashDelta:-ue,erpLevelSet:Z.level}));return y(Se,o,re.current),Se})}return}if(we==="CLIENTS"){const P=await Ae(a.jsx(pf,{currentCash:((Dt=K[O])==null?void 0:Dt.cash)??f}));if(P&&P.action==="BUY"){const Ee=Number(P.totalCost||0);if(!et(O,Ee,"comprar Clientes")){p(!1);return}const Z=Number(P.qty||0),ue=Number(P.maintenanceDelta||0),_e=Number(P.bensDelta||Ee);e(Se=>{const ke=Se.map((Je,Kt)=>Kt!==O?Je:At(Je,{cashDelta:-Ee,clientsDelta:Z,manutencaoDelta:ue,bensDelta:_e}));return y(ke,o,re.current),ke})}return}if(we==="TRAINING"){const P=t.find(c)||K[O],Ee=await Ae(a.jsx(ff,{canTrain:{comum:Number(P==null?void 0:P.vendedoresComuns)||0,field:Number(P==null?void 0:P.fieldSales)||0,inside:Number(P==null?void 0:P.insideSales)||0,gestor:Number((P==null?void 0:P.gestores)??(P==null?void 0:P.gestoresComerciais)??(P==null?void 0:P.managers))||0},ownedByType:{comum:((Ft=P==null?void 0:P.trainingsByVendor)==null?void 0:Ft.comum)||[],field:((jn=P==null?void 0:P.trainingsByVendor)==null?void 0:jn.field)||[],inside:((Pn=P==null?void 0:P.trainingsByVendor)==null?void 0:Pn.inside)||[],gestor:((Ln=P==null?void 0:P.trainingsByVendor)==null?void 0:Ln.gestor)||[]}}));if(Ee&&Ee.action==="BUY"){const Z=Number(Ee.grandTotal||0);if(!et(O,Z,"comprar Treinamento")){p(!1);return}e(ue=>{const _e=ue.map((Se,ke)=>ke!==O?Se:uf(Se,Ee));return y(_e,o,re.current),_e})}return}}if(L.action==="BUY"){if(L.kind==="CLIENTS"||L.modal==="CLIENTS"||typeof L.clientsQty<"u"||typeof L.numClients<"u"||typeof L.totalCost<"u"||typeof L.maintenanceDelta<"u"){const Ee=Number(L.totalCost??L.total??L.amount??0);if(!et(O,Ee,"comprar Clientes")){p(!1);return}const Z=Number(L.clientsQty??L.numClients??L.qty??0),ue=Number(L.maintenanceDelta??L.maintenance??L.mexp??0),_e=Number(L.bensDelta??Ee);e(Se=>{const ke=Se.map((Je,Kt)=>Kt!==O?Je:At(Je,{cashDelta:-Ee,clientsDelta:Z,manutencaoDelta:ue,bensDelta:_e}));return y(ke,o,re.current),ke});return}const P=Number(L.total??L.amount??0);if(!et(O,P,"esta compra")){p(!1);return}e(Ee=>{const Z=Ee.map((ue,_e)=>_e!==O?ue:At(ue,{cashDelta:-P,directBuysPush:[L.item||{total:P}]}));return y(Z,o,re.current),Z})}}})()),($===12||$===21||$===30||$===42||$===53)&&u&&R&&S&&(I.current=!0,(async()=>{var Y;const k=await Ae(a.jsx(hf,{currentCash:((Y=K[O])==null?void 0:Y.cash)??f}));if(!k||k.action!=="HIRE"&&k.action!=="BUY")return;const L=Number(k.cost??k.total??0);if(!et(O,L,"contratar Inside Sales")){p(!1);return}const q=Number(k.headcount??k.qty??1);e(xe=>{const ye=xe.map((G,se)=>se!==O?G:At(G,{cashDelta:-L,insideSalesDelta:q}));return y(ye,o,re.current),ye})})()),[4,8,15,17,20,27,34,36,39,46,52,55].includes($)&&u&&R&&S&&(I.current=!0,(async()=>{var ye;const k=await Ae(a.jsx(pf,{currentCash:((ye=K[O])==null?void 0:ye.cash)??f}));if(!k||k.action!=="BUY")return;const L=Number(k.totalCost||0);if(!et(O,L,"comprar Clientes")){p(!1);return}const q=Number(k.qty||0),Y=Number(k.maintenanceDelta||0),xe=Number(k.bensDelta||L);e(G=>{const se=G.map((le,fe)=>fe!==O?le:At(le,{cashDelta:-L,clientsDelta:q,manutencaoDelta:Y,bensDelta:xe}));return y(se,o,re.current),se})})()),[18,24,29,51].includes($)&&u&&R&&S&&(I.current=!0,(async()=>{var ye;const k=await Ae(a.jsx(mf,{currentCash:((ye=K[O])==null?void 0:ye.cash)??f}));if(!k||k.action!=="BUY"&&k.action!=="HIRE")return;const L=Number(k.headcount??k.qty??k.managersQty??1),q=Number(typeof k.cashDelta<"u"?k.cashDelta:-Number(k.cost??k.total??k.totalHire??0)),Y=q<0?-q:0;if(Y>0&&!et(O,Y,"contratar Gestor")){p(!1);return}const xe=Number(k.expenseDelta??k.totalExpense??k.maintenanceDelta??0);e(G=>{const se=G.map((le,fe)=>fe!==O?le:At(le,{cashDelta:q,gestoresDelta:L,manutencaoDelta:xe}));return y(se,o,re.current),se})})()),[13,25,33,38,50].includes($)&&u&&R&&S&&(I.current=!0,(async()=>{var L;const k=await Ae(a.jsx(gf,{currentCash:((L=K[O])==null?void 0:L.cash)??f}));if(k&&(k.action==="HIRE"||k.action==="BUY")){const q=Number(k.headcount??k.qty??1),Y={cashDelta:Number(k.cashDelta??-Number(k.totalHire??k.total??k.cost??0)),manutencaoDelta:Number(k.expenseDelta??k.totalExpense??0),revenueDelta:Number(k.revenueDelta??0),fieldSalesDelta:q},xe=Y.cashDelta<0?-Y.cashDelta:0;if(xe>0&&!et(O,xe,"contratar Field Sales")){p(!1);return}e(ye=>{const G=ye.map((se,le)=>le!==O?se:At(se,Y));return y(G,o,re.current),G})}})()),[9,28,40,45].includes($)&&u&&R&&S&&(I.current=!0,(async()=>{var xe;const k=await Ae(a.jsx(yf,{currentCash:((xe=K[O])==null?void 0:xe.cash)??f}));if(!k||k.action!=="BUY")return;const L=Number(k.headcount??k.qty??0),q={cashDelta:Number(k.cashDelta??-Number(k.totalHire??k.total??k.cost??0)),vendedoresComunsDelta:L,manutencaoDelta:Number(k.expenseDelta??k.totalExpense??0),revenueDelta:Number(k.revenueDelta??0)},Y=q.cashDelta<0?-q.cashDelta:0;if(Y>0&&!et(O,Y,"contratar Vendedores Comuns")){p(!1);return}e(ye=>{const G=ye.map((se,le)=>le!==O?se:At(se,q));return y(G,o,re.current),G})})()),[7,31,44].includes($)&&u&&R&&S&&(I.current=!0,(async()=>{var ye,G,se,le;const k=((ye=t[O])==null?void 0:ye.mixProdutos)||null,L=((G=t[O])==null?void 0:G.mixOwned)||((se=t[O])==null?void 0:se.mix)||{},q=await Ae(a.jsx(vf,{currentCash:((le=K[O])==null?void 0:le.cash)??f,currentLevel:k,mixOwned:L}));if(!q||q.action!=="BUY")return;const Y=Number(q.compra||0);if(!et(O,Y,"comprar MIX")){p(!1);return}const xe=String(q.level||"D");e(fe=>{const qe=fe.map((Ke,Pe)=>Pe!==O?Ke:At(Ke,{cashDelta:-Y,mixProdutosSet:xe,mixBaseSet:{despesaPorCliente:Number(q.despesa||0),faturamentoPorCliente:Number(q.faturamento||0)}}));return y(qe,o,re.current),qe})})()),[3,14,22,26,35,41,48,54].includes($)&&u&&R&&S&&(I.current=!0,(async()=>{const k=await Ae(a.jsx(Vx,{}));if(!k||k.action!=="APPLY_CARD")return;const L=K[O]||t.find(c)||{};let q=Number.isFinite(k.cashDelta)?Number(k.cashDelta):0,Y=Number.isFinite(k.clientsDelta)?Number(k.clientsDelta):0;if(q<0){const ye=-q;await vn(ye,"Sorte & Revs","pagar",K)}if(e(ye=>{const G=ye.map((se,le)=>{var qe;if(le!==O)return se;let fe={...se};if(q&&(fe.cash=Math.max(0,(fe.cash??0)+q)),Y){const Ke=fe.clients||0;fe.clients=Math.max(0,Ke+Y),console.log("[DEBUG] SorteReves - Clientes alterados:",Ke,"->",fe.clients,"delta:",Y)}if(k.gainSpecialCell&&(fe.fieldSales=(fe.fieldSales||0)+(k.gainSpecialCell.fieldSales||0),fe.support=(fe.support||0)+(k.gainSpecialCell.support||0),fe.gestores=(fe.gestores||0)+(k.gainSpecialCell.manager||0),fe.gestoresComerciais=(fe.gestoresComerciais||0)+(k.gainSpecialCell.manager||0),fe.managers=(fe.managers||0)+(k.gainSpecialCell.manager||0)),k.id==="casa_change_cert_blue"){fe.az=(fe.az||0)+1;const Ke=new Set(((qe=fe.trainingsByVendor)==null?void 0:qe.comum)||[]);Ke.add("personalizado"),fe.trainingsByVendor={...fe.trainingsByVendor||{},comum:Array.from(Ke)}}return fe});return y(G,o,re.current),G}),k.perClientBonus||k.perCertifiedManagerBonus||k.mixLevelBonusABOnly){const ye=K[O]||t.find(c)||{};let G=0;if(k.perClientBonus&&(G+=(Number(ye.clients)||0)*Number(k.perClientBonus||0)),k.perCertifiedManagerBonus&&(G+=Ax(ye)*Number(k.perCertifiedManagerBonus||0)),k.mixLevelBonusABOnly){const se=String(ye.mixProdutos||"").toUpperCase();(se==="A"||se==="B")&&(G+=Number(k.mixLevelBonusABOnly||0))}G&&e(se=>{const le=se.map((fe,qe)=>qe===O?{...fe,cash:(Number(fe.cash)||0)+G}:fe);return y(le,o,re.current),le})}})()),Ie&&u&&R&&S){I.current=!0;const k=K[O]||{},L=Math.max(0,Math.floor($a(k)));(async()=>{await Ae(a.jsx(Gx,{value:L})),e(q=>{const Y=q.map((xe,ye)=>ye!==O?xe:{...xe,cash:(xe.cash||0)+L});return y(Y,o,re.current),Y}),b(`${k.name} recebeu faturamento do ms: +$${L.toLocaleString()}`);try{setTimeout(()=>A==null?void 0:A({action:"AUTO_CLOSE_BELOW"}),0)}catch{}})()}if(me&&u&&R&&S){I.current=!0,console.log("[DEBUG]  DESPESAS OPERACIONAIS - Jogador:",(Ce=K[O])==null?void 0:Ce.name,"Posio atual:",(Nt=K[O])==null?void 0:Nt.pos);const k=K[O]||{},L=Math.max(0,Math.floor(Ia(k))),q=k.loanPending||{},Y=Number(q.amount)>0&&!q.charged&&q.shouldChargeOnNextExpenses===!0,xe=Y?Math.max(0,Math.floor(Number(q.amount))):0;console.log("[DEBUG]  DESPESAS - Valor:",L,"Emprstimo a cobrar:",xe,"Total:",L+xe),console.log("[DEBUG]  EMPRSTIMO - Detalhes:",{amount:Number(q.amount),charged:q.charged,shouldChargeOnNextExpenses:q.shouldChargeOnNextExpenses,currentRound:n,shouldCharge:Y}),(async()=>{var se,le,fe;await Ae(a.jsx(qx,{expense:L,loanCharge:xe}));const ye=L+xe;console.log("[DEBUG]  ANTES handleInsufficientFunds - Saldo atual:",(se=K[O])==null?void 0:se.cash,"Total a pagar:",ye,"Posio:",(le=K[O])==null?void 0:le.pos);const G=await vn(ye,"Despesas Operacionais","pagar",K);if(console.log("[DEBUG]  APS handleInsufficientFunds - canPayExpenses:",G,"Posio atual:",(fe=K[O])==null?void 0:fe.pos),!G){console.log("[DEBUG]  canPayExpenses  false - no liberando turno aqui, deixando tick() gerenciar");return}Y&&e(qe=>{const Ke=qe.map((Pe,St)=>{var xt;if(St!==O)return Pe;const tt={...Pe};return tt.loanPending={...Pe.loanPending||{},charged:!0,chargedAtRound:n,shouldChargeOnNextExpenses:!1},tt.pos=((xt=K[O])==null?void 0:xt.pos)??Pe.pos,tt});return y(Ke,o,re.current),Ke}),b(`${k.name} pagou despesas operacionais: -$${L.toLocaleString()}`),xe>0&&b(`${k.name} teve emprstimo cobrado: -$${xe.toLocaleString()}`),e(qe=>{var Pe,St,tt;const Ke=qe.map((xt,Dt)=>{var Ft;return Dt!==O?xt:{...xt,pos:((Ft=K[O])==null?void 0:Ft.pos)??xt.pos}});return console.log("[DEBUG]  DESPESAS FINALIZADAS - Jogador:",(Pe=Ke[O])==null?void 0:Pe.name,"Posio final:",(St=Ke[O])==null?void 0:St.pos,"Saldo final:",(tt=Ke[O])==null?void 0:tt.cash),Ke})})()}const Kn=Date.now();let sn=0;const Jn=200,an=()=>{var se;if(sn++,sn>Jn){console.warn("[DEBUG]  TIMEOUT - excedeu tentativas mximas, forando desbloqueio");const le=Ne.current;String(le||"")===String(d)&&(p(!1),ee.current=!1,T.current>0&&(console.warn("[DEBUG]  Forando modalLocks para 0 (timeout)"),T.current=0,D(0)),I.current=!1);return}const k=T.current,L=I.current,q=Ne.current,Y=String(q||"")===String(d);if(console.log("[DEBUG] tick - tentativa:",sn,"modalLocks:",k,"openingModalRef:",L,"lockOwner:",q,"myUid:",d,"isLockOwner:",Y),L){console.log("[DEBUG]  tick - modal est sendo aberta, aguardando..."),setTimeout(an,150);return}const xe=ct.current?Date.now()-ct.current:1/0;if(k===0&&(xe>=200||!ct.current)){const le=be.current;if(!!(le!=null&&le.endGame||he.current)&&!Hn.current){Hn.current=!0,he.current=!1;const Pe=Array.isArray(De.current)?De.current:(le==null?void 0:le.nextPlayers)||[],St=(Pe||[]).filter(xt=>!(xt!=null&&xt.bankrupt));let tt=null;St.length>0&&(tt=((se=St.map(Dt=>({p:Dt,patrimonio:(Number(Dt.cash)||0)+(Number(Dt.bens)||0),cash:Number(Dt.cash)||0})).sort((Dt,Ft)=>{var jn,Pn;return Ft.patrimonio-Dt.patrimonio||Ft.cash-Dt.cash||String(((jn=Dt.p)==null?void 0:jn.name)||"").localeCompare(String(((Pn=Ft.p)==null?void 0:Pn.name)||""))})[0])==null?void 0:se.p)||null),console.log("[ENDGAME] finalizando: vencedor=%s, round=5",(tt==null?void 0:tt.name)||""),e(Pe||[]),g(!0),j(tt),r(5),re.current=5,be.current=null,ee.current=!1,I.current=!1,p(!1),y(Pe||[],qn.current,5,!0,tt,{round:5,gameOver:!0,winner:tt});return}const qe=t[o],Ke=qe&&String(qe.id)===String(d);if(Y||Ke&&!q){const Pe=be.current;if(console.log("[DEBUG]  tick - verificando pendingTurnDataRef:",Pe?`prximo turno: ${Pe.nextTurnIdx}`:"null"),Pe){const St=T.current,tt=I.current,xt=o,Dt=Ne.current,Ft=String(Dt||"")===String(d),jn=ct.current?Date.now()-ct.current:1/0,Pn=St===0&&!tt&&(jn>=200||!ct.current);if(Pn&&xt===o&&Ft){if(console.log("[DEBUG]  Mudando turno - de:",o,"para:",Pe.nextTurnIdx,"finalModalLocks:",St,"finalOpening:",tt,"timeSinceLastModalClosed:",jn),Pe.endGame){const Ee=Math.min(5,Number(Pe.nextRound||5)),Z=t.filter(Se=>!(Se!=null&&Se.bankrupt));let ue=null;Z.length>0&&(ue=Z.map(ke=>({...ke,patrimonio:(ke.cash||0)+(ke.bens||0)})).sort((ke,Je)=>Je.patrimonio-ke.patrimonio)[0]||null),console.log("[DEBUG]  FIM DE JOGO no tick - Rodada:",Ee,"Vencedor:",(ue==null?void 0:ue.name)||null),j(ue),g(!0),b("Fim de jogo! 5 rodadas completas."),r(Se=>{const ke=Math.min(5,Math.max(Se,Ee));return re.current=ke,ke});const _e={};Pe.nextRoundFlags&&(_e.roundFlags=Pe.nextRoundFlags),_e.round=Ee,_e.gameOver=!0,_e.winner=ue,y(t,o,Ee,!0,ue,_e),be.current=null,p(!1),ee.current=!1;return}ee.current=!0;const Ln=Pe.nextRound,we=Pe.shouldIncrementRound||!1;console.log("[DEBUG]  Broadcast - Rodada a ser transmitida:",Ln,"Rodada atual no estado:",n,"shouldIncrement:",we),s(Pe.nextTurnIdx),r(Ee=>{const Z=Math.max(Ee,Ln);return Z!==Ee&&console.log("[DEBUG]  Rodada atualizada no tick - de:",Ee,"para:",Z),re.current=Z,Z});const P={};Pe.nextRoundFlags&&(P.roundFlags=Pe.nextRoundFlags),Pe.shouldIncrementRound&&(P.round=Ln),y(Pe.nextPlayers,Pe.nextTurnIdx,Ln,m,w,P),be.current=null,p(!1),ee.current=!1,console.log("[DEBUG]  Turno mudado com sucesso - Rodada:",Ln)}else{console.log("[DEBUG]  tick - condies no atendidas, no mudando turno",{finalModalLocks:St,finalOpening:tt,finalCanChangeTurn:Pn,timeSinceLastModalClosed:jn,finalTurnIdx:xt,turnIdx:o,finalIsLockOwner:Ft,isLockOwner:Y}),console.log("[DEBUG]  tick - condies no atendidas, no mudando turno",{finalModalLocks:St,finalOpening:tt,finalTurnIdx:xt,turnIdx:o,finalIsLockOwner:Ft,isLockOwner:Y}),setTimeout(an,150);return}}else{console.log("[DEBUG]  tick - turnData  null, no mudando turno. turnIdx atual:",o,"lockOwner:",q,"isLockOwner:",Y);const St=ct.current?Date.now()-ct.current:1/0,tt=k===0&&(St>=200||!ct.current);if(Y&&tt&&!L)if(sn<10){console.log("[DEBUG]  tick - tentando novamente em 200ms (pode ser que pendingTurnDataRef ainda no foi preenchido)"),setTimeout(an,200);return}else console.warn("[DEBUG]  tick - excedeu tentativas de retry, liberando turnLock"),p(!1),ee.current=!1;else p(!1),ee.current=!1}}else console.log("[DEBUG]  tick - no sou o dono do cadeado e no  minha vez, no mudando turno",{isLockOwner:Y,isCurrentPlayerMe:Ke,currentLockOwner:q,myUid:d,turnIdx:o}),Ke||(p(!1),ee.current=!1);return}setTimeout(an,100)};let xn=0;const lt=50,ln=()=>{xn++;const k=I.current,L=T.current>0;if((k||L)&&xn<lt){console.log("[DEBUG]  checkBeforeTick - modal sendo aberta ou j aberta, aguardando...",{hasOpening:k,hasLocks:L,modalLocks:T.current,attempt:xn}),setTimeout(ln,200);return}xn>=lt&&(console.warn("[DEBUG]  checkBeforeTick - excedeu tentativas, forando avano do turno",{hasOpening:k,hasLocks:L,modalLocks:T.current}),T.current>0&&(console.warn("[DEBUG]  checkBeforeTick - forando modalLocks para 0"),T.current=0,D(0)),I.current=!1),console.log("[DEBUG]  checkBeforeTick - iniciando tick, sem modais abertas"),an()};setTimeout(ln,500)}catch(O){throw console.error("[DEBUG] Erro em advanceAndMaybeLap:",O),Ne.current===String(d)&&p(!1),O}finally{Ne.current===String(d)?setTimeout(()=>{Ne.current===String(d)&&(p(!1),ee.current=!1)},100):ee.current=!1}}},[t,n,o,i,u,c,d,f,m,b,y,e,r,s,l,p,et,fo,R,S,A]),Xo=ge.useCallback(()=>{if(m||!t.length)return;const H=us(t,o);s(H),y(t,H,re.current)},[y,m,t,n,s,o]),kt=ge.useCallback(H=>{var Ve,Fe,Ce,Nt,O,Oe,Te,vn,$t;if(!(!(H!=null&&H.type)||Lt.current||he.current||Hn.current)){if(H.type==="ROLL"){if(!u){console.warn("[DEBUG]  onAction ROLL - no  minha vez, ignorando");return}if(_){console.warn("[DEBUG]  onAction ROLL - turnLock ativo, ignorando");return}if(T.current>0){console.warn("[DEBUG]  onAction ROLL - h modais abertas, ignorando");return}try{on(H.steps,H.cashDelta,H.note)}catch(z){console.error("[DEBUG] Erro em advanceAndMaybeLap:",z),Ne.current===String(d)&&p(!1)}return}if(H.type==="RECOVERY"){const z=Math.floor(Math.random()*3e3)+1e3,pe=t.find(c);if(!pe)return;const Re=t.map(ve=>c(ve)?{...ve,cash:ve.cash+z}:ve);b(`${pe.name} ativou Recuperao Financeira (+$${z})`),e(Re),y(Re,o,re.current);return}if(H.type==="RECOVERY_CUSTOM"){const z=Number(H.amount||0),pe=t.find(c);if(!pe)return;const Re=t.map(ve=>c(ve)?{...ve,cash:ve.cash+z}:ve);b(`${pe.name} recuperou +$${z}`),e(Re),y(Re,o,re.current);return}if(H.type==="RECOVERY_MODAL"){if(!u||!R||!S)return;(async()=>{const z=await Ae(a.jsx(xf,{playerName:(x==null?void 0:x.name)||"Jogador",currentPlayer:x}));if(z){if(z&&z.type==="TRIGGER_BANKRUPTCY"){kt({type:"BANKRUPT"});return}switch(z.type){case"FIRE":kt==null||kt({type:"RECOVERY_FIRE",items:z.items,amount:z.totalCredit??z.amount??0,note:z.note,creditByRole:z.creditByRole});break;case"REDUCE":{const pe=Array.isArray(z.items)&&z.items.length>0,Re=pe?z.items.map((K,C)=>({...K,group:String(K.group||K.tipo||"").toUpperCase(),level:String(K.level||K.nivel||"").toUpperCase(),credit:Number(K.credit??K.amount??0),selected:C===0?!0:!!K.selected})):void 0,ve=pe&&(Re==null?void 0:Re[0])||z.selection||z.sel||(z.group&&z.level?{group:String(z.group).toUpperCase(),level:String(z.level).toUpperCase(),credit:Number(z.credit??z.amount??0)}:null),Me=Number((pe?z.total??z.totalCredit:void 0)??(ve==null?void 0:ve.credit)??z.amount??0),Be=z.note||(pe?`Reduo mltipla +R$ ${Me.toLocaleString()}`:ve?`Reduo ${ve.group} nvel ${ve.level} +R$ ${Me.toLocaleString()}`:`Reduo +R$ ${Me.toLocaleString()}`);kt==null||kt({type:"RECOVERY_REDUCE",items:Re,selection:ve||null,amount:Me,note:Be});break}case"LOAN":{const pe=typeof z.amount=="object"&&z.amount!==null?z.amount:{amount:Number(z.amount??0),cashDelta:Number(z.cashDelta??z.amount??0),loan:z.loan},Re=Number(pe.amount??0),ve=Number(pe.cashDelta??Re??0),Me=pe.loan??z.loan??{};kt==null||kt({type:"RECOVERY_LOAN",amount:Re,cashDelta:ve,loan:Me,note:z.note});break}default:z.amount>0&&(kt==null||kt({type:"RECOVERY_CUSTOM",amount:z.amount,note:z.note}))}}})();return}if(H.type==="BANKRUPT_MODAL"){if(!u||!R||!S)return;(async()=>await Ae(a.jsx(Qx,{playerName:(x==null?void 0:x.name)||"Jogador"}))&&(kt==null||kt({type:"BANKRUPT"})))();return}if(H.type==="RECOVERY_FIRE"){const z=Number(H.amount||0),pe=H.items||{},Re={cashDelta:z,vendedoresComunsDelta:-Number(pe.comum||0),fieldSalesDelta:-Number(pe.field||0),insideSalesDelta:-Number(pe.inside||0),gestoresDelta:-Number(pe.gestor||0)},ve=o;e(Me=>{const Be=Me.map((K,C)=>C!==ve?K:At(K,Re));return y(Be,o,re.current),Be}),b(`${((Ve=t[ve])==null?void 0:Ve.name)||"Jogador"}: ${H.note||"Demisses"}`);return}if(H.type==="RECOVERY_LOAN"){const z=Math.max(0,Number(H.amount||0));if(!z)return;const pe=o,Re=t[pe];if(Re!=null&&Re.loanPending&&!Re.loanPending.charged){b(`${(Re==null?void 0:Re.name)||"Jogador"} j possui um emprstimo pendente.`);return}e(ve=>{const Me=ve.map((Be,K)=>K!==pe?Be:{...Be,cash:(Number(Be.cash)||0)+z,loanPending:{amount:z,charged:!1,shouldChargeOnNextExpenses:!0}});return y(Me,o,re.current),Me}),b(`${(Re==null?void 0:Re.name)||"Jogador"} pegou emprstimo: +$${z.toLocaleString()}`);return}if(H.type==="BUY_MIX"||H.kind==="MIX_BUY"||H.type==="DIRECT_BUY_MIX"){const z=String(H.level||"").toUpperCase(),pe=Math.max(0,Number(H.price??0));if(!["A","B","C","D"].includes(z)){p(!1);return}const Re=o;if(!vr(Re,pe)){b("Saldo insuficiente para comprar MIX"),p(!1);return}e(ve=>{const Me=ve.map((Be,K)=>{if(K!==Re)return Be;const C={...Be.mixOwned||Be.mix||{},D:!0};return C[z]=!0,{...Be,cash:Math.max(0,(Number(Be.cash)||0)-pe),mixOwned:C,mix:C,mixLevel:z,mixProdutos:z}});return y(Me,o,re.current),Me}),b(`${((Fe=t[Re])==null?void 0:Fe.name)||"Jogador"} comprou MIX nvel ${z} por -$${pe.toLocaleString()}`),p(!1);return}if(H.type==="BUY_ERP"||H.kind==="ERP_BUY"||H.type==="DIRECT_BUY_ERP"){const z=String(H.level||"").toUpperCase(),pe=Math.max(0,Number(H.price??0));if(!["A","B","C","D"].includes(z)){p(!1);return}const Re=o;if(!vr(Re,pe)){b("Saldo insuficiente para comprar ERP"),p(!1);return}e(ve=>{const Me=ve.map((Be,K)=>{if(K!==Re)return Be;const C={...Be.erpOwned||Be.erp||{},D:!0};return C[z]=!0,{...Be,cash:Math.max(0,(Number(Be.cash)||0)-pe),erpOwned:C,erp:C,erpLevel:z,erpSystems:{...Be.erpSystems||{},level:z}}});return y(Me,o,re.current),Me}),b(`${((Ce=t[Re])==null?void 0:Ce.name)||"Jogador"} comprou ERP nvel ${z} por -$${pe.toLocaleString()}`),p(!1);return}if(H.type==="RECOVERY_REDUCE"){const z=M=>String(M||"").toUpperCase(),pe=M=>{const V=String(M||"").toUpperCase();return V==="MIX"||V==="ERP"?V:V.includes("MIX")?"MIX":V.includes("ERP")?"ERP":""},ve=(()=>{if(Array.isArray(H.items)&&H.items.length)return H.items.filter(V=>(V==null?void 0:V.selected)??!0).map(V=>({group:pe(V.group||V.kind),level:z(V.level),credit:Math.max(0,Number(V.credit??V.amount??0))})).filter(V=>(V.group==="MIX"||V.group==="ERP")&&["A","B","C"].includes(V.level));const M=H.selection||H.target||null;if(M){const V={group:pe(M.group||M.kind),level:z(M.level),credit:Math.max(0,Number(M.credit??M.amount??H.amount??0))};if((V.group==="MIX"||V.group==="ERP")&&["A","B","C"].includes(V.level))return[V]}return[]})();if(!ve.length){const M=Math.max(0,Number(H.amount??0));if(M>0){const V=o;e($=>{const Ie=$.map((me,He)=>He!==V?me:{...me,cash:(Number(me.cash)||0)+M});return y(Ie,o,re.current),Ie})}return}const Me=(M,V)=>{const $={A:!1,B:!1,C:!1,D:!1,...M||{}},Ie=z(V);return!$.A&&!$.B&&!$.C&&!$.D&&(["A","B","C","D"].includes(Ie)?$[Ie]=!0:$.D=!0),$},Be=M=>M!=null&&M.A?"A":M!=null&&M.B?"B":M!=null&&M.C?"C":M!=null&&M.D?"D":"-",K=o,C=t[K];if(ve.some(M=>M.level==="D")){b("No  possvel reduzir o nvel D (bsico).");return}const J=Array.isArray((Nt=C.reducedLevels)==null?void 0:Nt.MIX)?C.reducedLevels.MIX:[],oe=Array.isArray((O=C.reducedLevels)==null?void 0:O.ERP)?C.reducedLevels.ERP:[];if(ve.some(M=>M.group==="MIX"&&J.includes(M.level)||M.group==="ERP"&&oe.includes(M.level))){b("No  possvel reduzir um nvel que j foi reduzido anteriormente.");return}e(M=>{const V=M.map(($,Ie)=>{var an,xn;if(Ie!==K)return $;let me={A:!1,B:!1,C:!1,D:!1,...$.mixOwned||$.mix||{}},He={A:!1,B:!1,C:!1,D:!1,...$.erpOwned||$.erp||{}};me=Me(me,$.mixProdutos),He=Me(He,$.erpSistemas);const yt=[...Array.isArray((an=$.reducedLevels)==null?void 0:an.MIX)?$.reducedLevels.MIX:[]],wt=[...Array.isArray((xn=$.reducedLevels)==null?void 0:xn.ERP)?$.reducedLevels.ERP:[]];let de=0,Ht=String($.mixProdutos||"D").toUpperCase(),vt=String($.erpLevel||$.erpSistemas||"D").toUpperCase();for(const lt of ve)if(de+=Math.max(0,Number(lt.credit||0)),lt.group==="MIX"){if(lt.level===Ht){const ln=["A","B","C","D"],k=ln.indexOf(Ht);for(let L=k+1;L<ln.length;L++){const q=ln[L];if(me[q]||q==="D"){Ht=q;break}}}delete me[lt.level],me[lt.level]=!1,yt.includes(lt.level)||yt.push(lt.level)}else if(lt.group==="ERP"){if(lt.level===vt){const ln=["A","B","C","D"],k=ln.indexOf(vt);for(let L=k+1;L<ln.length;L++){const q=ln[L];if(He[q]||q==="D"){vt=q;break}}}delete He[lt.level],He[lt.level]=!1,wt.includes(lt.level)||wt.push(lt.level)}me.A||me.B||me.C||(me.D=!0,me.A=!1,me.B=!1,me.C=!1),He.A||He.B||He.C||(He.D=!0,He.A=!1,He.B=!1,He.C=!1);const dt=Be(me),It=Be(He),zt=dt!=="-"?dt:Ht||"D",Kn=It!=="-"?It:vt||"D",sn={...me},Jn={...He};return{...$,cash:(Number($.cash)||0)+de,mixOwned:sn,erpOwned:Jn,mix:sn,erp:Jn,mixProdutos:zt,erpLevel:Kn,erpSistemas:Kn,reducedLevels:{MIX:yt,ERP:wt}}});return y(V,o,re.current),V});const ce=ve.reduce((M,V)=>M+Math.max(0,Number(V.credit||0)),0);if(ve.length===1){const M=ve[0];b(`${(C==null?void 0:C.name)||"Jogador"} reduziu ${M.group} nvel ${M.level} e recebeu +$${ce.toLocaleString()}`)}else b(`${(C==null?void 0:C.name)||"Jogador"} reduziu ${ve.length} nveis e recebeu +$${ce.toLocaleString()}`);return}if(H.type==="BANKRUPT"){const z=o;try{String((Oe=t[z])==null?void 0:Oe.id)===String(d)&&(N==null||N(!0))}catch{}const pe=t.map((Me,Be)=>Be===z?{...Me,bankrupt:!0}:Me);if(b(`${((Te=t[z])==null?void 0:Te.name)||"Jogador"} declarou FALNCIA.`),Rs(pe)<=1){const Me=pe.findIndex(Be=>!(Be!=null&&Be.bankrupt));j(Me>=0?pe[Me]:null),e(pe),g(!0),p(!1),y(pe,o,n,!0,Me>=0?pe[Me]:null);return}const ve=us(pe,z);e(pe),s(ve),p(!1),y(pe,ve,re.current),console.log("[DEBUG]  advanceAndMaybeLap finalizada (falncia) - posio final:",(vn=pe[ve])==null?void 0:vn.pos);return}console.log("[DEBUG]  advanceAndMaybeLap finalizada normalmente - posio final:",($t=nextPlayers[curIdx])==null?void 0:$t.pos)}},[t,n,o,u,c,d,f,m,b,y,e,r,s,p,g,j,et,R,S,A,N]);return ge.useEffect(()=>{if(v===0&&_&&!I.current){const H=Ne.current;String(H||"")===String(d)?(console.log("[DEBUG]  Destravando turnLock - modalLocks: 0, sou o lockOwner"),p(!1),ee.current=!1):u||(console.log("[DEBUG]  Destravando turnLock - no  minha vez e no sou lockOwner"),p(!1),ee.current=!1)}},[v,_,ae,d,u,p]),ge.useEffect(()=>{if(u&&v===0&&_&&!I.current){const H=Ne.current;String(H||"")===String(d)?(console.log("[DEBUG]  Destravando turnLock -  minha vez e sou o lockOwner"),p(!1),ee.current=!1):H||(console.log("[DEBUG]  Destravando turnLock -  minha vez mas no h lockOwner"),p(!1),ee.current=!1)}},[u,v,_,ae,d,p]),ge.useEffect(()=>()=>{te.current&&(clearTimeout(te.current),te.current=null),ee.current=!1,I.current=!1},[]),{advanceAndMaybeLap:on,onAction:kt,nextTurn:Xo,modalLocks:v,lockOwner:ae}}const am=E.createContext(null),Zx=()=>{try{return E.useContext(am)}catch{return null}};function eb({roomCode:t,hostId:e,children:n}){const r=!!ze&&!!t,o=String(t||"").trim(),[s,i]=E.useState(!1),[l,u]=E.useState({}),[c,d]=E.useState(0),h=E.useRef(l),f=E.useRef(c),x=E.useRef(0),y=E.useRef(null),b=E.useRef(null);E.useEffect(()=>{h.current=l},[l]),E.useEffect(()=>{f.current=c},[c]);const _=async g=>{const{data:w,error:j}=await ze.from("rooms").select("id, code, host_id, state, version, updated_at").eq("code",g).order("updated_at",{ascending:!1}).limit(1).maybeSingle();return j?(console.warn("[NET] getLatestRoomByCode error:",j.message||j),null):w};E.useEffect(()=>{if(!r)return;let g=!1;return(async()=>{let w=await _(o);if(!w){const j={code:o,state:{},version:0,host_id:e||null},{data:N,error:R}=await ze.from("rooms").insert(j).select("id, code, host_id, state, version, updated_at").maybeSingle();if(R){console.warn("[NET] rooms/create:",R.message||R);return}if(g)return;N?w=N:w=await _(o)}g||(w&&(y.current=w.id,b.current=w.updated_at,u(w.state||{}),d(w.version??0)),i(!0))})(),()=>{g=!0}},[r,o,e]),E.useEffect(()=>{if(!r)return;const g=ze.channel(`rooms:${o}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`code=eq.${o}`},w=>{const j=w.new||w.old||{};if(typeof j.version=="number"&&j.version>f.current){if(b.current&&j.updated_at){const N=new Date(j.updated_at).getTime(),R=new Date(b.current).getTime();if(N<R){console.log("[NET] realtime - ignorando evento de row antiga",{rowVersion:j.version,currentVersion:f.current,rowUpdatedAt:j.updated_at,knownUpdatedAt:b.current});return}}d(j.version),j.state&&u(j.state),j.updated_at&&(b.current=j.updated_at),j.id&&(y.current=j.id),x.current=Date.now(),console.log("[NET] applied remote v=%d",j.version)}}).subscribe();return()=>{try{ze.removeChannel(g)}catch{}}},[r,o]),E.useEffect(()=>{if(!r)return;const g=setInterval(async()=>{if(Date.now()-(x.current||0)<2e3)return;const w=await _(o);w&&w.version>f.current&&(d(w.version),u(w.state||{}),w.updated_at&&(b.current=w.updated_at),w.id&&(y.current=w.id))},700);return()=>clearInterval(g)},[r,o]);const p=async g=>{var R,S;if(!r||!s)return;const w=3,j=new Date().toISOString();for(let A=1;A<=w;A++){let v=await _(o);if(!v){const rt={code:o,state:{},version:0,host_id:e||null},{data:U,error:ae}=await ze.from("rooms").insert(rt).select("id, code, host_id, state, version, updated_at").maybeSingle();if(ae){if(console.warn(`[NET] commit - insert failed (attempt ${A}/${w}):`,ae.message||ae),A<w){await new Promise(ie=>setTimeout(ie,50*A));continue}return}if(U)v=U,y.current=v.id,b.current=v.updated_at;else if(v=await _(o),!v){if(console.warn(`[NET] commit - no row after insert (attempt ${A}/${w})`),A<w){await new Promise(ie=>setTimeout(ie,50*A));continue}return}}v.id&&(y.current=v.id);let D=v.state||{},T=typeof g=="function"?g(D)||{}:g||{};const I=y.current||v.id;if(!I){if(console.warn("[NET] commit - no target ID available"),A<w){await new Promise(rt=>setTimeout(rt,50*A));continue}return}const{data:ee,error:te}=await ze.from("rooms").update({state:T,version:(v.version||0)+1,updated_at:j}).eq("id",I).eq("version",v.version).select("state, version, updated_at").maybeSingle();if(!te&&ee){u(ee.state||{}),d(ee.version??(v.version||0)+1),ee.updated_at&&(b.current=ee.updated_at),A>1&&console.log(`[NET] commit succeeded on attempt ${A}/${w}`);return}if(((te==null?void 0:te.code)==="PGRST116"||((R=te==null?void 0:te.message)==null?void 0:R.includes("0 rows"))||((S=te==null?void 0:te.message)==null?void 0:S.includes("Cannot coerce"))||(te==null?void 0:te.code)==="23505"||(te==null?void 0:te.message)&&te.message.includes("version")||!ee)&&A<w){console.warn(`[NET] commit conflict (attempt ${A}/${w}):`,(te==null?void 0:te.message)||te||"no rows updated","- retrying with fresh state...");const rt=await _(o);rt&&(v=rt,y.current=rt.id,b.current=rt.updated_at,D=rt.state||{},T=typeof g=="function"?g(D)||{}:g||{}),await new Promise(U=>setTimeout(U,50*A));continue}console.warn(`[NET] commit conflict (attempt ${A}/${w}):`,(te==null?void 0:te.message)||te||"no rows updated")}const N=await _(o);N?(u(N.state||{}),d(N.version??0),N.updated_at&&(b.current=N.updated_at),N.id&&(y.current=N.id),console.warn("[NET] commit failed after retries, resynced to latest state")):console.warn("[NET] commit fallback resync failed: no row found")},m=E.useMemo(()=>({enabled:r,ready:s,state:l,version:c,commit:p}),[r,s,l,c]);return a.jsx(am.Provider,{value:m,children:n})}function tb(){var ve,Me,Be,K;const[t,e]=E.useState("start"),[n,r]=E.useState(null),o=E.useMemo(()=>Hs(),[]),s=E.useMemo(()=>io(""),[]),[i,l]=E.useState(o);E.useMemo(()=>Object.freeze({mixProdutos:"D",erpLevel:"D",clients:1,vendedoresComuns:1}),[]);const u=(C={})=>({...C,mixProdutos:C.mixProdutos??"D",erpLevel:C.erpLevel??"D",clients:C.clients??1,vendedoresComuns:C.vendedoresComuns??1}),c=C=>{if(!Array.isArray(C)||C.length===0)return C;const F=[...C].filter(Boolean);let oe=F.every(M=>Number.isInteger(M.seat))?F.sort((M,V)=>M.seat-V.seat):F.sort((M,V)=>String((M==null?void 0:M.id)??(M==null?void 0:M.player_id)??"").localeCompare(String((V==null?void 0:V.id)??(V==null?void 0:V.player_id)??""))),W=0;const ce=new Set(oe.filter(M=>Number.isInteger(M.seat)).map(M=>M.seat));return oe=oe.map(M=>{if(Number.isInteger(M.seat))return M;for(;ce.has(W);)W++;return ce.add(W),{...M,seat:W++}}),oe=oe.sort((M,V)=>M.seat-V.seat),console.log("[App] normalizePlayers - ordenados:",oe.map(M=>({id:M.id,name:M.name,seat:M.seat}))),oe},[d,h]=E.useState([u({id:o,name:s||"Jogador",cash:18e3,pos:0,color:"#ffd54f",bens:4e3})]),[f,x]=E.useState(1),[y,b]=E.useState(0),[_,p]=E.useState(null),[m,g]=E.useState(new Array(1).fill(!1)),[w,j]=E.useState(!1),[N,R]=E.useState(null),[S,A]=E.useState({id:o,name:((ve=d[0])==null?void 0:ve.name)||"Jogador",color:((Me=d[0])==null?void 0:Me.color)||"#6c5ce7",cash:((Be=d[0])==null?void 0:Be.cash)??18e3,possibAt:0,clientsAt:0,matchId:"local"}),[v,D]=E.useState(["Bem-vindo ao Sales Game!"]),T=C=>D(F=>[C,...F].slice(0,12)),[I,ee]=E.useState(!1),[te,ct]=E.useState(null),rt=E.useRef(null),U=E.useRef(null),ae=E.useRef(0),ie=ge.useCallback(C=>!!C&&String(C.id)===String(i),[i]),Ne=E.useMemo(()=>{var C;return((C=d.find(ie))==null?void 0:C.cash)??0},[d,ie]);E.useEffect(()=>{var C;try{const F=new URL(window.location.href),J=F.searchParams.get("room"),oe=localStorage.getItem("sg:lastRoomName"),W=J||oe;if(oe&&!J&&localStorage.removeItem("sg:lastRoomName"),W&&J){r(W),(C=window.__setRoomCode)==null||C.call(window,W);try{F.searchParams.set("room",String(W)),history.replaceState(null,"",F.toString())}catch{}e("playersLobby")}else s&&s.trim()!==""&&e("lobbies")}catch{}},[s]);const be=E.useMemo(()=>`sg-sync:${n||"local"}`,[n]);E.useEffect(()=>{var C,F;try{(F=(C=rt.current)==null?void 0:C.close)==null||F.call(C);const J=new BroadcastChannel(be);return J.onmessage=oe=>{var ce,M,V,$,Ie;const W=oe.data||{};if(String(W.source)!==String(o)){if(W.type==="START"){const me=Array.isArray(W.players)?W.players.map(u):[];if(!me.length)return;const He=c(me);try{const wt=window.__MY_UID||window.__myUid||window.__playerId||null;wt&&l(String(wt))}catch{}h(He),b(0);const yt=(ce=He[0])!=null&&ce.id?String(He[0].id):null;p(yt),x(1),g(new Array(Math.max(1,He.length)).fill(!1)),j(!1),R(null),e("game"),D(["Jogo iniciado!"]);return}if(W.type==="TURNLOCK"){ee(!!W.value);return}if(W.type==="SYNC"&&t==="game"){if(De!=null&&De.enabled&&(De!=null&&De.ready)&&he){console.log("[App] SYNC ignorado - netState ativo, usando Supabase como autoridade nica");return}const me=Number(W.version||0),He=Number(W.timestamp||0),yt=et.current;if(console.log("[App] SYNC recebido - verso remota:",me,"verso local:",yt,"turnIdx:",W.turnIdx,"round:",W.round,"source:",W.source),console.log("[App] SYNC - meu turnIdx atual:",y,"meu myUid:",i),me>0&&yt>0&&me<yt){console.log("[App] SYNC -  REJEITANDO estado remoto - verso antiga:",me,"< verso local:",yt);return}const wt=Date.now(),de=Ae.current;if(me>yt&&(et.current=me,console.log("[App] SYNC -  Aceitando verso remota:",me,"> verso local:",yt)),W.turnIdx!==y)if(de&&wt-de.timestamp<5e3)if(de.turnIdx!==y){const ne=W.turnIdx===de.turnIdx;let dt=!1;ne?(console.log("[App] SYNC -  IGNORANDO turnIdx remoto - tentando reverter mudana local recente (mantendo resto do snapshot)",{lastLocalTurnIdx:de.turnIdx,currentLocalTurnIdx:y,remoteTurnIdx:W.turnIdx,timeSinceLocalChange:wt-de.timestamp,isReverting:!0}),dt=!0):(console.log("[App] SYNC -  IGNORANDO turnIdx remoto - turnIdx local mudou recentemente (< 5s) (mantendo resto do snapshot)",{lastLocalTurnIdx:de.turnIdx,currentLocalTurnIdx:y,remoteTurnIdx:W.turnIdx,timeSinceLocalChange:wt-de.timestamp}),dt=!0),!dt&&W.turnIdx!==void 0&&b(W.turnIdx)}else W.turnIdx===de.turnIdx&&de.turnIdx!==y?console.log("[App] SYNC -  IGNORANDO turnIdx remoto - tentando reverter para valor anterior (mantendo resto do snapshot)",{lastLocalTurnIdx:de.turnIdx,currentLocalTurnIdx:y,remoteTurnIdx:W.turnIdx}):(b(W.turnIdx),console.log("[App] SYNC - Sincronizando turnIdx",{local:y,remote:W.turnIdx}));else de&&W.turnIdx===de.turnIdx&&de.turnIdx!==y?console.log("[App] SYNC -  IGNORANDO turnIdx remoto - tentando reverter para valor anterior (sem mudana recente, mantendo resto do snapshot)",{lastLocalTurnIdx:de.turnIdx,currentLocalTurnIdx:y,remoteTurnIdx:W.turnIdx}):(b(W.turnIdx),console.log("[App] SYNC - Sincronizando turnIdx",{local:y,remote:W.turnIdx}));if(Array.isArray(W.roundFlags)&&W.roundFlags.length>0&&g(Q=>{const ne=W.roundFlags.map((dt,It)=>Q[It]||!1||dt);for(;ne.length<Q.length;)ne.push(Q[ne.length]||!1);return console.log("[App] SYNC - roundFlags sincronizado:",ne.map((dt,It)=>{var zt;return`${(zt=d[It])==null?void 0:zt.name}:${dt}`}).join(", ")),ne}),W.round!==f)if(de&&wt-de.timestamp<3e3){const Q=de.round!==f;x(Q?ne=>{const dt=Math.max(ne,W.round);return dt>ne&&console.log("[App] SYNC - Rodada incrementada via sincronizao:",ne,"->",dt),dt}:W.round)}else x(Q=>Math.max(Q,W.round));const Ht=d,vt=W.players.map(Q=>{const ne=Ht.find(It=>It.id===Q.id);if(!ne)return Q;if(String(Q.id)===String(i)){const It=Number(ne.clients||0),zt=Number(Q.clients||0),Kn=Number(ne.vendedoresComuns||0),sn=Number(Q.vendedoresComuns||0),Jn=Number(ne.fieldSales||0),an=Number(Q.fieldSales||0),xn=Number(ne.insideSales||0),lt=Number(Q.insideSales||0);return It>zt||Kn>sn||Jn>an||xn>lt||ne.mixProdutos&&ne.mixProdutos!==Q.mixProdutos&&ne.mixProdutos!=="D"||ne.erpLevel&&ne.erpLevel!==Q.erpLevel&&ne.erpLevel!=="D"?(console.log("[App] SYNC - Detectadas compras locais, preservando estado local completo",{localClients:It,remoteClients:zt,localVendedores:Kn,remoteVendedores:sn}),{...ne,pos:Q.pos,bankrupt:Q.bankrupt??ne.bankrupt,az:ne.az||Q.az||0,am:ne.am||Q.am||0,rox:ne.rox||Q.rox||0,trainingsByVendor:ne.trainingsByVendor||Q.trainingsByVendor||{},onboarding:ne.onboarding||Q.onboarding||!1}):{...Q,cash:Math.max(Number(ne.cash||0),Number(Q.cash||0)),clients:Math.max(It,zt),mixProdutos:ne.mixProdutos??Q.mixProdutos,erpLevel:ne.erpLevel??Q.erpLevel,vendedoresComuns:Math.max(Kn,sn),fieldSales:Math.max(Jn,an),insideSales:Math.max(xn,lt),gestores:Math.max(Number(ne.gestores??ne.gestoresComerciais??ne.managers??0),Number(Q.gestores??Q.gestoresComerciais??Q.managers??0)),gestoresComerciais:Math.max(Number(ne.gestoresComerciais??ne.gestores??ne.managers??0),Number(Q.gestoresComerciais??Q.gestores??Q.managers??0)),managers:Math.max(Number(ne.managers??ne.gestores??ne.gestoresComerciais??0),Number(Q.managers??Q.gestores??Q.gestoresComerciais??0)),bens:Math.max(Number(ne.bens||0),Number(Q.bens||0)),manutencao:ne.manutencao??Q.manutencao,loanPending:ne.loanPending??Q.loanPending,az:ne.az||Q.az||0,am:ne.am||Q.am||0,rox:ne.rox||Q.rox||0,trainingsByVendor:ne.trainingsByVendor||Q.trainingsByVendor||{},onboarding:ne.onboarding||Q.onboarding||!1}}return{...Q,az:ne.az||Q.az||0,am:ne.am||Q.am||0,rox:ne.rox||Q.rox||0,trainingsByVendor:ne.trainingsByVendor||Q.trainingsByVendor||{},onboarding:ne.onboarding||Q.onboarding||!1}});h(vt),console.log("[App] SYNC aplicado - novo turnIdx:",W.turnIdx),console.log("[App] SYNC - jogador da vez:",(M=vt[W.turnIdx])==null?void 0:M.name,"id:",(V=vt[W.turnIdx])==null?void 0:V.id),console.log("[App] SYNC -  minha vez?",String(($=vt[W.turnIdx])==null?void 0:$.id)===String(i)),j(Q=>Q||!!W.gameOver),R(Q=>(w||W.gameOver)&&Q&&!W.winner?Q:W.winner??Q),W.gameOver===!0&&console.log(`[App] [ENDGAME] estado remoto aplicado: gameOver=true winner=${((Ie=W.winner)==null?void 0:Ie.name)??W.winner??"N/A"}`)}}},rt.current=J,()=>J.close()}catch(J){console.warn("[App] BroadcastChannel init failed:",J)}},[be,o,t]),E.useEffect(()=>{const C=async()=>{if(console.log(`[App] handleLeaveRoom chamado - fase: ${t}, currentLobbyId: ${n}, myUid: ${i}`),(t==="lobbies"||t==="playersLobby"||t==="game")&&n&&i)try{console.log(`[App] Saindo da sala ${n} na fase ${t}`),await vl({roomCode:n,playerId:i})}catch(oe){console.warn("[App] Erro ao sair da sala:",oe)}else console.log("[App] No executando leaveRoom - condies no atendidas")},F=()=>{C()},J=()=>{C()};return window.addEventListener("beforeunload",F),window.addEventListener("pagehide",J),()=>{window.removeEventListener("beforeunload",F),window.removeEventListener("pagehide",J)}},[t,n,i]);const re=C=>{var J,oe;const F=!!C;ee(F);try{(oe=(J=rt.current)==null?void 0:J.postMessage)==null||oe.call(J,{type:"TURNLOCK",value:F,source:o})}catch{}},De=Zx(),qn=De==null?void 0:De.commit,Lt=De==null?void 0:De.version,he=De==null?void 0:De.state,Hn=E.useMemo(()=>{if(y<0||y>=d.length)return console.warn("[App] isMyTurn - turnIdx invlido:",y,"players.length:",d.length),!1;const C=d[y];if(!C)return console.log("[App] isMyTurn - owner no encontrado, turnIdx:",y,"players.length:",d.length),!1;if(C.bankrupt)return console.log("[App] isMyTurn - owner est falido:",C.name),!1;const F=C.id!=null&&String(C.id)===String(i);return console.log("[App] isMyTurn - owner:",C.name,"id:",C.id,"myUid:",i,"isMine:",F),F},[y,d,i]);ge.useRef(null);const Ae=ge.useRef(null),vr=ge.useRef(0),et=ge.useRef(0),fo=ge.useRef(0),on=ge.useRef(null);ge.useEffect(()=>{const C=Ae.current,F=!C||C.turnIdx!==y,J=!C||C.round!==f,oe=!C||JSON.stringify(C.players)!==JSON.stringify(d);if(F||J||oe){const W=Date.now();(C?W-C.timestamp:1/0)>100?(Ae.current={players:d,turnIdx:y,round:f,timestamp:W},F&&console.log("[App] lastLocalStateRef atualizado via useEffect - turnIdx mudou:",C==null?void 0:C.turnIdx,"->",y)):Ae.current={...Ae.current,players:d,turnIdx:y,round:f}}},[d,y,f]),E.useEffect(()=>{var V;if(!(De!=null&&De.enabled)||!(De!=null&&De.ready)||!he)return;if(typeof Lt=="number"){if(Lt<=fo.current)return;fo.current=Lt}const C=typeof he.stateVersion=="number"?he.stateVersion:0,F=typeof he.updatedAt=="number"?he.updatedAt:0,J=Date.now(),oe=Ae.current;if(C>0&&C<et.current){console.log("[NET]  REJEITADO - stateVersion remoto menor que aceito:",{remote:C,accepted:et.current});return}if(oe&&oe.timestamp&&F>0){const $=oe.timestamp-F;if($>0&&$<5e3){console.log("[NET]  REJEITADO - estado remoto mais antigo que mudana local recente:",{remoteUpdatedAt:new Date(F).toISOString(),localTimestamp:new Date(oe.timestamp).toISOString(),timeDiff:$+"ms"});return}}if(oe&&oe.timestamp){const $=J-oe.timestamp;if($<5e3&&C<=oe.version){console.log("[NET]  REJEITADO - mudana local recente e verso remota no  maior:",{timeSinceLocalChange:$+"ms",localVersion:oe.version,remoteVersion:C});return}}const W=Array.isArray(he.players)?he.players:null,ce=Number.isInteger(he.turnIdx)?he.turnIdx:null;if(he.turnPlayerId!==void 0){p(he.turnPlayerId);const Ie=c(W||d).findIndex(me=>String(me.id)===String(he.turnPlayerId));Ie>=0&&Ie!==y&&(console.log("[NET] turnIdx derivado de turnPlayerId:",Ie,"turnPlayerId:",he.turnPlayerId),b(Ie))}const M=Number.isInteger(he.round)?he.round:null;if(W){const $=c(W);C>((oe==null?void 0:oe.version)||0)||!oe||J-(oe.timestamp||0)>=3e3?(h($),on.current=JSON.parse(JSON.stringify($))):console.log("[NET]  IGNORANDO players remoto - mudana local muito recente")}if(ce!==null&&b(ce),M!==null){const $=M===1&&(ce===0||ce===null)&&Array.isArray(W)&&W.length>0&&W.every(Ie=>Number((Ie==null?void 0:Ie.pos)??0)===0)&&(he.gameOver===!1||he.gameOver==null);x(Ie=>$?1:Math.max(Ie,M))}if(he.roundFlags!==void 0){if(Array.isArray(he.roundFlags))g(he.roundFlags),console.log("[NET] applied remote includes roundFlags?",!0,"length:",he.roundFlags.length);else if(typeof he.roundFlags=="object"){const $=Object.values(he.roundFlags);g($),console.log("[NET] applied remote includes roundFlags?",!0,"converted from object, length:",$.length)}}typeof he.turnLock=="boolean"&&(ee(he.turnLock),he.turnLock&&!U.current?U.current=Date.now():he.turnLock||(U.current=null),he.turnLock&&he.lockOwner&&console.log("[LOCK] bloqueado: turnLockBroadcast=true lockOwner=",he.lockOwner,"myId=",i)),he.lockOwner!==void 0&&(ct(he.lockOwner),Ae.current&&(Ae.current.lockOwner=he.lockOwner),console.log("[NET] applied remote includes lockOwner?",!0,"value:",he.lockOwner)),ae.current=Date.now(),j($=>$||!!he.gameOver),R($=>(w||he.gameOver)&&$&&!he.winner?$:he.winner??$),he.gameOver===!0&&console.log(`[App] [ENDGAME] estado remoto aplicado: gameOver=true winner=${((V=he.winner)==null?void 0:V.name)??he.winner??"N/A"}`),C>0&&(et.current=Math.max(et.current,C)),console.log("[NET] applied remote v=%d stateVersion=%d updatedAt=%s",Lt,C,F>0?new Date(F).toISOString():"N/A")},[Lt,he,De==null?void 0:De.enabled,De==null?void 0:De.ready]),E.useEffect(()=>{if(!I){U.current=null;return}U.current||(U.current=Date.now());const C=setInterval(()=>{const F=Date.now(),J=U.current?F-U.current:0,oe=d[y],W=oe&&String(oe.id)===String(i),ce=Hn&&W,M=te===i;J>8e3&&ce&&!M&&te!=null&&(console.warn("[LOCK-WATCHDOG] stole lock - turnLock travado por",J,"ms, liberando...",{isMyTurn:ce,lockOwner:te,myUid:i}),Xo({turnLock:!1,lockOwner:i}),re(!1),ct(i),U.current=null)},1e3);return()=>clearInterval(C)},[I,Hn,y,d,te,i,qn]);async function Xo(C){if(typeof qn=="function")try{await qn(F=>{const J=F||{},oe=C||{};if(oe.players&&Array.isArray(oe.players)){const W=on.current||J.players||[],ce=J.players||[],M=oe.players,V=new Map(W.map(de=>[String(de==null?void 0:de.id),de])),$=new Map(ce.map(de=>[String(de==null?void 0:de.id),de])),Ie=new Map(M.map(de=>[String(de==null?void 0:de.id),de])),me=[],He=new Set([...V.keys(),...$.keys(),...Ie.keys()]);for(const de of He){const Ht=V.get(de),vt=$.get(de),Q=Ie.get(de);Ht&&Q&&JSON.stringify(Ht)!==JSON.stringify(Q)&&Q?me.push(u(Q)):vt?me.push(u(vt)):Q&&me.push(u(Q))}const yt=[],wt=M.map(de=>String(de==null?void 0:de.id));for(const de of wt){const Ht=me.find(vt=>String(vt==null?void 0:vt.id)===de);Ht&&yt.push(Ht)}for(const de of me)wt.includes(String(de==null?void 0:de.id))||yt.push(de);return on.current=null,{...J,...oe,players:yt.length>0?yt:M}}return{...J,...oe}})}catch(F){console.warn("[NET] commit failed:",(F==null?void 0:F.message)||F),on.current=null}}function kt(C,F,J,oe=w,W=N,ce={}){var Kn,sn,Jn,an,xn,lt,ln;on.current||(on.current=JSON.parse(JSON.stringify(d)),console.log("[App] broadcastState - baseline capturado (estado atual antes da mudana):",on.current.length,"players")),vr.current=vr.current+1;const M=vr.current,V=ce.roundFlags!==void 0?ce.roundFlags:m,$=ce.turnLock!==void 0?ce.turnLock:I,Ie=((Kn=Ae.current)==null?void 0:Kn.lockOwner)??null,me=ce.lockOwner!==void 0?ce.lockOwner:Ie,He=ce.gameOver!==void 0?ce.gameOver:oe,wt=!!w||!!((sn=Ae.current)!=null&&sn.gameOver)?!0:!!He,de=ce.winner!==void 0?ce.winner:W,Ht=N??((Jn=Ae.current)==null?void 0:Jn.winner)??null,vt=wt?de??Ht:de,Q=ce.round!==void 0?ce.round:J,ne=Math.max(Number(Q||1),Number(f||1),Number(((an=Ae.current)==null?void 0:an.round)||1));on.current||(on.current=JSON.parse(JSON.stringify(d)),console.log("[App] broadcastState - baseline capturado (fallback):",on.current.length,"players"));const dt=c(C),It=ce.turnPlayerId!==void 0?ce.turnPlayerId:(xn=dt[F])!=null&&xn.id?String(dt[F].id):_,zt=Date.now();Ae.current={players:dt,turnIdx:F,turnPlayerId:It,round:ne,gameOver:wt,winner:vt,lockOwner:me,timestamp:zt,version:M,stateVersion:M,updatedAt:zt,updatedBy:i},et.current=M,console.log("[App] broadcastState - verso:",M,"turnIdx:",F,"turnPlayerId:",It,"round(next):",J,"round(safe):",ne,"timestamp:",zt,"updatedBy:",i,"playersOrdered:",dt.map(k=>k.id).join(",")),Object.keys(ce).length>0&&console.log("[NET] commit patch keys:",Object.keys(ce).join(", ")),Xo({players:dt,turnIdx:F,turnPlayerId:It,round:ne,roundFlags:V,turnLock:$,lockOwner:me,gameOver:wt,winner:vt,stateVersion:M,updatedAt:zt,updatedBy:i});try{(ln=(lt=rt.current)==null?void 0:lt.postMessage)==null||ln.call(lt,{type:"SYNC",version:M,players:dt,turnIdx:F,round:ne,roundFlags:V,turnLock:$,lockOwner:me,gameOver:wt,winner:vt,source:o,timestamp:zt})}catch(k){console.warn("[App] broadcastState failed:",k)}}function H(C){var oe,W,ce;const F=c(C),J=(oe=F[0])!=null&&oe.id?String(F[0].id):null;Xo({players:F,turnIdx:0,turnPlayerId:J,round:1});try{(ce=(W=rt.current)==null?void 0:W.postMessage)==null||ce.call(W,{type:"START",players:C,source:o})}catch(M){console.warn("[App] broadcastStart failed:",M)}}const Ve=d[y];E.useEffect(()=>{t==="game"&&Bx(d,y,f,w,N,"Game State Update")},[d,y,f,w,N,t]),E.useEffect(()=>{const C=d.find(ie);if(!C)return;const{cap:F,inAtt:J}=ha(C);A(oe=>({...oe,cash:C.cash,possibAt:F,clientsAt:J,name:C.name,color:C.color}))},[d,ie]);const Fe=E.useMemo(()=>{const C=d.find(ie)||d[0]||{},F=$a(C),J=Ia(C),{cap:oe,inAtt:W}=ha(C),ce=String(C.erpLevel||"D").toUpperCase(),M=Number(C.gestores??C.gestoresComerciais??C.managers??0);return console.log("[App] Totals recalculado - me:",C.name,"clients:",C.clients,"faturamento:",F,"manutencao:",J,"vendedoresComuns:",C.vendedoresComuns,"fieldSales:",C.fieldSales,"insideSales:",C.insideSales),Ux(C,"HUD Totals"),{faturamento:F,manutencao:J,emprestimos:C.loanPending&&!C.loanPending.charged?Number(C.loanPending.amount||0):0,vendedoresComuns:C.vendedoresComuns||0,fieldSales:C.fieldSales||0,insideSales:C.insideSales||0,mixProdutos:C.mixProdutos||"D",bens:C.bens??0,erpSistemas:ce,clientes:C.clients||0,onboarding:!!C.onboarding,az:C.az||0,am:C.am||0,rox:C.rox||0,gestores:M,gestoresComerciais:M,possibAt:oe,clientsAt:W}},[d,ie]),[Ce,Nt]=E.useState(!1),{onAction:O,modalLocks:Oe}=Xx({players:d,setPlayers:h,round:f,setRound:x,turnIdx:y,setTurnIdx:b,roundFlags:m,setRoundFlags:g,isMyTurn:Hn,isMine:ie,myUid:i,meId:o,myCash:Ne,current:Ve,broadcastState:kt,appendLog:T,turnLock:I,setTurnLockBroadcast:re,gameOver:w,setGameOver:j,winner:N,setWinner:R,setShowBankruptOverlay:Nt});if(t==="start")return a.jsx(sx,{onEnter:C=>{const F=io(C||"Jogador");h([u({id:o,name:F,cash:18e3,pos:0,color:"#ffd54f",bens:4e3})]),x(1),b(0),j(!1),R(null),g(new Array(1).fill(!1)),e("lobbies"),A(J=>({...J,name:F})),D([`Bem-vindo, ${F}!`])}});if(t==="lobbies")return a.jsx(gx,{onEnterRoom:C=>{var F;r(C),(F=window.__setRoomCode)==null||F.call(window,C);try{localStorage.setItem("sg:lastRoomName",String(C));const J=new URL(window.location.href);J.searchParams.set("room",String(C)),history.replaceState(null,"",J.toString())}catch{}e("playersLobby")}});if(t==="playersLobby")return a.jsx(yx,{lobbyId:n,onBack:()=>{var C;(C=window.__setRoomCode)==null||C.call(window,null),e("lobbies")},onStartGame:C=>{var M;const F=(C==null?void 0:C.lobbyName)||((M=C==null?void 0:C.lobby)==null?void 0:M.name)||(C==null?void 0:C.name)||n||"sala-demo";try{localStorage.setItem("sg:lastRoomName",String(F));const V=new URL(window.location.href);if(V.searchParams.set("room",String(F)),history.replaceState(null,"",V.toString()),!sessionStorage.getItem("sg:room-reloaded")){sessionStorage.setItem("sg:room-reloaded","1"),location.reload();return}}catch{}const W=[...Array.isArray(C)?C:(C==null?void 0:C.players)??(C==null?void 0:C.lobbyPlayers)??[]].sort((V,$)=>{const Ie=V.created_at||V.joined_at||V.createdAt||V.joinedAt,me=$.created_at||$.joined_at||$.createdAt||$.joinedAt;if(Ie&&me)return new Date(Ie)-new Date(me);const He=String(V.id??V.player_id??""),yt=String($.id??$.player_id??"");return He.localeCompare(yt)}).map((V,$)=>u({id:String(V.id??V.player_id),name:V.name??V.player_name,cash:18e3,pos:0,bens:4e3,color:["#ffd54f","#90caf9","#a5d6a7","#ffab91"][$%4],seat:$}));if(W.length===0)return;const ce=c(W);try{const V=ce.find($=>String($.name||"").trim().toLowerCase()===String(s||"").trim().toLowerCase());V!=null&&V.id&&l(String(V.id))}catch{}h(ce),b(0),x(1),g(new Array(ce.length).fill(!1)),j(!1),R(null),A(V=>{var Ie,me;const $=ce.find(ie);return{...V,name:($==null?void 0:$.name)||((Ie=ce[0])==null?void 0:Ie.name)||"Jogador",color:($==null?void 0:$.color)||((me=ce[0])==null?void 0:me.color)||"#6c5ce7",cash:($==null?void 0:$.cash)??18e3,possibAt:0,clientsAt:0}}),D(["Jogo iniciado!"]),H(ce),e("game")}});const Te=d[y],vn=(Te==null?void 0:Te.bankrupt)===!0,$t=Te&&String(Te.id)===String(i),z=f===5&&((K=d[y])==null?void 0:K.waitingAtRevenue),pe=te==null||te===i,Re=Hn&&$t&&Oe===0&&!I&&pe&&!vn&&!w&&!z;return console.log("[App] controlsCanRoll - isMyTurn:",Hn,"isCurrentPlayerMe:",$t,"modalLocks:",Oe,"turnLock:",I,"lockOwner:",te,"lockOwnerOk:",pe,"isBankrupt:",vn,"gameOver:",w,"isWaitingRevenue:",z,"result:",Re),a.jsxs("div",{className:"page",children:[a.jsxs("header",{className:"topbar",children:[a.jsxs("div",{className:"status",style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[a.jsx("span",{style:{width:18,height:18,borderRadius:"50%",border:"2px solid rgba(255,255,255,.9)",boxShadow:"0 0 0 2px rgba(0,0,0,.25)",background:S.color}}),a.jsxs("span",{style:{background:"#1f2430",border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:"4px 10px",fontWeight:800},children:[" ",S.name]}),a.jsxs("span",{children:["Possib. Atendimento: ",a.jsx("b",{children:S.possibAt??0})]}),a.jsxs("span",{children:["Clientes em Atendimento: ",a.jsx("b",{children:S.clientsAt??0})]}),a.jsx(Fx,{players:d,turnIdx:y,round:f,gameOver:w,winner:N})]}),a.jsxs("div",{className:"status",style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[a.jsxs("span",{children:["Rodada: ",f]}),a.jsxs("span",{className:"money",children:[" $ ",Number(Ne).toLocaleString()]})]})]}),a.jsxs("main",{className:"content",children:[a.jsx("div",{className:"boardWrap",children:a.jsx(Ex,{players:d,turnIdx:y,onMeHud:A})}),a.jsxs("aside",{className:"side",children:[a.jsx(jx,{totals:Fe,players:d}),a.jsxs("div",{className:"controlsSticky",children:[a.jsx(Cx,{onAction:C=>{O(C)},current:Ve,isMyTurn:Re}),a.jsx("div",{style:{marginTop:10},children:a.jsx("button",{className:"btn dark",onClick:async()=>{var C;if(n&&i)try{await vl({roomCode:n,playerId:i})}catch(F){console.warn("[App] Erro ao sair da sala:",F)}(C=window.__setRoomCode)==null||C.call(window,null),e("lobbies")},children:"Sair para Lobbies"})})]}),w&&a.jsx(Rx,{players:d,onExit:async()=>{var C;if(n&&i)try{await vl({roomCode:n,playerId:i})}catch(F){console.warn("[App] Erro ao sair da sala:",F)}(C=window.__setRoomCode)==null||C.call(window,null),e("lobbies")},onRestart:()=>{const C=d.map(F=>u({...F,cash:18e3,bens:4e3,pos:0}));h(C),b(0),x(1),g(new Array(C.length).fill(!1)),D(["Novo jogo iniciado!"]),j(!1),R(null)}})]})]}),a.jsx("footer",{className:"foot",children:a.jsxs("small",{children:["Desenvolvido por ",a.jsx("a",{href:"https://www.tironitech.com",target:"_blank",rel:"noreferrer",children:"tironitech.com"})]})}),Ce&&a.jsx(Dx,{})]})}function nb(){const e=new URLSearchParams(window.location.search).get("room");return e&&String(e).trim()||null}function rb(){const[t,e]=ge.useState(nb());return ge.useEffect(()=>(window.__setRoomCode=n=>{const r=String(n||"").trim()||null;e(r);const o=new URL(window.location.href);r?o.searchParams.set("room",r):o.searchParams.delete("room"),window.history.replaceState({},"",o)},()=>{delete window.__setRoomCode}),[]),ge.useEffect(()=>(window.exportLogs=()=>{const n=im(),r=new Blob([n.text],{type:"text/plain;charset=utf-8"}),o=URL.createObjectURL(r),s=document.createElement("a");return s.href=o,s.download=`debug-logs-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`,s.click(),URL.revokeObjectURL(o),console.log(" Logs exportados! Arquivo .txt baixado."),n},window.getLogsText=()=>$x(),window.getLogsJSON=()=>Ix(),window.getLogStats=()=>Au(),window.toggleLogCapture=()=>(tr.enabled?(tr.disable(),console.log(" Captura de logs DESATIVADA")):(tr.enable(),console.log(" Captura de logs ATIVADA")),tr.enabled),console.log("%c FUNES DE EXPORT DE LOGS DISPONVEIS:","color: #4CAF50; font-weight: bold; font-size: 14px"),console.log("%cexportLogs()","color: #2196F3; font-weight: bold","- Exporta logs completos (baixa arquivo .txt)"),console.log("%cgetLogsText()","color: #2196F3; font-weight: bold","- Retorna logs como string de texto"),console.log("%cgetLogsJSON()","color: #2196F3; font-weight: bold","- Retorna logs como objeto JSON"),console.log("%cgetLogStats()","color: #2196F3; font-weight: bold","- Retorna estatsticas dos logs"),console.log("%ctoggleLogCapture()","color: #2196F3; font-weight: bold","- Ativa/desativa captura de logs"),()=>{delete window.exportLogs,delete window.getLogsText,delete window.getLogsJSON,delete window.getLogStats,delete window.toggleLogCapture}),[]),a.jsx(Nx,{children:a.jsx(eb,{roomCode:t,children:a.jsx(tb,{})})})}_l.createRoot(document.getElementById("root")).render(a.jsx(ge.StrictMode,{children:a.jsx(rb,{})}));
//# sourceMappingURL=index-Dwvp67Q3.js.map
