(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var Sn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function dm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var Sf={exports:{}},ha={},_f={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gs=Symbol.for("react.element"),fm=Symbol.for("react.portal"),hm=Symbol.for("react.fragment"),pm=Symbol.for("react.strict_mode"),mm=Symbol.for("react.profiler"),gm=Symbol.for("react.provider"),ym=Symbol.for("react.context"),vm=Symbol.for("react.forward_ref"),xm=Symbol.for("react.suspense"),bm=Symbol.for("react.memo"),wm=Symbol.for("react.lazy"),Oc=Symbol.iterator;function Sm(t){return t===null||typeof t!="object"?null:(t=Oc&&t[Oc]||t["@@iterator"],typeof t=="function"?t:null)}var kf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ef=Object.assign,jf={};function qo(t,e,n){this.props=t,this.context=e,this.refs=jf,this.updater=n||kf}qo.prototype.isReactComponent={};qo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cf(){}Cf.prototype=qo.prototype;function Ou(t,e,n){this.props=t,this.context=e,this.refs=jf,this.updater=n||kf}var Lu=Ou.prototype=new Cf;Lu.constructor=Ou;Ef(Lu,qo.prototype);Lu.isPureReactComponent=!0;var Lc=Array.isArray,Rf=Object.prototype.hasOwnProperty,Pu={current:null},Nf={key:!0,ref:!0,__self:!0,__source:!0};function Df(t,e,n){var r,o={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)Rf.call(e,r)&&!Nf.hasOwnProperty(r)&&(o[r]=e[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:Gs,type:t,key:s,ref:i,props:o,_owner:Pu.current}}function _m(t,e){return{$$typeof:Gs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $u(t){return typeof t=="object"&&t!==null&&t.$$typeof===Gs}function km(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pc=/\/+/g;function Ba(t,e){return typeof t=="object"&&t!==null&&t.key!=null?km(""+t.key):e.toString(36)}function Ri(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Gs:case fm:i=!0}}if(i)return i=t,o=o(i),t=r===""?"."+Ba(i,0):r,Lc(o)?(n="",t!=null&&(n=t.replace(Pc,"$&/")+"/"),Ri(o,e,n,"",function(c){return c})):o!=null&&($u(o)&&(o=_m(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(Pc,"$&/")+"/")+t)),e.push(o)),1;if(i=0,r=r===""?".":r+":",Lc(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Ba(s,l);i+=Ri(s,e,n,u,o)}else if(u=Sm(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Ba(s,l++),i+=Ri(s,e,n,u,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function ni(t,e,n){if(t==null)return t;var r=[],o=0;return Ri(t,r,"","",function(s){return e.call(n,s,o++)}),r}function Em(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},Ni={transition:null},jm={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Ni,ReactCurrentOwner:Pu};function Tf(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:ni,forEach:function(t,e,n){ni(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ni(t,function(){e++}),e},toArray:function(t){return ni(t,function(e){return e})||[]},only:function(t){if(!$u(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=qo;Ce.Fragment=hm;Ce.Profiler=mm;Ce.PureComponent=Ou;Ce.StrictMode=pm;Ce.Suspense=xm;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jm;Ce.act=Tf;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ef({},t.props),o=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=Pu.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Rf.call(e,u)&&!Nf.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Gs,type:t.type,key:o,ref:s,props:r,_owner:i}};Ce.createContext=function(t){return t={$$typeof:ym,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gm,_context:t},t.Consumer=t};Ce.createElement=Df;Ce.createFactory=function(t){var e=Df.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:vm,render:t}};Ce.isValidElement=$u;Ce.lazy=function(t){return{$$typeof:wm,_payload:{_status:-1,_result:t},_init:Em}};Ce.memo=function(t,e){return{$$typeof:bm,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=Ni.transition;Ni.transition={};try{t()}finally{Ni.transition=e}};Ce.unstable_act=Tf;Ce.useCallback=function(t,e){return Gt.current.useCallback(t,e)};Ce.useContext=function(t){return Gt.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return Gt.current.useEffect(t,e)};Ce.useId=function(){return Gt.current.useId()};Ce.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return Gt.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};Ce.useRef=function(t){return Gt.current.useRef(t)};Ce.useState=function(t){return Gt.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return Gt.current.useTransition()};Ce.version="18.3.1";_f.exports=Ce;var k=_f.exports;const pe=cm(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm=k,Rm=Symbol.for("react.element"),Nm=Symbol.for("react.fragment"),Dm=Object.prototype.hasOwnProperty,Tm=Cm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Am={key:!0,ref:!0,__self:!0,__source:!0};function Af(t,e,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)Dm.call(e,r)&&!Am.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:Rm,type:t,key:s,ref:i,props:o,_owner:Tm.current}}ha.Fragment=Nm;ha.jsx=Af;ha.jsxs=Af;Sf.exports=ha;var a=Sf.exports,kl={},Of={exports:{}},dn={},Lf={exports:{}},Pf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,te){var re=q.length;q.push(te);e:for(;0<re;){var P=re-1>>>1,Le=q[P];if(0<o(Le,te))q[P]=te,q[re]=Le,re=P;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var te=q[0],re=q.pop();if(re!==te){q[0]=re;e:for(var P=0,Le=q.length,sn=Le>>>1;P<sn;){var ue=2*(P+1)-1,Kt=q[ue],Ze=ue+1,Te=q[Ze];if(0>o(Kt,re))Ze<Le&&0>o(Te,Kt)?(q[P]=Te,q[Ze]=re,P=Ze):(q[P]=Kt,q[ue]=re,P=ue);else if(Ze<Le&&0>o(Te,re))q[P]=Te,q[Ze]=re,P=Ze;else break e}}return te}function o(q,te){var re=q.sortIndex-te.sortIndex;return re!==0?re:q.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var u=[],c=[],d=1,h=null,f=3,g=!1,x=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(q){for(var te=n(c);te!==null;){if(te.callback===null)r(c);else if(te.startTime<=q)r(c),te.sortIndex=te.expirationTime,e(u,te);else break;te=n(c)}}function w(q){if(b=!1,y(q),!x)if(n(u)!==null)x=!0,Ve(E);else{var te=n(c);te!==null&&Xe(w,te.startTime-q)}}function E(q,te){x=!1,b&&(b=!1,p(S),S=-1),g=!0;var re=f;try{for(y(te),h=n(u);h!==null&&(!(h.expirationTime>te)||q&&!T());){var P=h.callback;if(typeof P=="function"){h.callback=null,f=h.priorityLevel;var Le=P(h.expirationTime<=te);te=t.unstable_now(),typeof Le=="function"?h.callback=Le:h===n(u)&&r(u),y(te)}else r(u);h=n(u)}if(h!==null)var sn=!0;else{var ue=n(c);ue!==null&&Xe(w,ue.startTime-te),sn=!1}return sn}finally{h=null,f=re,g=!1}}var N=!1,D=null,S=-1,A=5,v=-1;function T(){return!(t.unstable_now()-v<A)}function O(){if(D!==null){var q=t.unstable_now();v=q;var te=!0;try{te=D(!0,q)}finally{te?$():(N=!1,D=null)}}else N=!1}var $;if(typeof m=="function")$=function(){m(O)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Se=U.port2;U.port1.onmessage=O,$=function(){Se.postMessage(null)}}else $=function(){_(O,0)};function Ve(q){D=q,N||(N=!0,$())}function Xe(q,te){S=_(function(){q(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,Ve(E))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(f){case 1:case 2:case 3:var te=3;break;default:te=f}var re=f;f=te;try{return q()}finally{f=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,te){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var re=f;f=q;try{return te()}finally{f=re}},t.unstable_scheduleCallback=function(q,te,re){var P=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?P+re:P):re=P,q){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=re+Le,q={id:d++,callback:te,priorityLevel:q,startTime:re,expirationTime:Le,sortIndex:-1},re>P?(q.sortIndex=re,e(c,q),n(u)===null&&q===n(c)&&(b?(p(S),S=-1):b=!0,Xe(w,re-P))):(q.sortIndex=Le,e(u,q),x||g||(x=!0,Ve(E))),q},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(q){var te=f;return function(){var re=f;f=te;try{return q.apply(this,arguments)}finally{f=re}}}})(Pf);Lf.exports=Pf;var Om=Lf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm=k,cn=Om;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $f=new Set,Cs={};function ao(t,e){Io(t,e),Io(t+"Capture",e)}function Io(t,e){for(Cs[t]=e,t=0;t<e.length;t++)$f.add(e[t])}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),El=Object.prototype.hasOwnProperty,Pm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$c={},Ic={};function $m(t){return El.call(Ic,t)?!0:El.call($c,t)?!1:Pm.test(t)?Ic[t]=!0:($c[t]=!0,!1)}function Im(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Mm(t,e,n,r){if(e===null||typeof e>"u"||Im(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,r,o,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Iu=/[\-:]([a-z])/g;function Mu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Iu,Mu);Tt[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Iu,Mu);Tt[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Iu,Mu);Tt[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bu(t,e,n,r){var o=Tt.hasOwnProperty(e)?Tt[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Mm(e,n,o,r)&&(n=null),r||o===null?$m(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hr=Lm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ri=Symbol.for("react.element"),xo=Symbol.for("react.portal"),bo=Symbol.for("react.fragment"),Uu=Symbol.for("react.strict_mode"),jl=Symbol.for("react.profiler"),If=Symbol.for("react.provider"),Mf=Symbol.for("react.context"),zu=Symbol.for("react.forward_ref"),Cl=Symbol.for("react.suspense"),Rl=Symbol.for("react.suspense_list"),Fu=Symbol.for("react.memo"),wr=Symbol.for("react.lazy"),Bf=Symbol.for("react.offscreen"),Mc=Symbol.iterator;function Xo(t){return t===null||typeof t!="object"?null:(t=Mc&&t[Mc]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,Ua;function ls(t){if(Ua===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ua=e&&e[1]||""}return`
`+Ua+t}var za=!1;function Fa(t,e){if(!t||za)return"";za=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,l=s.length-1;1<=i&&0<=l&&o[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==s[l]){var u=`
`+o[i].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=i&&0<=l);break}}}finally{za=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ls(t):""}function Bm(t){switch(t.tag){case 5:return ls(t.type);case 16:return ls("Lazy");case 13:return ls("Suspense");case 19:return ls("SuspenseList");case 0:case 2:case 15:return t=Fa(t.type,!1),t;case 11:return t=Fa(t.type.render,!1),t;case 1:return t=Fa(t.type,!0),t;default:return""}}function Nl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bo:return"Fragment";case xo:return"Portal";case jl:return"Profiler";case Uu:return"StrictMode";case Cl:return"Suspense";case Rl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Mf:return(t.displayName||"Context")+".Consumer";case If:return(t._context.displayName||"Context")+".Provider";case zu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fu:return e=t.displayName||null,e!==null?e:Nl(t.type)||"Memo";case wr:e=t._payload,t=t._init;try{return Nl(t(e))}catch{}}return null}function Um(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nl(e);case 8:return e===Uu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $r(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Uf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zm(t){var e=Uf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function oi(t){t._valueTracker||(t._valueTracker=zm(t))}function zf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Uf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ui(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dl(t,e){var n=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$r(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ff(t,e){e=e.checked,e!=null&&Bu(t,"checked",e,!1)}function Tl(t,e){Ff(t,e);var n=$r(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Al(t,e.type,n):e.hasOwnProperty("defaultValue")&&Al(t,e.type,$r(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Uc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Al(t,e,n){(e!=="number"||Ui(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var us=Array.isArray;function To(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$r(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Ol(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(us(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$r(n)}}function Wf(t,e){var n=$r(e.value),r=$r(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Fc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ll(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var si,qf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(si=si||document.createElement("div"),si.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=si.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fm=["Webkit","ms","Moz","O"];Object.keys(hs).forEach(function(t){Fm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hs[e]=hs[t]})});function Gf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hs.hasOwnProperty(t)&&hs[t]?(""+e).trim():e+"px"}function Hf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Gf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var Wm=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pl(t,e){if(e){if(Wm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function $l(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Il=null;function Wu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ml=null,Ao=null,Oo=null;function Wc(t){if(t=Js(t)){if(typeof Ml!="function")throw Error(M(280));var e=t.stateNode;e&&(e=va(e),Ml(t.stateNode,t.type,e))}}function Kf(t){Ao?Oo?Oo.push(t):Oo=[t]:Ao=t}function Jf(){if(Ao){var t=Ao,e=Oo;if(Oo=Ao=null,Wc(t),e)for(t=0;t<e.length;t++)Wc(e[t])}}function Yf(t,e){return t(e)}function Qf(){}var Wa=!1;function Xf(t,e,n){if(Wa)return t(e,n);Wa=!0;try{return Yf(t,e,n)}finally{Wa=!1,(Ao!==null||Oo!==null)&&(Qf(),Jf())}}function Ns(t,e){var n=t.stateNode;if(n===null)return null;var r=va(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var Bl=!1;if(lr)try{var Zo={};Object.defineProperty(Zo,"passive",{get:function(){Bl=!0}}),window.addEventListener("test",Zo,Zo),window.removeEventListener("test",Zo,Zo)}catch{Bl=!1}function Vm(t,e,n,r,o,s,i,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ps=!1,zi=null,Fi=!1,Ul=null,qm={onError:function(t){ps=!0,zi=t}};function Gm(t,e,n,r,o,s,i,l,u){ps=!1,zi=null,Vm.apply(qm,arguments)}function Hm(t,e,n,r,o,s,i,l,u){if(Gm.apply(this,arguments),ps){if(ps){var c=zi;ps=!1,zi=null}else throw Error(M(198));Fi||(Fi=!0,Ul=c)}}function lo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Zf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vc(t){if(lo(t)!==t)throw Error(M(188))}function Km(t){var e=t.alternate;if(!e){if(e=lo(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return Vc(o),t;if(s===r)return Vc(o),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function eh(t){return t=Km(t),t!==null?th(t):null}function th(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=th(t);if(e!==null)return e;t=t.sibling}return null}var nh=cn.unstable_scheduleCallback,qc=cn.unstable_cancelCallback,Jm=cn.unstable_shouldYield,Ym=cn.unstable_requestPaint,mt=cn.unstable_now,Qm=cn.unstable_getCurrentPriorityLevel,Vu=cn.unstable_ImmediatePriority,rh=cn.unstable_UserBlockingPriority,Wi=cn.unstable_NormalPriority,Xm=cn.unstable_LowPriority,oh=cn.unstable_IdlePriority,pa=null,Jn=null;function Zm(t){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(pa,t,void 0,(t.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:ng,eg=Math.log,tg=Math.LN2;function ng(t){return t>>>=0,t===0?32:31-(eg(t)/tg|0)|0}var ii=64,ai=4194304;function cs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vi(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var l=i&~o;l!==0?r=cs(l):(s&=i,s!==0&&(r=cs(s)))}else i=n&~o,i!==0?r=cs(i):s!==0&&(r=cs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-In(e),o=1<<n,r|=t[n],e&=~o;return r}function rg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function og(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-In(s),l=1<<i,u=o[i];u===-1?(!(l&n)||l&r)&&(o[i]=rg(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function zl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sh(){var t=ii;return ii<<=1,!(ii&4194240)&&(ii=64),t}function Va(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-In(e),t[e]=n}function sg(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-In(n),s=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~s}}function qu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-In(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var We=0;function ih(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ah,Gu,lh,uh,ch,Fl=!1,li=[],Rr=null,Nr=null,Dr=null,Ds=new Map,Ts=new Map,_r=[],ig="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gc(t,e){switch(t){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":Ds.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ts.delete(e.pointerId)}}function es(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},e!==null&&(e=Js(e),e!==null&&Gu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function ag(t,e,n,r,o){switch(e){case"focusin":return Rr=es(Rr,t,e,n,r,o),!0;case"dragenter":return Nr=es(Nr,t,e,n,r,o),!0;case"mouseover":return Dr=es(Dr,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return Ds.set(s,es(Ds.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Ts.set(s,es(Ts.get(s)||null,t,e,n,r,o)),!0}return!1}function dh(t){var e=Jr(t.target);if(e!==null){var n=lo(e);if(n!==null){if(e=n.tag,e===13){if(e=Zf(n),e!==null){t.blockedOn=e,ch(t.priority,function(){lh(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Di(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Il=r,n.target.dispatchEvent(r),Il=null}else return e=Js(n),e!==null&&Gu(e),t.blockedOn=n,!1;e.shift()}return!0}function Hc(t,e,n){Di(t)&&n.delete(e)}function lg(){Fl=!1,Rr!==null&&Di(Rr)&&(Rr=null),Nr!==null&&Di(Nr)&&(Nr=null),Dr!==null&&Di(Dr)&&(Dr=null),Ds.forEach(Hc),Ts.forEach(Hc)}function ts(t,e){t.blockedOn===e&&(t.blockedOn=null,Fl||(Fl=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,lg)))}function As(t){function e(o){return ts(o,t)}if(0<li.length){ts(li[0],t);for(var n=1;n<li.length;n++){var r=li[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rr!==null&&ts(Rr,t),Nr!==null&&ts(Nr,t),Dr!==null&&ts(Dr,t),Ds.forEach(e),Ts.forEach(e),n=0;n<_r.length;n++)r=_r[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_r.length&&(n=_r[0],n.blockedOn===null);)dh(n),n.blockedOn===null&&_r.shift()}var Lo=hr.ReactCurrentBatchConfig,qi=!0;function ug(t,e,n,r){var o=We,s=Lo.transition;Lo.transition=null;try{We=1,Hu(t,e,n,r)}finally{We=o,Lo.transition=s}}function cg(t,e,n,r){var o=We,s=Lo.transition;Lo.transition=null;try{We=4,Hu(t,e,n,r)}finally{We=o,Lo.transition=s}}function Hu(t,e,n,r){if(qi){var o=Wl(t,e,n,r);if(o===null)el(t,e,r,Gi,n),Gc(t,r);else if(ag(o,t,e,n,r))r.stopPropagation();else if(Gc(t,r),e&4&&-1<ig.indexOf(t)){for(;o!==null;){var s=Js(o);if(s!==null&&ah(s),s=Wl(t,e,n,r),s===null&&el(t,e,r,Gi,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else el(t,e,r,null,n)}}var Gi=null;function Wl(t,e,n,r){if(Gi=null,t=Wu(r),t=Jr(t),t!==null)if(e=lo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Zf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gi=t,null}function fh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qm()){case Vu:return 1;case rh:return 4;case Wi:case Xm:return 16;case oh:return 536870912;default:return 16}default:return 16}}var jr=null,Ku=null,Ti=null;function hh(){if(Ti)return Ti;var t,e=Ku,n=e.length,r,o="value"in jr?jr.value:jr.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return Ti=o.slice(t,1<r?1-r:void 0)}function Ai(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ui(){return!0}function Kc(){return!1}function fn(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ui:Kc,this.isPropagationStopped=Kc,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),e}var Go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ju=fn(Go),Ks=lt({},Go,{view:0,detail:0}),dg=fn(Ks),qa,Ga,ns,ma=lt({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ns&&(ns&&t.type==="mousemove"?(qa=t.screenX-ns.screenX,Ga=t.screenY-ns.screenY):Ga=qa=0,ns=t),qa)},movementY:function(t){return"movementY"in t?t.movementY:Ga}}),Jc=fn(ma),fg=lt({},ma,{dataTransfer:0}),hg=fn(fg),pg=lt({},Ks,{relatedTarget:0}),Ha=fn(pg),mg=lt({},Go,{animationName:0,elapsedTime:0,pseudoElement:0}),gg=fn(mg),yg=lt({},Go,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vg=fn(yg),xg=lt({},Go,{data:0}),Yc=fn(xg),bg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _g(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sg[t])?!!e[t]:!1}function Yu(){return _g}var kg=lt({},Ks,{key:function(t){if(t.key){var e=bg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ai(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yu,charCode:function(t){return t.type==="keypress"?Ai(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ai(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Eg=fn(kg),jg=lt({},ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qc=fn(jg),Cg=lt({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yu}),Rg=fn(Cg),Ng=lt({},Go,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dg=fn(Ng),Tg=lt({},ma,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ag=fn(Tg),Og=[9,13,27,32],Qu=lr&&"CompositionEvent"in window,ms=null;lr&&"documentMode"in document&&(ms=document.documentMode);var Lg=lr&&"TextEvent"in window&&!ms,ph=lr&&(!Qu||ms&&8<ms&&11>=ms),Xc=" ",Zc=!1;function mh(t,e){switch(t){case"keyup":return Og.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wo=!1;function Pg(t,e){switch(t){case"compositionend":return gh(e);case"keypress":return e.which!==32?null:(Zc=!0,Xc);case"textInput":return t=e.data,t===Xc&&Zc?null:t;default:return null}}function $g(t,e){if(wo)return t==="compositionend"||!Qu&&mh(t,e)?(t=hh(),Ti=Ku=jr=null,wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ph&&e.locale!=="ko"?null:e.data;default:return null}}var Ig={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ed(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ig[t.type]:e==="textarea"}function yh(t,e,n,r){Kf(r),e=Hi(e,"onChange"),0<e.length&&(n=new Ju("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var gs=null,Os=null;function Mg(t){Rh(t,0)}function ga(t){var e=ko(t);if(zf(e))return t}function Bg(t,e){if(t==="change")return e}var vh=!1;if(lr){var Ka;if(lr){var Ja="oninput"in document;if(!Ja){var td=document.createElement("div");td.setAttribute("oninput","return;"),Ja=typeof td.oninput=="function"}Ka=Ja}else Ka=!1;vh=Ka&&(!document.documentMode||9<document.documentMode)}function nd(){gs&&(gs.detachEvent("onpropertychange",xh),Os=gs=null)}function xh(t){if(t.propertyName==="value"&&ga(Os)){var e=[];yh(e,Os,t,Wu(t)),Xf(Mg,e)}}function Ug(t,e,n){t==="focusin"?(nd(),gs=e,Os=n,gs.attachEvent("onpropertychange",xh)):t==="focusout"&&nd()}function zg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ga(Os)}function Fg(t,e){if(t==="click")return ga(e)}function Wg(t,e){if(t==="input"||t==="change")return ga(e)}function Vg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bn=typeof Object.is=="function"?Object.is:Vg;function Ls(t,e){if(Bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!El.call(e,o)||!Bn(t[o],e[o]))return!1}return!0}function rd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function od(t,e){var n=rd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rd(n)}}function bh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wh(){for(var t=window,e=Ui();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ui(t.document)}return e}function Xu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qg(t){var e=wh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bh(n.ownerDocument.documentElement,n)){if(r!==null&&Xu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!t.extend&&s>r&&(o=r,r=s,s=o),o=od(n,s);var i=od(n,r);o&&i&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Gg=lr&&"documentMode"in document&&11>=document.documentMode,So=null,Vl=null,ys=null,ql=!1;function sd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ql||So==null||So!==Ui(r)||(r=So,"selectionStart"in r&&Xu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ys&&Ls(ys,r)||(ys=r,r=Hi(Vl,"onSelect"),0<r.length&&(e=new Ju("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=So)))}function ci(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _o={animationend:ci("Animation","AnimationEnd"),animationiteration:ci("Animation","AnimationIteration"),animationstart:ci("Animation","AnimationStart"),transitionend:ci("Transition","TransitionEnd")},Ya={},Sh={};lr&&(Sh=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function ya(t){if(Ya[t])return Ya[t];if(!_o[t])return t;var e=_o[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sh)return Ya[t]=e[n];return t}var _h=ya("animationend"),kh=ya("animationiteration"),Eh=ya("animationstart"),jh=ya("transitionend"),Ch=new Map,id="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,e){Ch.set(t,e),ao(e,[t])}for(var Qa=0;Qa<id.length;Qa++){var Xa=id[Qa],Hg=Xa.toLowerCase(),Kg=Xa[0].toUpperCase()+Xa.slice(1);Mr(Hg,"on"+Kg)}Mr(_h,"onAnimationEnd");Mr(kh,"onAnimationIteration");Mr(Eh,"onAnimationStart");Mr("dblclick","onDoubleClick");Mr("focusin","onFocus");Mr("focusout","onBlur");Mr(jh,"onTransitionEnd");Io("onMouseEnter",["mouseout","mouseover"]);Io("onMouseLeave",["mouseout","mouseover"]);Io("onPointerEnter",["pointerout","pointerover"]);Io("onPointerLeave",["pointerout","pointerover"]);ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jg=new Set("cancel close invalid load scroll toggle".split(" ").concat(ds));function ad(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Hm(r,e,void 0,t),t.currentTarget=null}function Rh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var l=r[i],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&o.isPropagationStopped())break e;ad(o,l,c),s=u}else for(i=0;i<r.length;i++){if(l=r[i],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&o.isPropagationStopped())break e;ad(o,l,c),s=u}}}if(Fi)throw t=Ul,Fi=!1,Ul=null,t}function tt(t,e){var n=e[Yl];n===void 0&&(n=e[Yl]=new Set);var r=t+"__bubble";n.has(r)||(Nh(e,t,2,!1),n.add(r))}function Za(t,e,n){var r=0;e&&(r|=4),Nh(n,t,r,e)}var di="_reactListening"+Math.random().toString(36).slice(2);function Ps(t){if(!t[di]){t[di]=!0,$f.forEach(function(n){n!=="selectionchange"&&(Jg.has(n)||Za(n,!1,t),Za(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[di]||(e[di]=!0,Za("selectionchange",!1,e))}}function Nh(t,e,n,r){switch(fh(e)){case 1:var o=ug;break;case 4:o=cg;break;default:o=Hu}n=o.bind(null,e,n,t),o=void 0,!Bl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function el(t,e,n,r,o){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;i=i.return}for(;l!==null;){if(i=Jr(l),i===null)return;if(u=i.tag,u===5||u===6){r=s=i;continue e}l=l.parentNode}}r=r.return}Xf(function(){var c=s,d=Wu(n),h=[];e:{var f=Ch.get(t);if(f!==void 0){var g=Ju,x=t;switch(t){case"keypress":if(Ai(n)===0)break e;case"keydown":case"keyup":g=Eg;break;case"focusin":x="focus",g=Ha;break;case"focusout":x="blur",g=Ha;break;case"beforeblur":case"afterblur":g=Ha;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Jc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=hg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Rg;break;case _h:case kh:case Eh:g=gg;break;case jh:g=Dg;break;case"scroll":g=dg;break;case"wheel":g=Ag;break;case"copy":case"cut":case"paste":g=vg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Qc}var b=(e&4)!==0,_=!b&&t==="scroll",p=b?f!==null?f+"Capture":null:f;b=[];for(var m=c,y;m!==null;){y=m;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,p!==null&&(w=Ns(m,p),w!=null&&b.push($s(m,w,y)))),_)break;m=m.return}0<b.length&&(f=new g(f,x,null,n,d),h.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Il&&(x=n.relatedTarget||n.fromElement)&&(Jr(x)||x[ur]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=c,x=x?Jr(x):null,x!==null&&(_=lo(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=c),g!==x)){if(b=Jc,w="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(b=Qc,w="onPointerLeave",p="onPointerEnter",m="pointer"),_=g==null?f:ko(g),y=x==null?f:ko(x),f=new b(w,m+"leave",g,n,d),f.target=_,f.relatedTarget=y,w=null,Jr(d)===c&&(b=new b(p,m+"enter",x,n,d),b.target=y,b.relatedTarget=_,w=b),_=w,g&&x)t:{for(b=g,p=x,m=0,y=b;y;y=co(y))m++;for(y=0,w=p;w;w=co(w))y++;for(;0<m-y;)b=co(b),m--;for(;0<y-m;)p=co(p),y--;for(;m--;){if(b===p||p!==null&&b===p.alternate)break t;b=co(b),p=co(p)}b=null}else b=null;g!==null&&ld(h,f,g,b,!1),x!==null&&_!==null&&ld(h,_,x,b,!0)}}e:{if(f=c?ko(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var E=Bg;else if(ed(f))if(vh)E=Wg;else{E=zg;var N=Ug}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=Fg);if(E&&(E=E(t,c))){yh(h,E,n,d);break e}N&&N(t,f,c),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Al(f,"number",f.value)}switch(N=c?ko(c):window,t){case"focusin":(ed(N)||N.contentEditable==="true")&&(So=N,Vl=c,ys=null);break;case"focusout":ys=Vl=So=null;break;case"mousedown":ql=!0;break;case"contextmenu":case"mouseup":case"dragend":ql=!1,sd(h,n,d);break;case"selectionchange":if(Gg)break;case"keydown":case"keyup":sd(h,n,d)}var D;if(Qu)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else wo?mh(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(ph&&n.locale!=="ko"&&(wo||S!=="onCompositionStart"?S==="onCompositionEnd"&&wo&&(D=hh()):(jr=d,Ku="value"in jr?jr.value:jr.textContent,wo=!0)),N=Hi(c,S),0<N.length&&(S=new Yc(S,t,null,n,d),h.push({event:S,listeners:N}),D?S.data=D:(D=gh(n),D!==null&&(S.data=D)))),(D=Lg?Pg(t,n):$g(t,n))&&(c=Hi(c,"onBeforeInput"),0<c.length&&(d=new Yc("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=D))}Rh(h,e)})}function $s(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hi(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Ns(t,n),s!=null&&r.unshift($s(t,s,o)),s=Ns(t,e),s!=null&&r.push($s(t,s,o))),t=t.return}return r}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ld(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,o?(u=Ns(n,s),u!=null&&i.unshift($s(n,u,l))):o||(u=Ns(n,s),u!=null&&i.push($s(n,u,l)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var Yg=/\r\n?/g,Qg=/\u0000|\uFFFD/g;function ud(t){return(typeof t=="string"?t:""+t).replace(Yg,`
`).replace(Qg,"")}function fi(t,e,n){if(e=ud(e),ud(t)!==e&&n)throw Error(M(425))}function Ki(){}var Gl=null,Hl=null;function Kl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jl=typeof setTimeout=="function"?setTimeout:void 0,Xg=typeof clearTimeout=="function"?clearTimeout:void 0,cd=typeof Promise=="function"?Promise:void 0,Zg=typeof queueMicrotask=="function"?queueMicrotask:typeof cd<"u"?function(t){return cd.resolve(null).then(t).catch(e0)}:Jl;function e0(t){setTimeout(function(){throw t})}function tl(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),As(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);As(e)}function Tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ho=Math.random().toString(36).slice(2),Hn="__reactFiber$"+Ho,Is="__reactProps$"+Ho,ur="__reactContainer$"+Ho,Yl="__reactEvents$"+Ho,t0="__reactListeners$"+Ho,n0="__reactHandles$"+Ho;function Jr(t){var e=t[Hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ur]||n[Hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dd(t);t!==null;){if(n=t[Hn])return n;t=dd(t)}return e}t=n,n=t.parentNode}return null}function Js(t){return t=t[Hn]||t[ur],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ko(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function va(t){return t[Is]||null}var Ql=[],Eo=-1;function Br(t){return{current:t}}function nt(t){0>Eo||(t.current=Ql[Eo],Ql[Eo]=null,Eo--)}function Qe(t,e){Eo++,Ql[Eo]=t.current,t.current=e}var Ir={},$t=Br(Ir),nn=Br(!1),eo=Ir;function Mo(t,e){var n=t.type.contextTypes;if(!n)return Ir;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function rn(t){return t=t.childContextTypes,t!=null}function Ji(){nt(nn),nt($t)}function fd(t,e,n){if($t.current!==Ir)throw Error(M(168));Qe($t,e),Qe(nn,n)}function Dh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(M(108,Um(t)||"Unknown",o));return lt({},n,r)}function Yi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ir,eo=$t.current,Qe($t,t),Qe(nn,nn.current),!0}function hd(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=Dh(t,e,eo),r.__reactInternalMemoizedMergedChildContext=t,nt(nn),nt($t),Qe($t,t)):nt(nn),Qe(nn,n)}var rr=null,xa=!1,nl=!1;function Th(t){rr===null?rr=[t]:rr.push(t)}function r0(t){xa=!0,Th(t)}function Ur(){if(!nl&&rr!==null){nl=!0;var t=0,e=We;try{var n=rr;for(We=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}rr=null,xa=!1}catch(o){throw rr!==null&&(rr=rr.slice(t+1)),nh(Vu,Ur),o}finally{We=e,nl=!1}}return null}var jo=[],Co=0,Qi=null,Xi=0,vn=[],xn=0,to=null,or=1,sr="";function qr(t,e){jo[Co++]=Xi,jo[Co++]=Qi,Qi=t,Xi=e}function Ah(t,e,n){vn[xn++]=or,vn[xn++]=sr,vn[xn++]=to,to=t;var r=or;t=sr;var o=32-In(r)-1;r&=~(1<<o),n+=1;var s=32-In(e)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,or=1<<32-In(e)+o|n<<o|r,sr=s+t}else or=1<<s|n<<o|r,sr=t}function Zu(t){t.return!==null&&(qr(t,1),Ah(t,1,0))}function ec(t){for(;t===Qi;)Qi=jo[--Co],jo[Co]=null,Xi=jo[--Co],jo[Co]=null;for(;t===to;)to=vn[--xn],vn[xn]=null,sr=vn[--xn],vn[xn]=null,or=vn[--xn],vn[xn]=null}var un=null,ln=null,rt=!1,Pn=null;function Oh(t,e){var n=bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function pd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,un=t,ln=Tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,un=t,ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=to!==null?{id:or,overflow:sr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,un=t,ln=null,!0):!1;default:return!1}}function Xl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zl(t){if(rt){var e=ln;if(e){var n=e;if(!pd(t,e)){if(Xl(t))throw Error(M(418));e=Tr(n.nextSibling);var r=un;e&&pd(t,e)?Oh(r,n):(t.flags=t.flags&-4097|2,rt=!1,un=t)}}else{if(Xl(t))throw Error(M(418));t.flags=t.flags&-4097|2,rt=!1,un=t}}}function md(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;un=t}function hi(t){if(t!==un)return!1;if(!rt)return md(t),rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Kl(t.type,t.memoizedProps)),e&&(e=ln)){if(Xl(t))throw Lh(),Error(M(418));for(;e;)Oh(t,e),e=Tr(e.nextSibling)}if(md(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ln=Tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ln=null}}else ln=un?Tr(t.stateNode.nextSibling):null;return!0}function Lh(){for(var t=ln;t;)t=Tr(t.nextSibling)}function Bo(){ln=un=null,rt=!1}function tc(t){Pn===null?Pn=[t]:Pn.push(t)}var o0=hr.ReactCurrentBatchConfig;function rs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var o=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var l=o.refs;i===null?delete l[s]:l[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function pi(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gd(t){var e=t._init;return e(t._payload)}function Ph(t){function e(p,m){if(t){var y=p.deletions;y===null?(p.deletions=[m],p.flags|=16):y.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function o(p,m){return p=Pr(p,m),p.index=0,p.sibling=null,p}function s(p,m,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<m?(p.flags|=2,m):y):(p.flags|=2,m)):(p.flags|=1048576,m)}function i(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,m,y,w){return m===null||m.tag!==6?(m=ul(y,p.mode,w),m.return=p,m):(m=o(m,y),m.return=p,m)}function u(p,m,y,w){var E=y.type;return E===bo?d(p,m,y.props.children,w,y.key):m!==null&&(m.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===wr&&gd(E)===m.type)?(w=o(m,y.props),w.ref=rs(p,m,y),w.return=p,w):(w=Bi(y.type,y.key,y.props,null,p.mode,w),w.ref=rs(p,m,y),w.return=p,w)}function c(p,m,y,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=cl(y,p.mode,w),m.return=p,m):(m=o(m,y.children||[]),m.return=p,m)}function d(p,m,y,w,E){return m===null||m.tag!==7?(m=Zr(y,p.mode,w,E),m.return=p,m):(m=o(m,y),m.return=p,m)}function h(p,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ul(""+m,p.mode,y),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ri:return y=Bi(m.type,m.key,m.props,null,p.mode,y),y.ref=rs(p,null,m),y.return=p,y;case xo:return m=cl(m,p.mode,y),m.return=p,m;case wr:var w=m._init;return h(p,w(m._payload),y)}if(us(m)||Xo(m))return m=Zr(m,p.mode,y,null),m.return=p,m;pi(p,m)}return null}function f(p,m,y,w){var E=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return E!==null?null:l(p,m,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ri:return y.key===E?u(p,m,y,w):null;case xo:return y.key===E?c(p,m,y,w):null;case wr:return E=y._init,f(p,m,E(y._payload),w)}if(us(y)||Xo(y))return E!==null?null:d(p,m,y,w,null);pi(p,y)}return null}function g(p,m,y,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(y)||null,l(m,p,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ri:return p=p.get(w.key===null?y:w.key)||null,u(m,p,w,E);case xo:return p=p.get(w.key===null?y:w.key)||null,c(m,p,w,E);case wr:var N=w._init;return g(p,m,y,N(w._payload),E)}if(us(w)||Xo(w))return p=p.get(y)||null,d(m,p,w,E,null);pi(m,w)}return null}function x(p,m,y,w){for(var E=null,N=null,D=m,S=m=0,A=null;D!==null&&S<y.length;S++){D.index>S?(A=D,D=null):A=D.sibling;var v=f(p,D,y[S],w);if(v===null){D===null&&(D=A);break}t&&D&&v.alternate===null&&e(p,D),m=s(v,m,S),N===null?E=v:N.sibling=v,N=v,D=A}if(S===y.length)return n(p,D),rt&&qr(p,S),E;if(D===null){for(;S<y.length;S++)D=h(p,y[S],w),D!==null&&(m=s(D,m,S),N===null?E=D:N.sibling=D,N=D);return rt&&qr(p,S),E}for(D=r(p,D);S<y.length;S++)A=g(D,p,S,y[S],w),A!==null&&(t&&A.alternate!==null&&D.delete(A.key===null?S:A.key),m=s(A,m,S),N===null?E=A:N.sibling=A,N=A);return t&&D.forEach(function(T){return e(p,T)}),rt&&qr(p,S),E}function b(p,m,y,w){var E=Xo(y);if(typeof E!="function")throw Error(M(150));if(y=E.call(y),y==null)throw Error(M(151));for(var N=E=null,D=m,S=m=0,A=null,v=y.next();D!==null&&!v.done;S++,v=y.next()){D.index>S?(A=D,D=null):A=D.sibling;var T=f(p,D,v.value,w);if(T===null){D===null&&(D=A);break}t&&D&&T.alternate===null&&e(p,D),m=s(T,m,S),N===null?E=T:N.sibling=T,N=T,D=A}if(v.done)return n(p,D),rt&&qr(p,S),E;if(D===null){for(;!v.done;S++,v=y.next())v=h(p,v.value,w),v!==null&&(m=s(v,m,S),N===null?E=v:N.sibling=v,N=v);return rt&&qr(p,S),E}for(D=r(p,D);!v.done;S++,v=y.next())v=g(D,p,S,v.value,w),v!==null&&(t&&v.alternate!==null&&D.delete(v.key===null?S:v.key),m=s(v,m,S),N===null?E=v:N.sibling=v,N=v);return t&&D.forEach(function(O){return e(p,O)}),rt&&qr(p,S),E}function _(p,m,y,w){if(typeof y=="object"&&y!==null&&y.type===bo&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ri:e:{for(var E=y.key,N=m;N!==null;){if(N.key===E){if(E=y.type,E===bo){if(N.tag===7){n(p,N.sibling),m=o(N,y.props.children),m.return=p,p=m;break e}}else if(N.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===wr&&gd(E)===N.type){n(p,N.sibling),m=o(N,y.props),m.ref=rs(p,N,y),m.return=p,p=m;break e}n(p,N);break}else e(p,N);N=N.sibling}y.type===bo?(m=Zr(y.props.children,p.mode,w,y.key),m.return=p,p=m):(w=Bi(y.type,y.key,y.props,null,p.mode,w),w.ref=rs(p,m,y),w.return=p,p=w)}return i(p);case xo:e:{for(N=y.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(p,m.sibling),m=o(m,y.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=cl(y,p.mode,w),m.return=p,p=m}return i(p);case wr:return N=y._init,_(p,m,N(y._payload),w)}if(us(y))return x(p,m,y,w);if(Xo(y))return b(p,m,y,w);pi(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(p,m.sibling),m=o(m,y),m.return=p,p=m):(n(p,m),m=ul(y,p.mode,w),m.return=p,p=m),i(p)):n(p,m)}return _}var Uo=Ph(!0),$h=Ph(!1),Zi=Br(null),ea=null,Ro=null,nc=null;function rc(){nc=Ro=ea=null}function oc(t){var e=Zi.current;nt(Zi),t._currentValue=e}function eu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Po(t,e){ea=t,nc=Ro=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function _n(t){var e=t._currentValue;if(nc!==t)if(t={context:t,memoizedValue:e,next:null},Ro===null){if(ea===null)throw Error(M(308));Ro=t,ea.dependencies={lanes:0,firstContext:t}}else Ro=Ro.next=t;return e}var Yr=null;function sc(t){Yr===null?Yr=[t]:Yr.push(t)}function Ih(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,sc(e)):(n.next=o.next,o.next=n),e.interleaved=n,cr(t,r)}function cr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Sr=!1;function ic(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,cr(t,n)}return o=r.interleaved,o===null?(e.next=e,sc(r)):(e.next=o.next,o.next=e),r.interleaved=e,cr(t,n)}function Oi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qu(t,n)}}function yd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ta(t,e,n,r){var o=t.updateQueue;Sr=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var u=l,c=u.next;u.next=null,i===null?s=c:i.next=c,i=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(s!==null){var h=o.baseState;i=0,d=c=u=null,l=s;do{var f=l.lane,g=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,b=l;switch(f=e,g=n,b.tag){case 1:if(x=b.payload,typeof x=="function"){h=x.call(g,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,f=typeof x=="function"?x.call(g,h,f):x,f==null)break e;h=lt({},h,f);break e;case 2:Sr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=o.effects,f===null?o.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=g,u=h):d=d.next=g,i|=f;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;f=l,l=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(d===null&&(u=h),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=d,e=o.shared.interleaved,e!==null){o=e;do i|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);ro|=i,t.lanes=i,t.memoizedState=h}}function vd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(M(191,o));o.call(r)}}}var Ys={},Yn=Br(Ys),Ms=Br(Ys),Bs=Br(Ys);function Qr(t){if(t===Ys)throw Error(M(174));return t}function ac(t,e){switch(Qe(Bs,e),Qe(Ms,t),Qe(Yn,Ys),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ll(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ll(e,t)}nt(Yn),Qe(Yn,e)}function zo(){nt(Yn),nt(Ms),nt(Bs)}function Bh(t){Qr(Bs.current);var e=Qr(Yn.current),n=Ll(e,t.type);e!==n&&(Qe(Ms,t),Qe(Yn,n))}function lc(t){Ms.current===t&&(nt(Yn),nt(Ms))}var it=Br(0);function na(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rl=[];function uc(){for(var t=0;t<rl.length;t++)rl[t]._workInProgressVersionPrimary=null;rl.length=0}var Li=hr.ReactCurrentDispatcher,ol=hr.ReactCurrentBatchConfig,no=0,at=null,wt=null,Ct=null,ra=!1,vs=!1,Us=0,s0=0;function Ot(){throw Error(M(321))}function cc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Bn(t[n],e[n]))return!1;return!0}function dc(t,e,n,r,o,s){if(no=s,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Li.current=t===null||t.memoizedState===null?u0:c0,t=n(r,o),vs){s=0;do{if(vs=!1,Us=0,25<=s)throw Error(M(301));s+=1,Ct=wt=null,e.updateQueue=null,Li.current=d0,t=n(r,o)}while(vs)}if(Li.current=oa,e=wt!==null&&wt.next!==null,no=0,Ct=wt=at=null,ra=!1,e)throw Error(M(300));return t}function fc(){var t=Us!==0;return Us=0,t}function qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?at.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function kn(){if(wt===null){var t=at.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var e=Ct===null?at.memoizedState:Ct.next;if(e!==null)Ct=e,wt=t;else{if(t===null)throw Error(M(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Ct===null?at.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function zs(t,e){return typeof e=="function"?e(t):e}function sl(t){var e=kn(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=wt,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var l=i=null,u=null,c=s;do{var d=c.lane;if((no&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,i=r):u=u.next=h,at.lanes|=d,ro|=d}c=c.next}while(c!==null&&c!==s);u===null?i=r:u.next=l,Bn(r,e.memoizedState)||(tn=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do s=o.lane,at.lanes|=s,ro|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function il(t){var e=kn(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);Bn(s,e.memoizedState)||(tn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Uh(){}function zh(t,e){var n=at,r=kn(),o=e(),s=!Bn(r.memoizedState,o);if(s&&(r.memoizedState=o,tn=!0),r=r.queue,hc(Vh.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ct!==null&&Ct.memoizedState.tag&1){if(n.flags|=2048,Fs(9,Wh.bind(null,n,r,o,e),void 0,null),Rt===null)throw Error(M(349));no&30||Fh(n,e,o)}return o}function Fh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Wh(t,e,n,r){e.value=n,e.getSnapshot=r,qh(e)&&Gh(t)}function Vh(t,e,n){return n(function(){qh(e)&&Gh(t)})}function qh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bn(t,n)}catch{return!0}}function Gh(t){var e=cr(t,1);e!==null&&Mn(e,t,1,-1)}function xd(t){var e=qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:t},e.queue=t,t=t.dispatch=l0.bind(null,at,t),[e.memoizedState,t]}function Fs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Hh(){return kn().memoizedState}function Pi(t,e,n,r){var o=qn();at.flags|=t,o.memoizedState=Fs(1|e,n,void 0,r===void 0?null:r)}function ba(t,e,n,r){var o=kn();r=r===void 0?null:r;var s=void 0;if(wt!==null){var i=wt.memoizedState;if(s=i.destroy,r!==null&&cc(r,i.deps)){o.memoizedState=Fs(e,n,s,r);return}}at.flags|=t,o.memoizedState=Fs(1|e,n,s,r)}function bd(t,e){return Pi(8390656,8,t,e)}function hc(t,e){return ba(2048,8,t,e)}function Kh(t,e){return ba(4,2,t,e)}function Jh(t,e){return ba(4,4,t,e)}function Yh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qh(t,e,n){return n=n!=null?n.concat([t]):null,ba(4,4,Yh.bind(null,e,t),n)}function pc(){}function Xh(t,e){var n=kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Zh(t,e){var n=kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ep(t,e,n){return no&21?(Bn(n,e)||(n=sh(),at.lanes|=n,ro|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function i0(t,e){var n=We;We=n!==0&&4>n?n:4,t(!0);var r=ol.transition;ol.transition={};try{t(!1),e()}finally{We=n,ol.transition=r}}function tp(){return kn().memoizedState}function a0(t,e,n){var r=Lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},np(t))rp(e,n);else if(n=Ih(t,e,n,r),n!==null){var o=Vt();Mn(n,t,r,o),op(n,e,r)}}function l0(t,e,n){var r=Lr(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(np(t))rp(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,l=s(i,n);if(o.hasEagerState=!0,o.eagerState=l,Bn(l,i)){var u=e.interleaved;u===null?(o.next=o,sc(e)):(o.next=u.next,u.next=o),e.interleaved=o;return}}catch{}finally{}n=Ih(t,e,o,r),n!==null&&(o=Vt(),Mn(n,t,r,o),op(n,e,r))}}function np(t){var e=t.alternate;return t===at||e!==null&&e===at}function rp(t,e){vs=ra=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function op(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qu(t,n)}}var oa={readContext:_n,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},u0={readContext:_n,useCallback:function(t,e){return qn().memoizedState=[t,e===void 0?null:e],t},useContext:_n,useEffect:bd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pi(4194308,4,Yh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pi(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pi(4,2,t,e)},useMemo:function(t,e){var n=qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=a0.bind(null,at,t),[r.memoizedState,t]},useRef:function(t){var e=qn();return t={current:t},e.memoizedState=t},useState:xd,useDebugValue:pc,useDeferredValue:function(t){return qn().memoizedState=t},useTransition:function(){var t=xd(!1),e=t[0];return t=i0.bind(null,t[1]),qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=at,o=qn();if(rt){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Rt===null)throw Error(M(349));no&30||Fh(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,bd(Vh.bind(null,r,s,t),[t]),r.flags|=2048,Fs(9,Wh.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=qn(),e=Rt.identifierPrefix;if(rt){var n=sr,r=or;n=(r&~(1<<32-In(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Us++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=s0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},c0={readContext:_n,useCallback:Xh,useContext:_n,useEffect:hc,useImperativeHandle:Qh,useInsertionEffect:Kh,useLayoutEffect:Jh,useMemo:Zh,useReducer:sl,useRef:Hh,useState:function(){return sl(zs)},useDebugValue:pc,useDeferredValue:function(t){var e=kn();return ep(e,wt.memoizedState,t)},useTransition:function(){var t=sl(zs)[0],e=kn().memoizedState;return[t,e]},useMutableSource:Uh,useSyncExternalStore:zh,useId:tp,unstable_isNewReconciler:!1},d0={readContext:_n,useCallback:Xh,useContext:_n,useEffect:hc,useImperativeHandle:Qh,useInsertionEffect:Kh,useLayoutEffect:Jh,useMemo:Zh,useReducer:il,useRef:Hh,useState:function(){return il(zs)},useDebugValue:pc,useDeferredValue:function(t){var e=kn();return wt===null?e.memoizedState=t:ep(e,wt.memoizedState,t)},useTransition:function(){var t=il(zs)[0],e=kn().memoizedState;return[t,e]},useMutableSource:Uh,useSyncExternalStore:zh,useId:tp,unstable_isNewReconciler:!1};function An(t,e){if(t&&t.defaultProps){e=lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function tu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wa={isMounted:function(t){return(t=t._reactInternals)?lo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Vt(),o=Lr(t),s=ar(r,o);s.payload=e,n!=null&&(s.callback=n),e=Ar(t,s,o),e!==null&&(Mn(e,t,o,r),Oi(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Vt(),o=Lr(t),s=ar(r,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ar(t,s,o),e!==null&&(Mn(e,t,o,r),Oi(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vt(),r=Lr(t),o=ar(n,r);o.tag=2,e!=null&&(o.callback=e),e=Ar(t,o,r),e!==null&&(Mn(e,t,r,n),Oi(e,t,r))}};function wd(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!Ls(n,r)||!Ls(o,s):!0}function sp(t,e,n){var r=!1,o=Ir,s=e.contextType;return typeof s=="object"&&s!==null?s=_n(s):(o=rn(e)?eo:$t.current,r=e.contextTypes,s=(r=r!=null)?Mo(t,o):Ir),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function Sd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wa.enqueueReplaceState(e,e.state,null)}function nu(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},ic(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=_n(s):(s=rn(e)?eo:$t.current,o.context=Mo(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(tu(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&wa.enqueueReplaceState(o,o.state,null),ta(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Fo(t,e){try{var n="",r=e;do n+=Bm(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function al(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ru(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var f0=typeof WeakMap=="function"?WeakMap:Map;function ip(t,e,n){n=ar(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ia||(ia=!0,hu=r),ru(t,e)},n}function ap(t,e,n){n=ar(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){ru(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ru(t,e),typeof r!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function _d(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new f0;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=j0.bind(null,t,e,n),e.then(t,t))}function kd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ed(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ar(-1,1),e.tag=2,Ar(n,e,1))),n.lanes|=1),t)}var h0=hr.ReactCurrentOwner,tn=!1;function zt(t,e,n,r){e.child=t===null?$h(e,null,n,r):Uo(e,t.child,n,r)}function jd(t,e,n,r,o){n=n.render;var s=e.ref;return Po(e,o),r=dc(t,e,n,r,s,o),n=fc(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,dr(t,e,o)):(rt&&n&&Zu(e),e.flags|=1,zt(t,e,r,o),e.child)}function Cd(t,e,n,r,o){if(t===null){var s=n.type;return typeof s=="function"&&!Sc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,lp(t,e,s,r,o)):(t=Bi(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ls,n(i,r)&&t.ref===e.ref)return dr(t,e,o)}return e.flags|=1,t=Pr(s,r),t.ref=e.ref,t.return=e,e.child=t}function lp(t,e,n,r,o){if(t!==null){var s=t.memoizedProps;if(Ls(s,r)&&t.ref===e.ref)if(tn=!1,e.pendingProps=r=s,(t.lanes&o)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,dr(t,e,o)}return ou(t,e,n,r,o)}function up(t,e,n){var r=e.pendingProps,o=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Do,an),an|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qe(Do,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Qe(Do,an),an|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Qe(Do,an),an|=r;return zt(t,e,o,n),e.child}function cp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ou(t,e,n,r,o){var s=rn(n)?eo:$t.current;return s=Mo(e,s),Po(e,o),n=dc(t,e,n,r,s,o),r=fc(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,dr(t,e,o)):(rt&&r&&Zu(e),e.flags|=1,zt(t,e,n,o),e.child)}function Rd(t,e,n,r,o){if(rn(n)){var s=!0;Yi(e)}else s=!1;if(Po(e,o),e.stateNode===null)$i(t,e),sp(e,n,r),nu(e,n,r,o),r=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var u=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=_n(c):(c=rn(n)?eo:$t.current,c=Mo(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||u!==c)&&Sd(e,i,r,c),Sr=!1;var f=e.memoizedState;i.state=f,ta(e,r,i,o),u=e.memoizedState,l!==r||f!==u||nn.current||Sr?(typeof d=="function"&&(tu(e,n,d,r),u=e.memoizedState),(l=Sr||wd(e,n,l,r,f,u,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),i.props=r,i.state=u,i.context=c,r=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,Mh(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:An(e.type,l),i.props=c,h=e.pendingProps,f=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=_n(u):(u=rn(n)?eo:$t.current,u=Mo(e,u));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||f!==u)&&Sd(e,i,r,u),Sr=!1,f=e.memoizedState,i.state=f,ta(e,r,i,o);var x=e.memoizedState;l!==h||f!==x||nn.current||Sr?(typeof g=="function"&&(tu(e,n,g,r),x=e.memoizedState),(c=Sr||wd(e,n,c,r,f,x,u)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,x,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,x,u)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),i.props=r,i.state=x,i.context=u,r=c):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return su(t,e,n,r,s,o)}function su(t,e,n,r,o,s){cp(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return o&&hd(e,n,!1),dr(t,e,s);r=e.stateNode,h0.current=e;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=Uo(e,t.child,null,s),e.child=Uo(e,null,l,s)):zt(t,e,l,s),e.memoizedState=r.state,o&&hd(e,n,!0),e.child}function dp(t){var e=t.stateNode;e.pendingContext?fd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fd(t,e.context,!1),ac(t,e.containerInfo)}function Nd(t,e,n,r,o){return Bo(),tc(o),e.flags|=256,zt(t,e,n,r),e.child}var iu={dehydrated:null,treeContext:null,retryLane:0};function au(t){return{baseLanes:t,cachePool:null,transitions:null}}function fp(t,e,n){var r=e.pendingProps,o=it.current,s=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(o&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Qe(it,o&1),t===null)return Zl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=ka(i,r,0,null),t=Zr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=au(n),e.memoizedState=iu,t):mc(e,i));if(o=t.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return p0(t,e,i,r,l,o,n);if(s){s=r.fallback,i=e.mode,o=t.child,l=o.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Pr(o,u),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?s=Pr(l,s):(s=Zr(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?au(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=iu,r}return s=t.child,t=s.sibling,r=Pr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function mc(t,e){return e=ka({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function mi(t,e,n,r){return r!==null&&tc(r),Uo(e,t.child,null,n),t=mc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function p0(t,e,n,r,o,s,i){if(n)return e.flags&256?(e.flags&=-257,r=al(Error(M(422))),mi(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=ka({mode:"visible",children:r.children},o,0,null),s=Zr(s,o,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Uo(e,t.child,null,i),e.child.memoizedState=au(i),e.memoizedState=iu,s);if(!(e.mode&1))return mi(t,e,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(M(419)),r=al(s,r,void 0),mi(t,e,i,r)}if(l=(i&t.childLanes)!==0,tn||l){if(r=Rt,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,cr(t,o),Mn(r,t,o,-1))}return wc(),r=al(Error(M(421))),mi(t,e,i,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=C0.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,ln=Tr(o.nextSibling),un=e,rt=!0,Pn=null,t!==null&&(vn[xn++]=or,vn[xn++]=sr,vn[xn++]=to,or=t.id,sr=t.overflow,to=e),e=mc(e,r.children),e.flags|=4096,e)}function Dd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),eu(t.return,e,n)}function ll(t,e,n,r,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function hp(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;if(zt(t,e,r.children,n),r=it.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dd(t,n,e);else if(t.tag===19)Dd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qe(it,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&na(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),ll(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&na(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}ll(e,!0,n,null,s);break;case"together":ll(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $i(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ro|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=Pr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function m0(t,e,n){switch(e.tag){case 3:dp(e),Bo();break;case 5:Bh(e);break;case 1:rn(e.type)&&Yi(e);break;case 4:ac(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;Qe(Zi,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qe(it,it.current&1),e.flags|=128,null):n&e.child.childLanes?fp(t,e,n):(Qe(it,it.current&1),t=dr(t,e,n),t!==null?t.sibling:null);Qe(it,it.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return hp(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Qe(it,it.current),r)break;return null;case 22:case 23:return e.lanes=0,up(t,e,n)}return dr(t,e,n)}var pp,lu,mp,gp;pp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lu=function(){};mp=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Qr(Yn.current);var s=null;switch(n){case"input":o=Dl(t,o),r=Dl(t,r),s=[];break;case"select":o=lt({},o,{value:void 0}),r=lt({},r,{value:void 0}),s=[];break;case"textarea":o=Ol(t,o),r=Ol(t,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ki)}Pl(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var l=o[c];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Cs.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Cs.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&tt("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};gp=function(t,e,n,r){n!==r&&(e.flags|=4)};function os(t,e){if(!rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function g0(t,e,n){var r=e.pendingProps;switch(ec(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return rn(e.type)&&Ji(),Lt(e),null;case 3:return r=e.stateNode,zo(),nt(nn),nt($t),uc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pn!==null&&(gu(Pn),Pn=null))),lu(t,e),Lt(e),null;case 5:lc(e);var o=Qr(Bs.current);if(n=e.type,t!==null&&e.stateNode!=null)mp(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Lt(e),null}if(t=Qr(Yn.current),hi(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Hn]=e,r[Is]=s,t=(e.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(o=0;o<ds.length;o++)tt(ds[o],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":Bc(r,s),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tt("invalid",r);break;case"textarea":zc(r,s),tt("invalid",r)}Pl(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&fi(r.textContent,l,t),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&fi(r.textContent,l,t),o=["children",""+l]):Cs.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&tt("scroll",r)}switch(n){case"input":oi(r),Uc(r,s,!0);break;case"textarea":oi(r),Fc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ki)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[Hn]=e,t[Is]=r,pp(t,e,!1,!1),e.stateNode=t;e:{switch(i=$l(n,r),n){case"dialog":tt("cancel",t),tt("close",t),o=r;break;case"iframe":case"object":case"embed":tt("load",t),o=r;break;case"video":case"audio":for(o=0;o<ds.length;o++)tt(ds[o],t);o=r;break;case"source":tt("error",t),o=r;break;case"img":case"image":case"link":tt("error",t),tt("load",t),o=r;break;case"details":tt("toggle",t),o=r;break;case"input":Bc(t,r),o=Dl(t,r),tt("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=lt({},r,{value:void 0}),tt("invalid",t);break;case"textarea":zc(t,r),o=Ol(t,r),tt("invalid",t);break;default:o=r}Pl(n,o),l=o;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Hf(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&qf(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Rs(t,u):typeof u=="number"&&Rs(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cs.hasOwnProperty(s)?u!=null&&s==="onScroll"&&tt("scroll",t):u!=null&&Bu(t,s,u,i))}switch(n){case"input":oi(t),Uc(t,r,!1);break;case"textarea":oi(t),Fc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$r(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?To(t,!!r.multiple,s,!1):r.defaultValue!=null&&To(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Ki)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)gp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=Qr(Bs.current),Qr(Yn.current),hi(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hn]=e,(s=r.nodeValue!==n)&&(t=un,t!==null))switch(t.tag){case 3:fi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fi(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hn]=e,e.stateNode=r}return Lt(e),null;case 13:if(nt(it),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&ln!==null&&e.mode&1&&!(e.flags&128))Lh(),Bo(),e.flags|=98560,s=!1;else if(s=hi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[Hn]=e}else Bo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),s=!1}else Pn!==null&&(gu(Pn),Pn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?St===0&&(St=3):wc())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return zo(),lu(t,e),t===null&&Ps(e.stateNode.containerInfo),Lt(e),null;case 10:return oc(e.type._context),Lt(e),null;case 17:return rn(e.type)&&Ji(),Lt(e),null;case 19:if(nt(it),s=e.memoizedState,s===null)return Lt(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)os(s,!1);else{if(St!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=na(t),i!==null){for(e.flags|=128,os(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qe(it,it.current&1|2),e.child}t=t.sibling}s.tail!==null&&mt()>Wo&&(e.flags|=128,r=!0,os(s,!1),e.lanes=4194304)}else{if(!r)if(t=na(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),os(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!rt)return Lt(e),null}else 2*mt()-s.renderingStartTime>Wo&&n!==1073741824&&(e.flags|=128,r=!0,os(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=mt(),e.sibling=null,n=it.current,Qe(it,r?n&1|2:n&1),e):(Lt(e),null);case 22:case 23:return bc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?an&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function y0(t,e){switch(ec(e),e.tag){case 1:return rn(e.type)&&Ji(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zo(),nt(nn),nt($t),uc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lc(e),null;case 13:if(nt(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));Bo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(it),null;case 4:return zo(),null;case 10:return oc(e.type._context),null;case 22:case 23:return bc(),null;case 24:return null;default:return null}}var gi=!1,Pt=!1,v0=typeof WeakSet=="function"?WeakSet:Set,Q=null;function No(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dt(t,e,r)}else n.current=null}function uu(t,e,n){try{n()}catch(r){dt(t,e,r)}}var Td=!1;function x0(t,e){if(Gl=qi,t=wh(),Xu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,l=-1,u=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||o!==0&&h.nodeType!==3||(l=i+o),h!==s||r!==0&&h.nodeType!==3||(u=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++c===o&&(l=i),f===s&&++d===r&&(u=i),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hl={focusedElem:t,selectionRange:n},qi=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,_=x.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?b:An(e.type,b),_);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(w){dt(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return x=Td,Td=!1,x}function xs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&uu(e,n,s)}o=o.next}while(o!==r)}}function Sa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yp(t){var e=t.alternate;e!==null&&(t.alternate=null,yp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hn],delete e[Is],delete e[Yl],delete e[t0],delete e[n0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vp(t){return t.tag===5||t.tag===3||t.tag===4}function Ad(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function du(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ki));else if(r!==4&&(t=t.child,t!==null))for(du(t,e,n),t=t.sibling;t!==null;)du(t,e,n),t=t.sibling}function fu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fu(t,e,n),t=t.sibling;t!==null;)fu(t,e,n),t=t.sibling}var Nt=null,On=!1;function yr(t,e,n){for(n=n.child;n!==null;)xp(t,e,n),n=n.sibling}function xp(t,e,n){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(pa,n)}catch{}switch(n.tag){case 5:Pt||No(n,e);case 6:var r=Nt,o=On;Nt=null,yr(t,e,n),Nt=r,On=o,Nt!==null&&(On?(t=Nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Nt.removeChild(n.stateNode));break;case 18:Nt!==null&&(On?(t=Nt,n=n.stateNode,t.nodeType===8?tl(t.parentNode,n):t.nodeType===1&&tl(t,n),As(t)):tl(Nt,n.stateNode));break;case 4:r=Nt,o=On,Nt=n.stateNode.containerInfo,On=!0,yr(t,e,n),Nt=r,On=o;break;case 0:case 11:case 14:case 15:if(!Pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&uu(n,e,i),o=o.next}while(o!==r)}yr(t,e,n);break;case 1:if(!Pt&&(No(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){dt(n,e,l)}yr(t,e,n);break;case 21:yr(t,e,n);break;case 22:n.mode&1?(Pt=(r=Pt)||n.memoizedState!==null,yr(t,e,n),Pt=r):yr(t,e,n);break;default:yr(t,e,n)}}function Od(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new v0),e.forEach(function(r){var o=R0.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:Nt=l.stateNode,On=!1;break e;case 3:Nt=l.stateNode.containerInfo,On=!0;break e;case 4:Nt=l.stateNode.containerInfo,On=!0;break e}l=l.return}if(Nt===null)throw Error(M(160));xp(s,i,o),Nt=null,On=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(c){dt(o,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bp(e,t),e=e.sibling}function bp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(e,t),Wn(t),r&4){try{xs(3,t,t.return),Sa(3,t)}catch(b){dt(t,t.return,b)}try{xs(5,t,t.return)}catch(b){dt(t,t.return,b)}}break;case 1:Dn(e,t),Wn(t),r&512&&n!==null&&No(n,n.return);break;case 5:if(Dn(e,t),Wn(t),r&512&&n!==null&&No(n,n.return),t.flags&32){var o=t.stateNode;try{Rs(o,"")}catch(b){dt(t,t.return,b)}}if(r&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Ff(o,s),$l(l,i);var c=$l(l,s);for(i=0;i<u.length;i+=2){var d=u[i],h=u[i+1];d==="style"?Hf(o,h):d==="dangerouslySetInnerHTML"?qf(o,h):d==="children"?Rs(o,h):Bu(o,d,h,c)}switch(l){case"input":Tl(o,s);break;case"textarea":Wf(o,s);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?To(o,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?To(o,!!s.multiple,s.defaultValue,!0):To(o,!!s.multiple,s.multiple?[]:"",!1))}o[Is]=s}catch(b){dt(t,t.return,b)}}break;case 6:if(Dn(e,t),Wn(t),r&4){if(t.stateNode===null)throw Error(M(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(b){dt(t,t.return,b)}}break;case 3:if(Dn(e,t),Wn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{As(e.containerInfo)}catch(b){dt(t,t.return,b)}break;case 4:Dn(e,t),Wn(t);break;case 13:Dn(e,t),Wn(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(vc=mt())),r&4&&Od(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Pt=(c=Pt)||d,Dn(e,t),Pt=c):Dn(e,t),Wn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Q=t,d=t.child;d!==null;){for(h=Q=d;Q!==null;){switch(f=Q,g=f.child,f.tag){case 0:case 11:case 14:case 15:xs(4,f,f.return);break;case 1:No(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(b){dt(r,n,b)}}break;case 5:No(f,f.return);break;case 22:if(f.memoizedState!==null){Pd(h);continue}}g!==null?(g.return=f,Q=g):Pd(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{o=h.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,u=h.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Gf("display",i))}catch(b){dt(t,t.return,b)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(b){dt(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dn(e,t),Wn(t),r&4&&Od(t);break;case 21:break;default:Dn(e,t),Wn(t)}}function Wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(vp(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Rs(o,""),r.flags&=-33);var s=Ad(t);fu(t,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,l=Ad(t);du(t,l,i);break;default:throw Error(M(161))}}catch(u){dt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function b0(t,e,n){Q=t,wp(t)}function wp(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var o=Q,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||gi;if(!i){var l=o.alternate,u=l!==null&&l.memoizedState!==null||Pt;l=gi;var c=Pt;if(gi=i,(Pt=u)&&!c)for(Q=o;Q!==null;)i=Q,u=i.child,i.tag===22&&i.memoizedState!==null?$d(o):u!==null?(u.return=i,Q=u):$d(o);for(;s!==null;)Q=s,wp(s),s=s.sibling;Q=o,gi=l,Pt=c}Ld(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,Q=s):Ld(t)}}function Ld(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pt||Sa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pt)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:An(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vd(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vd(e,i,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&As(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Pt||e.flags&512&&cu(e)}catch(f){dt(e,e.return,f)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Pd(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function $d(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sa(4,e)}catch(u){dt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(u){dt(e,o,u)}}var s=e.return;try{cu(e)}catch(u){dt(e,s,u)}break;case 5:var i=e.return;try{cu(e)}catch(u){dt(e,i,u)}}}catch(u){dt(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var w0=Math.ceil,sa=hr.ReactCurrentDispatcher,gc=hr.ReactCurrentOwner,wn=hr.ReactCurrentBatchConfig,Oe=0,Rt=null,vt=null,Dt=0,an=0,Do=Br(0),St=0,Ws=null,ro=0,_a=0,yc=0,bs=null,Zt=null,vc=0,Wo=1/0,tr=null,ia=!1,hu=null,Or=null,yi=!1,Cr=null,aa=0,ws=0,pu=null,Ii=-1,Mi=0;function Vt(){return Oe&6?mt():Ii!==-1?Ii:Ii=mt()}function Lr(t){return t.mode&1?Oe&2&&Dt!==0?Dt&-Dt:o0.transition!==null?(Mi===0&&(Mi=sh()),Mi):(t=We,t!==0||(t=window.event,t=t===void 0?16:fh(t.type)),t):1}function Mn(t,e,n,r){if(50<ws)throw ws=0,pu=null,Error(M(185));Hs(t,n,r),(!(Oe&2)||t!==Rt)&&(t===Rt&&(!(Oe&2)&&(_a|=n),St===4&&kr(t,Dt)),on(t,r),n===1&&Oe===0&&!(e.mode&1)&&(Wo=mt()+500,xa&&Ur()))}function on(t,e){var n=t.callbackNode;og(t,e);var r=Vi(t,t===Rt?Dt:0);if(r===0)n!==null&&qc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qc(n),e===1)t.tag===0?r0(Id.bind(null,t)):Th(Id.bind(null,t)),Zg(function(){!(Oe&6)&&Ur()}),n=null;else{switch(ih(r)){case 1:n=Vu;break;case 4:n=rh;break;case 16:n=Wi;break;case 536870912:n=oh;break;default:n=Wi}n=Np(n,Sp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Sp(t,e){if(Ii=-1,Mi=0,Oe&6)throw Error(M(327));var n=t.callbackNode;if($o()&&t.callbackNode!==n)return null;var r=Vi(t,t===Rt?Dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=la(t,r);else{e=r;var o=Oe;Oe|=2;var s=kp();(Rt!==t||Dt!==e)&&(tr=null,Wo=mt()+500,Xr(t,e));do try{k0();break}catch(l){_p(t,l)}while(!0);rc(),sa.current=s,Oe=o,vt!==null?e=0:(Rt=null,Dt=0,e=St)}if(e!==0){if(e===2&&(o=zl(t),o!==0&&(r=o,e=mu(t,o))),e===1)throw n=Ws,Xr(t,0),kr(t,r),on(t,mt()),n;if(e===6)kr(t,r);else{if(o=t.current.alternate,!(r&30)&&!S0(o)&&(e=la(t,r),e===2&&(s=zl(t),s!==0&&(r=s,e=mu(t,s))),e===1))throw n=Ws,Xr(t,0),kr(t,r),on(t,mt()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:Gr(t,Zt,tr);break;case 3:if(kr(t,r),(r&130023424)===r&&(e=vc+500-mt(),10<e)){if(Vi(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){Vt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Jl(Gr.bind(null,t,Zt,tr),e);break}Gr(t,Zt,tr);break;case 4:if(kr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var i=31-In(r);s=1<<i,i=e[i],i>o&&(o=i),r&=~s}if(r=o,r=mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*w0(r/1960))-r,10<r){t.timeoutHandle=Jl(Gr.bind(null,t,Zt,tr),r);break}Gr(t,Zt,tr);break;case 5:Gr(t,Zt,tr);break;default:throw Error(M(329))}}}return on(t,mt()),t.callbackNode===n?Sp.bind(null,t):null}function mu(t,e){var n=bs;return t.current.memoizedState.isDehydrated&&(Xr(t,e).flags|=256),t=la(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&gu(e)),t}function gu(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function S0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Bn(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kr(t,e){for(e&=~yc,e&=~_a,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-In(e),r=1<<n;t[n]=-1,e&=~r}}function Id(t){if(Oe&6)throw Error(M(327));$o();var e=Vi(t,0);if(!(e&1))return on(t,mt()),null;var n=la(t,e);if(t.tag!==0&&n===2){var r=zl(t);r!==0&&(e=r,n=mu(t,r))}if(n===1)throw n=Ws,Xr(t,0),kr(t,e),on(t,mt()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gr(t,Zt,tr),on(t,mt()),null}function xc(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(Wo=mt()+500,xa&&Ur())}}function oo(t){Cr!==null&&Cr.tag===0&&!(Oe&6)&&$o();var e=Oe;Oe|=1;var n=wn.transition,r=We;try{if(wn.transition=null,We=1,t)return t()}finally{We=r,wn.transition=n,Oe=e,!(Oe&6)&&Ur()}}function bc(){an=Do.current,nt(Do)}function Xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Xg(n)),vt!==null)for(n=vt.return;n!==null;){var r=n;switch(ec(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ji();break;case 3:zo(),nt(nn),nt($t),uc();break;case 5:lc(r);break;case 4:zo();break;case 13:nt(it);break;case 19:nt(it);break;case 10:oc(r.type._context);break;case 22:case 23:bc()}n=n.return}if(Rt=t,vt=t=Pr(t.current,null),Dt=an=e,St=0,Ws=null,yc=_a=ro=0,Zt=bs=null,Yr!==null){for(e=0;e<Yr.length;e++)if(n=Yr[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}Yr=null}return t}function _p(t,e){do{var n=vt;try{if(rc(),Li.current=oa,ra){for(var r=at.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}ra=!1}if(no=0,Ct=wt=at=null,vs=!1,Us=0,gc.current=null,n===null||n.return===null){St=1,Ws=e,vt=null;break}e:{var s=t,i=n.return,l=n,u=e;if(e=Dt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=kd(i);if(g!==null){g.flags&=-257,Ed(g,i,l,s,e),g.mode&1&&_d(s,c,e),e=g,u=c;var x=e.updateQueue;if(x===null){var b=new Set;b.add(u),e.updateQueue=b}else x.add(u);break e}else{if(!(e&1)){_d(s,c,e),wc();break e}u=Error(M(426))}}else if(rt&&l.mode&1){var _=kd(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Ed(_,i,l,s,e),tc(Fo(u,l));break e}}s=u=Fo(u,l),St!==4&&(St=2),bs===null?bs=[s]:bs.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=ip(s,u,e);yd(s,p);break e;case 1:l=u;var m=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Or===null||!Or.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=ap(s,l,e);yd(s,w);break e}}s=s.return}while(s!==null)}jp(n)}catch(E){e=E,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(!0)}function kp(){var t=sa.current;return sa.current=oa,t===null?oa:t}function wc(){(St===0||St===3||St===2)&&(St=4),Rt===null||!(ro&268435455)&&!(_a&268435455)||kr(Rt,Dt)}function la(t,e){var n=Oe;Oe|=2;var r=kp();(Rt!==t||Dt!==e)&&(tr=null,Xr(t,e));do try{_0();break}catch(o){_p(t,o)}while(!0);if(rc(),Oe=n,sa.current=r,vt!==null)throw Error(M(261));return Rt=null,Dt=0,St}function _0(){for(;vt!==null;)Ep(vt)}function k0(){for(;vt!==null&&!Jm();)Ep(vt)}function Ep(t){var e=Rp(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?jp(t):vt=e,gc.current=null}function jp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=y0(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{St=6,vt=null;return}}else if(n=g0(n,e,an),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);St===0&&(St=5)}function Gr(t,e,n){var r=We,o=wn.transition;try{wn.transition=null,We=1,E0(t,e,n,r)}finally{wn.transition=o,We=r}return null}function E0(t,e,n,r){do $o();while(Cr!==null);if(Oe&6)throw Error(M(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(sg(t,s),t===Rt&&(vt=Rt=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yi||(yi=!0,Np(Wi,function(){return $o(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=wn.transition,wn.transition=null;var i=We;We=1;var l=Oe;Oe|=4,gc.current=null,x0(t,n),bp(n,t),qg(Hl),qi=!!Gl,Hl=Gl=null,t.current=n,b0(n),Ym(),Oe=l,We=i,wn.transition=s}else t.current=n;if(yi&&(yi=!1,Cr=t,aa=o),s=t.pendingLanes,s===0&&(Or=null),Zm(n.stateNode),on(t,mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(ia)throw ia=!1,t=hu,hu=null,t;return aa&1&&t.tag!==0&&$o(),s=t.pendingLanes,s&1?t===pu?ws++:(ws=0,pu=t):ws=0,Ur(),null}function $o(){if(Cr!==null){var t=ih(aa),e=wn.transition,n=We;try{if(wn.transition=null,We=16>t?16:t,Cr===null)var r=!1;else{if(t=Cr,Cr=null,aa=0,Oe&6)throw Error(M(331));var o=Oe;for(Oe|=4,Q=t.current;Q!==null;){var s=Q,i=s.child;if(Q.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(Q=c;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:xs(8,d,s)}var h=d.child;if(h!==null)h.return=d,Q=h;else for(;Q!==null;){d=Q;var f=d.sibling,g=d.return;if(yp(d),d===c){Q=null;break}if(f!==null){f.return=g,Q=f;break}Q=g}}}var x=s.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var _=b.sibling;b.sibling=null,b=_}while(b!==null)}}Q=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,Q=i;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xs(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,Q=p;break e}Q=s.return}}var m=t.current;for(Q=m;Q!==null;){i=Q;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,Q=y;else e:for(i=m;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Sa(9,l)}}catch(E){dt(l,l.return,E)}if(l===i){Q=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Q=w;break e}Q=l.return}}if(Oe=o,Ur(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(pa,t)}catch{}r=!0}return r}finally{We=n,wn.transition=e}}return!1}function Md(t,e,n){e=Fo(n,e),e=ip(t,e,1),t=Ar(t,e,1),e=Vt(),t!==null&&(Hs(t,1,e),on(t,e))}function dt(t,e,n){if(t.tag===3)Md(t,t,n);else for(;e!==null;){if(e.tag===3){Md(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Or===null||!Or.has(r))){t=Fo(n,t),t=ap(e,t,1),e=Ar(e,t,1),t=Vt(),e!==null&&(Hs(e,1,t),on(e,t));break}}e=e.return}}function j0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Vt(),t.pingedLanes|=t.suspendedLanes&n,Rt===t&&(Dt&n)===n&&(St===4||St===3&&(Dt&130023424)===Dt&&500>mt()-vc?Xr(t,0):yc|=n),on(t,e)}function Cp(t,e){e===0&&(t.mode&1?(e=ai,ai<<=1,!(ai&130023424)&&(ai=4194304)):e=1);var n=Vt();t=cr(t,e),t!==null&&(Hs(t,e,n),on(t,n))}function C0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Cp(t,n)}function R0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),Cp(t,n)}var Rp;Rp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,m0(t,e,n);tn=!!(t.flags&131072)}else tn=!1,rt&&e.flags&1048576&&Ah(e,Xi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$i(t,e),t=e.pendingProps;var o=Mo(e,$t.current);Po(e,n),o=dc(null,e,r,t,o,n);var s=fc();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(r)?(s=!0,Yi(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,ic(e),o.updater=wa,e.stateNode=o,o._reactInternals=e,nu(e,r,t,n),e=su(null,e,r,!0,s,n)):(e.tag=0,rt&&s&&Zu(e),zt(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch($i(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=D0(r),t=An(r,t),o){case 0:e=ou(null,e,r,t,n);break e;case 1:e=Rd(null,e,r,t,n);break e;case 11:e=jd(null,e,r,t,n);break e;case 14:e=Cd(null,e,r,An(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:An(r,o),ou(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:An(r,o),Rd(t,e,r,o,n);case 3:e:{if(dp(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,o=s.element,Mh(t,e),ta(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Fo(Error(M(423)),e),e=Nd(t,e,r,n,o);break e}else if(r!==o){o=Fo(Error(M(424)),e),e=Nd(t,e,r,n,o);break e}else for(ln=Tr(e.stateNode.containerInfo.firstChild),un=e,rt=!0,Pn=null,n=$h(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bo(),r===o){e=dr(t,e,n);break e}zt(t,e,r,n)}e=e.child}return e;case 5:return Bh(e),t===null&&Zl(e),r=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,i=o.children,Kl(r,o)?i=null:s!==null&&Kl(r,s)&&(e.flags|=32),cp(t,e),zt(t,e,i,n),e.child;case 6:return t===null&&Zl(e),null;case 13:return fp(t,e,n);case 4:return ac(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Uo(e,null,r,n):zt(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:An(r,o),jd(t,e,r,o,n);case 7:return zt(t,e,e.pendingProps,n),e.child;case 8:return zt(t,e,e.pendingProps.children,n),e.child;case 12:return zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,s=e.memoizedProps,i=o.value,Qe(Zi,r._currentValue),r._currentValue=i,s!==null)if(Bn(s.value,i)){if(s.children===o.children&&!nn.current){e=dr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=ar(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),eu(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(M(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),eu(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}zt(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Po(e,n),o=_n(o),r=r(o),e.flags|=1,zt(t,e,r,n),e.child;case 14:return r=e.type,o=An(r,e.pendingProps),o=An(r.type,o),Cd(t,e,r,o,n);case 15:return lp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:An(r,o),$i(t,e),e.tag=1,rn(r)?(t=!0,Yi(e)):t=!1,Po(e,n),sp(e,r,o),nu(e,r,o,n),su(null,e,r,!0,t,n);case 19:return hp(t,e,n);case 22:return up(t,e,n)}throw Error(M(156,e.tag))};function Np(t,e){return nh(t,e)}function N0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(t,e,n,r){return new N0(t,e,n,r)}function Sc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function D0(t){if(typeof t=="function")return Sc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zu)return 11;if(t===Fu)return 14}return 2}function Pr(t,e){var n=t.alternate;return n===null?(n=bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bi(t,e,n,r,o,s){var i=2;if(r=t,typeof t=="function")Sc(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case bo:return Zr(n.children,o,s,e);case Uu:i=8,o|=8;break;case jl:return t=bn(12,n,e,o|2),t.elementType=jl,t.lanes=s,t;case Cl:return t=bn(13,n,e,o),t.elementType=Cl,t.lanes=s,t;case Rl:return t=bn(19,n,e,o),t.elementType=Rl,t.lanes=s,t;case Bf:return ka(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case If:i=10;break e;case Mf:i=9;break e;case zu:i=11;break e;case Fu:i=14;break e;case wr:i=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=bn(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function Zr(t,e,n,r){return t=bn(7,t,r,e),t.lanes=n,t}function ka(t,e,n,r){return t=bn(22,t,r,e),t.elementType=Bf,t.lanes=n,t.stateNode={isHidden:!1},t}function ul(t,e,n){return t=bn(6,t,null,e),t.lanes=n,t}function cl(t,e,n){return e=bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function T0(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Va(0),this.expirationTimes=Va(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Va(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function _c(t,e,n,r,o,s,i,l,u){return t=new T0(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=bn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ic(s),t}function A0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Dp(t){if(!t)return Ir;t=t._reactInternals;e:{if(lo(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(rn(n))return Dh(t,n,e)}return e}function Tp(t,e,n,r,o,s,i,l,u){return t=_c(n,r,!0,t,o,s,i,l,u),t.context=Dp(null),n=t.current,r=Vt(),o=Lr(n),s=ar(r,o),s.callback=e??null,Ar(n,s,o),t.current.lanes=o,Hs(t,o,r),on(t,r),t}function Ea(t,e,n,r){var o=e.current,s=Vt(),i=Lr(o);return n=Dp(n),e.context===null?e.context=n:e.pendingContext=n,e=ar(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ar(o,e,i),t!==null&&(Mn(t,o,i,s),Oi(t,o,i)),i}function ua(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kc(t,e){Bd(t,e),(t=t.alternate)&&Bd(t,e)}function O0(){return null}var Ap=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ec(t){this._internalRoot=t}ja.prototype.render=Ec.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));Ea(t,e,null,null)};ja.prototype.unmount=Ec.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oo(function(){Ea(null,t,null,null)}),e[ur]=null}};function ja(t){this._internalRoot=t}ja.prototype.unstable_scheduleHydration=function(t){if(t){var e=uh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_r.length&&e!==0&&e<_r[n].priority;n++);_r.splice(n,0,t),n===0&&dh(t)}};function jc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ca(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ud(){}function L0(t,e,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=ua(i);s.call(c)}}var i=Tp(e,r,t,0,null,!1,!1,"",Ud);return t._reactRootContainer=i,t[ur]=i.current,Ps(t.nodeType===8?t.parentNode:t),oo(),i}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var c=ua(u);l.call(c)}}var u=_c(t,0,!1,null,null,!1,!1,"",Ud);return t._reactRootContainer=u,t[ur]=u.current,Ps(t.nodeType===8?t.parentNode:t),oo(function(){Ea(e,u,n,r)}),u}function Ra(t,e,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var l=o;o=function(){var u=ua(i);l.call(u)}}Ea(e,i,t,o)}else i=L0(n,e,t,o,r);return ua(i)}ah=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=cs(e.pendingLanes);n!==0&&(qu(e,n|1),on(e,mt()),!(Oe&6)&&(Wo=mt()+500,Ur()))}break;case 13:oo(function(){var r=cr(t,1);if(r!==null){var o=Vt();Mn(r,t,1,o)}}),kc(t,1)}};Gu=function(t){if(t.tag===13){var e=cr(t,134217728);if(e!==null){var n=Vt();Mn(e,t,134217728,n)}kc(t,134217728)}};lh=function(t){if(t.tag===13){var e=Lr(t),n=cr(t,e);if(n!==null){var r=Vt();Mn(n,t,e,r)}kc(t,e)}};uh=function(){return We};ch=function(t,e){var n=We;try{return We=t,e()}finally{We=n}};Ml=function(t,e,n){switch(e){case"input":if(Tl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=va(r);if(!o)throw Error(M(90));zf(r),Tl(r,o)}}}break;case"textarea":Wf(t,n);break;case"select":e=n.value,e!=null&&To(t,!!n.multiple,e,!1)}};Yf=xc;Qf=oo;var P0={usingClientEntryPoint:!1,Events:[Js,ko,va,Kf,Jf,xc]},ss={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$0={bundleType:ss.bundleType,version:ss.version,rendererPackageName:ss.rendererPackageName,rendererConfig:ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=eh(t),t===null?null:t.stateNode},findFiberByHostInstance:ss.findFiberByHostInstance||O0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vi.isDisabled&&vi.supportsFiber)try{pa=vi.inject($0),Jn=vi}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P0;dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jc(e))throw Error(M(200));return A0(t,e,null,n)};dn.createRoot=function(t,e){if(!jc(t))throw Error(M(299));var n=!1,r="",o=Ap;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=_c(t,1,!1,null,null,n,!1,r,o),t[ur]=e.current,Ps(t.nodeType===8?t.parentNode:t),new Ec(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=eh(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return oo(t)};dn.hydrate=function(t,e,n){if(!Ca(e))throw Error(M(200));return Ra(null,t,e,!0,n)};dn.hydrateRoot=function(t,e,n){if(!jc(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=Ap;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=Tp(e,null,t,1,n??null,o,!1,s,i),t[ur]=e.current,Ps(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new ja(e)};dn.render=function(t,e,n){if(!Ca(e))throw Error(M(200));return Ra(null,t,e,!1,n)};dn.unmountComponentAtNode=function(t){if(!Ca(t))throw Error(M(40));return t._reactRootContainer?(oo(function(){Ra(null,null,t,!1,function(){t._reactRootContainer=null,t[ur]=null})}),!0):!1};dn.unstable_batchedUpdates=xc;dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ca(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return Ra(t,e,n,!1,r)};dn.version="18.3.1-next-f1338f8080-20240426";function Op(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Op)}catch(t){console.error(t)}}Op(),Of.exports=dn;var I0=Of.exports,zd=I0;kl.createRoot=zd.createRoot,kl.hydrateRoot=zd.hydrateRoot;const M0="modulepreload",B0=function(t){return"/"+t},Fd={},Qs=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(u=>{if(u=B0(u),u in Fd)return;Fd[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":M0,c||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},U0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Qs(async()=>{const{default:r}=await Promise.resolve().then(()=>Ko);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Cc extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class z0 extends Cc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Wd extends Cc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Vd extends Cc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var yu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(yu||(yu={}));var F0=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class W0{constructor(e,{headers:n={},customFetch:r,region:o=yu.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=U0(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return F0(this,void 0,void 0,function*(){try{const{headers:o,method:s,body:i}=n;let l={},{region:u}=n;u||(u=this.region);const c=new URL(`${this.url}/${e}`);u&&u!=="any"&&(l["x-region"]=u,c.searchParams.set("forceFunctionRegion",u));let d;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const h=yield this.fetch(c.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),o),body:d}).catch(b=>{throw new z0(b)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Wd(h);if(!h.ok)throw new Vd(h);let g=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return g==="application/json"?x=yield h.json():g==="application/octet-stream"?x=yield h.blob():g==="text/event-stream"?x=h:g==="multipart/form-data"?x=yield h.formData():x=yield h.text(),{data:x,error:null,response:h}}catch(o){return{data:null,error:o,response:o instanceof Vd||o instanceof Wd?o.context:void 0}}})}}var en={},Rc={},Na={},Xs={},Da={},Ta={},V0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Vo=V0();const q0=Vo.fetch,Lp=Vo.fetch.bind(Vo),Pp=Vo.Headers,G0=Vo.Request,H0=Vo.Response,Ko=Object.freeze(Object.defineProperty({__proto__:null,Headers:Pp,Request:G0,Response:H0,default:Lp,fetch:q0},Symbol.toStringTag,{value:"Module"})),K0=dm(Ko);var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});let J0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Aa.default=J0;var $p=Sn&&Sn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ta,"__esModule",{value:!0});const Y0=$p(K0),Q0=$p(Aa);let X0=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Y0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let o=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var i,l,u,c;let d=null,h=null,f=null,g=s.status,x=s.statusText;if(s.ok){if(this.method!=="HEAD"){const m=await s.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?h=m:h=JSON.parse(m))}const _=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),p=(u=s.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");_&&p&&p.length>1&&(f=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,g=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const _=await s.text();try{d=JSON.parse(_),Array.isArray(d)&&s.status===404&&(h=[],d=null,g=200,x="OK")}catch{s.status===404&&_===""?(g=204,x="No Content"):d={message:_}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,g=200,x="OK"),d&&this.shouldThrowOnError)throw new Q0.default(d)}return{error:d,data:h,count:f,status:g,statusText:x}});return this.shouldThrowOnError||(o=o.catch(s=>{var i,l,u;return{error:{message:`${(i=s==null?void 0:s.name)!==null&&i!==void 0?i:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(u=s==null?void 0:s.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}};Ta.default=X0;var Z0=Sn&&Sn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Da,"__esModule",{value:!0});const ey=Z0(Ta);let ty=class extends ey.default{select(e){let n=!1;const r=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:o,referencedTable:s=o}={}){const i=s?`${s}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:o=r}={}){const s=typeof o>"u"?"offset":`${o}.offset`,i=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:o=!1,wal:s=!1,format:i="text"}={}){var l;const u=[e?"analyze":null,n?"verbose":null,r?"settings":null,o?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${u};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Da.default=ty;var ny=Sn&&Sn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xs,"__esModule",{value:!0});const ry=ny(Da);let oy=class extends ry.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:o}={}){let s="";o==="plain"?s="pl":o==="phrase"?s="ph":o==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Xs.default=oy;var sy=Sn&&Sn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Na,"__esModule",{value:!0});const is=sy(Xs);let iy=class{constructor(e,{headers:n={},schema:r,fetch:o}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=o}select(e,{head:n=!1,count:r}={}){const o=n?"HEAD":"GET";let s=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new is.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var o;const s="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(i.length>0){const l=[...new Set(i)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new is.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:o,defaultToNull:s=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),o&&this.headers.append("Prefer",`count=${o}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new is.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:n}={}){var r;const o="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new is.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new is.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Na.default=iy;var Ip=Sn&&Sn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rc,"__esModule",{value:!0});const ay=Ip(Na),ly=Ip(Xs);let uy=class Mp{constructor(e,{headers:n={},schema:r,fetch:o}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=o}from(e){const n=new URL(`${this.url}/${e}`);return new ay.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Mp(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:o=!1,count:s}={}){var i;let l;const u=new URL(`${this.url}/rpc/${e}`);let c;r||o?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{u.searchParams.append(h,f)})):(l="POST",c=n);const d=new Headers(this.headers);return s&&d.set("Prefer",`count=${s}`),new ly.default({method:l,url:u,headers:d,schema:this.schemaName,body:c,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};Rc.default=uy;var Jo=Sn&&Sn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(en,"__esModule",{value:!0});en.PostgrestError=en.PostgrestBuilder=en.PostgrestTransformBuilder=en.PostgrestFilterBuilder=en.PostgrestQueryBuilder=en.PostgrestClient=void 0;const Bp=Jo(Rc);en.PostgrestClient=Bp.default;const Up=Jo(Na);en.PostgrestQueryBuilder=Up.default;const zp=Jo(Xs);en.PostgrestFilterBuilder=zp.default;const Fp=Jo(Da);en.PostgrestTransformBuilder=Fp.default;const Wp=Jo(Ta);en.PostgrestBuilder=Wp.default;const Vp=Jo(Aa);en.PostgrestError=Vp.default;var cy=en.default={PostgrestClient:Bp.default,PostgrestQueryBuilder:Up.default,PostgrestFilterBuilder:zp.default,PostgrestTransformBuilder:Fp.default,PostgrestBuilder:Wp.default,PostgrestError:Vp.default};const{PostgrestClient:dy,PostgrestQueryBuilder:db,PostgrestFilterBuilder:fb,PostgrestTransformBuilder:hb,PostgrestBuilder:pb,PostgrestError:mb}=cy;class fy{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const hy="2.15.5",py=`realtime-js/${hy}`,my="1.0.0",vu=1e4,gy=1e3,yy=100;var Ss;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ss||(Ss={}));var xt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(xt||(xt={}));var Ln;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ln||(Ln={}));var xu;(function(t){t.websocket="websocket"})(xu||(xu={}));var Kr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Kr||(Kr={}));class vy{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const o=n.getUint8(1),s=n.getUint8(2);let i=this.HEADER_LENGTH+2;const l=r.decode(e.slice(i,i+o));i=i+o;const u=r.decode(e.slice(i,i+s));i=i+s;const c=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:u,payload:c}}}class qp{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ye;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ye||(Ye={}));const qd=(t,e,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,i)=>(s[i]=xy(i,t,e,o),s),{})},xy=(t,e,n,r)=>{const o=e.find(l=>l.name===t),s=o==null?void 0:o.type,i=n[t];return s&&!r.includes(s)?Gp(s,i):bu(i)},Gp=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return _y(e,n)}switch(t){case Ye.bool:return by(e);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return wy(e);case Ye.json:case Ye.jsonb:return Sy(e);case Ye.timestamp:return ky(e);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return bu(e);default:return bu(e)}},bu=t=>t,by=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},wy=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Sy=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},_y=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const i=t.slice(1,n);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(l=>Gp(e,l))}return t},ky=t=>typeof t=="string"?t.replace(" ","T"):t,Hp=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class dl{constructor(e,n,r={},o=vu){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Gd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Gd||(Gd={}));class _s{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:s,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_s.syncState(this.state,o,s,i),this.pendingDiffs.forEach(u=>{this.state=_s.syncDiff(this.state,u,s,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},o=>{const{onJoin:s,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=_s.syncDiff(this.state,o,s,i),l())}),this.onJoin((o,s,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:s,newPresences:i})}),this.onLeave((o,s,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:s,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){const s=this.cloneDeep(e),i=this.transformState(n),l={},u={};return this.map(s,(c,d)=>{i[c]||(u[c]=d)}),this.map(i,(c,d)=>{const h=s[c];if(h){const f=d.map(_=>_.presence_ref),g=h.map(_=>_.presence_ref),x=d.filter(_=>g.indexOf(_.presence_ref)<0),b=h.filter(_=>f.indexOf(_.presence_ref)<0);x.length>0&&(l[c]=x),b.length>0&&(u[c]=b)}else l[c]=d}),this.syncDiff(s,{joins:l,leaves:u},r,o)}static syncDiff(e,n,r,o){const{joins:s,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(s,(l,u)=>{var c;const d=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(u),d.length>0){const h=e[l].map(g=>g.presence_ref),f=d.filter(g=>h.indexOf(g.presence_ref)<0);e[l].unshift(...f)}r(l,d,u)}),this.map(i,(l,u)=>{let c=e[l];if(!c)return;const d=u.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=c,o(l,c,u),c.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const o=e[r];return"metas"in o?n[r]=o.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Hd||(Hd={}));var ks;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ks||(ks={}));var nr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(nr||(nr={}));class Nc{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=xt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new dl(this,Ln.join,this.params,this.timeout),this.rejoinTimer=new qp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ln.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new _s(this),this.broadcastEndpointURL=Hp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,o,s;if(this.socket.isConnected()||this.socket.connect(),this.state==xt.closed){const{config:{broadcast:i,presence:l,private:u}}=this.params,c=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&o!==void 0?o:[],d=!!this.bindings[ks.PRESENCE]&&this.bindings[ks.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(nr.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(nr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var x;if(this.socket.setAuth(),g===void 0){e==null||e(nr.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,_=(x=b==null?void 0:b.length)!==null&&x!==void 0?x:0,p=[];for(let m=0;m<_;m++){const y=b[m],{filter:{event:w,schema:E,table:N,filter:D}}=y,S=g&&g[m];if(S&&S.event===w&&S.schema===E&&S.table===N&&S.filter===D)p.push(Object.assign(Object.assign({},y),{id:S.id}));else{this.unsubscribe(),this.state=xt.errored,e==null||e(nr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(nr.SUBSCRIBED);return}}).receive("error",g=>{this.state=xt.errored,e==null||e(nr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(nr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===xt.joined&&e===ks.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:i}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=c.body)===null||o===void 0?void 0:o.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var i,l,u;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=xt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ln.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new dl(this,Ln.leave,{},e),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const o=new AbortController,s=setTimeout(()=>o.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(s),i}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new dl(this,e,n,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>yy){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,s;const i=e.toLocaleLowerCase(),{close:l,error:u,leave:c,join:d}=Ln;if(r&&[l,u,c,d].indexOf(i)>=0&&r!==this._joinRef())return;let f=this._onMessage(i,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(g=>{var x,b,_;return((x=g.filter)===null||x===void 0?void 0:x.event)==="*"||((_=(b=g.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===i}).map(g=>g.callback(f,r)):(s=this.bindings[i])===null||s===void 0||s.filter(g=>{var x,b,_,p,m,y;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in g){const w=g.id,E=(x=g.filter)===null||x===void 0?void 0:x.event;return w&&((b=n.ids)===null||b===void 0?void 0:b.includes(w))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const w=(m=(p=g==null?void 0:g.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return w==="*"||w===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===i}).map(g=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:b,table:_,commit_timestamp:p,type:m,errors:y}=x;f=Object.assign(Object.assign({},{schema:b,table:_,commit_timestamp:p,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(x))}g.callback(f,r)})}_isClosed(){return this.state===xt.closed}_isJoined(){return this.state===xt.joined}_isJoining(){return this.state===xt.joining}_isLeaving(){return this.state===xt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const o=e.toLocaleLowerCase(),s={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(s):this.bindings[o]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var s;return!(((s=o.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Nc.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ln.close,{},e)}_onError(e){this._on(Ln.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=qd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=qd(e.columns,e.old_record)),n}}const fl=()=>{},xi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ey=[1e3,2e3,5e3,1e4],jy=1e4,Cy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ry{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vu,this.transport=null,this.heartbeatIntervalMs=xi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fl,this.ref=0,this.reconnectTimer=null,this.logger=fl,this.conn=null,this.sendBuffer=[],this.serializer=new vy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...i)=>Qs(async()=>{const{default:l}=await Promise.resolve().then(()=>Ko);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...i)=>s(...i)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${xu.websocket}`,this.httpEndpoint=Hp(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fy.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:my}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ss.connecting:return Kr.Connecting;case Ss.open:return Kr.Open;case Ss.closing:return Kr.Closing;default:return Kr.Closed}}isConnected(){return this.connectionState()===Kr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(s=>s.topic===r);if(o)return o;{const s=new Nc(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:o,ref:s}=e,i=()=>{this.encode(e,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${n} ${r} (${s})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(gy,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},xi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:s,ref:i}=n,l=i?`(${i})`:"",u=s.status||"";this.log("receive",`${u} ${r} ${o} ${l}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(o,s,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ln.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${r}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Cy],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const o={access_token:n,version:py};n&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(Ln.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new qp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,o,s,i,l,u,c,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:vu,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:xi.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:fl,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:h=>Ey[h-1]||jy,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Dc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function bt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Ny extends Dc{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class wu extends Dc{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Dy=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const Kp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Qs(async()=>{const{default:r}=await Promise.resolve().then(()=>Ko);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Ty=()=>Dy(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Qs(()=>Promise.resolve().then(()=>Ko),void 0)).Response:Response}),Su=t=>{if(Array.isArray(t))return t.map(n=>Su(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[o]=Su(r)}),e},Ay=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var uo=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const hl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Oy=(t,e,n)=>uo(void 0,void 0,void 0,function*(){const r=yield Ty();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{const s=t.status||500,i=(o==null?void 0:o.statusCode)||s+"";e(new Ny(hl(o),s,i))}).catch(o=>{e(new wu(hl(o),o))}):e(new wu(hl(t),t))}),Ly=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?o:(Ay(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function Zs(t,e,n,r,o,s){return uo(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(n,Ly(e,r,o,s)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>i(u)).catch(u=>Oy(u,l,r))})})}function ca(t,e,n,r){return uo(this,void 0,void 0,function*(){return Zs(t,"GET",e,n,r)})}function Gn(t,e,n,r,o){return uo(this,void 0,void 0,function*(){return Zs(t,"POST",e,r,o,n)})}function _u(t,e,n,r,o){return uo(this,void 0,void 0,function*(){return Zs(t,"PUT",e,r,o,n)})}function Py(t,e,n,r){return uo(this,void 0,void 0,function*(){return Zs(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Jp(t,e,n,r,o){return uo(this,void 0,void 0,function*(){return Zs(t,"DELETE",e,r,o,n)})}var Bt=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const $y={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Kd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Iy{constructor(e,n={},r,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Kp(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,o){return Bt(this,void 0,void 0,function*(){try{let s;const i=Object.assign(Object.assign({},Kd),o);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const u=i.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),u&&s.append("metadata",this.encodeMetadata(u)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl),u&&s.append("metadata",this.encodeMetadata(u))):(s=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),o!=null&&o.headers&&(l=Object.assign(Object.assign({},l),o.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),h=yield(e=="PUT"?_u:Gn)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(bt(s))return{data:null,error:s};throw s}})}upload(e,n,r){return Bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return Bt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",n);try{let u;const c=Object.assign({upsert:Kd.upsert},o),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",c.cacheControl)):(u=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield _u(this.fetch,l.toString(),u,{headers:d});return{data:{path:s,fullPath:h.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(bt(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,n){return Bt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const s=yield Gn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+s.url),l=i.searchParams.get("token");if(!l)throw new Dc("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Bt(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(bt(o))return{data:null,error:o};throw o}})}copy(e,n,r){return Bt(this,void 0,void 0,function*(){try{return{data:{path:(yield Gn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(bt(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return Bt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),s=yield Gn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(bt(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return Bt(this,void 0,void 0,function*(){try{const o=yield Gn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${s}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(bt(o))return{data:null,error:o};throw o}})}download(e,n){return Bt(this,void 0,void 0,function*(){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=s?`?${s}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ca(this.fetch,`${this.url}/${o}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(bt(l))return{data:null,error:l};throw l}})}info(e){return Bt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ca(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Su(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}exists(e){return Bt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Py(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r)&&r instanceof wu){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),o=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&o.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&o.push(u);let c=o.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield Jp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Bt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},$y),n),{prefix:e||""});return{data:yield Gn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(bt(o))return{data:null,error:o};throw o}})}listV2(e,n){return Bt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Gn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const My="2.12.1",By={"X-Client-Info":`storage-js/${My}`};var fo=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class Uy{constructor(e,n={},r,o){this.shouldThrowOnError=!1;const s=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},By),n),this.fetch=Kp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return fo(this,void 0,void 0,function*(){try{return{data:yield ca(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(bt(e))return{data:null,error:e};throw e}})}getBucket(e){return fo(this,void 0,void 0,function*(){try{return{data:yield ca(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return fo(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return fo(this,void 0,void 0,function*(){try{return{data:yield _u(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return fo(this,void 0,void 0,function*(){try{return{data:yield Gn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return fo(this,void 0,void 0,function*(){try{return{data:yield Jp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}}class zy extends Uy{constructor(e,n={},r,o){super(e,n,r,o)}from(e){return new Iy(this.url,this.headers,e,this.fetch)}}const Fy="2.57.4";let fs="";typeof Deno<"u"?fs="deno":typeof document<"u"?fs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fs="react-native":fs="node";const Wy={"X-Client-Info":`supabase-js-${fs}/${Fy}`},Vy={headers:Wy},qy={schema:"public"},Gy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Hy={};var Ky=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const Jy=t=>{let e;return t?e=t:typeof fetch>"u"?e=Lp:e=fetch,(...n)=>e(...n)},Yy=()=>typeof Headers>"u"?Pp:Headers,Qy=(t,e,n)=>{const r=Jy(n),o=Yy();return(s,i)=>Ky(void 0,void 0,void 0,function*(){var l;const u=(l=yield e())!==null&&l!==void 0?l:t;let c=new o(i==null?void 0:i.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),r(s,Object.assign(Object.assign({},i),{headers:c}))})};var Xy=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};function Zy(t){return t.endsWith("/")?t:t+"/"}function ev(t,e){var n,r;const{db:o,auth:s,realtime:i,global:l}=t,{db:u,auth:c,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},u),o),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Xy(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function tv(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Zy(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Yp="2.71.1",yo=30*1e3,ku=3,pl=ku*yo,nv="http://localhost:9999",rv="supabase.auth.token",ov={"X-Client-Info":`gotrue-js/${Yp}`},Eu="X-Supabase-Api-Version",Qp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},sv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,iv=10*60*1e3;class Tc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function we(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class av extends Tc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function lv(t){return we(t)&&t.name==="AuthApiError"}class Xp extends Tc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class zr extends Tc{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}}class br extends zr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uv(t){return we(t)&&t.name==="AuthSessionMissingError"}class bi extends zr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class wi extends zr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Si extends zr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function cv(t){return we(t)&&t.name==="AuthImplicitGrantRedirectError"}class Jd extends zr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ju extends zr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ml(t){return we(t)&&t.name==="AuthRetryableFetchError"}class Yd extends zr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Cu extends zr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const da="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qd=` 	
\r=`.split(""),dv=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Qd.length;e+=1)t[Qd[e].charCodeAt(0)]=-2;for(let e=0;e<da.length;e+=1)t[da[e].charCodeAt(0)]=e;return t})();function Xd(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(da[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(da[r]),e.queuedBits-=6}}function Zp(t,e,n){const r=dv[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Zd(t){const e=[],n=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},s=i=>{pv(i,r,n)};for(let i=0;i<t.length;i+=1)Zp(t.charCodeAt(i),o,s);return e.join("")}function fv(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function hv(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}fv(r,e)}}function pv(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function mv(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)Zp(t.charCodeAt(o),n,r);return new Uint8Array(e)}function gv(t){const e=[];return hv(t,n=>e.push(n)),new Uint8Array(e)}function yv(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};return t.forEach(o=>Xd(o,n,r)),Xd(null,n,r),e.join("")}function vv(t){return Math.round(Date.now()/1e3)+t}function xv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Tn=()=>typeof window<"u"&&typeof document<"u",Wr={tested:!1,writable:!1},em=()=>{if(!Tn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wr.tested)return Wr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Wr.tested=!0,Wr.writable=!0}catch{Wr.tested=!0,Wr.writable=!1}return Wr.writable};function bv(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,s)=>{e[s]=o})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}const tm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Qs(async()=>{const{default:r}=await Promise.resolve().then(()=>Ko);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},wv=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",vo=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Vr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},vr=async(t,e)=>{await t.removeItem(e)};class Oa{constructor(){this.promise=new Oa.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Oa.promiseConstructor=Promise;function gl(t){const e=t.split(".");if(e.length!==3)throw new Cu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!sv.test(e[r]))throw new Cu("JWT not in base64url format");return{header:JSON.parse(Zd(e[0])),payload:JSON.parse(Zd(e[1])),signature:mv(e[2]),raw:{header:e[0],payload:e[1]}}}async function Sv(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function _v(t,e){return new Promise((r,o)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await t(s);if(!e(s,null,i)){r(i);return}}catch(i){if(!e(s,i)){o(i);return}}})()})}function kv(t){return("0"+t.toString(16)).substr(-2)}function Ev(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let s=0;s<56;s++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,kv).join("")}async function jv(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(s=>String.fromCharCode(s)).join("")}async function Cv(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await jv(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ho(t,e,n=!1){const r=Ev();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await vo(t,`${e}-code-verifier`,o);const s=await Cv(r);return[s,r===s?"plain":"s256"]}const Rv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Nv(t){const e=t.headers.get(Eu);if(!e||!e.match(Rv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Dv(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Tv(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Av=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function po(t){if(!Av.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yl(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ef(t){return JSON.parse(JSON.stringify(t))}var Ov=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Hr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Lv=[502,503,504];async function tf(t){var e;if(!wv(t))throw new ju(Hr(t),0);if(Lv.includes(t.status))throw new ju(Hr(t),t.status);let n;try{n=await t.json()}catch(s){throw new Xp(Hr(s),s)}let r;const o=Nv(t);if(o&&o.getTime()>=Qp["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Yd(Hr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new br}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0))throw new Yd(Hr(n),t.status,n.weak_password.reasons);throw new av(Hr(n),t.status||500,r)}const Pv=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function je(t,e,n,r){var o;const s=Object.assign({},r==null?void 0:r.headers);s[Eu]||(s[Eu]=Qp["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const i=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",u=await $v(t,e,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function $v(t,e,n,r,o,s){const i=Pv(e,r,o,s);let l;try{l=await t(n,Object.assign({},i))}catch(u){throw console.error(u),new ju(Hr(u),0)}if(l.ok||await tf(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(u){await tf(u)}}function er(t){var e;let n=null;Uv(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=vv(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function nf(t){const e=er(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Er(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Iv(t){return{data:t,error:null}}function Mv(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s}=t,i=Ov(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s},u=Object.assign({},i);return{data:{properties:l,user:u},error:null}}function Bv(t){return t}function Uv(t){return t.access_token&&t.refresh_token&&t.expires_in}const vl=["global","local","others"];var zv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};class Fv{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=tm(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=vl[0]){if(vl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vl.join(", ")}`);try{return await je(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await je(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Er})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=zv(e,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Mv,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(we(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await je(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Er})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,o,s,i,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:Bv});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,g=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return g.length>0&&(g.forEach(x=>{const b=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(x.split(";")[1].split("=")[1]);c[`${_}Page`]=b}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(we(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){po(e);try{return await je(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Er})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){po(e);try{return await je(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Er})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){po(e);try{return await je(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Er})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){po(e.userId);try{const{data:n,error:r}=await je(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(we(n))return{data:null,error:n};throw n}}async _deleteFactor(e){po(e.userId),po(e.id);try{return{data:await je(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}}function rf(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Wv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const mo={debug:!!(globalThis&&em()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Vv extends nm{}async function qv(t,e,n){mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),mo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Vv(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(mo.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Wv();const Gv={url:nv,storageKey:rv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ov,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function of(t,e,n){return await n()}const go={};class Vs{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vs.nextInstanceID,Vs.nextInstanceID+=1,this.instanceID>0&&Tn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Gv),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Fv({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=tm(o.fetch),this.lock=o.lock||of,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Tn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=qv:this.lock=of,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:em()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rf(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=rf(this.memoryStorage)),Tn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=go[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){go[this.storageKey]=Object.assign(Object.assign({},go[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=go[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){go[this.storageKey]=Object.assign(Object.assign({},go[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Yp}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=bv(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Tn()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),cv(s)){const u=(e=s.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return we(n)?{error:n}:{error:new Xp("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,o;try{const s=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:er}),{data:i,error:l}=s;if(l||!i)return{data:{user:null,session:null},error:l};const u=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(we(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,o;try{let s;if("email"in e){const{email:d,password:h,options:f}=e;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await ho(this.storage,this.storageKey)),s=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:x},xform:er})}else if("phone"in e){const{phone:d,password:h,options:f}=e;s=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(o=f==null?void 0:f.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:er})}else throw new wi("You must provide either an email or phone number and a password");const{data:i,error:l}=s;if(l||!i)return{data:{user:null,session:null},error:l};const u=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(we(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:i,options:l}=e;n=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:nf})}else if("phone"in e){const{phone:s,password:i,options:l}=e;n=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:nf})}else throw new wi("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new bi}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(we(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,o,s,i,l,u,c,d,h,f,g;let x,b;if("message"in e)x=e.message,b=e.signature;else{const{chain:_,wallet:p,statement:m,options:y}=e;let w;if(Tn())if(typeof p=="object")w=p;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))w=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=p}const E=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const N=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),m?{statement:m}:null));let D;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")D=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)D=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)x=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),b=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${E.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(o=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=y==null?void 0:y.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const N=await w.signMessage(new TextEncoder().encode(x),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=N}}try{const{data:_,error:p}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:yv(b)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:er});if(p)throw p;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new bi}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:p})}catch(_){if(we(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const n=await Vr(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/");try{const{data:s,error:i}=await je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:er});if(await vr(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new bi}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:i})}catch(s){if(we(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:o,access_token:s,nonce:i}=e,l=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:er}),{data:u,error:c}=l;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new bi}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(n){if(we(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,o,s,i;try{if("email"in e){const{email:l,options:u}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await ho(this.storage,this.storageKey));const{error:h}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:u}=e,{data:c,error:d}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=u==null?void 0:u.data)!==null&&o!==void 0?o:{},create_user:(s=u==null?void 0:u.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(i=u==null?void 0:u.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new wi("You must provide either an email or phone number.")}catch(l){if(we(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let o,s;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:er});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const u=i.session,c=i.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(o){if(we(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,r,o;try{let s=null,i=null;return this.flowType==="pkce"&&([s,i]=await ho(this.storage,this.storageKey)),await je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:Iv})}catch(s){if(we(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new br;const{error:o}=await je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(we(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:s}=e,{error:i}=await je(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:o,options:s}=e,{data:i,error:l}=await je(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new wi("You must provide either an email or phone number and a type")}catch(n){if(we(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Vr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<pl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const i=await Vr(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=yl()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,c,d)=>(!i&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:e},error:null}}const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Er}):await this._useSession(async n=>{var r,o,s;const{data:i,error:l}=n;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new br}:await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:Er})})}catch(n){if(we(n))return uv(n)&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:o,error:s}=r;if(s)throw s;if(!o.session)throw new br;const i=o.session;let l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=await ho(this.storage,this.storageKey));const{data:c,error:d}=await je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:i.access_token,xform:Er});if(d)throw d;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new br;const n=Date.now()/1e3;let r=n,o=!0,s=null;const{payload:i}=gl(e.access_token);if(i.exp&&(r=i.exp,o=r<=n),o){const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:u}=await this._getUser(e.access_token);if(u)throw u;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(we(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:i,error:l}=n;if(l)throw l;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new br;const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(we(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Tn())throw new Si("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Si(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Jd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Si("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Jd("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:s,refresh_token:i,expires_in:l,expires_at:u,token_type:c}=e;if(!s||!l||!i||!c)throw new Si("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;u&&(f=parseInt(u));const g=f-d;g*1e3<=yo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const x=f-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,d);const{data:b,error:_}=await this._getUser(s);if(_)throw _;const p={provider_token:r,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:i,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(r){if(we(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Vr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:s}=n;if(s)return{error:s};const i=(r=o.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(lv(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=xv(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,o;try{const{data:{session:s},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await ho(this.storage,this.storageKey,!0));try{return await je(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(we(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:o}=await this._useSession(async s=>{var i,l,u,c,d;const{data:h,error:f}=s;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await je(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return Tn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(we(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,o;const{data:s,error:i}=n;if(i)throw i;return await je(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await _v(async o=>(o>0&&await Sv(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:er})),(o,s)=>{const i=200*Math.pow(2,o);return s&&ml(s)&&Date.now()+i-r<yo})}catch(r){if(this._debug(n,"error",r),we(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Tn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await Vr(this.storage,this.storageKey);if(o&&this.userStorage){let i=await Vr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:o.user},await vo(this.userStorage,this.storageKey+"-user",i)),o.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:yl()}else if(o&&!o.user&&!o.user){const i=await Vr(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(o.user=i.user,await vr(this.storage,this.storageKey+"-user"),await vo(this.storage,this.storageKey,o)):o.user=yl()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const s=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<pl;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${pl}s`),s){if(this.autoRefreshToken&&o.refresh_token){const{error:i}=await this._callRefreshToken(o.refresh_token);i&&(console.error(i),ml(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(o.access_token);!l&&(i!=null&&i.user)?(o.user=i.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new br;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Oa;const{data:s,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new br;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(o,"error",s),we(s)){const i={session:null,error:s};return ml(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(u){s.push(u)}});if(await Promise.all(i),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await vo(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const s=ef(o);await vo(this.storage,this.storageKey,s)}else{const o=ef(n);await vo(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await vr(this.storage,this.storageKey),await vr(this.storage,this.storageKey+"-code-verifier"),await vr(this.storage,this.storageKey+"-user"),this.userStorage&&await vr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),yo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/yo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${yo}ms, refresh threshold is ${ku} ticks`),o<=ku&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof nm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,i]=await ho(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);o.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;return s?{data:null,error:s}:await je(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,o;const{data:s,error:i}=n;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:c}=await je(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((o=u==null?void 0:u.totp)===null||o===void 0)&&o.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;if(s)return{data:null,error:s};const{data:i,error:l}=await je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(n){if(we(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;return s?{data:null,error:s}:await je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(we(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],o=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),s=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:o,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=gl(o.access_token);let l=null;i.aal&&(l=i.aal);let u=l;((r=(n=o.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+iv>o)return r;const{data:s,error:i}=await je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,r=s.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:x}=await this.getSession();if(x||!g.session)return{data:null,error:x};r=g.session.access_token}const{header:o,payload:s,signature:i,raw:{header:l,payload:u}}=gl(r);n!=null&&n.allowExpired||Dv(s.exp);const c=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:o,signature:i},error:null}}const d=Tv(o.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,gv(`${l}.${u}`)))throw new Cu("Invalid JWT signature");return{data:{claims:s,header:o,signature:i},error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}}Vs.nextInstanceID=0;const Hv=Vs;class Kv extends Hv{constructor(e){super(e)}}var Jv=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class Yv{constructor(e,n,r){var o,s,i;this.supabaseUrl=e,this.supabaseKey=n;const l=tv(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:qy,realtime:Hy,auth:Object.assign(Object.assign({},Gy),{storageKey:u}),global:Vy},d=ev(r??{},c);this.storageKey=(o=d.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=Qy(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new dy(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new zy(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new W0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Jv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:s,storageKey:i,flowType:l,lock:u,debug:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Kv({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:s,flowType:l,lock:u,debug:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Ry(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Qv=(t,e,n)=>new Yv(t,e,n);function Xv(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Xv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Zv="https://wjylzxsfevdlhqunvfqc.supabase.co",ex="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqeWx6eHNmZXZkbGhxdW52ZnFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2ODMwOTEsImV4cCI6MjA3NDI1OTA5MX0.SuB0gd7-gefwpUHFnKsupDgo8P2VeLuMbdlsU6AMrLw",sf=globalThis,De=sf.__sg_supabase||(sf.__sg_supabase=Qv(Zv,ex,{auth:{persistSession:!0,autoRefreshToken:!0,storageKey:"salesgame-auth"},realtime:{params:{eventsPerSecond:10}}}));function tx(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function qs(){const t="sg_tab_player_id";let e=sessionStorage.getItem(t);return e||(e=tx(),sessionStorage.setItem(t,e)),e}function so(t="Jogador"){const e="sg_tab_player_name";let n=sessionStorage.getItem(e);return n||(n=t,sessionStorage.setItem(e,n)),n}function nx(t){return sessionStorage.setItem("sg_tab_player_name",t??"Jogador"),t}const rx="/dynamic-data-visualization-3d.jpg",ox="/SalesGame_Logo-removebg-preview.png",sx="/Multiplier-Copia.png",ix="/WhatsApp_Image_2025-06-24_at_16.47.00-removebg-preview.png";function ax({onEnter:t}){const[e,n]=k.useState(so("")),r=k.useRef(null);k.useEffect(()=>{var i;(i=r.current)==null||i.focus()},[]);function o(){const i=(e||"").trim();i&&(nx(i),t==null||t(i))}function s(i){i.key==="Enter"&&o()}return a.jsxs("div",{className:"start",children:[a.jsx("img",{className:"startBg",src:rx,alt:""}),a.jsx("div",{className:"startShade"}),a.jsx("div",{className:"startHeader",children:a.jsx("img",{className:"startLogo",src:ox,alt:"Sales GAME"})}),a.jsx("div",{className:"startCenter",children:a.jsxs("div",{className:"startCard",children:[a.jsx("label",{className:"startLabel",htmlFor:"playerName",children:"Nome do Jogador"}),a.jsx("input",{id:"playerName",ref:r,className:"startInput",placeholder:"Digite seu nome",value:e,onChange:i=>n(i.target.value),onKeyDown:s,maxLength:30}),a.jsx("button",{className:"startBtn",onClick:o,children:"Entrar"})]})}),a.jsxs("div",{className:"startFooter",children:[a.jsxs("div",{className:"startLinks",children:[a.jsx("div",{children:"@multiplier.educacao"}),a.jsx("div",{children:"https://multipliereducacao.com.br/"})]}),a.jsx("div",{className:"startBrand",children:a.jsx("img",{className:"startBrandLogo",src:sx,alt:"Multiplier"})})]}),a.jsx("img",{className:"startCoach",src:ix,alt:"",draggable:"false"})]})}async function lx(){const{data:t,error:e}=await De.from("lobbies").select(`
      id,
      name,
      max_players,
      status,
      created_at,
      lobby_players!left(count)
    `).order("created_at",{ascending:!0});if(e)throw e;return(t||[]).map(n=>{var r,o;return{id:n.id,name:n.name,max:n.max_players,status:n.status||"open",players:(((o=(r=n.lobby_players)==null?void 0:r[0])==null?void 0:o.count)??0)|0}})}function ux(t){const e=De.channel("lobbies-list").on("postgres_changes",{event:"*",schema:"public",table:"lobbies"},()=>t==null?void 0:t()).on("postgres_changes",{event:"*",schema:"public",table:"lobby_players"},()=>t==null?void 0:t()).subscribe();return()=>De.removeChannel(e)}async function cx({name:t,hostId:e,max:n=4}){if(!e)throw new Error("hostId obrigatrio em createLobby");const o={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,name:t,host_id:e,max_players:Number(n)||4,status:"open",created_at:new Date().toISOString()},{data:s,error:i}=await De.from("lobbies").insert(o).select("id").single();if(i)throw i;return s.id}async function Ru({lobbyId:t,playerId:e,playerName:n,ready:r=!1}){const{data:o,error:s}=await De.from("lobbies").select("id, max_players, status, host_id").eq("id",t).single();if(s)throw s;if(o.status!=="open")throw new Error("Sala fechada.");const{count:i,error:l}=await De.from("lobby_players").select("lobby_id",{count:"exact",head:!0}).eq("lobby_id",t);if(l)throw l;if((i||0)>=o.max_players)throw new Error("Sala cheia.");try{window.__MY_UID=e}catch{}const{error:u}=await De.from("lobby_players").upsert({lobby_id:t,player_id:e,player_name:n,ready:!!r,joined_at:new Date().toISOString()},{onConflict:"lobby_id,player_id"});if(u)throw u;o.host_id||await De.from("lobbies").update({host_id:e}).eq("id",t)}async function af({lobbyId:t,playerId:e}){var l;const{data:n,error:r}=await De.from("lobbies").select("id, host_id").eq("id",t).single();if(r)throw r;const{error:o}=await De.from("lobby_players").delete().match({lobby_id:t,player_id:e});if(o)throw o;const{data:s,error:i}=await De.from("lobby_players").select("player_id, joined_at").eq("lobby_id",t).order("joined_at",{ascending:!0});if(i)throw i;if(!s||s.length===0){await De.from("lobbies").delete().eq("id",t);return}if((n==null?void 0:n.host_id)===e){const u=(l=s[0])==null?void 0:l.player_id;u&&await De.from("lobbies").update({host_id:u}).eq("id",t)}}async function lf(t){const{data:e,error:n}=await De.from("lobby_players").select("player_id, player_name, ready, joined_at").eq("lobby_id",t).order("joined_at",{ascending:!0});if(n)throw n;return e||[]}async function dx({lobbyId:t,playerId:e,ready:n}){const{error:r}=await De.from("lobby_players").update({ready:n}).match({lobby_id:t,player_id:e});if(r)throw r}async function fx(t,e,n){return dx({lobbyId:t,playerId:e,ready:n})}async function hx({lobbyId:t,playerId:e,playerName:n}){const{error:r}=await De.from("lobby_players").update({player_name:n}).match({lobby_id:t,player_id:e});if(r)throw r}async function uf(t,e){const{error:n}=await De.from("lobbies").update({status:e}).eq("id",t);if(n)throw n}function px(t,e){let n=0;const r=()=>{n&&cancelAnimationFrame(n),n=requestAnimationFrame(()=>e==null?void 0:e())},o=De.channel(`lobby-${t}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},s=>{console.debug("[rt] lobby_players:INSERT",s.new),r()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},s=>{console.debug("[rt] lobby_players:UPDATE",s.new),r()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},s=>{console.debug("[rt] lobby_players:DELETE",s.old),r()}).on("postgres_changes",{event:"*",schema:"public",table:"lobbies",filter:`id=eq.${t}`},s=>{console.debug("[rt] lobbies:*",s.new||s.old),r()}).subscribe();return()=>{n&&cancelAnimationFrame(n),De.removeChannel(o)}}async function mx(t){const{data:e,error:n}=await De.from("lobbies").select("id,name,status,max_players,host_id,created_at").eq("id",t).single();if(n)throw n;return e}async function gx({lobbyId:t}){var o;const{data:e}=await De.from("lobby_players").select("player_id, player_name, ready").eq("lobby_id",t),{data:n,error:r}=await De.from("matches").insert({lobby_id:t,host_id:((o=e==null?void 0:e[0])==null?void 0:o.player_id)||null,state:{players:e},created_at:new Date().toISOString()}).select("id").single();if(r)throw r;return n}async function yx(t){const{data:e,error:n}=await De.from("matches").select("id, lobby_id, created_at").eq("lobby_id",t).order("created_at",{ascending:!1}).limit(1);if(n)throw n;return(e==null?void 0:e[0])||null}async function xl({roomCode:t,playerId:e}){if(!t||!e){console.log("[leaveRoom] Parmetros invlidos:",{roomCode:t,playerId:e});return}try{console.log(`[leaveRoom] Tentando remover jogador ${e} da sala ${t}`);const{data:n,error:r}=await De.from("lobbies").select("id, name, host_id").eq("id",t).single();if(r){console.warn("[leaveRoom] Erro ao buscar lobby:",r);return}if(!n){console.log(`[leaveRoom] Lobby ${t} no encontrado`);return}console.log("[leaveRoom] Lobby encontrado:",n);const{error:o}=await De.from("lobby_players").delete().match({lobby_id:t,player_id:e});o?console.warn("[leaveRoom] Erro ao remover jogador:",o):console.log(`[leaveRoom] Jogador ${e} removido do lobby ${t}`);const{data:s,error:i}=await De.from("lobby_players").select("player_id").eq("lobby_id",t);if(i){console.warn("[leaveRoom] Erro ao contar jogadores restantes:",i);return}if(!s||s.length===0){const{error:l}=await De.from("lobbies").delete().eq("id",t);l?console.warn("[leaveRoom] Erro ao deletar lobby vazio:",l):console.log(`[leaveRoom] Lobby ${t} deletado com sucesso (sem jogadores)`)}else if(console.log(`[leaveRoom] Jogador ${e} saiu do lobby ${t}. Restam ${s.length} jogadores.`),n.host_id===e&&s.length>0){const l=s[0].player_id,{error:u}=await De.from("lobbies").update({host_id:l}).eq("id",t);u?console.warn("[leaveRoom] Erro ao transferir host:",u):console.log(`[leaveRoom] Host transferido para ${l}`)}}catch(n){console.error("[leaveRoom] Erro inesperado:",n)}}function vx({onEnterRoom:t}){const[e,n]=k.useState([]),[r,o]=k.useState(!1);async function s(){o(!0);try{const c=await lx();n(c)}finally{o(!1)}}k.useEffect(()=>(s(),ux(()=>s())),[]);async function i(){const c=so("Jogador"),d=`Sala de ${c}`,h=prompt("Nome do lobby:",d)||d,f=qs();try{const g=await cx({name:h,hostId:f,max:4});await Ru({lobbyId:g,playerId:f,playerName:c,ready:!1}),t==null||t(g)}catch(g){alert(g.message||"No foi possvel criar o lobby."),await s()}}async function l(c){try{const d=so("Jogador"),h=qs();await Ru({lobbyId:c,playerId:h,playerName:d,ready:!1}),t==null||t(c)}catch(d){alert(d.message||"No foi possvel entrar no lobby.")}}const u={page:{minHeight:"100vh",background:"#0f0f12",color:"#e9ecf1",padding:"32px 16px",display:"flex",justifyContent:"center"},container:{width:"100%",maxWidth:980},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:16,marginBottom:16,flexWrap:"wrap"},title:{fontSize:28,fontWeight:800,color:"#fff"},actions:{display:"flex",gap:10},btn:{padding:"12px 16px",border:0,borderRadius:12,fontWeight:800,cursor:"pointer"},btnPrimary:{background:"#4f46e5",color:"#fff",boxShadow:"0 8px 24px rgba(79,70,229,.25)"},btnSecondary:{background:"#20222a",color:"#fff",border:"1px solid #2b2e38"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:14},card:{background:"linear-gradient(180deg, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0.00) 100%)",border:"1px solid rgba(255,255,255,.08)",borderRadius:16,padding:16,display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 20px rgba(0,0,0,.25)"},cardHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},lobbyName:{fontSize:18,fontWeight:800,color:"#fff",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},meta:{fontSize:13,color:"#b8c0cc"},joinBtn:{padding:"10px 14px",borderRadius:10,border:0,background:"#7c3aed",color:"#fff",fontWeight:800,cursor:"pointer",boxShadow:"0 10px 20px rgba(124,58,237,.25)"},disabled:{opacity:.6,cursor:"not-allowed",filter:"grayscale(.3)"},empty:{marginTop:24,padding:18,borderRadius:12,border:"1px dashed rgba(255,255,255,.12)",color:"#c7cfdb",textAlign:"center"}};return a.jsx("div",{style:u.page,children:a.jsxs("div",{style:u.container,children:[a.jsxs("div",{style:u.headerRow,children:[a.jsx("h2",{style:u.title,children:"SalesGame  Lobbies"}),a.jsxs("div",{style:u.actions,children:[a.jsx("button",{style:{...u.btn,...u.btnPrimary},onClick:i,children:"Criar Lobby"}),a.jsx("button",{style:{...u.btn,...u.btnSecondary},onClick:s,disabled:r,children:r?"Atualizando":"Atualizar"})]})]}),e.length===0&&!r?a.jsxs("div",{style:u.empty,children:["Nenhuma sala criada ainda. Clique em ",a.jsx("b",{children:"Criar Lobby"})," para comear."]}):a.jsx("div",{style:u.grid,children:e.map(c=>{const d=(c.players??0)>=(c.max??4),h=(c.status??"open")==="open",f=d||!h;return a.jsxs("div",{style:u.card,children:[a.jsxs("div",{style:u.cardHeader,children:[a.jsx("div",{style:u.lobbyName,title:c.name,children:c.name}),a.jsxs("span",{style:u.meta,children:[c.players??0,"/",c.max??4]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("span",{style:u.meta,children:["status: ",c.status??"open"]}),a.jsx("button",{style:{...u.joinBtn,...f?u.disabled:{}},disabled:f,onClick:()=>l(c.id),title:f?d?"Sala cheia":"Sala no est aberta":"Entrar na sala",children:"Entrar"})]})]},c.id)})})]})})}function xx({lobbyId:t,onBack:e,onStartGame:n}){const r=qs(),o=so("Jogador"),[s,i]=k.useState(null),[l,u]=k.useState([]),[c,d]=k.useState(!0),[h,f]=k.useState(!1),g=k.useRef(!1),x=k.useRef(!0),b=k.useRef(!1),_=k.useRef(!1),p=k.useMemo(()=>(s==null?void 0:s.host_id)===r,[s,r]),m=k.useMemo(()=>l.find(v=>v.player_id===r),[l,r]),y=k.useMemo(()=>l.filter(v=>v.ready).length,[l]),w=p&&(s==null?void 0:s.status)==="open"&&l.length>=1&&y===l.length;console.log("[PlayersLobby] Debug:",{players:l.length,readyCount:y,lobbyStatus:s==null?void 0:s.status,amHost:p,canStart:w,meId:r,meName:o});async function E(v){if(_.current)return;const T=await yx(t);if(T!=null&&T.id){_.current=!0;const O=(v||[]).map(($,U)=>({id:$.player_id,name:$.player_name,index:U}));n==null||n({lobbyId:t,matchId:T==null?void 0:T.id,players:O,me:{id:r,name:o}})}}async function N(){x.current&&d(!0);try{console.log("[PlayersLobby] refreshAll - buscando lobby:",t);const[v,T]=await Promise.all([mx(t),lf(t)]);console.log("[PlayersLobby] refreshAll - lobby:",v,"players:",T),i(v),u(T);const O=T.find($=>$.player_id===r);if(console.log("[PlayersLobby] refreshAll - mine:",O,"meId:",r),!O&&!g.current&&(v==null?void 0:v.status)==="open"){console.log("[PlayersLobby] refreshAll - entrando na sala"),g.current=!0;try{await Ru({lobbyId:t,playerId:r,playerName:o,ready:!1}),console.log("[PlayersLobby] refreshAll - entrada na sala bem-sucedida");const $=await lf(t);console.log("[PlayersLobby] refreshAll - jogadores aps entrada:",$),u($)}catch($){console.error("[PlayersLobby] refreshAll - erro ao entrar na sala:",$)}}if(O&&!b.current&&o&&O.player_name!==o){console.log("[PlayersLobby] refreshAll - sincronizando nome"),b.current=!0;try{await hx({lobbyId:t,playerId:r,playerName:o})}catch{}}await E(T)}catch(v){console.error("[PlayersLobby] refreshAll - erro:",v)}finally{x.current&&(x.current=!1,d(!1))}}k.useEffect(()=>{const v=()=>{af({lobbyId:t,playerId:r}).catch(()=>{})},T=()=>v();return window.addEventListener("pagehide",T),window.addEventListener("beforeunload",T),()=>{window.removeEventListener("pagehide",T),window.removeEventListener("beforeunload",T)}},[t,r]),k.useEffect(()=>(g.current=!1,x.current=!0,b.current=!1,_.current=!1,N(),px(t,()=>N())),[t]);async function D(v){if(!m)return;f(!0);const T=m.ready;u(O=>O.map($=>$.player_id===r?{...$,ready:v}:$));try{await fx(t,r,v)}catch(O){u($=>$.map(U=>U.player_id===r?{...U,ready:T}:U)),console.error("setReadyUI failed",O)}finally{f(!1)}}async function S(){try{await af({lobbyId:t,playerId:r})}finally{e==null||e()}}async function A(){if(!w)return;const v=s==null?void 0:s.status;await uf(t,"locked");try{const T=await gx({lobbyId:t});_.current=!0;const O=l.map(($,U)=>({id:$.player_id,name:$.player_name,index:U}));n==null||n({lobbyId:t,matchId:T==null?void 0:T.id,players:O,me:{id:r,name:o}})}catch(T){console.error("startMatch failed",T),await uf(t,v||"open")}}return a.jsx("div",{style:$e.page,children:a.jsxs("div",{style:$e.container,children:[a.jsxs("div",{style:$e.top,children:[a.jsx("button",{style:$e.backBtn,onClick:S,children:" Voltar"}),a.jsxs("h2",{style:$e.title,children:["SalesGame  ",(s==null?void 0:s.name)||"..."]})]}),a.jsxs("div",{style:$e.table,children:[a.jsxs("div",{style:$e.thead,children:[a.jsx("div",{style:$e.colPlayer,children:"Jogador"}),a.jsx("div",{style:$e.colReady,children:"Pronto?"})]}),c?a.jsx("div",{style:$e.loading,children:"Carregando..."}):l.map(v=>a.jsxs("div",{style:$e.row,children:[a.jsxs("div",{style:$e.colPlayer,children:[a.jsx("span",{style:$e.avatar,children:(v.player_name||"?").slice(0,2).toLowerCase()}),a.jsx("span",{children:v.player_name||"Annimo"}),(s==null?void 0:s.host_id)===v.player_id&&a.jsx("span",{style:$e.badgeHost,children:"Host"}),v.player_id===r&&a.jsx("span",{style:$e.badgeYou,children:"Voc"})]}),a.jsx("div",{style:$e.colReady,children:v.player_id===r?a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{style:{...$e.btn,...m!=null&&m.ready?$e.btnGhost:$e.btnDark},onClick:()=>D(!1),disabled:h||!(m!=null&&m.ready),children:"No pronto"}),a.jsxs("button",{style:{...$e.btn,...m!=null&&m.ready?$e.btnPrimary:$e.btnPurple},onClick:()=>D(!0),disabled:h||!!(m!=null&&m.ready),children:[" ",m!=null&&m.ready?"Pronto":"Ficar pronto"]})]}):a.jsx("span",{style:v.ready?$e.pillReady:$e.pillWait,children:v.ready?"Pronto":"Aguardando"})})]},v.player_id))]}),a.jsxs("div",{style:$e.footer,children:[a.jsxs("div",{style:$e.statusWrap,children:[a.jsx("span",{style:{...$e.dot,background:(s==null?void 0:s.status)==="open"?"#22c55e":"#f59e0b"}}),a.jsxs("span",{children:["status: ",(s==null?void 0:s.status)||"..."]}),a.jsxs("span",{style:{marginLeft:12},children:["Prontos: ",y,"/",l.length]})]}),a.jsxs("div",{style:{display:"flex",gap:12},children:[a.jsx("button",{style:{...$e.btn,...w?$e.btnPrimary:$e.disabled},onClick:A,disabled:!w,children:"Iniciar partida"}),a.jsx("button",{style:{...$e.btn,...$e.btnDark},onClick:S,children:"Sair da sala"})]})]})]})})}const $e={page:{minHeight:"100vh",background:"#0f0f12",color:"#e9ecf1",padding:"24px 16px",display:"flex",justifyContent:"center"},container:{width:"100%",maxWidth:980},top:{display:"flex",alignItems:"center",gap:12,marginBottom:16},backBtn:{padding:"10px 14px",background:"#20222a",border:"1px solid #2b2e38",borderRadius:12,color:"#fff",cursor:"pointer"},title:{margin:0,fontSize:28,fontWeight:800},table:{background:"rgba(255,255,255,.02)",border:"1px solid rgba(255,255,255,.08)",borderRadius:16,overflow:"hidden"},thead:{display:"grid",gridTemplateColumns:"1fr 220px",padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,.08)",color:"#c7cfdb"},row:{display:"grid",gridTemplateColumns:"1fr 220px",padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,.06)"},colPlayer:{display:"flex",alignItems:"center",gap:10,minWidth:0},colReady:{display:"flex",alignItems:"center",justifyContent:"flex-end"},avatar:{width:28,height:28,borderRadius:999,background:"#1f2430",display:"grid",placeItems:"center",color:"#c7cfdb",fontSize:12,textTransform:"lowercase"},badgeHost:{marginLeft:8,fontSize:12,background:"#fde68a",color:"#111827",padding:"2px 8px",borderRadius:999,fontWeight:800},badgeYou:{marginLeft:8,fontSize:12,background:"#bfdbfe",color:"#111827",padding:"2px 8px",borderRadius:999,fontWeight:800},loading:{padding:16,color:"#c7cfdb"},pillReady:{background:"rgba(34,197,94,.15)",color:"#22c55e",padding:"6px 10px",borderRadius:999,fontWeight:700},pillWait:{background:"rgba(245,158,11,.14)",color:"#f59e0b",padding:"6px 10px",borderRadius:999,fontWeight:700},footer:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:16},statusWrap:{display:"flex",alignItems:"center",gap:6,color:"#c7cfdb"},dot:{width:8,height:8,borderRadius:"50%"},btn:{padding:"12px 16px",border:0,borderRadius:12,fontWeight:800,cursor:"pointer"},btnPrimary:{background:"#4f46e5",color:"#fff",boxShadow:"0 8px 24px rgba(79,70,229,.25)"},btnPurple:{background:"#7c3aed",color:"#fff"},btnDark:{background:"#20222a",color:"#fff",border:"1px solid #2b2e38"},btnGhost:{background:"transparent",color:"#e9ecf1",border:"1px solid rgba(255,255,255,.15)"},disabled:{opacity:.5,cursor:"not-allowed",filter:"grayscale(.25)"}},bx="/board.jpg",Nu=800,Du=700,La=[{nx:.9278494291885221,ny:.9008218764923216},{nx:.8188460351743289,ny:.9120818357755046},{nx:.7145819191607529,ny:.920124663834921},{nx:.6016291268127121,ny:.920124663834921},{nx:.49104597346497997,ny:.9233417950586875},{nx:.37888306078370876,ny:.920124663834921},{nx:.24618327676643012,ny:.9152989669992712},{nx:.21695772909595804,ny:.7994822429436751},{nx:.1853625424251774,ny:.7270967904089275},{nx:.1340203640851589,ny:.6354085505315806},{nx:.12851782363977485,ny:.5145797598627787},{nx:.12664165103189493,ny:.37392795883361923},{nx:.05347091932457786,ny:.30017152658662094},{nx:.051594746716697934,ny:.20240137221269297},{nx:.14540337711069418,ny:.12006861063464837},{nx:.23921200750469043,ny:.11663807890222985},{nx:.3771106941838649,ny:.11663807890222985},{nx:.5037523452157598,ny:.12006861063464837},{nx:.5975609756097561,ny:.1320754716981132},{nx:.5984990619136961,ny:.24356775300171526},{nx:.5065666041275797,ny:.2692967409948542},{nx:.398686679174484,ny:.27101200686106347},{nx:.28893058161350843,ny:.27101200686106347},{nx:.2373358348968105,ny:.3687821612349914},{nx:.23921200750469043,ny:.48027444253859347},{nx:.24202626641651032,ny:.5660377358490566},{nx:.26454033771106944,ny:.6895368782161235},{nx:.3330206378986867,ny:.6946826758147513},{nx:.35647279549718575,ny:.5831903945111492},{nx:.35647279549718575,ny:.4716981132075472},{nx:.3818011257035647,ny:.37735849056603776},{nx:.5225140712945591,ny:.3653516295025729},{nx:.6238273921200751,ny:.3687821612349914},{nx:.7223264540337712,ny:.40308747855917665},{nx:.6613508442776735,ny:.5197255574614065},{nx:.5300187617260788,ny:.5025728987993139},{nx:.4427767354596623,ny:.5694682675814752},{nx:.4896810506566604,ny:.6861063464837049},{nx:.6163227016885553,ny:.6861063464837049},{nx:.724202626641651,ny:.6861063464837049},{nx:.8273921200750469,ny:.660377358490566},{nx:.8395872420262664,ny:.5368782161234992},{nx:.8395872420262664,ny:.4339622641509434},{nx:.8283302063789869,ny:.313893653516295},{nx:.7176360225140713,ny:.30017152658662094},{nx:.6876172607879925,ny:.22298456260720412},{nx:.698874296435272,ny:.1457975986277873},{nx:.8020637898686679,ny:.11663807890222985},{nx:.8958724202626641,ny:.11663807890222985},{nx:.9446529080675422,ny:.21783876500857632},{nx:.9446529080675422,ny:.3293310463121784},{nx:.9380863039399625,ny:.45797598627787306},{nx:.9409005628517824,ny:.5711835334476844},{nx:.950281425891182,ny:.6723842195540308},{nx:.9540337711069419,ny:.7804459691252144}],Es=La.length;function rm(t,e,n){return{x:t.nx*e,y:t.ny*n}}La.map(t=>[t.nx*Nu,t.ny*Du]);function wx({visible:t=!0,boardWidth:e,boardHeight:n}){return t?a.jsx("div",{className:"markersLayer",children:La.map((r,o)=>{const{x:s,y:i}=rm(r,e,n);return a.jsx("div",{className:"marker",style:{left:s,top:i},title:`Casa ${o+1}`,children:o+1},o)})}):null}function Sx({boardRef:t,expected:e=55,onFinish:n,initial:r=[]}){const[o,s]=k.useState(r);function i(g){if(!(t!=null&&t.current))return;const x=t.current.getBoundingClientRect(),b=g.clientX-x.left,_=g.clientY-x.top,p=b/x.width,m=_/x.height;s(y=>y.length>=e?y:[...y,{nx:p,ny:m}])}function l(){s(g=>g.slice(0,-1))}function u(){s([])}const c=k.useMemo(()=>JSON.stringify(o,null,2),[o]);async function d(){try{await navigator.clipboard.writeText(c),alert("Copiado para a rea de transferncia!")}catch{alert("No foi possvel copiar. Use o boto Baixar.")}}function h(){const g=new Blob([c],{type:"application/json"}),x=URL.createObjectURL(g),b=document.createElement("a");b.href=x,b.download="track-points-55.json",document.body.appendChild(b),b.click(),b.remove(),URL.revokeObjectURL(x)}function f(){n==null||n(o),console.log(`TRACK_POINTS_NORM (cole em src/data/track.js):
`,c),alert("Finalizado! O JSON foi impresso no console. Copie e cole em src/data/track.js")}return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"recLayer",onClick:i}),a.jsx("div",{className:"recDotsLayer",pointerEvents:"none",children:o.map((g,x)=>a.jsx("div",{className:"recDot",style:{left:`${g.nx*100}%`,top:`${g.ny*100}%`},title:`Casa ${x+1}`,children:x+1},x))}),a.jsxs("div",{className:"recToolbar",children:[a.jsxs("div",{className:"recInfo",children:[a.jsx("b",{children:"Gravando trilha"}),"  clique nas casas na ordem.",a.jsxs("span",{children:["Marcados: ",a.jsx("b",{children:o.length})," / ",e]})]}),a.jsxs("div",{className:"recBtns",children:[a.jsx("button",{onClick:l,disabled:!o.length,children:"Desfazer"}),a.jsx("button",{onClick:u,disabled:!o.length,children:"Limpar"}),a.jsx("button",{onClick:d,disabled:!o.length,children:"Copiar JSON"}),a.jsx("button",{onClick:h,disabled:!o.length,children:"Baixar .json"}),a.jsx("button",{onClick:f,disabled:o.length!==e,children:"Finalizar"})]})]})]})}const _x=40,kx=1.15,Ex=3,jx="0 8px 18px rgba(0,0,0,.35)",cf={cash:18e3,possibAt:0,clientsAt:0,faturamento:770,manutencao:1150,emprestimos:0,vendedoresComuns:0,fieldSales:0,insideSales:0,mixDBens:4e3,erpClientes:0,manualOnboarding:!0,azul:0,amarelo:0,roxo:0,gestores:0};function Cx({players:t,turnIdx:e,recordTrack:n=!1,matchId:r,me:o,onMeHud:s}){const i=k.useRef(null),[l,u]=k.useState({w:Nu,h:Du}),c=(o==null?void 0:o.id)||qs(),d=so("Jogador"),h=k.useMemo(()=>(t==null?void 0:t.find(w=>w.id===c))||null,[t,c]),f=(o==null?void 0:o.name)||(h==null?void 0:h.name)||d,g=(h==null?void 0:h.color)||"#6c5ce7",x=k.useMemo(()=>`sg_stats_v1:${r||"local"}:${c}`,[r,c]),[b,_]=k.useState(()=>{try{const w=sessionStorage.getItem(x);return w?JSON.parse(w):cf}catch{return cf}});k.useEffect(()=>{try{sessionStorage.setItem(x,JSON.stringify(b))}catch{}},[x,b]),k.useEffect(()=>{const w={id:c,name:f,color:g,cash:b.cash,possibAt:b.possibAt,clientsAt:b.clientsAt,matchId:r||"local"};s==null||s(w),document.dispatchEvent(new CustomEvent("sg:meHud",{detail:w}))},[c,f,g,b.cash,b.possibAt,b.clientsAt,r]),k.useLayoutEffect(()=>{if(!i.current)return;const w=i.current,E=new ResizeObserver(N=>{for(const D of N){const S=D.contentRect;u({w:S.width,h:S.height})}});return E.observe(w),()=>E.disconnect()},[]);const p=l.w/Nu,m=l.h/Du,y=Math.min(p,m);return a.jsxs("div",{className:"board",ref:i,children:[a.jsx("img",{src:bx,alt:"Board",className:"boardImg"}),n&&a.jsx(Sx,{boardRef:i,expected:55,onFinish:w=>{console.log("TRACK_POINTS_NORM (cole em src/data/track.js):",JSON.stringify(w,null,2))}}),!n&&a.jsxs(a.Fragment,{children:[a.jsx(wx,{visible:!1,boardWidth:l.w,boardHeight:l.h}),t.map((w,E)=>{const N=E===e,D=(w.pos%Es+Es)%Es,S=La[D],A=rm(S,l.w,l.h),v=E*12*y,O=_x*y*(N?kx:1),$=Math.max(2,Ex*y),U=["","","","","","","",""],Se=U[E%U.length];return a.jsx("div",{className:"token",style:{position:"absolute",left:A.x+v,top:A.y-v,transform:"translate(-50%, -50%)",width:O,height:O,borderRadius:"50%",background:w.color,border:`${$}px solid rgba(255,255,255,.95)`,boxShadow:jx,pointerEvents:"none",display:"grid",placeItems:"center",color:"#000",fontWeight:900,userSelect:"none",zIndex:N?4:3,fontSize:`${Math.max(16,O*.6)}px`},title:`${w.name}  Casa ${D+1}`,"aria-label":`${w.name} est na casa ${D+1}`,children:N?"":Se},w.id)})]})]})}function Rx({totals:t,players:e}){return k.useEffect(()=>{console.groupCollapsed("[HUD] totals"),console.log(t),console.groupEnd()},[t]),a.jsxs("div",{className:"hud",children:[a.jsxs("div",{className:"panel",children:[a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Faturamento:"})," ",a.jsxs("span",{className:"pos",children:["$ ",t.faturamento]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Manuteno:"})," ",a.jsxs("span",{className:"neg",children:["$ ",t.manutencao]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Emprstimos:"})," ",a.jsxs("span",{children:["$ ",t.emprestimos]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Vendedores Comuns:"})," ",a.jsx("span",{children:t.vendedoresComuns})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Field Sales:"})," ",a.jsx("span",{children:t.fieldSales})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Inside Sales:"})," ",a.jsx("span",{children:t.insideSales})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Mix Produtos:"})," ",a.jsx("span",{children:t.mixProdutos})," ",a.jsx("b",{children:" Bens:"})," ",a.jsxs("span",{children:["$ ",t.bens]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"ERP/Sistemas:"})," ",a.jsx("span",{children:t.erpSistemas})," ",a.jsx("b",{children:" Clientes:"})," ",a.jsx("span",{children:t.clientes})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Manual Onboarding:"})," "]}),a.jsxs("div",{children:[a.jsx("b",{children:"Azul:"})," ",a.jsx("span",{children:t.az||0})," ",a.jsx("b",{children:" Amarelo: "}),a.jsx("span",{children:t.am||0})," ",a.jsx("b",{children:"Roxo:"})," ",a.jsx("span",{children:t.rox||0})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Gestores Comerciais:"})," ",a.jsx("span",{children:t.gestores??t.gestoresComerciais??0})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Capacidade:"})," ",a.jsx("span",{children:t.possibAt??0}),"  ",a.jsx("b",{children:"Em Atendimento:"})," ",a.jsx("span",{children:t.clientsAt??0})]})]}),a.jsxs("div",{className:"score",children:[a.jsx("div",{className:"title",children:"Placar"}),e.map(n=>a.jsxs("div",{className:"row",children:[a.jsx("span",{children:n.name}),a.jsx("span",{children:n.cash})]},n.id))]})]})}function Nx({onAction:t,current:e,isMyTurn:n=!0}){const r=!!(e!=null&&e.bankrupt),o=!!n&&!r;k.useEffect(()=>{console.groupCollapsed("[Controls] render"),console.log("current player:",e),console.log("isMyTurn prop:",n),console.log("isBankrupt:",r),console.log("canRoll (final):",o),console.groupEnd()},[e==null?void 0:e.id,e==null?void 0:e.name,e==null?void 0:e.bankrupt,n,o]);const s=()=>{if(console.log("[Controls] click => Rolar Dado & Andar (canRoll=%s)",o),!o)return;const u=Math.floor(Math.random()*6)+1,c=0,d=`Dado: ${u}`;console.log("[Controls] onAction ROLL => steps=%d cashDelta=%d note=%s",u,c,d),t==null||t({type:"ROLL",steps:u,cashDelta:c,note:d})},i=async()=>{r||(console.log("[Controls] click => Recuperao Financeira"),t==null||t({type:"RECOVERY_MODAL"}))},l=async()=>{r||(console.log("[Controls] click => Declarar Falncia"),t==null||t({type:"BANKRUPT_MODAL"}))};return a.jsxs("div",{className:`controls ${o?"":"is-wait"} ${r?"is-bankrupt":""}`,children:[a.jsx("button",{className:"btn primary",onClick:i,disabled:r,"aria-disabled":r,children:"RECUPERAO FINANCEIRA"}),a.jsx("button",{className:"btn dark",onClick:l,disabled:r,"aria-disabled":r,children:"DECLARAR FALNCIA"}),a.jsxs("div",{className:"turnBox",children:[a.jsxs("div",{children:["Vez de: ",a.jsx("b",{children:e==null?void 0:e.name})]}),a.jsx("button",{className:"btn go",onClick:s,disabled:!o,"aria-disabled":!o,children:"Rolar Dado & Andar"})]})]})}function ei({children:t,onClose:e,zIndex:n=3e3}){const r=()=>{typeof e=="function"&&e()};return a.jsx("div",{className:"sg-modal-backdrop",style:{position:"fixed",inset:0,background:"rgba(8,10,16,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:n},onClick:r,children:a.jsx("div",{className:"sg-modal-card",style:{position:"relative",background:"#0f1420",border:"1px solid rgba(255,255,255,.1)",borderRadius:14,width:"min(780px, 92vw)",maxWidth:"92vw",color:"#fff",boxShadow:"0 20px 60px rgba(0,0,0,.45)"},onClick:o=>o.stopPropagation(),children:t})})}function Dx({players:t=[],onExit:e,onResolve:n}){const r=k.useMemo(()=>{const u=[...t].map(c=>({...c,patrimonio:(Number(c.cash)||0)+(Number(c.bens)||0)})).sort((c,d)=>d.patrimonio-c.patrimonio);return[u[1],u[0],u[2]]},[t]),o=r==null?void 0:r[1],s=r==null?void 0:r[0],i=r==null?void 0:r[2],l=()=>{n?n({action:"EXIT"}):e==null||e()};return a.jsx(ei,{zIndex:2147483647,onClose:()=>{},children:a.jsxs("div",{style:$n.wrap,children:[a.jsx("h1",{style:$n.title,children:" Fim da 5 Rodada"}),a.jsxs("p",{style:$n.subtitle,children:["Vence quem tiver ",a.jsx("b",{children:"Saldo + Bens"}),". Eis o pdio:"]}),a.jsxs("div",{style:$n.podium,children:[a.jsx(bl,{place:"second",player:s}),a.jsx(bl,{place:"first",player:o,big:!0}),a.jsx(bl,{place:"third",player:i})]}),a.jsx("div",{style:{display:"flex",gap:12,marginTop:18,flexWrap:"wrap",justifyContent:"center"},children:a.jsx("button",{style:$n.btn,onClick:l,children:" Voltar aos Lobbies"})})]})})}function bl({place:t,player:e,big:n}){if(!e)return a.jsx("div",{style:{width:220}});const r={first:wl("#d4af37","#f5d76e"),second:wl("#9fa4ad","#cfd4db"),third:wl("#b87333","#d28c45")},o={first:"1",second:"2",third:"3"}[t],s=r[t].ring,i=r[t].face;return a.jsxs("div",{style:{...$n.medalCol,transform:n?"translateY(-18px)":"none"},children:[a.jsx("div",{style:$n.ribbon}),a.jsx("div",{style:{...$n.medal,...s,width:n?180:150,height:n?180:150},children:a.jsx("div",{style:{...$n.medalFace,...i},children:a.jsx("div",{style:$n.medalNumber,children:o})})}),a.jsxs("div",{style:$n.cardBelow,children:[a.jsx("div",{style:{fontWeight:900,fontSize:16,lineHeight:1.2,textAlign:"center"},children:e.name}),a.jsxs("div",{style:{opacity:.9,fontSize:13,marginTop:4,textAlign:"center"},children:["Saldo: ",a.jsxs("b",{children:["$ ",Number(e.cash||0).toLocaleString()]}),a.jsx("br",{}),"Bens: ",a.jsxs("b",{children:["$ ",Number(e.bens||0).toLocaleString()]})]}),a.jsxs("div",{style:{marginTop:6,fontWeight:900,textAlign:"center"},children:["Patrimnio: ",a.jsxs("b",{children:["$ ",Number(e.patrimonio||0).toLocaleString()]})]})]})]})}function wl(t,e){return{ring:{background:`radial-gradient(circle at 35% 30%, ${e} 0%, ${t} 65%, #000 120%)`,boxShadow:"0 12px 30px rgba(0,0,0,.35), inset 0 0 12px rgba(255,255,255,.12)"},face:{background:`conic-gradient(from 0deg, ${e}, ${t}, ${e})`}}}const $n={wrap:{pointerEvents:"auto",border:"1px solid rgba(255,255,255,.15)",background:"#11161f",color:"#eef1f6",borderRadius:16,padding:20,width:"min(900px, 92vw)",maxWidth:"92vw",textAlign:"center"},title:{margin:"0 0 6px",fontWeight:900,fontSize:28},subtitle:{margin:"0 0 14px",opacity:.9},podium:{display:"flex",alignItems:"flex-end",justifyContent:"center",gap:24,padding:"10px 0",flexWrap:"wrap"},medalCol:{display:"flex",flexDirection:"column",alignItems:"center"},ribbon:{width:16,height:70,background:"linear-gradient(#e41f1f,#9e1313)",borderRadius:4,marginBottom:-12},medal:{borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"3px solid rgba(255,255,255,.18)"},medalFace:{width:"85%",height:"85%",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 8px 18px rgba(0,0,0,.35), inset 0 -6px 10px rgba(255,255,255,.08)"},medalNumber:{fontWeight:900,fontSize:28,letterSpacing:1,textShadow:"0 2px 4px rgba(0,0,0,.45)"},cardBelow:{background:"#19202c",border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"10px 12px",width:220,marginTop:10},btn:{background:"#2a3342",color:"#fff",border:"1px solid rgba(255,255,255,.18)",borderRadius:10,padding:"10px 14px",fontWeight:800,cursor:"pointer"}},om=k.createContext(null);function Tx({children:t}){const[e,n]=k.useState([]),r=k.useRef(null),o=d=>{const h=r.current;r.current=null,n(f=>f.slice(0,-1)),h&&h(d)},s=()=>o({action:"SKIP"}),i=()=>o(!1),l=d=>{var g;const h=((g=crypto==null?void 0:crypto.randomUUID)==null?void 0:g.call(crypto))||String(Date.now()+Math.random()),f=pe.cloneElement(d,{onResolve:x=>o(x)});n(x=>[...x,{id:h,el:f}])},u=()=>new Promise(d=>{r.current=d}),c=k.useMemo(()=>({pushModal:l,awaitTop:u,resolveTop:o,closeModal:s,popModal:i}),[]);return a.jsxs(om.Provider,{value:c,children:[t,e.map(({id:d,el:h})=>a.jsx(pe.Fragment,{children:h},d))]})}const qt=()=>k.useContext(om);function Ax({playerName:t="Jogador"}){const{resolveTop:e,closeModal:n}=qt();return a.jsx(ei,{width:700,onClose:n,children:a.jsx("div",{className:"bankruptcyModal",children:a.jsxs("div",{className:"paper",style:{padding:24},children:[a.jsx("h2",{style:{marginTop:0},children:"Declarar Falncia"}),a.jsxs("p",{children:["Tem certeza que deseja declarar ",a.jsx("b",{children:"Falncia"}),", ",a.jsx("b",{children:t}),"?",a.jsx("br",{}),"Esta ao  irreversvel e voc no poder mais jogar."]}),a.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:24},children:[a.jsx("button",{onClick:()=>{n(),e(!1)},className:"btn",children:"Cancelar"}),a.jsx("button",{onClick:()=>{n(),e(!0)},className:"btn btn-danger",children:"Sim, declarar falncia"})]})]})})})}const Ft={comum:{cap:2,baseFat:600,incFat:100,baseDesp:100,incDesp:100},inside:{cap:5,baseFat:1500,incFat:500,baseDesp:2e3,incDesp:100},field:{cap:5,baseFat:1500,incFat:500,baseDesp:2e3,incDesp:100}},Tu={baseDesp:3e3,incDesp:500,boostByCert:[.2,.3,.4,.6]},sm={A:{fat:1200,desp:700},B:{fat:600,desp:400},C:{fat:300,desp:200},D:{fat:100,desp:50}},im={A:{fat:1e3,desp:400},B:{fat:500,desp:200},C:{fat:200,desp:100},D:{fat:70,desp:50}},Wt=t=>Number(t||0),ir=(t={},e)=>{var n;return new Set(((n=t==null?void 0:t.trainingsByVendor)==null?void 0:n[e])||[]).size},Ox=t=>ir(t,"gestor");function fa(t={}){const e=Math.max(0,Wt(t.vendedoresComuns)),n=Math.max(0,Wt(t.insideSales)),r=Math.max(0,Wt(t.fieldSales)),o=e*Ft.comum.cap,s=n*Ft.inside.cap,i=r*Ft.field.cap,l=o+s+i,u=Math.max(0,Wt(t.clients)),c=Math.min(u,l);return{cap:l,inAtt:c}}function Pa(t={}){var D,S;const e=Wt(t.vendedoresComuns),n=Wt(t.insideSales),r=Wt(t.fieldSales),o=Wt(t.gestores??t.gestoresComerciais??t.managers),s=ir(t,"comum"),i=ir(t,"inside"),l=ir(t,"field"),u=ir(t,"gestor"),c=e*(Ft.comum.baseFat+Ft.comum.incFat*s),d=n*(Ft.inside.baseFat+Ft.inside.incFat*i),h=r*(Ft.field.baseFat+Ft.field.incFat*l);let f=c+d+h;const g=e+n+r,x=g>0?Math.min(1,o*7/g):0,b=Tu.boostByCert[Math.min(3,Math.max(0,u))]||0;f=f*(1+x*b);const _=String(t.mixProdutos||"D").toUpperCase(),p=(((D=sm[_])==null?void 0:D.fat)||0)*Wt(t.clients),m=String(t.erpLevel||"D").toUpperCase(),y=g+o,w=(((S=im[m])==null?void 0:S.fat)||0)*y,E=Wt(t.revenue);return Math.max(0,Math.floor(f+p+w+E))}function $a(t={}){var E,N;const e=Wt(t.vendedoresComuns),n=Wt(t.insideSales),r=Wt(t.fieldSales),o=Wt(t.gestores??t.gestoresComerciais??t.managers),s=ir(t,"comum"),i=ir(t,"inside"),l=ir(t,"field"),u=ir(t,"gestor"),c=e*(Ft.comum.baseDesp+Ft.comum.incDesp*s),d=n*(Ft.inside.baseDesp+Ft.inside.incDesp*i),h=r*(Ft.field.baseDesp+Ft.field.incDesp*l),f=o*(Tu.baseDesp+Tu.incDesp*u),g=String(t.mixProdutos||"D").toUpperCase(),x=(((E=sm[g])==null?void 0:E.desp)||0)*Wt(t.clients),b=String(t.erpLevel||"D").toUpperCase(),_=e+n+r+o,p=(((N=im[b])==null?void 0:N.desp)||0)*_;return Math.max(0,Math.floor(c+d+h+f+x+p+0+1e3))}function Et(t,e={}){var o,s;const n={...t},r=(i,l)=>{n[i]=(n[i]??0)+l};if(Number.isFinite(e.cashDelta)&&r("cash",Number(e.cashDelta)),Number.isFinite(e.clientsDelta)&&r("clients",Number(e.clientsDelta)),Number.isFinite(e.manutencaoDelta)&&r("manutencao",Number(e.manutencaoDelta)),Number.isFinite(e.bensDelta)&&r("bens",Number(e.bensDelta)),Number.isFinite(e.vendedoresComunsDelta)&&r("vendedoresComuns",Number(e.vendedoresComunsDelta)),Number.isFinite(e.fieldSalesDelta)&&r("fieldSales",Number(e.fieldSalesDelta)),Number.isFinite(e.insideSalesDelta)&&r("insideSales",Number(e.insideSalesDelta)),Number.isFinite(e.gestoresDelta)){const i=Number(e.gestoresDelta);n.gestores=(n.gestores??0)+i,n.gestoresComerciais=(n.gestoresComerciais??0)+i,n.managers=(n.managers??0)+i}if(Number.isFinite(e.revenueDelta)&&r("revenue",Number(e.revenueDelta)),typeof e.mixProdutosSet<"u"){n.mixProdutos=e.mixProdutosSet;const i=String(e.mixProdutosSet).toUpperCase();["A","B","C","D"].includes(i)&&(n.mixOwned={...n.mixOwned||{},[i]:!0},(o=n.reducedLevels)!=null&&o.MIX&&(n.reducedLevels={...n.reducedLevels,MIX:n.reducedLevels.MIX.filter(l=>l!==i)}))}if(e.mixBaseSet&&(n.mixBase={...n.mixBase||{},...e.mixBaseSet}),typeof e.erpLevelSet<"u"){n.erpLevel=e.erpLevelSet;const i=String(e.erpLevelSet).toUpperCase();["A","B","C","D"].includes(i)&&(n.erpOwned={...n.erpOwned||{},[i]:!0},(s=n.reducedLevels)!=null&&s.ERP&&(n.reducedLevels={...n.reducedLevels,ERP:n.reducedLevels.ERP.filter(l=>l!==i)}))}return Array.isArray(e.trainingsPush)&&e.trainingsPush.length&&(n.trainings=[...n.trainings||[],...e.trainingsPush]),Array.isArray(e.directBuysPush)&&e.directBuysPush.length&&(n.directBuys=[...n.directBuys||[],...e.directBuysPush]),n}function df(t,e){const{purchases:n=[],grandTotal:r=0}=e||{},o={personalizado:"az",fieldsales:"am",imersaomultiplier:"rox"},s={...t};return s.cash=(s.cash??0)-Number(r||0),s.bens=(s.bens??0)+Number(r||0),s.onboarding=!0,n.forEach(i=>{var h;const{vendorType:l,items:u=[]}=i||{};u.forEach(f=>{const g=o[f==null?void 0:f.id];g&&(s[g]=(s[g]??0)+1)});const c=String(l||"comum"),d=new Set(((h=s.trainingsByVendor)==null?void 0:h[c])||[]);u.forEach(f=>{f!=null&&f.id&&d.add(f.id)}),s.trainingsByVendor={...s.trainingsByVendor||{},[c]:Array.from(d)}}),s}function Sl(t,e,n){return t===e?!1:t<e?n>t&&n<=e:n>t||n<=e}function js(t){return t.reduce((e,n)=>e+(n!=null&&n.bankrupt?0:1),0)}function as(t,e){var s;const n=t.length;if(n===0)return 0;let r=(e+1)%n,o=0;for(;o<n;){if(!((s=t[r])!=null&&s.bankrupt))return r;r=(r+1)%n,o++}return e}class am{constructor(){this.errors=[],this.warnings=[]}validateGameState(e,n,r,o,s){return this.errors=[],this.warnings=[],this.validatePlayers(e),this.validateTurnState(e,n),this.validateGameOverState(e,o,s),this.validateRoundState(e,r),{isValid:this.errors.length===0,errors:this.errors,warnings:this.warnings}}validatePlayers(e){if(!Array.isArray(e)||e.length===0){this.addError("Jogadores invlidos: deve ser um array no vazio");return}e.forEach((n,r)=>{this.validatePlayer(n,r)}),this.validatePlayerUniqueness(e),this.validateAlivePlayers(e)}validatePlayer(e,n){const r=`Jogador ${n+1} (${e.name||"Sem nome"})`;e.id||this.addError(`${r}: ID  obrigatrio`),(typeof e.cash!="number"||e.cash<0)&&this.addError(`${r}: Cash deve ser um nmero no negativo (atual: ${e.cash})`),(typeof e.clients!="number"||e.clients<0)&&this.addError(`${r}: Clientes deve ser um nmero no negativo (atual: ${e.clients})`),this.validateResourceCounts(e,r),this.validateCalculations(e,r)}validateResourceCounts(e,n){["vendedoresComuns","fieldSales","insideSales","gestores","gestoresComerciais","managers"].forEach(s=>{const i=e[s];i!==void 0&&(typeof i!="number"||i<0)&&this.addError(`${n}: ${s} deve ser um nmero no negativo (atual: ${i})`)}),["az","am","rox"].forEach(s=>{const i=e[s];i!==void 0&&(typeof i!="number"||i<0)&&this.addError(`${n}: Certificado ${s} deve ser um nmero no negativo (atual: ${i})`)})}validateCalculations(e,n){try{const r=Pa(e),o=$a(e),{cap:s,inAtt:i}=fa(e);(typeof r!="number"||r<0)&&this.addError(`${n}: Faturamento calculado invlido: ${r}`),(typeof o!="number"||o<0)&&this.addError(`${n}: Manuteno calculada invlida: ${o}`),(typeof s!="number"||s<0)&&this.addError(`${n}: Capacidade calculada invlida: ${s}`),(typeof i!="number"||i<0||i>s)&&this.addError(`${n}: Clientes em atendimento invlido: ${i} (capacidade: ${s})`),this.isInitialState(e)&&o!==1150&&this.addError(`${n}: Manuteno inicial deve ser 1150, mas  ${o}`)}catch(r){this.addError(`${n}: Erro ao calcular faturamento/manuteno: ${r.message}`)}}isInitialState(e){return e.vendedoresComuns===1&&e.clients===1&&e.fieldSales===0&&e.insideSales===0&&e.gestores===0&&e.mixProdutos==="D"&&e.erpLevel==="D"&&(e.az||0)===0&&(e.am||0)===0&&(e.rox||0)===0}validatePlayerUniqueness(e){const n=e.map(o=>o.id).filter(Boolean),r=new Set(n);n.length!==r.size&&this.addError("IDs de jogadores devem ser nicos")}validateAlivePlayers(e){const n=js(e);n===0&&this.addError("No pode haver zero jogadores vivos"),n===1&&this.addWarning("Apenas 1 jogador vivo - jogo deve terminar")}validateTurnState(e,n){if(typeof n!="number"||n<0||n>=e.length){this.addError(`TurnIdx invlido: ${n} (deve estar entre 0 e ${e.length-1})`);return}const r=e[n];if(!r){this.addError(`Jogador do turno no encontrado no ndice ${n}`);return}r.bankrupt&&this.addError(`Jogador do turno (${r.name}) est falido`)}validateGameOverState(e,n,r){const o=js(e);n&&o>1&&this.addError("Jogo marcado como terminado mas h mais de 1 jogador vivo"),n&&!r&&this.addError("Jogo terminado mas no h vencedor definido"),r&&!n&&this.addError("H vencedor definido mas jogo no terminou"),r&&r.bankrupt&&this.addError("Vencedor no pode estar falido")}validateRoundState(e,n){(typeof n!="number"||n<1)&&this.addError(`Rodada invlida: ${n} (deve ser >= 1)`),n>10&&this.addWarning(`Rodada muito alta: ${n} (jogo pode estar travado)`)}validateAction(e,n,r){switch(this.errors=[],this.warnings=[],e.type){case"MOVE":this.validateMoveAction(e,n);break;case"BUY":this.validateBuyAction(e,n);break;case"HIRE":this.validateHireAction(e,n);break;case"BANKRUPT":this.validateBankruptAction(e,n);break;default:this.addWarning(`Tipo de ao no reconhecido: ${e.type}`)}return{isValid:this.errors.length===0,errors:this.errors,warnings:this.warnings}}validateMoveAction(e,n){(typeof e.steps!="number"||e.steps<1||e.steps>6)&&this.addError(`Passos invlidos: ${e.steps} (deve estar entre 1 e 6)`)}validateBuyAction(e,n){const r=e.cost||e.price||0;r>n.cash&&this.addError(`Saldo insuficiente: precisa de ${r}, tem ${n.cash}`)}validateHireAction(e,n){const r=e.cost||0;r>n.cash&&this.addError(`Saldo insuficiente para contratao: precisa de ${r}, tem ${n.cash}`)}validateBankruptAction(e,n){n.bankrupt||this.addWarning("Jogador declarando falncia mas no est marcado como falido")}addError(e){this.errors.push(e)}addWarning(e){this.warnings.push(e)}}function Lx(t,e,n,r,o){return new am().validateGameState(t,e,n,r,o)}function Px(t,e,n){return new am().validateAction(t,e,n)}class $x{constructor(){this.enabled=!1,this.logs=[],this.maxLogs=1e4,this.originalConsole={log:console.log,warn:console.warn,error:console.error,debug:console.debug,info:console.info},this.prefixes=["[DEBUG]","[NET]","[App]","[SG]","[Controls]","[HUD]","[DEBUG MODE]","[PlayersLobby]","[leaveRoom]","[GameNet]","[useTurnEngine]","[useGameSync]"]}shouldCapture(e){if(!this.enabled)return!1;const n=e.map(r=>{if(typeof r=="object")try{return JSON.stringify(r)}catch{return String(r)}return String(r)}).join(" ");return this.prefixes.some(r=>n.includes(r))}addLog(e,n){this.logs.length>=this.maxLogs&&(this.logs=this.logs.slice(-Math.floor(this.maxLogs*.9)));const r=Date.now(),o={timestamp:r,time:new Date(r).toISOString(),level:e,args:n.map(s=>{if(typeof s=="object"&&s!==null)try{return JSON.parse(JSON.stringify(s,(i,l)=>typeof l=="function"?"[Function]":l===void 0?"[undefined]":Array.isArray(l)&&l.length>100?`[Array(${l.length}) - truncado]`:l))}catch{return String(s)}return s}),message:n.map(s=>{if(typeof s=="object")try{return JSON.stringify(s)}catch{return String(s)}return String(s)}).join(" ")};this.logs.push(o)}interceptLog(...e){this.shouldCapture(e)&&this.addLog("log",e),this.originalConsole.log.apply(console,e)}interceptWarn(...e){this.shouldCapture(e)&&this.addLog("warn",e),this.originalConsole.warn.apply(console,e)}interceptError(...e){this.addLog("error",e),this.originalConsole.error.apply(console,e)}interceptDebug(...e){this.shouldCapture(e)&&this.addLog("debug",e),this.originalConsole.debug.apply(console,e)}interceptInfo(...e){this.shouldCapture(e)&&this.addLog("info",e),this.originalConsole.info.apply(console,e)}enable(){this.enabled||(this.enabled=!0,console.log=this.interceptLog.bind(this),console.warn=this.interceptWarn.bind(this),console.error=this.interceptError.bind(this),console.debug=this.interceptDebug.bind(this),console.info=this.interceptInfo.bind(this),console.log("[LogCapture]  Captura de logs ativada"))}disable(){this.enabled&&(this.enabled=!1,console.log=this.originalConsole.log,console.warn=this.originalConsole.warn,console.error=this.originalConsole.error,console.debug=this.originalConsole.debug,console.info=this.originalConsole.info,console.log("[LogCapture]  Captura de logs desativada"))}clear(){this.logs=[],console.log("[LogCapture]  Histrico de logs limpo")}getLogs(){return[...this.logs]}getStats(){const e=this.logs.length,n={log:0,warn:0,error:0,debug:0,info:0};return this.logs.forEach(r=>{n[r.level]=(n[r.level]||0)+1}),{total:e,byLevel:n,enabled:this.enabled}}exportAsText(){const e=["=".repeat(80),"RELATRIO DE LOGS - Sales Game","=".repeat(80),`Data/Hora: ${new Date().toISOString()}`,`Total de logs: ${this.logs.length}`,`Estatsticas: ${JSON.stringify(this.getStats(),null,2)}`,"=".repeat(80),""];return this.logs.forEach(n=>{const r={log:"",warn:"",error:"",debug:"",info:""}[n.level]||"";e.push(`[${n.time}] ${r} [${n.level.toUpperCase()}]`),n.args.forEach((o,s)=>{typeof o=="object"?e.push(`  Arg ${s+1}: ${JSON.stringify(o,null,2)}`):e.push(`  Arg ${s+1}: ${o}`)}),e.push("")}),e.join(`
`)}exportAsJSON(){return{timestamp:new Date().toISOString(),stats:this.getStats(),logs:this.logs}}exportFull(){return{timestamp:new Date().toISOString(),stats:this.getStats(),text:this.exportAsText(),json:this.exportAsJSON()}}}const Kn=new $x,Ix=()=>Kn.clear(),Au=()=>Kn.getStats(),Mx=()=>Kn.exportAsText(),Bx=()=>Kn.exportAsJSON();class Ux{constructor(){this.enabled=!1,this.validationHistory=[],this.maxHistorySize=100}toggle(){return this.enabled=!this.enabled,this.enabled&&Kn.enable(),console.log(`[DEBUG MODE] ${this.enabled?"ATIVADO":"DESATIVADO"}`),this.enabled}validateGameState(e,n,r,o,s,i=""){if(!this.enabled)return;const l=Lx(e,n,r,o,s);return this.addToHistory({type:"GAME_STATE",context:i,timestamp:Date.now(),result:l}),l.isValid||console.error("[DEBUG MODE]  Estado do jogo invlido:",l.errors),l.warnings.length>0&&console.warn("[DEBUG MODE]  Avisos:",l.warnings),l}validateAction(e,n,r,o=""){if(!this.enabled)return;const s=Px(e,n,r);return this.addToHistory({type:"ACTION",context:o,timestamp:Date.now(),action:e.type,player:n.name,result:s}),s.isValid||console.error(`[DEBUG MODE]  Ao invlida (${e.type}):`,s.errors),s}validateResourceChange(e,n,r,o){if(!this.enabled)return;const s=[],i=[];if(n.clients!==r.clients){const c=r.clients-n.clients;r.clients<0&&s.push(`Clientes no pode ser negativo: ${r.clients}`),Math.abs(c)>10&&i.push(`Mudana grande de clientes: ${c}`)}if(n.cash!==r.cash){const c=r.cash-n.cash;r.cash<0&&s.push(`Cash no pode ser negativo: ${r.cash}`),Math.abs(c)>5e4&&i.push(`Mudana grande de cash: ${c}`)}["vendedoresComuns","fieldSales","insideSales","gestores"].forEach(c=>{if(n[c]!==r[c]){const d=r[c]-n[c];r[c]<0&&s.push(`${c} no pode ser negativo: ${r[c]}`),Math.abs(d)>5&&i.push(`Mudana grande de ${c}: ${d}`)}});const u={isValid:s.length===0,errors:s,warnings:i};return this.addToHistory({type:"RESOURCE_CHANGE",context:o,timestamp:Date.now(),player:e.name,oldState:n,newState:r,result:u}),u.isValid||console.error("[DEBUG MODE]  Mudana de recurso invlida:",u.errors),u}validateCalculations(e,n=""){if(this.enabled)try{const r=Pa(e),o=$a(e),{cap:s,inAtt:i}=fa(e),l=[],u=[];(typeof r!="number"||r<0)&&l.push(`Faturamento invlido: ${r}`),(typeof o!="number"||o<0)&&l.push(`Manuteno invlida: ${o}`),(typeof s!="number"||s<0)&&l.push(`Capacidade invlida: ${s}`),(typeof i!="number"||i<0||i>s)&&l.push(`Clientes em atendimento invlido: ${i} (capacidade: ${s})`),this.isInitialState(e)&&o!==1150&&l.push(`Manuteno inicial deve ser 1150, mas  ${o}`);const c={isValid:l.length===0,errors:l,warnings:u,calculations:{faturamento:r,manutencao:o,cap:s,inAtt:i}};return this.addToHistory({type:"CALCULATIONS",context:n,timestamp:Date.now(),player:e.name,result:c}),c.isValid||console.error("[DEBUG MODE]  Clculos invlidos:",c.errors),c}catch(r){return console.error("[DEBUG MODE]  Erro ao validar clculos:",r),{isValid:!1,errors:[r.message],warnings:[]}}}isInitialState(e){return e.vendedoresComuns===1&&e.clients===1&&e.fieldSales===0&&e.insideSales===0&&e.gestores===0&&e.mixProdutos==="D"&&e.erpLevel==="D"}addToHistory(e){this.validationHistory.unshift(e),this.validationHistory.length>this.maxHistorySize&&(this.validationHistory=this.validationHistory.slice(0,this.maxHistorySize))}getHistory(){return this.validationHistory}clearHistory(){this.validationHistory=[]}getStats(){const e=this.validationHistory.length,n=this.validationHistory.filter(o=>!o.result.isValid).length,r=this.validationHistory.filter(o=>o.result.warnings.length>0).length;return{total:e,errors:n,warnings:r,errorRate:e>0?n/e*100:0,warningRate:e>0?r/e*100:0}}exportReport(){const e=this.getStats(),n={timestamp:new Date().toISOString(),stats:e,history:this.validationHistory};return console.log("[DEBUG MODE]  Relatrio de validao:",n),n}exportFullReport(){const e=this.exportReport(),n=Kn.exportFull();return{timestamp:new Date().toISOString(),validation:e,logs:n,text:this.exportFullReportAsText(e,n)}}exportFullReportAsText(e,n){return["=".repeat(80),"RELATRIO COMPLETO DE DEBUG - Sales Game","=".repeat(80),`Data/Hora: ${new Date().toISOString()}`,"","--- VALIDAES ---",`Total de validaes: ${e.stats.total}`,`Erros: ${e.stats.errors}`,`Avisos: ${e.stats.warnings}`,`Taxa de erro: ${e.stats.errorRate.toFixed(2)}%`,"","--- LOGS CAPTURADOS ---",`Total de logs: ${n.stats.total}`,`Logs por nvel: ${JSON.stringify(n.stats.byLevel,null,2)}`,"","--- HISTRICO DE VALIDAES ---",...e.history.map(o=>`[${new Date(o.timestamp).toISOString()}] ${o.type} - ${o.context||""} - ${JSON.stringify(o.result,null,2)}`),"","--- LOGS DETALHADOS ---",n.text,"=".repeat(80)].join(`
`)}}const io=new Ux,zx=(t,e,n,r,o,s)=>io.validateGameState(t,e,n,r,o,s),Fx=(t,e)=>io.validateCalculations(t,e),ff=()=>io.getStats(),Wx=()=>io.exportReport(),lm=()=>io.exportFullReport();function Vx({players:t,turnIdx:e,round:n,gameOver:r,winner:o}){const[s,i]=k.useState(!1),[l,u]=k.useState({total:0,errors:0,warnings:0,errorRate:0,warningRate:0}),[c,d]=k.useState({total:0,byLevel:{},enabled:!1}),[h,f]=k.useState(!1),[g,x]=k.useState({x:0,y:0}),[b,_]=k.useState({x:0,y:0}),p=k.useRef(null);k.useEffect(()=>{const A=()=>{u(ff()),d(Au())};A();const v=setInterval(A,1e3);return()=>clearInterval(v)},[]);const m=()=>{const A=io.toggle();i(A)},y=()=>{const A=Wx(),v=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),T=URL.createObjectURL(v),O=document.createElement("a");O.href=T,O.download=`debug-report-${new Date().toISOString().slice(0,19)}.json`,O.click(),URL.revokeObjectURL(T)},w=()=>{const A=lm(),v=new Blob([A.text],{type:"text/plain;charset=utf-8"}),T=URL.createObjectURL(v),O=document.createElement("a");O.href=T,O.download=`debug-logs-completo-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`,O.click(),URL.revokeObjectURL(T);const $=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),U=URL.createObjectURL($),Se=document.createElement("a");Se.href=U,Se.download=`debug-logs-completo-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,Se.click(),URL.revokeObjectURL(U),console.log("[DebugPanel]  Relatrio completo exportado (texto + JSON)")},E=()=>{io.clearHistory(),Ix(),u(ff()),d(Au()),console.log("[DebugPanel]  Todos os logs foram limpos")},N=A=>{if(A.target.closest("button"))return;f(!0);const v=p.current.getBoundingClientRect();_({x:A.clientX-v.left,y:A.clientY-v.top})},D=A=>{h&&x({x:A.clientX-b.x,y:A.clientY-b.y})},S=()=>{f(!1)};return k.useEffect(()=>{if(h)return document.addEventListener("mousemove",D),document.addEventListener("mouseup",S),()=>{document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",S)}},[h,b]),s?a.jsxs("div",{ref:p,style:{position:"fixed",top:g.y||10,left:g.x||10,zIndex:9999,background:"#1a1a1a",color:"#fff",padding:"12px",borderRadius:"8px",border:"1px solid #333",minWidth:"300px",maxHeight:"80vh",overflow:"auto",fontSize:"12px",fontFamily:"monospace",cursor:h?"grabbing":"grab",userSelect:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},onMouseDown:N,children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[a.jsx("h3",{style:{margin:0,color:"#4CAF50"},children:" Debug Panel"}),a.jsx("button",{onClick:m,style:{background:"#ff4444",color:"#fff",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",fontSize:"10px"},children:""})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estatsticas de Validao"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Total: ",l.total]}),a.jsxs("div",{style:{color:l.errors>0?"#ff4444":"#4CAF50"},children:["Erros: ",l.errors]}),a.jsxs("div",{style:{color:l.warnings>0?"#FFC107":"#4CAF50"},children:["Avisos: ",l.warnings]}),a.jsxs("div",{children:["Taxa Erro: ",l.errorRate.toFixed(1),"%"]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estatsticas de Logs"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Total: ",c.total]}),a.jsxs("div",{style:{color:c.enabled?"#4CAF50":"#ff4444"},children:["Status: ",c.enabled?" Ativo":" Inativo"]}),c.byLevel&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Logs: ",c.byLevel.log||0]}),a.jsxs("div",{style:{color:"#FFC107"},children:["Warns: ",c.byLevel.warn||0]}),a.jsxs("div",{style:{color:"#ff4444"},children:["Errors: ",c.byLevel.error||0]}),a.jsxs("div",{children:["Debug: ",c.byLevel.debug||0]})]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estado do Jogo"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Jogadores: ",t.length]}),a.jsxs("div",{children:["Turno: ",e+1]}),a.jsxs("div",{children:["Rodada: ",n]}),a.jsxs("div",{style:{color:r?"#ff4444":"#4CAF50"},children:["Status: ",r?"Fim":"Ativo"]}),o&&a.jsxs("div",{children:["Vencedor: ",o.name]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Jogadores"}),t.map((A,v)=>{var T;return a.jsxs("div",{style:{background:v===e?"#333":"transparent",padding:"4px",borderRadius:"4px",marginBottom:"2px",border:A.bankrupt?"1px solid #ff4444":"1px solid transparent"},children:[a.jsxs("div",{style:{fontWeight:"bold"},children:[A.name," ",A.bankrupt?"":""," ",v===e?"":""]}),a.jsxs("div",{style:{fontSize:"10px",opacity:.8},children:["Cash: $",((T=A.cash)==null?void 0:T.toLocaleString())||0," | Clientes: ",A.clients||0," | Vendedores: ",A.vendedoresComuns||0]})]},A.id)})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[a.jsx("button",{onClick:w,style:{background:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px",fontWeight:"bold"},title:"Exporta relatrio completo com todos os logs (texto + JSON)",children:" Exportar Logs Completos"}),a.jsx("button",{onClick:y,style:{background:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px"},title:"Exporta apenas relatrio de validao (JSON)",children:" Exportar Validao"}),a.jsx("button",{onClick:E,style:{background:"#FF9800",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px"},title:"Limpa todos os logs e histrico de validao",children:" Limpar Tudo"})]}),a.jsxs("div",{style:{marginTop:"12px",padding:"8px",background:"#333",borderRadius:"4px",fontSize:"10px"},children:[a.jsx("div",{style:{color:"#FFC107",marginBottom:"4px"},children:" Instrues:"}),a.jsx("div",{children:' Clique em " Debug" para ativar/desativar'}),a.jsx("div",{children:" Logs so capturados automaticamente quando debug est ativo"}),a.jsx("div",{children:' " Exportar Logs Completos" gera arquivo .txt e .json'}),a.jsx("div",{children:" Compartilhe o arquivo .txt para anlise de problemas"}),a.jsx("div",{children:" Todos os console.log com prefixos [DEBUG], [NET], [App], etc. so capturados"})]})]}):a.jsx("div",{style:{background:"#1a1a1a",color:"#fff",padding:"6px 10px",borderRadius:"4px",border:"1px solid #333",cursor:"pointer",fontSize:"11px",fontFamily:"monospace",display:"inline-block",userSelect:"none"},onClick:m,children:" Debug"})}function fr({onResolve:t,requiredAmount:e=0,currentCash:n=0,title:r="Saldo insuficiente",message:o="Seu saldo atual no  suficiente para concluir esta compra.",okLabel:s="OK",showRecoveryOptions:i=!1,canClose:l=!0}){const u=k.useRef(null),c=k.useMemo(()=>Math.max(0,Number(e||0)-Number(n||0)),[e,n]),d=b=>`$ ${Number(b||0).toLocaleString()}`,h=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"ACK"})},f=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),!(i||!l)&&(t==null||t({action:"SKIP"}))},g=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"RECOVERY"})},x=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"BANKRUPT"})};return k.useEffect(()=>{const b=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var _,p;return(p=(_=u.current)==null?void 0:_.focus)==null?void 0:p.call(_)},0),()=>{document.body.style.overflow=b}},[]),a.jsx("div",{style:Yt.wrap,role:"dialog","aria-modal":"true",onMouseDown:b=>{b.target===b.currentTarget&&b.stopPropagation()},children:a.jsxs("div",{style:Yt.card,onMouseDown:b=>b.stopPropagation(),children:[!i&&l&&a.jsx("button",{type:"button",style:Yt.close,onClick:f,"aria-label":"Fechar",children:""}),a.jsx("div",{style:Yt.icon,children:""}),a.jsx("h2",{style:Yt.title,children:r}),a.jsx("p",{style:Yt.msg,children:o}),a.jsxs("div",{style:Yt.grid,children:[a.jsxs("div",{style:Yt.row,children:[a.jsx("span",{children:"Necessrio:"}),a.jsx("b",{children:d(e)})]}),a.jsxs("div",{style:Yt.row,children:[a.jsx("span",{children:"Seu saldo:"}),a.jsx("b",{children:d(n)})]}),a.jsxs("div",{style:{...Yt.row,color:"#fca5a5"},children:[a.jsx("span",{children:"Faltam:"}),a.jsx("b",{children:d(c)})]})]}),a.jsx("div",{style:Yt.actions,children:i?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",style:{...Yt.btn,background:"#f59e0b",color:"#fff",marginRight:"8px"},onClick:g,children:"Recuperao Financeira"}),a.jsx("button",{type:"button",style:{...Yt.btn,background:"#dc2626",color:"#fff"},onClick:x,children:"Declarar Falncia"})]}):a.jsx("button",{ref:u,type:"button",style:{...Yt.btn,background:"#6b7280",color:"#fff"},onClick:h,children:s})})]})})}const Yt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"grid",placeItems:"center",zIndex:1100},card:{width:"min(440px, 92vw)",background:"#1f2330",color:"#e9ecf1",borderRadius:16,padding:"18px 18px 16px",border:"1px solid rgba(255,255,255,.12)",boxShadow:"0 18px 50px rgba(0,0,0,.5)",position:"relative"},close:{position:"absolute",right:10,top:10,width:34,height:34,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},icon:{fontSize:28,lineHeight:1,marginBottom:6},title:{margin:"2px 0 6px",fontWeight:900,fontSize:20},msg:{opacity:.95,margin:"0 0 10px"},grid:{border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",marginBottom:12,background:"#171b26"},row:{display:"flex",justifyContent:"space-between",padding:"4px 0"},actions:{display:"flex",justifyContent:"center",marginTop:6},btn:{minWidth:120,padding:"10px 16px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer"}},Qt={A:{compra:1e4,despesa:400,faturamento:1e3,color:"#1d4ed8",pill:"NVEL A"},B:{compra:4e3,despesa:200,faturamento:500,color:"#16a34a",pill:"NVEL B"},C:{compra:1500,despesa:100,faturamento:200,color:"#f59e0b",pill:"NVEL C"},D:{compra:500,despesa:50,faturamento:70,color:"#6b7280",pill:"NVEL D"}};function hf({onResolve:t,currentCash:e=0,currentLevel:n=null,erpOwned:r=null}){const o=k.useRef(null),{pushModal:s,awaitTop:i}=qt(),l=c=>{var d,h;(d=c==null?void 0:c.preventDefault)==null||d.call(c),(h=c==null?void 0:c.stopPropagation)==null||h.call(c),t==null||t({action:"SKIP"})},u=async c=>{if(r?r[c]===!0:n===c)return;const h=Qt[c],f=Number((h==null?void 0:h.compra)||0),g=Number(e||0);if(g<f){s(a.jsx(fr,{requiredAmount:f,currentCash:g,title:"Saldo insuficiente para comprar ERP",message:`Voc precisa de $ ${f.toLocaleString()} para o ERP nvel ${c}, mas possui $ ${g.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",level:c,values:h})};return k.useEffect(()=>{const c=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var d,h;return(h=(d=o.current)==null?void 0:d.focus)==null?void 0:h.call(d)},0),()=>{document.body.style.overflow=c}},[]),a.jsx("div",{style:Je.wrap,role:"dialog","aria-modal":"true","aria-label":"ERP/Sistemas",children:a.jsxs("div",{style:Je.card,children:[a.jsx("button",{ref:o,type:"button",style:Je.close,onClick:l,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Je.title,children:["Escolha o nvel de ",a.jsx("b",{children:"ERP / Sistemas"}),":"]}),a.jsxs("div",{style:Je.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"ERP / SISTEMAS"}),a.jsxs("div",{children:[a.jsx("b",{children:"Impacto mensal:"})," adiciona ",a.jsx("b",{children:"Despesa"})," e ",a.jsx("b",{children:"Faturamento"})," de acordo com o nvel."]}),a.jsxs("div",{children:["O nvel ",a.jsx("b",{children:"D"})," tambm pode ser adquirido."]})]}),a.jsxs("div",{style:Je.saldo,children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsxs("div",{style:Je.table,children:[a.jsxs("div",{style:Je.trHead,children:[a.jsx("div",{style:Je.th}),a.jsx("div",{style:{...Je.th,background:"#10214d"},children:"Nvel A"}),a.jsx("div",{style:{...Je.th,background:"#0f3a1c"},children:"Nvel B"}),a.jsx("div",{style:{...Je.th,background:"#4a3705"},children:"Nvel C"}),a.jsx("div",{style:{...Je.th,background:"#2a2f3b"},children:"Nvel D"})]}),a.jsx(_l,{label:"COMPRA",fmt:!0,vA:Qt.A.compra,vB:Qt.B.compra,vC:Qt.C.compra,vD:Qt.D.compra}),a.jsx(_l,{label:"DESPESA",fmt:!0,vA:Qt.A.despesa,vB:Qt.B.despesa,vC:Qt.C.despesa,vD:Qt.D.despesa}),a.jsx(_l,{label:"FATURAMENTO",fmt:!0,vA:Qt.A.faturamento,vB:Qt.B.faturamento,vC:Qt.C.faturamento,vD:Qt.D.faturamento})]}),a.jsx("div",{style:Je.cards,children:["A","B","C","D"].map(c=>{const d=Qt[c],h=r?r[c]===!0:n===c,f=h;return a.jsxs("div",{style:{...Je.cardItem,borderColor:h?"#16a34a":"rgba(255,255,255,.15)",opacity:f?.6:1},children:[a.jsx("div",{style:{...Je.pill,background:h?"#16a34a":"#fff",color:h?"#fff":"#111"},children:h?" ADQUIRIDO":d.pill}),a.jsx("div",{style:{...Je.cardBadge,background:d.color}}),a.jsxs("ul",{style:Je.lines,children:[a.jsxs("li",{children:["Compra: ",a.jsxs("b",{children:["$ ",d.compra.toLocaleString()]})]}),a.jsxs("li",{children:["Despesa: ",a.jsxs("b",{children:["$ ",d.despesa.toLocaleString()]})]}),a.jsxs("li",{children:["Faturamento: ",a.jsxs("b",{children:["$ ",d.faturamento.toLocaleString()]})]})]}),a.jsx("button",{type:"button",style:{...Je.buyBtn,background:f?"#6b7280":"#2442f9",cursor:f?"not-allowed":"pointer"},onClick:()=>u(c),disabled:f,title:f?`ERP nvel ${c} j adquirido`:`Comprar ERP nvel ${c}`,children:f?"J Adquirido":`Comprar ${c}`})]},c)})}),a.jsx("div",{style:Je.actions,children:a.jsx("button",{type:"button",style:{...Je.bigBtn,background:"#444"},onClick:l,children:"No comprar"})})]})})}function _l({label:t,vA:e,vB:n,vC:r,vD:o,fmt:s}){const i=l=>s?`$ ${Number(l).toLocaleString()}`:l;return a.jsxs("div",{style:Je.tr,children:[a.jsx("div",{style:{...Je.td,fontWeight:700},children:t}),a.jsx("div",{style:Je.td,children:i(e)}),a.jsx("div",{style:Je.td,children:i(n)}),a.jsx("div",{style:Je.td,children:i(r)}),a.jsx("div",{style:Je.td,children:i(o)})]})}const Je={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldo:{margin:"0 0 10px",padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,overflow:"hidden",marginBottom:12},trHead:{display:"grid",gridTemplateColumns:"1fr repeat(4, 1fr)",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"1fr repeat(4, 1fr)",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255/.06)"},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,marginTop:8},cardItem:{background:"#0f1320",border:"1px solid",borderRadius:14,padding:"12px",display:"flex",flexDirection:"column",gap:8},cardBadge:{width:"100%",height:6,borderRadius:999,opacity:.9},pill:{alignSelf:"flex-start",fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999,color:"#111"},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},buyBtn:{marginTop:"auto",padding:"10px 12px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer",background:"#2442f9",color:"#fff"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:14},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",color:"#fff",fontWeight:900,cursor:"pointer"}},_i=[{id:"personalizado",label:`Treinamento de venda personalizado
Casagrande Consultores`,price:500,cert:"azul",colors:{bg:"#0f2848",border:"#3b82f6",pill:"#60a5fa"}},{id:"fieldsales",label:`Curso Field Sales Collab
Multiplier Educao e
Casagrande Consultores`,price:500,cert:"amarelo",colors:{bg:"#3a3202",border:"#facc15",pill:"#fde047"}},{id:"imersaomultiplier",label:`Pacote Imerses
Multiplier Educao`,price:500,cert:"roxo",colors:{bg:"#2b0840",border:"#a855f7",pill:"#c084fc"}}];function pf({onResolve:t,ownedByType:e={},canTrain:n={}}){const r=S=>typeof S=="string"&&S.trim()!==""&&!Number.isNaN(Number(S))?Number(S):S,o=S=>{const A=r(S);return typeof A=="number"?A>0:!!A},s=k.useMemo(()=>({comum:o(n.comum),field:o(n.field),inside:o(n.inside),gestor:o(n.gestor)}),[n]),i=_i.map(S=>S.id),l=k.useMemo(()=>[{id:"comum",label:"Vend. Comum"},{id:"field",label:"Field Sales"},{id:"inside",label:"Inside Sales"},{id:"gestor",label:"Gestor"}].filter(S=>s[S.id]).filter(S=>{const A=e[S.id]instanceof Set?e[S.id]:new Set(e[S.id]||[]);return i.some(v=>!A.has(v))}),[e,s]),[u,c]=k.useState(()=>new Set),[d,h]=k.useState(()=>new Set);k.useEffect(()=>{u.size===0&&l.length>0&&c(new Set([l[0].id]))},[l,u.size]);const f=k.useRef(null),g=k.useMemo(()=>{const S=[];if(d.size>0){const A=Array.from(d).map(T=>_i.find(O=>O.id===T)).filter(Boolean),v=A.reduce((T,O)=>T+((O==null?void 0:O.price)||0),0);u.forEach(T=>{S.push({vendorType:T,items:A,total:v})})}return S},[u,d]),x=k.useMemo(()=>g.reduce((S,A)=>S+A.total,0),[g]),b=k.useMemo(()=>{const S={azul:0,amarelo:0,roxo:0};return d.size>0&&Array.from(d).map(v=>_i.find(T=>T.id===v)).filter(Boolean).forEach(v=>{S[v.cert]=(S[v.cert]||0)+u.size}),S},[d,u.size]),_=k.useMemo(()=>{const S={};if(d.size>0){const A=Array.from(d);u.forEach(v=>{S[v]=A})}return S},[d,u]),p=S=>{c(A=>{const v=new Set(A);return v.has(S)?v.delete(S):v.add(S),v})},m=S=>{Array.from(u).some(v=>(e[v]instanceof Set?e[v]:new Set(e[v]||[])).has(S))||h(v=>{const T=new Set(v);return T.has(S)?T.delete(S):T.add(S),T})},y=()=>{g.length!==0&&(t==null||t({action:"BUY",purchases:g,grandTotal:x,bensDelta:x,certsCount:b,ownedUpdate:_}))},w=()=>{c(new Set),h(new Set)},E=S=>{var A,v;(A=S==null?void 0:S.preventDefault)==null||A.call(S),(v=S==null?void 0:S.stopPropagation)==null||v.call(S),t==null||t({action:"SKIP"})};k.useEffect(()=>{const S=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var A,v;return(v=(A=f.current)==null?void 0:A.focus)==null?void 0:v.call(A)},0),()=>{document.body.style.overflow=S}},[]);const N=l.length===0,D=!Object.values(s).some(Boolean);return a.jsx("div",{style:Ut.wrap,role:"dialog","aria-modal":"true",children:a.jsxs("div",{style:Ut.card,children:[a.jsx("button",{ref:f,type:"button",style:Ut.close,onClick:E,"aria-label":"Fechar",children:""}),a.jsx("h2",{style:Ut.title,children:"Escolha os vendedores e treinamentos que deseja comprar:"}),N?a.jsx("div",{style:Ut.allDoneBox,children:D?"Nenhum profissional disponvel para treinar no momento.":"Todos os treinamentos j foram comprados para os profissionais disponveis."}):a.jsx(a.Fragment,{children:a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("p",{style:{margin:"0 0 8px",opacity:.9,fontSize:"14px"},children:"Selecione os tipos de vendedores que deseja treinar:"}),a.jsx("div",{style:{...Ut.vendorRow,gridTemplateColumns:`repeat(${l.length}, minmax(0,1fr))`},children:l.map(S=>a.jsx("button",{type:"button",onClick:()=>p(S.id),style:{...Ut.vendorBtn,background:u.has(S.id)?"#6f5bd6":"#2a2f3b",borderColor:u.has(S.id)?"rgba(255,255,255,.35)":"rgba(255,255,255,.15)"},children:S.label},S.id))})]})}),!N&&u.size>0&&a.jsxs(a.Fragment,{children:[a.jsx("p",{style:{margin:"10px 2px 14px",opacity:.9},children:"Escolha os treinamentos que sero aplicados a todos os tipos selecionados:"}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",background:"#2a2f3b",borderRadius:"8px",border:"1px solid rgba(255,255,255,.15)"},children:[a.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Tipos selecionados:"}),a.jsx("div",{style:{fontSize:"14px",opacity:.9},children:Array.from(u).map(S=>{const A=l.find(v=>v.id===S);return A==null?void 0:A.label}).join(", ")})]}),a.jsx("div",{style:Ut.products,children:_i.map(S=>{const A=d.has(S.id),v=Array.from(u).some(T=>(e[T]instanceof Set?e[T]:new Set(e[T]||[])).has(S.id));return a.jsxs("button",{type:"button",onClick:()=>m(S.id),disabled:v,style:{...Ut.productCard,background:S.colors.bg,borderColor:S.colors.border,boxShadow:A?`0 0 0 3px ${S.colors.pill}`:"none",opacity:v?.45:1,cursor:v?"not-allowed":"pointer"},title:v?"J adquirido para algum tipo selecionado":void 0,children:[a.jsxs("div",{style:Ut.pill(S.colors.pill),children:["Certificado ",S.cert==="azul"?"Azul":S.cert==="amarelo"?"Amarelo":"Roxo"]}),a.jsx("div",{style:{whiteSpace:"pre-line",fontWeight:800,marginBottom:10},children:S.label}),a.jsxs("div",{style:{fontSize:22,fontWeight:900},children:["$ ",S.price.toLocaleString()]})]},S.id)})})]}),a.jsxs("div",{style:Ut.actionsRow,children:[a.jsx("button",{type:"button",style:{...Ut.smallBtn,background:"#3a4152"},onClick:w,children:"Limpar Tudo"}),a.jsx("div",{style:{flex:1}}),a.jsxs("div",{style:{fontWeight:900},children:["Total: $ ",x.toLocaleString(),u.size>1&&a.jsxs("span",{style:{fontSize:"12px",opacity:.8,marginLeft:"8px"},children:["(",d.size," treinamentos  ",u.size," tipos)"]})]})]}),a.jsxs("div",{style:Ut.btnRow,children:[a.jsx("button",{type:"button",style:{...Ut.bigBtn,background:"#444"},onClick:E,children:"No comprar"}),a.jsxs("button",{type:"button",disabled:g.length===0,style:{...Ut.bigBtn,background:g.length>0?"#6f5bd6":"#3a3a3a",opacity:g.length>0?1:.6,cursor:g.length>0?"pointer":"not-allowed"},onClick:y,children:["Comprar (",g.length," tipo",g.length!==1?"s":"",")"]})]})]})]})})}const Ut={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",maxWidth:980,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},allDoneBox:{background:"#0f1320",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"14px",fontWeight:800,textAlign:"center"},vendorRow:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:10,marginBottom:12},vendorBtn:{padding:"10px 12px",borderRadius:10,border:"1px solid",color:"#fff",fontWeight:800,cursor:"pointer"},products:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:12,margin:"4px 0 10px"},productCard:{textAlign:"center",padding:"16px 14px",borderRadius:14,border:"2px solid",color:"#fff"},pill:t=>({display:"inline-block",background:t,color:"#111",fontWeight:900,padding:"4px 8px",borderRadius:999,marginBottom:8}),actionsRow:{display:"flex",alignItems:"center",gap:12,margin:"6px 0 6px"},smallBtn:{padding:"10px 14px",borderRadius:10,border:"none",color:"#fff",fontWeight:800,cursor:"pointer"},btnRow:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:12},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",color:"#fff",fontWeight:900,cursor:"pointer"}};function qx({onResolve:t,currentCash:e=0}){const n=k.useRef(null),r=i=>{var l,u;(l=i==null?void 0:i.preventDefault)==null||l.call(i),(u=i==null?void 0:i.stopPropagation)==null||u.call(i),t==null||t({action:"SKIP"})};k.useEffect(()=>{const i=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var l,u;return(u=(l=n.current)==null?void 0:l.focus)==null?void 0:u.call(l)},0),()=>{document.body.style.overflow=i}},[]);const o=i=>()=>{t==null||t({action:"OPEN",open:String(i).toUpperCase()})},s=[{key:"mix",title:"Mix Produtos",lines:["Nvel A: $12000","Nvel B: $6000","Nvel C: $3000","Nvel D: $1000"],onBuy:o("MIX")},{key:"gestor",title:"Gestor Comercial",lines:["Contratao: $5000","Manuteno: $3000"],onBuy:o("MANAGER")},{key:"inside",title:"Inside Sales",lines:["Contratao: $3000","Manuteno: $2000"],onBuy:o("INSIDE")},{key:"field",title:"Field Sales",lines:["Contratao: $3000","Manuteno: $2000"],onBuy:o("FIELD")},{key:"vendedor",title:"Vendedor Comum",lines:["Contratao: $1500","Despesas: $1000"],onBuy:o("COMMON")},{key:"erp",title:"ERP/Sistemas",lines:["Nvel A: $10000","Nvel B: $4000","Nvel C: $1500","Nvel D: $500"],onBuy:o("ERP")},{key:"carteira",title:"Carteira de Clientes",lines:["Aquisio: $1000"],onBuy:o("CLIENTS")},{key:"training",title:"Treinamento",lines:["Azul: $500","Amarelo: $500","Roxo: $500"],onBuy:o("TRAINING")}];return a.jsx("div",{style:Vn.wrap,role:"dialog","aria-modal":"true",children:a.jsxs("div",{style:Vn.card,children:[a.jsx("button",{ref:n,type:"button",style:Vn.close,onClick:r,"aria-label":"Fechar",children:""}),a.jsx("h2",{style:Vn.title,children:"Direto de Compra  escolha uma casa para adquirir:"}),a.jsxs("div",{style:{marginBottom:8,opacity:.8,fontSize:13},children:["Saldo atual: ",a.jsxs("b",{children:["$",Number(e).toLocaleString()]})]}),a.jsx("div",{style:Vn.grid,children:s.map(i=>a.jsxs("div",{style:Vn.cell,children:[a.jsx("div",{style:Vn.cellTitle,children:i.title}),a.jsx("ul",{style:Vn.lines,children:i.lines.map((l,u)=>a.jsx("li",{children:l},u))}),a.jsx("button",{type:"button",style:Vn.buyBtn,onClick:i.onBuy,children:"Comprar"})]},i.key))}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:16},children:a.jsx("button",{type:"button",style:{...Vn.buyBtn,background:"#666"},onClick:r,children:"No Comprar"})})]})})}const Vn={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(1000px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 16px",fontWeight:800},grid:{display:"grid",gridTemplateColumns:"repeat(4, minmax(180px, 1fr))",gap:12},cell:{background:"#0f1320",border:"1px solid rgba(255,255,255,.08)",borderRadius:12,padding:12,display:"flex",flexDirection:"column",gap:8,minHeight:160},cellTitle:{fontWeight:800,marginBottom:4},lines:{margin:0,padding:"0 0 0 16px",opacity:.85,lineHeight:1.3},buyBtn:{marginTop:"auto",alignSelf:"center",minWidth:140,padding:"10px 14px",borderRadius:10,border:"none",background:"#3fbf49",color:"#09110f",fontWeight:900,cursor:"pointer"}};function mf({onResolve:t,currentCash:e=0}){const n=k.useRef(null),[r,o]=k.useState(""),{pushModal:s,awaitTop:i}=qt(),l=3e3,u=2e3,c=1500,d=k.useMemo(()=>{const m=Number(r);return Number.isFinite(m)&&m>0?Math.floor(m):0},[r]),h=d*l,f=d>0,g=Math.max(0,Math.floor(Number(e||0)/l)),x=m=>{var y,w;(y=m==null?void 0:m.preventDefault)==null||y.call(m),(w=m==null?void 0:m.stopPropagation)==null||w.call(m),t==null||t({action:"SKIP"})},b=m=>{const y=Number(r)||0,w=Math.min(g||1/0,y+m);o(w||"")},_=()=>o(g||""),p=async()=>{if(!f)return;const m=Number(e||0),y=Number(h||0);if(m<y){s(a.jsx(fr,{requiredAmount:y,currentCash:m,title:"Saldo insuficiente para contratar Inside Sales",message:`Voc precisa de $ ${y.toLocaleString()} mas possui $ ${m.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",qty:d,headcount:d,unitHire:l,total:h,cost:h,totalCost:h,baseExpense:u,baseRevenue:c})};return k.useEffect(()=>{const m=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var y,w;return(w=(y=n.current)==null?void 0:y.focus)==null?void 0:w.call(y)},0),()=>{document.body.style.overflow=m}},[]),a.jsx("div",{style:ct.wrap,role:"dialog","aria-modal":"true","aria-label":"Inside Sales",children:a.jsxs("div",{style:ct.card,children:[a.jsx("button",{ref:n,type:"button",style:ct.close,onClick:x,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:ct.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Inside Sales"})," quer comprar:"]}),a.jsxs("div",{style:ct.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"INSIDE SALES (SDR/BDR + CLOSER + CS)"}),a.jsxs("div",{children:[a.jsx("b",{children:"Base para clculo despesa:"}),"  quantidade ",a.jsx("b",{children:"field sales"})," ou ",a.jsx("b",{children:"inside sales"}),"."]}),a.jsxs("div",{children:[a.jsx("b",{children:"Base para clculo faturamento:"}),"  quantidade ",a.jsx("b",{children:"mxima de clientes que cada vendedor pode atender"}),"."]})]}),a.jsxs("div",{style:ct.saldoRow,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:g})]})]}),a.jsxs("div",{style:ct.inputRow,children:[a.jsx("input",{type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Inside Sales",value:r,onChange:m=>o(m.target.value),style:ct.input}),a.jsxs("div",{style:ct.quickBtns,children:[a.jsx("button",{type:"button",style:ct.quickBtn,onClick:()=>b(1),children:"+1"}),a.jsx("button",{type:"button",style:ct.quickBtn,onClick:()=>b(5),children:"+5"}),a.jsx("button",{type:"button",style:ct.quickBtn,onClick:()=>b(10),children:"+10"}),a.jsx("button",{type:"button",style:{...ct.quickBtn,fontWeight:900},onClick:_,children:"Mx"})]}),a.jsxs("div",{style:ct.totalBox,children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(h).toLocaleString()]})]})]}),a.jsxs("div",{style:ct.cards,children:[a.jsx(ki,{title:"Sem certificado",bg:"#2a2f3b",pill:"BASE",lines:[`Contratao: $ ${l.toLocaleString()}`,`Despesa: $ ${u.toLocaleString()}`,`Faturamento: $ ${c.toLocaleString()}`]}),a.jsx(ki,{title:"1 certificado",bg:"#f1c40f",pill:"NVEL 1",dark:!0,lines:["Contratao: ","Despesa: $ 2.100","Faturamento: $ 2.000"]}),a.jsx(ki,{title:"2 certificados",bg:"#a78bfa",pill:"NVEL 2",dark:!0,lines:["Contratao: ","Despesa: $ 2.200","Faturamento: $ 2.500"]}),a.jsx(ki,{title:"3 certificados",bg:"#8b5cf6",pill:"NVEL 3",dark:!0,lines:["Contratao: ","Despesa: $ 2.300","Faturamento: $ 3.000"]})]}),a.jsxs("div",{style:ct.actions,children:[a.jsx("button",{type:"button",style:{...ct.bigBtn,background:"#666",color:"#fff"},onClick:x,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...ct.bigBtn,background:f?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:p,disabled:!f,title:f?void 0:"Informe uma quantidade vlida",children:["Comprar ",f?`($ ${h.toLocaleString()})`:""]})]})]})})}function ki({title:t,pill:e,lines:n,bg:r,dark:o=!1}){return a.jsxs("div",{style:{...ct.cardItem,background:r,color:o?"#111":"#fff",borderColor:"rgba(255,255,255,.15)"},children:[a.jsxs("div",{style:ct.cardHeader,children:[a.jsx("span",{style:{...ct.pill,background:o?"#111":"#fff",color:o?"#fff":"#111"},children:e}),a.jsx("div",{style:{fontWeight:900},children:t})]}),a.jsx("ul",{style:ct.lines,children:n.map((s,i)=>a.jsx("li",{children:s},i))})]})}const ct={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldoRow:{display:"flex",justifyContent:"space-between",gap:12,padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10,marginBottom:8},inputRow:{display:"grid",gridTemplateColumns:"1fr auto auto",alignItems:"center",gap:10,marginBottom:12},input:{height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6},quickBtn:{minWidth:44,height:42,borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",fontWeight:800,cursor:"pointer",padding:"0 10px"},totalBox:{padding:"8px 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#0f1320",fontWeight:900},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,margin:"8px 0 14px"},cardItem:{border:"1px solid",borderRadius:14,padding:"14px"},cardHeader:{display:"flex",alignItems:"center",gap:8,marginBottom:8},pill:{fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:8},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function gf({onResolve:t,unitAcquisition:e=1e3,unitMaintenance:n=50,currentCash:r=0}){const o=k.useRef(null),s=k.useRef(null),{pushModal:i,awaitTop:l}=qt(),[u,c]=k.useState(""),d=k.useMemo(()=>{const E=Math.floor(Number(u));return Number.isFinite(E)&&E>0?E:0},[u]),h=Number(e||0),f=Number(n||0),g=Number(r||0),x=k.useMemo(()=>h<=0?0:Math.max(0,Math.floor(g/h)),[g,h]),b=d*h,_=d*f,p=d>0,m=E=>{var N,D;(N=E==null?void 0:E.preventDefault)==null||N.call(E),(D=E==null?void 0:E.stopPropagation)==null||D.call(E),t==null||t({action:"SKIP"})},y=async()=>{if(p){if(g<b){i(a.jsx(fr,{requiredAmount:b,currentCash:g,title:"Saldo insuficiente para comprar clientes",message:"Voc no possui saldo suficiente para concluir esta aquisio.",okLabel:"Entendi"})),await l();return}t==null||t({action:"BUY",qty:d,unitAcquisition:h,totalCost:b,unitMaintenance:f,maintenanceDelta:_,bensDelta:b,clientsAdded:d})}};k.useEffect(()=>{const E=document.body.style.overflow;document.body.style.overflow="hidden";const N=setTimeout(()=>{var A,v;return(v=(A=o.current)==null?void 0:A.focus)==null?void 0:v.call(A)},0),D=setTimeout(()=>{var A,v;return(v=(A=s.current)==null?void 0:A.focus)==null?void 0:v.call(A)},50),S=A=>{A.key==="Enter"&&(A.preventDefault(),y())};return window.addEventListener("keydown",S),()=>{document.body.style.overflow=E,window.removeEventListener("keydown",S),clearTimeout(N),clearTimeout(D)}},[]);const w=E=>{const N=Math.max(0,Math.min(Math.floor(Number(E)||0),1e6));c(String(N))};return a.jsx("div",{style:jt.wrap,role:"dialog","aria-modal":"true",onMouseDown:E=>{E.target===E.currentTarget&&E.stopPropagation()},children:a.jsxs("div",{style:jt.card,onMouseDown:E=>E.stopPropagation(),children:[a.jsx("button",{ref:o,type:"button",style:jt.close,onClick:m,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:jt.title,children:["Voc pode escolher quantos clientes quer comprar,",a.jsx("br",{}),"Digite o nmero de clientes:"]}),a.jsxs("p",{style:jt.warn,children:[a.jsx("b",{children:"Mas cuidado com a capacidade de atendimento da sua equipe!"}),a.jsx("br",{}),"Se o jogador adquirir mais clientes do que os vendedores podem atender, assim que passar na casa ",a.jsx("i",{children:"Faturamento do Ms"})," no receber o faturamento dos clientes excedentes e perder o(s) cliente(s) que no foram atendidos."]}),a.jsxs("div",{style:jt.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",g.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:x})]})]}),a.jsxs("div",{style:jt.qtyRow,children:[a.jsx("input",{ref:s,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Clientes",value:u,onChange:E=>w(E.target.value),style:jt.input}),a.jsxs("div",{style:jt.quickBtns,children:[a.jsx("button",{type:"button",style:jt.qbtn,onClick:()=>w(d+1),children:"+1"}),a.jsx("button",{type:"button",style:jt.qbtn,onClick:()=>w(d+5),children:"+5"}),a.jsx("button",{type:"button",style:jt.qbtn,onClick:()=>w(d+10),children:"+10"}),a.jsx("button",{type:"button",style:jt.qbtn,onClick:()=>w(x),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:jt.summary,children:[a.jsxs("div",{children:["Preo por cliente: ",a.jsxs("b",{children:["$ ",h.toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal por cliente: ",a.jsxs("b",{children:["$ ",f.toLocaleString()]})]})]}),a.jsxs("div",{style:jt.summaryStrong,children:[a.jsxs("div",{children:["Total compra: ",a.jsxs("b",{children:["$ ",Number(b).toLocaleString()]})]}),a.jsxs("div",{children:["Manuteno mensal adicionada: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]})]}),a.jsxs("div",{style:jt.actions,children:[a.jsx("button",{type:"button",style:{...jt.bigBtn,background:"#666",color:"#fff"},onClick:m,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...jt.bigBtn,background:p?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:y,disabled:!p,title:p?g<b?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",p?`($ ${b.toLocaleString()})`:""]})]})]})})}const jt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(820px, 92vw)",maxWidth:820,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},warn:{background:"#271c12",border:"1px solid rgba(255,180,0,.35)",color:"#ffd489",borderRadius:10,padding:"10px 12px",margin:"0 0 12px"},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},summary:{display:"flex",justifyContent:"space-between",gap:10,border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginBottom:8,fontWeight:700,flexWrap:"wrap"},summaryStrong:{display:"flex",justifyContent:"space-between",gap:10,border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginBottom:10,fontWeight:800,flexWrap:"wrap"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:4,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function yf({onResolve:t,unitHire:e=5e3,unitExpense:n=3e3,managesUpTo:r=7,currentCash:o=0}){const s=k.useRef(null),i=k.useRef(null),{pushModal:l,awaitTop:u}=qt(),[c,d]=k.useState(""),h=Number(e||0),f=Number(n||0),g=Number(o||0),x=k.useMemo(()=>{const N=Math.floor(Number(c));return Number.isFinite(N)&&N>0?N:0},[c]),b=k.useMemo(()=>h<=0?0:Math.max(0,Math.floor(g/h)),[g,h]),_=x*h,p=x*f,m=x>0,y=N=>{const D=Math.floor(Number(N)||0),S=Math.max(0,Math.min(D,1e6));d(String(S))},w=N=>{var D,S;(D=N==null?void 0:N.preventDefault)==null||D.call(N),(S=N==null?void 0:N.stopPropagation)==null||S.call(N),t==null||t({action:"SKIP"})},E=async()=>{if(m){if(g<_){l(a.jsx(fr,{requiredAmount:_,currentCash:g,title:"Saldo insuficiente para contratar Gestores",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await u();return}t==null||t({action:"BUY",role:"MANAGER",qty:x,headcount:x,gestoresDelta:x,unitHire:h,unitExpense:f,totalHire:_,totalExpense:p,cost:_,total:_,cashDelta:-_,expenseDelta:p,hudUpdate:{category:"Gestores Comerciais",addQty:x}})}};return k.useEffect(()=>{const N=document.body.style.overflow;document.body.style.overflow="hidden";const D=setTimeout(()=>{var v,T;return(T=(v=s.current)==null?void 0:v.focus)==null?void 0:T.call(v)},0),S=setTimeout(()=>{var v,T;return(T=(v=i.current)==null?void 0:v.focus)==null?void 0:T.call(v)},60),A=v=>{v.key==="Enter"&&(v.preventDefault(),E())};return window.addEventListener("keydown",A),()=>{document.body.style.overflow=N,window.removeEventListener("keydown",A),clearTimeout(D),clearTimeout(S)}},[]),a.jsx("div",{style:Ue.wrap,role:"dialog","aria-modal":"true",onMouseDown:N=>{N.target===N.currentTarget&&N.stopPropagation()},children:a.jsxs("div",{style:Ue.card,onMouseDown:N=>N.stopPropagation(),children:[a.jsx("button",{ref:s,type:"button",style:Ue.close,onClick:w,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Ue.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Gestores"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de gestores:"]}),a.jsxs("div",{style:Ue.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",g.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{style:Ue.qtyRow,children:[a.jsx("input",{ref:i,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Gestores",value:c,onChange:N=>y(N.target.value),style:Ue.input}),a.jsxs("div",{style:Ue.quickBtns,children:[a.jsx("button",{type:"button",style:Ue.qbtn,onClick:()=>y(x+1),children:"+1"}),a.jsx("button",{type:"button",style:Ue.qbtn,onClick:()=>y(x+5),children:"+5"}),a.jsx("button",{type:"button",style:Ue.qbtn,onClick:()=>y(x+10),children:"+10"}),a.jsx("button",{type:"button",style:Ue.qbtn,onClick:()=>y(b),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:Ue.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"GESTOR COMERCIAL"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo de despesa: ",a.jsx("b",{children:"x quantidade de Gestores"}),".",a.jsx("br",{}),"Cada Gestor gerencia at ",a.jsx("b",{children:r})," colaboradores."]}),a.jsxs("div",{style:Ue.table,children:[a.jsxs("div",{style:Ue.trHead,children:[a.jsx("div",{style:Ue.th,children:"Certificao"}),a.jsx("div",{style:Ue.th,children:"Contratao"}),a.jsx("div",{style:Ue.th,children:"Despesa"}),a.jsx("div",{style:Ue.th,children:"Efeito"})]}),a.jsx(Ei,{label:"Sem Certificado",hire:5e3,expense:3e3,revenue:"potencializa colaboradores em 20%"}),a.jsx(Ei,{label:"Com 1 certificado",hire:"-",expense:3500,revenue:"potencializa colaboradores em 30%"}),a.jsx(Ei,{label:"Com 2 certificados",hire:"-",expense:4e3,revenue:"potencializa colaboradores em 40%"}),a.jsx(Ei,{label:"Com 3 certificados",hire:"-",expense:4500,revenue:"potencializa colaboradores em 60%"})]})]}),a.jsxs("div",{style:Ue.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / gestor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / gestor"]})]}),a.jsxs("div",{style:Ue.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]})]}),a.jsxs("div",{style:Ue.actions,children:[a.jsx("button",{type:"button",style:{...Ue.bigBtn,background:"#666",color:"#fff"},onClick:w,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...Ue.bigBtn,background:m?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:E,disabled:!m,title:m?g<_?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",m?`(${x})`:""]})]})]})})}function Ei({label:t,hire:e,expense:n,revenue:r}){const o=s=>typeof s=="number"?`$ ${Number(s).toLocaleString()}`:s;return a.jsxs("div",{style:Ue.tr,children:[a.jsx("div",{style:Ue.td,children:t}),a.jsx("div",{style:Ue.td,children:o(e)}),a.jsx("div",{style:Ue.td,children:o(n)}),a.jsx("div",{style:Ue.td,children:r})]})}const Ue={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"12px",background:"#101522",marginBottom:12},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,overflow:"hidden"},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 3fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 3fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function vf({onResolve:t,unitHire:e=3e3,unitExpense:n=2e3,attendsUpTo:r=5,currentCash:o=0}){const s=k.useRef(null),i=k.useRef(null),{pushModal:l,awaitTop:u}=qt(),[c,d]=k.useState(""),h=Number(e||0),f=Number(n||0),g=Number(o||0),x=k.useMemo(()=>{const S=Math.floor(Number(c));return Number.isFinite(S)&&S>0?S:0},[c]),b=k.useMemo(()=>h<=0?0:Math.max(0,Math.floor(g/h)),[g,h]),_=x*h,p=x*f,y=x*1500,w=x>0,E=S=>{const A=Math.floor(Number(S)||0),v=Math.max(0,Math.min(A,1e6));d(String(v))},N=S=>{var A,v;(A=S==null?void 0:S.preventDefault)==null||A.call(S),(v=S==null?void 0:S.stopPropagation)==null||v.call(S),t==null||t({action:"SKIP"})},D=async()=>{if(w){if(g<_){l(a.jsx(fr,{requiredAmount:_,currentCash:g,title:"Saldo insuficiente para contratar Field Sales",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await u();return}t==null||t({action:"BUY",qty:x,unitHire:h,unitExpense:f,totalHire:_,totalExpense:p,cashDelta:-_,expenseDelta:p,revenueDelta:y,cost:_,total:_,role:"FIELD"})}};return k.useEffect(()=>{const S=document.body.style.overflow;document.body.style.overflow="hidden";const A=setTimeout(()=>{var O,$;return($=(O=s.current)==null?void 0:O.focus)==null?void 0:$.call(O)},0),v=setTimeout(()=>{var O,$;return($=(O=i.current)==null?void 0:O.focus)==null?void 0:$.call(O)},50),T=O=>{O.key==="Enter"&&(O.preventDefault(),D())};return window.addEventListener("keydown",T),()=>{document.body.style.overflow=S,window.removeEventListener("keydown",T),clearTimeout(A),clearTimeout(v)}},[]),a.jsx("div",{style:ze.wrap,role:"dialog","aria-modal":"true",onMouseDown:S=>{S.target===S.currentTarget&&S.stopPropagation()},children:a.jsxs("div",{style:ze.card,onMouseDown:S=>S.stopPropagation(),children:[a.jsx("button",{ref:s,type:"button",style:ze.close,onClick:N,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:ze.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Field Sales"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de vendedores:"]}),a.jsxs("div",{style:ze.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",g.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{style:ze.qtyRow,children:[a.jsx("input",{ref:i,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Field Sales",value:c,onChange:S=>E(S.target.value),style:ze.input}),a.jsxs("div",{style:ze.quickBtns,children:[a.jsx("button",{type:"button",style:ze.qbtn,onClick:()=>E(x+1),children:"+1"}),a.jsx("button",{type:"button",style:ze.qbtn,onClick:()=>E(x+5),children:"+5"}),a.jsx("button",{type:"button",style:ze.qbtn,onClick:()=>E(x+10),children:"+10"}),a.jsx("button",{type:"button",style:ze.qbtn,onClick:()=>E(b),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:ze.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"FIELD SALES (REPRESENTANTES COMERCIAIS)"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo de despesa: ",a.jsx("b",{children:"x quantidade de Field Sales"}),".",a.jsx("br",{}),"Base para clculo de faturamento: ",a.jsx("b",{children:"x quantidade mxima de clientes que cada vendedor pode atender"}),".",a.jsx("br",{}),"Cada vendedor atende at ",a.jsx("b",{children:r})," clientes."]}),a.jsxs("div",{style:ze.table,children:[a.jsxs("div",{style:ze.trHead,children:[a.jsx("div",{style:ze.th,children:"Certificao"}),a.jsx("div",{style:ze.th,children:"Contratao"}),a.jsx("div",{style:ze.th,children:"Despesa"}),a.jsx("div",{style:ze.th,children:"Faturamento"})]}),a.jsx(ji,{label:"S/ Certificado",hire:"$ 3.000",expense:"$ 2.000",revenue:"$ 1.500"}),a.jsx(ji,{label:"Com 1 certificado",hire:"-",expense:"$ 2.100",revenue:"$ 2.000"}),a.jsx(ji,{label:"Com 2 certificados",hire:"-",expense:"$ 2.200",revenue:"$ 2.500"}),a.jsx(ji,{label:"Com 3 certificados",hire:"-",expense:"$ 2.300",revenue:"$ 3.000"})]})]}),a.jsxs("div",{style:ze.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / vendedor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / vendedor"]})]}),a.jsxs("div",{style:ze.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]})]}),a.jsxs("div",{style:ze.actions,children:[a.jsx("button",{type:"button",style:{...ze.bigBtn,background:"#666",color:"#fff"},onClick:N,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...ze.bigBtn,background:w?"#75e16c":"#365b31",color:"#0b120a"},onClick:D,disabled:!w,title:w?g<_?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",w?`(${x})`:""]})]})]})})}function ji({label:t,hire:e,expense:n,revenue:r}){return a.jsxs("div",{style:ze.tr,children:[a.jsx("div",{style:ze.td,children:t}),a.jsx("div",{style:ze.td,children:e}),a.jsx("div",{style:ze.td,children:n}),a.jsx("div",{style:ze.td,children:r})]})}const ze={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"12px",background:"#101522",marginBottom:12},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,overflow:"hidden"},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function xf({onResolve:t,unitHire:e=1500,unitExpense:n=1e3,attendsUpTo:r=2,currentCash:o=0}){const[s,i]=k.useState(""),l=k.useRef(null),u=k.useRef(null),{pushModal:c,awaitTop:d}=qt(),h=Number(e||0),f=Number(n||0),g=Number(o||0),x=600,b=k.useMemo(()=>{const D=Math.floor(Number(s));return Number.isFinite(D)&&D>0?D:0},[s]),_=k.useMemo(()=>h<=0?0:Math.max(0,Math.floor(g/h)),[g,h]),p=k.useMemo(()=>b*h,[b,h]),m=k.useMemo(()=>b*f,[b,f]),y=b>0,w=D=>{const S=Math.floor(Number(D)||0),A=Math.max(0,Math.min(S,1e6));i(String(A))},E=D=>{var S;(S=D==null?void 0:D.stopPropagation)==null||S.call(D),t==null||t({action:"SKIP"})},N=async()=>{if(!y)return;if(g<p){c(a.jsx(fr,{requiredAmount:p,currentCash:g,title:"Saldo insuficiente para contratar vendedores",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await d();return}const D={action:"BUY",role:"COMMON",qty:b,headcount:b,unitHire:h,unitExpense:f,totalHire:p,totalExpense:m,total:p,cost:p,attendsUpTo:r,cashDelta:-p,expenseDelta:m,revenueDelta:x*b,revenuePerSeller:x,hudUpdate:{category:"Vendedores Comuns",addQty:b}};t==null||t(D)};return k.useEffect(()=>{const D=document.body.style.overflow;document.body.style.overflow="hidden";const S=setTimeout(()=>{var T,O;return(O=(T=l.current)==null?void 0:T.focus)==null?void 0:O.call(T)},0),A=setTimeout(()=>{var T,O;return(O=(T=u.current)==null?void 0:T.focus)==null?void 0:O.call(T)},50),v=T=>{T.key==="Enter"&&(T.preventDefault(),N())};return window.addEventListener("keydown",v),()=>{document.body.style.overflow=D,window.removeEventListener("keydown",v),clearTimeout(S),clearTimeout(A)}},[]),a.jsx("div",{style:Fe.wrap,role:"dialog","aria-modal":"true","aria-label":"Comprar Vendedores Comuns",onMouseDown:D=>{D.target===D.currentTarget&&D.stopPropagation()},children:a.jsxs("div",{style:Fe.card,onMouseDown:D=>D.stopPropagation(),children:[a.jsx("button",{ref:l,type:"button",style:Fe.close,onClick:E,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Fe.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Vendedores Comuns"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de vendedores:"]}),a.jsxs("div",{style:Fe.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",g.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:_})]})]}),a.jsxs("div",{style:Fe.qtyRow,children:[a.jsx("input",{ref:u,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Vendedores Comuns",value:s,onChange:D=>w(D.target.value),style:Fe.input}),a.jsxs("div",{style:Fe.quickBtns,children:[a.jsx("button",{type:"button",style:Fe.qbtn,onClick:()=>w(b+1),children:"+1"}),a.jsx("button",{type:"button",style:Fe.qbtn,onClick:()=>w(b+5),children:"+5"}),a.jsx("button",{type:"button",style:Fe.qbtn,onClick:()=>w(b+10),children:"+10"}),a.jsx("button",{type:"button",style:Fe.qbtn,onClick:()=>w(_),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:Fe.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"VENDEDOR COMUM (FAZ TUDO)"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo despesa: ",a.jsx("b",{children:"x quantidade vendedor comum"}),".",a.jsx("br",{}),"Base para clculo faturamento: ",a.jsx("b",{children:"x quantidade mxima de clientes que cada vendedor pode atender"}),".",a.jsx("br",{}),a.jsxs("b",{children:["Atende at ",r," clientes"]}),"."]}),a.jsxs("div",{style:Fe.table,children:[a.jsxs("div",{style:Fe.trHead,children:[a.jsx("div",{style:Fe.th,children:"Certificao"}),a.jsx("div",{style:Fe.th,children:"Contratao"}),a.jsx("div",{style:Fe.th,children:"Despesa"}),a.jsx("div",{style:Fe.th,children:"Faturamento"})]}),a.jsx(Ci,{label:"S/ Certificado",hire:"$ 1.500",expense:"$ 1.000",revenue:"$ 600"}),a.jsx(Ci,{label:"Com 1 certificado",hire:"-",expense:"$ 1.100",revenue:"$ 700"}),a.jsx(Ci,{label:"Com 2 certificados",hire:"-",expense:"$ 1.200",revenue:"$ 800"}),a.jsx(Ci,{label:"Com 3 certificados",hire:"-",expense:"$ 1.300",revenue:"$ 900"})]})]}),a.jsxs("div",{style:Fe.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / vendedor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / vendedor"]})]}),a.jsxs("div",{style:Fe.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(m).toLocaleString()]})]})]}),a.jsxs("div",{style:Fe.actions,children:[a.jsx("button",{type:"button",style:{...Fe.bigBtn,background:"#666",color:"#fff"},onClick:E,children:"No comprar"}),a.jsx("button",{type:"button",disabled:!y,style:{...Fe.bigBtn,background:y?"#7cbe1a":"#3a3f4a",color:"#0d1200",fontWeight:900},onClick:N,title:y?g<p?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:"Comprar"})]})]})})}function Ci({label:t,hire:e,expense:n,revenue:r}){return a.jsxs("div",{style:Fe.tr,children:[a.jsx("div",{style:Fe.td,children:t}),a.jsx("div",{style:Fe.td,children:e}),a.jsx("div",{style:Fe.td,children:n}),a.jsx("div",{style:Fe.td,children:r})]})}const Fe={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#111522",color:"#eef2f7",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{background:"#161a28",border:"1px solid rgba(255,255,255,.12)",borderRadius:14,padding:14,marginTop:6},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,overflow:"hidden",marginTop:8},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function bf({onResolve:t,currentCash:e,currentLevel:n=null,mixOwned:r=null}){const o=k.useRef(null),{pushModal:s,awaitTop:i}=qt(),l={A:{compra:12e3,despesa:700,faturamento:1200,color:"#1d4ed8",pill:"NVEL A",label:"100 produtos"},B:{compra:6e3,despesa:400,faturamento:600,color:"#16a34a",pill:"NVEL B",label:"50 produtos"},C:{compra:3e3,despesa:200,faturamento:300,color:"#f59e0b",pill:"NVEL C",label:"20 produtos"},D:{compra:1e3,despesa:50,faturamento:100,color:"#6b7280",pill:"NVEL D",label:"5 produtos"}};async function u(d){if(r?r[d]===!0:n===d)return;const f=l[d],g=Number((f==null?void 0:f.compra)||0),x=Number(e);if(Number.isFinite(x)&&x>=0&&x<g){s(a.jsx(fr,{requiredAmount:g,currentCash:x,title:"Saldo insuficiente para adquirir o Mix de Produtos",message:`Voc precisa de $ ${g.toLocaleString()} mas possui $ ${x.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",level:d,...f})}function c(){t==null||t({action:"SKIP"})}return k.useEffect(()=>{const d=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var h,f;return(f=(h=o.current)==null?void 0:h.focus)==null?void 0:f.call(h)},0),()=>{document.body.style.overflow=d}},[]),a.jsx("div",{style:Xt.wrap,role:"dialog","aria-modal":"true","aria-label":"Mix de Produtos",children:a.jsxs("div",{style:Xt.card,children:[a.jsx("button",{ref:o,type:"button",style:Xt.close,onClick:c,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Xt.title,children:["Escolha um ",a.jsx("b",{children:"mix de produtos"}),":"]}),a.jsxs("div",{style:Xt.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"MIX DE PRODUTOS"}),a.jsxs("div",{children:["Base para clculo de ",a.jsx("b",{children:"Despesa"}),"/",a.jsx("b",{children:"Faturamento"}),": multiplicar pela ",a.jsx("b",{children:"quantidade total de clientes"}),"."]})]}),Number.isFinite(Number(e))&&a.jsxs("div",{style:Xt.saldo,children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsx("div",{style:Xt.cards,children:["A","B","C","D"].map(d=>{const h=l[d],f=r?r[d]===!0:n===d,g=f;return a.jsxs("div",{style:{...Xt.cardItem,borderColor:f?"#16a34a":"rgba(255,255,255,.15)",opacity:g?.6:1},children:[a.jsx("div",{style:{...Xt.pill,background:f?"#16a34a":"#fff",color:f?"#fff":"#111"},children:f?" ADQUIRIDO":h.pill}),a.jsx("div",{style:{...Xt.cardBadge,background:h.color}}),a.jsxs("ul",{style:Xt.lines,children:[a.jsx("li",{children:a.jsx("b",{children:h.label})}),a.jsxs("li",{children:["Compra: ",a.jsxs("b",{children:["$ ",h.compra.toLocaleString()]})]}),a.jsxs("li",{children:["Despesa: ",a.jsxs("b",{children:["$ ",h.despesa.toLocaleString()]})]}),a.jsxs("li",{children:["Faturamento: ",a.jsxs("b",{children:["$ ",h.faturamento.toLocaleString()]})]})]}),a.jsx("button",{type:"button",style:{...Xt.buyBtn,background:g?"#6b7280":"#2442f9",cursor:g?"not-allowed":"pointer"},onClick:()=>u(d),disabled:g,title:g?`Mix nvel ${d} j adquirido`:`Comprar Mix de Produtos ${d}`,children:g?"J Adquirido":`Comprar ${d}`})]},d)})}),a.jsx("div",{style:Xt.actions,children:a.jsx("button",{type:"button",style:{...Xt.bigBtn,background:"#444",color:"#fff"},onClick:c,children:"No comprar"})})]})})}const Xt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldo:{margin:"0 0 10px",padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,marginTop:8},cardItem:{background:"#0f1320",border:"1px solid",borderRadius:14,padding:"12px",display:"flex",flexDirection:"column",gap:8},cardBadge:{width:"100%",height:6,borderRadius:999,opacity:.9},pill:{alignSelf:"flex-start",fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999,color:"#111"},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},buyBtn:{marginTop:"auto",padding:"10px 12px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer",background:"#2442f9",color:"#fff"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:14},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function Gx({onResolve:t,player:e={}}){const n=k.useRef(null),r=(_,p=0)=>Number.isFinite(Number(_))?Number(_):p,o=_=>r(_.am,0)>0,s=_=>r(_.az,0)>0,i=_=>r(_.rox,0)>0,l=_=>String(_.erpLevel||_.erpSistemas||"D").toUpperCase()==="A",u=_=>{const p=String(_.mixProdutos||"D").toUpperCase();return p==="A"||p==="B"},c=_=>{var m;const p=y=>{if(!y)return 0;try{const w=Array.isArray(y)?y:Object.values(y);return new Set(w).size}catch{return 0}};return(m=_.trainingsByVendor)!=null&&m.gestor?p(_.trainingsByVendor.gestor):r(_.gestoresCertificados,0)},d=_=>r(_.vendedoresComuns)+r(_.insideSales)+r(_.fieldSales)+r(_.gestores??_.gestoresComerciais??_.managers),h=k.useMemo(()=>[{id:"gov_fgts",kind:"SORTE",title:"Ao Governamental Positiva",text:"Liberao de FGTS aumentou o poder de compra. Receba 5 novos clientes (se tiver equipe para atender).",clientsDelta:5},{id:"referral_bonus",kind:"SORTE",title:"Indicao Lucrativa",text:"Um cliente indicou amigos e a primeira compra foi tima. Receba R$ 800,00.",cashDelta:800},{id:"network_cert_mgr",kind:"SORTE",title:"Rede Estratgica",text:"Para cada gestor com certificado, receba R$ 5.000,00.",_compute:_=>({cashDelta:5e3*c(_)})},{id:"innovation_invest",kind:"SORTE",title:"Inovao Premiada",text:"Se tiver infraestrutura (mix/sistemas) nvel A ou B, receba aporte de R$ 25.000,00.",_compute:_=>({cashDelta:u(_)?25e3:0})},{id:"segmentation",kind:"SORTE",title:"Segmentao Inteligente",text:"Novo segmento lucrativo. Receba R$ 1.000,00.",cashDelta:1e3},{id:"casa_bonus_10k",kind:"SORTE",title:"Casagrande Insights",text:"Implementao bem-sucedida. Receba R$ 10.000,00.",cashDelta:1e4},{id:"casa_network_7k",kind:"SORTE",title:"Rede de Contatos Valiosa",text:"Parceria estratgica. Ganhe R$ 7.000,00.",cashDelta:7e3},{id:"casa_strategy_5k",kind:"SORTE",title:"Estratgia Personalizada",text:"Processos melhorados. Receba R$ 5.000,00.",cashDelta:5e3},{id:"casa_best_practices_8k",kind:"SORTE",title:"Melhores Prticas",text:"Eficincia aumentada. Receba R$ 8.000,00.",cashDelta:8e3},{id:"casa_start_6k",kind:"SORTE",title:"Satisfao do Cliente em Alta",text:"Fidelidade e vendas sobem. Receba R$ 6.000,00.",cashDelta:6e3},{id:"casa_change_cert_blue",kind:"SORTE",title:"Gesto de Mudanas Bem-sucedida",text:"Um vendedor generalista concluiu todos os treinamentos. Ganhe um certificado AZUL para esse vendedor.",_compute:()=>({certDelta:{az:1}})},{id:"training_roi_team",kind:"SORTE",title:"Treinamento Personalizado",text:"Receba R$ 500,00 por membro participante.",_compute:_=>({cashDelta:500*Math.max(0,d(_))})},{id:"purple_award_25k",kind:"SORTE",title:"Profissional do Ano (Roxo)",text:"Se houver pelo menos um colaborador com certificado roxo, receba R$ 25.000,00.",_compute:_=>({cashDelta:i(_)?25e3:0})},{id:"reputation_1500",kind:"SORTE",title:"Reputao Impecvel",text:"timas avaliaes elevam a confiana. Receba R$ 1.500,00.",cashDelta:1500},{id:"client_cheer_per_client",kind:"SORTE",title:"Cliente Promotor",text:"Ganhe R$ 500,00 por cada cliente atual.",_compute:_=>({cashDelta:500*Math.max(0,r(_.clients))})},{id:"big_order_freight_save",kind:"SORTE",title:"Grande Pedido + Frete Econmico",text:"Receba R$ 1.500,00.",cashDelta:1500},{id:"sales_win_2k",kind:"SORTE",title:"Vitria de Vendas",text:"Venda aguardada foi fechada. Receba R$ 2.000,00.",cashDelta:2e3},{id:"missed_admission",kind:"REVES",title:"Admisso No Reportada",text:"Multa governamental. Pague R$ 3.000,00.",cashDelta:-3e3},{id:"office_renovation",kind:"REVES",title:"Renovao Custosa",text:"Gastos de obra. Pague R$ 7.000,00.",cashDelta:-7e3},{id:"env_fine_20k",kind:"REVES",title:"Impacto Ambiental",text:"Multa ambiental. Pague R$ 20.000,00.",cashDelta:-2e4},{id:"key_client_at_risk",kind:"REVES",title:"Cliente Chave em Risco",text:"Sem certificado AMARELO: perca 1 cliente e pague R$ 2.000,00.",_compute:_=>o(_)?{clientsDelta:0,cashDelta:0,_overrideText:"Voc possui certificado amarelo. Nada acontece."}:{clientsDelta:-1,cashDelta:-2e3}},{id:"social_crisis",kind:"REVES",title:"Crise nas Redes",text:"Pague R$ 400,00 e perca 2 clientes.",cashDelta:-400,clientsDelta:-2},{id:"car_break",kind:"REVES",title:"Carro Quebrou",text:"Conserto urgente. Pague R$ 1.000,00.",cashDelta:-1e3},{id:"service_improvement_1k",kind:"REVES",title:"Aprimoramentos de Servio",text:"Pague R$ 1.000,00.",cashDelta:-1e3},{id:"recovery_failed_5k",kind:"REVES",title:"Recuperao Mal Sucedida",text:"Cancele grande pedido. Pague R$ 5.000,00.",cashDelta:-5e3},{id:"discount_pressure_1k",kind:"REVES",title:"Descontos Forados",text:"Sem certificado verde: perca R$ 1.000,00 de lucro.",cashDelta:-1e3},{id:"domino_2k",kind:"REVES",title:"Efeito Domin",text:"Cancelamentos em cadeia. Perca R$ 2.000,00.",cashDelta:-2e3},{id:"needs_change_lose4",kind:"REVES",title:"Necessidades Mudaram",text:"Sem certificado AZUL: perca 4 clientes.",_compute:_=>s(_)?{clientsDelta:0,_overrideText:"Voc possui certificado azul. Nada acontece."}:{clientsDelta:-4}},{id:"payroll_error_1k",kind:"REVES",title:"Erro na Folha",text:"Corrigir problema. Pague R$ 1.000,00.",cashDelta:-1e3},{id:"strike_lose5",kind:"REVES",title:"Greve Inesperada",text:"Atrasos e perdas. Perca 5 clientes.",clientsDelta:-5},{id:"customs_hold_3k",kind:"REVES",title:"Alfndega",text:"Pague R$ 3.000,00.",cashDelta:-3e3},{id:"cyber_breach_7k_or_A",kind:"REVES",title:"Falha de Segurana",text:"Se NO tiver sistemas nvel A, pague R$ 7.000,00.",_compute:_=>({cashDelta:l(_)?0:-7e3})},{id:"supplier_issue_2k",kind:"REVES",title:"Fornecedor em Crise",text:"Expedio expressa. Pague R$ 2.000,00.",cashDelta:-2e3},{id:"reg_change_30k",kind:"REVES",title:"Regulamentao Nova",text:"Adequao de processos. Pague R$ 30.000,00.",cashDelta:-3e4},{id:"bad_mix_2500",kind:"REVES",title:"Mix de Produtos Desequilibrado",text:"Descontos e liquidaes. Pague R$ 2.500,00.",cashDelta:-2500},{id:"quality_crisis",kind:"REVES",title:"Crise de Qualidade",text:"Perca 1 cliente e pague R$ 1.000,00.",cashDelta:-1e3,clientsDelta:-1}],[]),[f]=k.useState(()=>h[Math.floor(Math.random()*h.length)]),g=k.useMemo(()=>{const _={action:"APPLY_CARD",kind:f.kind,id:f.id,title:f.title};if(typeof f._compute=="function"){const m=f._compute(e||{}),{_overrideText:y,...w}=m||{};return{text:y||f.text,payload:{..._,...w}}}const p={};return Number.isFinite(f.cashDelta)&&(p.cashDelta=Number(f.cashDelta)),Number.isFinite(f.clientsDelta)&&(p.clientsDelta=Number(f.clientsDelta)),{text:f.text,payload:{..._,...p}}},[f,e]),x=()=>t==null?void 0:t(g.payload),b=()=>t==null?void 0:t({action:"SKIP"});return k.useEffect(()=>{const _=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var p,m;return(m=(p=n.current)==null?void 0:p.focus)==null?void 0:m.call(p)},0),()=>{document.body.style.overflow=_}},[]),a.jsx("div",{style:xr.wrap,role:"dialog","aria-modal":"true","aria-label":"Sorte e Revs",children:a.jsxs("div",{style:xr.card,children:[a.jsx("button",{ref:n,style:xr.close,onClick:b,"aria-label":"Fechar",children:""}),a.jsx("div",{style:xr.badge(f.kind),children:f.kind==="SORTE"?"SORTE":"REVS"}),f.title&&a.jsx("h2",{style:xr.title,children:f.title}),a.jsx("p",{style:xr.text,children:g.text}),a.jsx("div",{style:xr.footer,children:a.jsx("button",{type:"button",style:xr.okBtn,onClick:x,children:"OK"})})]})})}const xr={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(760px, 92vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:18,padding:"22px",border:"1px solid rgba(255,255,255,.12)",boxShadow:"0 10px 40px rgba(0,0,0,.4)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},badge:t=>({display:"inline-block",padding:"6px 12px",borderRadius:999,fontWeight:900,marginBottom:8,background:t==="SORTE"?"#22c55e":"#ef4444",color:"#111"}),title:{margin:"2px 0 6px",fontWeight:900},text:{fontSize:18,lineHeight:1.5,opacity:.95,margin:"6px 0 14px"},footer:{display:"flex",justifyContent:"center"},okBtn:{minWidth:140,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer",background:"#fff",color:"#111"}};function Hx({value:t=0,onResolve:e}){const n=Number(t||0),r=o=>{var s,i;(s=o==null?void 0:o.preventDefault)==null||s.call(o),(i=o==null?void 0:o.stopPropagation)==null||i.call(o),e==null||e({action:"OK"})};return a.jsx(ei,{zIndex:2147483647,onClose:()=>e==null?void 0:e({action:"CLOSE"}),children:a.jsxs("div",{style:{padding:28,textAlign:"center",pointerEvents:"auto"},children:[a.jsx("div",{style:{fontWeight:900,fontSize:28,color:"#4caf50",letterSpacing:.5,marginBottom:6},children:"FATURAMENTO DO MS"}),a.jsx("div",{style:{opacity:.9,marginBottom:16},children:"Ser creditado o valor do Faturamento ao seu Saldo"}),a.jsxs("div",{style:{fontSize:18,marginBottom:24},children:["no valor de: ",a.jsxs("b",{children:["$ ",n.toLocaleString()]})]}),a.jsx("button",{type:"button",onClick:r,className:"btn",style:{minWidth:120,background:"#8bd65a",color:"#1a1f2a",fontWeight:800,borderRadius:10},children:"OK"})]})})}function Kx({expense:t=0,loanCharge:e=0,onResolve:n}){const r=Number(t||0)+Number(e||0),o=s=>{var i,l;(i=s==null?void 0:s.preventDefault)==null||i.call(s),(l=s==null?void 0:s.stopPropagation)==null||l.call(s),n==null||n({action:"OK"})};return a.jsx(ei,{zIndex:2147483647,onClose:()=>n==null?void 0:n({action:"CLOSE"}),children:a.jsxs("div",{style:{padding:28,textAlign:"center",pointerEvents:"auto"},children:[a.jsx("div",{style:{fontWeight:900,fontSize:26,color:"#ffb74d",letterSpacing:.5,marginBottom:6},children:"DESPESAS DO MS"}),a.jsxs("div",{style:{marginBottom:8},children:["Despesas operacionais:",a.jsxs("b",{children:["-$ ",Number(t).toLocaleString()]})]}),Number(e)>0&&a.jsxs("div",{style:{marginBottom:8,color:"#ffd54f"},children:["Emprstimo cobrado nesta rodada:",a.jsxs("b",{children:["-$ ",Number(e).toLocaleString()]})]}),a.jsxs("div",{style:{margin:"6px 0 18px",opacity:.85},children:["Total a debitar: ",a.jsxs("b",{children:["-$ ",r.toLocaleString()]})]}),a.jsx("button",{type:"button",onClick:o,className:"btn",style:{minWidth:120,background:"#ffcc80",color:"#1a1f2a",fontWeight:800,borderRadius:10},children:"OK"})]})})}const Ne={backdrop:{position:"fixed",inset:0,background:"rgba(0,0,0,.6)",display:"grid",placeItems:"center",zIndex:9999},card:{width:"min(920px, 96vw)",maxHeight:"90vh",overflow:"auto",background:"#15161a",color:"#e9ecf1",border:"1px solid rgba(255,255,255,.08)",borderRadius:20,boxShadow:"0 20px 50px rgba(0,0,0,.5)"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 16px",borderBottom:"1px solid rgba(255,255,255,.08)"},closeBtn:{width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#fff",fontSize:20,cursor:"pointer"},body:{padding:16},lead:{opacity:.95,lineHeight:1.5},bullets:{margin:"8px 0 16px 18px"},rowBtns:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:12,flexWrap:"wrap"},cta:{padding:"12px 16px",border:0,borderRadius:12,color:"#fff",fontWeight:900,cursor:"pointer",boxShadow:"0 10px 24px rgba(0,0,0,.25)"},back:{padding:"10px 14px",borderRadius:12,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#e9ecf1",cursor:"pointer"},subHeader:{marginBottom:8},infoRow:{display:"flex",gap:8,alignItems:"baseline",margin:"4px 0"},input:{width:"100%",padding:"12px 12px",borderRadius:12,background:"#0f1115",color:"#fff",border:"1px solid rgba(255,255,255,.15)",marginTop:10},option:{padding:16,background:"rgba(255,255,255,.04)",border:"1px solid rgba(255,255,255,.08)",borderRadius:14,textAlign:"center",cursor:"pointer"},spin:{width:34,height:34,borderRadius:8,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#fff",fontSize:18,cursor:"pointer"}};function Jx({playerName:t,loanAvailable:e,hasPendingLoan:n,onGoLoan:r,onGoReduce:o,onGoFire:s,onDeclareBankruptcy:i}){return a.jsxs("div",{style:Ne.body,children:[a.jsxs("p",{style:Ne.lead,children:["Voc est sem dinheiro, ",t,". Escolha uma das opes:"]}),n&&a.jsx("div",{style:{...Ne.lead,color:"#ef4444",fontWeight:"bold",marginBottom:"16px"},children:" Voc j possui um emprstimo pendente. Cada jogador s pode ter um emprstimo por vez."}),a.jsxs("ul",{style:Ne.bullets,children:[a.jsxs("li",{children:["Pedir ",a.jsx("b",{children:"emprstimo"})," nico com 50% de juros garantido por 50% dos seus ",a.jsx("b",{children:"BENS"})," (limite ",`$ ${e}`,")."]}),a.jsxs("li",{children:[a.jsx("b",{children:"Reduzir"})," nveis de ",a.jsx("b",{children:"MIX de Produtos"})," ou ",a.jsx("b",{children:"ERP/Sistemas"})," e receber 50% do valor pago."]}),a.jsxs("li",{children:[a.jsx("b",{children:"Demitir"})," funcionrios e receber 50% do valor total."]})]}),a.jsxs("div",{style:Ne.rowBtns,children:[a.jsx("button",{style:{...Ne.cta,background:"#ef4444"},onClick:s,children:"DEMITIR"}),a.jsx("button",{style:{...Ne.cta,background:"#a16207"},onClick:o,children:"REDUZIR"}),a.jsx("button",{style:{...Ne.cta,background:n?"#6b7280":"#16a34a",cursor:n?"not-allowed":"pointer"},onClick:n?void 0:r,disabled:n,children:n?"EMPRSTIMO (J REALIZADO)":"EMPRSTIMO"}),a.jsx("button",{style:{...Ne.cta,background:"#d32f2f",fontWeight:"bold"},onClick:i,children:"DECLARAR FALNCIA"})]})]})}function Yx({loanAvailable:t,alreadyHasLoan:e=!1,onBack:n,onConfirm:r}){const[o,s]=k.useState(""),i=k.useMemo(()=>Math.max(0,Math.floor(Number(o)||0)),[o]),l=!e&&i>0&&i<=Number(t||0),u=()=>{if(e){r==null||r({type:"LOAN_DENIED",reason:"ALREADY_TAKEN"});return}const c=Math.max(0,Math.floor(Number(t)||0)),d=Math.max(0,Math.min(c,i));if(d>0){const h={type:"LOAN",amount:d,cashDelta:d,loan:{amount:d,charged:!1}};console.log("[DEBUG] RecoveryLoan enviando payload:",h),r==null||r(h)}else r==null||r({type:"LOAN_DENIED",reason:"INVALID_AMOUNT"})};return a.jsxs("div",{style:Ne.body,children:[a.jsx("div",{style:Ne.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"EMPRSTIMO"})}),a.jsxs("p",{children:["Voc pode realizar um emprstimo colocando ",a.jsx("b",{children:"50% dos seus BENS"})," como garantia (pago na prxima Despesas Operacionais)."]}),a.jsxs("div",{style:Ne.infoRow,children:[a.jsx("span",{children:"Valor disponvel:"})," ",a.jsxs("b",{children:["$",Number(t||0)]})]}),a.jsxs("div",{style:Ne.infoRow,children:[a.jsx("span",{children:"Valor garantia:"})," ",a.jsxs("b",{children:["$",Number(t||0)]})]}),e&&a.jsx("div",{style:{...Ne.infoRow,color:"#fca5a5",border:"1px solid rgba(255,0,0,.25)",padding:"8px 10px",borderRadius:8,background:"rgba(255,0,0,.06)"},children:"Voc j possui um emprstimo ativo. No  possvel pegar outro."}),a.jsx("input",{style:Ne.input,type:"number",min:0,max:Math.max(0,Number(t||0)),placeholder:"Digite o valor que quer emprestar",value:o,onChange:c=>s(c.target.value),disabled:e}),a.jsxs("div",{style:{fontSize:12,opacity:.8,marginTop:6},children:["Mx: $",Number(t||0),"  valor ser somado ao seu saldo e cobrado na prxima Despesas Operacionais."]}),a.jsxs("div",{style:Ne.rowBtns,children:[a.jsx("button",{style:Ne.back,onClick:n,children:" Voltar"}),a.jsx("button",{style:{...Ne.cta,background:"#16a34a",opacity:l?1:.6,cursor:l?"pointer":"not-allowed"},onClick:u,disabled:!l,children:"Pegar Emprstimo"})]})]})}function Qx(t){const{options:e=[],optionsMix:n,optionsErp:r,mixOwned:o,erpOwned:s,credits:i,snapshot:l,onBack:u,onConfirm:c}=t,d=(...v)=>console.log("[RecoveryReduce]",...v),h={MIX:{accent:"#06B6D4",soft:"rgba(6,182,212,.14)",ring:"rgba(6,182,212,.45)",glow:"rgba(6,182,212,.35)",pillBg:"rgba(6,182,212,.18)",pillFg:"#9FF1FF"},ERP:{accent:"#8B5CF6",soft:"rgba(139,92,246,.14)",ring:"rgba(139,92,246,.45)",glow:"rgba(139,92,246,.35)",pillBg:"rgba(139,92,246,.18)",pillFg:"#E9D5FF"}},f=["A","B","C","D"],g=(v,T,O)=>f.map($=>({key:`${v}-${$}`,group:v,level:$,label:`Nvel ${$}`,credit:Number((T==null?void 0:T[$])??0),owned:!!(O!=null&&O[$])})),x=k.useMemo(()=>Array.isArray(n)&&n.length?n:i!=null&&i.MIX?g("MIX",i.MIX,o):g("MIX",{A:0,B:0,C:0,D:0},o),[n,i,o]),b=k.useMemo(()=>Array.isArray(r)&&r.length?r:i!=null&&i.ERP?g("ERP",i.ERP,s):g("ERP",{A:0,B:0,C:0,D:0},s),[r,i,s]);k.useEffect(()=>{console.groupCollapsed("[RecoveryReduce] props snapshot"),console.log("mixCards:",x),console.log("erpCards:",b),console.log("mixOwned:",o),console.log("erpOwned:",s),console.log("credits:",i),console.groupEnd()},[x,b,o,s,i]);const[_,p]=k.useState([]),[m,y]=k.useState(new Set),[w,E]=k.useState(!1),N=v=>{v.level!=="D"&&(!v.owned||v.owned===!1||m.has(v.key)||v.alreadyReduced||p(T=>T.some($=>$.key===v.key)?T.filter($=>$.key!==v.key):[...T,v]))},D=k.useMemo(()=>_.reduce((v,T)=>v+Number(T.credit||0),0),[_]),S=v=>_.some(T=>T.key===v.key),A=v=>{var re,P;const T=S(v),O=v.level==="D",$=v.owned===!0,U=O||!$||m.has(v.key)||v.alreadyReduced||w,Se=h[v.group]||h.MIX,Ve={...Ne.option,position:"relative",borderRadius:14,background:U?"rgba(148,163,184,.12)":Se.soft,border:T?`2.5px solid ${Se.accent}`:"1px solid rgba(148,163,184,.25)",boxShadow:T?`0 0 0 2px ${Se.ring}, 0 10px 24px ${Se.glow}`:"none",cursor:U?"not-allowed":"pointer",opacity:U?.35:1,transition:"transform .06s ease-out, box-shadow .12s ease-out, border-color .12s"},Xe={fontWeight:900,fontSize:16,marginBottom:8,color:U?"#CBD5E1":"#E5F9FF"},q={fontWeight:700,marginTop:2,color:U?"#A1A1AA":"#FFFFFF"},te={position:"absolute",top:8,right:8,fontSize:11,padding:"3px 8px",borderRadius:999,background:U?"rgba(148,163,184,.22)":Se.pillBg,color:U?"#E5E7EB":Se.pillFg,border:`1px solid ${U?"rgba(148,163,184,.35)":Se.ring}`,letterSpacing:.2};return a.jsxs("button",{onClick:()=>N(v),disabled:U,"aria-pressed":T,style:Ve,title:O?"Nvel D  o bsico e no pode ser reduzido.":$?m.has(v.key)?"Nvel j reduzido nesta sesso.":v.alreadyReduced?"Este nvel j foi reduzido anteriormente. Compre o nvel novamente para poder reduzir.":"":"Este nvel no est disponvel. Compre o nvel novamente para poder reduzir.",onMouseDown:Le=>!U&&(Le.currentTarget.style.transform="translateY(1px)"),onMouseUp:Le=>Le.currentTarget.style.transform="translateY(0)",onMouseLeave:Le=>Le.currentTarget.style.transform="translateY(0)",children:[a.jsx("span",{style:te,children:O?"bsico":$?m.has(v.key)?"vendido":v.alreadyReduced?"j reduzido":"adquirido":"zerado"}),a.jsx("div",{style:Xe,children:v.label}),a.jsx("div",{style:{color:U?"#A1A1AA":"#BFEFFF"},children:"Crdito ao reduzir:"}),a.jsxs("div",{style:q,children:["$",((P=(re=v.credit).toLocaleString)==null?void 0:P.call(re))??v.credit]})]},v.key)};return a.jsxs("div",{style:Ne.body,children:[a.jsx("div",{style:Ne.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"REDUZIR NVEL MIX/ERP"})}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[a.jsxs("div",{style:{padding:8,borderRadius:8,background:"rgba(255,255,255,0.05)"},children:[a.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"MIX PRODUTOS"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12},children:x.map(A)})]}),a.jsxs("div",{style:{padding:8,borderRadius:8,background:"rgba(255,255,255,0.05)"},children:[a.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"ERP/SISTEMAS"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12},children:b.map(A)})]})]}),a.jsxs("div",{style:{marginTop:10,display:"flex",justifyContent:"space-between",alignItems:"center",opacity:.92},children:[a.jsxs("div",{children:["Selecionados: ",a.jsx("b",{children:_.length}),"    Total: ",a.jsxs("b",{children:["$",D.toLocaleString()]})]}),a.jsx("div",{style:{fontSize:12,opacity:.7},children:"S  possvel selecionar nveis adquiridos."})]}),a.jsxs("div",{style:Ne.rowBtns,children:[a.jsx("button",{style:Ne.back,onClick:u,disabled:w,children:" Voltar"}),a.jsx("button",{style:{...Ne.cta,background:"#F59E0B",color:"#101010",fontWeight:900,opacity:_.length&&!w?1:.55},onClick:()=>{if(!_.length||w)return;E(!0),y(T=>{const O=new Set(T);return _.forEach($=>O.add($.key)),O});const v={items:_.map(T=>({...T,selected:!0})),total:D};d("confirm payload =>",v),c==null||c(v),p([]),E(!1)},disabled:!_.length||w,children:"REDUZIR"})]})]})}function Xx({roles:t=[],onBack:e,onConfirm:n}){const r=k.useMemo(()=>t.map(f=>{const g=Number(f.unit??f.total??0),x=Number(f.owned??f.qty??0);return{...f,unit:g,owned:x}}),[t]),[o,s]=k.useState(()=>{const f={};return r.forEach(g=>{f[g.key]=0}),f}),i=f=>`R$ ${Number(f||0).toLocaleString("pt-BR")}`,l=f=>Math.floor(Number(f||0)*.5),u=(f,g)=>{s(x=>{const b=r.find(m=>m.key===f);if(!b)return x;const _=Number(x[f]||0),p=Math.max(0,Math.min(b.owned,_+g));return p===_?x:{...x,[f]:p}})},c=k.useMemo(()=>{const f={};return r.forEach(g=>{const x=Number(o[g.key]||0);f[g.key]=l(g.unit)*x}),f},[o,r]),d=k.useMemo(()=>Object.values(c).reduce((f,g)=>f+g,0),[c]),h=()=>{if(d<=0)return;const f={};r.forEach(g=>{f[g.key]=Number(o[g.key]||0)}),n==null||n({type:"FIRE",items:f,creditByRole:c,totalCredit:d,amount:d,note:`Demisses +${i(d)}`})};return a.jsxs("div",{style:Ne.body,children:[a.jsx("div",{style:Ne.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"DEMITIR FUNCIONRIOS"})}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr 1.2fr 1fr",gap:8,opacity:.9,fontWeight:700,marginBottom:6},children:[a.jsx("div",{children:"Cargo"}),a.jsx("div",{children:"Valor Unitrio"}),a.jsx("div",{children:"Qtd demitir"}),a.jsx("div",{children:"Crdito"})]}),a.jsx("div",{style:{display:"grid",gap:12},children:r.map(f=>{const g=Number(o[f.key]||0),x=Number(f.unit||0),b=Number(f.owned||0),_=l(x),p=_*g,m=g<=0,y=g>=b||b<=0;return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr 1.2fr 1fr",alignItems:"center",gap:8},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:800},children:f.label}),a.jsxs("div",{style:{opacity:.75,fontSize:12},children:["Possui: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{children:[a.jsx("div",{children:a.jsx("b",{children:i(x)})}),a.jsxs("div",{style:{opacity:.75,fontSize:12},children:["Crdito por un.: ",a.jsx("b",{children:i(_)})]})]}),a.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[a.jsx("button",{style:{...Ne.spin,opacity:m?.5:1,cursor:m?"not-allowed":"pointer"},disabled:m,onClick:()=>u(f.key,-1),children:"-"}),a.jsx("div",{style:{minWidth:28,textAlign:"center",fontWeight:800},children:g}),a.jsx("button",{style:{...Ne.spin,opacity:y?.5:1,cursor:y?"not-allowed":"pointer"},disabled:y,onClick:()=>u(f.key,1),children:"+"})]}),a.jsx("div",{children:a.jsx("b",{children:i(p)})})]},f.key)})}),a.jsxs("div",{style:{marginTop:12,textAlign:"right",fontWeight:900},children:["Total a resgatar: ",a.jsx("b",{children:i(d)})]}),a.jsxs("div",{style:Ne.rowBtns,children:[a.jsx("button",{style:Ne.back,onClick:e,children:" Voltar"}),a.jsx("button",{style:{...Ne.cta,background:"#ef4444",opacity:d>0?1:.6},onClick:h,disabled:d<=0,children:"DEMITIR"})]})]})}function wf({playerName:t="Jogador",bens:e=0,currentPlayer:n,canClose:r=!0}){var A;const{resolveTop:o,popModal:s}=(qt==null?void 0:qt())||{},[i,l]=k.useState("menu"),u=()=>{r&&(s?s(!1):o==null||o(null))},c=k.useMemo(()=>({A:12e3,B:6e3,C:3e3,D:1e3}),[]),d=k.useMemo(()=>({A:1e4,B:4e3,C:1500,D:500}),[]),h=v=>{if(v==null)return"";const T=String(v).trim().toUpperCase();if(["A","B","C","D"].includes(T))return T;const O=Number(T);return O===1?"A":O===2?"B":O===3?"C":O===4?"D":""},f=k.useMemo(()=>{const v=n||{};return{name:v.name??t,bens:Number(v.bens??e??0),vendedoresComuns:Number(v.vendedoresComuns??0),fieldSales:Number(v.fieldSales??0),insideSales:Number(v.insideSales??0),gestores:Number(v.gestores??v.gestoresComerciais??0),raw:v}},[n,t,e]);k.useEffect(()=>{console.group("[RecoveryModal] mount snapshot"),console.log("raw player =>",f.raw),console.groupEnd()},[f.raw]);const g=k.useMemo(()=>Math.max(0,Math.floor(f.bens*.5)),[f.bens]),x=k.useMemo(()=>{var T;const v=(T=f.raw)==null?void 0:T.loanPending;return v&&Number(v.amount)>0},[(A=f.raw)==null?void 0:A.loanPending]),b=k.useMemo(()=>[{key:"mix",label:"MIX PRODUTOS",credit:1500},{key:"erp",label:"ERP/SISTEMAS",credit:1500}],[]),_=k.useMemo(()=>[{key:"comum",label:"Vendedor Comum",unit:1500,owned:f.vendedoresComuns},{key:"field",label:"Field Sales",unit:3e3,owned:f.fieldSales},{key:"inside",label:"Inside Sales",unit:3e3,owned:f.insideSales},{key:"gestor",label:"Gestor",unit:5e3,owned:f.gestores}],[f]),p=k.useMemo(()=>{const v=f.raw||{};return h(v.mixProdutosLetter??v.mixProdutos??v.mixProducts??v.mixLevelLetter??v.mixLevel??v.mix_level??v.mix??v.mix_produtos??v.mix_products)},[f.raw]),m=k.useMemo(()=>{var T;const v=f.raw||{};return h(v.erpSistemasLetter??v.erpSistemas??((T=v.erpSystems)==null?void 0:T.level)??v.erpSystemsLetter??v.erpLevelLetter??v.erpLevel??v.erp_level??v.erp??v.erp_sistemas)},[f.raw]),y=k.useMemo(()=>{const v=f.raw||{},T=v.mixOwned??v.mix??{},O=new Set;return T.A===!0&&O.add("A"),T.B===!0&&O.add("B"),T.C===!0&&O.add("C"),T.D===!0&&O.add("D"),O.size===0&&O.add("D"),O},[f.raw]),w=k.useMemo(()=>{const v=f.raw||{},T=v.erpOwned??v.erp??{},O=new Set;return T.A===!0&&O.add("A"),T.B===!0&&O.add("B"),T.C===!0&&O.add("C"),T.D===!0&&O.add("D"),O.size===0&&O.add("D"),O},[f.raw]);k.useEffect(()=>{console.group("[RecoveryModal] owned detect"),console.log("mixLetter(panel):",p," -> ownedMix =",Object.fromEntries(["A","B","C","D"].map(v=>[v,y.has(v)]))),console.log("erpLetter(panel):",m," -> ownedErp =",Object.fromEntries(["A","B","C","D"].map(v=>[v,w.has(v)]))),console.groupEnd()},[p,m,y,w]);const E=k.useMemo(()=>{var T,O;const v=f.raw||{};return{MIX:Array.isArray((T=v.reducedLevels)==null?void 0:T.MIX)?v.reducedLevels.MIX:[],ERP:Array.isArray((O=v.reducedLevels)==null?void 0:O.ERP)?v.reducedLevels.ERP:[]}},[f.raw]),N=k.useMemo(()=>["A","B","C","D"].map(v=>({key:`mix-${v}`,group:"MIX",level:v,label:`Nvel ${v}`,credit:(c[v]||0)/2,owned:y.has(v),alreadyReduced:E.MIX.includes(v)})),[y,c,E.MIX]),D=k.useMemo(()=>["A","B","C","D"].map(v=>({key:`erp-${v}`,group:"ERP",level:v,label:`Nvel ${v}`,credit:(d[v]||0)/2,owned:w.has(v),alreadyReduced:E.ERP.includes(v)})),[w,d,E.ERP]),S=k.useMemo(()=>({MIX:{A:c.A/2,B:c.B/2,C:c.C/2,D:c.D/2},ERP:{A:d.A/2,B:d.B/2,C:d.C/2,D:d.D/2}}),[c,d]);return a.jsx("div",{style:Ne.backdrop,children:a.jsxs("div",{style:Ne.card,children:[a.jsxs("div",{style:Ne.header,children:[a.jsx("div",{style:{fontWeight:900,fontSize:22},children:"RECUPERAO FINANCEIRA"}),r&&a.jsx("button",{onClick:u,style:Ne.closeBtn,children:""})]}),i==="menu"&&a.jsx(Jx,{playerName:f.name,loanAvailable:g,hasPendingLoan:x,onGoLoan:()=>l("loan"),onGoReduce:()=>l("reduce"),onGoFire:()=>l("fire"),onDeclareBankruptcy:()=>o==null?void 0:o({type:"TRIGGER_BANKRUPTCY"})}),i==="loan"&&a.jsx(Yx,{loanAvailable:g,onBack:()=>l("menu"),onConfirm:v=>{console.log("[DEBUG] RecoveryModal recebeu payload do RecoveryLoan:",v),console.log("[DEBUG] RecoveryModal chamando resolveTop com:",v);const T=o==null?void 0:o(v);console.log("[DEBUG] RecoveryModal resolveTop retornou:",T)}}),i==="reduce"&&a.jsx(Qx,{options:b,optionsMix:N,optionsErp:D,mixOwned:{A:y.has("A"),B:y.has("B"),C:y.has("C"),D:y.has("D")},erpOwned:{A:w.has("A"),B:w.has("B"),C:w.has("C"),D:w.has("D")},credits:S,snapshot:f,onBack:()=>l("menu"),onConfirm:v=>{if(Array.isArray(v==null?void 0:v.items)){const $=Number(v.total??v.items.filter(U=>U.selected).reduce((U,Se)=>U+Number(Se.credit||0),0));o==null||o({type:"REDUCE",amount:$,items:v.items,note:`Reduo mltipla +R$ ${$.toLocaleString()}`});return}const T=Number((v==null?void 0:v.credit)||(v==null?void 0:v.amount)||0),O=v&&v.group&&v.level?{group:String(v.group).toUpperCase(),level:String(v.level).toUpperCase(),credit:T}:null;o==null||o({type:"REDUCE",amount:T,group:O==null?void 0:O.group,level:O==null?void 0:O.level,selection:O,note:O?`Reduo ${O.group} nvel ${O.level} +R$ ${T.toLocaleString()}`:`Reduo +R$ ${T.toLocaleString()}`})}}),i==="fire"&&a.jsx(Xx,{roles:_,onBack:()=>l("menu"),onConfirm:v=>o==null?void 0:o(v)})]},i)})}function Zx({playerName:t="Jogador",balanceText:e=""}){const{resolveTop:n,closeModal:r}=qt(),o=k.useRef(null);k.useEffect(()=>{var c;const u=document.body.style.overflow;return document.body.style.overflow="hidden",(c=o.current)==null||c.focus(),()=>{document.body.style.overflow=u}},[]),k.useEffect(()=>{const u=c=>{(c.key==="Escape"||c.key==="Enter"||c.key===" ")&&(c.preventDefault(),c.stopPropagation())};return document.addEventListener("keydown",u,!0),()=>document.removeEventListener("keydown",u,!0)},[]);const s=u=>{u.preventDefault(),u.stopPropagation()},i=()=>{n(!1),r==null||r()},l=()=>{n(!0),r==null||r()};return a.jsxs(ei,{width:780,onClose:i,children:[a.jsx("style",{children:`
        .sg-modal-panel {
          background:#111827; border:1px solid rgba(255,255,255,0.08);
          border-radius:16px; padding:20px 22px 18px; color:#e5e7eb;
          position:relative; box-shadow:0 10px 35px rgba(0,0,0,.55);
        }
        .sg-modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
        .sg-modal-title{font-size:22px;font-weight:700;margin:0}
        .sg-icon-close{background:transparent;border:0;color:#9ca3af;font-size:24px;line-height:1;cursor:pointer}
        .sg-icon-close:hover{color:#e5e7eb}

        .sg-modal-infos{display:flex;justify-content:space-between;align-items:center;
          font-size:14px;color:#cbd5e1;margin:6px 0 12px}
        .sg-modal-infos .right{opacity:.8}

        .sg-callout-warning{
          background:rgba(250,204,21,.12); border:1px solid rgba(250,204,21,.45);
          border-radius:12px; padding:14px 16px; margin-bottom:14px
        }
        .sg-callout-title{font-weight:700;margin-bottom:6px;color:#fde68a}
        .sg-muted{opacity:.7}

        .sg-modal-body{margin:8px 2px 14px;font-size:15px;line-height:1.5}

        .sg-modal-actions{display:flex;justify-content:space-between;gap:12px;margin-top:10px}
        .sg-btn{font-weight:600;border:0;cursor:pointer;padding:12px 18px}
        .sg-pill{border-radius:999px}
        .sg-btn-neutral{background:#374151;color:#e5e7eb}
        .sg-btn-neutral:hover{background:#4b5563}
        .sg-btn-danger{background:#b91c1c;color:#fff}
        .sg-btn-danger:hover{background:#991b1b}
        .sg-btn:focus{outline:2px solid rgba(255,255,255,.35);outline-offset:2px}
      `}),a.jsxs("div",{className:"sg-modal-panel",role:"dialog","aria-modal":"true","aria-labelledby":"bk-title","aria-describedby":"bk-desc",onClick:s,onMouseDown:s,onKeyDown:s,children:[a.jsxs("div",{className:"sg-modal-header",children:[a.jsx("h2",{id:"bk-title",className:"sg-modal-title",children:"Declarar Falncia"}),a.jsx("button",{className:"sg-icon-close","aria-label":"Fechar",onClick:i,children:""})]}),a.jsxs("div",{className:"sg-modal-infos",children:[a.jsx("div",{className:"left",children:e?a.jsxs(a.Fragment,{children:["Saldo disponvel: ",a.jsx("b",{children:e})]}):a.jsx(a.Fragment,{children:""})}),a.jsx("div",{className:"right",children:"Ao permanente nesta partida"})]}),a.jsxs("div",{className:"sg-callout-warning",id:"bk-desc",children:[a.jsx("div",{className:"sg-callout-title",children:"Ateno"}),a.jsxs("p",{children:[t,", ao confirmar, voc ser marcado como ",a.jsx("b",{children:"FALIDO"}),". Seu turno ser ",a.jsx("b",{children:"sempre pulado"})," e voc no poder mais executar aes."]}),a.jsx("p",{className:"sg-muted",children:"Esta deciso  irreversvel at o fim da partida."})]}),a.jsx("div",{className:"sg-modal-body",children:a.jsxs("p",{children:["Confirme abaixo para encerrar sua participao ativa. Voc continuar visvel no placar como ",a.jsx("b",{children:"FALIDO"}),"."]})}),a.jsxs("div",{className:"sg-modal-actions",children:[a.jsx("button",{className:"sg-btn sg-pill sg-btn-neutral",onClick:i,children:"Cancelar"}),a.jsx("button",{ref:o,className:"sg-btn sg-pill sg-btn-danger",onClick:l,children:"Declarar Falncia"})]})]})]})}function eb({players:t,setPlayers:e,round:n,setRound:r,turnIdx:o,setTurnIdx:s,roundFlags:i,setRoundFlags:l,isMyTurn:u,isMine:c,myUid:d,meId:h,myCash:f,current:g,broadcastState:x,appendLog:b,turnLock:_,setTurnLockBroadcast:p,gameOver:m,setGameOver:y,winner:w,setWinner:E,setShowBankruptOverlay:N}){const{pushModal:D,awaitTop:S,closeTop:A}=(qt==null?void 0:qt())||{},[v,T]=pe.useState(0),O=pe.useRef(0);pe.useEffect(()=>{O.current=v},[v]);const $=pe.useRef(!1),U=pe.useRef(!1),Se=pe.useRef(null),Ve=pe.useRef(null);pe.useEffect(()=>{u?console.log("[DEBUG] modalLocks sync - isMyTurn:",u,"modalLocks:",v):v>0&&(console.log("[DEBUG] modalLocks sync - resetando modalLocks para 0 (no  minha vez)"),T(0),O.current=0,$.current=!1)},[u,v]),pe.useEffect(()=>(_?(Se.current&&clearTimeout(Se.current),Se.current=setTimeout(()=>{const K=te.current,qe=String(K||"")===String(d),Pe=O.current,Ae=$.current;console.warn("[DEBUG]  TIMEOUT DE SEGURANA - turnLock ativo h mais de 30s",{isLockOwner:qe,currentModalLocks:Pe,currentOpening:Ae,lockOwner:K}),qe&&Pe===0&&!Ae&&(console.warn("[DEBUG]  FORANDO LIBERAO DO TURNLOCK (timeout de segurana)"),p(!1),U.current=!1)},3e4)):Se.current&&(clearTimeout(Se.current),Se.current=null),()=>{Se.current&&(clearTimeout(Se.current),Se.current=null)}),[_,d,p]);const[Xe,q]=pe.useState(null),te=pe.useRef(null);pe.useEffect(()=>{te.current=Xe},[Xe]);const re=pe.useRef(null),P=pe.useRef(n);pe.useEffect(()=>{P.current=n,console.log("[DEBUG]  currentRoundRef atualizado para:",n)},[n]);const Le=pe.useRef(t);pe.useEffect(()=>{Le.current=t},[t]);const sn=pe.useRef(o);pe.useEffect(()=>{sn.current=o},[o]);const ue=pe.useRef(m);pe.useEffect(()=>{ue.current=m},[m]);const Kt=pe.useRef(!1),Ze=pe.useRef(!1);pe.useEffect(()=>{const K=t[o];K&&String(K.id)===String(d)?(console.log("[DEBUG]  minha vez - atualizando lockOwner para:",d,"turnIdx:",o),q(String(d)),re.current&&(re.current.nextTurnIdx===o?(console.log("[DEBUG] Limpando pendingTurnDataRef - turno j foi processado (nextTurnIdx === turnIdx)"),re.current=null):console.log("[DEBUG] Mantendo pendingTurnDataRef - prximo turno:",re.current.nextTurnIdx,"turno atual:",o))):(Xe===String(d)&&(console.log("[DEBUG] No  mais minha vez - limpando lockOwner"),q(null)),re.current&&re.current.nextTurnIdx!==o&&(console.log("[DEBUG] Limpando pendingTurnDataRef - no  minha vez e dados no so para turno atual"),re.current=null))},[o,t,d,Xe]);const Te=async K=>{if(!(D&&S))return null;$.current=!0,T(Pe=>{const Ae=Pe+1;return O.current=Ae,Ve.current=null,console.log("[DEBUG] openModalAndWait - ABRINDO modal, modalLocks:",Pe,"->",Ae,"openingModalRef:",$.current),Ae});let qe=!1;try{D(K),await new Promise(Ae=>setTimeout(Ae,100)),$.current=!1,console.log("[DEBUG] openModalAndWait - Modal renderizada, openingModalRef:",$.current);const Pe=await S();return qe=!0,await new Promise(Ae=>setTimeout(Ae,50)),Pe}catch(Pe){return console.error("[DEBUG]  ERRO ao abrir/aguardar modal:",Pe),qe=!0,$.current=!1,T(Ae=>{const Jt=Math.max(0,Ae-1);return O.current=Jt,Jt===0&&(Ve.current=Date.now()),console.log("[DEBUG] openModalAndWait - ERRO, decrementando modalLocks:",Ae,"->",Jt),Jt}),null}finally{qe||($.current=!1),qe&&T(Pe=>{const Ae=Math.max(0,Pe-1);return O.current=Ae,Ae===0&&(Ve.current=Date.now(),console.log("[DEBUG] openModalAndWait - LTIMA MODAL FECHADA - timestamp:",Ve.current)),console.log("[DEBUG] openModalAndWait - FECHANDO modal, modalLocks:",Pe,"->",Ae),Ae})}},pr=pe.useCallback((K,qe)=>{const Pe=t[K],Ae=Math.max(0,Number(qe||0));return Number((Pe==null?void 0:Pe.cash)||0)>=Ae},[t]),ot=pe.useCallback((K,qe,Pe)=>{const Ae=pr(K,qe);return Ae||b(`Saldo insuficiente${Pe?" para "+Pe:""}. Use RECUPERAO (demitir / emprestar / reduzir) ou declare FALNCIA.`),Ae},[pr,b]),Fr=pe.useCallback((K,qe,Pe)=>{var En;if(qe<=5)return!1;const Ae=(K||[]).filter(ht=>!(ht!=null&&ht.bankrupt));if(Ae.length===0){console.log("[DEBUG]  FIM DE JOGO - Nenhum jogador vivo restante"),e(K),E(null),y(!0),r(5),P.current=5,b("Fim de jogo! Todos os jogadores falidos."),re.current=null,p(!1);try{x(K||[],Pe||o,5,!0,null,{round:5,gameOver:!0,winner:null})}catch{}return!0}const ft=((En=Ae.map(ht=>({player:ht,patrimonio:(ht.cash||0)+(ht.bens||0),cash:ht.cash||0})).sort((ht,hn)=>{var jn,z;return hn.patrimonio-ht.patrimonio||hn.cash-ht.cash||String(((jn=ht.player)==null?void 0:jn.name)||"").localeCompare(String(((z=hn.player)==null?void 0:z.name)||""))})[0])==null?void 0:En.player)||null;console.log("[ENDGAME] finalizando: vencedor=",(ft==null?void 0:ft.name)||"N/A",", round=5"),e(K),E(ft),y(!0),r(5),P.current=5,b(`Fim de jogo! 5 rodadas completas. Vencedor: ${(ft==null?void 0:ft.name)||""}`),re.current=null,p(!1);try{x(K||[],Pe||o,5,!0,ft,{round:5,gameOver:!0,winner:ft})}catch{}return!0},[b,x,y,r,p,E,o]),Yo=pe.useCallback((K,qe,Pe)=>{var Ae,Jt,ft,En,ht,hn,jn,z;if(console.log("[DEBUG]  advanceAndMaybeLap chamada - steps:",K,"deltaCash:",qe,"note:",Pe),!(ue.current||Kt.current||Ze.current||!t.length)){if(U.current){console.warn("[DEBUG]  advanceAndMaybeLap - mudana de turno j em progresso, ignorando");return}if(O.current>0||$.current){console.warn("[DEBUG]  advanceAndMaybeLap - h modais abertas, aguardando...",{modalLocks:O.current,opening:$.current}),setTimeout(()=>{O.current===0&&!$.current&&Yo(K,qe,Pe)},200);return}U.current=!0,p(!0),q(String(d));try{const R=o,ce=t[R];if(!ce){p(!1),U.current=!1;return}console.log("[DEBUG]  POSIO INICIAL - Jogador:",ce.name,"Posio:",ce.pos,"Saldo:",ce.cash);const le=async(C,I,H,Z=t)=>{var se,he,de,fe,et,Me,Ee,yt,Ke,pt,kt,At,yn,Rn,Nn;const V=Number(((se=Z[R])==null?void 0:se.cash)||0);if(V>=C){console.log("[DEBUG]  Saldo suficiente! Processando pagamento de:",C);const me=Z.map((L,ge)=>ge!==R?L:{...L,cash:Math.max(0,(L.cash||0)-C),pos:L.pos});return e(me),x(me,o,P.current),!0}$.current=!0;const ne=await Te(a.jsx(fr,{requiredAmount:C,currentCash:V,title:`Saldo insuficiente para ${H} ${I}`,message:`Voc precisa ${H} R$ ${C.toLocaleString()} mas possui apenas R$ ${V.toLocaleString()}.`,showRecoveryOptions:!0}));if(!ne)return p(!1),!1;if(ne.action==="RECOVERY"){console.log("[DEBUG] Abrindo RecoveryModal para jogador:",Z[R]);const me=await Te(a.jsx(wf,{currentPlayer:Z[R],canClose:!1}));if(console.log("[DEBUG] RecoveryModal retornou:",me),me){console.log("[DEBUG] recoveryModalRes existe, tipo:",me.type,"action:",me.action);let L=Z;if(me.type==="FIRE"){console.log("[DEBUG]  Condio FIRE atendida! Processando demisses:",me);const ee={cashDelta:Number(me.amount||0),vendedoresComunsDelta:-Number(((he=me.items)==null?void 0:he.comum)||0),fieldSalesDelta:-Number(((de=me.items)==null?void 0:de.field)||0),insideSalesDelta:-Number(((fe=me.items)==null?void 0:fe.inside)||0),gestoresDelta:-Number(((et=me.items)==null?void 0:et.gestor)||0)};console.log("[DEBUG] Deltas de demisso:",ee),L=Z.map((oe,xe)=>xe!==R?oe:{...Et(oe,ee),pos:oe.pos}),console.log("[DEBUG] Novo saldo aps demisses:",(Me=L[R])==null?void 0:Me.cash),e(L),x(L,o,P.current)}else if(me.type==="LOAN"){console.log("[DEBUG]  Condio LOAN atendida! Processando emprstimo:",me);const ee=(Ee=Z[R])==null?void 0:Ee.loanPending;if(ee&&Number(ee.amount)>0){console.log("[DEBUG]  Jogador j possui emprstimo pendente:",ee);const xe=await Te(a.jsx(fr,{requiredAmount:C,currentCash:((yt=Z[R])==null?void 0:yt.cash)||0,title:"Emprstimo j realizado",message:`Voc j possui um emprstimo pendente de R$ ${Number(ee.amount).toLocaleString()}. Cada jogador s pode ter um emprstimo por vez.`,showRecoveryOptions:!1,canClose:!1}));if(!xe||xe.action!=="BANKRUPT")return p(!1),!1;const ye=Z.map((Mt,Qo)=>Qo===R?{...Mt,bankrupt:!0}:Mt);if(js(ye)<=1){const Mt=ye.findIndex(Qo=>!(Qo!=null&&Qo.bankrupt));return E(Mt>=0?ye[Mt]:null),e(ye),y(!0),p(!1),x(ye,o,n,!0,Mt>=0?ye[Mt]:null),!1}const Be=as(ye,R);return e(ye),s(Be),p(!1),x(ye,Be,P.current),!1}const oe=Number(me.amount||0);console.log("[DEBUG] Valor do emprstimo:",oe),console.log("[DEBUG] Saldo atual do jogador:",(Ke=Z[R])==null?void 0:Ke.cash),L=Z.map((xe,ye)=>ye!==R?xe:{...xe,cash:(Number(xe.cash)||0)+oe,loanPending:{amount:oe,charged:!1,shouldChargeOnNextExpenses:!0},pos:xe.pos}),console.log("[DEBUG] Novo saldo do jogador:",(pt=L[R])==null?void 0:pt.cash),console.log("[DEBUG] Novo loanPending:",(kt=L[R])==null?void 0:kt.loanPending),e(L),x(L,o,P.current)}else if(me.type==="REDUCE"){console.log("[DEBUG]  Condio REDUCE atendida! Processando reduo:",me);const ee=me.items||[];let oe=0;console.log("[DEBUG] Selees para reduzir:",ee),L=Z.map((xe,ye)=>{if(ye!==R)return xe;let be={...xe};for(const Be of ee)Be.selected&&(oe+=Number(Be.credit||0),Be.group==="MIX"?be.mixOwned={...be.mixOwned||{},[Be.level]:!1}:Be.group==="ERP"&&(be.erpOwned={...be.erpOwned||{},[Be.level]:!1}));return be.cash=(Number(be.cash)||0)+oe,be.pos=xe.pos,be}),console.log("[DEBUG] Total de crdito da reduo:",oe),console.log("[DEBUG] Novo saldo aps reduo:",(At=L[R])==null?void 0:At.cash),e(L),x(L,o,P.current)}else console.log("[DEBUG]  Nenhuma condio foi atendida! Tipo:",me.type,"Action:",me.action);const ge=Number(((yn=L[R])==null?void 0:yn.cash)||0);if(console.log("[DEBUG] Verificando saldo aps recuperao - Novo saldo:",ge,"Necessrio:",C),ge>=C){console.log("[DEBUG]  Saldo suficiente aps recuperao! Processando pagamento de:",C);const ee=L.map((oe,xe)=>xe!==R?oe:{...oe,cash:Math.max(0,(oe.cash||0)-C),pos:oe.pos});return console.log("[DEBUG]  PAGAMENTO - Saldo antes:",(Rn=L[R])==null?void 0:Rn.cash,"Valor a pagar:",C,"Saldo aps:",(Nn=ee[R])==null?void 0:Nn.cash),e(ee),x(ee,o,P.current),!0}else return console.log("[DEBUG]  Saldo ainda insuficiente aps recuperao. Continuando recurso..."),await le(C,I,H,L)}else return p(!1),!1}else if(ne.action==="BANKRUPT"){const me=Z.map((ee,oe)=>oe===R?{...ee,bankrupt:!0}:ee);if(js(me)<=1){const ee=me.findIndex(oe=>!(oe!=null&&oe.bankrupt));return E(ee>=0?me[ee]:null),e(me),y(!0),p(!1),x(me,o,n,!0,ee>=0?me[ee]:null),!1}const ge=as(me,R);return e(me),s(ge),p(!1),x(me,ge,P.current),!1}else return p(!1),!1},_e=ce.pos,j=(_e+K)%Es,B=j<_e,J=B&&_e>=Es-1;console.log("[DEBUG]  MOVIMENTO - De posio:",_e,"Para posio:",j,"Steps:",K,"Lap:",B,"CompletedLap:",J);const ke=Sl(_e,j,0)||B,W=P.current,ae=t.filter(C=>!(C!=null&&C.bankrupt)).length,F=t.map((C,I)=>{if(I!==R)return C;const H=(C.cash||0)+(qe||0),Z=Number(C.lastRevenueRound)||0;let V=!1,ne=j;if(ke){const se=Math.max(Z,W);return W===5&&ae>1&&(V=!0,ne=0),{...C,pos:ne,cash:Math.max(0,H),lastRevenueRound:se,waitingAtRevenue:V}}return{...C,pos:ne,cash:Math.max(0,H),lastRevenueRound:Z,waitingAtRevenue:!1}});console.log("[DEBUG]  APS MOVIMENTO - Jogador:",(Ae=F[R])==null?void 0:Ae.name,"Posio:",(Jt=F[R])==null?void 0:Jt.pos,"Saldo:",(ft=F[R])==null?void 0:ft.cash,"lastRevenueRound:",(En=F[R])==null?void 0:En.lastRevenueRound,"waitingAtRevenue:",(ht=F[R])==null?void 0:ht.waitingAtRevenue);let Ge=P.current,G=[...i],ie=!1,Re=!1;if(B&&(console.log("[DEBUG]  VOLTA COMPLETA DETECTADA (lap=true) - Jogador completou uma volta completa!",{jogador:ce.name,posicaoAnterior:_e,posicaoNova:j,rodadaAtual:P.current}),G.length<t.length&&(G=[...G,...new Array(t.length-G.length).fill(!1)]),G[R]=!0,console.log("[DEBUG]  Flag marcada por volta completa (lap) - Flags:",G.map((C,I)=>{var H;return`${(H=t[I])==null?void 0:H.name}:${C}`}).join(", "))),ke){G.length<t.length&&(G=[...G,...new Array(t.length-G.length).fill(!1)]),G[R]?console.log("[DEBUG]  Jogador j tinha flag marcada (por lap) - Flags:",G.map((V,ne)=>{var se;return`${(se=t[ne])==null?void 0:se.name}:${V}`}).join(", ")):(G[R]=!0,console.log("[DEBUG]  Jogador passou pela casa 0 (crossedStart1ForRound) - Flags:",G.map((V,ne)=>{var se;return`${(se=t[ne])==null?void 0:se.name}:${V}`}).join(", ")));const C=F.filter(V=>!(V!=null&&V.bankrupt)),I=F.map((V,ne)=>V!=null&&V.bankrupt?-1:ne).filter(V=>V>=0),H=F.filter(V=>!(V!=null&&V.bankrupt)),Z=H.length>0&&H.every(V=>(Number(V.lastRevenueRound)||0)>=P.current);if(console.log("[DEBUG]  Verificando allAliveDone - Rodada atual:",P.current,"Jogadores vivos:",H.map(V=>({name:V.name,lastRevenueRound:V.lastRevenueRound}))),console.log("[DEBUG]  Verificao de rodada - Jogador:",(hn=F[R])==null?void 0:hn.name,"Rodada atual:",P.current,"round do closure:",n),console.log("[DEBUG]  Jogadores vivos:",I.map(V=>{var ne;return`${(ne=F[V])==null?void 0:ne.name}:${G[V]}`}).join(", ")),console.log("[DEBUG]  Total de jogadores vivos:",I.length),console.log("[DEBUG]  Flags completas:",G.map((V,ne)=>{var se;return`${(se=F[ne])==null?void 0:se.name}:${V?"":""}`}).join(", ")),console.log("[DEBUG]  Todos passaram pela casa 0?",Z),Z){const V=P.current;if(Ge=V+1,ie=!0,V===5&&ie){console.log("[ENDGAME] detectado: fim da 5 (tentaria round=6)"),Fr(F,6,o);return}console.log("[DEBUG]  Calculando incremento - round (ref):",V,"round (closure):",n,"nextRound:",Ge),G=G.map((se,he)=>{var de;return(de=F[he])!=null&&de.bankrupt?G[he]:!1}),console.log("[DEBUG]  RODADA INCREMENTADA - Nova rodada:",Ge,"Rodada anterior (ref):",V,"Rodada anterior (closure):",n,"Jogadores vivos:",H.length),console.log("[DEBUG]  Flags resetadas:",G.map((se,he)=>{var de;return`${(de=F[he])==null?void 0:de.name}:${se}`}).join(", ")),b(` Rodada ${Ge} iniciada! Todos os jogadores vivos passaram pela casa de faturamento.`)}else{const V=H.filter(ne=>(Number(ne.lastRevenueRound)||0)<P.current).map(ne=>ne.name);console.log("[DEBUG]  Rodada NO incrementada - ainda faltam jogadores completarem o ms:",V.join(", "))}}l(G),console.log("[DEBUG] roundFlags updated / round closed:",G.map((C,I)=>{var H;return`${(H=F[I])==null?void 0:H.name}:${C}`}).join(", "));let ut=as(F,R);if(P.current===5){let C=0;for(;C<F.length;){const I=F[ut];if(!I.bankrupt&&I.waitingAtRevenue!==!0)break;ut=(ut+1)%F.length,C++}}qe&&b(`${ce.name} ${qe>0?"ganhou":"pagou"} $${Math.abs(qe).toLocaleString()}`),Pe&&b(Pe),e(F),r(C=>{let I=C;return ie?Ge>C?(I=Ge,console.log("[DEBUG]  RODADA INCREMENTADA - Rodada anterior:",C,"Nova rodada:",I,"nextRound calculado:",Ge),console.log("[DEBUG]  Rodada incrementada com sucesso!"),b(` Rodada ${I} iniciada! Todos os jogadores vivos passaram pela casa de faturamento.`)):(I=C+1,console.log("[DEBUG]  RODADA INCREMENTADA (forado) - Rodada anterior:",C,"Nova rodada:",I,"nextRound calculado:",Ge),console.log("[DEBUG]  Rodada incrementada com sucesso (forado devido a sincronizao)!"),b(` Rodada ${I} iniciada! Todos os jogadores vivos passaram pela casa de faturamento.`)):(I=Math.max(Ge,C),I!==C&&console.log("[DEBUG]  Rodada atualizada via Math.max - prevRound:",C,"nextRound:",Ge,"finalRound:",I)),P.current=I,I});const He=Ge,ve=G;if(re.current={nextPlayers:F,nextTurnIdx:ut,nextRound:He,nextRoundFlags:ve,timestamp:Date.now(),shouldIncrementRound:ie,endGame:Re},console.log("[DEBUG]  pendingTurnDataRef preenchido - prximo turno:",ut,"rodada atual:",n,"prxima rodada:",He,"nextRound calculado:",Ge,"shouldIncrementRound:",ie,"rodada foi incrementada?",Ge>n,"roundFlags:",ve.map((C,I)=>{var H;return`${(H=F[I])==null?void 0:H.name}:${C}`}).join(", ")),Fr(F,Ge,o)){re.current=null,U.current=!1,$.current=!1;return}const Ie=j+1,pn=Sl(_e,j,0),Y=Sl(_e,j,22);let X=!1;if((Ie===6||Ie===16||Ie===32||Ie===49)&&u&&D&&S&&(X=!0,$.current=!0,(async()=>{var V,ne,se,he,de;const C=((V=t[R])==null?void 0:V.erpLevel)||null,I=((ne=t[R])==null?void 0:ne.erpOwned)||((se=t[R])==null?void 0:se.erp)||{},H=await Te(a.jsx(hf,{currentCash:((he=F[R])==null?void 0:he.cash)??f,currentLevel:C,erpOwned:I}));if(!H||H.action!=="BUY")return;const Z=Number(((de=H.values)==null?void 0:de.compra)||0);if(!ot(R,Z,"comprar ERP")){p(!1);return}e(fe=>{const et=fe.map((Me,Ee)=>Ee!==R?Me:Et(Me,{cashDelta:-Z,erpLevelSet:H.level}));return x(et,o,P.current),et})})()),(Ie===2||Ie===11||Ie===19||Ie===47)&&u&&D&&S&&($.current=!0,(async()=>{var Z,V,ne,se;const C=t.find(c)||F[R],I=await Te(a.jsx(pf,{canTrain:{comum:Number(C==null?void 0:C.vendedoresComuns)||0,field:Number(C==null?void 0:C.fieldSales)||0,inside:Number(C==null?void 0:C.insideSales)||0,gestor:Number((C==null?void 0:C.gestores)??(C==null?void 0:C.gestoresComerciais)??(C==null?void 0:C.managers))||0},ownedByType:{comum:((Z=C==null?void 0:C.trainingsByVendor)==null?void 0:Z.comum)||[],field:((V=C==null?void 0:C.trainingsByVendor)==null?void 0:V.field)||[],inside:((ne=C==null?void 0:C.trainingsByVendor)==null?void 0:ne.inside)||[],gestor:((se=C==null?void 0:C.trainingsByVendor)==null?void 0:se.gestor)||[]}}));if(!I||I.action!=="BUY")return;const H=Number(I.grandTotal||0);if(!ot(R,H,"comprar Treinamento")){p(!1);return}e(he=>{const de=he.map((fe,et)=>et!==R?fe:df(fe,I));return x(de,o,P.current),de})})()),(Ie===5||Ie===10||Ie===43)&&u&&D&&S&&($.current=!0,(async()=>{var H,Z,V,ne,se,he,de,fe,et,Me,Ee,yt,Ke,pt,kt,At,yn,Rn,Nn;const C=((H=F[R])==null?void 0:H.cash)??f,I=await Te(a.jsx(qx,{currentCash:C}));if(I){if(I.action==="OPEN"){const me=String(I.open||"").toUpperCase();if(me==="MIX"){const L=((Z=t[R])==null?void 0:Z.mixProdutos)||null,ge=((V=t[R])==null?void 0:V.mixOwned)||((ne=t[R])==null?void 0:ne.mix)||{},ee=await Te(a.jsx(bf,{currentCash:((se=F[R])==null?void 0:se.cash)??f,currentLevel:L,mixOwned:ge}));if(ee&&ee.action==="BUY"){const oe=Number(ee.compra||0),xe=String(ee.level||"D");if(!ot(R,oe,"comprar MIX")){p(!1);return}e(ye=>{const be=ye.map((Be,Mt)=>Mt!==R?Be:Et(Be,{cashDelta:-oe,mixProdutosSet:xe,mixBaseSet:{despesaPorCliente:Number(ee.despesa||0),faturamentoPorCliente:Number(ee.faturamento||0)}}));return x(be,o,P.current),be})}return}if(me==="MANAGER"){const L=await Te(a.jsx(yf,{currentCash:((he=F[R])==null?void 0:he.cash)??f}));if(L&&(L.action==="BUY"||L.action==="HIRE")){const ge=Number(L.headcount??L.qty??L.managersQty??1),ee=Number(typeof L.cashDelta<"u"?L.cashDelta:-Number(L.cost??L.total??L.totalHire??0)),oe=ee<0?-ee:0;if(oe>0&&!ot(R,oe,"contratar Gestor")){p(!1);return}const xe=Number(L.expenseDelta??L.totalExpense??L.maintenanceDelta??0);e(ye=>{const be=ye.map((Be,Mt)=>Mt!==R?Be:Et(Be,{cashDelta:ee,gestoresDelta:ge,manutencaoDelta:xe}));return x(be,o,P.current),be})}return}if(me==="INSIDE"){const L=await Te(a.jsx(mf,{currentCash:((de=F[R])==null?void 0:de.cash)??f}));if(L&&(L.action==="BUY"||L.action==="HIRE")){const ge=Number(L.cost??L.total??0);if(!ot(R,ge,"contratar Inside Sales")){p(!1);return}const ee=Number(L.headcount??L.qty??1);e(oe=>{const xe=oe.map((ye,be)=>be!==R?ye:Et(ye,{cashDelta:-ge,insideSalesDelta:ee}));return x(xe,o,P.current),xe})}return}if(me==="FIELD"){const L=await Te(a.jsx(vf,{currentCash:((fe=F[R])==null?void 0:fe.cash)??f}));if(L&&(L.action==="HIRE"||L.action==="BUY")){const ge=Number(L.headcount??L.qty??1),ee={cashDelta:Number(L.cashDelta??-Number(L.totalHire??L.total??L.cost??0)),manutencaoDelta:Number(L.expenseDelta??L.totalExpense??0),revenueDelta:Number(L.revenueDelta??0),fieldSalesDelta:ge},oe=ee.cashDelta<0?-ee.cashDelta:0;if(oe>0&&!ot(R,oe,"contratar Field Sales")){p(!1);return}e(xe=>{const ye=xe.map((be,Be)=>Be!==R?be:Et(be,ee));return x(ye,o,P.current),ye})}return}if(me==="COMMON"){const L=await Te(a.jsx(xf,{currentCash:((et=F[R])==null?void 0:et.cash)??f}));if(L&&L.action==="BUY"){const ge=Number(L.headcount??L.qty??0),ee={cashDelta:Number(L.cashDelta??-Number(L.totalHire??L.total??L.cost??0)),vendedoresComunsDelta:ge,manutencaoDelta:Number(L.expenseDelta??L.totalExpense??0),revenueDelta:Number(L.revenueDelta??0)},oe=ee.cashDelta<0?-ee.cashDelta:0;if(oe>0&&!ot(R,oe,"contratar Vendedores Comuns")){p(!1);return}e(xe=>{const ye=xe.map((be,Be)=>Be!==R?be:Et(be,ee));return x(ye,o,P.current),ye})}return}if(me==="ERP"){const L=((Me=t[R])==null?void 0:Me.erpLevel)||null,ge=((Ee=t[R])==null?void 0:Ee.erpOwned)||((yt=t[R])==null?void 0:yt.erp)||{},ee=await Te(a.jsx(hf,{currentCash:((Ke=F[R])==null?void 0:Ke.cash)??f,currentLevel:L,erpOwned:ge}));if(ee&&ee.action==="BUY"){const oe=Number(((pt=ee.values)==null?void 0:pt.compra)||0);if(!ot(R,oe,"comprar ERP")){p(!1);return}e(xe=>{const ye=xe.map((be,Be)=>Be!==R?be:Et(be,{cashDelta:-oe,erpLevelSet:ee.level}));return x(ye,o,P.current),ye})}return}if(me==="CLIENTS"){const L=await Te(a.jsx(gf,{currentCash:((kt=F[R])==null?void 0:kt.cash)??f}));if(L&&L.action==="BUY"){const ge=Number(L.totalCost||0);if(!ot(R,ge,"comprar Clientes")){p(!1);return}const ee=Number(L.qty||0),oe=Number(L.maintenanceDelta||0),xe=Number(L.bensDelta||ge);e(ye=>{const be=ye.map((Be,Mt)=>Mt!==R?Be:Et(Be,{cashDelta:-ge,clientsDelta:ee,manutencaoDelta:oe,bensDelta:xe}));return x(be,o,P.current),be})}return}if(me==="TRAINING"){const L=t.find(c)||F[R],ge=await Te(a.jsx(pf,{canTrain:{comum:Number(L==null?void 0:L.vendedoresComuns)||0,field:Number(L==null?void 0:L.fieldSales)||0,inside:Number(L==null?void 0:L.insideSales)||0,gestor:Number((L==null?void 0:L.gestores)??(L==null?void 0:L.gestoresComerciais)??(L==null?void 0:L.managers))||0},ownedByType:{comum:((At=L==null?void 0:L.trainingsByVendor)==null?void 0:At.comum)||[],field:((yn=L==null?void 0:L.trainingsByVendor)==null?void 0:yn.field)||[],inside:((Rn=L==null?void 0:L.trainingsByVendor)==null?void 0:Rn.inside)||[],gestor:((Nn=L==null?void 0:L.trainingsByVendor)==null?void 0:Nn.gestor)||[]}}));if(ge&&ge.action==="BUY"){const ee=Number(ge.grandTotal||0);if(!ot(R,ee,"comprar Treinamento")){p(!1);return}e(oe=>{const xe=oe.map((ye,be)=>be!==R?ye:df(ye,ge));return x(xe,o,P.current),xe})}return}}if(I.action==="BUY"){if(I.kind==="CLIENTS"||I.modal==="CLIENTS"||typeof I.clientsQty<"u"||typeof I.numClients<"u"||typeof I.totalCost<"u"||typeof I.maintenanceDelta<"u"){const ge=Number(I.totalCost??I.total??I.amount??0);if(!ot(R,ge,"comprar Clientes")){p(!1);return}const ee=Number(I.clientsQty??I.numClients??I.qty??0),oe=Number(I.maintenanceDelta??I.maintenance??I.mexp??0),xe=Number(I.bensDelta??ge);e(ye=>{const be=ye.map((Be,Mt)=>Mt!==R?Be:Et(Be,{cashDelta:-ge,clientsDelta:ee,manutencaoDelta:oe,bensDelta:xe}));return x(be,o,P.current),be});return}const L=Number(I.total??I.amount??0);if(!ot(R,L,"esta compra")){p(!1);return}e(ge=>{const ee=ge.map((oe,xe)=>xe!==R?oe:Et(oe,{cashDelta:-L,directBuysPush:[I.item||{total:L}]}));return x(ee,o,P.current),ee})}}})()),(Ie===12||Ie===21||Ie===30||Ie===42||Ie===53)&&u&&D&&S&&($.current=!0,(async()=>{var Z;const C=await Te(a.jsx(mf,{currentCash:((Z=F[R])==null?void 0:Z.cash)??f}));if(!C||C.action!=="HIRE"&&C.action!=="BUY")return;const I=Number(C.cost??C.total??0);if(!ot(R,I,"contratar Inside Sales")){p(!1);return}const H=Number(C.headcount??C.qty??1);e(V=>{const ne=V.map((se,he)=>he!==R?se:Et(se,{cashDelta:-I,insideSalesDelta:H}));return x(ne,o,P.current),ne})})()),[4,8,15,17,20,27,34,36,39,46,52,55].includes(Ie)&&u&&D&&S&&($.current=!0,(async()=>{var ne;const C=await Te(a.jsx(gf,{currentCash:((ne=F[R])==null?void 0:ne.cash)??f}));if(!C||C.action!=="BUY")return;const I=Number(C.totalCost||0);if(!ot(R,I,"comprar Clientes")){p(!1);return}const H=Number(C.qty||0),Z=Number(C.maintenanceDelta||0),V=Number(C.bensDelta||I);e(se=>{const he=se.map((de,fe)=>fe!==R?de:Et(de,{cashDelta:-I,clientsDelta:H,manutencaoDelta:Z,bensDelta:V}));return x(he,o,P.current),he})})()),[18,24,29,51].includes(Ie)&&u&&D&&S&&($.current=!0,(async()=>{var ne;const C=await Te(a.jsx(yf,{currentCash:((ne=F[R])==null?void 0:ne.cash)??f}));if(!C||C.action!=="BUY"&&C.action!=="HIRE")return;const I=Number(C.headcount??C.qty??C.managersQty??1),H=Number(typeof C.cashDelta<"u"?C.cashDelta:-Number(C.cost??C.total??C.totalHire??0)),Z=H<0?-H:0;if(Z>0&&!ot(R,Z,"contratar Gestor")){p(!1);return}const V=Number(C.expenseDelta??C.totalExpense??C.maintenanceDelta??0);e(se=>{const he=se.map((de,fe)=>fe!==R?de:Et(de,{cashDelta:H,gestoresDelta:I,manutencaoDelta:V}));return x(he,o,P.current),he})})()),[13,25,33,38,50].includes(Ie)&&u&&D&&S&&($.current=!0,(async()=>{var I;const C=await Te(a.jsx(vf,{currentCash:((I=F[R])==null?void 0:I.cash)??f}));if(C&&(C.action==="HIRE"||C.action==="BUY")){const H=Number(C.headcount??C.qty??1),Z={cashDelta:Number(C.cashDelta??-Number(C.totalHire??C.total??C.cost??0)),manutencaoDelta:Number(C.expenseDelta??C.totalExpense??0),revenueDelta:Number(C.revenueDelta??0),fieldSalesDelta:H},V=Z.cashDelta<0?-Z.cashDelta:0;if(V>0&&!ot(R,V,"contratar Field Sales")){p(!1);return}e(ne=>{const se=ne.map((he,de)=>de!==R?he:Et(he,Z));return x(se,o,P.current),se})}})()),[9,28,40,45].includes(Ie)&&u&&D&&S&&($.current=!0,(async()=>{var V;const C=await Te(a.jsx(xf,{currentCash:((V=F[R])==null?void 0:V.cash)??f}));if(!C||C.action!=="BUY")return;const I=Number(C.headcount??C.qty??0),H={cashDelta:Number(C.cashDelta??-Number(C.totalHire??C.total??C.cost??0)),vendedoresComunsDelta:I,manutencaoDelta:Number(C.expenseDelta??C.totalExpense??0),revenueDelta:Number(C.revenueDelta??0)},Z=H.cashDelta<0?-H.cashDelta:0;if(Z>0&&!ot(R,Z,"contratar Vendedores Comuns")){p(!1);return}e(ne=>{const se=ne.map((he,de)=>de!==R?he:Et(he,H));return x(se,o,P.current),se})})()),[7,31,44].includes(Ie)&&u&&D&&S&&($.current=!0,(async()=>{var ne,se,he,de;const C=((ne=t[R])==null?void 0:ne.mixProdutos)||null,I=((se=t[R])==null?void 0:se.mixOwned)||((he=t[R])==null?void 0:he.mix)||{},H=await Te(a.jsx(bf,{currentCash:((de=F[R])==null?void 0:de.cash)??f,currentLevel:C,mixOwned:I}));if(!H||H.action!=="BUY")return;const Z=Number(H.compra||0);if(!ot(R,Z,"comprar MIX")){p(!1);return}const V=String(H.level||"D");e(fe=>{const et=fe.map((Me,Ee)=>Ee!==R?Me:Et(Me,{cashDelta:-Z,mixProdutosSet:V,mixBaseSet:{despesaPorCliente:Number(H.despesa||0),faturamentoPorCliente:Number(H.faturamento||0)}}));return x(et,o,P.current),et})})()),[3,14,22,26,35,41,48,54].includes(Ie)&&u&&D&&S&&($.current=!0,(async()=>{const C=await Te(a.jsx(Gx,{}));if(!C||C.action!=="APPLY_CARD")return;const I=F[R]||t.find(c)||{};let H=Number.isFinite(C.cashDelta)?Number(C.cashDelta):0,Z=Number.isFinite(C.clientsDelta)?Number(C.clientsDelta):0;if(H<0){const ne=-H;await le(ne,"Sorte & Revs","pagar",F)}if(e(ne=>{const se=ne.map((he,de)=>{var et;if(de!==R)return he;let fe={...he};if(H&&(fe.cash=Math.max(0,(fe.cash??0)+H)),Z){const Me=fe.clients||0;fe.clients=Math.max(0,Me+Z),console.log("[DEBUG] SorteReves - Clientes alterados:",Me,"->",fe.clients,"delta:",Z)}if(C.gainSpecialCell&&(fe.fieldSales=(fe.fieldSales||0)+(C.gainSpecialCell.fieldSales||0),fe.support=(fe.support||0)+(C.gainSpecialCell.support||0),fe.gestores=(fe.gestores||0)+(C.gainSpecialCell.manager||0),fe.gestoresComerciais=(fe.gestoresComerciais||0)+(C.gainSpecialCell.manager||0),fe.managers=(fe.managers||0)+(C.gainSpecialCell.manager||0)),C.id==="casa_change_cert_blue"){fe.az=(fe.az||0)+1;const Me=new Set(((et=fe.trainingsByVendor)==null?void 0:et.comum)||[]);Me.add("personalizado"),fe.trainingsByVendor={...fe.trainingsByVendor||{},comum:Array.from(Me)}}return fe});return x(se,o,P.current),se}),C.perClientBonus||C.perCertifiedManagerBonus||C.mixLevelBonusABOnly){const ne=F[R]||t.find(c)||{};let se=0;if(C.perClientBonus&&(se+=(Number(ne.clients)||0)*Number(C.perClientBonus||0)),C.perCertifiedManagerBonus&&(se+=Ox(ne)*Number(C.perCertifiedManagerBonus||0)),C.mixLevelBonusABOnly){const he=String(ne.mixProdutos||"").toUpperCase();(he==="A"||he==="B")&&(se+=Number(C.mixLevelBonusABOnly||0))}se&&e(he=>{const de=he.map((fe,et)=>et===R?{...fe,cash:(Number(fe.cash)||0)+se}:fe);return x(de,o,P.current),de})}})()),pn&&u&&D&&S){$.current=!0;const C=F[R]||{},I=Math.max(0,Math.floor(Pa(C)));(async()=>{await Te(a.jsx(Hx,{value:I})),e(H=>{const Z=H.map((V,ne)=>ne!==R?V:{...V,cash:(V.cash||0)+I});return x(Z,o,P.current),Z}),b(`${C.name} recebeu faturamento do ms: +$${I.toLocaleString()}`);try{setTimeout(()=>A==null?void 0:A({action:"AUTO_CLOSE_BELOW"}),0)}catch{}})()}if(Y&&u&&D&&S){$.current=!0,console.log("[DEBUG]  DESPESAS OPERACIONAIS - Jogador:",(jn=F[R])==null?void 0:jn.name,"Posio atual:",(z=F[R])==null?void 0:z.pos);const C=F[R]||{},I=Math.max(0,Math.floor($a(C))),H=C.loanPending||{},Z=Number(H.amount)>0&&!H.charged&&H.shouldChargeOnNextExpenses===!0,V=Z?Math.max(0,Math.floor(Number(H.amount))):0;console.log("[DEBUG]  DESPESAS - Valor:",I,"Emprstimo a cobrar:",V,"Total:",I+V),console.log("[DEBUG]  EMPRSTIMO - Detalhes:",{amount:Number(H.amount),charged:H.charged,shouldChargeOnNextExpenses:H.shouldChargeOnNextExpenses,currentRound:n,shouldCharge:Z}),(async()=>{var he,de,fe;await Te(a.jsx(Kx,{expense:I,loanCharge:V}));const ne=I+V;console.log("[DEBUG]  ANTES handleInsufficientFunds - Saldo atual:",(he=F[R])==null?void 0:he.cash,"Total a pagar:",ne,"Posio:",(de=F[R])==null?void 0:de.pos);const se=await le(ne,"Despesas Operacionais","pagar",F);if(console.log("[DEBUG]  APS handleInsufficientFunds - canPayExpenses:",se,"Posio atual:",(fe=F[R])==null?void 0:fe.pos),!se){console.log("[DEBUG]  canPayExpenses  false - no liberando turno aqui, deixando tick() gerenciar");return}Z&&e(et=>{const Me=et.map((Ee,yt)=>{var pt;if(yt!==R)return Ee;const Ke={...Ee};return Ke.loanPending={...Ee.loanPending||{},charged:!0,chargedAtRound:n,shouldChargeOnNextExpenses:!1},Ke.pos=((pt=F[R])==null?void 0:pt.pos)??Ee.pos,Ke});return x(Me,o,P.current),Me}),b(`${C.name} pagou despesas operacionais: -$${I.toLocaleString()}`),V>0&&b(`${C.name} teve emprstimo cobrado: -$${V.toLocaleString()}`),e(et=>{var Ee,yt,Ke;const Me=et.map((pt,kt)=>{var At;return kt!==R?pt:{...pt,pos:((At=F[R])==null?void 0:At.pos)??pt.pos}});return console.log("[DEBUG]  DESPESAS FINALIZADAS - Jogador:",(Ee=Me[R])==null?void 0:Ee.name,"Posio final:",(yt=Me[R])==null?void 0:yt.pos,"Saldo final:",(Ke=Me[R])==null?void 0:Ke.cash),Me})})()}const Ma=Date.now();let _t=0;const Xn=200,Zn=()=>{var he;if(_t++,_t>Xn){console.warn("[DEBUG]  TIMEOUT - excedeu tentativas mximas, forando desbloqueio");const de=te.current;String(de||"")===String(d)&&(p(!1),U.current=!1,O.current>0&&(console.warn("[DEBUG]  Forando modalLocks para 0 (timeout)"),O.current=0,T(0)),$.current=!1);return}const C=O.current,I=$.current,H=te.current,Z=String(H||"")===String(d);if(console.log("[DEBUG] tick - tentativa:",_t,"modalLocks:",C,"openingModalRef:",I,"lockOwner:",H,"myUid:",d,"isLockOwner:",Z),I){console.log("[DEBUG]  tick - modal est sendo aberta, aguardando..."),setTimeout(Zn,150);return}const V=Ve.current?Date.now()-Ve.current:1/0;if(C===0&&(V>=200||!Ve.current)){const de=re.current;if(!!(de!=null&&de.endGame||Kt.current)&&!Ze.current){Ze.current=!0,Kt.current=!1;const Ee=Array.isArray(Le.current)?Le.current:(de==null?void 0:de.nextPlayers)||[],yt=(Ee||[]).filter(pt=>!(pt!=null&&pt.bankrupt));let Ke=null;yt.length>0&&(Ke=((he=yt.map(kt=>({p:kt,patrimonio:(Number(kt.cash)||0)+(Number(kt.bens)||0),cash:Number(kt.cash)||0})).sort((kt,At)=>{var yn,Rn;return At.patrimonio-kt.patrimonio||At.cash-kt.cash||String(((yn=kt.p)==null?void 0:yn.name)||"").localeCompare(String(((Rn=At.p)==null?void 0:Rn.name)||""))})[0])==null?void 0:he.p)||null),console.log("[ENDGAME] finalizando: vencedor=%s, round=5",(Ke==null?void 0:Ke.name)||""),e(Ee||[]),y(!0),E(Ke),r(5),P.current=5,re.current=null,U.current=!1,$.current=!1,p(!1),x(Ee||[],sn.current,5,!0,Ke,{round:5,gameOver:!0,winner:Ke});return}const et=t[o],Me=et&&String(et.id)===String(d);if(Z||Me&&!H){const Ee=re.current;if(console.log("[DEBUG]  tick - verificando pendingTurnDataRef:",Ee?`prximo turno: ${Ee.nextTurnIdx}`:"null"),Ee){const yt=O.current,Ke=$.current,pt=o,kt=te.current,At=String(kt||"")===String(d),yn=Ve.current?Date.now()-Ve.current:1/0,Rn=yt===0&&!Ke&&(yn>=200||!Ve.current);if(Rn&&pt===o&&At){if(console.log("[DEBUG]  Mudando turno - de:",o,"para:",Ee.nextTurnIdx,"finalModalLocks:",yt,"finalOpening:",Ke,"timeSinceLastModalClosed:",yn),Ee.endGame){const ge=Math.min(5,Number(Ee.nextRound||5)),ee=t.filter(ye=>!(ye!=null&&ye.bankrupt));let oe=null;ee.length>0&&(oe=ee.map(be=>({...be,patrimonio:(be.cash||0)+(be.bens||0)})).sort((be,Be)=>Be.patrimonio-be.patrimonio)[0]||null),console.log("[DEBUG]  FIM DE JOGO no tick - Rodada:",ge,"Vencedor:",(oe==null?void 0:oe.name)||null),E(oe),y(!0),b("Fim de jogo! 5 rodadas completas."),r(ye=>{const be=Math.min(5,Math.max(ye,ge));return P.current=be,be});const xe={};Ee.nextRoundFlags&&(xe.roundFlags=Ee.nextRoundFlags),xe.round=ge,xe.gameOver=!0,xe.winner=oe,x(t,o,ge,!0,oe,xe),re.current=null,p(!1),U.current=!1;return}U.current=!0;const Nn=Ee.nextRound,me=Ee.shouldIncrementRound||!1;console.log("[DEBUG]  Broadcast - Rodada a ser transmitida:",Nn,"Rodada atual no estado:",n,"shouldIncrement:",me),s(Ee.nextTurnIdx),r(ge=>{const ee=Math.max(ge,Nn);return ee!==ge&&console.log("[DEBUG]  Rodada atualizada no tick - de:",ge,"para:",ee),P.current=ee,ee});const L={};Ee.nextRoundFlags&&(L.roundFlags=Ee.nextRoundFlags),Ee.shouldIncrementRound&&(L.round=Nn),x(Ee.nextPlayers,Ee.nextTurnIdx,Nn,m,w,L),re.current=null,p(!1),U.current=!1,console.log("[DEBUG]  Turno mudado com sucesso - Rodada:",Nn)}else{console.log("[DEBUG]  tick - condies no atendidas, no mudando turno",{finalModalLocks:yt,finalOpening:Ke,finalCanChangeTurn:Rn,timeSinceLastModalClosed:yn,finalTurnIdx:pt,turnIdx:o,finalIsLockOwner:At,isLockOwner:Z}),console.log("[DEBUG]  tick - condies no atendidas, no mudando turno",{finalModalLocks:yt,finalOpening:Ke,finalTurnIdx:pt,turnIdx:o,finalIsLockOwner:At,isLockOwner:Z}),setTimeout(Zn,150);return}}else{console.log("[DEBUG]  tick - turnData  null, no mudando turno. turnIdx atual:",o,"lockOwner:",H,"isLockOwner:",Z);const yt=Ve.current?Date.now()-Ve.current:1/0,Ke=C===0&&(yt>=200||!Ve.current);if(Z&&Ke&&!I)if(_t<10){console.log("[DEBUG]  tick - tentando novamente em 200ms (pode ser que pendingTurnDataRef ainda no foi preenchido)"),setTimeout(Zn,200);return}else console.warn("[DEBUG]  tick - excedeu tentativas de retry, liberando turnLock"),p(!1),U.current=!1;else p(!1),U.current=!1}}else console.log("[DEBUG]  tick - no sou o dono do cadeado e no  minha vez, no mudando turno",{isLockOwner:Z,isCurrentPlayerMe:Me,currentLockOwner:H,myUid:d,turnIdx:o}),Me||(p(!1),U.current=!1);return}setTimeout(Zn,100)};let gn=0;const Fn=50,Ac=()=>{gn++;const C=$.current,I=O.current>0;if((C||I)&&gn<Fn){console.log("[DEBUG]  checkBeforeTick - modal sendo aberta ou j aberta, aguardando...",{hasOpening:C,hasLocks:I,modalLocks:O.current,attempt:gn}),setTimeout(Ac,200);return}gn>=Fn&&(console.warn("[DEBUG]  checkBeforeTick - excedeu tentativas, forando avano do turno",{hasOpening:C,hasLocks:I,modalLocks:O.current}),O.current>0&&(console.warn("[DEBUG]  checkBeforeTick - forando modalLocks para 0"),O.current=0,T(0)),$.current=!1),console.log("[DEBUG]  checkBeforeTick - iniciando tick, sem modais abertas"),Zn()};setTimeout(Ac,500)}catch(R){throw console.error("[DEBUG] Erro em advanceAndMaybeLap:",R),te.current===String(d)&&p(!1),R}finally{te.current===String(d)?setTimeout(()=>{te.current===String(d)&&(p(!1),U.current=!1)},100):U.current=!1}}},[t,n,o,i,u,c,d,f,m,b,x,e,r,s,l,p,ot,Fr,D,S,A]),Ia=pe.useCallback(()=>{if(m||!t.length)return;const K=as(t,o);s(K),x(t,K,P.current)},[x,m,t,n,s,o]),gt=pe.useCallback(K=>{var qe,Pe,Ae,Jt,ft,En,ht,hn,jn;if(!(!(K!=null&&K.type)||ue.current||Kt.current||Ze.current)){if(K.type==="ROLL"){if(!u)return;try{Yo(K.steps,K.cashDelta,K.note)}catch(z){console.error("[DEBUG] Erro em advanceAndMaybeLap:",z),te.current===String(d)&&p(!1)}return}if(K.type==="RECOVERY"){const z=Math.floor(Math.random()*3e3)+1e3,R=t.find(c);if(!R)return;const ce=t.map(le=>c(le)?{...le,cash:le.cash+z}:le);b(`${R.name} ativou Recuperao Financeira (+$${z})`),e(ce),x(ce,o,P.current);return}if(K.type==="RECOVERY_CUSTOM"){const z=Number(K.amount||0),R=t.find(c);if(!R)return;const ce=t.map(le=>c(le)?{...le,cash:le.cash+z}:le);b(`${R.name} recuperou +$${z}`),e(ce),x(ce,o,P.current);return}if(K.type==="RECOVERY_MODAL"){if(!u||!D||!S)return;(async()=>{const z=await Te(a.jsx(wf,{playerName:(g==null?void 0:g.name)||"Jogador",currentPlayer:g}));if(z){if(z&&z.type==="TRIGGER_BANKRUPTCY"){gt({type:"BANKRUPT"});return}switch(z.type){case"FIRE":gt==null||gt({type:"RECOVERY_FIRE",items:z.items,amount:z.totalCredit??z.amount??0,note:z.note,creditByRole:z.creditByRole});break;case"REDUCE":{const R=Array.isArray(z.items)&&z.items.length>0,ce=R?z.items.map((B,J)=>({...B,group:String(B.group||B.tipo||"").toUpperCase(),level:String(B.level||B.nivel||"").toUpperCase(),credit:Number(B.credit??B.amount??0),selected:J===0?!0:!!B.selected})):void 0,le=R&&(ce==null?void 0:ce[0])||z.selection||z.sel||(z.group&&z.level?{group:String(z.group).toUpperCase(),level:String(z.level).toUpperCase(),credit:Number(z.credit??z.amount??0)}:null),_e=Number((R?z.total??z.totalCredit:void 0)??(le==null?void 0:le.credit)??z.amount??0),j=z.note||(R?`Reduo mltipla +R$ ${_e.toLocaleString()}`:le?`Reduo ${le.group} nvel ${le.level} +R$ ${_e.toLocaleString()}`:`Reduo +R$ ${_e.toLocaleString()}`);gt==null||gt({type:"RECOVERY_REDUCE",items:ce,selection:le||null,amount:_e,note:j});break}case"LOAN":{const R=typeof z.amount=="object"&&z.amount!==null?z.amount:{amount:Number(z.amount??0),cashDelta:Number(z.cashDelta??z.amount??0),loan:z.loan},ce=Number(R.amount??0),le=Number(R.cashDelta??ce??0),_e=R.loan??z.loan??{};gt==null||gt({type:"RECOVERY_LOAN",amount:ce,cashDelta:le,loan:_e,note:z.note});break}default:z.amount>0&&(gt==null||gt({type:"RECOVERY_CUSTOM",amount:z.amount,note:z.note}))}}})();return}if(K.type==="BANKRUPT_MODAL"){if(!u||!D||!S)return;(async()=>await Te(a.jsx(Zx,{playerName:(g==null?void 0:g.name)||"Jogador"}))&&(gt==null||gt({type:"BANKRUPT"})))();return}if(K.type==="RECOVERY_FIRE"){const z=Number(K.amount||0),R=K.items||{},ce={cashDelta:z,vendedoresComunsDelta:-Number(R.comum||0),fieldSalesDelta:-Number(R.field||0),insideSalesDelta:-Number(R.inside||0),gestoresDelta:-Number(R.gestor||0)},le=o;e(_e=>{const j=_e.map((B,J)=>J!==le?B:Et(B,ce));return x(j,o,P.current),j}),b(`${((qe=t[le])==null?void 0:qe.name)||"Jogador"}: ${K.note||"Demisses"}`);return}if(K.type==="RECOVERY_LOAN"){const z=Math.max(0,Number(K.amount||0));if(!z)return;const R=o,ce=t[R];if(ce!=null&&ce.loanPending&&!ce.loanPending.charged){b(`${(ce==null?void 0:ce.name)||"Jogador"} j possui um emprstimo pendente.`);return}e(le=>{const _e=le.map((j,B)=>B!==R?j:{...j,cash:(Number(j.cash)||0)+z,loanPending:{amount:z,charged:!1,shouldChargeOnNextExpenses:!0}});return x(_e,o,P.current),_e}),b(`${(ce==null?void 0:ce.name)||"Jogador"} pegou emprstimo: +$${z.toLocaleString()}`);return}if(K.type==="BUY_MIX"||K.kind==="MIX_BUY"||K.type==="DIRECT_BUY_MIX"){const z=String(K.level||"").toUpperCase(),R=Math.max(0,Number(K.price??0));if(!["A","B","C","D"].includes(z)){p(!1);return}const ce=o;if(!pr(ce,R)){b("Saldo insuficiente para comprar MIX"),p(!1);return}e(le=>{const _e=le.map((j,B)=>{if(B!==ce)return j;const J={...j.mixOwned||j.mix||{},D:!0};return J[z]=!0,{...j,cash:Math.max(0,(Number(j.cash)||0)-R),mixOwned:J,mix:J,mixLevel:z,mixProdutos:z}});return x(_e,o,P.current),_e}),b(`${((Pe=t[ce])==null?void 0:Pe.name)||"Jogador"} comprou MIX nvel ${z} por -$${R.toLocaleString()}`),p(!1);return}if(K.type==="BUY_ERP"||K.kind==="ERP_BUY"||K.type==="DIRECT_BUY_ERP"){const z=String(K.level||"").toUpperCase(),R=Math.max(0,Number(K.price??0));if(!["A","B","C","D"].includes(z)){p(!1);return}const ce=o;if(!pr(ce,R)){b("Saldo insuficiente para comprar ERP"),p(!1);return}e(le=>{const _e=le.map((j,B)=>{if(B!==ce)return j;const J={...j.erpOwned||j.erp||{},D:!0};return J[z]=!0,{...j,cash:Math.max(0,(Number(j.cash)||0)-R),erpOwned:J,erp:J,erpLevel:z,erpSystems:{...j.erpSystems||{},level:z}}});return x(_e,o,P.current),_e}),b(`${((Ae=t[ce])==null?void 0:Ae.name)||"Jogador"} comprou ERP nvel ${z} por -$${R.toLocaleString()}`),p(!1);return}if(K.type==="RECOVERY_REDUCE"){const z=G=>String(G||"").toUpperCase(),R=G=>{const ie=String(G||"").toUpperCase();return ie==="MIX"||ie==="ERP"?ie:ie.includes("MIX")?"MIX":ie.includes("ERP")?"ERP":""},le=(()=>{if(Array.isArray(K.items)&&K.items.length)return K.items.filter(ie=>(ie==null?void 0:ie.selected)??!0).map(ie=>({group:R(ie.group||ie.kind),level:z(ie.level),credit:Math.max(0,Number(ie.credit??ie.amount??0))})).filter(ie=>(ie.group==="MIX"||ie.group==="ERP")&&["A","B","C"].includes(ie.level));const G=K.selection||K.target||null;if(G){const ie={group:R(G.group||G.kind),level:z(G.level),credit:Math.max(0,Number(G.credit??G.amount??K.amount??0))};if((ie.group==="MIX"||ie.group==="ERP")&&["A","B","C"].includes(ie.level))return[ie]}return[]})();if(!le.length){const G=Math.max(0,Number(K.amount??0));if(G>0){const ie=o;e(Re=>{const ut=Re.map((He,ve)=>ve!==ie?He:{...He,cash:(Number(He.cash)||0)+G});return x(ut,o,P.current),ut})}return}const _e=(G,ie)=>{const Re={A:!1,B:!1,C:!1,D:!1,...G||{}},ut=z(ie);return!Re.A&&!Re.B&&!Re.C&&!Re.D&&(["A","B","C","D"].includes(ut)?Re[ut]=!0:Re.D=!0),Re},j=G=>G!=null&&G.A?"A":G!=null&&G.B?"B":G!=null&&G.C?"C":G!=null&&G.D?"D":"-",B=o,J=t[B];if(le.some(G=>G.level==="D")){b("No  possvel reduzir o nvel D (bsico).");return}const W=Array.isArray((Jt=J.reducedLevels)==null?void 0:Jt.MIX)?J.reducedLevels.MIX:[],ae=Array.isArray((ft=J.reducedLevels)==null?void 0:ft.ERP)?J.reducedLevels.ERP:[];if(le.some(G=>G.group==="MIX"&&W.includes(G.level)||G.group==="ERP"&&ae.includes(G.level))){b("No  possvel reduzir um nvel que j foi reduzido anteriormente.");return}e(G=>{const ie=G.map((Re,ut)=>{var ti,Ma;if(ut!==B)return Re;let He={A:!1,B:!1,C:!1,D:!1,...Re.mixOwned||Re.mix||{}},ve={A:!1,B:!1,C:!1,D:!1,...Re.erpOwned||Re.erp||{}};He=_e(He,Re.mixProdutos),ve=_e(ve,Re.erpSistemas);const Ie=[...Array.isArray((ti=Re.reducedLevels)==null?void 0:ti.MIX)?Re.reducedLevels.MIX:[]],pn=[...Array.isArray((Ma=Re.reducedLevels)==null?void 0:Ma.ERP)?Re.reducedLevels.ERP:[]];let Y=0,X=String(Re.mixProdutos||"D").toUpperCase(),st=String(Re.erpLevel||Re.erpSistemas||"D").toUpperCase();for(const _t of le)if(Y+=Math.max(0,Number(_t.credit||0)),_t.group==="MIX"){if(_t.level===X){const Xn=["A","B","C","D"],Zn=Xn.indexOf(X);for(let gn=Zn+1;gn<Xn.length;gn++){const Fn=Xn[gn];if(He[Fn]||Fn==="D"){X=Fn;break}}}delete He[_t.level],He[_t.level]=!1,Ie.includes(_t.level)||Ie.push(_t.level)}else if(_t.group==="ERP"){if(_t.level===st){const Xn=["A","B","C","D"],Zn=Xn.indexOf(st);for(let gn=Zn+1;gn<Xn.length;gn++){const Fn=Xn[gn];if(ve[Fn]||Fn==="D"){st=Fn;break}}}delete ve[_t.level],ve[_t.level]=!1,pn.includes(_t.level)||pn.push(_t.level)}He.A||He.B||He.C||(He.D=!0,He.A=!1,He.B=!1,He.C=!1),ve.A||ve.B||ve.C||(ve.D=!0,ve.A=!1,ve.B=!1,ve.C=!1);const Un=j(He),zn=j(ve),mr=Un!=="-"?Un:X||"D",Cn=zn!=="-"?zn:st||"D",Qn={...He},gr={...ve};return{...Re,cash:(Number(Re.cash)||0)+Y,mixOwned:Qn,erpOwned:gr,mix:Qn,erp:gr,mixProdutos:mr,erpLevel:Cn,erpSistemas:Cn,reducedLevels:{MIX:Ie,ERP:pn}}});return x(ie,o,P.current),ie});const Ge=le.reduce((G,ie)=>G+Math.max(0,Number(ie.credit||0)),0);if(le.length===1){const G=le[0];b(`${(J==null?void 0:J.name)||"Jogador"} reduziu ${G.group} nvel ${G.level} e recebeu +$${Ge.toLocaleString()}`)}else b(`${(J==null?void 0:J.name)||"Jogador"} reduziu ${le.length} nveis e recebeu +$${Ge.toLocaleString()}`);return}if(K.type==="BANKRUPT"){const z=o;try{String((En=t[z])==null?void 0:En.id)===String(d)&&(N==null||N(!0))}catch{}const R=t.map((_e,j)=>j===z?{..._e,bankrupt:!0}:_e);if(b(`${((ht=t[z])==null?void 0:ht.name)||"Jogador"} declarou FALNCIA.`),js(R)<=1){const _e=R.findIndex(j=>!(j!=null&&j.bankrupt));E(_e>=0?R[_e]:null),e(R),y(!0),p(!1),x(R,o,n,!0,_e>=0?R[_e]:null);return}const le=as(R,z);e(R),s(le),p(!1),x(R,le,P.current),console.log("[DEBUG]  advanceAndMaybeLap finalizada (falncia) - posio final:",(hn=R[le])==null?void 0:hn.pos);return}console.log("[DEBUG]  advanceAndMaybeLap finalizada normalmente - posio final:",(jn=nextPlayers[curIdx])==null?void 0:jn.pos)}},[t,n,o,u,c,d,f,m,b,x,e,r,s,p,y,E,ot,D,S,A,N]);return pe.useEffect(()=>{if(v===0&&_&&!$.current){const K=te.current;String(K||"")===String(d)?(console.log("[DEBUG]  Destravando turnLock - modalLocks: 0, sou o lockOwner"),p(!1),U.current=!1):u||(console.log("[DEBUG]  Destravando turnLock - no  minha vez e no sou lockOwner"),p(!1),U.current=!1)}},[v,_,Xe,d,u,p]),pe.useEffect(()=>{if(u&&v===0&&_&&!$.current){const K=te.current;String(K||"")===String(d)?(console.log("[DEBUG]  Destravando turnLock -  minha vez e sou o lockOwner"),p(!1),U.current=!1):K||(console.log("[DEBUG]  Destravando turnLock -  minha vez mas no h lockOwner"),p(!1),U.current=!1)}},[u,v,_,Xe,d,p]),pe.useEffect(()=>()=>{Se.current&&(clearTimeout(Se.current),Se.current=null),U.current=!1,$.current=!1},[]),{advanceAndMaybeLap:Yo,onAction:gt,nextTurn:Ia,modalLocks:v,lockOwner:Xe}}const um=k.createContext(null),tb=()=>{try{return k.useContext(um)}catch{return null}};function nb({roomCode:t,hostId:e,children:n}){const r=!!De&&!!t,o=String(t||"").trim(),[s,i]=k.useState(!1),[l,u]=k.useState({}),[c,d]=k.useState(0),h=k.useRef(l),f=k.useRef(c),g=k.useRef(0),x=k.useRef(null),b=k.useRef(null);k.useEffect(()=>{h.current=l},[l]),k.useEffect(()=>{f.current=c},[c]);const _=async y=>{const{data:w,error:E}=await De.from("rooms").select("id, code, host_id, state, version, updated_at").eq("code",y).order("updated_at",{ascending:!1}).limit(1).maybeSingle();return E?(console.warn("[NET] getLatestRoomByCode error:",E.message||E),null):w};k.useEffect(()=>{if(!r)return;let y=!1;return(async()=>{let w=await _(o);if(!w){const E={code:o,state:{},version:0,host_id:e||null},{data:N,error:D}=await De.from("rooms").insert(E).select("id, code, host_id, state, version, updated_at").maybeSingle();if(D){console.warn("[NET] rooms/create:",D.message||D);return}if(y)return;N?w=N:w=await _(o)}y||(w&&(x.current=w.id,b.current=w.updated_at,u(w.state||{}),d(w.version??0)),i(!0))})(),()=>{y=!0}},[r,o,e]),k.useEffect(()=>{if(!r)return;const y=De.channel(`rooms:${o}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`code=eq.${o}`},w=>{const E=w.new||w.old||{};if(typeof E.version=="number"&&E.version>f.current){if(b.current&&E.updated_at){const N=new Date(E.updated_at).getTime(),D=new Date(b.current).getTime();if(N<D){console.log("[NET] realtime - ignorando evento de row antiga",{rowVersion:E.version,currentVersion:f.current,rowUpdatedAt:E.updated_at,knownUpdatedAt:b.current});return}}d(E.version),E.state&&u(E.state),E.updated_at&&(b.current=E.updated_at),E.id&&(x.current=E.id),g.current=Date.now(),console.log("[NET] applied remote v=%d",E.version)}}).subscribe();return()=>{try{De.removeChannel(y)}catch{}}},[r,o]),k.useEffect(()=>{if(!r)return;const y=setInterval(async()=>{if(Date.now()-(g.current||0)<2e3)return;const w=await _(o);w&&w.version>f.current&&(d(w.version),u(w.state||{}),w.updated_at&&(b.current=w.updated_at),w.id&&(x.current=w.id))},700);return()=>clearInterval(y)},[r,o]);const p=async y=>{var D;if(!r||!s)return;const w=3,E=new Date().toISOString();for(let S=1;S<=w;S++){let A=await _(o);if(!A){const Ve={code:o,state:{},version:0,host_id:e||null},{data:Xe,error:q}=await De.from("rooms").insert(Ve).select("id, code, host_id, state, version, updated_at").maybeSingle();if(q){if(console.warn(`[NET] commit - insert failed (attempt ${S}/${w}):`,q.message||q),S<w){await new Promise(te=>setTimeout(te,50*S));continue}return}if(Xe)A=Xe,x.current=A.id,b.current=A.updated_at;else if(A=await _(o),!A){if(console.warn(`[NET] commit - no row after insert (attempt ${S}/${w})`),S<w){await new Promise(te=>setTimeout(te,50*S));continue}return}}A.id&&(x.current=A.id);const v=A.state||{},T=typeof y=="function"?y(v)||{}:y||{},O=x.current||A.id;if(!O){if(console.warn("[NET] commit - no target ID available"),S<w){await new Promise(Ve=>setTimeout(Ve,50*S));continue}return}const{data:$,error:U}=await De.from("rooms").update({state:T,version:(A.version||0)+1,updated_at:E}).eq("id",O).eq("version",A.version).select("state, version, updated_at").maybeSingle();if(!U&&$){u($.state||{}),d($.version??(A.version||0)+1),$.updated_at&&(b.current=$.updated_at),S>1&&console.log(`[NET] commit succeeded on attempt ${S}/${w}`);return}if(((U==null?void 0:U.code)==="PGRST116"||((D=U==null?void 0:U.message)==null?void 0:D.includes("0 rows"))||(U==null?void 0:U.code)==="23505"||(U==null?void 0:U.message)&&U.message.includes("version"))&&S<w){console.warn(`[NET] commit conflict (attempt ${S}/${w}):`,(U==null?void 0:U.message)||U,"- retrying..."),await new Promise(Ve=>setTimeout(Ve,50*S));continue}console.warn(`[NET] commit conflict (attempt ${S}/${w}):`,(U==null?void 0:U.message)||U)}const N=await _(o);N?(u(N.state||{}),d(N.version??0),N.updated_at&&(b.current=N.updated_at),N.id&&(x.current=N.id),console.warn("[NET] commit failed after retries, resynced to latest state")):console.warn("[NET] commit fallback resync failed: no row found")},m=k.useMemo(()=>({enabled:r,ready:s,state:l,version:c,commit:p}),[r,s,l,c]);return a.jsx(um.Provider,{value:m,children:n})}function rb(){var R,ce,le,_e;const[t,e]=k.useState("start"),[n,r]=k.useState(null),o=k.useMemo(()=>qs(),[]),s=k.useMemo(()=>so(""),[]),[i,l]=k.useState(o);k.useMemo(()=>Object.freeze({mixProdutos:"D",erpLevel:"D",clients:1,vendedoresComuns:1}),[]);const u=(j={})=>({...j,mixProdutos:j.mixProdutos??"D",erpLevel:j.erpLevel??"D",clients:j.clients??1,vendedoresComuns:j.vendedoresComuns??1}),[c,d]=k.useState([u({id:o,name:s||"Jogador",cash:18e3,pos:0,color:"#ffd54f",bens:4e3})]),[h,f]=k.useState(1),[g,x]=k.useState(0),[b,_]=k.useState(new Array(1).fill(!1)),[p,m]=k.useState(!1),[y,w]=k.useState(null),[E,N]=k.useState({id:o,name:((R=c[0])==null?void 0:R.name)||"Jogador",color:((ce=c[0])==null?void 0:ce.color)||"#6c5ce7",cash:((le=c[0])==null?void 0:le.cash)??18e3,possibAt:0,clientsAt:0,matchId:"local"}),[D,S]=k.useState(["Bem-vindo ao Sales Game!"]),A=j=>S(B=>[j,...B].slice(0,12)),[v,T]=k.useState(!1),[O,$]=k.useState(null),U=k.useRef(null),Se=k.useRef(null),Ve=k.useRef(0),Xe=pe.useCallback(j=>!!j&&String(j.id)===String(i),[i]),q=k.useMemo(()=>{var j;return((j=c.find(Xe))==null?void 0:j.cash)??0},[c,Xe]);k.useEffect(()=>{var j;try{const B=new URL(window.location.href),J=B.searchParams.get("room"),ke=localStorage.getItem("sg:lastRoomName"),W=J||ke;if(ke&&!J&&localStorage.removeItem("sg:lastRoomName"),W&&J){r(W),(j=window.__setRoomCode)==null||j.call(window,W);try{B.searchParams.set("room",String(W)),history.replaceState(null,"",B.toString())}catch{}e("playersLobby")}else s&&s.trim()!==""&&e("lobbies")}catch{}},[s]);const te=k.useMemo(()=>`sg-sync:${n||"local"}`,[n]);k.useEffect(()=>{var j,B;try{(B=(j=U.current)==null?void 0:j.close)==null||B.call(j);const J=new BroadcastChannel(te);return J.onmessage=ke=>{var ae,F,Ge,G;const W=ke.data||{};if(String(W.source)!==String(o)){if(W.type==="START"){const ie=Array.isArray(W.players)?W.players.map(u):[];if(!ie.length)return;try{const Re=window.__MY_UID||window.__myUid||window.__playerId||null;Re&&l(String(Re))}catch{}d(ie),x(0),f(1),_(new Array(Math.max(1,ie.length)).fill(!1)),m(!1),w(null),e("game"),S(["Jogo iniciado!"]);return}if(W.type==="TURNLOCK"){T(!!W.value);return}if(W.type==="SYNC"&&t==="game"){if(P!=null&&P.enabled&&(P!=null&&P.ready)&&ue){console.log("[App] SYNC ignorado - netState ativo, usando Supabase como autoridade nica");return}const ie=Number(W.version||0),Re=Number(W.timestamp||0),ut=pr.current;if(console.log("[App] SYNC recebido - verso remota:",ie,"verso local:",ut,"turnIdx:",W.turnIdx,"round:",W.round,"source:",W.source),console.log("[App] SYNC - meu turnIdx atual:",g,"meu myUid:",i),ie>0&&ut>0&&ie<ut){console.log("[App] SYNC -  REJEITANDO estado remoto - verso antiga:",ie,"< verso local:",ut);return}const He=Date.now(),ve=Ze.current;if(ie>ut&&(pr.current=ie,console.log("[App] SYNC -  Aceitando verso remota:",ie,"> verso local:",ut)),W.turnIdx!==g)if(ve&&He-ve.timestamp<5e3)if(ve.turnIdx!==g){const X=W.turnIdx===ve.turnIdx;let st=!1;X?(console.log("[App] SYNC -  IGNORANDO turnIdx remoto - tentando reverter mudana local recente (mantendo resto do snapshot)",{lastLocalTurnIdx:ve.turnIdx,currentLocalTurnIdx:g,remoteTurnIdx:W.turnIdx,timeSinceLocalChange:He-ve.timestamp,isReverting:!0}),st=!0):(console.log("[App] SYNC -  IGNORANDO turnIdx remoto - turnIdx local mudou recentemente (< 5s) (mantendo resto do snapshot)",{lastLocalTurnIdx:ve.turnIdx,currentLocalTurnIdx:g,remoteTurnIdx:W.turnIdx,timeSinceLocalChange:He-ve.timestamp}),st=!0),!st&&W.turnIdx!==void 0&&x(W.turnIdx)}else W.turnIdx===ve.turnIdx&&ve.turnIdx!==g?console.log("[App] SYNC -  IGNORANDO turnIdx remoto - tentando reverter para valor anterior (mantendo resto do snapshot)",{lastLocalTurnIdx:ve.turnIdx,currentLocalTurnIdx:g,remoteTurnIdx:W.turnIdx}):(x(W.turnIdx),console.log("[App] SYNC - Sincronizando turnIdx",{local:g,remote:W.turnIdx}));else ve&&W.turnIdx===ve.turnIdx&&ve.turnIdx!==g?console.log("[App] SYNC -  IGNORANDO turnIdx remoto - tentando reverter para valor anterior (sem mudana recente, mantendo resto do snapshot)",{lastLocalTurnIdx:ve.turnIdx,currentLocalTurnIdx:g,remoteTurnIdx:W.turnIdx}):(x(W.turnIdx),console.log("[App] SYNC - Sincronizando turnIdx",{local:g,remote:W.turnIdx}));if(Array.isArray(W.roundFlags)&&W.roundFlags.length>0&&_(Y=>{const X=W.roundFlags.map((st,It)=>Y[It]||!1||st);for(;X.length<Y.length;)X.push(Y[X.length]||!1);return console.log("[App] SYNC - roundFlags sincronizado:",X.map((st,It)=>{var mn;return`${(mn=c[It])==null?void 0:mn.name}:${st}`}).join(", ")),X}),W.round!==h)if(ve&&He-ve.timestamp<3e3){const Y=ve.round!==h;f(Y?X=>{const st=Math.max(X,W.round);return st>X&&console.log("[App] SYNC - Rodada incrementada via sincronizao:",X,"->",st),st}:W.round)}else f(Y=>Math.max(Y,W.round));const Ie=c,pn=W.players.map(Y=>{const X=Ie.find(It=>It.id===Y.id);if(!X)return Y;if(String(Y.id)===String(i)){const It=Number(X.clients||0),mn=Number(Y.clients||0),Un=Number(X.vendedoresComuns||0),zn=Number(Y.vendedoresComuns||0),mr=Number(X.fieldSales||0),Cn=Number(Y.fieldSales||0),Qn=Number(X.insideSales||0),gr=Number(Y.insideSales||0);return It>mn||Un>zn||mr>Cn||Qn>gr||X.mixProdutos&&X.mixProdutos!==Y.mixProdutos&&X.mixProdutos!=="D"||X.erpLevel&&X.erpLevel!==Y.erpLevel&&X.erpLevel!=="D"?(console.log("[App] SYNC - Detectadas compras locais, preservando estado local completo",{localClients:It,remoteClients:mn,localVendedores:Un,remoteVendedores:zn}),{...X,pos:Y.pos,bankrupt:Y.bankrupt??X.bankrupt,az:X.az||Y.az||0,am:X.am||Y.am||0,rox:X.rox||Y.rox||0,trainingsByVendor:X.trainingsByVendor||Y.trainingsByVendor||{},onboarding:X.onboarding||Y.onboarding||!1}):{...Y,cash:Math.max(Number(X.cash||0),Number(Y.cash||0)),clients:Math.max(It,mn),mixProdutos:X.mixProdutos??Y.mixProdutos,erpLevel:X.erpLevel??Y.erpLevel,vendedoresComuns:Math.max(Un,zn),fieldSales:Math.max(mr,Cn),insideSales:Math.max(Qn,gr),gestores:Math.max(Number(X.gestores??X.gestoresComerciais??X.managers??0),Number(Y.gestores??Y.gestoresComerciais??Y.managers??0)),gestoresComerciais:Math.max(Number(X.gestoresComerciais??X.gestores??X.managers??0),Number(Y.gestoresComerciais??Y.gestores??Y.managers??0)),managers:Math.max(Number(X.managers??X.gestores??X.gestoresComerciais??0),Number(Y.managers??Y.gestores??Y.gestoresComerciais??0)),bens:Math.max(Number(X.bens||0),Number(Y.bens||0)),manutencao:X.manutencao??Y.manutencao,loanPending:X.loanPending??Y.loanPending,az:X.az||Y.az||0,am:X.am||Y.am||0,rox:X.rox||Y.rox||0,trainingsByVendor:X.trainingsByVendor||Y.trainingsByVendor||{},onboarding:X.onboarding||Y.onboarding||!1}}return{...Y,az:X.az||Y.az||0,am:X.am||Y.am||0,rox:X.rox||Y.rox||0,trainingsByVendor:X.trainingsByVendor||Y.trainingsByVendor||{},onboarding:X.onboarding||Y.onboarding||!1}});d(pn),console.log("[App] SYNC aplicado - novo turnIdx:",W.turnIdx),console.log("[App] SYNC - jogador da vez:",(ae=pn[W.turnIdx])==null?void 0:ae.name,"id:",(F=pn[W.turnIdx])==null?void 0:F.id),console.log("[App] SYNC -  minha vez?",String((Ge=pn[W.turnIdx])==null?void 0:Ge.id)===String(i)),m(Y=>Y||!!W.gameOver),w(Y=>(p||W.gameOver)&&Y&&!W.winner?Y:W.winner??Y),W.gameOver===!0&&console.log(`[App] [ENDGAME] estado remoto aplicado: gameOver=true winner=${((G=W.winner)==null?void 0:G.name)??W.winner??"N/A"}`)}}},U.current=J,()=>J.close()}catch(J){console.warn("[App] BroadcastChannel init failed:",J)}},[te,o,t]),k.useEffect(()=>{const j=async()=>{if(console.log(`[App] handleLeaveRoom chamado - fase: ${t}, currentLobbyId: ${n}, myUid: ${i}`),(t==="lobbies"||t==="playersLobby"||t==="game")&&n&&i)try{console.log(`[App] Saindo da sala ${n} na fase ${t}`),await xl({roomCode:n,playerId:i})}catch(ke){console.warn("[App] Erro ao sair da sala:",ke)}else console.log("[App] No executando leaveRoom - condies no atendidas")},B=()=>{j()},J=()=>{j()};return window.addEventListener("beforeunload",B),window.addEventListener("pagehide",J),()=>{window.removeEventListener("beforeunload",B),window.removeEventListener("pagehide",J)}},[t,n,i]);const re=j=>{var J,ke;const B=!!j;T(B);try{(ke=(J=U.current)==null?void 0:J.postMessage)==null||ke.call(J,{type:"TURNLOCK",value:B,source:o})}catch{}},P=tb(),Le=P==null?void 0:P.commit,sn=P==null?void 0:P.version,ue=P==null?void 0:P.state,Kt=k.useMemo(()=>{if(g<0||g>=c.length)return console.warn("[App] isMyTurn - turnIdx invlido:",g,"players.length:",c.length),!1;const j=c[g];if(!j)return console.log("[App] isMyTurn - owner no encontrado, turnIdx:",g,"players.length:",c.length),!1;if(j.bankrupt)return console.log("[App] isMyTurn - owner est falido:",j.name),!1;const B=j.id!=null&&String(j.id)===String(i);return console.log("[App] isMyTurn - owner:",j.name,"id:",j.id,"myUid:",i,"isMine:",B),B},[g,c,i]);pe.useRef(null);const Ze=pe.useRef(null),Te=pe.useRef(0),pr=pe.useRef(0),ot=pe.useRef(0);pe.useEffect(()=>{const j=Ze.current,B=!j||j.turnIdx!==g,J=!j||j.round!==h,ke=!j||JSON.stringify(j.players)!==JSON.stringify(c);if(B||J||ke){const W=Date.now();(j?W-j.timestamp:1/0)>100?(Ze.current={players:c,turnIdx:g,round:h,timestamp:W},B&&console.log("[App] lastLocalStateRef atualizado via useEffect - turnIdx mudou:",j==null?void 0:j.turnIdx,"->",g)):Ze.current={...Ze.current,players:c,turnIdx:g,round:h}}},[c,g,h]),k.useEffect(()=>{var ke;if(!(P!=null&&P.enabled)||!(P!=null&&P.ready)||!ue)return;if(typeof sn=="number"){if(sn<=ot.current)return;ot.current=sn}const j=Array.isArray(ue.players)?ue.players:null,B=Number.isInteger(ue.turnIdx)?ue.turnIdx:null,J=Number.isInteger(ue.round)?ue.round:null;if(j&&d(j),B!==null&&x(B),J!==null){const W=J===1&&(B===0||B===null)&&Array.isArray(j)&&j.length>0&&j.every(ae=>Number((ae==null?void 0:ae.pos)??0)===0)&&(ue.gameOver===!1||ue.gameOver==null);f(ae=>W?1:Math.max(ae,J))}if(ue.roundFlags!==void 0){if(Array.isArray(ue.roundFlags))_(ue.roundFlags),console.log("[NET] applied remote includes roundFlags?",!0,"length:",ue.roundFlags.length);else if(typeof ue.roundFlags=="object"){const W=Object.values(ue.roundFlags);_(W),console.log("[NET] applied remote includes roundFlags?",!0,"converted from object, length:",W.length)}}typeof ue.turnLock=="boolean"&&(T(ue.turnLock),ue.turnLock&&!Se.current?Se.current=Date.now():ue.turnLock||(Se.current=null),ue.turnLock&&ue.lockOwner&&console.log("[LOCK] bloqueado: turnLockBroadcast=true lockOwner=",ue.lockOwner,"myId=",i)),ue.lockOwner!==void 0&&($(ue.lockOwner),Ze.current&&(Ze.current.lockOwner=ue.lockOwner),console.log("[NET] applied remote includes lockOwner?",!0,"value:",ue.lockOwner)),Ve.current=Date.now(),m(W=>W||!!ue.gameOver),w(W=>(p||ue.gameOver)&&W&&!ue.winner?W:ue.winner??W),ue.gameOver===!0&&console.log(`[App] [ENDGAME] estado remoto aplicado: gameOver=true winner=${((ke=ue.winner)==null?void 0:ke.name)??ue.winner??"N/A"}`),console.log("[NET] applied remote v=%d",sn)},[sn,ue,P==null?void 0:P.enabled,P==null?void 0:P.ready]),k.useEffect(()=>{if(!v){Se.current=null;return}Se.current||(Se.current=Date.now());const j=setInterval(()=>{const B=Date.now(),J=Se.current?B-Se.current:0,ke=c[g],W=ke&&String(ke.id)===String(i),ae=Kt&&W,F=O===i;J>8e3&&ae&&!F&&O!=null&&(console.warn("[LOCK-WATCHDOG] stole lock - turnLock travado por",J,"ms, liberando...",{isMyTurn:ae,lockOwner:O,myUid:i}),Fr({turnLock:!1,lockOwner:i}),re(!1),$(i),Se.current=null)},1e3);return()=>clearInterval(j)},[v,Kt,g,c,O,i,Le]);async function Fr(j){if(typeof Le=="function")try{await Le(B=>({...B||{},...j||{}}))}catch(B){console.warn("[NET] commit failed:",(B==null?void 0:B.message)||B)}}function Yo(j,B,J,ke=p,W=y,ae={}){var mn,Un,zn,mr,Cn,Qn;Te.current=Te.current+1;const F=Te.current,Ge=ae.roundFlags!==void 0?ae.roundFlags:b,G=ae.turnLock!==void 0?ae.turnLock:v,ie=((mn=Ze.current)==null?void 0:mn.lockOwner)??null,Re=ae.lockOwner!==void 0?ae.lockOwner:ie,ut=ae.gameOver!==void 0?ae.gameOver:ke,ve=!!p||!!((Un=Ze.current)!=null&&Un.gameOver)?!0:!!ut,Ie=ae.winner!==void 0?ae.winner:W,pn=y??((zn=Ze.current)==null?void 0:zn.winner)??null,Y=ve?Ie??pn:Ie,X=ae.round!==void 0?ae.round:J,st=Math.max(Number(X||1),Number(h||1),Number(((mr=Ze.current)==null?void 0:mr.round)||1)),It=Date.now();Ze.current={players:j,turnIdx:B,round:st,gameOver:ve,winner:Y,lockOwner:Re,timestamp:It,version:F},pr.current=F,console.log("[App] broadcastState - verso:",F,"turnIdx:",B,"round(next):",J,"round(safe):",st,"timestamp:",It),Object.keys(ae).length>0&&console.log("[NET] commit patch keys:",Object.keys(ae).join(", ")),Fr({players:j,turnIdx:B,round:st,roundFlags:Ge,turnLock:G,lockOwner:Re,gameOver:ve,winner:Y});try{(Qn=(Cn=U.current)==null?void 0:Cn.postMessage)==null||Qn.call(Cn,{type:"SYNC",version:F,players:j,turnIdx:B,round:st,roundFlags:Ge,turnLock:G,lockOwner:Re,gameOver:ve,winner:Y,source:o,timestamp:It})}catch(gr){console.warn("[App] broadcastState failed:",gr)}}function Ia(j){var B,J;Fr({players:j,turnIdx:0,round:1});try{(J=(B=U.current)==null?void 0:B.postMessage)==null||J.call(B,{type:"START",players:j,source:o})}catch(ke){console.warn("[App] broadcastStart failed:",ke)}}const gt=c[g];k.useEffect(()=>{t==="game"&&zx(c,g,h,p,y,"Game State Update")},[c,g,h,p,y,t]),k.useEffect(()=>{const j=c.find(Xe);if(!j)return;const{cap:B,inAtt:J}=fa(j);N(ke=>({...ke,cash:j.cash,possibAt:B,clientsAt:J,name:j.name,color:j.color}))},[c,Xe]);const K=k.useMemo(()=>{const j=c.find(Xe)||c[0]||{},B=Pa(j),J=$a(j),{cap:ke,inAtt:W}=fa(j),ae=String(j.erpLevel||"D").toUpperCase(),F=Number(j.gestores??j.gestoresComerciais??j.managers??0);return console.log("[App] Totals recalculado - me:",j.name,"clients:",j.clients,"faturamento:",B,"manutencao:",J,"vendedoresComuns:",j.vendedoresComuns,"fieldSales:",j.fieldSales,"insideSales:",j.insideSales),Fx(j,"HUD Totals"),{faturamento:B,manutencao:J,emprestimos:j.loanPending&&!j.loanPending.charged?Number(j.loanPending.amount||0):0,vendedoresComuns:j.vendedoresComuns||0,fieldSales:j.fieldSales||0,insideSales:j.insideSales||0,mixProdutos:j.mixProdutos||"D",bens:j.bens??0,erpSistemas:ae,clientes:j.clients||0,onboarding:!!j.onboarding,az:j.az||0,am:j.am||0,rox:j.rox||0,gestores:F,gestoresComerciais:F,possibAt:ke,clientsAt:W}},[c,Xe]),[qe,Pe]=k.useState(!1),{onAction:Ae,modalLocks:Jt}=eb({players:c,setPlayers:d,round:h,setRound:f,turnIdx:g,setTurnIdx:x,roundFlags:b,setRoundFlags:_,isMyTurn:Kt,isMine:Xe,myUid:i,meId:o,myCash:q,current:gt,broadcastState:Yo,appendLog:A,turnLock:v,setTurnLockBroadcast:re,gameOver:p,setGameOver:m,winner:y,setWinner:w,setShowBankruptOverlay:Pe});if(t==="start")return a.jsx(ax,{onEnter:j=>{const B=so(j||"Jogador");d([u({id:o,name:B,cash:18e3,pos:0,color:"#ffd54f",bens:4e3})]),f(1),x(0),m(!1),w(null),_(new Array(1).fill(!1)),e("lobbies"),N(J=>({...J,name:B})),S([`Bem-vindo, ${B}!`])}});if(t==="lobbies")return a.jsx(vx,{onEnterRoom:j=>{var B;r(j),(B=window.__setRoomCode)==null||B.call(window,j);try{localStorage.setItem("sg:lastRoomName",String(j));const J=new URL(window.location.href);J.searchParams.set("room",String(j)),history.replaceState(null,"",J.toString())}catch{}e("playersLobby")}});if(t==="playersLobby")return a.jsx(xx,{lobbyId:n,onBack:()=>{var j;(j=window.__setRoomCode)==null||j.call(window,null),e("lobbies")},onStartGame:j=>{var W;const B=(j==null?void 0:j.lobbyName)||((W=j==null?void 0:j.lobby)==null?void 0:W.name)||(j==null?void 0:j.name)||n||"sala-demo";try{localStorage.setItem("sg:lastRoomName",String(B));const ae=new URL(window.location.href);if(ae.searchParams.set("room",String(B)),history.replaceState(null,"",ae.toString()),!sessionStorage.getItem("sg:room-reloaded")){sessionStorage.setItem("sg:room-reloaded","1"),location.reload();return}}catch{}const ke=(Array.isArray(j)?j:(j==null?void 0:j.players)??(j==null?void 0:j.lobbyPlayers)??[]).map((ae,F)=>u({id:String(ae.id??ae.player_id),name:ae.name??ae.player_name,cash:18e3,pos:0,bens:4e3,color:["#ffd54f","#90caf9","#a5d6a7","#ffab91"][F%4]}));if(ke.length!==0){try{const ae=ke.find(F=>String(F.name||"").trim().toLowerCase()===String(s||"").trim().toLowerCase());ae!=null&&ae.id&&l(String(ae.id))}catch{}d(ke),x(0),f(1),_(new Array(ke.length).fill(!1)),m(!1),w(null),N(ae=>{var Ge,G;const F=ke.find(Xe);return{...ae,name:(F==null?void 0:F.name)||((Ge=ke[0])==null?void 0:Ge.name)||"Jogador",color:(F==null?void 0:F.color)||((G=ke[0])==null?void 0:G.color)||"#6c5ce7",cash:(F==null?void 0:F.cash)??18e3,possibAt:0,clientsAt:0}}),S(["Jogo iniciado!"]),Ia(ke),e("game")}}});const ft=c[g],En=(ft==null?void 0:ft.bankrupt)===!0,ht=ft&&String(ft.id)===String(i),hn=h===5&&((_e=c[g])==null?void 0:_e.waitingAtRevenue),jn=O==null||O===i,z=Kt&&ht&&Jt===0&&!v&&jn&&!En&&!p&&!hn;return console.log("[App] controlsCanRoll - isMyTurn:",Kt,"isCurrentPlayerMe:",ht,"modalLocks:",Jt,"turnLock:",v,"lockOwner:",O,"lockOwnerOk:",jn,"isBankrupt:",En,"gameOver:",p,"isWaitingRevenue:",hn,"result:",z),a.jsxs("div",{className:"page",children:[a.jsxs("header",{className:"topbar",children:[a.jsxs("div",{className:"status",style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[a.jsx("span",{style:{width:18,height:18,borderRadius:"50%",border:"2px solid rgba(255,255,255,.9)",boxShadow:"0 0 0 2px rgba(0,0,0,.25)",background:E.color}}),a.jsxs("span",{style:{background:"#1f2430",border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:"4px 10px",fontWeight:800},children:[" ",E.name]}),a.jsxs("span",{children:["Possib. Atendimento: ",a.jsx("b",{children:E.possibAt??0})]}),a.jsxs("span",{children:["Clientes em Atendimento: ",a.jsx("b",{children:E.clientsAt??0})]}),a.jsx(Vx,{players:c,turnIdx:g,round:h,gameOver:p,winner:y})]}),a.jsxs("div",{className:"status",style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[a.jsxs("span",{children:["Rodada: ",h]}),a.jsxs("span",{className:"money",children:[" $ ",Number(q).toLocaleString()]})]})]}),a.jsxs("main",{className:"content",children:[a.jsx("div",{className:"boardWrap",children:a.jsx(Cx,{players:c,turnIdx:g,onMeHud:N})}),a.jsxs("aside",{className:"side",children:[a.jsx(Rx,{totals:K,players:c}),a.jsxs("div",{className:"controlsSticky",children:[a.jsx(Nx,{onAction:j=>{Ae(j)},current:gt,isMyTurn:z}),a.jsx("div",{style:{marginTop:10},children:a.jsx("button",{className:"btn dark",onClick:async()=>{var j;if(n&&i)try{await xl({roomCode:n,playerId:i})}catch(B){console.warn("[App] Erro ao sair da sala:",B)}(j=window.__setRoomCode)==null||j.call(window,null),e("lobbies")},children:"Sair para Lobbies"})})]}),p&&a.jsx(Dx,{players:c,onExit:async()=>{var j;if(n&&i)try{await xl({roomCode:n,playerId:i})}catch(B){console.warn("[App] Erro ao sair da sala:",B)}(j=window.__setRoomCode)==null||j.call(window,null),e("lobbies")},onRestart:()=>{const j=c.map(B=>u({...B,cash:18e3,bens:4e3,pos:0}));d(j),x(0),f(1),_(new Array(j.length).fill(!1)),S(["Novo jogo iniciado!"]),m(!1),w(null)}})]})]}),a.jsx("footer",{className:"foot",children:a.jsxs("small",{children:["Desenvolvido por ",a.jsx("a",{href:"https://www.tironitech.com",target:"_blank",rel:"noreferrer",children:"tironitech.com"})]})}),qe&&a.jsx(Ax,{})]})}function ob(){const e=new URLSearchParams(window.location.search).get("room");return e&&String(e).trim()||null}function sb(){const[t,e]=pe.useState(ob());return pe.useEffect(()=>(window.__setRoomCode=n=>{const r=String(n||"").trim()||null;e(r);const o=new URL(window.location.href);r?o.searchParams.set("room",r):o.searchParams.delete("room"),window.history.replaceState({},"",o)},()=>{delete window.__setRoomCode}),[]),pe.useEffect(()=>(window.exportLogs=()=>{const n=lm(),r=new Blob([n.text],{type:"text/plain;charset=utf-8"}),o=URL.createObjectURL(r),s=document.createElement("a");return s.href=o,s.download=`debug-logs-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`,s.click(),URL.revokeObjectURL(o),console.log(" Logs exportados! Arquivo .txt baixado."),n},window.getLogsText=()=>Mx(),window.getLogsJSON=()=>Bx(),window.getLogStats=()=>Au(),window.toggleLogCapture=()=>(Kn.enabled?(Kn.disable(),console.log(" Captura de logs DESATIVADA")):(Kn.enable(),console.log(" Captura de logs ATIVADA")),Kn.enabled),console.log("%c FUNES DE EXPORT DE LOGS DISPONVEIS:","color: #4CAF50; font-weight: bold; font-size: 14px"),console.log("%cexportLogs()","color: #2196F3; font-weight: bold","- Exporta logs completos (baixa arquivo .txt)"),console.log("%cgetLogsText()","color: #2196F3; font-weight: bold","- Retorna logs como string de texto"),console.log("%cgetLogsJSON()","color: #2196F3; font-weight: bold","- Retorna logs como objeto JSON"),console.log("%cgetLogStats()","color: #2196F3; font-weight: bold","- Retorna estatsticas dos logs"),console.log("%ctoggleLogCapture()","color: #2196F3; font-weight: bold","- Ativa/desativa captura de logs"),()=>{delete window.exportLogs,delete window.getLogsText,delete window.getLogsJSON,delete window.getLogStats,delete window.toggleLogCapture}),[]),a.jsx(Tx,{children:a.jsx(nb,{roomCode:t,children:a.jsx(rb,{})})})}kl.createRoot(document.getElementById("root")).render(a.jsx(pe.StrictMode,{children:a.jsx(sb,{})}));
//# sourceMappingURL=index-DoeXV7Y6.js.map
