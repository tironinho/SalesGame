(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var _n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function hm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var kf={exports:{}},ma={},Ef={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Js=Symbol.for("react.element"),pm=Symbol.for("react.portal"),mm=Symbol.for("react.fragment"),gm=Symbol.for("react.strict_mode"),ym=Symbol.for("react.profiler"),vm=Symbol.for("react.provider"),xm=Symbol.for("react.context"),bm=Symbol.for("react.forward_ref"),wm=Symbol.for("react.suspense"),Sm=Symbol.for("react.memo"),_m=Symbol.for("react.lazy"),Pc=Symbol.iterator;function km(t){return t===null||typeof t!="object"?null:(t=Pc&&t[Pc]||t["@@iterator"],typeof t=="function"?t:null)}var jf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cf=Object.assign,Rf={};function Ko(t,e,n){this.props=t,this.context=e,this.refs=Rf,this.updater=n||jf}Ko.prototype.isReactComponent={};Ko.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ko.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Nf(){}Nf.prototype=Ko.prototype;function Pu(t,e,n){this.props=t,this.context=e,this.refs=Rf,this.updater=n||jf}var $u=Pu.prototype=new Nf;$u.constructor=Pu;Cf($u,Ko.prototype);$u.isPureReactComponent=!0;var $c=Array.isArray,Df=Object.prototype.hasOwnProperty,Iu={current:null},Af={key:!0,ref:!0,__self:!0,__source:!0};function Tf(t,e,n){var r,o={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)Df.call(e,r)&&!Af.hasOwnProperty(r)&&(o[r]=e[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:Js,type:t,key:s,ref:i,props:o,_owner:Iu.current}}function Em(t,e){return{$$typeof:Js,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Js}function jm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ic=/\/+/g;function za(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jm(""+t.key):e.toString(36)}function Di(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Js:case pm:i=!0}}if(i)return i=t,o=o(i),t=r===""?"."+za(i,0):r,$c(o)?(n="",t!=null&&(n=t.replace(Ic,"$&/")+"/"),Di(o,e,n,"",function(c){return c})):o!=null&&(Mu(o)&&(o=Em(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(Ic,"$&/")+"/")+t)),e.push(o)),1;if(i=0,r=r===""?".":r+":",$c(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+za(s,l);i+=Di(s,e,n,u,o)}else if(u=km(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+za(s,l++),i+=Di(s,e,n,u,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function oi(t,e,n){if(t==null)return t;var r=[],o=0;return Di(t,r,"","",function(s){return e.call(n,s,o++)}),r}function Cm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xt={current:null},Ai={transition:null},Rm={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:Ai,ReactCurrentOwner:Iu};function Of(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:oi,forEach:function(t,e,n){oi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return oi(t,function(){e++}),e},toArray:function(t){return oi(t,function(e){return e})||[]},only:function(t){if(!Mu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Le.Component=Ko;Le.Fragment=mm;Le.Profiler=ym;Le.PureComponent=Pu;Le.StrictMode=gm;Le.Suspense=wm;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rm;Le.act=Of;Le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Cf({},t.props),o=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=Iu.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Df.call(e,u)&&!Af.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Js,type:t.type,key:o,ref:s,props:r,_owner:i}};Le.createContext=function(t){return t={$$typeof:xm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vm,_context:t},t.Consumer=t};Le.createElement=Tf;Le.createFactory=function(t){var e=Tf.bind(null,t);return e.type=t,e};Le.createRef=function(){return{current:null}};Le.forwardRef=function(t){return{$$typeof:bm,render:t}};Le.isValidElement=Mu;Le.lazy=function(t){return{$$typeof:_m,_payload:{_status:-1,_result:t},_init:Cm}};Le.memo=function(t,e){return{$$typeof:Sm,type:t,compare:e===void 0?null:e}};Le.startTransition=function(t){var e=Ai.transition;Ai.transition={};try{t()}finally{Ai.transition=e}};Le.unstable_act=Of;Le.useCallback=function(t,e){return Xt.current.useCallback(t,e)};Le.useContext=function(t){return Xt.current.useContext(t)};Le.useDebugValue=function(){};Le.useDeferredValue=function(t){return Xt.current.useDeferredValue(t)};Le.useEffect=function(t,e){return Xt.current.useEffect(t,e)};Le.useId=function(){return Xt.current.useId()};Le.useImperativeHandle=function(t,e,n){return Xt.current.useImperativeHandle(t,e,n)};Le.useInsertionEffect=function(t,e){return Xt.current.useInsertionEffect(t,e)};Le.useLayoutEffect=function(t,e){return Xt.current.useLayoutEffect(t,e)};Le.useMemo=function(t,e){return Xt.current.useMemo(t,e)};Le.useReducer=function(t,e,n){return Xt.current.useReducer(t,e,n)};Le.useRef=function(t){return Xt.current.useRef(t)};Le.useState=function(t){return Xt.current.useState(t)};Le.useSyncExternalStore=function(t,e,n){return Xt.current.useSyncExternalStore(t,e,n)};Le.useTransition=function(){return Xt.current.useTransition()};Le.version="18.3.1";Ef.exports=Le;var k=Ef.exports;const fe=fm(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm=k,Dm=Symbol.for("react.element"),Am=Symbol.for("react.fragment"),Tm=Object.prototype.hasOwnProperty,Om=Nm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lm={key:!0,ref:!0,__self:!0,__source:!0};function Lf(t,e,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)Tm.call(e,r)&&!Lm.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:Dm,type:t,key:s,ref:i,props:o,_owner:Om.current}}ma.Fragment=Am;ma.jsx=Lf;ma.jsxs=Lf;kf.exports=ma;var a=kf.exports,jl={},Pf={exports:{}},pn={},$f={exports:{}},If={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,ae){var ce=z.length;z.push(ae);e:for(;0<ce;){var Ae=ce-1>>>1,Y=z[Ae];if(0<o(Y,ae))z[Ae]=ae,z[ce]=Y,ce=Ae;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var ae=z[0],ce=z.pop();if(ce!==ae){z[0]=ce;e:for(var Ae=0,Y=z.length,te=Y>>>1;Ae<te;){var At=2*(Ae+1)-1,be=z[At],Tt=At+1,it=z[Tt];if(0>o(be,ce))Tt<Y&&0>o(it,be)?(z[Ae]=it,z[Tt]=ce,Ae=Tt):(z[Ae]=be,z[At]=ce,Ae=At);else if(Tt<Y&&0>o(it,ce))z[Ae]=it,z[Tt]=ce,Ae=Tt;else break e}}return ae}function o(z,ae){var ce=z.sortIndex-ae.sortIndex;return ce!==0?ce:z.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var u=[],c=[],d=1,h=null,f=3,x=!1,y=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(z){for(var ae=n(c);ae!==null;){if(ae.callback===null)r(c);else if(ae.startTime<=z)r(c),ae.sortIndex=ae.expirationTime,e(u,ae);else break;ae=n(c)}}function w(z){if(b=!1,g(z),!y)if(n(u)!==null)y=!0,We(E);else{var ae=n(c);ae!==null&&gt(w,ae.startTime-z)}}function E(z,ae){y=!1,b&&(b=!1,p(S),S=-1),x=!0;var ce=f;try{for(g(ae),h=n(u);h!==null&&(!(h.expirationTime>ae)||z&&!A());){var Ae=h.callback;if(typeof Ae=="function"){h.callback=null,f=h.priorityLevel;var Y=Ae(h.expirationTime<=ae);ae=t.unstable_now(),typeof Y=="function"?h.callback=Y:h===n(u)&&r(u),g(ae)}else r(u);h=n(u)}if(h!==null)var te=!0;else{var At=n(c);At!==null&&gt(w,At.startTime-ae),te=!1}return te}finally{h=null,f=ce,x=!1}}var D=!1,N=null,S=-1,T=5,v=-1;function A(){return!(t.unstable_now()-v<T)}function O(){if(N!==null){var z=t.unstable_now();v=z;var ae=!0;try{ae=N(!0,z)}finally{ae?$():(D=!1,N=null)}}else D=!1}var $;if(typeof m=="function")$=function(){m(O)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,oe=ne.port2;ne.port1.onmessage=O,$=function(){oe.postMessage(null)}}else $=function(){_(O,0)};function We(z){N=z,D||(D=!0,$())}function gt(z,ae){S=_(function(){z(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){y||x||(y=!0,We(E))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var ae=3;break;default:ae=f}var ce=f;f=ae;try{return z()}finally{f=ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,ae){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ce=f;f=z;try{return ae()}finally{f=ce}},t.unstable_scheduleCallback=function(z,ae,ce){var Ae=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Ae+ce:Ae):ce=Ae,z){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ce+Y,z={id:d++,callback:ae,priorityLevel:z,startTime:ce,expirationTime:Y,sortIndex:-1},ce>Ae?(z.sortIndex=ce,e(c,z),n(u)===null&&z===n(c)&&(b?(p(S),S=-1):b=!0,gt(w,ce-Ae))):(z.sortIndex=Y,e(u,z),y||x||(y=!0,We(E))),z},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(z){var ae=f;return function(){var ce=f;f=ae;try{return z.apply(this,arguments)}finally{f=ce}}}})(If);$f.exports=If;var Pm=$f.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m=k,hn=Pm;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Mf=new Set,Ds={};function co(t,e){Uo(t,e),Uo(t+"Capture",e)}function Uo(t,e){for(Ds[t]=e,t=0;t<e.length;t++)Mf.add(e[t])}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cl=Object.prototype.hasOwnProperty,Im=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mc={},Bc={};function Mm(t){return Cl.call(Bc,t)?!0:Cl.call(Mc,t)?!1:Im.test(t)?Bc[t]=!0:(Mc[t]=!0,!1)}function Bm(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Um(t,e,n,r){if(e===null||typeof e>"u"||Bm(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zt(t,e,n,r,o,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pt[t]=new Zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pt[e]=new Zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pt[t]=new Zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pt[t]=new Zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pt[t]=new Zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pt[t]=new Zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pt[t]=new Zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pt[t]=new Zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pt[t]=new Zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bu=/[\-:]([a-z])/g;function Uu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bu,Uu);Pt[e]=new Zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bu,Uu);Pt[e]=new Zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bu,Uu);Pt[e]=new Zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!1,!1)});Pt.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function zu(t,e,n,r){var o=Pt.hasOwnProperty(e)?Pt[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Um(e,n,o,r)&&(n=null),r||o===null?Mm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mr=$m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,si=Symbol.for("react.element"),So=Symbol.for("react.portal"),_o=Symbol.for("react.fragment"),Fu=Symbol.for("react.strict_mode"),Rl=Symbol.for("react.profiler"),Bf=Symbol.for("react.provider"),Uf=Symbol.for("react.context"),Wu=Symbol.for("react.forward_ref"),Nl=Symbol.for("react.suspense"),Dl=Symbol.for("react.suspense_list"),Vu=Symbol.for("react.memo"),_r=Symbol.for("react.lazy"),zf=Symbol.for("react.offscreen"),Uc=Symbol.iterator;function ts(t){return t===null||typeof t!="object"?null:(t=Uc&&t[Uc]||t["@@iterator"],typeof t=="function"?t:null)}var ct=Object.assign,Fa;function ds(t){if(Fa===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fa=e&&e[1]||""}return`
`+Fa+t}var Wa=!1;function Va(t,e){if(!t||Wa)return"";Wa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,l=s.length-1;1<=i&&0<=l&&o[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==s[l]){var u=`
`+o[i].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=i&&0<=l);break}}}finally{Wa=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ds(t):""}function zm(t){switch(t.tag){case 5:return ds(t.type);case 16:return ds("Lazy");case 13:return ds("Suspense");case 19:return ds("SuspenseList");case 0:case 2:case 15:return t=Va(t.type,!1),t;case 11:return t=Va(t.type.render,!1),t;case 1:return t=Va(t.type,!0),t;default:return""}}function Al(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _o:return"Fragment";case So:return"Portal";case Rl:return"Profiler";case Fu:return"StrictMode";case Nl:return"Suspense";case Dl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Uf:return(t.displayName||"Context")+".Consumer";case Bf:return(t._context.displayName||"Context")+".Provider";case Wu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vu:return e=t.displayName||null,e!==null?e:Al(t.type)||"Memo";case _r:e=t._payload,t=t._init;try{return Al(t(e))}catch{}}return null}function Fm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Al(e);case 8:return e===Fu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ff(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Wm(t){var e=Ff(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ii(t){t._valueTracker||(t._valueTracker=Wm(t))}function Wf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ff(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Tl(t,e){var n=e.checked;return ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Mr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vf(t,e){e=e.checked,e!=null&&zu(t,"checked",e,!1)}function Ol(t,e){Vf(t,e);var n=Mr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ll(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ll(t,e.type,Mr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ll(t,e,n){(e!=="number"||Fi(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fs=Array.isArray;function Lo(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Mr(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Pl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(fs(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Mr(n)}}function Gf(t,e){var n=Mr(e.value),r=Mr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Vc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $l(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ai,Hf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ai=ai||document.createElement("div"),ai.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ai.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function As(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vm=["Webkit","ms","Moz","O"];Object.keys(gs).forEach(function(t){Vm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gs[e]=gs[t]})});function Kf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gs.hasOwnProperty(t)&&gs[t]?(""+e).trim():e+"px"}function Jf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Kf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var Gm=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Il(t,e){if(e){if(Gm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Ml(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bl=null;function Gu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ul=null,Po=null,$o=null;function Gc(t){if(t=Xs(t)){if(typeof Ul!="function")throw Error(U(280));var e=t.stateNode;e&&(e=ba(e),Ul(t.stateNode,t.type,e))}}function Yf(t){Po?$o?$o.push(t):$o=[t]:Po=t}function Qf(){if(Po){var t=Po,e=$o;if($o=Po=null,Gc(t),e)for(t=0;t<e.length;t++)Gc(e[t])}}function Xf(t,e){return t(e)}function Zf(){}var Ga=!1;function eh(t,e,n){if(Ga)return t(e,n);Ga=!0;try{return Xf(t,e,n)}finally{Ga=!1,(Po!==null||$o!==null)&&(Zf(),Qf())}}function Ts(t,e){var n=t.stateNode;if(n===null)return null;var r=ba(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var zl=!1;if(cr)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){zl=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch{zl=!1}function qm(t,e,n,r,o,s,i,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ys=!1,Wi=null,Vi=!1,Fl=null,Hm={onError:function(t){ys=!0,Wi=t}};function Km(t,e,n,r,o,s,i,l,u){ys=!1,Wi=null,qm.apply(Hm,arguments)}function Jm(t,e,n,r,o,s,i,l,u){if(Km.apply(this,arguments),ys){if(ys){var c=Wi;ys=!1,Wi=null}else throw Error(U(198));Vi||(Vi=!0,Fl=c)}}function fo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function th(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qc(t){if(fo(t)!==t)throw Error(U(188))}function Ym(t){var e=t.alternate;if(!e){if(e=fo(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return qc(o),t;if(s===r)return qc(o),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function nh(t){return t=Ym(t),t!==null?rh(t):null}function rh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rh(t);if(e!==null)return e;t=t.sibling}return null}var oh=hn.unstable_scheduleCallback,Hc=hn.unstable_cancelCallback,Qm=hn.unstable_shouldYield,Xm=hn.unstable_requestPaint,mt=hn.unstable_now,Zm=hn.unstable_getCurrentPriorityLevel,qu=hn.unstable_ImmediatePriority,sh=hn.unstable_UserBlockingPriority,Gi=hn.unstable_NormalPriority,eg=hn.unstable_LowPriority,ih=hn.unstable_IdlePriority,ga=null,Yn=null;function tg(t){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(ga,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:og,ng=Math.log,rg=Math.LN2;function og(t){return t>>>=0,t===0?32:31-(ng(t)/rg|0)|0}var li=64,ui=4194304;function hs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qi(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var l=i&~o;l!==0?r=hs(l):(s&=i,s!==0&&(r=hs(s)))}else i=n&~o,i!==0?r=hs(i):s!==0&&(r=hs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mn(e),o=1<<n,r|=t[n],e&=~o;return r}function sg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ig(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Mn(s),l=1<<i,u=o[i];u===-1?(!(l&n)||l&r)&&(o[i]=sg(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Wl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ah(){var t=li;return li<<=1,!(li&4194240)&&(li=64),t}function qa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ys(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=n}function ag(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Mn(n),s=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~s}}function Hu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mn(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var Ye=0;function lh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uh,Ku,ch,dh,fh,Vl=!1,ci=[],Dr=null,Ar=null,Tr=null,Os=new Map,Ls=new Map,Er=[],lg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kc(t,e){switch(t){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Os.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ls.delete(e.pointerId)}}function rs(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},e!==null&&(e=Xs(e),e!==null&&Ku(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function ug(t,e,n,r,o){switch(e){case"focusin":return Dr=rs(Dr,t,e,n,r,o),!0;case"dragenter":return Ar=rs(Ar,t,e,n,r,o),!0;case"mouseover":return Tr=rs(Tr,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return Os.set(s,rs(Os.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Ls.set(s,rs(Ls.get(s)||null,t,e,n,r,o)),!0}return!1}function hh(t){var e=Xr(t.target);if(e!==null){var n=fo(e);if(n!==null){if(e=n.tag,e===13){if(e=th(n),e!==null){t.blockedOn=e,fh(t.priority,function(){ch(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ti(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bl=r,n.target.dispatchEvent(r),Bl=null}else return e=Xs(n),e!==null&&Ku(e),t.blockedOn=n,!1;e.shift()}return!0}function Jc(t,e,n){Ti(t)&&n.delete(e)}function cg(){Vl=!1,Dr!==null&&Ti(Dr)&&(Dr=null),Ar!==null&&Ti(Ar)&&(Ar=null),Tr!==null&&Ti(Tr)&&(Tr=null),Os.forEach(Jc),Ls.forEach(Jc)}function os(t,e){t.blockedOn===e&&(t.blockedOn=null,Vl||(Vl=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,cg)))}function Ps(t){function e(o){return os(o,t)}if(0<ci.length){os(ci[0],t);for(var n=1;n<ci.length;n++){var r=ci[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dr!==null&&os(Dr,t),Ar!==null&&os(Ar,t),Tr!==null&&os(Tr,t),Os.forEach(e),Ls.forEach(e),n=0;n<Er.length;n++)r=Er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Er.length&&(n=Er[0],n.blockedOn===null);)hh(n),n.blockedOn===null&&Er.shift()}var Io=mr.ReactCurrentBatchConfig,Hi=!0;function dg(t,e,n,r){var o=Ye,s=Io.transition;Io.transition=null;try{Ye=1,Ju(t,e,n,r)}finally{Ye=o,Io.transition=s}}function fg(t,e,n,r){var o=Ye,s=Io.transition;Io.transition=null;try{Ye=4,Ju(t,e,n,r)}finally{Ye=o,Io.transition=s}}function Ju(t,e,n,r){if(Hi){var o=Gl(t,e,n,r);if(o===null)nl(t,e,r,Ki,n),Kc(t,r);else if(ug(o,t,e,n,r))r.stopPropagation();else if(Kc(t,r),e&4&&-1<lg.indexOf(t)){for(;o!==null;){var s=Xs(o);if(s!==null&&uh(s),s=Gl(t,e,n,r),s===null&&nl(t,e,r,Ki,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else nl(t,e,r,null,n)}}var Ki=null;function Gl(t,e,n,r){if(Ki=null,t=Gu(r),t=Xr(t),t!==null)if(e=fo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=th(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ki=t,null}function ph(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zm()){case qu:return 1;case sh:return 4;case Gi:case eg:return 16;case ih:return 536870912;default:return 16}default:return 16}}var Rr=null,Yu=null,Oi=null;function mh(){if(Oi)return Oi;var t,e=Yu,n=e.length,r,o="value"in Rr?Rr.value:Rr.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return Oi=o.slice(t,1<r?1-r:void 0)}function Li(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function di(){return!0}function Yc(){return!1}function mn(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?di:Yc,this.isPropagationStopped=Yc,this}return ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),e}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qu=mn(Jo),Qs=ct({},Jo,{view:0,detail:0}),hg=mn(Qs),Ha,Ka,ss,ya=ct({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ss&&(ss&&t.type==="mousemove"?(Ha=t.screenX-ss.screenX,Ka=t.screenY-ss.screenY):Ka=Ha=0,ss=t),Ha)},movementY:function(t){return"movementY"in t?t.movementY:Ka}}),Qc=mn(ya),pg=ct({},ya,{dataTransfer:0}),mg=mn(pg),gg=ct({},Qs,{relatedTarget:0}),Ja=mn(gg),yg=ct({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),vg=mn(yg),xg=ct({},Jo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bg=mn(xg),wg=ct({},Jo,{data:0}),Xc=mn(wg),Sg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_g={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kg[t])?!!e[t]:!1}function Xu(){return Eg}var jg=ct({},Qs,{key:function(t){if(t.key){var e=Sg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Li(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_g[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xu,charCode:function(t){return t.type==="keypress"?Li(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Li(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Cg=mn(jg),Rg=ct({},ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zc=mn(Rg),Ng=ct({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xu}),Dg=mn(Ng),Ag=ct({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tg=mn(Ag),Og=ct({},ya,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Lg=mn(Og),Pg=[9,13,27,32],Zu=cr&&"CompositionEvent"in window,vs=null;cr&&"documentMode"in document&&(vs=document.documentMode);var $g=cr&&"TextEvent"in window&&!vs,gh=cr&&(!Zu||vs&&8<vs&&11>=vs),ed=" ",td=!1;function yh(t,e){switch(t){case"keyup":return Pg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ko=!1;function Ig(t,e){switch(t){case"compositionend":return vh(e);case"keypress":return e.which!==32?null:(td=!0,ed);case"textInput":return t=e.data,t===ed&&td?null:t;default:return null}}function Mg(t,e){if(ko)return t==="compositionend"||!Zu&&yh(t,e)?(t=mh(),Oi=Yu=Rr=null,ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gh&&e.locale!=="ko"?null:e.data;default:return null}}var Bg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Bg[t.type]:e==="textarea"}function xh(t,e,n,r){Yf(r),e=Ji(e,"onChange"),0<e.length&&(n=new Qu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xs=null,$s=null;function Ug(t){Dh(t,0)}function va(t){var e=Co(t);if(Wf(e))return t}function zg(t,e){if(t==="change")return e}var bh=!1;if(cr){var Ya;if(cr){var Qa="oninput"in document;if(!Qa){var rd=document.createElement("div");rd.setAttribute("oninput","return;"),Qa=typeof rd.oninput=="function"}Ya=Qa}else Ya=!1;bh=Ya&&(!document.documentMode||9<document.documentMode)}function od(){xs&&(xs.detachEvent("onpropertychange",wh),$s=xs=null)}function wh(t){if(t.propertyName==="value"&&va($s)){var e=[];xh(e,$s,t,Gu(t)),eh(Ug,e)}}function Fg(t,e,n){t==="focusin"?(od(),xs=e,$s=n,xs.attachEvent("onpropertychange",wh)):t==="focusout"&&od()}function Wg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return va($s)}function Vg(t,e){if(t==="click")return va(e)}function Gg(t,e){if(t==="input"||t==="change")return va(e)}function qg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Un=typeof Object.is=="function"?Object.is:qg;function Is(t,e){if(Un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Cl.call(e,o)||!Un(t[o],e[o]))return!1}return!0}function sd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function id(t,e){var n=sd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sd(n)}}function Sh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Sh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _h(){for(var t=window,e=Fi();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fi(t.document)}return e}function ec(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Hg(t){var e=_h(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Sh(n.ownerDocument.documentElement,n)){if(r!==null&&ec(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!t.extend&&s>r&&(o=r,r=s,s=o),o=id(n,s);var i=id(n,r);o&&i&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Kg=cr&&"documentMode"in document&&11>=document.documentMode,Eo=null,ql=null,bs=null,Hl=!1;function ad(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hl||Eo==null||Eo!==Fi(r)||(r=Eo,"selectionStart"in r&&ec(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bs&&Is(bs,r)||(bs=r,r=Ji(ql,"onSelect"),0<r.length&&(e=new Qu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Eo)))}function fi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var jo={animationend:fi("Animation","AnimationEnd"),animationiteration:fi("Animation","AnimationIteration"),animationstart:fi("Animation","AnimationStart"),transitionend:fi("Transition","TransitionEnd")},Xa={},kh={};cr&&(kh=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function xa(t){if(Xa[t])return Xa[t];if(!jo[t])return t;var e=jo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kh)return Xa[t]=e[n];return t}var Eh=xa("animationend"),jh=xa("animationiteration"),Ch=xa("animationstart"),Rh=xa("transitionend"),Nh=new Map,ld="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(t,e){Nh.set(t,e),co(e,[t])}for(var Za=0;Za<ld.length;Za++){var el=ld[Za],Jg=el.toLowerCase(),Yg=el[0].toUpperCase()+el.slice(1);Ur(Jg,"on"+Yg)}Ur(Eh,"onAnimationEnd");Ur(jh,"onAnimationIteration");Ur(Ch,"onAnimationStart");Ur("dblclick","onDoubleClick");Ur("focusin","onFocus");Ur("focusout","onBlur");Ur(Rh,"onTransitionEnd");Uo("onMouseEnter",["mouseout","mouseover"]);Uo("onMouseLeave",["mouseout","mouseover"]);Uo("onPointerEnter",["pointerout","pointerover"]);Uo("onPointerLeave",["pointerout","pointerover"]);co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));co("onBeforeInput",["compositionend","keypress","textInput","paste"]);co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ps="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qg=new Set("cancel close invalid load scroll toggle".split(" ").concat(ps));function ud(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Jm(r,e,void 0,t),t.currentTarget=null}function Dh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var l=r[i],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&o.isPropagationStopped())break e;ud(o,l,c),s=u}else for(i=0;i<r.length;i++){if(l=r[i],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&o.isPropagationStopped())break e;ud(o,l,c),s=u}}}if(Vi)throw t=Fl,Vi=!1,Fl=null,t}function nt(t,e){var n=e[Xl];n===void 0&&(n=e[Xl]=new Set);var r=t+"__bubble";n.has(r)||(Ah(e,t,2,!1),n.add(r))}function tl(t,e,n){var r=0;e&&(r|=4),Ah(n,t,r,e)}var hi="_reactListening"+Math.random().toString(36).slice(2);function Ms(t){if(!t[hi]){t[hi]=!0,Mf.forEach(function(n){n!=="selectionchange"&&(Qg.has(n)||tl(n,!1,t),tl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hi]||(e[hi]=!0,tl("selectionchange",!1,e))}}function Ah(t,e,n,r){switch(ph(e)){case 1:var o=dg;break;case 4:o=fg;break;default:o=Ju}n=o.bind(null,e,n,t),o=void 0,!zl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function nl(t,e,n,r,o){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;i=i.return}for(;l!==null;){if(i=Xr(l),i===null)return;if(u=i.tag,u===5||u===6){r=s=i;continue e}l=l.parentNode}}r=r.return}eh(function(){var c=s,d=Gu(n),h=[];e:{var f=Nh.get(t);if(f!==void 0){var x=Qu,y=t;switch(t){case"keypress":if(Li(n)===0)break e;case"keydown":case"keyup":x=Cg;break;case"focusin":y="focus",x=Ja;break;case"focusout":y="blur",x=Ja;break;case"beforeblur":case"afterblur":x=Ja;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Qc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=mg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Dg;break;case Eh:case jh:case Ch:x=vg;break;case Rh:x=Tg;break;case"scroll":x=hg;break;case"wheel":x=Lg;break;case"copy":case"cut":case"paste":x=bg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Zc}var b=(e&4)!==0,_=!b&&t==="scroll",p=b?f!==null?f+"Capture":null:f;b=[];for(var m=c,g;m!==null;){g=m;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,p!==null&&(w=Ts(m,p),w!=null&&b.push(Bs(m,w,g)))),_)break;m=m.return}0<b.length&&(f=new x(f,y,null,n,d),h.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",f&&n!==Bl&&(y=n.relatedTarget||n.fromElement)&&(Xr(y)||y[dr]))break e;if((x||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,x?(y=n.relatedTarget||n.toElement,x=c,y=y?Xr(y):null,y!==null&&(_=fo(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=c),x!==y)){if(b=Qc,w="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(b=Zc,w="onPointerLeave",p="onPointerEnter",m="pointer"),_=x==null?f:Co(x),g=y==null?f:Co(y),f=new b(w,m+"leave",x,n,d),f.target=_,f.relatedTarget=g,w=null,Xr(d)===c&&(b=new b(p,m+"enter",y,n,d),b.target=g,b.relatedTarget=_,w=b),_=w,x&&y)t:{for(b=x,p=y,m=0,g=b;g;g=po(g))m++;for(g=0,w=p;w;w=po(w))g++;for(;0<m-g;)b=po(b),m--;for(;0<g-m;)p=po(p),g--;for(;m--;){if(b===p||p!==null&&b===p.alternate)break t;b=po(b),p=po(p)}b=null}else b=null;x!==null&&cd(h,f,x,b,!1),y!==null&&_!==null&&cd(h,_,y,b,!0)}}e:{if(f=c?Co(c):window,x=f.nodeName&&f.nodeName.toLowerCase(),x==="select"||x==="input"&&f.type==="file")var E=zg;else if(nd(f))if(bh)E=Gg;else{E=Wg;var D=Fg}else(x=f.nodeName)&&x.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=Vg);if(E&&(E=E(t,c))){xh(h,E,n,d);break e}D&&D(t,f,c),t==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&Ll(f,"number",f.value)}switch(D=c?Co(c):window,t){case"focusin":(nd(D)||D.contentEditable==="true")&&(Eo=D,ql=c,bs=null);break;case"focusout":bs=ql=Eo=null;break;case"mousedown":Hl=!0;break;case"contextmenu":case"mouseup":case"dragend":Hl=!1,ad(h,n,d);break;case"selectionchange":if(Kg)break;case"keydown":case"keyup":ad(h,n,d)}var N;if(Zu)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else ko?yh(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(gh&&n.locale!=="ko"&&(ko||S!=="onCompositionStart"?S==="onCompositionEnd"&&ko&&(N=mh()):(Rr=d,Yu="value"in Rr?Rr.value:Rr.textContent,ko=!0)),D=Ji(c,S),0<D.length&&(S=new Xc(S,t,null,n,d),h.push({event:S,listeners:D}),N?S.data=N:(N=vh(n),N!==null&&(S.data=N)))),(N=$g?Ig(t,n):Mg(t,n))&&(c=Ji(c,"onBeforeInput"),0<c.length&&(d=new Xc("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=N))}Dh(h,e)})}function Bs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ji(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Ts(t,n),s!=null&&r.unshift(Bs(t,s,o)),s=Ts(t,e),s!=null&&r.push(Bs(t,s,o))),t=t.return}return r}function po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cd(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,o?(u=Ts(n,s),u!=null&&i.unshift(Bs(n,u,l))):o||(u=Ts(n,s),u!=null&&i.push(Bs(n,u,l)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var Xg=/\r\n?/g,Zg=/\u0000|\uFFFD/g;function dd(t){return(typeof t=="string"?t:""+t).replace(Xg,`
`).replace(Zg,"")}function pi(t,e,n){if(e=dd(e),dd(t)!==e&&n)throw Error(U(425))}function Yi(){}var Kl=null,Jl=null;function Yl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ql=typeof setTimeout=="function"?setTimeout:void 0,e0=typeof clearTimeout=="function"?clearTimeout:void 0,fd=typeof Promise=="function"?Promise:void 0,t0=typeof queueMicrotask=="function"?queueMicrotask:typeof fd<"u"?function(t){return fd.resolve(null).then(t).catch(n0)}:Ql;function n0(t){setTimeout(function(){throw t})}function rl(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),Ps(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Ps(e)}function Or(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yo=Math.random().toString(36).slice(2),Kn="__reactFiber$"+Yo,Us="__reactProps$"+Yo,dr="__reactContainer$"+Yo,Xl="__reactEvents$"+Yo,r0="__reactListeners$"+Yo,o0="__reactHandles$"+Yo;function Xr(t){var e=t[Kn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dr]||n[Kn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hd(t);t!==null;){if(n=t[Kn])return n;t=hd(t)}return e}t=n,n=t.parentNode}return null}function Xs(t){return t=t[Kn]||t[dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Co(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function ba(t){return t[Us]||null}var Zl=[],Ro=-1;function zr(t){return{current:t}}function rt(t){0>Ro||(t.current=Zl[Ro],Zl[Ro]=null,Ro--)}function et(t,e){Ro++,Zl[Ro]=t.current,t.current=e}var Br={},Ft=zr(Br),an=zr(!1),ro=Br;function zo(t,e){var n=t.type.contextTypes;if(!n)return Br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function ln(t){return t=t.childContextTypes,t!=null}function Qi(){rt(an),rt(Ft)}function pd(t,e,n){if(Ft.current!==Br)throw Error(U(168));et(Ft,e),et(an,n)}function Th(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(U(108,Fm(t)||"Unknown",o));return ct({},n,r)}function Xi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Br,ro=Ft.current,et(Ft,t),et(an,an.current),!0}function md(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Th(t,e,ro),r.__reactInternalMemoizedMergedChildContext=t,rt(an),rt(Ft),et(Ft,t)):rt(an),et(an,n)}var sr=null,wa=!1,ol=!1;function Oh(t){sr===null?sr=[t]:sr.push(t)}function s0(t){wa=!0,Oh(t)}function Fr(){if(!ol&&sr!==null){ol=!0;var t=0,e=Ye;try{var n=sr;for(Ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}sr=null,wa=!1}catch(o){throw sr!==null&&(sr=sr.slice(t+1)),oh(qu,Fr),o}finally{Ye=e,ol=!1}}return null}var No=[],Do=0,Zi=null,ea=0,xn=[],bn=0,oo=null,ir=1,ar="";function Kr(t,e){No[Do++]=ea,No[Do++]=Zi,Zi=t,ea=e}function Lh(t,e,n){xn[bn++]=ir,xn[bn++]=ar,xn[bn++]=oo,oo=t;var r=ir;t=ar;var o=32-Mn(r)-1;r&=~(1<<o),n+=1;var s=32-Mn(e)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,ir=1<<32-Mn(e)+o|n<<o|r,ar=s+t}else ir=1<<s|n<<o|r,ar=t}function tc(t){t.return!==null&&(Kr(t,1),Lh(t,1,0))}function nc(t){for(;t===Zi;)Zi=No[--Do],No[Do]=null,ea=No[--Do],No[Do]=null;for(;t===oo;)oo=xn[--bn],xn[bn]=null,ar=xn[--bn],xn[bn]=null,ir=xn[--bn],xn[bn]=null}var fn=null,dn=null,st=!1,$n=null;function Ph(t,e){var n=wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fn=t,dn=Or(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fn=t,dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=oo!==null?{id:ir,overflow:ar}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fn=t,dn=null,!0):!1;default:return!1}}function eu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tu(t){if(st){var e=dn;if(e){var n=e;if(!gd(t,e)){if(eu(t))throw Error(U(418));e=Or(n.nextSibling);var r=fn;e&&gd(t,e)?Ph(r,n):(t.flags=t.flags&-4097|2,st=!1,fn=t)}}else{if(eu(t))throw Error(U(418));t.flags=t.flags&-4097|2,st=!1,fn=t}}}function yd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fn=t}function mi(t){if(t!==fn)return!1;if(!st)return yd(t),st=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yl(t.type,t.memoizedProps)),e&&(e=dn)){if(eu(t))throw $h(),Error(U(418));for(;e;)Ph(t,e),e=Or(e.nextSibling)}if(yd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dn=Or(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dn=null}}else dn=fn?Or(t.stateNode.nextSibling):null;return!0}function $h(){for(var t=dn;t;)t=Or(t.nextSibling)}function Fo(){dn=fn=null,st=!1}function rc(t){$n===null?$n=[t]:$n.push(t)}var i0=mr.ReactCurrentBatchConfig;function is(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var o=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var l=o.refs;i===null?delete l[s]:l[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function gi(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vd(t){var e=t._init;return e(t._payload)}function Ih(t){function e(p,m){if(t){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function o(p,m){return p=Ir(p,m),p.index=0,p.sibling=null,p}function s(p,m,g){return p.index=g,t?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function i(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,m,g,w){return m===null||m.tag!==6?(m=dl(g,p.mode,w),m.return=p,m):(m=o(m,g),m.return=p,m)}function u(p,m,g,w){var E=g.type;return E===_o?d(p,m,g.props.children,w,g.key):m!==null&&(m.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===_r&&vd(E)===m.type)?(w=o(m,g.props),w.ref=is(p,m,g),w.return=p,w):(w=zi(g.type,g.key,g.props,null,p.mode,w),w.ref=is(p,m,g),w.return=p,w)}function c(p,m,g,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=fl(g,p.mode,w),m.return=p,m):(m=o(m,g.children||[]),m.return=p,m)}function d(p,m,g,w,E){return m===null||m.tag!==7?(m=no(g,p.mode,w,E),m.return=p,m):(m=o(m,g),m.return=p,m)}function h(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=dl(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case si:return g=zi(m.type,m.key,m.props,null,p.mode,g),g.ref=is(p,null,m),g.return=p,g;case So:return m=fl(m,p.mode,g),m.return=p,m;case _r:var w=m._init;return h(p,w(m._payload),g)}if(fs(m)||ts(m))return m=no(m,p.mode,g,null),m.return=p,m;gi(p,m)}return null}function f(p,m,g,w){var E=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return E!==null?null:l(p,m,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case si:return g.key===E?u(p,m,g,w):null;case So:return g.key===E?c(p,m,g,w):null;case _r:return E=g._init,f(p,m,E(g._payload),w)}if(fs(g)||ts(g))return E!==null?null:d(p,m,g,w,null);gi(p,g)}return null}function x(p,m,g,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(g)||null,l(m,p,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case si:return p=p.get(w.key===null?g:w.key)||null,u(m,p,w,E);case So:return p=p.get(w.key===null?g:w.key)||null,c(m,p,w,E);case _r:var D=w._init;return x(p,m,g,D(w._payload),E)}if(fs(w)||ts(w))return p=p.get(g)||null,d(m,p,w,E,null);gi(m,w)}return null}function y(p,m,g,w){for(var E=null,D=null,N=m,S=m=0,T=null;N!==null&&S<g.length;S++){N.index>S?(T=N,N=null):T=N.sibling;var v=f(p,N,g[S],w);if(v===null){N===null&&(N=T);break}t&&N&&v.alternate===null&&e(p,N),m=s(v,m,S),D===null?E=v:D.sibling=v,D=v,N=T}if(S===g.length)return n(p,N),st&&Kr(p,S),E;if(N===null){for(;S<g.length;S++)N=h(p,g[S],w),N!==null&&(m=s(N,m,S),D===null?E=N:D.sibling=N,D=N);return st&&Kr(p,S),E}for(N=r(p,N);S<g.length;S++)T=x(N,p,S,g[S],w),T!==null&&(t&&T.alternate!==null&&N.delete(T.key===null?S:T.key),m=s(T,m,S),D===null?E=T:D.sibling=T,D=T);return t&&N.forEach(function(A){return e(p,A)}),st&&Kr(p,S),E}function b(p,m,g,w){var E=ts(g);if(typeof E!="function")throw Error(U(150));if(g=E.call(g),g==null)throw Error(U(151));for(var D=E=null,N=m,S=m=0,T=null,v=g.next();N!==null&&!v.done;S++,v=g.next()){N.index>S?(T=N,N=null):T=N.sibling;var A=f(p,N,v.value,w);if(A===null){N===null&&(N=T);break}t&&N&&A.alternate===null&&e(p,N),m=s(A,m,S),D===null?E=A:D.sibling=A,D=A,N=T}if(v.done)return n(p,N),st&&Kr(p,S),E;if(N===null){for(;!v.done;S++,v=g.next())v=h(p,v.value,w),v!==null&&(m=s(v,m,S),D===null?E=v:D.sibling=v,D=v);return st&&Kr(p,S),E}for(N=r(p,N);!v.done;S++,v=g.next())v=x(N,p,S,v.value,w),v!==null&&(t&&v.alternate!==null&&N.delete(v.key===null?S:v.key),m=s(v,m,S),D===null?E=v:D.sibling=v,D=v);return t&&N.forEach(function(O){return e(p,O)}),st&&Kr(p,S),E}function _(p,m,g,w){if(typeof g=="object"&&g!==null&&g.type===_o&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case si:e:{for(var E=g.key,D=m;D!==null;){if(D.key===E){if(E=g.type,E===_o){if(D.tag===7){n(p,D.sibling),m=o(D,g.props.children),m.return=p,p=m;break e}}else if(D.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===_r&&vd(E)===D.type){n(p,D.sibling),m=o(D,g.props),m.ref=is(p,D,g),m.return=p,p=m;break e}n(p,D);break}else e(p,D);D=D.sibling}g.type===_o?(m=no(g.props.children,p.mode,w,g.key),m.return=p,p=m):(w=zi(g.type,g.key,g.props,null,p.mode,w),w.ref=is(p,m,g),w.return=p,p=w)}return i(p);case So:e:{for(D=g.key;m!==null;){if(m.key===D)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(p,m.sibling),m=o(m,g.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=fl(g,p.mode,w),m.return=p,p=m}return i(p);case _r:return D=g._init,_(p,m,D(g._payload),w)}if(fs(g))return y(p,m,g,w);if(ts(g))return b(p,m,g,w);gi(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(p,m.sibling),m=o(m,g),m.return=p,p=m):(n(p,m),m=dl(g,p.mode,w),m.return=p,p=m),i(p)):n(p,m)}return _}var Wo=Ih(!0),Mh=Ih(!1),ta=zr(null),na=null,Ao=null,oc=null;function sc(){oc=Ao=na=null}function ic(t){var e=ta.current;rt(ta),t._currentValue=e}function nu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Mo(t,e){na=t,oc=Ao=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function kn(t){var e=t._currentValue;if(oc!==t)if(t={context:t,memoizedValue:e,next:null},Ao===null){if(na===null)throw Error(U(308));Ao=t,na.dependencies={lanes:0,firstContext:t}}else Ao=Ao.next=t;return e}var Zr=null;function ac(t){Zr===null?Zr=[t]:Zr.push(t)}function Bh(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,ac(e)):(n.next=o.next,o.next=n),e.interleaved=n,fr(t,r)}function fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kr=!1;function lc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ur(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Be&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,fr(t,n)}return o=r.interleaved,o===null?(e.next=e,ac(r)):(e.next=o.next,o.next=e),r.interleaved=e,fr(t,n)}function Pi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hu(t,n)}}function xd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ra(t,e,n,r){var o=t.updateQueue;kr=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var u=l,c=u.next;u.next=null,i===null?s=c:i.next=c,i=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(s!==null){var h=o.baseState;i=0,d=c=u=null,l=s;do{var f=l.lane,x=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,b=l;switch(f=e,x=n,b.tag){case 1:if(y=b.payload,typeof y=="function"){h=y.call(x,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,f=typeof y=="function"?y.call(x,h,f):y,f==null)break e;h=ct({},h,f);break e;case 2:kr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=o.effects,f===null?o.effects=[l]:f.push(l))}else x={eventTime:x,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=x,u=h):d=d.next=x,i|=f;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;f=l,l=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(d===null&&(u=h),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=d,e=o.shared.interleaved,e!==null){o=e;do i|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);io|=i,t.lanes=i,t.memoizedState=h}}function bd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(U(191,o));o.call(r)}}}var Zs={},Qn=zr(Zs),zs=zr(Zs),Fs=zr(Zs);function eo(t){if(t===Zs)throw Error(U(174));return t}function uc(t,e){switch(et(Fs,e),et(zs,t),et(Qn,Zs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$l(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$l(e,t)}rt(Qn),et(Qn,e)}function Vo(){rt(Qn),rt(zs),rt(Fs)}function zh(t){eo(Fs.current);var e=eo(Qn.current),n=$l(e,t.type);e!==n&&(et(zs,t),et(Qn,n))}function cc(t){zs.current===t&&(rt(Qn),rt(zs))}var lt=zr(0);function oa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sl=[];function dc(){for(var t=0;t<sl.length;t++)sl[t]._workInProgressVersionPrimary=null;sl.length=0}var $i=mr.ReactCurrentDispatcher,il=mr.ReactCurrentBatchConfig,so=0,ut=null,St=null,Nt=null,sa=!1,ws=!1,Ws=0,a0=0;function Bt(){throw Error(U(321))}function fc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Un(t[n],e[n]))return!1;return!0}function hc(t,e,n,r,o,s){if(so=s,ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$i.current=t===null||t.memoizedState===null?d0:f0,t=n(r,o),ws){s=0;do{if(ws=!1,Ws=0,25<=s)throw Error(U(301));s+=1,Nt=St=null,e.updateQueue=null,$i.current=h0,t=n(r,o)}while(ws)}if($i.current=ia,e=St!==null&&St.next!==null,so=0,Nt=St=ut=null,sa=!1,e)throw Error(U(300));return t}function pc(){var t=Ws!==0;return Ws=0,t}function qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?ut.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function En(){if(St===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var e=Nt===null?ut.memoizedState:Nt.next;if(e!==null)Nt=e,St=t;else{if(t===null)throw Error(U(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Nt===null?ut.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function Vs(t,e){return typeof e=="function"?e(t):e}function al(t){var e=En(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=St,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var l=i=null,u=null,c=s;do{var d=c.lane;if((so&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,i=r):u=u.next=h,ut.lanes|=d,io|=d}c=c.next}while(c!==null&&c!==s);u===null?i=r:u.next=l,Un(r,e.memoizedState)||(sn=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do s=o.lane,ut.lanes|=s,io|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ll(t){var e=En(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);Un(s,e.memoizedState)||(sn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Fh(){}function Wh(t,e){var n=ut,r=En(),o=e(),s=!Un(r.memoizedState,o);if(s&&(r.memoizedState=o,sn=!0),r=r.queue,mc(qh.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Nt!==null&&Nt.memoizedState.tag&1){if(n.flags|=2048,Gs(9,Gh.bind(null,n,r,o,e),void 0,null),Dt===null)throw Error(U(349));so&30||Vh(n,e,o)}return o}function Vh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Gh(t,e,n,r){e.value=n,e.getSnapshot=r,Hh(e)&&Kh(t)}function qh(t,e,n){return n(function(){Hh(e)&&Kh(t)})}function Hh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Un(t,n)}catch{return!0}}function Kh(t){var e=fr(t,1);e!==null&&Bn(e,t,1,-1)}function wd(t){var e=qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:t},e.queue=t,t=t.dispatch=c0.bind(null,ut,t),[e.memoizedState,t]}function Gs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Jh(){return En().memoizedState}function Ii(t,e,n,r){var o=qn();ut.flags|=t,o.memoizedState=Gs(1|e,n,void 0,r===void 0?null:r)}function Sa(t,e,n,r){var o=En();r=r===void 0?null:r;var s=void 0;if(St!==null){var i=St.memoizedState;if(s=i.destroy,r!==null&&fc(r,i.deps)){o.memoizedState=Gs(e,n,s,r);return}}ut.flags|=t,o.memoizedState=Gs(1|e,n,s,r)}function Sd(t,e){return Ii(8390656,8,t,e)}function mc(t,e){return Sa(2048,8,t,e)}function Yh(t,e){return Sa(4,2,t,e)}function Qh(t,e){return Sa(4,4,t,e)}function Xh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Zh(t,e,n){return n=n!=null?n.concat([t]):null,Sa(4,4,Xh.bind(null,e,t),n)}function gc(){}function ep(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function tp(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function np(t,e,n){return so&21?(Un(n,e)||(n=ah(),ut.lanes|=n,io|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function l0(t,e){var n=Ye;Ye=n!==0&&4>n?n:4,t(!0);var r=il.transition;il.transition={};try{t(!1),e()}finally{Ye=n,il.transition=r}}function rp(){return En().memoizedState}function u0(t,e,n){var r=$r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},op(t))sp(e,n);else if(n=Bh(t,e,n,r),n!==null){var o=Yt();Bn(n,t,r,o),ip(n,e,r)}}function c0(t,e,n){var r=$r(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(op(t))sp(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,l=s(i,n);if(o.hasEagerState=!0,o.eagerState=l,Un(l,i)){var u=e.interleaved;u===null?(o.next=o,ac(e)):(o.next=u.next,u.next=o),e.interleaved=o;return}}catch{}finally{}n=Bh(t,e,o,r),n!==null&&(o=Yt(),Bn(n,t,r,o),ip(n,e,r))}}function op(t){var e=t.alternate;return t===ut||e!==null&&e===ut}function sp(t,e){ws=sa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ip(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hu(t,n)}}var ia={readContext:kn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},d0={readContext:kn,useCallback:function(t,e){return qn().memoizedState=[t,e===void 0?null:e],t},useContext:kn,useEffect:Sd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ii(4194308,4,Xh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ii(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ii(4,2,t,e)},useMemo:function(t,e){var n=qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=u0.bind(null,ut,t),[r.memoizedState,t]},useRef:function(t){var e=qn();return t={current:t},e.memoizedState=t},useState:wd,useDebugValue:gc,useDeferredValue:function(t){return qn().memoizedState=t},useTransition:function(){var t=wd(!1),e=t[0];return t=l0.bind(null,t[1]),qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ut,o=qn();if(st){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Dt===null)throw Error(U(349));so&30||Vh(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,Sd(qh.bind(null,r,s,t),[t]),r.flags|=2048,Gs(9,Gh.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=qn(),e=Dt.identifierPrefix;if(st){var n=ar,r=ir;n=(r&~(1<<32-Mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ws++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=a0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},f0={readContext:kn,useCallback:ep,useContext:kn,useEffect:mc,useImperativeHandle:Zh,useInsertionEffect:Yh,useLayoutEffect:Qh,useMemo:tp,useReducer:al,useRef:Jh,useState:function(){return al(Vs)},useDebugValue:gc,useDeferredValue:function(t){var e=En();return np(e,St.memoizedState,t)},useTransition:function(){var t=al(Vs)[0],e=En().memoizedState;return[t,e]},useMutableSource:Fh,useSyncExternalStore:Wh,useId:rp,unstable_isNewReconciler:!1},h0={readContext:kn,useCallback:ep,useContext:kn,useEffect:mc,useImperativeHandle:Zh,useInsertionEffect:Yh,useLayoutEffect:Qh,useMemo:tp,useReducer:ll,useRef:Jh,useState:function(){return ll(Vs)},useDebugValue:gc,useDeferredValue:function(t){var e=En();return St===null?e.memoizedState=t:np(e,St.memoizedState,t)},useTransition:function(){var t=ll(Vs)[0],e=En().memoizedState;return[t,e]},useMutableSource:Fh,useSyncExternalStore:Wh,useId:rp,unstable_isNewReconciler:!1};function On(t,e){if(t&&t.defaultProps){e=ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ru(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _a={isMounted:function(t){return(t=t._reactInternals)?fo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yt(),o=$r(t),s=ur(r,o);s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,o),e!==null&&(Bn(e,t,o,r),Pi(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yt(),o=$r(t),s=ur(r,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,o),e!==null&&(Bn(e,t,o,r),Pi(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yt(),r=$r(t),o=ur(n,r);o.tag=2,e!=null&&(o.callback=e),e=Lr(t,o,r),e!==null&&(Bn(e,t,r,n),Pi(e,t,r))}};function _d(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!Is(n,r)||!Is(o,s):!0}function ap(t,e,n){var r=!1,o=Br,s=e.contextType;return typeof s=="object"&&s!==null?s=kn(s):(o=ln(e)?ro:Ft.current,r=e.contextTypes,s=(r=r!=null)?zo(t,o):Br),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_a,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function kd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_a.enqueueReplaceState(e,e.state,null)}function ou(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},lc(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=kn(s):(s=ln(e)?ro:Ft.current,o.context=zo(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ru(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&_a.enqueueReplaceState(o,o.state,null),ra(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Go(t,e){try{var n="",r=e;do n+=zm(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function ul(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function su(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var p0=typeof WeakMap=="function"?WeakMap:Map;function lp(t,e,n){n=ur(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){la||(la=!0,mu=r),su(t,e)},n}function up(t,e,n){n=ur(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){su(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){su(t,e),typeof r!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function Ed(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new p0;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=R0.bind(null,t,e,n),e.then(t,t))}function jd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cd(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ur(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var m0=mr.ReactCurrentOwner,sn=!1;function Ht(t,e,n,r){e.child=t===null?Mh(e,null,n,r):Wo(e,t.child,n,r)}function Rd(t,e,n,r,o){n=n.render;var s=e.ref;return Mo(e,o),r=hc(t,e,n,r,s,o),n=pc(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,hr(t,e,o)):(st&&n&&tc(e),e.flags|=1,Ht(t,e,r,o),e.child)}function Nd(t,e,n,r,o){if(t===null){var s=n.type;return typeof s=="function"&&!kc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,cp(t,e,s,r,o)):(t=zi(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:Is,n(i,r)&&t.ref===e.ref)return hr(t,e,o)}return e.flags|=1,t=Ir(s,r),t.ref=e.ref,t.return=e,e.child=t}function cp(t,e,n,r,o){if(t!==null){var s=t.memoizedProps;if(Is(s,r)&&t.ref===e.ref)if(sn=!1,e.pendingProps=r=s,(t.lanes&o)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,hr(t,e,o)}return iu(t,e,n,r,o)}function dp(t,e,n){var r=e.pendingProps,o=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Oo,cn),cn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,et(Oo,cn),cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,et(Oo,cn),cn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,et(Oo,cn),cn|=r;return Ht(t,e,o,n),e.child}function fp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function iu(t,e,n,r,o){var s=ln(n)?ro:Ft.current;return s=zo(e,s),Mo(e,o),n=hc(t,e,n,r,s,o),r=pc(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,hr(t,e,o)):(st&&r&&tc(e),e.flags|=1,Ht(t,e,n,o),e.child)}function Dd(t,e,n,r,o){if(ln(n)){var s=!0;Xi(e)}else s=!1;if(Mo(e,o),e.stateNode===null)Mi(t,e),ap(e,n,r),ou(e,n,r,o),r=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var u=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=kn(c):(c=ln(n)?ro:Ft.current,c=zo(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||u!==c)&&kd(e,i,r,c),kr=!1;var f=e.memoizedState;i.state=f,ra(e,r,i,o),u=e.memoizedState,l!==r||f!==u||an.current||kr?(typeof d=="function"&&(ru(e,n,d,r),u=e.memoizedState),(l=kr||_d(e,n,l,r,f,u,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),i.props=r,i.state=u,i.context=c,r=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,Uh(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:On(e.type,l),i.props=c,h=e.pendingProps,f=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=kn(u):(u=ln(n)?ro:Ft.current,u=zo(e,u));var x=n.getDerivedStateFromProps;(d=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||f!==u)&&kd(e,i,r,u),kr=!1,f=e.memoizedState,i.state=f,ra(e,r,i,o);var y=e.memoizedState;l!==h||f!==y||an.current||kr?(typeof x=="function"&&(ru(e,n,x,r),y=e.memoizedState),(c=kr||_d(e,n,c,r,f,y,u)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,y,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,y,u)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),i.props=r,i.state=y,i.context=u,r=c):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return au(t,e,n,r,s,o)}function au(t,e,n,r,o,s){fp(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return o&&md(e,n,!1),hr(t,e,s);r=e.stateNode,m0.current=e;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=Wo(e,t.child,null,s),e.child=Wo(e,null,l,s)):Ht(t,e,l,s),e.memoizedState=r.state,o&&md(e,n,!0),e.child}function hp(t){var e=t.stateNode;e.pendingContext?pd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pd(t,e.context,!1),uc(t,e.containerInfo)}function Ad(t,e,n,r,o){return Fo(),rc(o),e.flags|=256,Ht(t,e,n,r),e.child}var lu={dehydrated:null,treeContext:null,retryLane:0};function uu(t){return{baseLanes:t,cachePool:null,transitions:null}}function pp(t,e,n){var r=e.pendingProps,o=lt.current,s=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(o&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),et(lt,o&1),t===null)return tu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=ja(i,r,0,null),t=no(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=uu(n),e.memoizedState=lu,t):yc(e,i));if(o=t.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return g0(t,e,i,r,l,o,n);if(s){s=r.fallback,i=e.mode,o=t.child,l=o.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ir(o,u),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?s=Ir(l,s):(s=no(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?uu(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=lu,r}return s=t.child,t=s.sibling,r=Ir(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function yc(t,e){return e=ja({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yi(t,e,n,r){return r!==null&&rc(r),Wo(e,t.child,null,n),t=yc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function g0(t,e,n,r,o,s,i){if(n)return e.flags&256?(e.flags&=-257,r=ul(Error(U(422))),yi(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=ja({mode:"visible",children:r.children},o,0,null),s=no(s,o,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Wo(e,t.child,null,i),e.child.memoizedState=uu(i),e.memoizedState=lu,s);if(!(e.mode&1))return yi(t,e,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(U(419)),r=ul(s,r,void 0),yi(t,e,i,r)}if(l=(i&t.childLanes)!==0,sn||l){if(r=Dt,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,fr(t,o),Bn(r,t,o,-1))}return _c(),r=ul(Error(U(421))),yi(t,e,i,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=N0.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,dn=Or(o.nextSibling),fn=e,st=!0,$n=null,t!==null&&(xn[bn++]=ir,xn[bn++]=ar,xn[bn++]=oo,ir=t.id,ar=t.overflow,oo=e),e=yc(e,r.children),e.flags|=4096,e)}function Td(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nu(t.return,e,n)}function cl(t,e,n,r,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function mp(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;if(Ht(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Td(t,n,e);else if(t.tag===19)Td(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(et(lt,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&oa(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),cl(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&oa(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}cl(e,!0,n,null,s);break;case"together":cl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function hr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),io|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Ir(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ir(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function y0(t,e,n){switch(e.tag){case 3:hp(e),Fo();break;case 5:zh(e);break;case 1:ln(e.type)&&Xi(e);break;case 4:uc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;et(ta,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(et(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?pp(t,e,n):(et(lt,lt.current&1),t=hr(t,e,n),t!==null?t.sibling:null);et(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return mp(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),et(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,dp(t,e,n)}return hr(t,e,n)}var gp,cu,yp,vp;gp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cu=function(){};yp=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,eo(Qn.current);var s=null;switch(n){case"input":o=Tl(t,o),r=Tl(t,r),s=[];break;case"select":o=ct({},o,{value:void 0}),r=ct({},r,{value:void 0}),s=[];break;case"textarea":o=Pl(t,o),r=Pl(t,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yi)}Il(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var l=o[c];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ds.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ds.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&nt("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};vp=function(t,e,n,r){n!==r&&(e.flags|=4)};function as(t,e){if(!st)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function v0(t,e,n){var r=e.pendingProps;switch(nc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return ln(e.type)&&Qi(),Ut(e),null;case 3:return r=e.stateNode,Vo(),rt(an),rt(Ft),dc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(mi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$n!==null&&(vu($n),$n=null))),cu(t,e),Ut(e),null;case 5:cc(e);var o=eo(Fs.current);if(n=e.type,t!==null&&e.stateNode!=null)yp(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Ut(e),null}if(t=eo(Qn.current),mi(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Kn]=e,r[Us]=s,t=(e.mode&1)!==0,n){case"dialog":nt("cancel",r),nt("close",r);break;case"iframe":case"object":case"embed":nt("load",r);break;case"video":case"audio":for(o=0;o<ps.length;o++)nt(ps[o],r);break;case"source":nt("error",r);break;case"img":case"image":case"link":nt("error",r),nt("load",r);break;case"details":nt("toggle",r);break;case"input":zc(r,s),nt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},nt("invalid",r);break;case"textarea":Wc(r,s),nt("invalid",r)}Il(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&pi(r.textContent,l,t),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&pi(r.textContent,l,t),o=["children",""+l]):Ds.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&nt("scroll",r)}switch(n){case"input":ii(r),Fc(r,s,!0);break;case"textarea":ii(r),Vc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Yi)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[Kn]=e,t[Us]=r,gp(t,e,!1,!1),e.stateNode=t;e:{switch(i=Ml(n,r),n){case"dialog":nt("cancel",t),nt("close",t),o=r;break;case"iframe":case"object":case"embed":nt("load",t),o=r;break;case"video":case"audio":for(o=0;o<ps.length;o++)nt(ps[o],t);o=r;break;case"source":nt("error",t),o=r;break;case"img":case"image":case"link":nt("error",t),nt("load",t),o=r;break;case"details":nt("toggle",t),o=r;break;case"input":zc(t,r),o=Tl(t,r),nt("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=ct({},r,{value:void 0}),nt("invalid",t);break;case"textarea":Wc(t,r),o=Pl(t,r),nt("invalid",t);break;default:o=r}Il(n,o),l=o;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Jf(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Hf(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&As(t,u):typeof u=="number"&&As(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ds.hasOwnProperty(s)?u!=null&&s==="onScroll"&&nt("scroll",t):u!=null&&zu(t,s,u,i))}switch(n){case"input":ii(t),Fc(t,r,!1);break;case"textarea":ii(t),Vc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Mr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Lo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Lo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Yi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(t&&e.stateNode!=null)vp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=eo(Fs.current),eo(Qn.current),mi(e)){if(r=e.stateNode,n=e.memoizedProps,r[Kn]=e,(s=r.nodeValue!==n)&&(t=fn,t!==null))switch(t.tag){case 3:pi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pi(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kn]=e,e.stateNode=r}return Ut(e),null;case 13:if(rt(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&dn!==null&&e.mode&1&&!(e.flags&128))$h(),Fo(),e.flags|=98560,s=!1;else if(s=mi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Kn]=e}else Fo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),s=!1}else $n!==null&&(vu($n),$n=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?_t===0&&(_t=3):_c())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return Vo(),cu(t,e),t===null&&Ms(e.stateNode.containerInfo),Ut(e),null;case 10:return ic(e.type._context),Ut(e),null;case 17:return ln(e.type)&&Qi(),Ut(e),null;case 19:if(rt(lt),s=e.memoizedState,s===null)return Ut(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)as(s,!1);else{if(_t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=oa(t),i!==null){for(e.flags|=128,as(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return et(lt,lt.current&1|2),e.child}t=t.sibling}s.tail!==null&&mt()>qo&&(e.flags|=128,r=!0,as(s,!1),e.lanes=4194304)}else{if(!r)if(t=oa(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),as(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!st)return Ut(e),null}else 2*mt()-s.renderingStartTime>qo&&n!==1073741824&&(e.flags|=128,r=!0,as(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=mt(),e.sibling=null,n=lt.current,et(lt,r?n&1|2:n&1),e):(Ut(e),null);case 22:case 23:return Sc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?cn&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function x0(t,e){switch(nc(e),e.tag){case 1:return ln(e.type)&&Qi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vo(),rt(an),rt(Ft),dc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cc(e),null;case 13:if(rt(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Fo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return rt(lt),null;case 4:return Vo(),null;case 10:return ic(e.type._context),null;case 22:case 23:return Sc(),null;case 24:return null;default:return null}}var vi=!1,zt=!1,b0=typeof WeakSet=="function"?WeakSet:Set,X=null;function To(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ft(t,e,r)}else n.current=null}function du(t,e,n){try{n()}catch(r){ft(t,e,r)}}var Od=!1;function w0(t,e){if(Kl=Hi,t=_h(),ec(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,l=-1,u=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var x;h!==n||o!==0&&h.nodeType!==3||(l=i+o),h!==s||r!==0&&h.nodeType!==3||(u=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(x=h.firstChild)!==null;)f=h,h=x;for(;;){if(h===t)break t;if(f===n&&++c===o&&(l=i),f===s&&++d===r&&(u=i),(x=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=x}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jl={focusedElem:t,selectionRange:n},Hi=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,_=y.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?b:On(e.type,b),_);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(w){ft(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return y=Od,Od=!1,y}function Ss(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&du(e,n,s)}o=o.next}while(o!==r)}}function ka(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function xp(t){var e=t.alternate;e!==null&&(t.alternate=null,xp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Kn],delete e[Us],delete e[Xl],delete e[r0],delete e[o0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bp(t){return t.tag===5||t.tag===3||t.tag===4}function Ld(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yi));else if(r!==4&&(t=t.child,t!==null))for(hu(t,e,n),t=t.sibling;t!==null;)hu(t,e,n),t=t.sibling}function pu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pu(t,e,n),t=t.sibling;t!==null;)pu(t,e,n),t=t.sibling}var Ot=null,Ln=!1;function xr(t,e,n){for(n=n.child;n!==null;)wp(t,e,n),n=n.sibling}function wp(t,e,n){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(ga,n)}catch{}switch(n.tag){case 5:zt||To(n,e);case 6:var r=Ot,o=Ln;Ot=null,xr(t,e,n),Ot=r,Ln=o,Ot!==null&&(Ln?(t=Ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ot.removeChild(n.stateNode));break;case 18:Ot!==null&&(Ln?(t=Ot,n=n.stateNode,t.nodeType===8?rl(t.parentNode,n):t.nodeType===1&&rl(t,n),Ps(t)):rl(Ot,n.stateNode));break;case 4:r=Ot,o=Ln,Ot=n.stateNode.containerInfo,Ln=!0,xr(t,e,n),Ot=r,Ln=o;break;case 0:case 11:case 14:case 15:if(!zt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&du(n,e,i),o=o.next}while(o!==r)}xr(t,e,n);break;case 1:if(!zt&&(To(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ft(n,e,l)}xr(t,e,n);break;case 21:xr(t,e,n);break;case 22:n.mode&1?(zt=(r=zt)||n.memoizedState!==null,xr(t,e,n),zt=r):xr(t,e,n);break;default:xr(t,e,n)}}function Pd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new b0),e.forEach(function(r){var o=D0.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function An(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:Ot=l.stateNode,Ln=!1;break e;case 3:Ot=l.stateNode.containerInfo,Ln=!0;break e;case 4:Ot=l.stateNode.containerInfo,Ln=!0;break e}l=l.return}if(Ot===null)throw Error(U(160));wp(s,i,o),Ot=null,Ln=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(c){ft(o,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Sp(e,t),e=e.sibling}function Sp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(An(e,t),Vn(t),r&4){try{Ss(3,t,t.return),ka(3,t)}catch(b){ft(t,t.return,b)}try{Ss(5,t,t.return)}catch(b){ft(t,t.return,b)}}break;case 1:An(e,t),Vn(t),r&512&&n!==null&&To(n,n.return);break;case 5:if(An(e,t),Vn(t),r&512&&n!==null&&To(n,n.return),t.flags&32){var o=t.stateNode;try{As(o,"")}catch(b){ft(t,t.return,b)}}if(r&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Vf(o,s),Ml(l,i);var c=Ml(l,s);for(i=0;i<u.length;i+=2){var d=u[i],h=u[i+1];d==="style"?Jf(o,h):d==="dangerouslySetInnerHTML"?Hf(o,h):d==="children"?As(o,h):zu(o,d,h,c)}switch(l){case"input":Ol(o,s);break;case"textarea":Gf(o,s);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var x=s.value;x!=null?Lo(o,!!s.multiple,x,!1):f!==!!s.multiple&&(s.defaultValue!=null?Lo(o,!!s.multiple,s.defaultValue,!0):Lo(o,!!s.multiple,s.multiple?[]:"",!1))}o[Us]=s}catch(b){ft(t,t.return,b)}}break;case 6:if(An(e,t),Vn(t),r&4){if(t.stateNode===null)throw Error(U(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(b){ft(t,t.return,b)}}break;case 3:if(An(e,t),Vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ps(e.containerInfo)}catch(b){ft(t,t.return,b)}break;case 4:An(e,t),Vn(t);break;case 13:An(e,t),Vn(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(bc=mt())),r&4&&Pd(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(zt=(c=zt)||d,An(e,t),zt=c):An(e,t),Vn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(X=t,d=t.child;d!==null;){for(h=X=d;X!==null;){switch(f=X,x=f.child,f.tag){case 0:case 11:case 14:case 15:Ss(4,f,f.return);break;case 1:To(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(b){ft(r,n,b)}}break;case 5:To(f,f.return);break;case 22:if(f.memoizedState!==null){Id(h);continue}}x!==null?(x.return=f,X=x):Id(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{o=h.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,u=h.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Kf("display",i))}catch(b){ft(t,t.return,b)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(b){ft(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:An(e,t),Vn(t),r&4&&Pd(t);break;case 21:break;default:An(e,t),Vn(t)}}function Vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bp(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(As(o,""),r.flags&=-33);var s=Ld(t);pu(t,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,l=Ld(t);hu(t,l,i);break;default:throw Error(U(161))}}catch(u){ft(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function S0(t,e,n){X=t,_p(t)}function _p(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var o=X,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||vi;if(!i){var l=o.alternate,u=l!==null&&l.memoizedState!==null||zt;l=vi;var c=zt;if(vi=i,(zt=u)&&!c)for(X=o;X!==null;)i=X,u=i.child,i.tag===22&&i.memoizedState!==null?Md(o):u!==null?(u.return=i,X=u):Md(o);for(;s!==null;)X=s,_p(s),s=s.sibling;X=o,vi=l,zt=c}$d(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,X=s):$d(t)}}function $d(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zt||ka(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zt)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:On(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&bd(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bd(e,i,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ps(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}zt||e.flags&512&&fu(e)}catch(f){ft(e,e.return,f)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Id(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function Md(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ka(4,e)}catch(u){ft(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(u){ft(e,o,u)}}var s=e.return;try{fu(e)}catch(u){ft(e,s,u)}break;case 5:var i=e.return;try{fu(e)}catch(u){ft(e,i,u)}}}catch(u){ft(e,e.return,u)}if(e===t){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var _0=Math.ceil,aa=mr.ReactCurrentDispatcher,vc=mr.ReactCurrentOwner,Sn=mr.ReactCurrentBatchConfig,Be=0,Dt=null,xt=null,Lt=0,cn=0,Oo=zr(0),_t=0,qs=null,io=0,Ea=0,xc=0,_s=null,rn=null,bc=0,qo=1/0,rr=null,la=!1,mu=null,Pr=null,xi=!1,Nr=null,ua=0,ks=0,gu=null,Bi=-1,Ui=0;function Yt(){return Be&6?mt():Bi!==-1?Bi:Bi=mt()}function $r(t){return t.mode&1?Be&2&&Lt!==0?Lt&-Lt:i0.transition!==null?(Ui===0&&(Ui=ah()),Ui):(t=Ye,t!==0||(t=window.event,t=t===void 0?16:ph(t.type)),t):1}function Bn(t,e,n,r){if(50<ks)throw ks=0,gu=null,Error(U(185));Ys(t,n,r),(!(Be&2)||t!==Dt)&&(t===Dt&&(!(Be&2)&&(Ea|=n),_t===4&&jr(t,Lt)),un(t,r),n===1&&Be===0&&!(e.mode&1)&&(qo=mt()+500,wa&&Fr()))}function un(t,e){var n=t.callbackNode;ig(t,e);var r=qi(t,t===Dt?Lt:0);if(r===0)n!==null&&Hc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Hc(n),e===1)t.tag===0?s0(Bd.bind(null,t)):Oh(Bd.bind(null,t)),t0(function(){!(Be&6)&&Fr()}),n=null;else{switch(lh(r)){case 1:n=qu;break;case 4:n=sh;break;case 16:n=Gi;break;case 536870912:n=ih;break;default:n=Gi}n=Ap(n,kp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kp(t,e){if(Bi=-1,Ui=0,Be&6)throw Error(U(327));var n=t.callbackNode;if(Bo()&&t.callbackNode!==n)return null;var r=qi(t,t===Dt?Lt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ca(t,r);else{e=r;var o=Be;Be|=2;var s=jp();(Dt!==t||Lt!==e)&&(rr=null,qo=mt()+500,to(t,e));do try{j0();break}catch(l){Ep(t,l)}while(!0);sc(),aa.current=s,Be=o,xt!==null?e=0:(Dt=null,Lt=0,e=_t)}if(e!==0){if(e===2&&(o=Wl(t),o!==0&&(r=o,e=yu(t,o))),e===1)throw n=qs,to(t,0),jr(t,r),un(t,mt()),n;if(e===6)jr(t,r);else{if(o=t.current.alternate,!(r&30)&&!k0(o)&&(e=ca(t,r),e===2&&(s=Wl(t),s!==0&&(r=s,e=yu(t,s))),e===1))throw n=qs,to(t,0),jr(t,r),un(t,mt()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Jr(t,rn,rr);break;case 3:if(jr(t,r),(r&130023424)===r&&(e=bc+500-mt(),10<e)){if(qi(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){Yt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Ql(Jr.bind(null,t,rn,rr),e);break}Jr(t,rn,rr);break;case 4:if(jr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var i=31-Mn(r);s=1<<i,i=e[i],i>o&&(o=i),r&=~s}if(r=o,r=mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_0(r/1960))-r,10<r){t.timeoutHandle=Ql(Jr.bind(null,t,rn,rr),r);break}Jr(t,rn,rr);break;case 5:Jr(t,rn,rr);break;default:throw Error(U(329))}}}return un(t,mt()),t.callbackNode===n?kp.bind(null,t):null}function yu(t,e){var n=_s;return t.current.memoizedState.isDehydrated&&(to(t,e).flags|=256),t=ca(t,e),t!==2&&(e=rn,rn=n,e!==null&&vu(e)),t}function vu(t){rn===null?rn=t:rn.push.apply(rn,t)}function k0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Un(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jr(t,e){for(e&=~xc,e&=~Ea,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mn(e),r=1<<n;t[n]=-1,e&=~r}}function Bd(t){if(Be&6)throw Error(U(327));Bo();var e=qi(t,0);if(!(e&1))return un(t,mt()),null;var n=ca(t,e);if(t.tag!==0&&n===2){var r=Wl(t);r!==0&&(e=r,n=yu(t,r))}if(n===1)throw n=qs,to(t,0),jr(t,e),un(t,mt()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jr(t,rn,rr),un(t,mt()),null}function wc(t,e){var n=Be;Be|=1;try{return t(e)}finally{Be=n,Be===0&&(qo=mt()+500,wa&&Fr())}}function ao(t){Nr!==null&&Nr.tag===0&&!(Be&6)&&Bo();var e=Be;Be|=1;var n=Sn.transition,r=Ye;try{if(Sn.transition=null,Ye=1,t)return t()}finally{Ye=r,Sn.transition=n,Be=e,!(Be&6)&&Fr()}}function Sc(){cn=Oo.current,rt(Oo)}function to(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,e0(n)),xt!==null)for(n=xt.return;n!==null;){var r=n;switch(nc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qi();break;case 3:Vo(),rt(an),rt(Ft),dc();break;case 5:cc(r);break;case 4:Vo();break;case 13:rt(lt);break;case 19:rt(lt);break;case 10:ic(r.type._context);break;case 22:case 23:Sc()}n=n.return}if(Dt=t,xt=t=Ir(t.current,null),Lt=cn=e,_t=0,qs=null,xc=Ea=io=0,rn=_s=null,Zr!==null){for(e=0;e<Zr.length;e++)if(n=Zr[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}Zr=null}return t}function Ep(t,e){do{var n=xt;try{if(sc(),$i.current=ia,sa){for(var r=ut.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}sa=!1}if(so=0,Nt=St=ut=null,ws=!1,Ws=0,vc.current=null,n===null||n.return===null){_t=1,qs=e,xt=null;break}e:{var s=t,i=n.return,l=n,u=e;if(e=Lt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=jd(i);if(x!==null){x.flags&=-257,Cd(x,i,l,s,e),x.mode&1&&Ed(s,c,e),e=x,u=c;var y=e.updateQueue;if(y===null){var b=new Set;b.add(u),e.updateQueue=b}else y.add(u);break e}else{if(!(e&1)){Ed(s,c,e),_c();break e}u=Error(U(426))}}else if(st&&l.mode&1){var _=jd(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Cd(_,i,l,s,e),rc(Go(u,l));break e}}s=u=Go(u,l),_t!==4&&(_t=2),_s===null?_s=[s]:_s.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=lp(s,u,e);xd(s,p);break e;case 1:l=u;var m=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Pr===null||!Pr.has(g)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=up(s,l,e);xd(s,w);break e}}s=s.return}while(s!==null)}Rp(n)}catch(E){e=E,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(!0)}function jp(){var t=aa.current;return aa.current=ia,t===null?ia:t}function _c(){(_t===0||_t===3||_t===2)&&(_t=4),Dt===null||!(io&268435455)&&!(Ea&268435455)||jr(Dt,Lt)}function ca(t,e){var n=Be;Be|=2;var r=jp();(Dt!==t||Lt!==e)&&(rr=null,to(t,e));do try{E0();break}catch(o){Ep(t,o)}while(!0);if(sc(),Be=n,aa.current=r,xt!==null)throw Error(U(261));return Dt=null,Lt=0,_t}function E0(){for(;xt!==null;)Cp(xt)}function j0(){for(;xt!==null&&!Qm();)Cp(xt)}function Cp(t){var e=Dp(t.alternate,t,cn);t.memoizedProps=t.pendingProps,e===null?Rp(t):xt=e,vc.current=null}function Rp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=x0(n,e),n!==null){n.flags&=32767,xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_t=6,xt=null;return}}else if(n=v0(n,e,cn),n!==null){xt=n;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);_t===0&&(_t=5)}function Jr(t,e,n){var r=Ye,o=Sn.transition;try{Sn.transition=null,Ye=1,C0(t,e,n,r)}finally{Sn.transition=o,Ye=r}return null}function C0(t,e,n,r){do Bo();while(Nr!==null);if(Be&6)throw Error(U(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ag(t,s),t===Dt&&(xt=Dt=null,Lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xi||(xi=!0,Ap(Gi,function(){return Bo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Sn.transition,Sn.transition=null;var i=Ye;Ye=1;var l=Be;Be|=4,vc.current=null,w0(t,n),Sp(n,t),Hg(Jl),Hi=!!Kl,Jl=Kl=null,t.current=n,S0(n),Xm(),Be=l,Ye=i,Sn.transition=s}else t.current=n;if(xi&&(xi=!1,Nr=t,ua=o),s=t.pendingLanes,s===0&&(Pr=null),tg(n.stateNode),un(t,mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(la)throw la=!1,t=mu,mu=null,t;return ua&1&&t.tag!==0&&Bo(),s=t.pendingLanes,s&1?t===gu?ks++:(ks=0,gu=t):ks=0,Fr(),null}function Bo(){if(Nr!==null){var t=lh(ua),e=Sn.transition,n=Ye;try{if(Sn.transition=null,Ye=16>t?16:t,Nr===null)var r=!1;else{if(t=Nr,Nr=null,ua=0,Be&6)throw Error(U(331));var o=Be;for(Be|=4,X=t.current;X!==null;){var s=X,i=s.child;if(X.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(X=c;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:Ss(8,d,s)}var h=d.child;if(h!==null)h.return=d,X=h;else for(;X!==null;){d=X;var f=d.sibling,x=d.return;if(xp(d),d===c){X=null;break}if(f!==null){f.return=x,X=f;break}X=x}}}var y=s.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var _=b.sibling;b.sibling=null,b=_}while(b!==null)}}X=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,X=i;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ss(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,X=p;break e}X=s.return}}var m=t.current;for(X=m;X!==null;){i=X;var g=i.child;if(i.subtreeFlags&2064&&g!==null)g.return=i,X=g;else e:for(i=m;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ka(9,l)}}catch(E){ft(l,l.return,E)}if(l===i){X=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,X=w;break e}X=l.return}}if(Be=o,Fr(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(ga,t)}catch{}r=!0}return r}finally{Ye=n,Sn.transition=e}}return!1}function Ud(t,e,n){e=Go(n,e),e=lp(t,e,1),t=Lr(t,e,1),e=Yt(),t!==null&&(Ys(t,1,e),un(t,e))}function ft(t,e,n){if(t.tag===3)Ud(t,t,n);else for(;e!==null;){if(e.tag===3){Ud(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pr===null||!Pr.has(r))){t=Go(n,t),t=up(e,t,1),e=Lr(e,t,1),t=Yt(),e!==null&&(Ys(e,1,t),un(e,t));break}}e=e.return}}function R0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yt(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(Lt&n)===n&&(_t===4||_t===3&&(Lt&130023424)===Lt&&500>mt()-bc?to(t,0):xc|=n),un(t,e)}function Np(t,e){e===0&&(t.mode&1?(e=ui,ui<<=1,!(ui&130023424)&&(ui=4194304)):e=1);var n=Yt();t=fr(t,e),t!==null&&(Ys(t,e,n),un(t,n))}function N0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Np(t,n)}function D0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),Np(t,n)}var Dp;Dp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,y0(t,e,n);sn=!!(t.flags&131072)}else sn=!1,st&&e.flags&1048576&&Lh(e,ea,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Mi(t,e),t=e.pendingProps;var o=zo(e,Ft.current);Mo(e,n),o=hc(null,e,r,t,o,n);var s=pc();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(r)?(s=!0,Xi(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,lc(e),o.updater=_a,e.stateNode=o,o._reactInternals=e,ou(e,r,t,n),e=au(null,e,r,!0,s,n)):(e.tag=0,st&&s&&tc(e),Ht(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Mi(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=T0(r),t=On(r,t),o){case 0:e=iu(null,e,r,t,n);break e;case 1:e=Dd(null,e,r,t,n);break e;case 11:e=Rd(null,e,r,t,n);break e;case 14:e=Nd(null,e,r,On(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:On(r,o),iu(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:On(r,o),Dd(t,e,r,o,n);case 3:e:{if(hp(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,o=s.element,Uh(t,e),ra(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Go(Error(U(423)),e),e=Ad(t,e,r,n,o);break e}else if(r!==o){o=Go(Error(U(424)),e),e=Ad(t,e,r,n,o);break e}else for(dn=Or(e.stateNode.containerInfo.firstChild),fn=e,st=!0,$n=null,n=Mh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fo(),r===o){e=hr(t,e,n);break e}Ht(t,e,r,n)}e=e.child}return e;case 5:return zh(e),t===null&&tu(e),r=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,i=o.children,Yl(r,o)?i=null:s!==null&&Yl(r,s)&&(e.flags|=32),fp(t,e),Ht(t,e,i,n),e.child;case 6:return t===null&&tu(e),null;case 13:return pp(t,e,n);case 4:return uc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Wo(e,null,r,n):Ht(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:On(r,o),Rd(t,e,r,o,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,s=e.memoizedProps,i=o.value,et(ta,r._currentValue),r._currentValue=i,s!==null)if(Un(s.value,i)){if(s.children===o.children&&!an.current){e=hr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=ur(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),nu(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(U(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),nu(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Ht(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Mo(e,n),o=kn(o),r=r(o),e.flags|=1,Ht(t,e,r,n),e.child;case 14:return r=e.type,o=On(r,e.pendingProps),o=On(r.type,o),Nd(t,e,r,o,n);case 15:return cp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:On(r,o),Mi(t,e),e.tag=1,ln(r)?(t=!0,Xi(e)):t=!1,Mo(e,n),ap(e,r,o),ou(e,r,o,n),au(null,e,r,!0,t,n);case 19:return mp(t,e,n);case 22:return dp(t,e,n)}throw Error(U(156,e.tag))};function Ap(t,e){return oh(t,e)}function A0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,e,n,r){return new A0(t,e,n,r)}function kc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function T0(t){if(typeof t=="function")return kc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wu)return 11;if(t===Vu)return 14}return 2}function Ir(t,e){var n=t.alternate;return n===null?(n=wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zi(t,e,n,r,o,s){var i=2;if(r=t,typeof t=="function")kc(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case _o:return no(n.children,o,s,e);case Fu:i=8,o|=8;break;case Rl:return t=wn(12,n,e,o|2),t.elementType=Rl,t.lanes=s,t;case Nl:return t=wn(13,n,e,o),t.elementType=Nl,t.lanes=s,t;case Dl:return t=wn(19,n,e,o),t.elementType=Dl,t.lanes=s,t;case zf:return ja(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Bf:i=10;break e;case Uf:i=9;break e;case Wu:i=11;break e;case Vu:i=14;break e;case _r:i=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=wn(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function no(t,e,n,r){return t=wn(7,t,r,e),t.lanes=n,t}function ja(t,e,n,r){return t=wn(22,t,r,e),t.elementType=zf,t.lanes=n,t.stateNode={isHidden:!1},t}function dl(t,e,n){return t=wn(6,t,null,e),t.lanes=n,t}function fl(t,e,n){return e=wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function O0(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qa(0),this.expirationTimes=qa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qa(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Ec(t,e,n,r,o,s,i,l,u){return t=new O0(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=wn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lc(s),t}function L0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:So,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Tp(t){if(!t)return Br;t=t._reactInternals;e:{if(fo(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(ln(n))return Th(t,n,e)}return e}function Op(t,e,n,r,o,s,i,l,u){return t=Ec(n,r,!0,t,o,s,i,l,u),t.context=Tp(null),n=t.current,r=Yt(),o=$r(n),s=ur(r,o),s.callback=e??null,Lr(n,s,o),t.current.lanes=o,Ys(t,o,r),un(t,r),t}function Ca(t,e,n,r){var o=e.current,s=Yt(),i=$r(o);return n=Tp(n),e.context===null?e.context=n:e.pendingContext=n,e=ur(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(o,e,i),t!==null&&(Bn(t,o,i,s),Pi(t,o,i)),i}function da(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jc(t,e){zd(t,e),(t=t.alternate)&&zd(t,e)}function P0(){return null}var Lp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cc(t){this._internalRoot=t}Ra.prototype.render=Cc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Ca(t,e,null,null)};Ra.prototype.unmount=Cc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ao(function(){Ca(null,t,null,null)}),e[dr]=null}};function Ra(t){this._internalRoot=t}Ra.prototype.unstable_scheduleHydration=function(t){if(t){var e=dh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Er.length&&e!==0&&e<Er[n].priority;n++);Er.splice(n,0,t),n===0&&hh(t)}};function Rc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Na(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fd(){}function $0(t,e,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=da(i);s.call(c)}}var i=Op(e,r,t,0,null,!1,!1,"",Fd);return t._reactRootContainer=i,t[dr]=i.current,Ms(t.nodeType===8?t.parentNode:t),ao(),i}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var c=da(u);l.call(c)}}var u=Ec(t,0,!1,null,null,!1,!1,"",Fd);return t._reactRootContainer=u,t[dr]=u.current,Ms(t.nodeType===8?t.parentNode:t),ao(function(){Ca(e,u,n,r)}),u}function Da(t,e,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var l=o;o=function(){var u=da(i);l.call(u)}}Ca(e,i,t,o)}else i=$0(n,e,t,o,r);return da(i)}uh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hs(e.pendingLanes);n!==0&&(Hu(e,n|1),un(e,mt()),!(Be&6)&&(qo=mt()+500,Fr()))}break;case 13:ao(function(){var r=fr(t,1);if(r!==null){var o=Yt();Bn(r,t,1,o)}}),jc(t,1)}};Ku=function(t){if(t.tag===13){var e=fr(t,134217728);if(e!==null){var n=Yt();Bn(e,t,134217728,n)}jc(t,134217728)}};ch=function(t){if(t.tag===13){var e=$r(t),n=fr(t,e);if(n!==null){var r=Yt();Bn(n,t,e,r)}jc(t,e)}};dh=function(){return Ye};fh=function(t,e){var n=Ye;try{return Ye=t,e()}finally{Ye=n}};Ul=function(t,e,n){switch(e){case"input":if(Ol(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=ba(r);if(!o)throw Error(U(90));Wf(r),Ol(r,o)}}}break;case"textarea":Gf(t,n);break;case"select":e=n.value,e!=null&&Lo(t,!!n.multiple,e,!1)}};Xf=wc;Zf=ao;var I0={usingClientEntryPoint:!1,Events:[Xs,Co,ba,Yf,Qf,wc]},ls={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M0={bundleType:ls.bundleType,version:ls.version,rendererPackageName:ls.rendererPackageName,rendererConfig:ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nh(t),t===null?null:t.stateNode},findFiberByHostInstance:ls.findFiberByHostInstance||P0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bi.isDisabled&&bi.supportsFiber)try{ga=bi.inject(M0),Yn=bi}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I0;pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rc(e))throw Error(U(200));return L0(t,e,null,n)};pn.createRoot=function(t,e){if(!Rc(t))throw Error(U(299));var n=!1,r="",o=Lp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Ec(t,1,!1,null,null,n,!1,r,o),t[dr]=e.current,Ms(t.nodeType===8?t.parentNode:t),new Cc(e)};pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=nh(e),t=t===null?null:t.stateNode,t};pn.flushSync=function(t){return ao(t)};pn.hydrate=function(t,e,n){if(!Na(e))throw Error(U(200));return Da(null,t,e,!0,n)};pn.hydrateRoot=function(t,e,n){if(!Rc(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=Lp;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=Op(e,null,t,1,n??null,o,!1,s,i),t[dr]=e.current,Ms(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Ra(e)};pn.render=function(t,e,n){if(!Na(e))throw Error(U(200));return Da(null,t,e,!1,n)};pn.unmountComponentAtNode=function(t){if(!Na(t))throw Error(U(40));return t._reactRootContainer?(ao(function(){Da(null,null,t,!1,function(){t._reactRootContainer=null,t[dr]=null})}),!0):!1};pn.unstable_batchedUpdates=wc;pn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Na(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Da(t,e,n,!1,r)};pn.version="18.3.1-next-f1338f8080-20240426";function Pp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pp)}catch(t){console.error(t)}}Pp(),Pf.exports=pn;var B0=Pf.exports,Wd=B0;jl.createRoot=Wd.createRoot,jl.hydrateRoot=Wd.hydrateRoot;const U0="modulepreload",z0=function(t){return"/"+t},Vd={},ei=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(u=>{if(u=z0(u),u in Vd)return;Vd[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":U0,c||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((f,x)=>{h.addEventListener("load",f),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},F0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ei(async()=>{const{default:r}=await Promise.resolve().then(()=>Qo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Nc extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class W0 extends Nc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Gd extends Nc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class qd extends Nc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(xu||(xu={}));var V0=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class G0{constructor(e,{headers:n={},customFetch:r,region:o=xu.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=F0(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return V0(this,void 0,void 0,function*(){try{const{headers:o,method:s,body:i}=n;let l={},{region:u}=n;u||(u=this.region);const c=new URL(`${this.url}/${e}`);u&&u!=="any"&&(l["x-region"]=u,c.searchParams.set("forceFunctionRegion",u));let d;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const h=yield this.fetch(c.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),o),body:d}).catch(b=>{throw new W0(b)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Gd(h);if(!h.ok)throw new qd(h);let x=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return x==="application/json"?y=yield h.json():x==="application/octet-stream"?y=yield h.blob():x==="text/event-stream"?y=h:x==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(o){return{data:null,error:o,response:o instanceof qd||o instanceof Gd?o.context:void 0}}})}}var on={},Dc={},Aa={},ti={},Ta={},Oa={},q0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ho=q0();const H0=Ho.fetch,$p=Ho.fetch.bind(Ho),Ip=Ho.Headers,K0=Ho.Request,J0=Ho.Response,Qo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ip,Request:K0,Response:J0,default:$p,fetch:H0},Symbol.toStringTag,{value:"Module"})),Y0=hm(Qo);var La={};Object.defineProperty(La,"__esModule",{value:!0});let Q0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};La.default=Q0;var Mp=_n&&_n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Oa,"__esModule",{value:!0});const X0=Mp(Y0),Z0=Mp(La);let ey=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=X0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let o=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var i,l,u,c;let d=null,h=null,f=null,x=s.status,y=s.statusText;if(s.ok){if(this.method!=="HEAD"){const m=await s.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?h=m:h=JSON.parse(m))}const _=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),p=(u=s.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");_&&p&&p.length>1&&(f=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,x=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const _=await s.text();try{d=JSON.parse(_),Array.isArray(d)&&s.status===404&&(h=[],d=null,x=200,y="OK")}catch{s.status===404&&_===""?(x=204,y="No Content"):d={message:_}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,x=200,y="OK"),d&&this.shouldThrowOnError)throw new Z0.default(d)}return{error:d,data:h,count:f,status:x,statusText:y}});return this.shouldThrowOnError||(o=o.catch(s=>{var i,l,u;return{error:{message:`${(i=s==null?void 0:s.name)!==null&&i!==void 0?i:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(u=s==null?void 0:s.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}};Oa.default=ey;var ty=_n&&_n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ta,"__esModule",{value:!0});const ny=ty(Oa);let ry=class extends ny.default{select(e){let n=!1;const r=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:o,referencedTable:s=o}={}){const i=s?`${s}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:o=r}={}){const s=typeof o>"u"?"offset":`${o}.offset`,i=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:o=!1,wal:s=!1,format:i="text"}={}){var l;const u=[e?"analyze":null,n?"verbose":null,r?"settings":null,o?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${u};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ta.default=ry;var oy=_n&&_n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ti,"__esModule",{value:!0});const sy=oy(Ta);let iy=class extends sy.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:o}={}){let s="";o==="plain"?s="pl":o==="phrase"?s="ph":o==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};ti.default=iy;var ay=_n&&_n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Aa,"__esModule",{value:!0});const us=ay(ti);let ly=class{constructor(e,{headers:n={},schema:r,fetch:o}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=o}select(e,{head:n=!1,count:r}={}){const o=n?"HEAD":"GET";let s=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new us.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var o;const s="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(i.length>0){const l=[...new Set(i)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new us.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:o,defaultToNull:s=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),o&&this.headers.append("Prefer",`count=${o}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new us.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:n}={}){var r;const o="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new us.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new us.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Aa.default=ly;var Bp=_n&&_n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dc,"__esModule",{value:!0});const uy=Bp(Aa),cy=Bp(ti);let dy=class Up{constructor(e,{headers:n={},schema:r,fetch:o}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=o}from(e){const n=new URL(`${this.url}/${e}`);return new uy.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Up(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:o=!1,count:s}={}){var i;let l;const u=new URL(`${this.url}/rpc/${e}`);let c;r||o?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{u.searchParams.append(h,f)})):(l="POST",c=n);const d=new Headers(this.headers);return s&&d.set("Prefer",`count=${s}`),new cy.default({method:l,url:u,headers:d,schema:this.schemaName,body:c,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};Dc.default=dy;var Xo=_n&&_n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(on,"__esModule",{value:!0});on.PostgrestError=on.PostgrestBuilder=on.PostgrestTransformBuilder=on.PostgrestFilterBuilder=on.PostgrestQueryBuilder=on.PostgrestClient=void 0;const zp=Xo(Dc);on.PostgrestClient=zp.default;const Fp=Xo(Aa);on.PostgrestQueryBuilder=Fp.default;const Wp=Xo(ti);on.PostgrestFilterBuilder=Wp.default;const Vp=Xo(Ta);on.PostgrestTransformBuilder=Vp.default;const Gp=Xo(Oa);on.PostgrestBuilder=Gp.default;const qp=Xo(La);on.PostgrestError=qp.default;var fy=on.default={PostgrestClient:zp.default,PostgrestQueryBuilder:Fp.default,PostgrestFilterBuilder:Wp.default,PostgrestTransformBuilder:Vp.default,PostgrestBuilder:Gp.default,PostgrestError:qp.default};const{PostgrestClient:hy,PostgrestQueryBuilder:hb,PostgrestFilterBuilder:pb,PostgrestTransformBuilder:mb,PostgrestBuilder:gb,PostgrestError:yb}=fy;class py{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const my="2.15.5",gy=`realtime-js/${my}`,yy="1.0.0",bu=1e4,vy=1e3,xy=100;var Es;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Es||(Es={}));var bt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(bt||(bt={}));var Pn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Pn||(Pn={}));var wu;(function(t){t.websocket="websocket"})(wu||(wu={}));var Qr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Qr||(Qr={}));class by{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const o=n.getUint8(1),s=n.getUint8(2);let i=this.HEADER_LENGTH+2;const l=r.decode(e.slice(i,i+o));i=i+o;const u=r.decode(e.slice(i,i+s));i=i+s;const c=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:u,payload:c}}}class Hp{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ze||(Ze={}));const Hd=(t,e,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,i)=>(s[i]=wy(i,t,e,o),s),{})},wy=(t,e,n,r)=>{const o=e.find(l=>l.name===t),s=o==null?void 0:o.type,i=n[t];return s&&!r.includes(s)?Kp(s,i):Su(i)},Kp=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Ey(e,n)}switch(t){case Ze.bool:return Sy(e);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return _y(e);case Ze.json:case Ze.jsonb:return ky(e);case Ze.timestamp:return jy(e);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return Su(e);default:return Su(e)}},Su=t=>t,Sy=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},_y=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ky=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Ey=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const i=t.slice(1,n);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(l=>Kp(e,l))}return t},jy=t=>typeof t=="string"?t.replace(" ","T"):t,Jp=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class hl{constructor(e,n,r={},o=bu){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Kd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Kd||(Kd={}));class js{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:s,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=js.syncState(this.state,o,s,i),this.pendingDiffs.forEach(u=>{this.state=js.syncDiff(this.state,u,s,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},o=>{const{onJoin:s,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=js.syncDiff(this.state,o,s,i),l())}),this.onJoin((o,s,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:s,newPresences:i})}),this.onLeave((o,s,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:s,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){const s=this.cloneDeep(e),i=this.transformState(n),l={},u={};return this.map(s,(c,d)=>{i[c]||(u[c]=d)}),this.map(i,(c,d)=>{const h=s[c];if(h){const f=d.map(_=>_.presence_ref),x=h.map(_=>_.presence_ref),y=d.filter(_=>x.indexOf(_.presence_ref)<0),b=h.filter(_=>f.indexOf(_.presence_ref)<0);y.length>0&&(l[c]=y),b.length>0&&(u[c]=b)}else l[c]=d}),this.syncDiff(s,{joins:l,leaves:u},r,o)}static syncDiff(e,n,r,o){const{joins:s,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(s,(l,u)=>{var c;const d=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(u),d.length>0){const h=e[l].map(x=>x.presence_ref),f=d.filter(x=>h.indexOf(x.presence_ref)<0);e[l].unshift(...f)}r(l,d,u)}),this.map(i,(l,u)=>{let c=e[l];if(!c)return;const d=u.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=c,o(l,c,u),c.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const o=e[r];return"metas"in o?n[r]=o.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Jd||(Jd={}));var Cs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Cs||(Cs={}));var or;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(or||(or={}));class Ac{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new hl(this,Pn.join,this.params,this.timeout),this.rejoinTimer=new Hp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pn.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new js(this),this.broadcastEndpointURL=Jp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,o,s;if(this.socket.isConnected()||this.socket.connect(),this.state==bt.closed){const{config:{broadcast:i,presence:l,private:u}}=this.params,c=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(x=>x.filter))!==null&&o!==void 0?o:[],d=!!this.bindings[Cs.PRESENCE]&&this.bindings[Cs.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(x=>e==null?void 0:e(or.CHANNEL_ERROR,x)),this._onClose(()=>e==null?void 0:e(or.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:x})=>{var y;if(this.socket.setAuth(),x===void 0){e==null||e(or.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,_=(y=b==null?void 0:b.length)!==null&&y!==void 0?y:0,p=[];for(let m=0;m<_;m++){const g=b[m],{filter:{event:w,schema:E,table:D,filter:N}}=g,S=x&&x[m];if(S&&S.event===w&&S.schema===E&&S.table===D&&S.filter===N)p.push(Object.assign(Object.assign({},g),{id:S.id}));else{this.unsubscribe(),this.state=bt.errored,e==null||e(or.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(or.SUBSCRIBED);return}}).receive("error",x=>{this.state=bt.errored,e==null||e(or.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(or.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===bt.joined&&e===Cs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:i}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=c.body)===null||o===void 0?void 0:o.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var i,l,u;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=bt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new hl(this,Pn.leave,{},e),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const o=new AbortController,s=setTimeout(()=>o.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(s),i}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new hl(this,e,n,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>xy){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,s;const i=e.toLocaleLowerCase(),{close:l,error:u,leave:c,join:d}=Pn;if(r&&[l,u,c,d].indexOf(i)>=0&&r!==this._joinRef())return;let f=this._onMessage(i,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(x=>{var y,b,_;return((y=x.filter)===null||y===void 0?void 0:y.event)==="*"||((_=(b=x.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===i}).map(x=>x.callback(f,r)):(s=this.bindings[i])===null||s===void 0||s.filter(x=>{var y,b,_,p,m,g;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in x){const w=x.id,E=(y=x.filter)===null||y===void 0?void 0:y.event;return w&&((b=n.ids)===null||b===void 0?void 0:b.includes(w))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const w=(m=(p=x==null?void 0:x.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return w==="*"||w===((g=n==null?void 0:n.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===i}).map(x=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:b,table:_,commit_timestamp:p,type:m,errors:g}=y;f=Object.assign(Object.assign({},{schema:b,table:_,commit_timestamp:p,eventType:m,new:{},old:{},errors:g}),this._getPayloadRecords(y))}x.callback(f,r)})}_isClosed(){return this.state===bt.closed}_isJoined(){return this.state===bt.joined}_isJoining(){return this.state===bt.joining}_isLeaving(){return this.state===bt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const o=e.toLocaleLowerCase(),s={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(s):this.bindings[o]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var s;return!(((s=o.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Ac.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Pn.close,{},e)}_onError(e){this._on(Pn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Hd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Hd(e.columns,e.old_record)),n}}const pl=()=>{},wi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Cy=[1e3,2e3,5e3,1e4],Ry=1e4,Ny=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Dy{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bu,this.transport=null,this.heartbeatIntervalMs=wi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=pl,this.ref=0,this.reconnectTimer=null,this.logger=pl,this.conn=null,this.sendBuffer=[],this.serializer=new by,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...i)=>ei(async()=>{const{default:l}=await Promise.resolve().then(()=>Qo);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...i)=>s(...i)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${wu.websocket}`,this.httpEndpoint=Jp(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=py.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yy}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Es.connecting:return Qr.Connecting;case Es.open:return Qr.Open;case Es.closing:return Qr.Closing;default:return Qr.Closed}}isConnected(){return this.connectionState()===Qr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(s=>s.topic===r);if(o)return o;{const s=new Ac(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:o,ref:s}=e,i=()=>{this.encode(e,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${n} ${r} (${s})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(vy,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},wi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:s,ref:i}=n,l=i?`(${i})`:"",u=s.status||"";this.log("receive",`${u} ${r} ${o} ${l}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(o,s,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Pn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${r}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Ny],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const o={access_token:n,version:gy};n&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(Pn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Hp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},wi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,o,s,i,l,u,c,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:bu,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:wi.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:pl,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:h=>Cy[h-1]||Ry,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Tc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function wt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Ay extends Tc{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _u extends Tc{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Ty=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const Yp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ei(async()=>{const{default:r}=await Promise.resolve().then(()=>Qo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Oy=()=>Ty(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ei(()=>Promise.resolve().then(()=>Qo),void 0)).Response:Response}),ku=t=>{if(Array.isArray(t))return t.map(n=>ku(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[o]=ku(r)}),e},Ly=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var ho=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const ml=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Py=(t,e,n)=>ho(void 0,void 0,void 0,function*(){const r=yield Oy();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{const s=t.status||500,i=(o==null?void 0:o.statusCode)||s+"";e(new Ay(ml(o),s,i))}).catch(o=>{e(new _u(ml(o),o))}):e(new _u(ml(t),t))}),$y=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?o:(Ly(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function ni(t,e,n,r,o,s){return ho(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(n,$y(e,r,o,s)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>i(u)).catch(u=>Py(u,l,r))})})}function fa(t,e,n,r){return ho(this,void 0,void 0,function*(){return ni(t,"GET",e,n,r)})}function Hn(t,e,n,r,o){return ho(this,void 0,void 0,function*(){return ni(t,"POST",e,r,o,n)})}function Eu(t,e,n,r,o){return ho(this,void 0,void 0,function*(){return ni(t,"PUT",e,r,o,n)})}function Iy(t,e,n,r){return ho(this,void 0,void 0,function*(){return ni(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Qp(t,e,n,r,o){return ho(this,void 0,void 0,function*(){return ni(t,"DELETE",e,r,o,n)})}var Gt=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const My={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Yd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class By{constructor(e,n={},r,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Yp(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,o){return Gt(this,void 0,void 0,function*(){try{let s;const i=Object.assign(Object.assign({},Yd),o);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const u=i.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),u&&s.append("metadata",this.encodeMetadata(u)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl),u&&s.append("metadata",this.encodeMetadata(u))):(s=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),o!=null&&o.headers&&(l=Object.assign(Object.assign({},l),o.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),h=yield(e=="PUT"?Eu:Hn)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wt(s))return{data:null,error:s};throw s}})}upload(e,n,r){return Gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return Gt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",n);try{let u;const c=Object.assign({upsert:Yd.upsert},o),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",c.cacheControl)):(u=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield Eu(this.fetch,l.toString(),u,{headers:d});return{data:{path:s,fullPath:h.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(wt(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,n){return Gt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const s=yield Hn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+s.url),l=i.searchParams.get("token");if(!l)throw new Tc("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Gt(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(wt(o))return{data:null,error:o};throw o}})}copy(e,n,r){return Gt(this,void 0,void 0,function*(){try{return{data:{path:(yield Hn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(wt(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return Gt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),s=yield Hn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(wt(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return Gt(this,void 0,void 0,function*(){try{const o=yield Hn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${s}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(wt(o))return{data:null,error:o};throw o}})}download(e,n){return Gt(this,void 0,void 0,function*(){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=s?`?${s}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield fa(this.fetch,`${this.url}/${o}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(wt(l))return{data:null,error:l};throw l}})}info(e){return Gt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield fa(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ku(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}exists(e){return Gt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Iy(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r)&&r instanceof _u){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),o=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&o.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&o.push(u);let c=o.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return Gt(this,void 0,void 0,function*(){try{return{data:yield Qp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Gt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},My),n),{prefix:e||""});return{data:yield Hn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(wt(o))return{data:null,error:o};throw o}})}listV2(e,n){return Gt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Hn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Uy="2.12.1",zy={"X-Client-Info":`storage-js/${Uy}`};var mo=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class Fy{constructor(e,n={},r,o){this.shouldThrowOnError=!1;const s=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},zy),n),this.fetch=Yp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return mo(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(wt(e))return{data:null,error:e};throw e}})}getBucket(e){return mo(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return mo(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return mo(this,void 0,void 0,function*(){try{return{data:yield Eu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return mo(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return mo(this,void 0,void 0,function*(){try{return{data:yield Qp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}}class Wy extends Fy{constructor(e,n={},r,o){super(e,n,r,o)}from(e){return new By(this.url,this.headers,e,this.fetch)}}const Vy="2.57.4";let ms="";typeof Deno<"u"?ms="deno":typeof document<"u"?ms="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ms="react-native":ms="node";const Gy={"X-Client-Info":`supabase-js-${ms}/${Vy}`},qy={headers:Gy},Hy={schema:"public"},Ky={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Jy={};var Yy=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const Qy=t=>{let e;return t?e=t:typeof fetch>"u"?e=$p:e=fetch,(...n)=>e(...n)},Xy=()=>typeof Headers>"u"?Ip:Headers,Zy=(t,e,n)=>{const r=Qy(n),o=Xy();return(s,i)=>Yy(void 0,void 0,void 0,function*(){var l;const u=(l=yield e())!==null&&l!==void 0?l:t;let c=new o(i==null?void 0:i.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),r(s,Object.assign(Object.assign({},i),{headers:c}))})};var ev=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};function tv(t){return t.endsWith("/")?t:t+"/"}function nv(t,e){var n,r;const{db:o,auth:s,realtime:i,global:l}=t,{db:u,auth:c,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},u),o),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>ev(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function rv(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(tv(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Xp="2.71.1",bo=30*1e3,ju=3,gl=ju*bo,ov="http://localhost:9999",sv="supabase.auth.token",iv={"X-Client-Info":`gotrue-js/${Xp}`},Cu="X-Supabase-Api-Version",Zp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},av=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,lv=10*60*1e3;class Oc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ne(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class uv extends Oc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function cv(t){return Ne(t)&&t.name==="AuthApiError"}class em extends Oc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Wr extends Oc{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}}class Sr extends Wr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function dv(t){return Ne(t)&&t.name==="AuthSessionMissingError"}class Si extends Wr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _i extends Wr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ki extends Wr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function fv(t){return Ne(t)&&t.name==="AuthImplicitGrantRedirectError"}class Qd extends Wr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ru extends Wr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function yl(t){return Ne(t)&&t.name==="AuthRetryableFetchError"}class Xd extends Wr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Nu extends Wr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ha="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Zd=` 	
\r=`.split(""),hv=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Zd.length;e+=1)t[Zd[e].charCodeAt(0)]=-2;for(let e=0;e<ha.length;e+=1)t[ha[e].charCodeAt(0)]=e;return t})();function ef(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ha[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ha[r]),e.queuedBits-=6}}function tm(t,e,n){const r=hv[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function tf(t){const e=[],n=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},s=i=>{gv(i,r,n)};for(let i=0;i<t.length;i+=1)tm(t.charCodeAt(i),o,s);return e.join("")}function pv(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function mv(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}pv(r,e)}}function gv(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function yv(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)tm(t.charCodeAt(o),n,r);return new Uint8Array(e)}function vv(t){const e=[];return mv(t,n=>e.push(n)),new Uint8Array(e)}function xv(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};return t.forEach(o=>ef(o,n,r)),ef(null,n,r),e.join("")}function bv(t){return Math.round(Date.now()/1e3)+t}function wv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Tn=()=>typeof window<"u"&&typeof document<"u",qr={tested:!1,writable:!1},nm=()=>{if(!Tn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qr.tested)return qr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),qr.tested=!0,qr.writable=!0}catch{qr.tested=!0,qr.writable=!1}return qr.writable};function Sv(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,s)=>{e[s]=o})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}const rm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ei(async()=>{const{default:r}=await Promise.resolve().then(()=>Qo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},_v=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",wo=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Hr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},br=async(t,e)=>{await t.removeItem(e)};class Pa{constructor(){this.promise=new Pa.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Pa.promiseConstructor=Promise;function vl(t){const e=t.split(".");if(e.length!==3)throw new Nu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!av.test(e[r]))throw new Nu("JWT not in base64url format");return{header:JSON.parse(tf(e[0])),payload:JSON.parse(tf(e[1])),signature:yv(e[2]),raw:{header:e[0],payload:e[1]}}}async function kv(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ev(t,e){return new Promise((r,o)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await t(s);if(!e(s,null,i)){r(i);return}}catch(i){if(!e(s,i)){o(i);return}}})()})}function jv(t){return("0"+t.toString(16)).substr(-2)}function Cv(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let s=0;s<56;s++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,jv).join("")}async function Rv(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(s=>String.fromCharCode(s)).join("")}async function Nv(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Rv(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function go(t,e,n=!1){const r=Cv();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await wo(t,`${e}-code-verifier`,o);const s=await Nv(r);return[s,r===s?"plain":"s256"]}const Dv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Av(t){const e=t.headers.get(Cu);if(!e||!e.match(Dv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Tv(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Ov(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Lv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yo(t){if(!Lv.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xl(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function nf(t){return JSON.parse(JSON.stringify(t))}var Pv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Yr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),$v=[502,503,504];async function rf(t){var e;if(!_v(t))throw new Ru(Yr(t),0);if($v.includes(t.status))throw new Ru(Yr(t),t.status);let n;try{n=await t.json()}catch(s){throw new em(Yr(s),s)}let r;const o=Av(t);if(o&&o.getTime()>=Zp["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Xd(Yr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Sr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0))throw new Xd(Yr(n),t.status,n.weak_password.reasons);throw new uv(Yr(n),t.status||500,r)}const Iv=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function Oe(t,e,n,r){var o;const s=Object.assign({},r==null?void 0:r.headers);s[Cu]||(s[Cu]=Zp["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const i=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",u=await Mv(t,e,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function Mv(t,e,n,r,o,s){const i=Iv(e,r,o,s);let l;try{l=await t(n,Object.assign({},i))}catch(u){throw console.error(u),new Ru(Yr(u),0)}if(l.ok||await rf(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(u){await rf(u)}}function nr(t){var e;let n=null;Fv(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=bv(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function of(t){const e=nr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Cr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Bv(t){return{data:t,error:null}}function Uv(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s}=t,i=Pv(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s},u=Object.assign({},i);return{data:{properties:l,user:u},error:null}}function zv(t){return t}function Fv(t){return t.access_token&&t.refresh_token&&t.expires_in}const bl=["global","local","others"];var Wv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};class Vv{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=rm(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=bl[0]){if(bl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bl.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Cr})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Wv(e,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Uv,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ne(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Cr})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,o,s,i,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:zv});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,x=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return x.length>0&&(x.forEach(y=>{const b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(y.split(";")[1].split("=")[1]);c[`${_}Page`]=b}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Ne(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){yo(e);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Cr})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){yo(e);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Cr})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){yo(e);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Cr})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){yo(e.userId);try{const{data:n,error:r}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _deleteFactor(e){yo(e.userId),yo(e.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}}function sf(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Gv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const vo={debug:!!(globalThis&&nm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class om extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class qv extends om{}async function Hv(t,e,n){vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),vo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new qv(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(vo.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Gv();const Kv={url:ov,storageKey:sv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:iv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function af(t,e,n){return await n()}const xo={};class Hs{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Hs.nextInstanceID,Hs.nextInstanceID+=1,this.instanceID>0&&Tn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Kv),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Vv({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=rm(o.fetch),this.lock=o.lock||af,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Tn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Hv:this.lock=af,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:nm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=sf(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=sf(this.memoryStorage)),Tn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=xo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){xo[this.storageKey]=Object.assign(Object.assign({},xo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=xo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){xo[this.storageKey]=Object.assign(Object.assign({},xo[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Xp}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Sv(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Tn()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),fv(s)){const u=(e=s.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ne(n)?{error:n}:{error:new em("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,o;try{const s=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:nr}),{data:i,error:l}=s;if(l||!i)return{data:{user:null,session:null},error:l};const u=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(Ne(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,o;try{let s;if("email"in e){const{email:d,password:h,options:f}=e;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await go(this.storage,this.storageKey)),s=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:x,code_challenge_method:y},xform:nr})}else if("phone"in e){const{phone:d,password:h,options:f}=e;s=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(o=f==null?void 0:f.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:nr})}else throw new _i("You must provide either an email or phone number and a password");const{data:i,error:l}=s;if(l||!i)return{data:{user:null,session:null},error:l};const u=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(Ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:i,options:l}=e;n=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:of})}else if("phone"in e){const{phone:s,password:i,options:l}=e;n=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:of})}else throw new _i("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Si}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(Ne(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,o,s,i,l,u,c,d,h,f,x;let y,b;if("message"in e)y=e.message,b=e.signature;else{const{chain:_,wallet:p,statement:m,options:g}=e;let w;if(Tn())if(typeof p=="object")w=p;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))w=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=p}const E=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const D=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),m?{statement:m}:null));let N;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")N=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)N=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)y=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),b=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${E.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(o=(r=g==null?void 0:g.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=g==null?void 0:g.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const D=await w.signMessage(new TextEncoder().encode(y),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=D}}try{const{data:_,error:p}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:xv(b)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:nr});if(p)throw p;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Si}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:p})}catch(_){if(Ne(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const n=await Hr(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/");try{const{data:s,error:i}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:nr});if(await br(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Si}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:i})}catch(s){if(Ne(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:o,access_token:s,nonce:i}=e,l=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:nr}),{data:u,error:c}=l;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new Si}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(n){if(Ne(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,o,s,i;try{if("email"in e){const{email:l,options:u}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await go(this.storage,this.storageKey));const{error:h}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:u}=e,{data:c,error:d}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=u==null?void 0:u.data)!==null&&o!==void 0?o:{},create_user:(s=u==null?void 0:u.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(i=u==null?void 0:u.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new _i("You must provide either an email or phone number.")}catch(l){if(Ne(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let o,s;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:nr});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const u=i.session,c=i.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(o){if(Ne(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,r,o;try{let s=null,i=null;return this.flowType==="pkce"&&([s,i]=await go(this.storage,this.storageKey)),await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:Bv})}catch(s){if(Ne(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Sr;const{error:o}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(Ne(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:s}=e,{error:i}=await Oe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:o,options:s}=e,{data:i,error:l}=await Oe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new _i("You must provide either an email or phone number and a type")}catch(n){if(Ne(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Hr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<gl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const i=await Hr(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=xl()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,c,d)=>(!i&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:e},error:null}}const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Cr}):await this._useSession(async n=>{var r,o,s;const{data:i,error:l}=n;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Sr}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:Cr})})}catch(n){if(Ne(n))return dv(n)&&(await this._removeSession(),await br(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:o,error:s}=r;if(s)throw s;if(!o.session)throw new Sr;const i=o.session;let l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=await go(this.storage,this.storageKey));const{data:c,error:d}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:i.access_token,xform:Cr});if(d)throw d;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Sr;const n=Date.now()/1e3;let r=n,o=!0,s=null;const{payload:i}=vl(e.access_token);if(i.exp&&(r=i.exp,o=r<=n),o){const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:u}=await this._getUser(e.access_token);if(u)throw u;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(Ne(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:i,error:l}=n;if(l)throw l;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Sr;const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ne(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Tn())throw new ki("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ki(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Qd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ki("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Qd("No code detected.");const{data:m,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:s,refresh_token:i,expires_in:l,expires_at:u,token_type:c}=e;if(!s||!l||!i||!c)throw new ki("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;u&&(f=parseInt(u));const x=f-d;x*1e3<=bo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);const y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);const{data:b,error:_}=await this._getUser(s);if(_)throw _;const p={provider_token:r,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:i,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(r){if(Ne(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Hr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:s}=n;if(s)return{error:s};const i=(r=o.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(cv(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await br(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=wv(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,o;try{const{data:{session:s},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await go(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Ne(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:o}=await this._useSession(async s=>{var i,l,u,c,d;const{data:h,error:f}=s;if(f)throw f;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",x,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return Tn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ne(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,o;const{data:s,error:i}=n;if(i)throw i;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Ev(async o=>(o>0&&await kv(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:nr})),(o,s)=>{const i=200*Math.pow(2,o);return s&&yl(s)&&Date.now()+i-r<bo})}catch(r){if(this._debug(n,"error",r),Ne(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Tn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await Hr(this.storage,this.storageKey);if(o&&this.userStorage){let i=await Hr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:o.user},await wo(this.userStorage,this.storageKey+"-user",i)),o.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:xl()}else if(o&&!o.user&&!o.user){const i=await Hr(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(o.user=i.user,await br(this.storage,this.storageKey+"-user"),await wo(this.storage,this.storageKey,o)):o.user=xl()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const s=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<gl;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${gl}s`),s){if(this.autoRefreshToken&&o.refresh_token){const{error:i}=await this._callRefreshToken(o.refresh_token);i&&(console.error(i),yl(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(o.access_token);!l&&(i!=null&&i.user)?(o.user=i.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Sr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Pa;const{data:s,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new Sr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(o,"error",s),Ne(s)){const i={session:null,error:s};return yl(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(u){s.push(u)}});if(await Promise.all(i),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await wo(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const s=nf(o);await wo(this.storage,this.storageKey,s)}else{const o=nf(n);await wo(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await br(this.storage,this.storageKey),await br(this.storage,this.storageKey+"-code-verifier"),await br(this.storage,this.storageKey+"-user"),this.userStorage&&await br(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),bo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/bo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${bo}ms, refresh threshold is ${ju} ticks`),o<=ju&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof om)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,i]=await go(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);o.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;return s?{data:null,error:s}:await Oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,o;const{data:s,error:i}=n;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:c}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((o=u==null?void 0:u.totp)===null||o===void 0)&&o.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;if(s)return{data:null,error:s};const{data:i,error:l}=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;return s?{data:null,error:s}:await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],o=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),s=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:o,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=vl(o.access_token);let l=null;i.aal&&(l=i.aal);let u=l;((r=(n=o.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+lv>o)return r;const{data:s,error:i}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,r=s.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:x,error:y}=await this.getSession();if(y||!x.session)return{data:null,error:y};r=x.session.access_token}const{header:o,payload:s,signature:i,raw:{header:l,payload:u}}=vl(r);n!=null&&n.allowExpired||Tv(s.exp);const c=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:s,header:o,signature:i},error:null}}const d=Ov(o.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,vv(`${l}.${u}`)))throw new Nu("Invalid JWT signature");return{data:{claims:s,header:o,signature:i},error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}}}Hs.nextInstanceID=0;const Jv=Hs;class Yv extends Jv{constructor(e){super(e)}}var Qv=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class Xv{constructor(e,n,r){var o,s,i;this.supabaseUrl=e,this.supabaseKey=n;const l=rv(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:Hy,realtime:Jy,auth:Object.assign(Object.assign({},Ky),{storageKey:u}),global:qy},d=nv(r??{},c);this.storageKey=(o=d.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=Zy(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new hy(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Wy(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new G0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Qv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:s,storageKey:i,flowType:l,lock:u,debug:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yv({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:s,flowType:l,lock:u,debug:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Dy(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Zv=(t,e,n)=>new Xv(t,e,n);function ex(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ex()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const tx="https://wjylzxsfevdlhqunvfqc.supabase.co",nx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqeWx6eHNmZXZkbGhxdW52ZnFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2ODMwOTEsImV4cCI6MjA3NDI1OTA5MX0.SuB0gd7-gefwpUHFnKsupDgo8P2VeLuMbdlsU6AMrLw",lf=globalThis,$e=lf.__sg_supabase||(lf.__sg_supabase=Zv(tx,nx,{auth:{persistSession:!0,autoRefreshToken:!0,storageKey:"salesgame-auth"},realtime:{params:{eventsPerSecond:10}}}));function rx(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function Ks(){const t="sg_tab_player_id";let e=sessionStorage.getItem(t);return e||(e=rx(),sessionStorage.setItem(t,e)),e}function lo(t="Jogador"){const e="sg_tab_player_name";let n=sessionStorage.getItem(e);return n||(n=t,sessionStorage.setItem(e,n)),n}function ox(t){return sessionStorage.setItem("sg_tab_player_name",t??"Jogador"),t}const sx="/dynamic-data-visualization-3d.jpg",ix="/SalesGame_Logo-removebg-preview.png",ax="/Multiplier-Copia.png",lx="/WhatsApp_Image_2025-06-24_at_16.47.00-removebg-preview.png";function ux({onEnter:t}){const[e,n]=k.useState(lo("")),r=k.useRef(null);k.useEffect(()=>{var i;(i=r.current)==null||i.focus()},[]);function o(){const i=(e||"").trim();i&&(ox(i),t==null||t(i))}function s(i){i.key==="Enter"&&o()}return a.jsxs("div",{className:"start",children:[a.jsx("img",{className:"startBg",src:sx,alt:""}),a.jsx("div",{className:"startShade"}),a.jsx("div",{className:"startHeader",children:a.jsx("img",{className:"startLogo",src:ix,alt:"Sales GAME"})}),a.jsx("div",{className:"startCenter",children:a.jsxs("div",{className:"startCard",children:[a.jsx("label",{className:"startLabel",htmlFor:"playerName",children:"Nome do Jogador"}),a.jsx("input",{id:"playerName",ref:r,className:"startInput",placeholder:"Digite seu nome",value:e,onChange:i=>n(i.target.value),onKeyDown:s,maxLength:30}),a.jsx("button",{className:"startBtn",onClick:o,children:"Entrar"})]})}),a.jsxs("div",{className:"startFooter",children:[a.jsxs("div",{className:"startLinks",children:[a.jsx("div",{children:"@multiplier.educacao"}),a.jsx("div",{children:"https://multipliereducacao.com.br/"})]}),a.jsx("div",{className:"startBrand",children:a.jsx("img",{className:"startBrandLogo",src:ax,alt:"Multiplier"})})]}),a.jsx("img",{className:"startCoach",src:lx,alt:"",draggable:"false"})]})}async function cx(){const{data:t,error:e}=await $e.from("lobbies").select(`
      id,
      name,
      max_players,
      status,
      created_at,
      lobby_players!left(count)
    `).order("created_at",{ascending:!0});if(e)throw e;return(t||[]).map(n=>{var r,o;return{id:n.id,name:n.name,max:n.max_players,status:n.status||"open",players:(((o=(r=n.lobby_players)==null?void 0:r[0])==null?void 0:o.count)??0)|0}})}function dx(t){const e=$e.channel("lobbies-list").on("postgres_changes",{event:"*",schema:"public",table:"lobbies"},()=>t==null?void 0:t()).on("postgres_changes",{event:"*",schema:"public",table:"lobby_players"},()=>t==null?void 0:t()).subscribe();return()=>$e.removeChannel(e)}async function fx({name:t,hostId:e,max:n=4}){if(!e)throw new Error("hostId obrigatrio em createLobby");const o={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,name:t,host_id:e,max_players:Number(n)||4,status:"open",created_at:new Date().toISOString()},{data:s,error:i}=await $e.from("lobbies").insert(o).select("id").single();if(i)throw i;return s.id}async function Du({lobbyId:t,playerId:e,playerName:n,ready:r=!1}){const{data:o,error:s}=await $e.from("lobbies").select("id, max_players, status, host_id").eq("id",t).single();if(s)throw s;if(o.status!=="open")throw new Error("Sala fechada.");const{count:i,error:l}=await $e.from("lobby_players").select("lobby_id",{count:"exact",head:!0}).eq("lobby_id",t);if(l)throw l;if((i||0)>=o.max_players)throw new Error("Sala cheia.");try{window.__MY_UID=e}catch{}const{error:u}=await $e.from("lobby_players").upsert({lobby_id:t,player_id:e,player_name:n,ready:!!r,joined_at:new Date().toISOString()},{onConflict:"lobby_id,player_id"});if(u)throw u;o.host_id||await $e.from("lobbies").update({host_id:e}).eq("id",t)}async function uf({lobbyId:t,playerId:e}){var l;const{data:n,error:r}=await $e.from("lobbies").select("id, host_id").eq("id",t).single();if(r)throw r;const{error:o}=await $e.from("lobby_players").delete().match({lobby_id:t,player_id:e});if(o)throw o;const{data:s,error:i}=await $e.from("lobby_players").select("player_id, joined_at").eq("lobby_id",t).order("joined_at",{ascending:!0});if(i)throw i;if(!s||s.length===0){await $e.from("lobbies").delete().eq("id",t);return}if((n==null?void 0:n.host_id)===e){const u=(l=s[0])==null?void 0:l.player_id;u&&await $e.from("lobbies").update({host_id:u}).eq("id",t)}}async function cf(t){const{data:e,error:n}=await $e.from("lobby_players").select("player_id, player_name, ready, joined_at").eq("lobby_id",t).order("joined_at",{ascending:!0});if(n)throw n;return e||[]}async function hx({lobbyId:t,playerId:e,ready:n}){const{error:r}=await $e.from("lobby_players").update({ready:n}).match({lobby_id:t,player_id:e});if(r)throw r}async function px(t,e,n){return hx({lobbyId:t,playerId:e,ready:n})}async function mx({lobbyId:t,playerId:e,playerName:n}){const{error:r}=await $e.from("lobby_players").update({player_name:n}).match({lobby_id:t,player_id:e});if(r)throw r}async function df(t,e){const{error:n}=await $e.from("lobbies").update({status:e}).eq("id",t);if(n)throw n}function gx(t,e){let n=0;const r=()=>{n&&cancelAnimationFrame(n),n=requestAnimationFrame(()=>e==null?void 0:e())},o=$e.channel(`lobby-${t}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},s=>{console.debug("[rt] lobby_players:INSERT",s.new),r()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},s=>{console.debug("[rt] lobby_players:UPDATE",s.new),r()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},s=>{console.debug("[rt] lobby_players:DELETE",s.old),r()}).on("postgres_changes",{event:"*",schema:"public",table:"lobbies",filter:`id=eq.${t}`},s=>{console.debug("[rt] lobbies:*",s.new||s.old),r()}).subscribe();return()=>{n&&cancelAnimationFrame(n),$e.removeChannel(o)}}async function yx(t){const{data:e,error:n}=await $e.from("lobbies").select("id,name,status,max_players,host_id,created_at").eq("id",t).single();if(n)throw n;return e}async function vx({lobbyId:t}){var o;const{data:e}=await $e.from("lobby_players").select("player_id, player_name, ready").eq("lobby_id",t),{data:n,error:r}=await $e.from("matches").insert({lobby_id:t,host_id:((o=e==null?void 0:e[0])==null?void 0:o.player_id)||null,state:{players:e},created_at:new Date().toISOString()}).select("id").single();if(r)throw r;return n}async function xx(t){const{data:e,error:n}=await $e.from("matches").select("id, lobby_id, created_at").eq("lobby_id",t).order("created_at",{ascending:!1}).limit(1);if(n)throw n;return(e==null?void 0:e[0])||null}async function wl({roomCode:t,playerId:e}){if(!t||!e){console.log("[leaveRoom] Parmetros invlidos:",{roomCode:t,playerId:e});return}try{console.log(`[leaveRoom] Tentando remover jogador ${e} da sala ${t}`);const{data:n,error:r}=await $e.from("lobbies").select("id, name, host_id").eq("id",t).single();if(r){console.warn("[leaveRoom] Erro ao buscar lobby:",r);return}if(!n){console.log(`[leaveRoom] Lobby ${t} no encontrado`);return}console.log("[leaveRoom] Lobby encontrado:",n);const{error:o}=await $e.from("lobby_players").delete().match({lobby_id:t,player_id:e});o?console.warn("[leaveRoom] Erro ao remover jogador:",o):console.log(`[leaveRoom] Jogador ${e} removido do lobby ${t}`);const{data:s,error:i}=await $e.from("lobby_players").select("player_id").eq("lobby_id",t);if(i){console.warn("[leaveRoom] Erro ao contar jogadores restantes:",i);return}if(!s||s.length===0){const{error:l}=await $e.from("lobbies").delete().eq("id",t);l?console.warn("[leaveRoom] Erro ao deletar lobby vazio:",l):console.log(`[leaveRoom] Lobby ${t} deletado com sucesso (sem jogadores)`)}else if(console.log(`[leaveRoom] Jogador ${e} saiu do lobby ${t}. Restam ${s.length} jogadores.`),n.host_id===e&&s.length>0){const l=s[0].player_id,{error:u}=await $e.from("lobbies").update({host_id:l}).eq("id",t);u?console.warn("[leaveRoom] Erro ao transferir host:",u):console.log(`[leaveRoom] Host transferido para ${l}`)}}catch(n){console.error("[leaveRoom] Erro inesperado:",n)}}function bx({onEnterRoom:t}){const[e,n]=k.useState([]),[r,o]=k.useState(!1);async function s(){o(!0);try{const c=await cx();n(c)}finally{o(!1)}}k.useEffect(()=>(s(),dx(()=>s())),[]);async function i(){const c=lo("Jogador"),d=`Sala de ${c}`,h=prompt("Nome do lobby:",d)||d,f=Ks();try{const x=await fx({name:h,hostId:f,max:4});await Du({lobbyId:x,playerId:f,playerName:c,ready:!1}),t==null||t(x)}catch(x){alert(x.message||"No foi possvel criar o lobby."),await s()}}async function l(c){try{const d=lo("Jogador"),h=Ks();await Du({lobbyId:c,playerId:h,playerName:d,ready:!1}),t==null||t(c)}catch(d){alert(d.message||"No foi possvel entrar no lobby.")}}const u={page:{minHeight:"100vh",background:"#0f0f12",color:"#e9ecf1",padding:"32px 16px",display:"flex",justifyContent:"center"},container:{width:"100%",maxWidth:980},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:16,marginBottom:16,flexWrap:"wrap"},title:{fontSize:28,fontWeight:800,color:"#fff"},actions:{display:"flex",gap:10},btn:{padding:"12px 16px",border:0,borderRadius:12,fontWeight:800,cursor:"pointer"},btnPrimary:{background:"#4f46e5",color:"#fff",boxShadow:"0 8px 24px rgba(79,70,229,.25)"},btnSecondary:{background:"#20222a",color:"#fff",border:"1px solid #2b2e38"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:14},card:{background:"linear-gradient(180deg, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0.00) 100%)",border:"1px solid rgba(255,255,255,.08)",borderRadius:16,padding:16,display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 20px rgba(0,0,0,.25)"},cardHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},lobbyName:{fontSize:18,fontWeight:800,color:"#fff",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},meta:{fontSize:13,color:"#b8c0cc"},joinBtn:{padding:"10px 14px",borderRadius:10,border:0,background:"#7c3aed",color:"#fff",fontWeight:800,cursor:"pointer",boxShadow:"0 10px 20px rgba(124,58,237,.25)"},disabled:{opacity:.6,cursor:"not-allowed",filter:"grayscale(.3)"},empty:{marginTop:24,padding:18,borderRadius:12,border:"1px dashed rgba(255,255,255,.12)",color:"#c7cfdb",textAlign:"center"}};return a.jsx("div",{style:u.page,children:a.jsxs("div",{style:u.container,children:[a.jsxs("div",{style:u.headerRow,children:[a.jsx("h2",{style:u.title,children:"SalesGame  Lobbies"}),a.jsxs("div",{style:u.actions,children:[a.jsx("button",{style:{...u.btn,...u.btnPrimary},onClick:i,children:"Criar Lobby"}),a.jsx("button",{style:{...u.btn,...u.btnSecondary},onClick:s,disabled:r,children:r?"Atualizando":"Atualizar"})]})]}),e.length===0&&!r?a.jsxs("div",{style:u.empty,children:["Nenhuma sala criada ainda. Clique em ",a.jsx("b",{children:"Criar Lobby"})," para comear."]}):a.jsx("div",{style:u.grid,children:e.map(c=>{const d=(c.players??0)>=(c.max??4),h=(c.status??"open")==="open",f=d||!h;return a.jsxs("div",{style:u.card,children:[a.jsxs("div",{style:u.cardHeader,children:[a.jsx("div",{style:u.lobbyName,title:c.name,children:c.name}),a.jsxs("span",{style:u.meta,children:[c.players??0,"/",c.max??4]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("span",{style:u.meta,children:["status: ",c.status??"open"]}),a.jsx("button",{style:{...u.joinBtn,...f?u.disabled:{}},disabled:f,onClick:()=>l(c.id),title:f?d?"Sala cheia":"Sala no est aberta":"Entrar na sala",children:"Entrar"})]})]},c.id)})})]})})}function wx({lobbyId:t,onBack:e,onStartGame:n}){const r=Ks(),o=lo("Jogador"),[s,i]=k.useState(null),[l,u]=k.useState([]),[c,d]=k.useState(!0),[h,f]=k.useState(!1),x=k.useRef(!1),y=k.useRef(!0),b=k.useRef(!1),_=k.useRef(!1),p=k.useMemo(()=>(s==null?void 0:s.host_id)===r,[s,r]),m=k.useMemo(()=>l.find(v=>v.player_id===r),[l,r]),g=k.useMemo(()=>l.filter(v=>v.ready).length,[l]),w=p&&(s==null?void 0:s.status)==="open"&&l.length>=1&&g===l.length;console.log("[PlayersLobby] Debug:",{players:l.length,readyCount:g,lobbyStatus:s==null?void 0:s.status,amHost:p,canStart:w,meId:r,meName:o});async function E(v){if(_.current)return;const A=await xx(t);if(A!=null&&A.id){_.current=!0;const O=(v||[]).map(($,ne)=>({id:$.player_id,name:$.player_name,index:ne}));n==null||n({lobbyId:t,matchId:A==null?void 0:A.id,players:O,me:{id:r,name:o}})}}async function D(){y.current&&d(!0);try{console.log("[PlayersLobby] refreshAll - buscando lobby:",t);const[v,A]=await Promise.all([yx(t),cf(t)]);console.log("[PlayersLobby] refreshAll - lobby:",v,"players:",A),i(v),u(A);const O=A.find($=>$.player_id===r);if(console.log("[PlayersLobby] refreshAll - mine:",O,"meId:",r),!O&&!x.current&&(v==null?void 0:v.status)==="open"){console.log("[PlayersLobby] refreshAll - entrando na sala"),x.current=!0;try{await Du({lobbyId:t,playerId:r,playerName:o,ready:!1}),console.log("[PlayersLobby] refreshAll - entrada na sala bem-sucedida");const $=await cf(t);console.log("[PlayersLobby] refreshAll - jogadores aps entrada:",$),u($)}catch($){console.error("[PlayersLobby] refreshAll - erro ao entrar na sala:",$)}}if(O&&!b.current&&o&&O.player_name!==o){console.log("[PlayersLobby] refreshAll - sincronizando nome"),b.current=!0;try{await mx({lobbyId:t,playerId:r,playerName:o})}catch{}}await E(A)}catch(v){console.error("[PlayersLobby] refreshAll - erro:",v)}finally{y.current&&(y.current=!1,d(!1))}}k.useEffect(()=>{const v=()=>{uf({lobbyId:t,playerId:r}).catch(()=>{})},A=()=>v();return window.addEventListener("pagehide",A),window.addEventListener("beforeunload",A),()=>{window.removeEventListener("pagehide",A),window.removeEventListener("beforeunload",A)}},[t,r]),k.useEffect(()=>(x.current=!1,y.current=!0,b.current=!1,_.current=!1,D(),gx(t,()=>D())),[t]);async function N(v){if(!m)return;f(!0);const A=m.ready;u(O=>O.map($=>$.player_id===r?{...$,ready:v}:$));try{await px(t,r,v)}catch(O){u($=>$.map(ne=>ne.player_id===r?{...ne,ready:A}:ne)),console.error("setReadyUI failed",O)}finally{f(!1)}}async function S(){try{await uf({lobbyId:t,playerId:r})}finally{e==null||e()}}async function T(){if(!w)return;const v=s==null?void 0:s.status;await df(t,"locked");try{const A=await vx({lobbyId:t});_.current=!0;const O=l.map(($,ne)=>({id:$.player_id,name:$.player_name,index:ne}));n==null||n({lobbyId:t,matchId:A==null?void 0:A.id,players:O,me:{id:r,name:o}})}catch(A){console.error("startMatch failed",A),await df(t,v||"open")}}return a.jsx("div",{style:Ue.page,children:a.jsxs("div",{style:Ue.container,children:[a.jsxs("div",{style:Ue.top,children:[a.jsx("button",{style:Ue.backBtn,onClick:S,children:" Voltar"}),a.jsxs("h2",{style:Ue.title,children:["SalesGame  ",(s==null?void 0:s.name)||"..."]})]}),a.jsxs("div",{style:Ue.table,children:[a.jsxs("div",{style:Ue.thead,children:[a.jsx("div",{style:Ue.colPlayer,children:"Jogador"}),a.jsx("div",{style:Ue.colReady,children:"Pronto?"})]}),c?a.jsx("div",{style:Ue.loading,children:"Carregando..."}):l.map(v=>a.jsxs("div",{style:Ue.row,children:[a.jsxs("div",{style:Ue.colPlayer,children:[a.jsx("span",{style:Ue.avatar,children:(v.player_name||"?").slice(0,2).toLowerCase()}),a.jsx("span",{children:v.player_name||"Annimo"}),(s==null?void 0:s.host_id)===v.player_id&&a.jsx("span",{style:Ue.badgeHost,children:"Host"}),v.player_id===r&&a.jsx("span",{style:Ue.badgeYou,children:"Voc"})]}),a.jsx("div",{style:Ue.colReady,children:v.player_id===r?a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{style:{...Ue.btn,...m!=null&&m.ready?Ue.btnGhost:Ue.btnDark},onClick:()=>N(!1),disabled:h||!(m!=null&&m.ready),children:"No pronto"}),a.jsxs("button",{style:{...Ue.btn,...m!=null&&m.ready?Ue.btnPrimary:Ue.btnPurple},onClick:()=>N(!0),disabled:h||!!(m!=null&&m.ready),children:[" ",m!=null&&m.ready?"Pronto":"Ficar pronto"]})]}):a.jsx("span",{style:v.ready?Ue.pillReady:Ue.pillWait,children:v.ready?"Pronto":"Aguardando"})})]},v.player_id))]}),a.jsxs("div",{style:Ue.footer,children:[a.jsxs("div",{style:Ue.statusWrap,children:[a.jsx("span",{style:{...Ue.dot,background:(s==null?void 0:s.status)==="open"?"#22c55e":"#f59e0b"}}),a.jsxs("span",{children:["status: ",(s==null?void 0:s.status)||"..."]}),a.jsxs("span",{style:{marginLeft:12},children:["Prontos: ",g,"/",l.length]})]}),a.jsxs("div",{style:{display:"flex",gap:12},children:[a.jsx("button",{style:{...Ue.btn,...w?Ue.btnPrimary:Ue.disabled},onClick:T,disabled:!w,children:"Iniciar partida"}),a.jsx("button",{style:{...Ue.btn,...Ue.btnDark},onClick:S,children:"Sair da sala"})]})]})]})})}const Ue={page:{minHeight:"100vh",background:"#0f0f12",color:"#e9ecf1",padding:"24px 16px",display:"flex",justifyContent:"center"},container:{width:"100%",maxWidth:980},top:{display:"flex",alignItems:"center",gap:12,marginBottom:16},backBtn:{padding:"10px 14px",background:"#20222a",border:"1px solid #2b2e38",borderRadius:12,color:"#fff",cursor:"pointer"},title:{margin:0,fontSize:28,fontWeight:800},table:{background:"rgba(255,255,255,.02)",border:"1px solid rgba(255,255,255,.08)",borderRadius:16,overflow:"hidden"},thead:{display:"grid",gridTemplateColumns:"1fr 220px",padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,.08)",color:"#c7cfdb"},row:{display:"grid",gridTemplateColumns:"1fr 220px",padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,.06)"},colPlayer:{display:"flex",alignItems:"center",gap:10,minWidth:0},colReady:{display:"flex",alignItems:"center",justifyContent:"flex-end"},avatar:{width:28,height:28,borderRadius:999,background:"#1f2430",display:"grid",placeItems:"center",color:"#c7cfdb",fontSize:12,textTransform:"lowercase"},badgeHost:{marginLeft:8,fontSize:12,background:"#fde68a",color:"#111827",padding:"2px 8px",borderRadius:999,fontWeight:800},badgeYou:{marginLeft:8,fontSize:12,background:"#bfdbfe",color:"#111827",padding:"2px 8px",borderRadius:999,fontWeight:800},loading:{padding:16,color:"#c7cfdb"},pillReady:{background:"rgba(34,197,94,.15)",color:"#22c55e",padding:"6px 10px",borderRadius:999,fontWeight:700},pillWait:{background:"rgba(245,158,11,.14)",color:"#f59e0b",padding:"6px 10px",borderRadius:999,fontWeight:700},footer:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:16},statusWrap:{display:"flex",alignItems:"center",gap:6,color:"#c7cfdb"},dot:{width:8,height:8,borderRadius:"50%"},btn:{padding:"12px 16px",border:0,borderRadius:12,fontWeight:800,cursor:"pointer"},btnPrimary:{background:"#4f46e5",color:"#fff",boxShadow:"0 8px 24px rgba(79,70,229,.25)"},btnPurple:{background:"#7c3aed",color:"#fff"},btnDark:{background:"#20222a",color:"#fff",border:"1px solid #2b2e38"},btnGhost:{background:"transparent",color:"#e9ecf1",border:"1px solid rgba(255,255,255,.15)"},disabled:{opacity:.5,cursor:"not-allowed",filter:"grayscale(.25)"}},Sx="/board.jpg",Au=800,Tu=700,$a=[{nx:.9278494291885221,ny:.9008218764923216},{nx:.8188460351743289,ny:.9120818357755046},{nx:.7145819191607529,ny:.920124663834921},{nx:.6016291268127121,ny:.920124663834921},{nx:.49104597346497997,ny:.9233417950586875},{nx:.37888306078370876,ny:.920124663834921},{nx:.24618327676643012,ny:.9152989669992712},{nx:.21695772909595804,ny:.7994822429436751},{nx:.1853625424251774,ny:.7270967904089275},{nx:.1340203640851589,ny:.6354085505315806},{nx:.12851782363977485,ny:.5145797598627787},{nx:.12664165103189493,ny:.37392795883361923},{nx:.05347091932457786,ny:.30017152658662094},{nx:.051594746716697934,ny:.20240137221269297},{nx:.14540337711069418,ny:.12006861063464837},{nx:.23921200750469043,ny:.11663807890222985},{nx:.3771106941838649,ny:.11663807890222985},{nx:.5037523452157598,ny:.12006861063464837},{nx:.5975609756097561,ny:.1320754716981132},{nx:.5984990619136961,ny:.24356775300171526},{nx:.5065666041275797,ny:.2692967409948542},{nx:.398686679174484,ny:.27101200686106347},{nx:.28893058161350843,ny:.27101200686106347},{nx:.2373358348968105,ny:.3687821612349914},{nx:.23921200750469043,ny:.48027444253859347},{nx:.24202626641651032,ny:.5660377358490566},{nx:.26454033771106944,ny:.6895368782161235},{nx:.3330206378986867,ny:.6946826758147513},{nx:.35647279549718575,ny:.5831903945111492},{nx:.35647279549718575,ny:.4716981132075472},{nx:.3818011257035647,ny:.37735849056603776},{nx:.5225140712945591,ny:.3653516295025729},{nx:.6238273921200751,ny:.3687821612349914},{nx:.7223264540337712,ny:.40308747855917665},{nx:.6613508442776735,ny:.5197255574614065},{nx:.5300187617260788,ny:.5025728987993139},{nx:.4427767354596623,ny:.5694682675814752},{nx:.4896810506566604,ny:.6861063464837049},{nx:.6163227016885553,ny:.6861063464837049},{nx:.724202626641651,ny:.6861063464837049},{nx:.8273921200750469,ny:.660377358490566},{nx:.8395872420262664,ny:.5368782161234992},{nx:.8395872420262664,ny:.4339622641509434},{nx:.8283302063789869,ny:.313893653516295},{nx:.7176360225140713,ny:.30017152658662094},{nx:.6876172607879925,ny:.22298456260720412},{nx:.698874296435272,ny:.1457975986277873},{nx:.8020637898686679,ny:.11663807890222985},{nx:.8958724202626641,ny:.11663807890222985},{nx:.9446529080675422,ny:.21783876500857632},{nx:.9446529080675422,ny:.3293310463121784},{nx:.9380863039399625,ny:.45797598627787306},{nx:.9409005628517824,ny:.5711835334476844},{nx:.950281425891182,ny:.6723842195540308},{nx:.9540337711069419,ny:.7804459691252144}],Rs=$a.length;function sm(t,e,n){return{x:t.nx*e,y:t.ny*n}}$a.map(t=>[t.nx*Au,t.ny*Tu]);function _x({visible:t=!0,boardWidth:e,boardHeight:n}){return t?a.jsx("div",{className:"markersLayer",children:$a.map((r,o)=>{const{x:s,y:i}=sm(r,e,n);return a.jsx("div",{className:"marker",style:{left:s,top:i},title:`Casa ${o+1}`,children:o+1},o)})}):null}function kx({boardRef:t,expected:e=55,onFinish:n,initial:r=[]}){const[o,s]=k.useState(r);function i(x){if(!(t!=null&&t.current))return;const y=t.current.getBoundingClientRect(),b=x.clientX-y.left,_=x.clientY-y.top,p=b/y.width,m=_/y.height;s(g=>g.length>=e?g:[...g,{nx:p,ny:m}])}function l(){s(x=>x.slice(0,-1))}function u(){s([])}const c=k.useMemo(()=>JSON.stringify(o,null,2),[o]);async function d(){try{await navigator.clipboard.writeText(c),alert("Copiado para a rea de transferncia!")}catch{alert("No foi possvel copiar. Use o boto Baixar.")}}function h(){const x=new Blob([c],{type:"application/json"}),y=URL.createObjectURL(x),b=document.createElement("a");b.href=y,b.download="track-points-55.json",document.body.appendChild(b),b.click(),b.remove(),URL.revokeObjectURL(y)}function f(){n==null||n(o),console.log(`TRACK_POINTS_NORM (cole em src/data/track.js):
`,c),alert("Finalizado! O JSON foi impresso no console. Copie e cole em src/data/track.js")}return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"recLayer",onClick:i}),a.jsx("div",{className:"recDotsLayer",pointerEvents:"none",children:o.map((x,y)=>a.jsx("div",{className:"recDot",style:{left:`${x.nx*100}%`,top:`${x.ny*100}%`},title:`Casa ${y+1}`,children:y+1},y))}),a.jsxs("div",{className:"recToolbar",children:[a.jsxs("div",{className:"recInfo",children:[a.jsx("b",{children:"Gravando trilha"}),"  clique nas casas na ordem.",a.jsxs("span",{children:["Marcados: ",a.jsx("b",{children:o.length})," / ",e]})]}),a.jsxs("div",{className:"recBtns",children:[a.jsx("button",{onClick:l,disabled:!o.length,children:"Desfazer"}),a.jsx("button",{onClick:u,disabled:!o.length,children:"Limpar"}),a.jsx("button",{onClick:d,disabled:!o.length,children:"Copiar JSON"}),a.jsx("button",{onClick:h,disabled:!o.length,children:"Baixar .json"}),a.jsx("button",{onClick:f,disabled:o.length!==e,children:"Finalizar"})]})]})]})}const Ex=40,jx=1.15,Cx=3,Rx="0 8px 18px rgba(0,0,0,.35)",ff={cash:18e3,possibAt:0,clientsAt:0,faturamento:770,manutencao:1150,emprestimos:0,vendedoresComuns:0,fieldSales:0,insideSales:0,mixDBens:4e3,erpClientes:0,manualOnboarding:!0,azul:0,amarelo:0,roxo:0,gestores:0};function Nx({players:t,turnIdx:e,recordTrack:n=!1,matchId:r,me:o,onMeHud:s}){const i=k.useRef(null),[l,u]=k.useState({w:Au,h:Tu}),c=(o==null?void 0:o.id)||Ks(),d=lo("Jogador"),h=k.useMemo(()=>(t==null?void 0:t.find(w=>w.id===c))||null,[t,c]),f=(o==null?void 0:o.name)||(h==null?void 0:h.name)||d,x=(h==null?void 0:h.color)||"#6c5ce7",y=k.useMemo(()=>`sg_stats_v1:${r||"local"}:${c}`,[r,c]),[b,_]=k.useState(()=>{try{const w=sessionStorage.getItem(y);return w?JSON.parse(w):ff}catch{return ff}});k.useEffect(()=>{try{sessionStorage.setItem(y,JSON.stringify(b))}catch{}},[y,b]),k.useEffect(()=>{const w={id:c,name:f,color:x,cash:b.cash,possibAt:b.possibAt,clientsAt:b.clientsAt,matchId:r||"local"};s==null||s(w),document.dispatchEvent(new CustomEvent("sg:meHud",{detail:w}))},[c,f,x,b.cash,b.possibAt,b.clientsAt,r]),k.useLayoutEffect(()=>{if(!i.current)return;const w=i.current,E=new ResizeObserver(D=>{for(const N of D){const S=N.contentRect;u({w:S.width,h:S.height})}});return E.observe(w),()=>E.disconnect()},[]);const p=l.w/Au,m=l.h/Tu,g=Math.min(p,m);return a.jsxs("div",{className:"board",ref:i,children:[a.jsx("img",{src:Sx,alt:"Board",className:"boardImg"}),n&&a.jsx(kx,{boardRef:i,expected:55,onFinish:w=>{console.log("TRACK_POINTS_NORM (cole em src/data/track.js):",JSON.stringify(w,null,2))}}),!n&&a.jsxs(a.Fragment,{children:[a.jsx(_x,{visible:!1,boardWidth:l.w,boardHeight:l.h}),t.map((w,E)=>{const D=E===e,N=(w.pos%Rs+Rs)%Rs,S=$a[N],T=sm(S,l.w,l.h),v=E*12*g,O=Ex*g*(D?jx:1),$=Math.max(2,Cx*g),ne=["","","","","","","",""],oe=ne[E%ne.length];return a.jsx("div",{className:"token",style:{position:"absolute",left:T.x+v,top:T.y-v,transform:"translate(-50%, -50%)",width:O,height:O,borderRadius:"50%",background:w.color,border:`${$}px solid rgba(255,255,255,.95)`,boxShadow:Rx,pointerEvents:"none",display:"grid",placeItems:"center",color:"#000",fontWeight:900,userSelect:"none",zIndex:D?4:3,fontSize:`${Math.max(16,O*.6)}px`},title:`${w.name}  Casa ${N+1}`,"aria-label":`${w.name} est na casa ${N+1}`,children:D?"":oe},w.id)})]})]})}function Dx({totals:t,players:e}){return k.useEffect(()=>{console.groupCollapsed("[HUD] totals"),console.log(t),console.groupEnd()},[t]),a.jsxs("div",{className:"hud",children:[a.jsxs("div",{className:"panel",children:[a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Faturamento:"})," ",a.jsxs("span",{className:"pos",children:["$ ",t.faturamento]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Manuteno:"})," ",a.jsxs("span",{className:"neg",children:["$ ",t.manutencao]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Emprstimos:"})," ",a.jsxs("span",{children:["$ ",t.emprestimos]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Vendedores Comuns:"})," ",a.jsx("span",{children:t.vendedoresComuns})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Field Sales:"})," ",a.jsx("span",{children:t.fieldSales})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Inside Sales:"})," ",a.jsx("span",{children:t.insideSales})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Mix Produtos:"})," ",a.jsx("span",{children:t.mixProdutos})," ",a.jsx("b",{children:" Bens:"})," ",a.jsxs("span",{children:["$ ",t.bens]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"ERP/Sistemas:"})," ",a.jsx("span",{children:t.erpSistemas})," ",a.jsx("b",{children:" Clientes:"})," ",a.jsx("span",{children:t.clientes})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Manual Onboarding:"})," "]}),a.jsxs("div",{children:[a.jsx("b",{children:"Azul:"})," ",a.jsx("span",{children:t.az||0})," ",a.jsx("b",{children:" Amarelo: "}),a.jsx("span",{children:t.am||0})," ",a.jsx("b",{children:"Roxo:"})," ",a.jsx("span",{children:t.rox||0})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Gestores Comerciais:"})," ",a.jsx("span",{children:t.gestores??t.gestoresComerciais??0})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Capacidade:"})," ",a.jsx("span",{children:t.possibAt??0}),"  ",a.jsx("b",{children:"Em Atendimento:"})," ",a.jsx("span",{children:t.clientsAt??0})]})]}),a.jsxs("div",{className:"score",children:[a.jsx("div",{className:"title",children:"Placar"}),e.map(n=>a.jsxs("div",{className:"row",children:[a.jsx("span",{children:n.name}),a.jsx("span",{children:n.cash})]},n.id))]})]})}function Ax({onAction:t,current:e,isMyTurn:n=!0}){const r=!!(e!=null&&e.bankrupt),o=!!n&&!r;k.useEffect(()=>{console.groupCollapsed("[Controls] render"),console.log("current player:",e),console.log("isMyTurn prop:",n),console.log("isBankrupt:",r),console.log("canRoll (final):",o),console.groupEnd()},[e==null?void 0:e.id,e==null?void 0:e.name,e==null?void 0:e.bankrupt,n,o]);const s=()=>{if(console.log("[Controls] click => Rolar Dado & Andar (canRoll=%s)",o),!o)return;const u=Math.floor(Math.random()*6)+1,c=0,d=`Dado: ${u}`;console.log("[Controls] onAction ROLL => steps=%d cashDelta=%d note=%s",u,c,d),t==null||t({type:"ROLL",steps:u,cashDelta:c,note:d})},i=async()=>{r||(console.log("[Controls] click => Recuperao Financeira"),t==null||t({type:"RECOVERY_MODAL"}))},l=async()=>{r||(console.log("[Controls] click => Declarar Falncia"),t==null||t({type:"BANKRUPT_MODAL"}))};return a.jsxs("div",{className:`controls ${o?"":"is-wait"} ${r?"is-bankrupt":""}`,children:[a.jsx("button",{className:"btn primary",onClick:i,disabled:r,"aria-disabled":r,children:"RECUPERAO FINANCEIRA"}),a.jsx("button",{className:"btn dark",onClick:l,disabled:r,"aria-disabled":r,children:"DECLARAR FALNCIA"}),a.jsxs("div",{className:"turnBox",children:[a.jsxs("div",{children:["Vez de: ",a.jsx("b",{children:e==null?void 0:e.name})]}),a.jsx("button",{className:"btn go",onClick:s,disabled:!o,"aria-disabled":!o,children:"Rolar Dado & Andar"})]})]})}function ri({children:t,onClose:e,zIndex:n=3e3}){const r=()=>{typeof e=="function"&&e()};return a.jsx("div",{className:"sg-modal-backdrop",style:{position:"fixed",inset:0,background:"rgba(8,10,16,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:n},onClick:r,children:a.jsx("div",{className:"sg-modal-card",style:{position:"relative",background:"#0f1420",border:"1px solid rgba(255,255,255,.1)",borderRadius:14,width:"min(780px, 92vw)",maxWidth:"92vw",color:"#fff",boxShadow:"0 20px 60px rgba(0,0,0,.45)"},onClick:o=>o.stopPropagation(),children:t})})}function Tx({players:t=[],onExit:e,onResolve:n}){const r=k.useMemo(()=>{const u=[...t].map(c=>({...c,patrimonio:(Number(c.cash)||0)+(Number(c.bens)||0)})).sort((c,d)=>d.patrimonio-c.patrimonio);return[u[1],u[0],u[2]]},[t]),o=r==null?void 0:r[1],s=r==null?void 0:r[0],i=r==null?void 0:r[2],l=()=>{n?n({action:"EXIT"}):e==null||e()};return a.jsx(ri,{zIndex:2147483647,onClose:()=>{},children:a.jsxs("div",{style:In.wrap,children:[a.jsx("h1",{style:In.title,children:" Fim da 5 Rodada"}),a.jsxs("p",{style:In.subtitle,children:["Vence quem tiver ",a.jsx("b",{children:"Saldo + Bens"}),". Eis o pdio:"]}),a.jsxs("div",{style:In.podium,children:[a.jsx(Sl,{place:"second",player:s}),a.jsx(Sl,{place:"first",player:o,big:!0}),a.jsx(Sl,{place:"third",player:i})]}),a.jsx("div",{style:{display:"flex",gap:12,marginTop:18,flexWrap:"wrap",justifyContent:"center"},children:a.jsx("button",{style:In.btn,onClick:l,children:" Voltar aos Lobbies"})})]})})}function Sl({place:t,player:e,big:n}){if(!e)return a.jsx("div",{style:{width:220}});const r={first:_l("#d4af37","#f5d76e"),second:_l("#9fa4ad","#cfd4db"),third:_l("#b87333","#d28c45")},o={first:"1",second:"2",third:"3"}[t],s=r[t].ring,i=r[t].face;return a.jsxs("div",{style:{...In.medalCol,transform:n?"translateY(-18px)":"none"},children:[a.jsx("div",{style:In.ribbon}),a.jsx("div",{style:{...In.medal,...s,width:n?180:150,height:n?180:150},children:a.jsx("div",{style:{...In.medalFace,...i},children:a.jsx("div",{style:In.medalNumber,children:o})})}),a.jsxs("div",{style:In.cardBelow,children:[a.jsx("div",{style:{fontWeight:900,fontSize:16,lineHeight:1.2,textAlign:"center"},children:e.name}),a.jsxs("div",{style:{opacity:.9,fontSize:13,marginTop:4,textAlign:"center"},children:["Saldo: ",a.jsxs("b",{children:["$ ",Number(e.cash||0).toLocaleString()]}),a.jsx("br",{}),"Bens: ",a.jsxs("b",{children:["$ ",Number(e.bens||0).toLocaleString()]})]}),a.jsxs("div",{style:{marginTop:6,fontWeight:900,textAlign:"center"},children:["Patrimnio: ",a.jsxs("b",{children:["$ ",Number(e.patrimonio||0).toLocaleString()]})]})]})]})}function _l(t,e){return{ring:{background:`radial-gradient(circle at 35% 30%, ${e} 0%, ${t} 65%, #000 120%)`,boxShadow:"0 12px 30px rgba(0,0,0,.35), inset 0 0 12px rgba(255,255,255,.12)"},face:{background:`conic-gradient(from 0deg, ${e}, ${t}, ${e})`}}}const In={wrap:{pointerEvents:"auto",border:"1px solid rgba(255,255,255,.15)",background:"#11161f",color:"#eef1f6",borderRadius:16,padding:20,width:"min(900px, 92vw)",maxWidth:"92vw",textAlign:"center"},title:{margin:"0 0 6px",fontWeight:900,fontSize:28},subtitle:{margin:"0 0 14px",opacity:.9},podium:{display:"flex",alignItems:"flex-end",justifyContent:"center",gap:24,padding:"10px 0",flexWrap:"wrap"},medalCol:{display:"flex",flexDirection:"column",alignItems:"center"},ribbon:{width:16,height:70,background:"linear-gradient(#e41f1f,#9e1313)",borderRadius:4,marginBottom:-12},medal:{borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"3px solid rgba(255,255,255,.18)"},medalFace:{width:"85%",height:"85%",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 8px 18px rgba(0,0,0,.35), inset 0 -6px 10px rgba(255,255,255,.08)"},medalNumber:{fontWeight:900,fontSize:28,letterSpacing:1,textShadow:"0 2px 4px rgba(0,0,0,.45)"},cardBelow:{background:"#19202c",border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"10px 12px",width:220,marginTop:10},btn:{background:"#2a3342",color:"#fff",border:"1px solid rgba(255,255,255,.18)",borderRadius:10,padding:"10px 14px",fontWeight:800,cursor:"pointer"}},im=k.createContext(null);function Ox({children:t}){const[e,n]=k.useState([]),r=k.useRef(null),o=d=>{const h=r.current;r.current=null,n(f=>f.slice(0,-1)),h&&h(d)},s=()=>o({action:"SKIP"}),i=()=>o(!1),l=d=>{var x;const h=((x=crypto==null?void 0:crypto.randomUUID)==null?void 0:x.call(crypto))||String(Date.now()+Math.random()),f=fe.cloneElement(d,{onResolve:y=>o(y)});n(y=>[...y,{id:h,el:f}])},u=()=>new Promise(d=>{r.current=d}),c=k.useMemo(()=>({pushModal:l,awaitTop:u,resolveTop:o,closeModal:s,popModal:i}),[]);return a.jsxs(im.Provider,{value:c,children:[t,e.map(({id:d,el:h})=>a.jsx(fe.Fragment,{children:h},d))]})}const Qt=()=>k.useContext(im);function Lx({playerName:t="Jogador"}){const{resolveTop:e,closeModal:n}=Qt();return a.jsx(ri,{width:700,onClose:n,children:a.jsx("div",{className:"bankruptcyModal",children:a.jsxs("div",{className:"paper",style:{padding:24},children:[a.jsx("h2",{style:{marginTop:0},children:"Declarar Falncia"}),a.jsxs("p",{children:["Tem certeza que deseja declarar ",a.jsx("b",{children:"Falncia"}),", ",a.jsx("b",{children:t}),"?",a.jsx("br",{}),"Esta ao  irreversvel e voc no poder mais jogar."]}),a.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:24},children:[a.jsx("button",{onClick:()=>{n(),e(!1)},className:"btn",children:"Cancelar"}),a.jsx("button",{onClick:()=>{n(),e(!0)},className:"btn btn-danger",children:"Sim, declarar falncia"})]})]})})})}const Kt={comum:{cap:2,baseFat:600,incFat:100,baseDesp:100,incDesp:100},inside:{cap:5,baseFat:1500,incFat:500,baseDesp:2e3,incDesp:100},field:{cap:5,baseFat:1500,incFat:500,baseDesp:2e3,incDesp:100}},Ou={baseDesp:3e3,incDesp:500,boostByCert:[.2,.3,.4,.6]},am={A:{fat:1200,desp:700},B:{fat:600,desp:400},C:{fat:300,desp:200},D:{fat:100,desp:50}},lm={A:{fat:1e3,desp:400},B:{fat:500,desp:200},C:{fat:200,desp:100},D:{fat:70,desp:50}},Jt=t=>Number(t||0),lr=(t={},e)=>{var n;return new Set(((n=t==null?void 0:t.trainingsByVendor)==null?void 0:n[e])||[]).size},Px=t=>lr(t,"gestor");function pa(t={}){const e=Math.max(0,Jt(t.vendedoresComuns)),n=Math.max(0,Jt(t.insideSales)),r=Math.max(0,Jt(t.fieldSales)),o=e*Kt.comum.cap,s=n*Kt.inside.cap,i=r*Kt.field.cap,l=o+s+i,u=Math.max(0,Jt(t.clients)),c=Math.min(u,l);return{cap:l,inAtt:c}}function Ia(t={}){var N,S;const e=Jt(t.vendedoresComuns),n=Jt(t.insideSales),r=Jt(t.fieldSales),o=Jt(t.gestores??t.gestoresComerciais??t.managers),s=lr(t,"comum"),i=lr(t,"inside"),l=lr(t,"field"),u=lr(t,"gestor"),c=e*(Kt.comum.baseFat+Kt.comum.incFat*s),d=n*(Kt.inside.baseFat+Kt.inside.incFat*i),h=r*(Kt.field.baseFat+Kt.field.incFat*l);let f=c+d+h;const x=e+n+r,y=x>0?Math.min(1,o*7/x):0,b=Ou.boostByCert[Math.min(3,Math.max(0,u))]||0;f=f*(1+y*b);const _=String(t.mixProdutos||"D").toUpperCase(),p=(((N=am[_])==null?void 0:N.fat)||0)*Jt(t.clients),m=String(t.erpLevel||"D").toUpperCase(),g=x+o,w=(((S=lm[m])==null?void 0:S.fat)||0)*g,E=Jt(t.revenue);return Math.max(0,Math.floor(f+p+w+E))}function Ma(t={}){var E,D;const e=Jt(t.vendedoresComuns),n=Jt(t.insideSales),r=Jt(t.fieldSales),o=Jt(t.gestores??t.gestoresComerciais??t.managers),s=lr(t,"comum"),i=lr(t,"inside"),l=lr(t,"field"),u=lr(t,"gestor"),c=e*(Kt.comum.baseDesp+Kt.comum.incDesp*s),d=n*(Kt.inside.baseDesp+Kt.inside.incDesp*i),h=r*(Kt.field.baseDesp+Kt.field.incDesp*l),f=o*(Ou.baseDesp+Ou.incDesp*u),x=String(t.mixProdutos||"D").toUpperCase(),y=(((E=am[x])==null?void 0:E.desp)||0)*Jt(t.clients),b=String(t.erpLevel||"D").toUpperCase(),_=e+n+r+o,p=(((D=lm[b])==null?void 0:D.desp)||0)*_;return Math.max(0,Math.floor(c+d+h+f+y+p+0+1e3))}function Ct(t,e={}){var o,s;const n={...t},r=(i,l)=>{n[i]=(n[i]??0)+l};if(Number.isFinite(e.cashDelta)&&r("cash",Number(e.cashDelta)),Number.isFinite(e.clientsDelta)&&r("clients",Number(e.clientsDelta)),Number.isFinite(e.manutencaoDelta)&&r("manutencao",Number(e.manutencaoDelta)),Number.isFinite(e.bensDelta)&&r("bens",Number(e.bensDelta)),Number.isFinite(e.vendedoresComunsDelta)&&r("vendedoresComuns",Number(e.vendedoresComunsDelta)),Number.isFinite(e.fieldSalesDelta)&&r("fieldSales",Number(e.fieldSalesDelta)),Number.isFinite(e.insideSalesDelta)&&r("insideSales",Number(e.insideSalesDelta)),Number.isFinite(e.gestoresDelta)){const i=Number(e.gestoresDelta);n.gestores=(n.gestores??0)+i,n.gestoresComerciais=(n.gestoresComerciais??0)+i,n.managers=(n.managers??0)+i}if(Number.isFinite(e.revenueDelta)&&r("revenue",Number(e.revenueDelta)),typeof e.mixProdutosSet<"u"){n.mixProdutos=e.mixProdutosSet;const i=String(e.mixProdutosSet).toUpperCase();["A","B","C","D"].includes(i)&&(n.mixOwned={...n.mixOwned||{},[i]:!0},(o=n.reducedLevels)!=null&&o.MIX&&(n.reducedLevels={...n.reducedLevels,MIX:n.reducedLevels.MIX.filter(l=>l!==i)}))}if(e.mixBaseSet&&(n.mixBase={...n.mixBase||{},...e.mixBaseSet}),typeof e.erpLevelSet<"u"){n.erpLevel=e.erpLevelSet;const i=String(e.erpLevelSet).toUpperCase();["A","B","C","D"].includes(i)&&(n.erpOwned={...n.erpOwned||{},[i]:!0},(s=n.reducedLevels)!=null&&s.ERP&&(n.reducedLevels={...n.reducedLevels,ERP:n.reducedLevels.ERP.filter(l=>l!==i)}))}return Array.isArray(e.trainingsPush)&&e.trainingsPush.length&&(n.trainings=[...n.trainings||[],...e.trainingsPush]),Array.isArray(e.directBuysPush)&&e.directBuysPush.length&&(n.directBuys=[...n.directBuys||[],...e.directBuysPush]),n}function hf(t,e){const{purchases:n=[],grandTotal:r=0}=e||{},o={personalizado:"az",fieldsales:"am",imersaomultiplier:"rox"},s={...t};return s.cash=(s.cash??0)-Number(r||0),s.bens=(s.bens??0)+Number(r||0),s.onboarding=!0,n.forEach(i=>{var h;const{vendorType:l,items:u=[]}=i||{};u.forEach(f=>{const x=o[f==null?void 0:f.id];x&&(s[x]=(s[x]??0)+1)});const c=String(l||"comum"),d=new Set(((h=s.trainingsByVendor)==null?void 0:h[c])||[]);u.forEach(f=>{f!=null&&f.id&&d.add(f.id)}),s.trainingsByVendor={...s.trainingsByVendor||{},[c]:Array.from(d)}}),s}function kl(t,e,n){return t===e?!1:t<e?n>t&&n<=e:n>t||n<=e}function Ns(t){return t.reduce((e,n)=>e+(n!=null&&n.bankrupt?0:1),0)}function cs(t,e){var s;const n=t.length;if(n===0)return 0;let r=(e+1)%n,o=0;for(;o<n;){if(!((s=t[r])!=null&&s.bankrupt))return r;r=(r+1)%n,o++}return e}class um{constructor(){this.errors=[],this.warnings=[]}validateGameState(e,n,r,o,s){return this.errors=[],this.warnings=[],this.validatePlayers(e),this.validateTurnState(e,n),this.validateGameOverState(e,o,s),this.validateRoundState(e,r),{isValid:this.errors.length===0,errors:this.errors,warnings:this.warnings}}validatePlayers(e){if(!Array.isArray(e)||e.length===0){this.addError("Jogadores invlidos: deve ser um array no vazio");return}e.forEach((n,r)=>{this.validatePlayer(n,r)}),this.validatePlayerUniqueness(e),this.validateAlivePlayers(e)}validatePlayer(e,n){const r=`Jogador ${n+1} (${e.name||"Sem nome"})`;e.id||this.addError(`${r}: ID  obrigatrio`),(typeof e.cash!="number"||e.cash<0)&&this.addError(`${r}: Cash deve ser um nmero no negativo (atual: ${e.cash})`),(typeof e.clients!="number"||e.clients<0)&&this.addError(`${r}: Clientes deve ser um nmero no negativo (atual: ${e.clients})`),this.validateResourceCounts(e,r),this.validateCalculations(e,r)}validateResourceCounts(e,n){["vendedoresComuns","fieldSales","insideSales","gestores","gestoresComerciais","managers"].forEach(s=>{const i=e[s];i!==void 0&&(typeof i!="number"||i<0)&&this.addError(`${n}: ${s} deve ser um nmero no negativo (atual: ${i})`)}),["az","am","rox"].forEach(s=>{const i=e[s];i!==void 0&&(typeof i!="number"||i<0)&&this.addError(`${n}: Certificado ${s} deve ser um nmero no negativo (atual: ${i})`)})}validateCalculations(e,n){try{const r=Ia(e),o=Ma(e),{cap:s,inAtt:i}=pa(e);(typeof r!="number"||r<0)&&this.addError(`${n}: Faturamento calculado invlido: ${r}`),(typeof o!="number"||o<0)&&this.addError(`${n}: Manuteno calculada invlida: ${o}`),(typeof s!="number"||s<0)&&this.addError(`${n}: Capacidade calculada invlida: ${s}`),(typeof i!="number"||i<0||i>s)&&this.addError(`${n}: Clientes em atendimento invlido: ${i} (capacidade: ${s})`),this.isInitialState(e)&&o!==1150&&this.addError(`${n}: Manuteno inicial deve ser 1150, mas  ${o}`)}catch(r){this.addError(`${n}: Erro ao calcular faturamento/manuteno: ${r.message}`)}}isInitialState(e){return e.vendedoresComuns===1&&e.clients===1&&e.fieldSales===0&&e.insideSales===0&&e.gestores===0&&e.mixProdutos==="D"&&e.erpLevel==="D"&&(e.az||0)===0&&(e.am||0)===0&&(e.rox||0)===0}validatePlayerUniqueness(e){const n=e.map(o=>o.id).filter(Boolean),r=new Set(n);n.length!==r.size&&this.addError("IDs de jogadores devem ser nicos")}validateAlivePlayers(e){const n=Ns(e);n===0&&this.addError("No pode haver zero jogadores vivos"),n===1&&this.addWarning("Apenas 1 jogador vivo - jogo deve terminar")}validateTurnState(e,n){if(typeof n!="number"||n<0||n>=e.length){this.addError(`TurnIdx invlido: ${n} (deve estar entre 0 e ${e.length-1})`);return}const r=e[n];if(!r){this.addError(`Jogador do turno no encontrado no ndice ${n}`);return}r.bankrupt&&this.addError(`Jogador do turno (${r.name}) est falido`)}validateGameOverState(e,n,r){const o=Ns(e);n&&o>1&&this.addError("Jogo marcado como terminado mas h mais de 1 jogador vivo"),n&&!r&&this.addError("Jogo terminado mas no h vencedor definido"),r&&!n&&this.addError("H vencedor definido mas jogo no terminou"),r&&r.bankrupt&&this.addError("Vencedor no pode estar falido")}validateRoundState(e,n){(typeof n!="number"||n<1)&&this.addError(`Rodada invlida: ${n} (deve ser >= 1)`),n>10&&this.addWarning(`Rodada muito alta: ${n} (jogo pode estar travado)`)}validateAction(e,n,r){switch(this.errors=[],this.warnings=[],e.type){case"MOVE":this.validateMoveAction(e,n);break;case"BUY":this.validateBuyAction(e,n);break;case"HIRE":this.validateHireAction(e,n);break;case"BANKRUPT":this.validateBankruptAction(e,n);break;default:this.addWarning(`Tipo de ao no reconhecido: ${e.type}`)}return{isValid:this.errors.length===0,errors:this.errors,warnings:this.warnings}}validateMoveAction(e,n){(typeof e.steps!="number"||e.steps<1||e.steps>6)&&this.addError(`Passos invlidos: ${e.steps} (deve estar entre 1 e 6)`)}validateBuyAction(e,n){const r=e.cost||e.price||0;r>n.cash&&this.addError(`Saldo insuficiente: precisa de ${r}, tem ${n.cash}`)}validateHireAction(e,n){const r=e.cost||0;r>n.cash&&this.addError(`Saldo insuficiente para contratao: precisa de ${r}, tem ${n.cash}`)}validateBankruptAction(e,n){n.bankrupt||this.addWarning("Jogador declarando falncia mas no est marcado como falido")}addError(e){this.errors.push(e)}addWarning(e){this.warnings.push(e)}}function $x(t,e,n,r,o){return new um().validateGameState(t,e,n,r,o)}function Ix(t,e,n){return new um().validateAction(t,e,n)}class Mx{constructor(){this.enabled=!1,this.logs=[],this.maxLogs=1e4,this.originalConsole={log:console.log,warn:console.warn,error:console.error,debug:console.debug,info:console.info},this.prefixes=["[DEBUG]","[NET]","[App]","[SG]","[Controls]","[HUD]","[DEBUG MODE]","[PlayersLobby]","[leaveRoom]","[GameNet]","[useTurnEngine]","[useGameSync]"]}shouldCapture(e){if(!this.enabled)return!1;const n=e.map(r=>{if(typeof r=="object")try{return JSON.stringify(r)}catch{return String(r)}return String(r)}).join(" ");return this.prefixes.some(r=>n.includes(r))}addLog(e,n){this.logs.length>=this.maxLogs&&(this.logs=this.logs.slice(-Math.floor(this.maxLogs*.9)));const r=Date.now(),o={timestamp:r,time:new Date(r).toISOString(),level:e,args:n.map(s=>{if(typeof s=="object"&&s!==null)try{return JSON.parse(JSON.stringify(s,(i,l)=>typeof l=="function"?"[Function]":l===void 0?"[undefined]":Array.isArray(l)&&l.length>100?`[Array(${l.length}) - truncado]`:l))}catch{return String(s)}return s}),message:n.map(s=>{if(typeof s=="object")try{return JSON.stringify(s)}catch{return String(s)}return String(s)}).join(" ")};this.logs.push(o)}interceptLog(...e){this.shouldCapture(e)&&this.addLog("log",e),this.originalConsole.log.apply(console,e)}interceptWarn(...e){this.shouldCapture(e)&&this.addLog("warn",e),this.originalConsole.warn.apply(console,e)}interceptError(...e){this.addLog("error",e),this.originalConsole.error.apply(console,e)}interceptDebug(...e){this.shouldCapture(e)&&this.addLog("debug",e),this.originalConsole.debug.apply(console,e)}interceptInfo(...e){this.shouldCapture(e)&&this.addLog("info",e),this.originalConsole.info.apply(console,e)}enable(){this.enabled||(this.enabled=!0,console.log=this.interceptLog.bind(this),console.warn=this.interceptWarn.bind(this),console.error=this.interceptError.bind(this),console.debug=this.interceptDebug.bind(this),console.info=this.interceptInfo.bind(this),console.log("[LogCapture]  Captura de logs ativada"))}disable(){this.enabled&&(this.enabled=!1,console.log=this.originalConsole.log,console.warn=this.originalConsole.warn,console.error=this.originalConsole.error,console.debug=this.originalConsole.debug,console.info=this.originalConsole.info,console.log("[LogCapture]  Captura de logs desativada"))}clear(){this.logs=[],console.log("[LogCapture]  Histrico de logs limpo")}getLogs(){return[...this.logs]}getStats(){const e=this.logs.length,n={log:0,warn:0,error:0,debug:0,info:0};return this.logs.forEach(r=>{n[r.level]=(n[r.level]||0)+1}),{total:e,byLevel:n,enabled:this.enabled}}exportAsText(){const e=["=".repeat(80),"RELATRIO DE LOGS - Sales Game","=".repeat(80),`Data/Hora: ${new Date().toISOString()}`,`Total de logs: ${this.logs.length}`,`Estatsticas: ${JSON.stringify(this.getStats(),null,2)}`,"=".repeat(80),""];return this.logs.forEach(n=>{const r={log:"",warn:"",error:"",debug:"",info:""}[n.level]||"";e.push(`[${n.time}] ${r} [${n.level.toUpperCase()}]`),n.args.forEach((o,s)=>{typeof o=="object"?e.push(`  Arg ${s+1}: ${JSON.stringify(o,null,2)}`):e.push(`  Arg ${s+1}: ${o}`)}),e.push("")}),e.join(`
`)}exportAsJSON(){return{timestamp:new Date().toISOString(),stats:this.getStats(),logs:this.logs}}exportFull(){return{timestamp:new Date().toISOString(),stats:this.getStats(),text:this.exportAsText(),json:this.exportAsJSON()}}}const Jn=new Mx,Bx=()=>Jn.clear(),Lu=()=>Jn.getStats(),Ux=()=>Jn.exportAsText(),zx=()=>Jn.exportAsJSON();class Fx{constructor(){this.enabled=!1,this.validationHistory=[],this.maxHistorySize=100}toggle(){return this.enabled=!this.enabled,this.enabled&&Jn.enable(),console.log(`[DEBUG MODE] ${this.enabled?"ATIVADO":"DESATIVADO"}`),this.enabled}validateGameState(e,n,r,o,s,i=""){if(!this.enabled)return;const l=$x(e,n,r,o,s);return this.addToHistory({type:"GAME_STATE",context:i,timestamp:Date.now(),result:l}),l.isValid||console.error("[DEBUG MODE]  Estado do jogo invlido:",l.errors),l.warnings.length>0&&console.warn("[DEBUG MODE]  Avisos:",l.warnings),l}validateAction(e,n,r,o=""){if(!this.enabled)return;const s=Ix(e,n,r);return this.addToHistory({type:"ACTION",context:o,timestamp:Date.now(),action:e.type,player:n.name,result:s}),s.isValid||console.error(`[DEBUG MODE]  Ao invlida (${e.type}):`,s.errors),s}validateResourceChange(e,n,r,o){if(!this.enabled)return;const s=[],i=[];if(n.clients!==r.clients){const c=r.clients-n.clients;r.clients<0&&s.push(`Clientes no pode ser negativo: ${r.clients}`),Math.abs(c)>10&&i.push(`Mudana grande de clientes: ${c}`)}if(n.cash!==r.cash){const c=r.cash-n.cash;r.cash<0&&s.push(`Cash no pode ser negativo: ${r.cash}`),Math.abs(c)>5e4&&i.push(`Mudana grande de cash: ${c}`)}["vendedoresComuns","fieldSales","insideSales","gestores"].forEach(c=>{if(n[c]!==r[c]){const d=r[c]-n[c];r[c]<0&&s.push(`${c} no pode ser negativo: ${r[c]}`),Math.abs(d)>5&&i.push(`Mudana grande de ${c}: ${d}`)}});const u={isValid:s.length===0,errors:s,warnings:i};return this.addToHistory({type:"RESOURCE_CHANGE",context:o,timestamp:Date.now(),player:e.name,oldState:n,newState:r,result:u}),u.isValid||console.error("[DEBUG MODE]  Mudana de recurso invlida:",u.errors),u}validateCalculations(e,n=""){if(this.enabled)try{const r=Ia(e),o=Ma(e),{cap:s,inAtt:i}=pa(e),l=[],u=[];(typeof r!="number"||r<0)&&l.push(`Faturamento invlido: ${r}`),(typeof o!="number"||o<0)&&l.push(`Manuteno invlida: ${o}`),(typeof s!="number"||s<0)&&l.push(`Capacidade invlida: ${s}`),(typeof i!="number"||i<0||i>s)&&l.push(`Clientes em atendimento invlido: ${i} (capacidade: ${s})`),this.isInitialState(e)&&o!==1150&&l.push(`Manuteno inicial deve ser 1150, mas  ${o}`);const c={isValid:l.length===0,errors:l,warnings:u,calculations:{faturamento:r,manutencao:o,cap:s,inAtt:i}};return this.addToHistory({type:"CALCULATIONS",context:n,timestamp:Date.now(),player:e.name,result:c}),c.isValid||console.error("[DEBUG MODE]  Clculos invlidos:",c.errors),c}catch(r){return console.error("[DEBUG MODE]  Erro ao validar clculos:",r),{isValid:!1,errors:[r.message],warnings:[]}}}isInitialState(e){return e.vendedoresComuns===1&&e.clients===1&&e.fieldSales===0&&e.insideSales===0&&e.gestores===0&&e.mixProdutos==="D"&&e.erpLevel==="D"}addToHistory(e){this.validationHistory.unshift(e),this.validationHistory.length>this.maxHistorySize&&(this.validationHistory=this.validationHistory.slice(0,this.maxHistorySize))}getHistory(){return this.validationHistory}clearHistory(){this.validationHistory=[]}getStats(){const e=this.validationHistory.length,n=this.validationHistory.filter(o=>!o.result.isValid).length,r=this.validationHistory.filter(o=>o.result.warnings.length>0).length;return{total:e,errors:n,warnings:r,errorRate:e>0?n/e*100:0,warningRate:e>0?r/e*100:0}}exportReport(){const e=this.getStats(),n={timestamp:new Date().toISOString(),stats:e,history:this.validationHistory};return console.log("[DEBUG MODE]  Relatrio de validao:",n),n}exportFullReport(){const e=this.exportReport(),n=Jn.exportFull();return{timestamp:new Date().toISOString(),validation:e,logs:n,text:this.exportFullReportAsText(e,n)}}exportFullReportAsText(e,n){return["=".repeat(80),"RELATRIO COMPLETO DE DEBUG - Sales Game","=".repeat(80),`Data/Hora: ${new Date().toISOString()}`,"","--- VALIDAES ---",`Total de validaes: ${e.stats.total}`,`Erros: ${e.stats.errors}`,`Avisos: ${e.stats.warnings}`,`Taxa de erro: ${e.stats.errorRate.toFixed(2)}%`,"","--- LOGS CAPTURADOS ---",`Total de logs: ${n.stats.total}`,`Logs por nvel: ${JSON.stringify(n.stats.byLevel,null,2)}`,"","--- HISTRICO DE VALIDAES ---",...e.history.map(o=>`[${new Date(o.timestamp).toISOString()}] ${o.type} - ${o.context||""} - ${JSON.stringify(o.result,null,2)}`),"","--- LOGS DETALHADOS ---",n.text,"=".repeat(80)].join(`
`)}}const uo=new Fx,Wx=(t,e,n,r,o,s)=>uo.validateGameState(t,e,n,r,o,s),Vx=(t,e)=>uo.validateCalculations(t,e),pf=()=>uo.getStats(),Gx=()=>uo.exportReport(),cm=()=>uo.exportFullReport();function qx({players:t,turnIdx:e,round:n,gameOver:r,winner:o}){const[s,i]=k.useState(!1),[l,u]=k.useState({total:0,errors:0,warnings:0,errorRate:0,warningRate:0}),[c,d]=k.useState({total:0,byLevel:{},enabled:!1}),[h,f]=k.useState(!1),[x,y]=k.useState({x:0,y:0}),[b,_]=k.useState({x:0,y:0}),p=k.useRef(null);k.useEffect(()=>{const T=()=>{u(pf()),d(Lu())};T();const v=setInterval(T,1e3);return()=>clearInterval(v)},[]);const m=()=>{const T=uo.toggle();i(T)},g=()=>{const T=Gx(),v=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),A=URL.createObjectURL(v),O=document.createElement("a");O.href=A,O.download=`debug-report-${new Date().toISOString().slice(0,19)}.json`,O.click(),URL.revokeObjectURL(A)},w=()=>{const T=cm(),v=new Blob([T.text],{type:"text/plain;charset=utf-8"}),A=URL.createObjectURL(v),O=document.createElement("a");O.href=A,O.download=`debug-logs-completo-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`,O.click(),URL.revokeObjectURL(A);const $=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),ne=URL.createObjectURL($),oe=document.createElement("a");oe.href=ne,oe.download=`debug-logs-completo-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,oe.click(),URL.revokeObjectURL(ne),console.log("[DebugPanel]  Relatrio completo exportado (texto + JSON)")},E=()=>{uo.clearHistory(),Bx(),u(pf()),d(Lu()),console.log("[DebugPanel]  Todos os logs foram limpos")},D=T=>{if(T.target.closest("button"))return;f(!0);const v=p.current.getBoundingClientRect();_({x:T.clientX-v.left,y:T.clientY-v.top})},N=T=>{h&&y({x:T.clientX-b.x,y:T.clientY-b.y})},S=()=>{f(!1)};return k.useEffect(()=>{if(h)return document.addEventListener("mousemove",N),document.addEventListener("mouseup",S),()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",S)}},[h,b]),s?a.jsxs("div",{ref:p,style:{position:"fixed",top:x.y||10,left:x.x||10,zIndex:9999,background:"#1a1a1a",color:"#fff",padding:"12px",borderRadius:"8px",border:"1px solid #333",minWidth:"300px",maxHeight:"80vh",overflow:"auto",fontSize:"12px",fontFamily:"monospace",cursor:h?"grabbing":"grab",userSelect:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},onMouseDown:D,children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[a.jsx("h3",{style:{margin:0,color:"#4CAF50"},children:" Debug Panel"}),a.jsx("button",{onClick:m,style:{background:"#ff4444",color:"#fff",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",fontSize:"10px"},children:""})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estatsticas de Validao"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Total: ",l.total]}),a.jsxs("div",{style:{color:l.errors>0?"#ff4444":"#4CAF50"},children:["Erros: ",l.errors]}),a.jsxs("div",{style:{color:l.warnings>0?"#FFC107":"#4CAF50"},children:["Avisos: ",l.warnings]}),a.jsxs("div",{children:["Taxa Erro: ",l.errorRate.toFixed(1),"%"]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estatsticas de Logs"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Total: ",c.total]}),a.jsxs("div",{style:{color:c.enabled?"#4CAF50":"#ff4444"},children:["Status: ",c.enabled?" Ativo":" Inativo"]}),c.byLevel&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Logs: ",c.byLevel.log||0]}),a.jsxs("div",{style:{color:"#FFC107"},children:["Warns: ",c.byLevel.warn||0]}),a.jsxs("div",{style:{color:"#ff4444"},children:["Errors: ",c.byLevel.error||0]}),a.jsxs("div",{children:["Debug: ",c.byLevel.debug||0]})]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estado do Jogo"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Jogadores: ",t.length]}),a.jsxs("div",{children:["Turno: ",e+1]}),a.jsxs("div",{children:["Rodada: ",n]}),a.jsxs("div",{style:{color:r?"#ff4444":"#4CAF50"},children:["Status: ",r?"Fim":"Ativo"]}),o&&a.jsxs("div",{children:["Vencedor: ",o.name]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Jogadores"}),t.map((T,v)=>{var A;return a.jsxs("div",{style:{background:v===e?"#333":"transparent",padding:"4px",borderRadius:"4px",marginBottom:"2px",border:T.bankrupt?"1px solid #ff4444":"1px solid transparent"},children:[a.jsxs("div",{style:{fontWeight:"bold"},children:[T.name," ",T.bankrupt?"":""," ",v===e?"":""]}),a.jsxs("div",{style:{fontSize:"10px",opacity:.8},children:["Cash: $",((A=T.cash)==null?void 0:A.toLocaleString())||0," | Clientes: ",T.clients||0," | Vendedores: ",T.vendedoresComuns||0]})]},T.id)})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[a.jsx("button",{onClick:w,style:{background:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px",fontWeight:"bold"},title:"Exporta relatrio completo com todos os logs (texto + JSON)",children:" Exportar Logs Completos"}),a.jsx("button",{onClick:g,style:{background:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px"},title:"Exporta apenas relatrio de validao (JSON)",children:" Exportar Validao"}),a.jsx("button",{onClick:E,style:{background:"#FF9800",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px"},title:"Limpa todos os logs e histrico de validao",children:" Limpar Tudo"})]}),a.jsxs("div",{style:{marginTop:"12px",padding:"8px",background:"#333",borderRadius:"4px",fontSize:"10px"},children:[a.jsx("div",{style:{color:"#FFC107",marginBottom:"4px"},children:" Instrues:"}),a.jsx("div",{children:' Clique em " Debug" para ativar/desativar'}),a.jsx("div",{children:" Logs so capturados automaticamente quando debug est ativo"}),a.jsx("div",{children:' " Exportar Logs Completos" gera arquivo .txt e .json'}),a.jsx("div",{children:" Compartilhe o arquivo .txt para anlise de problemas"}),a.jsx("div",{children:" Todos os console.log com prefixos [DEBUG], [NET], [App], etc. so capturados"})]})]}):a.jsx("div",{style:{background:"#1a1a1a",color:"#fff",padding:"6px 10px",borderRadius:"4px",border:"1px solid #333",cursor:"pointer",fontSize:"11px",fontFamily:"monospace",display:"inline-block",userSelect:"none"},onClick:m,children:" Debug"})}function pr({onResolve:t,requiredAmount:e=0,currentCash:n=0,title:r="Saldo insuficiente",message:o="Seu saldo atual no  suficiente para concluir esta compra.",okLabel:s="OK",showRecoveryOptions:i=!1,canClose:l=!0}){const u=k.useRef(null),c=k.useMemo(()=>Math.max(0,Number(e||0)-Number(n||0)),[e,n]),d=b=>`$ ${Number(b||0).toLocaleString()}`,h=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"ACK"})},f=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),!(i||!l)&&(t==null||t({action:"SKIP"}))},x=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"RECOVERY"})},y=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"BANKRUPT"})};return k.useEffect(()=>{const b=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var _,p;return(p=(_=u.current)==null?void 0:_.focus)==null?void 0:p.call(_)},0),()=>{document.body.style.overflow=b}},[]),a.jsx("div",{style:en.wrap,role:"dialog","aria-modal":"true",onMouseDown:b=>{b.target===b.currentTarget&&b.stopPropagation()},children:a.jsxs("div",{style:en.card,onMouseDown:b=>b.stopPropagation(),children:[!i&&l&&a.jsx("button",{type:"button",style:en.close,onClick:f,"aria-label":"Fechar",children:""}),a.jsx("div",{style:en.icon,children:""}),a.jsx("h2",{style:en.title,children:r}),a.jsx("p",{style:en.msg,children:o}),a.jsxs("div",{style:en.grid,children:[a.jsxs("div",{style:en.row,children:[a.jsx("span",{children:"Necessrio:"}),a.jsx("b",{children:d(e)})]}),a.jsxs("div",{style:en.row,children:[a.jsx("span",{children:"Seu saldo:"}),a.jsx("b",{children:d(n)})]}),a.jsxs("div",{style:{...en.row,color:"#fca5a5"},children:[a.jsx("span",{children:"Faltam:"}),a.jsx("b",{children:d(c)})]})]}),a.jsx("div",{style:en.actions,children:i?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",style:{...en.btn,background:"#f59e0b",color:"#fff",marginRight:"8px"},onClick:x,children:"Recuperao Financeira"}),a.jsx("button",{type:"button",style:{...en.btn,background:"#dc2626",color:"#fff"},onClick:y,children:"Declarar Falncia"})]}):a.jsx("button",{ref:u,type:"button",style:{...en.btn,background:"#6b7280",color:"#fff"},onClick:h,children:s})})]})})}const en={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"grid",placeItems:"center",zIndex:1100},card:{width:"min(440px, 92vw)",background:"#1f2330",color:"#e9ecf1",borderRadius:16,padding:"18px 18px 16px",border:"1px solid rgba(255,255,255,.12)",boxShadow:"0 18px 50px rgba(0,0,0,.5)",position:"relative"},close:{position:"absolute",right:10,top:10,width:34,height:34,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},icon:{fontSize:28,lineHeight:1,marginBottom:6},title:{margin:"2px 0 6px",fontWeight:900,fontSize:20},msg:{opacity:.95,margin:"0 0 10px"},grid:{border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",marginBottom:12,background:"#171b26"},row:{display:"flex",justifyContent:"space-between",padding:"4px 0"},actions:{display:"flex",justifyContent:"center",marginTop:6},btn:{minWidth:120,padding:"10px 16px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer"}},tn={A:{compra:1e4,despesa:400,faturamento:1e3,color:"#1d4ed8",pill:"NVEL A"},B:{compra:4e3,despesa:200,faturamento:500,color:"#16a34a",pill:"NVEL B"},C:{compra:1500,despesa:100,faturamento:200,color:"#f59e0b",pill:"NVEL C"},D:{compra:500,despesa:50,faturamento:70,color:"#6b7280",pill:"NVEL D"}};function mf({onResolve:t,currentCash:e=0,currentLevel:n=null,erpOwned:r=null}){const o=k.useRef(null),{pushModal:s,awaitTop:i}=Qt(),l=c=>{var d,h;(d=c==null?void 0:c.preventDefault)==null||d.call(c),(h=c==null?void 0:c.stopPropagation)==null||h.call(c),t==null||t({action:"SKIP"})},u=async c=>{if(r?r[c]===!0:n===c)return;const h=tn[c],f=Number((h==null?void 0:h.compra)||0),x=Number(e||0);if(x<f){s(a.jsx(pr,{requiredAmount:f,currentCash:x,title:"Saldo insuficiente para comprar ERP",message:`Voc precisa de $ ${f.toLocaleString()} para o ERP nvel ${c}, mas possui $ ${x.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",level:c,values:h})};return k.useEffect(()=>{const c=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var d,h;return(h=(d=o.current)==null?void 0:d.focus)==null?void 0:h.call(d)},0),()=>{document.body.style.overflow=c}},[]),a.jsx("div",{style:Xe.wrap,role:"dialog","aria-modal":"true","aria-label":"ERP/Sistemas",children:a.jsxs("div",{style:Xe.card,children:[a.jsx("button",{ref:o,type:"button",style:Xe.close,onClick:l,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Xe.title,children:["Escolha o nvel de ",a.jsx("b",{children:"ERP / Sistemas"}),":"]}),a.jsxs("div",{style:Xe.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"ERP / SISTEMAS"}),a.jsxs("div",{children:[a.jsx("b",{children:"Impacto mensal:"})," adiciona ",a.jsx("b",{children:"Despesa"})," e ",a.jsx("b",{children:"Faturamento"})," de acordo com o nvel."]}),a.jsxs("div",{children:["O nvel ",a.jsx("b",{children:"D"})," tambm pode ser adquirido."]})]}),a.jsxs("div",{style:Xe.saldo,children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsxs("div",{style:Xe.table,children:[a.jsxs("div",{style:Xe.trHead,children:[a.jsx("div",{style:Xe.th}),a.jsx("div",{style:{...Xe.th,background:"#10214d"},children:"Nvel A"}),a.jsx("div",{style:{...Xe.th,background:"#0f3a1c"},children:"Nvel B"}),a.jsx("div",{style:{...Xe.th,background:"#4a3705"},children:"Nvel C"}),a.jsx("div",{style:{...Xe.th,background:"#2a2f3b"},children:"Nvel D"})]}),a.jsx(El,{label:"COMPRA",fmt:!0,vA:tn.A.compra,vB:tn.B.compra,vC:tn.C.compra,vD:tn.D.compra}),a.jsx(El,{label:"DESPESA",fmt:!0,vA:tn.A.despesa,vB:tn.B.despesa,vC:tn.C.despesa,vD:tn.D.despesa}),a.jsx(El,{label:"FATURAMENTO",fmt:!0,vA:tn.A.faturamento,vB:tn.B.faturamento,vC:tn.C.faturamento,vD:tn.D.faturamento})]}),a.jsx("div",{style:Xe.cards,children:["A","B","C","D"].map(c=>{const d=tn[c],h=r?r[c]===!0:n===c,f=h;return a.jsxs("div",{style:{...Xe.cardItem,borderColor:h?"#16a34a":"rgba(255,255,255,.15)",opacity:f?.6:1},children:[a.jsx("div",{style:{...Xe.pill,background:h?"#16a34a":"#fff",color:h?"#fff":"#111"},children:h?" ADQUIRIDO":d.pill}),a.jsx("div",{style:{...Xe.cardBadge,background:d.color}}),a.jsxs("ul",{style:Xe.lines,children:[a.jsxs("li",{children:["Compra: ",a.jsxs("b",{children:["$ ",d.compra.toLocaleString()]})]}),a.jsxs("li",{children:["Despesa: ",a.jsxs("b",{children:["$ ",d.despesa.toLocaleString()]})]}),a.jsxs("li",{children:["Faturamento: ",a.jsxs("b",{children:["$ ",d.faturamento.toLocaleString()]})]})]}),a.jsx("button",{type:"button",style:{...Xe.buyBtn,background:f?"#6b7280":"#2442f9",cursor:f?"not-allowed":"pointer"},onClick:()=>u(c),disabled:f,title:f?`ERP nvel ${c} j adquirido`:`Comprar ERP nvel ${c}`,children:f?"J Adquirido":`Comprar ${c}`})]},c)})}),a.jsx("div",{style:Xe.actions,children:a.jsx("button",{type:"button",style:{...Xe.bigBtn,background:"#444"},onClick:l,children:"No comprar"})})]})})}function El({label:t,vA:e,vB:n,vC:r,vD:o,fmt:s}){const i=l=>s?`$ ${Number(l).toLocaleString()}`:l;return a.jsxs("div",{style:Xe.tr,children:[a.jsx("div",{style:{...Xe.td,fontWeight:700},children:t}),a.jsx("div",{style:Xe.td,children:i(e)}),a.jsx("div",{style:Xe.td,children:i(n)}),a.jsx("div",{style:Xe.td,children:i(r)}),a.jsx("div",{style:Xe.td,children:i(o)})]})}const Xe={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldo:{margin:"0 0 10px",padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,overflow:"hidden",marginBottom:12},trHead:{display:"grid",gridTemplateColumns:"1fr repeat(4, 1fr)",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"1fr repeat(4, 1fr)",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255/.06)"},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,marginTop:8},cardItem:{background:"#0f1320",border:"1px solid",borderRadius:14,padding:"12px",display:"flex",flexDirection:"column",gap:8},cardBadge:{width:"100%",height:6,borderRadius:999,opacity:.9},pill:{alignSelf:"flex-start",fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999,color:"#111"},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},buyBtn:{marginTop:"auto",padding:"10px 12px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer",background:"#2442f9",color:"#fff"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:14},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",color:"#fff",fontWeight:900,cursor:"pointer"}},Ei=[{id:"personalizado",label:`Treinamento de venda personalizado
Casagrande Consultores`,price:500,cert:"azul",colors:{bg:"#0f2848",border:"#3b82f6",pill:"#60a5fa"}},{id:"fieldsales",label:`Curso Field Sales Collab
Multiplier Educao e
Casagrande Consultores`,price:500,cert:"amarelo",colors:{bg:"#3a3202",border:"#facc15",pill:"#fde047"}},{id:"imersaomultiplier",label:`Pacote Imerses
Multiplier Educao`,price:500,cert:"roxo",colors:{bg:"#2b0840",border:"#a855f7",pill:"#c084fc"}}];function gf({onResolve:t,ownedByType:e={},canTrain:n={}}){const r=S=>typeof S=="string"&&S.trim()!==""&&!Number.isNaN(Number(S))?Number(S):S,o=S=>{const T=r(S);return typeof T=="number"?T>0:!!T},s=k.useMemo(()=>({comum:o(n.comum),field:o(n.field),inside:o(n.inside),gestor:o(n.gestor)}),[n]),i=Ei.map(S=>S.id),l=k.useMemo(()=>[{id:"comum",label:"Vend. Comum"},{id:"field",label:"Field Sales"},{id:"inside",label:"Inside Sales"},{id:"gestor",label:"Gestor"}].filter(S=>s[S.id]).filter(S=>{const T=e[S.id]instanceof Set?e[S.id]:new Set(e[S.id]||[]);return i.some(v=>!T.has(v))}),[e,s]),[u,c]=k.useState(()=>new Set),[d,h]=k.useState(()=>new Set);k.useEffect(()=>{u.size===0&&l.length>0&&c(new Set([l[0].id]))},[l,u.size]);const f=k.useRef(null),x=k.useMemo(()=>{const S=[];if(d.size>0){const T=Array.from(d).map(A=>Ei.find(O=>O.id===A)).filter(Boolean),v=T.reduce((A,O)=>A+((O==null?void 0:O.price)||0),0);u.forEach(A=>{S.push({vendorType:A,items:T,total:v})})}return S},[u,d]),y=k.useMemo(()=>x.reduce((S,T)=>S+T.total,0),[x]),b=k.useMemo(()=>{const S={azul:0,amarelo:0,roxo:0};return d.size>0&&Array.from(d).map(v=>Ei.find(A=>A.id===v)).filter(Boolean).forEach(v=>{S[v.cert]=(S[v.cert]||0)+u.size}),S},[d,u.size]),_=k.useMemo(()=>{const S={};if(d.size>0){const T=Array.from(d);u.forEach(v=>{S[v]=T})}return S},[d,u]),p=S=>{c(T=>{const v=new Set(T);return v.has(S)?v.delete(S):v.add(S),v})},m=S=>{Array.from(u).some(v=>(e[v]instanceof Set?e[v]:new Set(e[v]||[])).has(S))||h(v=>{const A=new Set(v);return A.has(S)?A.delete(S):A.add(S),A})},g=()=>{x.length!==0&&(t==null||t({action:"BUY",purchases:x,grandTotal:y,bensDelta:y,certsCount:b,ownedUpdate:_}))},w=()=>{c(new Set),h(new Set)},E=S=>{var T,v;(T=S==null?void 0:S.preventDefault)==null||T.call(S),(v=S==null?void 0:S.stopPropagation)==null||v.call(S),t==null||t({action:"SKIP"})};k.useEffect(()=>{const S=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var T,v;return(v=(T=f.current)==null?void 0:T.focus)==null?void 0:v.call(T)},0),()=>{document.body.style.overflow=S}},[]);const D=l.length===0,N=!Object.values(s).some(Boolean);return a.jsx("div",{style:qt.wrap,role:"dialog","aria-modal":"true",children:a.jsxs("div",{style:qt.card,children:[a.jsx("button",{ref:f,type:"button",style:qt.close,onClick:E,"aria-label":"Fechar",children:""}),a.jsx("h2",{style:qt.title,children:"Escolha os vendedores e treinamentos que deseja comprar:"}),D?a.jsx("div",{style:qt.allDoneBox,children:N?"Nenhum profissional disponvel para treinar no momento.":"Todos os treinamentos j foram comprados para os profissionais disponveis."}):a.jsx(a.Fragment,{children:a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("p",{style:{margin:"0 0 8px",opacity:.9,fontSize:"14px"},children:"Selecione os tipos de vendedores que deseja treinar:"}),a.jsx("div",{style:{...qt.vendorRow,gridTemplateColumns:`repeat(${l.length}, minmax(0,1fr))`},children:l.map(S=>a.jsx("button",{type:"button",onClick:()=>p(S.id),style:{...qt.vendorBtn,background:u.has(S.id)?"#6f5bd6":"#2a2f3b",borderColor:u.has(S.id)?"rgba(255,255,255,.35)":"rgba(255,255,255,.15)"},children:S.label},S.id))})]})}),!D&&u.size>0&&a.jsxs(a.Fragment,{children:[a.jsx("p",{style:{margin:"10px 2px 14px",opacity:.9},children:"Escolha os treinamentos que sero aplicados a todos os tipos selecionados:"}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",background:"#2a2f3b",borderRadius:"8px",border:"1px solid rgba(255,255,255,.15)"},children:[a.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Tipos selecionados:"}),a.jsx("div",{style:{fontSize:"14px",opacity:.9},children:Array.from(u).map(S=>{const T=l.find(v=>v.id===S);return T==null?void 0:T.label}).join(", ")})]}),a.jsx("div",{style:qt.products,children:Ei.map(S=>{const T=d.has(S.id),v=Array.from(u).some(A=>(e[A]instanceof Set?e[A]:new Set(e[A]||[])).has(S.id));return a.jsxs("button",{type:"button",onClick:()=>m(S.id),disabled:v,style:{...qt.productCard,background:S.colors.bg,borderColor:S.colors.border,boxShadow:T?`0 0 0 3px ${S.colors.pill}`:"none",opacity:v?.45:1,cursor:v?"not-allowed":"pointer"},title:v?"J adquirido para algum tipo selecionado":void 0,children:[a.jsxs("div",{style:qt.pill(S.colors.pill),children:["Certificado ",S.cert==="azul"?"Azul":S.cert==="amarelo"?"Amarelo":"Roxo"]}),a.jsx("div",{style:{whiteSpace:"pre-line",fontWeight:800,marginBottom:10},children:S.label}),a.jsxs("div",{style:{fontSize:22,fontWeight:900},children:["$ ",S.price.toLocaleString()]})]},S.id)})})]}),a.jsxs("div",{style:qt.actionsRow,children:[a.jsx("button",{type:"button",style:{...qt.smallBtn,background:"#3a4152"},onClick:w,children:"Limpar Tudo"}),a.jsx("div",{style:{flex:1}}),a.jsxs("div",{style:{fontWeight:900},children:["Total: $ ",y.toLocaleString(),u.size>1&&a.jsxs("span",{style:{fontSize:"12px",opacity:.8,marginLeft:"8px"},children:["(",d.size," treinamentos  ",u.size," tipos)"]})]})]}),a.jsxs("div",{style:qt.btnRow,children:[a.jsx("button",{type:"button",style:{...qt.bigBtn,background:"#444"},onClick:E,children:"No comprar"}),a.jsxs("button",{type:"button",disabled:x.length===0,style:{...qt.bigBtn,background:x.length>0?"#6f5bd6":"#3a3a3a",opacity:x.length>0?1:.6,cursor:x.length>0?"pointer":"not-allowed"},onClick:g,children:["Comprar (",x.length," tipo",x.length!==1?"s":"",")"]})]})]})]})})}const qt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",maxWidth:980,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},allDoneBox:{background:"#0f1320",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"14px",fontWeight:800,textAlign:"center"},vendorRow:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:10,marginBottom:12},vendorBtn:{padding:"10px 12px",borderRadius:10,border:"1px solid",color:"#fff",fontWeight:800,cursor:"pointer"},products:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:12,margin:"4px 0 10px"},productCard:{textAlign:"center",padding:"16px 14px",borderRadius:14,border:"2px solid",color:"#fff"},pill:t=>({display:"inline-block",background:t,color:"#111",fontWeight:900,padding:"4px 8px",borderRadius:999,marginBottom:8}),actionsRow:{display:"flex",alignItems:"center",gap:12,margin:"6px 0 6px"},smallBtn:{padding:"10px 14px",borderRadius:10,border:"none",color:"#fff",fontWeight:800,cursor:"pointer"},btnRow:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:12},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",color:"#fff",fontWeight:900,cursor:"pointer"}};function Hx({onResolve:t,currentCash:e=0}){const n=k.useRef(null),r=i=>{var l,u;(l=i==null?void 0:i.preventDefault)==null||l.call(i),(u=i==null?void 0:i.stopPropagation)==null||u.call(i),t==null||t({action:"SKIP"})};k.useEffect(()=>{const i=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var l,u;return(u=(l=n.current)==null?void 0:l.focus)==null?void 0:u.call(l)},0),()=>{document.body.style.overflow=i}},[]);const o=i=>()=>{t==null||t({action:"OPEN",open:String(i).toUpperCase()})},s=[{key:"mix",title:"Mix Produtos",lines:["Nvel A: $12000","Nvel B: $6000","Nvel C: $3000","Nvel D: $1000"],onBuy:o("MIX")},{key:"gestor",title:"Gestor Comercial",lines:["Contratao: $5000","Manuteno: $3000"],onBuy:o("MANAGER")},{key:"inside",title:"Inside Sales",lines:["Contratao: $3000","Manuteno: $2000"],onBuy:o("INSIDE")},{key:"field",title:"Field Sales",lines:["Contratao: $3000","Manuteno: $2000"],onBuy:o("FIELD")},{key:"vendedor",title:"Vendedor Comum",lines:["Contratao: $1500","Despesas: $1000"],onBuy:o("COMMON")},{key:"erp",title:"ERP/Sistemas",lines:["Nvel A: $10000","Nvel B: $4000","Nvel C: $1500","Nvel D: $500"],onBuy:o("ERP")},{key:"carteira",title:"Carteira de Clientes",lines:["Aquisio: $1000"],onBuy:o("CLIENTS")},{key:"training",title:"Treinamento",lines:["Azul: $500","Amarelo: $500","Roxo: $500"],onBuy:o("TRAINING")}];return a.jsx("div",{style:Gn.wrap,role:"dialog","aria-modal":"true",children:a.jsxs("div",{style:Gn.card,children:[a.jsx("button",{ref:n,type:"button",style:Gn.close,onClick:r,"aria-label":"Fechar",children:""}),a.jsx("h2",{style:Gn.title,children:"Direto de Compra  escolha uma casa para adquirir:"}),a.jsxs("div",{style:{marginBottom:8,opacity:.8,fontSize:13},children:["Saldo atual: ",a.jsxs("b",{children:["$",Number(e).toLocaleString()]})]}),a.jsx("div",{style:Gn.grid,children:s.map(i=>a.jsxs("div",{style:Gn.cell,children:[a.jsx("div",{style:Gn.cellTitle,children:i.title}),a.jsx("ul",{style:Gn.lines,children:i.lines.map((l,u)=>a.jsx("li",{children:l},u))}),a.jsx("button",{type:"button",style:Gn.buyBtn,onClick:i.onBuy,children:"Comprar"})]},i.key))}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:16},children:a.jsx("button",{type:"button",style:{...Gn.buyBtn,background:"#666"},onClick:r,children:"No Comprar"})})]})})}const Gn={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(1000px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 16px",fontWeight:800},grid:{display:"grid",gridTemplateColumns:"repeat(4, minmax(180px, 1fr))",gap:12},cell:{background:"#0f1320",border:"1px solid rgba(255,255,255,.08)",borderRadius:12,padding:12,display:"flex",flexDirection:"column",gap:8,minHeight:160},cellTitle:{fontWeight:800,marginBottom:4},lines:{margin:0,padding:"0 0 0 16px",opacity:.85,lineHeight:1.3},buyBtn:{marginTop:"auto",alignSelf:"center",minWidth:140,padding:"10px 14px",borderRadius:10,border:"none",background:"#3fbf49",color:"#09110f",fontWeight:900,cursor:"pointer"}};function yf({onResolve:t,currentCash:e=0}){const n=k.useRef(null),[r,o]=k.useState(""),{pushModal:s,awaitTop:i}=Qt(),l=3e3,u=2e3,c=1500,d=k.useMemo(()=>{const m=Number(r);return Number.isFinite(m)&&m>0?Math.floor(m):0},[r]),h=d*l,f=d>0,x=Math.max(0,Math.floor(Number(e||0)/l)),y=m=>{var g,w;(g=m==null?void 0:m.preventDefault)==null||g.call(m),(w=m==null?void 0:m.stopPropagation)==null||w.call(m),t==null||t({action:"SKIP"})},b=m=>{const g=Number(r)||0,w=Math.min(x||1/0,g+m);o(w||"")},_=()=>o(x||""),p=async()=>{if(!f)return;const m=Number(e||0),g=Number(h||0);if(m<g){s(a.jsx(pr,{requiredAmount:g,currentCash:m,title:"Saldo insuficiente para contratar Inside Sales",message:`Voc precisa de $ ${g.toLocaleString()} mas possui $ ${m.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",qty:d,headcount:d,unitHire:l,total:h,cost:h,totalCost:h,baseExpense:u,baseRevenue:c})};return k.useEffect(()=>{const m=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var g,w;return(w=(g=n.current)==null?void 0:g.focus)==null?void 0:w.call(g)},0),()=>{document.body.style.overflow=m}},[]),a.jsx("div",{style:dt.wrap,role:"dialog","aria-modal":"true","aria-label":"Inside Sales",children:a.jsxs("div",{style:dt.card,children:[a.jsx("button",{ref:n,type:"button",style:dt.close,onClick:y,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:dt.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Inside Sales"})," quer comprar:"]}),a.jsxs("div",{style:dt.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"INSIDE SALES (SDR/BDR + CLOSER + CS)"}),a.jsxs("div",{children:[a.jsx("b",{children:"Base para clculo despesa:"}),"  quantidade ",a.jsx("b",{children:"field sales"})," ou ",a.jsx("b",{children:"inside sales"}),"."]}),a.jsxs("div",{children:[a.jsx("b",{children:"Base para clculo faturamento:"}),"  quantidade ",a.jsx("b",{children:"mxima de clientes que cada vendedor pode atender"}),"."]})]}),a.jsxs("div",{style:dt.saldoRow,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:x})]})]}),a.jsxs("div",{style:dt.inputRow,children:[a.jsx("input",{type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Inside Sales",value:r,onChange:m=>o(m.target.value),style:dt.input}),a.jsxs("div",{style:dt.quickBtns,children:[a.jsx("button",{type:"button",style:dt.quickBtn,onClick:()=>b(1),children:"+1"}),a.jsx("button",{type:"button",style:dt.quickBtn,onClick:()=>b(5),children:"+5"}),a.jsx("button",{type:"button",style:dt.quickBtn,onClick:()=>b(10),children:"+10"}),a.jsx("button",{type:"button",style:{...dt.quickBtn,fontWeight:900},onClick:_,children:"Mx"})]}),a.jsxs("div",{style:dt.totalBox,children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(h).toLocaleString()]})]})]}),a.jsxs("div",{style:dt.cards,children:[a.jsx(ji,{title:"Sem certificado",bg:"#2a2f3b",pill:"BASE",lines:[`Contratao: $ ${l.toLocaleString()}`,`Despesa: $ ${u.toLocaleString()}`,`Faturamento: $ ${c.toLocaleString()}`]}),a.jsx(ji,{title:"1 certificado",bg:"#f1c40f",pill:"NVEL 1",dark:!0,lines:["Contratao: ","Despesa: $ 2.100","Faturamento: $ 2.000"]}),a.jsx(ji,{title:"2 certificados",bg:"#a78bfa",pill:"NVEL 2",dark:!0,lines:["Contratao: ","Despesa: $ 2.200","Faturamento: $ 2.500"]}),a.jsx(ji,{title:"3 certificados",bg:"#8b5cf6",pill:"NVEL 3",dark:!0,lines:["Contratao: ","Despesa: $ 2.300","Faturamento: $ 3.000"]})]}),a.jsxs("div",{style:dt.actions,children:[a.jsx("button",{type:"button",style:{...dt.bigBtn,background:"#666",color:"#fff"},onClick:y,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...dt.bigBtn,background:f?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:p,disabled:!f,title:f?void 0:"Informe uma quantidade vlida",children:["Comprar ",f?`($ ${h.toLocaleString()})`:""]})]})]})})}function ji({title:t,pill:e,lines:n,bg:r,dark:o=!1}){return a.jsxs("div",{style:{...dt.cardItem,background:r,color:o?"#111":"#fff",borderColor:"rgba(255,255,255,.15)"},children:[a.jsxs("div",{style:dt.cardHeader,children:[a.jsx("span",{style:{...dt.pill,background:o?"#111":"#fff",color:o?"#fff":"#111"},children:e}),a.jsx("div",{style:{fontWeight:900},children:t})]}),a.jsx("ul",{style:dt.lines,children:n.map((s,i)=>a.jsx("li",{children:s},i))})]})}const dt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldoRow:{display:"flex",justifyContent:"space-between",gap:12,padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10,marginBottom:8},inputRow:{display:"grid",gridTemplateColumns:"1fr auto auto",alignItems:"center",gap:10,marginBottom:12},input:{height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6},quickBtn:{minWidth:44,height:42,borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",fontWeight:800,cursor:"pointer",padding:"0 10px"},totalBox:{padding:"8px 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#0f1320",fontWeight:900},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,margin:"8px 0 14px"},cardItem:{border:"1px solid",borderRadius:14,padding:"14px"},cardHeader:{display:"flex",alignItems:"center",gap:8,marginBottom:8},pill:{fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:8},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function vf({onResolve:t,unitAcquisition:e=1e3,unitMaintenance:n=50,currentCash:r=0}){const o=k.useRef(null),s=k.useRef(null),{pushModal:i,awaitTop:l}=Qt(),[u,c]=k.useState(""),d=k.useMemo(()=>{const E=Math.floor(Number(u));return Number.isFinite(E)&&E>0?E:0},[u]),h=Number(e||0),f=Number(n||0),x=Number(r||0),y=k.useMemo(()=>h<=0?0:Math.max(0,Math.floor(x/h)),[x,h]),b=d*h,_=d*f,p=d>0,m=E=>{var D,N;(D=E==null?void 0:E.preventDefault)==null||D.call(E),(N=E==null?void 0:E.stopPropagation)==null||N.call(E),t==null||t({action:"SKIP"})},g=async()=>{if(p){if(x<b){i(a.jsx(pr,{requiredAmount:b,currentCash:x,title:"Saldo insuficiente para comprar clientes",message:"Voc no possui saldo suficiente para concluir esta aquisio.",okLabel:"Entendi"})),await l();return}t==null||t({action:"BUY",qty:d,unitAcquisition:h,totalCost:b,unitMaintenance:f,maintenanceDelta:_,bensDelta:b,clientsAdded:d})}};k.useEffect(()=>{const E=document.body.style.overflow;document.body.style.overflow="hidden";const D=setTimeout(()=>{var T,v;return(v=(T=o.current)==null?void 0:T.focus)==null?void 0:v.call(T)},0),N=setTimeout(()=>{var T,v;return(v=(T=s.current)==null?void 0:T.focus)==null?void 0:v.call(T)},50),S=T=>{T.key==="Enter"&&(T.preventDefault(),g())};return window.addEventListener("keydown",S),()=>{document.body.style.overflow=E,window.removeEventListener("keydown",S),clearTimeout(D),clearTimeout(N)}},[]);const w=E=>{const D=Math.max(0,Math.min(Math.floor(Number(E)||0),1e6));c(String(D))};return a.jsx("div",{style:Rt.wrap,role:"dialog","aria-modal":"true",onMouseDown:E=>{E.target===E.currentTarget&&E.stopPropagation()},children:a.jsxs("div",{style:Rt.card,onMouseDown:E=>E.stopPropagation(),children:[a.jsx("button",{ref:o,type:"button",style:Rt.close,onClick:m,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Rt.title,children:["Voc pode escolher quantos clientes quer comprar,",a.jsx("br",{}),"Digite o nmero de clientes:"]}),a.jsxs("p",{style:Rt.warn,children:[a.jsx("b",{children:"Mas cuidado com a capacidade de atendimento da sua equipe!"}),a.jsx("br",{}),"Se o jogador adquirir mais clientes do que os vendedores podem atender, assim que passar na casa ",a.jsx("i",{children:"Faturamento do Ms"})," no receber o faturamento dos clientes excedentes e perder o(s) cliente(s) que no foram atendidos."]}),a.jsxs("div",{style:Rt.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",x.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:y})]})]}),a.jsxs("div",{style:Rt.qtyRow,children:[a.jsx("input",{ref:s,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Clientes",value:u,onChange:E=>w(E.target.value),style:Rt.input}),a.jsxs("div",{style:Rt.quickBtns,children:[a.jsx("button",{type:"button",style:Rt.qbtn,onClick:()=>w(d+1),children:"+1"}),a.jsx("button",{type:"button",style:Rt.qbtn,onClick:()=>w(d+5),children:"+5"}),a.jsx("button",{type:"button",style:Rt.qbtn,onClick:()=>w(d+10),children:"+10"}),a.jsx("button",{type:"button",style:Rt.qbtn,onClick:()=>w(y),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:Rt.summary,children:[a.jsxs("div",{children:["Preo por cliente: ",a.jsxs("b",{children:["$ ",h.toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal por cliente: ",a.jsxs("b",{children:["$ ",f.toLocaleString()]})]})]}),a.jsxs("div",{style:Rt.summaryStrong,children:[a.jsxs("div",{children:["Total compra: ",a.jsxs("b",{children:["$ ",Number(b).toLocaleString()]})]}),a.jsxs("div",{children:["Manuteno mensal adicionada: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]})]}),a.jsxs("div",{style:Rt.actions,children:[a.jsx("button",{type:"button",style:{...Rt.bigBtn,background:"#666",color:"#fff"},onClick:m,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...Rt.bigBtn,background:p?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:g,disabled:!p,title:p?x<b?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",p?`($ ${b.toLocaleString()})`:""]})]})]})})}const Rt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(820px, 92vw)",maxWidth:820,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},warn:{background:"#271c12",border:"1px solid rgba(255,180,0,.35)",color:"#ffd489",borderRadius:10,padding:"10px 12px",margin:"0 0 12px"},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},summary:{display:"flex",justifyContent:"space-between",gap:10,border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginBottom:8,fontWeight:700,flexWrap:"wrap"},summaryStrong:{display:"flex",justifyContent:"space-between",gap:10,border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginBottom:10,fontWeight:800,flexWrap:"wrap"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:4,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function xf({onResolve:t,unitHire:e=5e3,unitExpense:n=3e3,managesUpTo:r=7,currentCash:o=0}){const s=k.useRef(null),i=k.useRef(null),{pushModal:l,awaitTop:u}=Qt(),[c,d]=k.useState(""),h=Number(e||0),f=Number(n||0),x=Number(o||0),y=k.useMemo(()=>{const D=Math.floor(Number(c));return Number.isFinite(D)&&D>0?D:0},[c]),b=k.useMemo(()=>h<=0?0:Math.max(0,Math.floor(x/h)),[x,h]),_=y*h,p=y*f,m=y>0,g=D=>{const N=Math.floor(Number(D)||0),S=Math.max(0,Math.min(N,1e6));d(String(S))},w=D=>{var N,S;(N=D==null?void 0:D.preventDefault)==null||N.call(D),(S=D==null?void 0:D.stopPropagation)==null||S.call(D),t==null||t({action:"SKIP"})},E=async()=>{if(m){if(x<_){l(a.jsx(pr,{requiredAmount:_,currentCash:x,title:"Saldo insuficiente para contratar Gestores",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await u();return}t==null||t({action:"BUY",role:"MANAGER",qty:y,headcount:y,gestoresDelta:y,unitHire:h,unitExpense:f,totalHire:_,totalExpense:p,cost:_,total:_,cashDelta:-_,expenseDelta:p,hudUpdate:{category:"Gestores Comerciais",addQty:y}})}};return k.useEffect(()=>{const D=document.body.style.overflow;document.body.style.overflow="hidden";const N=setTimeout(()=>{var v,A;return(A=(v=s.current)==null?void 0:v.focus)==null?void 0:A.call(v)},0),S=setTimeout(()=>{var v,A;return(A=(v=i.current)==null?void 0:v.focus)==null?void 0:A.call(v)},60),T=v=>{v.key==="Enter"&&(v.preventDefault(),E())};return window.addEventListener("keydown",T),()=>{document.body.style.overflow=D,window.removeEventListener("keydown",T),clearTimeout(N),clearTimeout(S)}},[]),a.jsx("div",{style:He.wrap,role:"dialog","aria-modal":"true",onMouseDown:D=>{D.target===D.currentTarget&&D.stopPropagation()},children:a.jsxs("div",{style:He.card,onMouseDown:D=>D.stopPropagation(),children:[a.jsx("button",{ref:s,type:"button",style:He.close,onClick:w,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:He.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Gestores"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de gestores:"]}),a.jsxs("div",{style:He.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",x.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{style:He.qtyRow,children:[a.jsx("input",{ref:i,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Gestores",value:c,onChange:D=>g(D.target.value),style:He.input}),a.jsxs("div",{style:He.quickBtns,children:[a.jsx("button",{type:"button",style:He.qbtn,onClick:()=>g(y+1),children:"+1"}),a.jsx("button",{type:"button",style:He.qbtn,onClick:()=>g(y+5),children:"+5"}),a.jsx("button",{type:"button",style:He.qbtn,onClick:()=>g(y+10),children:"+10"}),a.jsx("button",{type:"button",style:He.qbtn,onClick:()=>g(b),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:He.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"GESTOR COMERCIAL"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo de despesa: ",a.jsx("b",{children:"x quantidade de Gestores"}),".",a.jsx("br",{}),"Cada Gestor gerencia at ",a.jsx("b",{children:r})," colaboradores."]}),a.jsxs("div",{style:He.table,children:[a.jsxs("div",{style:He.trHead,children:[a.jsx("div",{style:He.th,children:"Certificao"}),a.jsx("div",{style:He.th,children:"Contratao"}),a.jsx("div",{style:He.th,children:"Despesa"}),a.jsx("div",{style:He.th,children:"Efeito"})]}),a.jsx(Ci,{label:"Sem Certificado",hire:5e3,expense:3e3,revenue:"potencializa colaboradores em 20%"}),a.jsx(Ci,{label:"Com 1 certificado",hire:"-",expense:3500,revenue:"potencializa colaboradores em 30%"}),a.jsx(Ci,{label:"Com 2 certificados",hire:"-",expense:4e3,revenue:"potencializa colaboradores em 40%"}),a.jsx(Ci,{label:"Com 3 certificados",hire:"-",expense:4500,revenue:"potencializa colaboradores em 60%"})]})]}),a.jsxs("div",{style:He.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / gestor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / gestor"]})]}),a.jsxs("div",{style:He.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]})]}),a.jsxs("div",{style:He.actions,children:[a.jsx("button",{type:"button",style:{...He.bigBtn,background:"#666",color:"#fff"},onClick:w,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...He.bigBtn,background:m?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:E,disabled:!m,title:m?x<_?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",m?`(${y})`:""]})]})]})})}function Ci({label:t,hire:e,expense:n,revenue:r}){const o=s=>typeof s=="number"?`$ ${Number(s).toLocaleString()}`:s;return a.jsxs("div",{style:He.tr,children:[a.jsx("div",{style:He.td,children:t}),a.jsx("div",{style:He.td,children:o(e)}),a.jsx("div",{style:He.td,children:o(n)}),a.jsx("div",{style:He.td,children:r})]})}const He={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"12px",background:"#101522",marginBottom:12},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,overflow:"hidden"},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 3fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 3fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function bf({onResolve:t,unitHire:e=3e3,unitExpense:n=2e3,attendsUpTo:r=5,currentCash:o=0}){const s=k.useRef(null),i=k.useRef(null),{pushModal:l,awaitTop:u}=Qt(),[c,d]=k.useState(""),h=Number(e||0),f=Number(n||0),x=Number(o||0),y=k.useMemo(()=>{const S=Math.floor(Number(c));return Number.isFinite(S)&&S>0?S:0},[c]),b=k.useMemo(()=>h<=0?0:Math.max(0,Math.floor(x/h)),[x,h]),_=y*h,p=y*f,g=y*1500,w=y>0,E=S=>{const T=Math.floor(Number(S)||0),v=Math.max(0,Math.min(T,1e6));d(String(v))},D=S=>{var T,v;(T=S==null?void 0:S.preventDefault)==null||T.call(S),(v=S==null?void 0:S.stopPropagation)==null||v.call(S),t==null||t({action:"SKIP"})},N=async()=>{if(w){if(x<_){l(a.jsx(pr,{requiredAmount:_,currentCash:x,title:"Saldo insuficiente para contratar Field Sales",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await u();return}t==null||t({action:"BUY",qty:y,unitHire:h,unitExpense:f,totalHire:_,totalExpense:p,cashDelta:-_,expenseDelta:p,revenueDelta:g,cost:_,total:_,role:"FIELD"})}};return k.useEffect(()=>{const S=document.body.style.overflow;document.body.style.overflow="hidden";const T=setTimeout(()=>{var O,$;return($=(O=s.current)==null?void 0:O.focus)==null?void 0:$.call(O)},0),v=setTimeout(()=>{var O,$;return($=(O=i.current)==null?void 0:O.focus)==null?void 0:$.call(O)},50),A=O=>{O.key==="Enter"&&(O.preventDefault(),N())};return window.addEventListener("keydown",A),()=>{document.body.style.overflow=S,window.removeEventListener("keydown",A),clearTimeout(T),clearTimeout(v)}},[]),a.jsx("div",{style:Ke.wrap,role:"dialog","aria-modal":"true",onMouseDown:S=>{S.target===S.currentTarget&&S.stopPropagation()},children:a.jsxs("div",{style:Ke.card,onMouseDown:S=>S.stopPropagation(),children:[a.jsx("button",{ref:s,type:"button",style:Ke.close,onClick:D,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Ke.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Field Sales"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de vendedores:"]}),a.jsxs("div",{style:Ke.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",x.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{style:Ke.qtyRow,children:[a.jsx("input",{ref:i,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Field Sales",value:c,onChange:S=>E(S.target.value),style:Ke.input}),a.jsxs("div",{style:Ke.quickBtns,children:[a.jsx("button",{type:"button",style:Ke.qbtn,onClick:()=>E(y+1),children:"+1"}),a.jsx("button",{type:"button",style:Ke.qbtn,onClick:()=>E(y+5),children:"+5"}),a.jsx("button",{type:"button",style:Ke.qbtn,onClick:()=>E(y+10),children:"+10"}),a.jsx("button",{type:"button",style:Ke.qbtn,onClick:()=>E(b),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:Ke.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"FIELD SALES (REPRESENTANTES COMERCIAIS)"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo de despesa: ",a.jsx("b",{children:"x quantidade de Field Sales"}),".",a.jsx("br",{}),"Base para clculo de faturamento: ",a.jsx("b",{children:"x quantidade mxima de clientes que cada vendedor pode atender"}),".",a.jsx("br",{}),"Cada vendedor atende at ",a.jsx("b",{children:r})," clientes."]}),a.jsxs("div",{style:Ke.table,children:[a.jsxs("div",{style:Ke.trHead,children:[a.jsx("div",{style:Ke.th,children:"Certificao"}),a.jsx("div",{style:Ke.th,children:"Contratao"}),a.jsx("div",{style:Ke.th,children:"Despesa"}),a.jsx("div",{style:Ke.th,children:"Faturamento"})]}),a.jsx(Ri,{label:"S/ Certificado",hire:"$ 3.000",expense:"$ 2.000",revenue:"$ 1.500"}),a.jsx(Ri,{label:"Com 1 certificado",hire:"-",expense:"$ 2.100",revenue:"$ 2.000"}),a.jsx(Ri,{label:"Com 2 certificados",hire:"-",expense:"$ 2.200",revenue:"$ 2.500"}),a.jsx(Ri,{label:"Com 3 certificados",hire:"-",expense:"$ 2.300",revenue:"$ 3.000"})]})]}),a.jsxs("div",{style:Ke.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / vendedor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / vendedor"]})]}),a.jsxs("div",{style:Ke.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]})]}),a.jsxs("div",{style:Ke.actions,children:[a.jsx("button",{type:"button",style:{...Ke.bigBtn,background:"#666",color:"#fff"},onClick:D,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...Ke.bigBtn,background:w?"#75e16c":"#365b31",color:"#0b120a"},onClick:N,disabled:!w,title:w?x<_?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",w?`(${y})`:""]})]})]})})}function Ri({label:t,hire:e,expense:n,revenue:r}){return a.jsxs("div",{style:Ke.tr,children:[a.jsx("div",{style:Ke.td,children:t}),a.jsx("div",{style:Ke.td,children:e}),a.jsx("div",{style:Ke.td,children:n}),a.jsx("div",{style:Ke.td,children:r})]})}const Ke={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"12px",background:"#101522",marginBottom:12},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,overflow:"hidden"},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function wf({onResolve:t,unitHire:e=1500,unitExpense:n=1e3,attendsUpTo:r=2,currentCash:o=0}){const[s,i]=k.useState(""),l=k.useRef(null),u=k.useRef(null),{pushModal:c,awaitTop:d}=Qt(),h=Number(e||0),f=Number(n||0),x=Number(o||0),y=600,b=k.useMemo(()=>{const N=Math.floor(Number(s));return Number.isFinite(N)&&N>0?N:0},[s]),_=k.useMemo(()=>h<=0?0:Math.max(0,Math.floor(x/h)),[x,h]),p=k.useMemo(()=>b*h,[b,h]),m=k.useMemo(()=>b*f,[b,f]),g=b>0,w=N=>{const S=Math.floor(Number(N)||0),T=Math.max(0,Math.min(S,1e6));i(String(T))},E=N=>{var S;(S=N==null?void 0:N.stopPropagation)==null||S.call(N),t==null||t({action:"SKIP"})},D=async()=>{if(!g)return;if(x<p){c(a.jsx(pr,{requiredAmount:p,currentCash:x,title:"Saldo insuficiente para contratar vendedores",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await d();return}const N={action:"BUY",role:"COMMON",qty:b,headcount:b,unitHire:h,unitExpense:f,totalHire:p,totalExpense:m,total:p,cost:p,attendsUpTo:r,cashDelta:-p,expenseDelta:m,revenueDelta:y*b,revenuePerSeller:y,hudUpdate:{category:"Vendedores Comuns",addQty:b}};t==null||t(N)};return k.useEffect(()=>{const N=document.body.style.overflow;document.body.style.overflow="hidden";const S=setTimeout(()=>{var A,O;return(O=(A=l.current)==null?void 0:A.focus)==null?void 0:O.call(A)},0),T=setTimeout(()=>{var A,O;return(O=(A=u.current)==null?void 0:A.focus)==null?void 0:O.call(A)},50),v=A=>{A.key==="Enter"&&(A.preventDefault(),D())};return window.addEventListener("keydown",v),()=>{document.body.style.overflow=N,window.removeEventListener("keydown",v),clearTimeout(S),clearTimeout(T)}},[]),a.jsx("div",{style:Je.wrap,role:"dialog","aria-modal":"true","aria-label":"Comprar Vendedores Comuns",onMouseDown:N=>{N.target===N.currentTarget&&N.stopPropagation()},children:a.jsxs("div",{style:Je.card,onMouseDown:N=>N.stopPropagation(),children:[a.jsx("button",{ref:l,type:"button",style:Je.close,onClick:E,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Je.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Vendedores Comuns"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de vendedores:"]}),a.jsxs("div",{style:Je.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",x.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:_})]})]}),a.jsxs("div",{style:Je.qtyRow,children:[a.jsx("input",{ref:u,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Vendedores Comuns",value:s,onChange:N=>w(N.target.value),style:Je.input}),a.jsxs("div",{style:Je.quickBtns,children:[a.jsx("button",{type:"button",style:Je.qbtn,onClick:()=>w(b+1),children:"+1"}),a.jsx("button",{type:"button",style:Je.qbtn,onClick:()=>w(b+5),children:"+5"}),a.jsx("button",{type:"button",style:Je.qbtn,onClick:()=>w(b+10),children:"+10"}),a.jsx("button",{type:"button",style:Je.qbtn,onClick:()=>w(_),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:Je.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"VENDEDOR COMUM (FAZ TUDO)"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo despesa: ",a.jsx("b",{children:"x quantidade vendedor comum"}),".",a.jsx("br",{}),"Base para clculo faturamento: ",a.jsx("b",{children:"x quantidade mxima de clientes que cada vendedor pode atender"}),".",a.jsx("br",{}),a.jsxs("b",{children:["Atende at ",r," clientes"]}),"."]}),a.jsxs("div",{style:Je.table,children:[a.jsxs("div",{style:Je.trHead,children:[a.jsx("div",{style:Je.th,children:"Certificao"}),a.jsx("div",{style:Je.th,children:"Contratao"}),a.jsx("div",{style:Je.th,children:"Despesa"}),a.jsx("div",{style:Je.th,children:"Faturamento"})]}),a.jsx(Ni,{label:"S/ Certificado",hire:"$ 1.500",expense:"$ 1.000",revenue:"$ 600"}),a.jsx(Ni,{label:"Com 1 certificado",hire:"-",expense:"$ 1.100",revenue:"$ 700"}),a.jsx(Ni,{label:"Com 2 certificados",hire:"-",expense:"$ 1.200",revenue:"$ 800"}),a.jsx(Ni,{label:"Com 3 certificados",hire:"-",expense:"$ 1.300",revenue:"$ 900"})]})]}),a.jsxs("div",{style:Je.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / vendedor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / vendedor"]})]}),a.jsxs("div",{style:Je.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(m).toLocaleString()]})]})]}),a.jsxs("div",{style:Je.actions,children:[a.jsx("button",{type:"button",style:{...Je.bigBtn,background:"#666",color:"#fff"},onClick:E,children:"No comprar"}),a.jsx("button",{type:"button",disabled:!g,style:{...Je.bigBtn,background:g?"#7cbe1a":"#3a3f4a",color:"#0d1200",fontWeight:900},onClick:D,title:g?x<p?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:"Comprar"})]})]})})}function Ni({label:t,hire:e,expense:n,revenue:r}){return a.jsxs("div",{style:Je.tr,children:[a.jsx("div",{style:Je.td,children:t}),a.jsx("div",{style:Je.td,children:e}),a.jsx("div",{style:Je.td,children:n}),a.jsx("div",{style:Je.td,children:r})]})}const Je={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#111522",color:"#eef2f7",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{background:"#161a28",border:"1px solid rgba(255,255,255,.12)",borderRadius:14,padding:14,marginTop:6},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,overflow:"hidden",marginTop:8},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function Sf({onResolve:t,currentCash:e,currentLevel:n=null,mixOwned:r=null}){const o=k.useRef(null),{pushModal:s,awaitTop:i}=Qt(),l={A:{compra:12e3,despesa:700,faturamento:1200,color:"#1d4ed8",pill:"NVEL A",label:"100 produtos"},B:{compra:6e3,despesa:400,faturamento:600,color:"#16a34a",pill:"NVEL B",label:"50 produtos"},C:{compra:3e3,despesa:200,faturamento:300,color:"#f59e0b",pill:"NVEL C",label:"20 produtos"},D:{compra:1e3,despesa:50,faturamento:100,color:"#6b7280",pill:"NVEL D",label:"5 produtos"}};async function u(d){if(r?r[d]===!0:n===d)return;const f=l[d],x=Number((f==null?void 0:f.compra)||0),y=Number(e);if(Number.isFinite(y)&&y>=0&&y<x){s(a.jsx(pr,{requiredAmount:x,currentCash:y,title:"Saldo insuficiente para adquirir o Mix de Produtos",message:`Voc precisa de $ ${x.toLocaleString()} mas possui $ ${y.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",level:d,...f})}function c(){t==null||t({action:"SKIP"})}return k.useEffect(()=>{const d=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var h,f;return(f=(h=o.current)==null?void 0:h.focus)==null?void 0:f.call(h)},0),()=>{document.body.style.overflow=d}},[]),a.jsx("div",{style:nn.wrap,role:"dialog","aria-modal":"true","aria-label":"Mix de Produtos",children:a.jsxs("div",{style:nn.card,children:[a.jsx("button",{ref:o,type:"button",style:nn.close,onClick:c,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:nn.title,children:["Escolha um ",a.jsx("b",{children:"mix de produtos"}),":"]}),a.jsxs("div",{style:nn.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"MIX DE PRODUTOS"}),a.jsxs("div",{children:["Base para clculo de ",a.jsx("b",{children:"Despesa"}),"/",a.jsx("b",{children:"Faturamento"}),": multiplicar pela ",a.jsx("b",{children:"quantidade total de clientes"}),"."]})]}),Number.isFinite(Number(e))&&a.jsxs("div",{style:nn.saldo,children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsx("div",{style:nn.cards,children:["A","B","C","D"].map(d=>{const h=l[d],f=r?r[d]===!0:n===d,x=f;return a.jsxs("div",{style:{...nn.cardItem,borderColor:f?"#16a34a":"rgba(255,255,255,.15)",opacity:x?.6:1},children:[a.jsx("div",{style:{...nn.pill,background:f?"#16a34a":"#fff",color:f?"#fff":"#111"},children:f?" ADQUIRIDO":h.pill}),a.jsx("div",{style:{...nn.cardBadge,background:h.color}}),a.jsxs("ul",{style:nn.lines,children:[a.jsx("li",{children:a.jsx("b",{children:h.label})}),a.jsxs("li",{children:["Compra: ",a.jsxs("b",{children:["$ ",h.compra.toLocaleString()]})]}),a.jsxs("li",{children:["Despesa: ",a.jsxs("b",{children:["$ ",h.despesa.toLocaleString()]})]}),a.jsxs("li",{children:["Faturamento: ",a.jsxs("b",{children:["$ ",h.faturamento.toLocaleString()]})]})]}),a.jsx("button",{type:"button",style:{...nn.buyBtn,background:x?"#6b7280":"#2442f9",cursor:x?"not-allowed":"pointer"},onClick:()=>u(d),disabled:x,title:x?`Mix nvel ${d} j adquirido`:`Comprar Mix de Produtos ${d}`,children:x?"J Adquirido":`Comprar ${d}`})]},d)})}),a.jsx("div",{style:nn.actions,children:a.jsx("button",{type:"button",style:{...nn.bigBtn,background:"#444",color:"#fff"},onClick:c,children:"No comprar"})})]})})}const nn={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldo:{margin:"0 0 10px",padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,marginTop:8},cardItem:{background:"#0f1320",border:"1px solid",borderRadius:14,padding:"12px",display:"flex",flexDirection:"column",gap:8},cardBadge:{width:"100%",height:6,borderRadius:999,opacity:.9},pill:{alignSelf:"flex-start",fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999,color:"#111"},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},buyBtn:{marginTop:"auto",padding:"10px 12px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer",background:"#2442f9",color:"#fff"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:14},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function Kx({onResolve:t,player:e={}}){const n=k.useRef(null),r=(_,p=0)=>Number.isFinite(Number(_))?Number(_):p,o=_=>r(_.am,0)>0,s=_=>r(_.az,0)>0,i=_=>r(_.rox,0)>0,l=_=>String(_.erpLevel||_.erpSistemas||"D").toUpperCase()==="A",u=_=>{const p=String(_.mixProdutos||"D").toUpperCase();return p==="A"||p==="B"},c=_=>{var m;const p=g=>{if(!g)return 0;try{const w=Array.isArray(g)?g:Object.values(g);return new Set(w).size}catch{return 0}};return(m=_.trainingsByVendor)!=null&&m.gestor?p(_.trainingsByVendor.gestor):r(_.gestoresCertificados,0)},d=_=>r(_.vendedoresComuns)+r(_.insideSales)+r(_.fieldSales)+r(_.gestores??_.gestoresComerciais??_.managers),h=k.useMemo(()=>[{id:"gov_fgts",kind:"SORTE",title:"Ao Governamental Positiva",text:"Liberao de FGTS aumentou o poder de compra. Receba 5 novos clientes (se tiver equipe para atender).",clientsDelta:5},{id:"referral_bonus",kind:"SORTE",title:"Indicao Lucrativa",text:"Um cliente indicou amigos e a primeira compra foi tima. Receba R$ 800,00.",cashDelta:800},{id:"network_cert_mgr",kind:"SORTE",title:"Rede Estratgica",text:"Para cada gestor com certificado, receba R$ 5.000,00.",_compute:_=>({cashDelta:5e3*c(_)})},{id:"innovation_invest",kind:"SORTE",title:"Inovao Premiada",text:"Se tiver infraestrutura (mix/sistemas) nvel A ou B, receba aporte de R$ 25.000,00.",_compute:_=>({cashDelta:u(_)?25e3:0})},{id:"segmentation",kind:"SORTE",title:"Segmentao Inteligente",text:"Novo segmento lucrativo. Receba R$ 1.000,00.",cashDelta:1e3},{id:"casa_bonus_10k",kind:"SORTE",title:"Casagrande Insights",text:"Implementao bem-sucedida. Receba R$ 10.000,00.",cashDelta:1e4},{id:"casa_network_7k",kind:"SORTE",title:"Rede de Contatos Valiosa",text:"Parceria estratgica. Ganhe R$ 7.000,00.",cashDelta:7e3},{id:"casa_strategy_5k",kind:"SORTE",title:"Estratgia Personalizada",text:"Processos melhorados. Receba R$ 5.000,00.",cashDelta:5e3},{id:"casa_best_practices_8k",kind:"SORTE",title:"Melhores Prticas",text:"Eficincia aumentada. Receba R$ 8.000,00.",cashDelta:8e3},{id:"casa_start_6k",kind:"SORTE",title:"Satisfao do Cliente em Alta",text:"Fidelidade e vendas sobem. Receba R$ 6.000,00.",cashDelta:6e3},{id:"casa_change_cert_blue",kind:"SORTE",title:"Gesto de Mudanas Bem-sucedida",text:"Um vendedor generalista concluiu todos os treinamentos. Ganhe um certificado AZUL para esse vendedor.",_compute:()=>({certDelta:{az:1}})},{id:"training_roi_team",kind:"SORTE",title:"Treinamento Personalizado",text:"Receba R$ 500,00 por membro participante.",_compute:_=>({cashDelta:500*Math.max(0,d(_))})},{id:"purple_award_25k",kind:"SORTE",title:"Profissional do Ano (Roxo)",text:"Se houver pelo menos um colaborador com certificado roxo, receba R$ 25.000,00.",_compute:_=>({cashDelta:i(_)?25e3:0})},{id:"reputation_1500",kind:"SORTE",title:"Reputao Impecvel",text:"timas avaliaes elevam a confiana. Receba R$ 1.500,00.",cashDelta:1500},{id:"client_cheer_per_client",kind:"SORTE",title:"Cliente Promotor",text:"Ganhe R$ 500,00 por cada cliente atual.",_compute:_=>({cashDelta:500*Math.max(0,r(_.clients))})},{id:"big_order_freight_save",kind:"SORTE",title:"Grande Pedido + Frete Econmico",text:"Receba R$ 1.500,00.",cashDelta:1500},{id:"sales_win_2k",kind:"SORTE",title:"Vitria de Vendas",text:"Venda aguardada foi fechada. Receba R$ 2.000,00.",cashDelta:2e3},{id:"missed_admission",kind:"REVES",title:"Admisso No Reportada",text:"Multa governamental. Pague R$ 3.000,00.",cashDelta:-3e3},{id:"office_renovation",kind:"REVES",title:"Renovao Custosa",text:"Gastos de obra. Pague R$ 7.000,00.",cashDelta:-7e3},{id:"env_fine_20k",kind:"REVES",title:"Impacto Ambiental",text:"Multa ambiental. Pague R$ 20.000,00.",cashDelta:-2e4},{id:"key_client_at_risk",kind:"REVES",title:"Cliente Chave em Risco",text:"Sem certificado AMARELO: perca 1 cliente e pague R$ 2.000,00.",_compute:_=>o(_)?{clientsDelta:0,cashDelta:0,_overrideText:"Voc possui certificado amarelo. Nada acontece."}:{clientsDelta:-1,cashDelta:-2e3}},{id:"social_crisis",kind:"REVES",title:"Crise nas Redes",text:"Pague R$ 400,00 e perca 2 clientes.",cashDelta:-400,clientsDelta:-2},{id:"car_break",kind:"REVES",title:"Carro Quebrou",text:"Conserto urgente. Pague R$ 1.000,00.",cashDelta:-1e3},{id:"service_improvement_1k",kind:"REVES",title:"Aprimoramentos de Servio",text:"Pague R$ 1.000,00.",cashDelta:-1e3},{id:"recovery_failed_5k",kind:"REVES",title:"Recuperao Mal Sucedida",text:"Cancele grande pedido. Pague R$ 5.000,00.",cashDelta:-5e3},{id:"discount_pressure_1k",kind:"REVES",title:"Descontos Forados",text:"Sem certificado verde: perca R$ 1.000,00 de lucro.",cashDelta:-1e3},{id:"domino_2k",kind:"REVES",title:"Efeito Domin",text:"Cancelamentos em cadeia. Perca R$ 2.000,00.",cashDelta:-2e3},{id:"needs_change_lose4",kind:"REVES",title:"Necessidades Mudaram",text:"Sem certificado AZUL: perca 4 clientes.",_compute:_=>s(_)?{clientsDelta:0,_overrideText:"Voc possui certificado azul. Nada acontece."}:{clientsDelta:-4}},{id:"payroll_error_1k",kind:"REVES",title:"Erro na Folha",text:"Corrigir problema. Pague R$ 1.000,00.",cashDelta:-1e3},{id:"strike_lose5",kind:"REVES",title:"Greve Inesperada",text:"Atrasos e perdas. Perca 5 clientes.",clientsDelta:-5},{id:"customs_hold_3k",kind:"REVES",title:"Alfndega",text:"Pague R$ 3.000,00.",cashDelta:-3e3},{id:"cyber_breach_7k_or_A",kind:"REVES",title:"Falha de Segurana",text:"Se NO tiver sistemas nvel A, pague R$ 7.000,00.",_compute:_=>({cashDelta:l(_)?0:-7e3})},{id:"supplier_issue_2k",kind:"REVES",title:"Fornecedor em Crise",text:"Expedio expressa. Pague R$ 2.000,00.",cashDelta:-2e3},{id:"reg_change_30k",kind:"REVES",title:"Regulamentao Nova",text:"Adequao de processos. Pague R$ 30.000,00.",cashDelta:-3e4},{id:"bad_mix_2500",kind:"REVES",title:"Mix de Produtos Desequilibrado",text:"Descontos e liquidaes. Pague R$ 2.500,00.",cashDelta:-2500},{id:"quality_crisis",kind:"REVES",title:"Crise de Qualidade",text:"Perca 1 cliente e pague R$ 1.000,00.",cashDelta:-1e3,clientsDelta:-1}],[]),[f]=k.useState(()=>h[Math.floor(Math.random()*h.length)]),x=k.useMemo(()=>{const _={action:"APPLY_CARD",kind:f.kind,id:f.id,title:f.title};if(typeof f._compute=="function"){const m=f._compute(e||{}),{_overrideText:g,...w}=m||{};return{text:g||f.text,payload:{..._,...w}}}const p={};return Number.isFinite(f.cashDelta)&&(p.cashDelta=Number(f.cashDelta)),Number.isFinite(f.clientsDelta)&&(p.clientsDelta=Number(f.clientsDelta)),{text:f.text,payload:{..._,...p}}},[f,e]),y=()=>t==null?void 0:t(x.payload),b=()=>t==null?void 0:t({action:"SKIP"});return k.useEffect(()=>{const _=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var p,m;return(m=(p=n.current)==null?void 0:p.focus)==null?void 0:m.call(p)},0),()=>{document.body.style.overflow=_}},[]),a.jsx("div",{style:wr.wrap,role:"dialog","aria-modal":"true","aria-label":"Sorte e Revs",children:a.jsxs("div",{style:wr.card,children:[a.jsx("button",{ref:n,style:wr.close,onClick:b,"aria-label":"Fechar",children:""}),a.jsx("div",{style:wr.badge(f.kind),children:f.kind==="SORTE"?"SORTE":"REVS"}),f.title&&a.jsx("h2",{style:wr.title,children:f.title}),a.jsx("p",{style:wr.text,children:x.text}),a.jsx("div",{style:wr.footer,children:a.jsx("button",{type:"button",style:wr.okBtn,onClick:y,children:"OK"})})]})})}const wr={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(760px, 92vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:18,padding:"22px",border:"1px solid rgba(255,255,255,.12)",boxShadow:"0 10px 40px rgba(0,0,0,.4)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},badge:t=>({display:"inline-block",padding:"6px 12px",borderRadius:999,fontWeight:900,marginBottom:8,background:t==="SORTE"?"#22c55e":"#ef4444",color:"#111"}),title:{margin:"2px 0 6px",fontWeight:900},text:{fontSize:18,lineHeight:1.5,opacity:.95,margin:"6px 0 14px"},footer:{display:"flex",justifyContent:"center"},okBtn:{minWidth:140,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer",background:"#fff",color:"#111"}};function Jx({value:t=0,onResolve:e}){const n=Number(t||0),r=o=>{var s,i;(s=o==null?void 0:o.preventDefault)==null||s.call(o),(i=o==null?void 0:o.stopPropagation)==null||i.call(o),e==null||e({action:"OK"})};return a.jsx(ri,{zIndex:2147483647,onClose:()=>e==null?void 0:e({action:"CLOSE"}),children:a.jsxs("div",{style:{padding:28,textAlign:"center",pointerEvents:"auto"},children:[a.jsx("div",{style:{fontWeight:900,fontSize:28,color:"#4caf50",letterSpacing:.5,marginBottom:6},children:"FATURAMENTO DO MS"}),a.jsx("div",{style:{opacity:.9,marginBottom:16},children:"Ser creditado o valor do Faturamento ao seu Saldo"}),a.jsxs("div",{style:{fontSize:18,marginBottom:24},children:["no valor de: ",a.jsxs("b",{children:["$ ",n.toLocaleString()]})]}),a.jsx("button",{type:"button",onClick:r,className:"btn",style:{minWidth:120,background:"#8bd65a",color:"#1a1f2a",fontWeight:800,borderRadius:10},children:"OK"})]})})}function Yx({expense:t=0,loanCharge:e=0,onResolve:n}){const r=Number(t||0)+Number(e||0),o=s=>{var i,l;(i=s==null?void 0:s.preventDefault)==null||i.call(s),(l=s==null?void 0:s.stopPropagation)==null||l.call(s),n==null||n({action:"OK"})};return a.jsx(ri,{zIndex:2147483647,onClose:()=>n==null?void 0:n({action:"CLOSE"}),children:a.jsxs("div",{style:{padding:28,textAlign:"center",pointerEvents:"auto"},children:[a.jsx("div",{style:{fontWeight:900,fontSize:26,color:"#ffb74d",letterSpacing:.5,marginBottom:6},children:"DESPESAS DO MS"}),a.jsxs("div",{style:{marginBottom:8},children:["Despesas operacionais:",a.jsxs("b",{children:["-$ ",Number(t).toLocaleString()]})]}),Number(e)>0&&a.jsxs("div",{style:{marginBottom:8,color:"#ffd54f"},children:["Emprstimo cobrado nesta rodada:",a.jsxs("b",{children:["-$ ",Number(e).toLocaleString()]})]}),a.jsxs("div",{style:{margin:"6px 0 18px",opacity:.85},children:["Total a debitar: ",a.jsxs("b",{children:["-$ ",r.toLocaleString()]})]}),a.jsx("button",{type:"button",onClick:o,className:"btn",style:{minWidth:120,background:"#ffcc80",color:"#1a1f2a",fontWeight:800,borderRadius:10},children:"OK"})]})})}const Pe={backdrop:{position:"fixed",inset:0,background:"rgba(0,0,0,.6)",display:"grid",placeItems:"center",zIndex:9999},card:{width:"min(920px, 96vw)",maxHeight:"90vh",overflow:"auto",background:"#15161a",color:"#e9ecf1",border:"1px solid rgba(255,255,255,.08)",borderRadius:20,boxShadow:"0 20px 50px rgba(0,0,0,.5)"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 16px",borderBottom:"1px solid rgba(255,255,255,.08)"},closeBtn:{width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#fff",fontSize:20,cursor:"pointer"},body:{padding:16},lead:{opacity:.95,lineHeight:1.5},bullets:{margin:"8px 0 16px 18px"},rowBtns:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:12,flexWrap:"wrap"},cta:{padding:"12px 16px",border:0,borderRadius:12,color:"#fff",fontWeight:900,cursor:"pointer",boxShadow:"0 10px 24px rgba(0,0,0,.25)"},back:{padding:"10px 14px",borderRadius:12,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#e9ecf1",cursor:"pointer"},subHeader:{marginBottom:8},infoRow:{display:"flex",gap:8,alignItems:"baseline",margin:"4px 0"},input:{width:"100%",padding:"12px 12px",borderRadius:12,background:"#0f1115",color:"#fff",border:"1px solid rgba(255,255,255,.15)",marginTop:10},option:{padding:16,background:"rgba(255,255,255,.04)",border:"1px solid rgba(255,255,255,.08)",borderRadius:14,textAlign:"center",cursor:"pointer"},spin:{width:34,height:34,borderRadius:8,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#fff",fontSize:18,cursor:"pointer"}};function Qx({playerName:t,loanAvailable:e,hasPendingLoan:n,onGoLoan:r,onGoReduce:o,onGoFire:s,onDeclareBankruptcy:i}){return a.jsxs("div",{style:Pe.body,children:[a.jsxs("p",{style:Pe.lead,children:["Voc est sem dinheiro, ",t,". Escolha uma das opes:"]}),n&&a.jsx("div",{style:{...Pe.lead,color:"#ef4444",fontWeight:"bold",marginBottom:"16px"},children:" Voc j possui um emprstimo pendente. Cada jogador s pode ter um emprstimo por vez."}),a.jsxs("ul",{style:Pe.bullets,children:[a.jsxs("li",{children:["Pedir ",a.jsx("b",{children:"emprstimo"})," nico com 50% de juros garantido por 50% dos seus ",a.jsx("b",{children:"BENS"})," (limite ",`$ ${e}`,")."]}),a.jsxs("li",{children:[a.jsx("b",{children:"Reduzir"})," nveis de ",a.jsx("b",{children:"MIX de Produtos"})," ou ",a.jsx("b",{children:"ERP/Sistemas"})," e receber 50% do valor pago."]}),a.jsxs("li",{children:[a.jsx("b",{children:"Demitir"})," funcionrios e receber 50% do valor total."]})]}),a.jsxs("div",{style:Pe.rowBtns,children:[a.jsx("button",{style:{...Pe.cta,background:"#ef4444"},onClick:s,children:"DEMITIR"}),a.jsx("button",{style:{...Pe.cta,background:"#a16207"},onClick:o,children:"REDUZIR"}),a.jsx("button",{style:{...Pe.cta,background:n?"#6b7280":"#16a34a",cursor:n?"not-allowed":"pointer"},onClick:n?void 0:r,disabled:n,children:n?"EMPRSTIMO (J REALIZADO)":"EMPRSTIMO"}),a.jsx("button",{style:{...Pe.cta,background:"#d32f2f",fontWeight:"bold"},onClick:i,children:"DECLARAR FALNCIA"})]})]})}function Xx({loanAvailable:t,alreadyHasLoan:e=!1,onBack:n,onConfirm:r}){const[o,s]=k.useState(""),i=k.useMemo(()=>Math.max(0,Math.floor(Number(o)||0)),[o]),l=!e&&i>0&&i<=Number(t||0),u=()=>{if(e){r==null||r({type:"LOAN_DENIED",reason:"ALREADY_TAKEN"});return}const c=Math.max(0,Math.floor(Number(t)||0)),d=Math.max(0,Math.min(c,i));if(d>0){const h={type:"LOAN",amount:d,cashDelta:d,loan:{amount:d,charged:!1}};console.log("[DEBUG] RecoveryLoan enviando payload:",h),r==null||r(h)}else r==null||r({type:"LOAN_DENIED",reason:"INVALID_AMOUNT"})};return a.jsxs("div",{style:Pe.body,children:[a.jsx("div",{style:Pe.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"EMPRSTIMO"})}),a.jsxs("p",{children:["Voc pode realizar um emprstimo colocando ",a.jsx("b",{children:"50% dos seus BENS"})," como garantia (pago na prxima Despesas Operacionais)."]}),a.jsxs("div",{style:Pe.infoRow,children:[a.jsx("span",{children:"Valor disponvel:"})," ",a.jsxs("b",{children:["$",Number(t||0)]})]}),a.jsxs("div",{style:Pe.infoRow,children:[a.jsx("span",{children:"Valor garantia:"})," ",a.jsxs("b",{children:["$",Number(t||0)]})]}),e&&a.jsx("div",{style:{...Pe.infoRow,color:"#fca5a5",border:"1px solid rgba(255,0,0,.25)",padding:"8px 10px",borderRadius:8,background:"rgba(255,0,0,.06)"},children:"Voc j possui um emprstimo ativo. No  possvel pegar outro."}),a.jsx("input",{style:Pe.input,type:"number",min:0,max:Math.max(0,Number(t||0)),placeholder:"Digite o valor que quer emprestar",value:o,onChange:c=>s(c.target.value),disabled:e}),a.jsxs("div",{style:{fontSize:12,opacity:.8,marginTop:6},children:["Mx: $",Number(t||0),"  valor ser somado ao seu saldo e cobrado na prxima Despesas Operacionais."]}),a.jsxs("div",{style:Pe.rowBtns,children:[a.jsx("button",{style:Pe.back,onClick:n,children:" Voltar"}),a.jsx("button",{style:{...Pe.cta,background:"#16a34a",opacity:l?1:.6,cursor:l?"pointer":"not-allowed"},onClick:u,disabled:!l,children:"Pegar Emprstimo"})]})]})}function Zx(t){const{options:e=[],optionsMix:n,optionsErp:r,mixOwned:o,erpOwned:s,credits:i,snapshot:l,onBack:u,onConfirm:c}=t,d=(...v)=>console.log("[RecoveryReduce]",...v),h={MIX:{accent:"#06B6D4",soft:"rgba(6,182,212,.14)",ring:"rgba(6,182,212,.45)",glow:"rgba(6,182,212,.35)",pillBg:"rgba(6,182,212,.18)",pillFg:"#9FF1FF"},ERP:{accent:"#8B5CF6",soft:"rgba(139,92,246,.14)",ring:"rgba(139,92,246,.45)",glow:"rgba(139,92,246,.35)",pillBg:"rgba(139,92,246,.18)",pillFg:"#E9D5FF"}},f=["A","B","C","D"],x=(v,A,O)=>f.map($=>({key:`${v}-${$}`,group:v,level:$,label:`Nvel ${$}`,credit:Number((A==null?void 0:A[$])??0),owned:!!(O!=null&&O[$])})),y=k.useMemo(()=>Array.isArray(n)&&n.length?n:i!=null&&i.MIX?x("MIX",i.MIX,o):x("MIX",{A:0,B:0,C:0,D:0},o),[n,i,o]),b=k.useMemo(()=>Array.isArray(r)&&r.length?r:i!=null&&i.ERP?x("ERP",i.ERP,s):x("ERP",{A:0,B:0,C:0,D:0},s),[r,i,s]);k.useEffect(()=>{console.groupCollapsed("[RecoveryReduce] props snapshot"),console.log("mixCards:",y),console.log("erpCards:",b),console.log("mixOwned:",o),console.log("erpOwned:",s),console.log("credits:",i),console.groupEnd()},[y,b,o,s,i]);const[_,p]=k.useState([]),[m,g]=k.useState(new Set),[w,E]=k.useState(!1),D=v=>{v.level!=="D"&&(!v.owned||v.owned===!1||m.has(v.key)||v.alreadyReduced||p(A=>A.some($=>$.key===v.key)?A.filter($=>$.key!==v.key):[...A,v]))},N=k.useMemo(()=>_.reduce((v,A)=>v+Number(A.credit||0),0),[_]),S=v=>_.some(A=>A.key===v.key),T=v=>{var ce,Ae;const A=S(v),O=v.level==="D",$=v.owned===!0,ne=O||!$||m.has(v.key)||v.alreadyReduced||w,oe=h[v.group]||h.MIX,We={...Pe.option,position:"relative",borderRadius:14,background:ne?"rgba(148,163,184,.12)":oe.soft,border:A?`2.5px solid ${oe.accent}`:"1px solid rgba(148,163,184,.25)",boxShadow:A?`0 0 0 2px ${oe.ring}, 0 10px 24px ${oe.glow}`:"none",cursor:ne?"not-allowed":"pointer",opacity:ne?.35:1,transition:"transform .06s ease-out, box-shadow .12s ease-out, border-color .12s"},gt={fontWeight:900,fontSize:16,marginBottom:8,color:ne?"#CBD5E1":"#E5F9FF"},z={fontWeight:700,marginTop:2,color:ne?"#A1A1AA":"#FFFFFF"},ae={position:"absolute",top:8,right:8,fontSize:11,padding:"3px 8px",borderRadius:999,background:ne?"rgba(148,163,184,.22)":oe.pillBg,color:ne?"#E5E7EB":oe.pillFg,border:`1px solid ${ne?"rgba(148,163,184,.35)":oe.ring}`,letterSpacing:.2};return a.jsxs("button",{onClick:()=>D(v),disabled:ne,"aria-pressed":A,style:We,title:O?"Nvel D  o bsico e no pode ser reduzido.":$?m.has(v.key)?"Nvel j reduzido nesta sesso.":v.alreadyReduced?"Este nvel j foi reduzido anteriormente. Compre o nvel novamente para poder reduzir.":"":"Este nvel no est disponvel. Compre o nvel novamente para poder reduzir.",onMouseDown:Y=>!ne&&(Y.currentTarget.style.transform="translateY(1px)"),onMouseUp:Y=>Y.currentTarget.style.transform="translateY(0)",onMouseLeave:Y=>Y.currentTarget.style.transform="translateY(0)",children:[a.jsx("span",{style:ae,children:O?"bsico":$?m.has(v.key)?"vendido":v.alreadyReduced?"j reduzido":"adquirido":"zerado"}),a.jsx("div",{style:gt,children:v.label}),a.jsx("div",{style:{color:ne?"#A1A1AA":"#BFEFFF"},children:"Crdito ao reduzir:"}),a.jsxs("div",{style:z,children:["$",((Ae=(ce=v.credit).toLocaleString)==null?void 0:Ae.call(ce))??v.credit]})]},v.key)};return a.jsxs("div",{style:Pe.body,children:[a.jsx("div",{style:Pe.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"REDUZIR NVEL MIX/ERP"})}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[a.jsxs("div",{style:{padding:8,borderRadius:8,background:"rgba(255,255,255,0.05)"},children:[a.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"MIX PRODUTOS"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12},children:y.map(T)})]}),a.jsxs("div",{style:{padding:8,borderRadius:8,background:"rgba(255,255,255,0.05)"},children:[a.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"ERP/SISTEMAS"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12},children:b.map(T)})]})]}),a.jsxs("div",{style:{marginTop:10,display:"flex",justifyContent:"space-between",alignItems:"center",opacity:.92},children:[a.jsxs("div",{children:["Selecionados: ",a.jsx("b",{children:_.length}),"    Total: ",a.jsxs("b",{children:["$",N.toLocaleString()]})]}),a.jsx("div",{style:{fontSize:12,opacity:.7},children:"S  possvel selecionar nveis adquiridos."})]}),a.jsxs("div",{style:Pe.rowBtns,children:[a.jsx("button",{style:Pe.back,onClick:u,disabled:w,children:" Voltar"}),a.jsx("button",{style:{...Pe.cta,background:"#F59E0B",color:"#101010",fontWeight:900,opacity:_.length&&!w?1:.55},onClick:()=>{if(!_.length||w)return;E(!0),g(A=>{const O=new Set(A);return _.forEach($=>O.add($.key)),O});const v={items:_.map(A=>({...A,selected:!0})),total:N};d("confirm payload =>",v),c==null||c(v),p([]),E(!1)},disabled:!_.length||w,children:"REDUZIR"})]})]})}function eb({roles:t=[],onBack:e,onConfirm:n}){const r=k.useMemo(()=>t.map(f=>{const x=Number(f.unit??f.total??0),y=Number(f.owned??f.qty??0);return{...f,unit:x,owned:y}}),[t]),[o,s]=k.useState(()=>{const f={};return r.forEach(x=>{f[x.key]=0}),f}),i=f=>`R$ ${Number(f||0).toLocaleString("pt-BR")}`,l=f=>Math.floor(Number(f||0)*.5),u=(f,x)=>{s(y=>{const b=r.find(m=>m.key===f);if(!b)return y;const _=Number(y[f]||0),p=Math.max(0,Math.min(b.owned,_+x));return p===_?y:{...y,[f]:p}})},c=k.useMemo(()=>{const f={};return r.forEach(x=>{const y=Number(o[x.key]||0);f[x.key]=l(x.unit)*y}),f},[o,r]),d=k.useMemo(()=>Object.values(c).reduce((f,x)=>f+x,0),[c]),h=()=>{if(d<=0)return;const f={};r.forEach(x=>{f[x.key]=Number(o[x.key]||0)}),n==null||n({type:"FIRE",items:f,creditByRole:c,totalCredit:d,amount:d,note:`Demisses +${i(d)}`})};return a.jsxs("div",{style:Pe.body,children:[a.jsx("div",{style:Pe.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"DEMITIR FUNCIONRIOS"})}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr 1.2fr 1fr",gap:8,opacity:.9,fontWeight:700,marginBottom:6},children:[a.jsx("div",{children:"Cargo"}),a.jsx("div",{children:"Valor Unitrio"}),a.jsx("div",{children:"Qtd demitir"}),a.jsx("div",{children:"Crdito"})]}),a.jsx("div",{style:{display:"grid",gap:12},children:r.map(f=>{const x=Number(o[f.key]||0),y=Number(f.unit||0),b=Number(f.owned||0),_=l(y),p=_*x,m=x<=0,g=x>=b||b<=0;return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr 1.2fr 1fr",alignItems:"center",gap:8},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:800},children:f.label}),a.jsxs("div",{style:{opacity:.75,fontSize:12},children:["Possui: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{children:[a.jsx("div",{children:a.jsx("b",{children:i(y)})}),a.jsxs("div",{style:{opacity:.75,fontSize:12},children:["Crdito por un.: ",a.jsx("b",{children:i(_)})]})]}),a.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[a.jsx("button",{style:{...Pe.spin,opacity:m?.5:1,cursor:m?"not-allowed":"pointer"},disabled:m,onClick:()=>u(f.key,-1),children:"-"}),a.jsx("div",{style:{minWidth:28,textAlign:"center",fontWeight:800},children:x}),a.jsx("button",{style:{...Pe.spin,opacity:g?.5:1,cursor:g?"not-allowed":"pointer"},disabled:g,onClick:()=>u(f.key,1),children:"+"})]}),a.jsx("div",{children:a.jsx("b",{children:i(p)})})]},f.key)})}),a.jsxs("div",{style:{marginTop:12,textAlign:"right",fontWeight:900},children:["Total a resgatar: ",a.jsx("b",{children:i(d)})]}),a.jsxs("div",{style:Pe.rowBtns,children:[a.jsx("button",{style:Pe.back,onClick:e,children:" Voltar"}),a.jsx("button",{style:{...Pe.cta,background:"#ef4444",opacity:d>0?1:.6},onClick:h,disabled:d<=0,children:"DEMITIR"})]})]})}function _f({playerName:t="Jogador",bens:e=0,currentPlayer:n,canClose:r=!0}){var T;const{resolveTop:o,popModal:s}=(Qt==null?void 0:Qt())||{},[i,l]=k.useState("menu"),u=()=>{r&&(s?s(!1):o==null||o(null))},c=k.useMemo(()=>({A:12e3,B:6e3,C:3e3,D:1e3}),[]),d=k.useMemo(()=>({A:1e4,B:4e3,C:1500,D:500}),[]),h=v=>{if(v==null)return"";const A=String(v).trim().toUpperCase();if(["A","B","C","D"].includes(A))return A;const O=Number(A);return O===1?"A":O===2?"B":O===3?"C":O===4?"D":""},f=k.useMemo(()=>{const v=n||{};return{name:v.name??t,bens:Number(v.bens??e??0),vendedoresComuns:Number(v.vendedoresComuns??0),fieldSales:Number(v.fieldSales??0),insideSales:Number(v.insideSales??0),gestores:Number(v.gestores??v.gestoresComerciais??0),raw:v}},[n,t,e]);k.useEffect(()=>{console.group("[RecoveryModal] mount snapshot"),console.log("raw player =>",f.raw),console.groupEnd()},[f.raw]);const x=k.useMemo(()=>Math.max(0,Math.floor(f.bens*.5)),[f.bens]),y=k.useMemo(()=>{var A;const v=(A=f.raw)==null?void 0:A.loanPending;return v&&Number(v.amount)>0},[(T=f.raw)==null?void 0:T.loanPending]),b=k.useMemo(()=>[{key:"mix",label:"MIX PRODUTOS",credit:1500},{key:"erp",label:"ERP/SISTEMAS",credit:1500}],[]),_=k.useMemo(()=>[{key:"comum",label:"Vendedor Comum",unit:1500,owned:f.vendedoresComuns},{key:"field",label:"Field Sales",unit:3e3,owned:f.fieldSales},{key:"inside",label:"Inside Sales",unit:3e3,owned:f.insideSales},{key:"gestor",label:"Gestor",unit:5e3,owned:f.gestores}],[f]),p=k.useMemo(()=>{const v=f.raw||{};return h(v.mixProdutosLetter??v.mixProdutos??v.mixProducts??v.mixLevelLetter??v.mixLevel??v.mix_level??v.mix??v.mix_produtos??v.mix_products)},[f.raw]),m=k.useMemo(()=>{var A;const v=f.raw||{};return h(v.erpSistemasLetter??v.erpSistemas??((A=v.erpSystems)==null?void 0:A.level)??v.erpSystemsLetter??v.erpLevelLetter??v.erpLevel??v.erp_level??v.erp??v.erp_sistemas)},[f.raw]),g=k.useMemo(()=>{const v=f.raw||{},A=v.mixOwned??v.mix??{},O=new Set;return A.A===!0&&O.add("A"),A.B===!0&&O.add("B"),A.C===!0&&O.add("C"),A.D===!0&&O.add("D"),O.size===0&&O.add("D"),O},[f.raw]),w=k.useMemo(()=>{const v=f.raw||{},A=v.erpOwned??v.erp??{},O=new Set;return A.A===!0&&O.add("A"),A.B===!0&&O.add("B"),A.C===!0&&O.add("C"),A.D===!0&&O.add("D"),O.size===0&&O.add("D"),O},[f.raw]);k.useEffect(()=>{console.group("[RecoveryModal] owned detect"),console.log("mixLetter(panel):",p," -> ownedMix =",Object.fromEntries(["A","B","C","D"].map(v=>[v,g.has(v)]))),console.log("erpLetter(panel):",m," -> ownedErp =",Object.fromEntries(["A","B","C","D"].map(v=>[v,w.has(v)]))),console.groupEnd()},[p,m,g,w]);const E=k.useMemo(()=>{var A,O;const v=f.raw||{};return{MIX:Array.isArray((A=v.reducedLevels)==null?void 0:A.MIX)?v.reducedLevels.MIX:[],ERP:Array.isArray((O=v.reducedLevels)==null?void 0:O.ERP)?v.reducedLevels.ERP:[]}},[f.raw]),D=k.useMemo(()=>["A","B","C","D"].map(v=>({key:`mix-${v}`,group:"MIX",level:v,label:`Nvel ${v}`,credit:(c[v]||0)/2,owned:g.has(v),alreadyReduced:E.MIX.includes(v)})),[g,c,E.MIX]),N=k.useMemo(()=>["A","B","C","D"].map(v=>({key:`erp-${v}`,group:"ERP",level:v,label:`Nvel ${v}`,credit:(d[v]||0)/2,owned:w.has(v),alreadyReduced:E.ERP.includes(v)})),[w,d,E.ERP]),S=k.useMemo(()=>({MIX:{A:c.A/2,B:c.B/2,C:c.C/2,D:c.D/2},ERP:{A:d.A/2,B:d.B/2,C:d.C/2,D:d.D/2}}),[c,d]);return a.jsx("div",{style:Pe.backdrop,children:a.jsxs("div",{style:Pe.card,children:[a.jsxs("div",{style:Pe.header,children:[a.jsx("div",{style:{fontWeight:900,fontSize:22},children:"RECUPERAO FINANCEIRA"}),r&&a.jsx("button",{onClick:u,style:Pe.closeBtn,children:""})]}),i==="menu"&&a.jsx(Qx,{playerName:f.name,loanAvailable:x,hasPendingLoan:y,onGoLoan:()=>l("loan"),onGoReduce:()=>l("reduce"),onGoFire:()=>l("fire"),onDeclareBankruptcy:()=>o==null?void 0:o({type:"TRIGGER_BANKRUPTCY"})}),i==="loan"&&a.jsx(Xx,{loanAvailable:x,onBack:()=>l("menu"),onConfirm:v=>{console.log("[DEBUG] RecoveryModal recebeu payload do RecoveryLoan:",v),console.log("[DEBUG] RecoveryModal chamando resolveTop com:",v);const A=o==null?void 0:o(v);console.log("[DEBUG] RecoveryModal resolveTop retornou:",A)}}),i==="reduce"&&a.jsx(Zx,{options:b,optionsMix:D,optionsErp:N,mixOwned:{A:g.has("A"),B:g.has("B"),C:g.has("C"),D:g.has("D")},erpOwned:{A:w.has("A"),B:w.has("B"),C:w.has("C"),D:w.has("D")},credits:S,snapshot:f,onBack:()=>l("menu"),onConfirm:v=>{if(Array.isArray(v==null?void 0:v.items)){const $=Number(v.total??v.items.filter(ne=>ne.selected).reduce((ne,oe)=>ne+Number(oe.credit||0),0));o==null||o({type:"REDUCE",amount:$,items:v.items,note:`Reduo mltipla +R$ ${$.toLocaleString()}`});return}const A=Number((v==null?void 0:v.credit)||(v==null?void 0:v.amount)||0),O=v&&v.group&&v.level?{group:String(v.group).toUpperCase(),level:String(v.level).toUpperCase(),credit:A}:null;o==null||o({type:"REDUCE",amount:A,group:O==null?void 0:O.group,level:O==null?void 0:O.level,selection:O,note:O?`Reduo ${O.group} nvel ${O.level} +R$ ${A.toLocaleString()}`:`Reduo +R$ ${A.toLocaleString()}`})}}),i==="fire"&&a.jsx(eb,{roles:_,onBack:()=>l("menu"),onConfirm:v=>o==null?void 0:o(v)})]},i)})}function tb({playerName:t="Jogador",balanceText:e=""}){const{resolveTop:n,closeModal:r}=Qt(),o=k.useRef(null);k.useEffect(()=>{var c;const u=document.body.style.overflow;return document.body.style.overflow="hidden",(c=o.current)==null||c.focus(),()=>{document.body.style.overflow=u}},[]),k.useEffect(()=>{const u=c=>{(c.key==="Escape"||c.key==="Enter"||c.key===" ")&&(c.preventDefault(),c.stopPropagation())};return document.addEventListener("keydown",u,!0),()=>document.removeEventListener("keydown",u,!0)},[]);const s=u=>{u.preventDefault(),u.stopPropagation()},i=()=>{n(!1),r==null||r()},l=()=>{n(!0),r==null||r()};return a.jsxs(ri,{width:780,onClose:i,children:[a.jsx("style",{children:`
        .sg-modal-panel {
          background:#111827; border:1px solid rgba(255,255,255,0.08);
          border-radius:16px; padding:20px 22px 18px; color:#e5e7eb;
          position:relative; box-shadow:0 10px 35px rgba(0,0,0,.55);
        }
        .sg-modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
        .sg-modal-title{font-size:22px;font-weight:700;margin:0}
        .sg-icon-close{background:transparent;border:0;color:#9ca3af;font-size:24px;line-height:1;cursor:pointer}
        .sg-icon-close:hover{color:#e5e7eb}

        .sg-modal-infos{display:flex;justify-content:space-between;align-items:center;
          font-size:14px;color:#cbd5e1;margin:6px 0 12px}
        .sg-modal-infos .right{opacity:.8}

        .sg-callout-warning{
          background:rgba(250,204,21,.12); border:1px solid rgba(250,204,21,.45);
          border-radius:12px; padding:14px 16px; margin-bottom:14px
        }
        .sg-callout-title{font-weight:700;margin-bottom:6px;color:#fde68a}
        .sg-muted{opacity:.7}

        .sg-modal-body{margin:8px 2px 14px;font-size:15px;line-height:1.5}

        .sg-modal-actions{display:flex;justify-content:space-between;gap:12px;margin-top:10px}
        .sg-btn{font-weight:600;border:0;cursor:pointer;padding:12px 18px}
        .sg-pill{border-radius:999px}
        .sg-btn-neutral{background:#374151;color:#e5e7eb}
        .sg-btn-neutral:hover{background:#4b5563}
        .sg-btn-danger{background:#b91c1c;color:#fff}
        .sg-btn-danger:hover{background:#991b1b}
        .sg-btn:focus{outline:2px solid rgba(255,255,255,.35);outline-offset:2px}
      `}),a.jsxs("div",{className:"sg-modal-panel",role:"dialog","aria-modal":"true","aria-labelledby":"bk-title","aria-describedby":"bk-desc",onClick:s,onMouseDown:s,onKeyDown:s,children:[a.jsxs("div",{className:"sg-modal-header",children:[a.jsx("h2",{id:"bk-title",className:"sg-modal-title",children:"Declarar Falncia"}),a.jsx("button",{className:"sg-icon-close","aria-label":"Fechar",onClick:i,children:""})]}),a.jsxs("div",{className:"sg-modal-infos",children:[a.jsx("div",{className:"left",children:e?a.jsxs(a.Fragment,{children:["Saldo disponvel: ",a.jsx("b",{children:e})]}):a.jsx(a.Fragment,{children:""})}),a.jsx("div",{className:"right",children:"Ao permanente nesta partida"})]}),a.jsxs("div",{className:"sg-callout-warning",id:"bk-desc",children:[a.jsx("div",{className:"sg-callout-title",children:"Ateno"}),a.jsxs("p",{children:[t,", ao confirmar, voc ser marcado como ",a.jsx("b",{children:"FALIDO"}),". Seu turno ser ",a.jsx("b",{children:"sempre pulado"})," e voc no poder mais executar aes."]}),a.jsx("p",{className:"sg-muted",children:"Esta deciso  irreversvel at o fim da partida."})]}),a.jsx("div",{className:"sg-modal-body",children:a.jsxs("p",{children:["Confirme abaixo para encerrar sua participao ativa. Voc continuar visvel no placar como ",a.jsx("b",{children:"FALIDO"}),"."]})}),a.jsxs("div",{className:"sg-modal-actions",children:[a.jsx("button",{className:"sg-btn sg-pill sg-btn-neutral",onClick:i,children:"Cancelar"}),a.jsx("button",{ref:o,className:"sg-btn sg-pill sg-btn-danger",onClick:l,children:"Declarar Falncia"})]})]})]})}function nb({players:t,setPlayers:e,round:n,setRound:r,turnIdx:o,setTurnIdx:s,roundFlags:i,setRoundFlags:l,isMyTurn:u,isMine:c,myUid:d,meId:h,myCash:f,current:x,broadcastState:y,appendLog:b,turnLock:_,setTurnLockBroadcast:p,gameOver:m,setGameOver:g,winner:w,setWinner:E,setShowBankruptOverlay:D}){const{pushModal:N,awaitTop:S,closeTop:T}=(Qt==null?void 0:Qt())||{},[v,A]=fe.useState(0),O=fe.useRef(0);fe.useEffect(()=>{O.current=v},[v]);const $=fe.useRef(!1),ne=fe.useRef(!1),oe=fe.useRef(null),We=fe.useRef(null),gt=fe.useCallback(q=>{if(!Array.isArray(q)||q.length===0)return q;const Fe=[...q];return Fe.sort((ge,he)=>{if(typeof ge.seat=="number"&&typeof he.seat=="number"&&ge.seat!==he.seat)return ge.seat-he.seat;if(typeof ge.seat=="number"&&typeof he.seat!="number")return-1;if(typeof ge.seat!="number"&&typeof he.seat=="number")return 1;const $t=String((ge==null?void 0:ge.id)??(ge==null?void 0:ge.player_id)??""),at=String((he==null?void 0:he.id)??(he==null?void 0:he.player_id)??"");return $t.localeCompare(at)}),Fe.forEach((ge,he)=>{typeof ge.seat!="number"&&(ge.seat=he)}),Fe},[]),z=fe.useMemo(()=>gt(t),[t,gt]);fe.useEffect(()=>{u?console.log("[DEBUG] modalLocks sync - isMyTurn:",u,"modalLocks:",v):v>0&&(console.log("[DEBUG] modalLocks sync - resetando modalLocks para 0 (no  minha vez)"),A(0),O.current=0,$.current=!1)},[u,v]),fe.useEffect(()=>(_?(oe.current&&clearTimeout(oe.current),oe.current=setTimeout(()=>{const q=Ae.current,Fe=String(q||"")===String(d),ge=O.current,he=$.current;console.warn("[DEBUG]  TIMEOUT DE SEGURANA - turnLock ativo h mais de 30s",{isLockOwner:Fe,currentModalLocks:ge,currentOpening:he,lockOwner:q}),Fe&&ge===0&&!he&&(console.warn("[DEBUG]  FORANDO LIBERAO DO TURNLOCK (timeout de segurana)"),p(!1),ne.current=!1)},3e4)):oe.current&&(clearTimeout(oe.current),oe.current=null),()=>{oe.current&&(clearTimeout(oe.current),oe.current=null)}),[_,d,p]);const[ae,ce]=fe.useState(null),Ae=fe.useRef(null);fe.useEffect(()=>{Ae.current=ae},[ae]);const Y=fe.useRef(null),te=fe.useRef(n);fe.useEffect(()=>{te.current=n,console.log("[DEBUG]  currentRoundRef atualizado para:",n)},[n]);const At=fe.useRef(t);fe.useEffect(()=>{At.current=t},[t]);const be=fe.useRef(o);fe.useEffect(()=>{be.current=o},[o]);const Tt=fe.useRef(m);fe.useEffect(()=>{Tt.current=m},[m]);const it=fe.useRef(!1),gr=fe.useRef(!1);fe.useEffect(()=>{const q=t[o];q&&String(q.id)===String(d)?(console.log("[DEBUG]  minha vez - atualizando lockOwner para:",d,"turnIdx:",o),ce(String(d)),Y.current&&(Y.current.nextTurnIdx===o?(console.log("[DEBUG] Limpando pendingTurnDataRef - turno j foi processado (nextTurnIdx === turnIdx)"),Y.current=null):console.log("[DEBUG] Mantendo pendingTurnDataRef - prximo turno:",Y.current.nextTurnIdx,"turno atual:",o))):(ae===String(d)&&(console.log("[DEBUG] No  mais minha vez - limpando lockOwner"),ce(null)),Y.current&&Y.current.nextTurnIdx!==o&&(console.log("[DEBUG] Limpando pendingTurnDataRef - no  minha vez e dados no so para turno atual"),Y.current=null))},[o,t,d,ae]);const Me=async q=>{if(!(N&&S))return null;$.current=!0,A(ge=>{const he=ge+1;return O.current=he,We.current=null,console.log("[DEBUG] openModalAndWait - ABRINDO modal, modalLocks:",ge,"->",he,"openingModalRef:",$.current),he});let Fe=!1;try{N(q),await new Promise(he=>setTimeout(he,100)),$.current=!1,console.log("[DEBUG] openModalAndWait - Modal renderizada, openingModalRef:",$.current);const ge=await S();return Fe=!0,await new Promise(he=>setTimeout(he,50)),ge}catch(ge){return console.error("[DEBUG]  ERRO ao abrir/aguardar modal:",ge),Fe=!0,$.current=!1,A(he=>{const $t=Math.max(0,he-1);return O.current=$t,$t===0&&(We.current=Date.now()),console.log("[DEBUG] openModalAndWait - ERRO, decrementando modalLocks:",he,"->",$t),$t}),null}finally{Fe||($.current=!1),Fe&&A(ge=>{const he=Math.max(0,ge-1);return O.current=he,he===0&&(We.current=Date.now(),console.log("[DEBUG] openModalAndWait - LTIMA MODAL FECHADA - timestamp:",We.current)),console.log("[DEBUG] openModalAndWait - FECHANDO modal, modalLocks:",ge,"->",he),he})}},Vr=fe.useCallback((q,Fe)=>{const ge=t[q],he=Math.max(0,Number(Fe||0));return Number((ge==null?void 0:ge.cash)||0)>=he},[t]),ze=fe.useCallback((q,Fe,ge)=>{const he=Vr(q,Fe);return he||b(`Saldo insuficiente${ge?" para "+ge:""}. Use RECUPERAO (demitir / emprestar / reduzir) ou declare FALNCIA.`),he},[Vr,b]),Gr=fe.useCallback((q,Fe,ge)=>{var jn;if(Fe<=5)return!1;const he=(q||[]).filter(ht=>!(ht!=null&&ht.bankrupt));if(he.length===0){console.log("[DEBUG]  FIM DE JOGO - Nenhum jogador vivo restante"),e(q),E(null),g(!0),r(5),te.current=5,b("Fim de jogo! Todos os jogadores falidos."),Y.current=null,p(!1);try{y(q||[],ge||o,5,!0,null,{round:5,gameOver:!0,winner:null})}catch{}return!0}const at=((jn=he.map(ht=>({player:ht,patrimonio:(ht.cash||0)+(ht.bens||0),cash:ht.cash||0})).sort((ht,gn)=>{var Cn,F;return gn.patrimonio-ht.patrimonio||gn.cash-ht.cash||String(((Cn=ht.player)==null?void 0:Cn.name)||"").localeCompare(String(((F=gn.player)==null?void 0:F.name)||""))})[0])==null?void 0:jn.player)||null;console.log("[ENDGAME] finalizando: vencedor=",(at==null?void 0:at.name)||"N/A",", round=5"),e(q),E(at),g(!0),r(5),te.current=5,b(`Fim de jogo! 5 rodadas completas. Vencedor: ${(at==null?void 0:at.name)||""}`),Y.current=null,p(!1);try{y(q||[],ge||o,5,!0,at,{round:5,gameOver:!0,winner:at})}catch{}return!0},[b,y,g,r,p,E,o]),Zo=fe.useCallback((q,Fe,ge)=>{var he,$t,at,jn,ht,gn,Cn,F;if(console.log("[DEBUG]  advanceAndMaybeLap chamada - steps:",q,"deltaCash:",Fe,"note:",ge),!(Tt.current||it.current||gr.current||!t.length)){if(ne.current){console.warn("[DEBUG]  advanceAndMaybeLap - mudana de turno j em progresso, ignorando");return}if(O.current>0||$.current){console.warn("[DEBUG]  advanceAndMaybeLap - h modais abertas, aguardando...",{modalLocks:O.current,opening:$.current}),setTimeout(()=>{O.current===0&&!$.current&&Zo(q,Fe,ge)},200);return}ne.current=!0,p(!0),ce(String(d));try{const R=o,ye=z[R];if(!ye){p(!1),ne.current=!1;return}console.log("[DEBUG]  POSIO INICIAL - Jogador:",ye.name,"Posio:",ye.pos,"Saldo:",ye.cash);const pe=async(C,M,K,Z=t)=>{var ue,Se,ve,xe,tt,Ge,Te,vt,Qe,pt,jt,Mt,vn,Nn,Dn;const G=Number(((ue=Z[R])==null?void 0:ue.cash)||0);if(G>=C){console.log("[DEBUG]  Saldo suficiente! Processando pagamento de:",C);const ke=Z.map((L,Ee)=>Ee!==R?L:{...L,cash:Math.max(0,(L.cash||0)-C),pos:L.pos});return e(ke),y(ke,o,te.current),!0}$.current=!0;const se=await Me(a.jsx(pr,{requiredAmount:C,currentCash:G,title:`Saldo insuficiente para ${K} ${M}`,message:`Voc precisa ${K} R$ ${C.toLocaleString()} mas possui apenas R$ ${G.toLocaleString()}.`,showRecoveryOptions:!0}));if(!se)return p(!1),!1;if(se.action==="RECOVERY"){console.log("[DEBUG] Abrindo RecoveryModal para jogador:",Z[R]);const ke=await Me(a.jsx(_f,{currentPlayer:Z[R],canClose:!1}));if(console.log("[DEBUG] RecoveryModal retornou:",ke),ke){console.log("[DEBUG] recoveryModalRes existe, tipo:",ke.type,"action:",ke.action);let L=Z;if(ke.type==="FIRE"){console.log("[DEBUG]  Condio FIRE atendida! Processando demisses:",ke);const ee={cashDelta:Number(ke.amount||0),vendedoresComunsDelta:-Number(((Se=ke.items)==null?void 0:Se.comum)||0),fieldSalesDelta:-Number(((ve=ke.items)==null?void 0:ve.field)||0),insideSalesDelta:-Number(((xe=ke.items)==null?void 0:xe.inside)||0),gestoresDelta:-Number(((tt=ke.items)==null?void 0:tt.gestor)||0)};console.log("[DEBUG] Deltas de demisso:",ee),L=Z.map((le,Ce)=>Ce!==R?le:{...Ct(le,ee),pos:le.pos}),console.log("[DEBUG] Novo saldo aps demisses:",(Ge=L[R])==null?void 0:Ge.cash),e(L),y(L,o,te.current)}else if(ke.type==="LOAN"){console.log("[DEBUG]  Condio LOAN atendida! Processando emprstimo:",ke);const ee=(Te=Z[R])==null?void 0:Te.loanPending;if(ee&&Number(ee.amount)>0){console.log("[DEBUG]  Jogador j possui emprstimo pendente:",ee);const Ce=await Me(a.jsx(pr,{requiredAmount:C,currentCash:((vt=Z[R])==null?void 0:vt.cash)||0,title:"Emprstimo j realizado",message:`Voc j possui um emprstimo pendente de R$ ${Number(ee.amount).toLocaleString()}. Cada jogador s pode ter um emprstimo por vez.`,showRecoveryOptions:!1,canClose:!1}));if(!Ce||Ce.action!=="BANKRUPT")return p(!1),!1;const je=Z.map((Vt,es)=>es===R?{...Vt,bankrupt:!0}:Vt);if(Ns(je)<=1){const Vt=je.findIndex(es=>!(es!=null&&es.bankrupt));return E(Vt>=0?je[Vt]:null),e(je),g(!0),p(!1),y(je,o,n,!0,Vt>=0?je[Vt]:null),!1}const qe=cs(je,R);return e(je),s(qe),p(!1),y(je,qe,te.current),!1}const le=Number(ke.amount||0);console.log("[DEBUG] Valor do emprstimo:",le),console.log("[DEBUG] Saldo atual do jogador:",(Qe=Z[R])==null?void 0:Qe.cash),L=Z.map((Ce,je)=>je!==R?Ce:{...Ce,cash:(Number(Ce.cash)||0)+le,loanPending:{amount:le,charged:!1,shouldChargeOnNextExpenses:!0},pos:Ce.pos}),console.log("[DEBUG] Novo saldo do jogador:",(pt=L[R])==null?void 0:pt.cash),console.log("[DEBUG] Novo loanPending:",(jt=L[R])==null?void 0:jt.loanPending),e(L),y(L,o,te.current)}else if(ke.type==="REDUCE"){console.log("[DEBUG]  Condio REDUCE atendida! Processando reduo:",ke);const ee=ke.items||[];let le=0;console.log("[DEBUG] Selees para reduzir:",ee),L=Z.map((Ce,je)=>{if(je!==R)return Ce;let Re={...Ce};for(const qe of ee)qe.selected&&(le+=Number(qe.credit||0),qe.group==="MIX"?Re.mixOwned={...Re.mixOwned||{},[qe.level]:!1}:qe.group==="ERP"&&(Re.erpOwned={...Re.erpOwned||{},[qe.level]:!1}));return Re.cash=(Number(Re.cash)||0)+le,Re.pos=Ce.pos,Re}),console.log("[DEBUG] Total de crdito da reduo:",le),console.log("[DEBUG] Novo saldo aps reduo:",(Mt=L[R])==null?void 0:Mt.cash),e(L),y(L,o,te.current)}else console.log("[DEBUG]  Nenhuma condio foi atendida! Tipo:",ke.type,"Action:",ke.action);const Ee=Number(((vn=L[R])==null?void 0:vn.cash)||0);if(console.log("[DEBUG] Verificando saldo aps recuperao - Novo saldo:",Ee,"Necessrio:",C),Ee>=C){console.log("[DEBUG]  Saldo suficiente aps recuperao! Processando pagamento de:",C);const ee=L.map((le,Ce)=>Ce!==R?le:{...le,cash:Math.max(0,(le.cash||0)-C),pos:le.pos});return console.log("[DEBUG]  PAGAMENTO - Saldo antes:",(Nn=L[R])==null?void 0:Nn.cash,"Valor a pagar:",C,"Saldo aps:",(Dn=ee[R])==null?void 0:Dn.cash),e(ee),y(ee,o,te.current),!0}else return console.log("[DEBUG]  Saldo ainda insuficiente aps recuperao. Continuando recurso..."),await pe(C,M,K,L)}else return p(!1),!1}else if(se.action==="BANKRUPT"){const ke=Z.map((ee,le)=>le===R?{...ee,bankrupt:!0}:ee);if(Ns(ke)<=1){const ee=ke.findIndex(le=>!(le!=null&&le.bankrupt));return E(ee>=0?ke[ee]:null),e(ke),g(!0),p(!1),y(ke,o,n,!0,ee>=0?ke[ee]:null),!1}const Ee=cs(ke,R);return e(ke),s(Ee),p(!1),y(ke,Ee,te.current),!1}else return p(!1),!1},De=ye.pos,j=(De+q)%Rs,I=j<De,B=I&&De>=Rs-1;console.log("[DEBUG]  MOVIMENTO - De posio:",De,"Para posio:",j,"Steps:",q,"Lap:",I,"CompletedLap:",B);const re=kl(De,j,0)||I,V=te.current,_e=t.filter(C=>!(C!=null&&C.bankrupt)).length,W=t.map((C,M)=>{if(M!==R)return C;const K=(C.cash||0)+(Fe||0),Z=Number(C.lastRevenueRound)||0;let G=!1,se=j;if(re){const ue=Math.max(Z,V);return V===5&&_e>1&&(G=!0,se=0),{...C,pos:se,cash:Math.max(0,K),lastRevenueRound:ue,waitingAtRevenue:G}}return{...C,pos:se,cash:Math.max(0,K),lastRevenueRound:Z,waitingAtRevenue:!1}});console.log("[DEBUG]  APS MOVIMENTO - Jogador:",(he=W[R])==null?void 0:he.name,"Posio:",($t=W[R])==null?void 0:$t.pos,"Saldo:",(at=W[R])==null?void 0:at.cash,"lastRevenueRound:",(jn=W[R])==null?void 0:jn.lastRevenueRound,"waitingAtRevenue:",(ht=W[R])==null?void 0:ht.waitingAtRevenue);let de=te.current,P=[...i],Q=!1,me=!1;if(I&&(console.log("[DEBUG]  VOLTA COMPLETA DETECTADA (lap=true) - Jogador completou uma volta completa!",{jogador:ye.name,posicaoAnterior:De,posicaoNova:j,rodadaAtual:te.current}),P.length<t.length&&(P=[...P,...new Array(t.length-P.length).fill(!1)]),P[R]=!0,console.log("[DEBUG]  Flag marcada por volta completa (lap) - Flags:",P.map((C,M)=>{var K;return`${(K=t[M])==null?void 0:K.name}:${C}`}).join(", "))),re){P.length<t.length&&(P=[...P,...new Array(t.length-P.length).fill(!1)]),P[R]?console.log("[DEBUG]  Jogador j tinha flag marcada (por lap) - Flags:",P.map((G,se)=>{var ue;return`${(ue=t[se])==null?void 0:ue.name}:${G}`}).join(", ")):(P[R]=!0,console.log("[DEBUG]  Jogador passou pela casa 0 (crossedStart1ForRound) - Flags:",P.map((G,se)=>{var ue;return`${(ue=t[se])==null?void 0:ue.name}:${G}`}).join(", ")));const C=W.filter(G=>!(G!=null&&G.bankrupt)),M=W.map((G,se)=>G!=null&&G.bankrupt?-1:se).filter(G=>G>=0),K=W.filter(G=>!(G!=null&&G.bankrupt)),Z=K.length>0&&K.every(G=>(Number(G.lastRevenueRound)||0)>=te.current);if(console.log("[DEBUG]  Verificando allAliveDone - Rodada atual:",te.current,"Jogadores vivos:",K.map(G=>({name:G.name,lastRevenueRound:G.lastRevenueRound}))),console.log("[DEBUG]  Verificao de rodada - Jogador:",(gn=W[R])==null?void 0:gn.name,"Rodada atual:",te.current,"round do closure:",n),console.log("[DEBUG]  Jogadores vivos:",M.map(G=>{var se;return`${(se=W[G])==null?void 0:se.name}:${P[G]}`}).join(", ")),console.log("[DEBUG]  Total de jogadores vivos:",M.length),console.log("[DEBUG]  Flags completas:",P.map((G,se)=>{var ue;return`${(ue=W[se])==null?void 0:ue.name}:${G?"":""}`}).join(", ")),console.log("[DEBUG]  Todos passaram pela casa 0?",Z),Z){const G=te.current;if(de=G+1,Q=!0,G===5&&Q){console.log("[ENDGAME] detectado: fim da 5 (tentaria round=6)"),Gr(W,6,o);return}console.log("[DEBUG]  Calculando incremento - round (ref):",G,"round (closure):",n,"nextRound:",de),P=P.map((ue,Se)=>{var ve;return(ve=W[Se])!=null&&ve.bankrupt?P[Se]:!1}),console.log("[DEBUG]  RODADA INCREMENTADA - Nova rodada:",de,"Rodada anterior (ref):",G,"Rodada anterior (closure):",n,"Jogadores vivos:",K.length),console.log("[DEBUG]  Flags resetadas:",P.map((ue,Se)=>{var ve;return`${(ve=W[Se])==null?void 0:ve.name}:${ue}`}).join(", ")),b(` Rodada ${de} iniciada! Todos os jogadores vivos passaram pela casa de faturamento.`)}else{const G=K.filter(se=>(Number(se.lastRevenueRound)||0)<te.current).map(se=>se.name);console.log("[DEBUG]  Rodada NO incrementada - ainda faltam jogadores completarem o ms:",G.join(", "))}}l(P),console.log("[DEBUG] roundFlags updated / round closed:",P.map((C,M)=>{var K;return`${(K=W[M])==null?void 0:K.name}:${C}`}).join(", "));let Ve=cs(W,R);if(te.current===5){let C=0;for(;C<W.length;){const M=W[Ve];if(!M.bankrupt&&M.waitingAtRevenue!==!0)break;Ve=(Ve+1)%W.length,C++}}Fe&&b(`${ye.name} ${Fe>0?"ganhou":"pagou"} $${Math.abs(Fe).toLocaleString()}`),ge&&b(ge),e(W),r(C=>{let M=C;return Q?de>C?(M=de,console.log("[DEBUG]  RODADA INCREMENTADA - Rodada anterior:",C,"Nova rodada:",M,"nextRound calculado:",de),console.log("[DEBUG]  Rodada incrementada com sucesso!"),b(` Rodada ${M} iniciada! Todos os jogadores vivos passaram pela casa de faturamento.`)):(M=C+1,console.log("[DEBUG]  RODADA INCREMENTADA (forado) - Rodada anterior:",C,"Nova rodada:",M,"nextRound calculado:",de),console.log("[DEBUG]  Rodada incrementada com sucesso (forado devido a sincronizao)!"),b(` Rodada ${M} iniciada! Todos os jogadores vivos passaram pela casa de faturamento.`)):(M=Math.max(de,C),M!==C&&console.log("[DEBUG]  Rodada atualizada via Math.max - prevRound:",C,"nextRound:",de,"finalRound:",M)),te.current=M,M});const Ie=de,we=P;if(Y.current={nextPlayers:W,nextTurnIdx:Ve,nextRound:Ie,nextRoundFlags:we,timestamp:Date.now(),shouldIncrementRound:Q,endGame:me},console.log("[DEBUG]  pendingTurnDataRef preenchido - prximo turno:",Ve,"rodada atual:",n,"prxima rodada:",Ie,"nextRound calculado:",de,"shouldIncrementRound:",Q,"rodada foi incrementada?",de>n,"roundFlags:",we.map((C,M)=>{var K;return`${(K=W[M])==null?void 0:K.name}:${C}`}).join(", ")),Gr(W,de,o)){Y.current=null,ne.current=!1,$.current=!1;return}const ie=j+1,kt=kl(De,j,0),H=kl(De,j,22);let J=!1;if((ie===6||ie===16||ie===32||ie===49)&&u&&N&&S&&(J=!0,$.current=!0,(async()=>{var G,se,ue,Se,ve;const C=((G=t[R])==null?void 0:G.erpLevel)||null,M=((se=t[R])==null?void 0:se.erpOwned)||((ue=t[R])==null?void 0:ue.erp)||{},K=await Me(a.jsx(mf,{currentCash:((Se=W[R])==null?void 0:Se.cash)??f,currentLevel:C,erpOwned:M}));if(!K||K.action!=="BUY")return;const Z=Number(((ve=K.values)==null?void 0:ve.compra)||0);if(!ze(R,Z,"comprar ERP")){p(!1);return}e(xe=>{const tt=xe.map((Ge,Te)=>Te!==R?Ge:Ct(Ge,{cashDelta:-Z,erpLevelSet:K.level}));return y(tt,o,te.current),tt})})()),(ie===2||ie===11||ie===19||ie===47)&&u&&N&&S&&($.current=!0,(async()=>{var Z,G,se,ue;const C=t.find(c)||W[R],M=await Me(a.jsx(gf,{canTrain:{comum:Number(C==null?void 0:C.vendedoresComuns)||0,field:Number(C==null?void 0:C.fieldSales)||0,inside:Number(C==null?void 0:C.insideSales)||0,gestor:Number((C==null?void 0:C.gestores)??(C==null?void 0:C.gestoresComerciais)??(C==null?void 0:C.managers))||0},ownedByType:{comum:((Z=C==null?void 0:C.trainingsByVendor)==null?void 0:Z.comum)||[],field:((G=C==null?void 0:C.trainingsByVendor)==null?void 0:G.field)||[],inside:((se=C==null?void 0:C.trainingsByVendor)==null?void 0:se.inside)||[],gestor:((ue=C==null?void 0:C.trainingsByVendor)==null?void 0:ue.gestor)||[]}}));if(!M||M.action!=="BUY")return;const K=Number(M.grandTotal||0);if(!ze(R,K,"comprar Treinamento")){p(!1);return}e(Se=>{const ve=Se.map((xe,tt)=>tt!==R?xe:hf(xe,M));return y(ve,o,te.current),ve})})()),(ie===5||ie===10||ie===43)&&u&&N&&S&&($.current=!0,(async()=>{var K,Z,G,se,ue,Se,ve,xe,tt,Ge,Te,vt,Qe,pt,jt,Mt,vn,Nn,Dn;const C=((K=W[R])==null?void 0:K.cash)??f,M=await Me(a.jsx(Hx,{currentCash:C}));if(M){if(M.action==="OPEN"){const ke=String(M.open||"").toUpperCase();if(ke==="MIX"){const L=((Z=t[R])==null?void 0:Z.mixProdutos)||null,Ee=((G=t[R])==null?void 0:G.mixOwned)||((se=t[R])==null?void 0:se.mix)||{},ee=await Me(a.jsx(Sf,{currentCash:((ue=W[R])==null?void 0:ue.cash)??f,currentLevel:L,mixOwned:Ee}));if(ee&&ee.action==="BUY"){const le=Number(ee.compra||0),Ce=String(ee.level||"D");if(!ze(R,le,"comprar MIX")){p(!1);return}e(je=>{const Re=je.map((qe,Vt)=>Vt!==R?qe:Ct(qe,{cashDelta:-le,mixProdutosSet:Ce,mixBaseSet:{despesaPorCliente:Number(ee.despesa||0),faturamentoPorCliente:Number(ee.faturamento||0)}}));return y(Re,o,te.current),Re})}return}if(ke==="MANAGER"){const L=await Me(a.jsx(xf,{currentCash:((Se=W[R])==null?void 0:Se.cash)??f}));if(L&&(L.action==="BUY"||L.action==="HIRE")){const Ee=Number(L.headcount??L.qty??L.managersQty??1),ee=Number(typeof L.cashDelta<"u"?L.cashDelta:-Number(L.cost??L.total??L.totalHire??0)),le=ee<0?-ee:0;if(le>0&&!ze(R,le,"contratar Gestor")){p(!1);return}const Ce=Number(L.expenseDelta??L.totalExpense??L.maintenanceDelta??0);e(je=>{const Re=je.map((qe,Vt)=>Vt!==R?qe:Ct(qe,{cashDelta:ee,gestoresDelta:Ee,manutencaoDelta:Ce}));return y(Re,o,te.current),Re})}return}if(ke==="INSIDE"){const L=await Me(a.jsx(yf,{currentCash:((ve=W[R])==null?void 0:ve.cash)??f}));if(L&&(L.action==="BUY"||L.action==="HIRE")){const Ee=Number(L.cost??L.total??0);if(!ze(R,Ee,"contratar Inside Sales")){p(!1);return}const ee=Number(L.headcount??L.qty??1);e(le=>{const Ce=le.map((je,Re)=>Re!==R?je:Ct(je,{cashDelta:-Ee,insideSalesDelta:ee}));return y(Ce,o,te.current),Ce})}return}if(ke==="FIELD"){const L=await Me(a.jsx(bf,{currentCash:((xe=W[R])==null?void 0:xe.cash)??f}));if(L&&(L.action==="HIRE"||L.action==="BUY")){const Ee=Number(L.headcount??L.qty??1),ee={cashDelta:Number(L.cashDelta??-Number(L.totalHire??L.total??L.cost??0)),manutencaoDelta:Number(L.expenseDelta??L.totalExpense??0),revenueDelta:Number(L.revenueDelta??0),fieldSalesDelta:Ee},le=ee.cashDelta<0?-ee.cashDelta:0;if(le>0&&!ze(R,le,"contratar Field Sales")){p(!1);return}e(Ce=>{const je=Ce.map((Re,qe)=>qe!==R?Re:Ct(Re,ee));return y(je,o,te.current),je})}return}if(ke==="COMMON"){const L=await Me(a.jsx(wf,{currentCash:((tt=W[R])==null?void 0:tt.cash)??f}));if(L&&L.action==="BUY"){const Ee=Number(L.headcount??L.qty??0),ee={cashDelta:Number(L.cashDelta??-Number(L.totalHire??L.total??L.cost??0)),vendedoresComunsDelta:Ee,manutencaoDelta:Number(L.expenseDelta??L.totalExpense??0),revenueDelta:Number(L.revenueDelta??0)},le=ee.cashDelta<0?-ee.cashDelta:0;if(le>0&&!ze(R,le,"contratar Vendedores Comuns")){p(!1);return}e(Ce=>{const je=Ce.map((Re,qe)=>qe!==R?Re:Ct(Re,ee));return y(je,o,te.current),je})}return}if(ke==="ERP"){const L=((Ge=t[R])==null?void 0:Ge.erpLevel)||null,Ee=((Te=t[R])==null?void 0:Te.erpOwned)||((vt=t[R])==null?void 0:vt.erp)||{},ee=await Me(a.jsx(mf,{currentCash:((Qe=W[R])==null?void 0:Qe.cash)??f,currentLevel:L,erpOwned:Ee}));if(ee&&ee.action==="BUY"){const le=Number(((pt=ee.values)==null?void 0:pt.compra)||0);if(!ze(R,le,"comprar ERP")){p(!1);return}e(Ce=>{const je=Ce.map((Re,qe)=>qe!==R?Re:Ct(Re,{cashDelta:-le,erpLevelSet:ee.level}));return y(je,o,te.current),je})}return}if(ke==="CLIENTS"){const L=await Me(a.jsx(vf,{currentCash:((jt=W[R])==null?void 0:jt.cash)??f}));if(L&&L.action==="BUY"){const Ee=Number(L.totalCost||0);if(!ze(R,Ee,"comprar Clientes")){p(!1);return}const ee=Number(L.qty||0),le=Number(L.maintenanceDelta||0),Ce=Number(L.bensDelta||Ee);e(je=>{const Re=je.map((qe,Vt)=>Vt!==R?qe:Ct(qe,{cashDelta:-Ee,clientsDelta:ee,manutencaoDelta:le,bensDelta:Ce}));return y(Re,o,te.current),Re})}return}if(ke==="TRAINING"){const L=t.find(c)||W[R],Ee=await Me(a.jsx(gf,{canTrain:{comum:Number(L==null?void 0:L.vendedoresComuns)||0,field:Number(L==null?void 0:L.fieldSales)||0,inside:Number(L==null?void 0:L.insideSales)||0,gestor:Number((L==null?void 0:L.gestores)??(L==null?void 0:L.gestoresComerciais)??(L==null?void 0:L.managers))||0},ownedByType:{comum:((Mt=L==null?void 0:L.trainingsByVendor)==null?void 0:Mt.comum)||[],field:((vn=L==null?void 0:L.trainingsByVendor)==null?void 0:vn.field)||[],inside:((Nn=L==null?void 0:L.trainingsByVendor)==null?void 0:Nn.inside)||[],gestor:((Dn=L==null?void 0:L.trainingsByVendor)==null?void 0:Dn.gestor)||[]}}));if(Ee&&Ee.action==="BUY"){const ee=Number(Ee.grandTotal||0);if(!ze(R,ee,"comprar Treinamento")){p(!1);return}e(le=>{const Ce=le.map((je,Re)=>Re!==R?je:hf(je,Ee));return y(Ce,o,te.current),Ce})}return}}if(M.action==="BUY"){if(M.kind==="CLIENTS"||M.modal==="CLIENTS"||typeof M.clientsQty<"u"||typeof M.numClients<"u"||typeof M.totalCost<"u"||typeof M.maintenanceDelta<"u"){const Ee=Number(M.totalCost??M.total??M.amount??0);if(!ze(R,Ee,"comprar Clientes")){p(!1);return}const ee=Number(M.clientsQty??M.numClients??M.qty??0),le=Number(M.maintenanceDelta??M.maintenance??M.mexp??0),Ce=Number(M.bensDelta??Ee);e(je=>{const Re=je.map((qe,Vt)=>Vt!==R?qe:Ct(qe,{cashDelta:-Ee,clientsDelta:ee,manutencaoDelta:le,bensDelta:Ce}));return y(Re,o,te.current),Re});return}const L=Number(M.total??M.amount??0);if(!ze(R,L,"esta compra")){p(!1);return}e(Ee=>{const ee=Ee.map((le,Ce)=>Ce!==R?le:Ct(le,{cashDelta:-L,directBuysPush:[M.item||{total:L}]}));return y(ee,o,te.current),ee})}}})()),(ie===12||ie===21||ie===30||ie===42||ie===53)&&u&&N&&S&&($.current=!0,(async()=>{var Z;const C=await Me(a.jsx(yf,{currentCash:((Z=W[R])==null?void 0:Z.cash)??f}));if(!C||C.action!=="HIRE"&&C.action!=="BUY")return;const M=Number(C.cost??C.total??0);if(!ze(R,M,"contratar Inside Sales")){p(!1);return}const K=Number(C.headcount??C.qty??1);e(G=>{const se=G.map((ue,Se)=>Se!==R?ue:Ct(ue,{cashDelta:-M,insideSalesDelta:K}));return y(se,o,te.current),se})})()),[4,8,15,17,20,27,34,36,39,46,52,55].includes(ie)&&u&&N&&S&&($.current=!0,(async()=>{var se;const C=await Me(a.jsx(vf,{currentCash:((se=W[R])==null?void 0:se.cash)??f}));if(!C||C.action!=="BUY")return;const M=Number(C.totalCost||0);if(!ze(R,M,"comprar Clientes")){p(!1);return}const K=Number(C.qty||0),Z=Number(C.maintenanceDelta||0),G=Number(C.bensDelta||M);e(ue=>{const Se=ue.map((ve,xe)=>xe!==R?ve:Ct(ve,{cashDelta:-M,clientsDelta:K,manutencaoDelta:Z,bensDelta:G}));return y(Se,o,te.current),Se})})()),[18,24,29,51].includes(ie)&&u&&N&&S&&($.current=!0,(async()=>{var se;const C=await Me(a.jsx(xf,{currentCash:((se=W[R])==null?void 0:se.cash)??f}));if(!C||C.action!=="BUY"&&C.action!=="HIRE")return;const M=Number(C.headcount??C.qty??C.managersQty??1),K=Number(typeof C.cashDelta<"u"?C.cashDelta:-Number(C.cost??C.total??C.totalHire??0)),Z=K<0?-K:0;if(Z>0&&!ze(R,Z,"contratar Gestor")){p(!1);return}const G=Number(C.expenseDelta??C.totalExpense??C.maintenanceDelta??0);e(ue=>{const Se=ue.map((ve,xe)=>xe!==R?ve:Ct(ve,{cashDelta:K,gestoresDelta:M,manutencaoDelta:G}));return y(Se,o,te.current),Se})})()),[13,25,33,38,50].includes(ie)&&u&&N&&S&&($.current=!0,(async()=>{var M;const C=await Me(a.jsx(bf,{currentCash:((M=W[R])==null?void 0:M.cash)??f}));if(C&&(C.action==="HIRE"||C.action==="BUY")){const K=Number(C.headcount??C.qty??1),Z={cashDelta:Number(C.cashDelta??-Number(C.totalHire??C.total??C.cost??0)),manutencaoDelta:Number(C.expenseDelta??C.totalExpense??0),revenueDelta:Number(C.revenueDelta??0),fieldSalesDelta:K},G=Z.cashDelta<0?-Z.cashDelta:0;if(G>0&&!ze(R,G,"contratar Field Sales")){p(!1);return}e(se=>{const ue=se.map((Se,ve)=>ve!==R?Se:Ct(Se,Z));return y(ue,o,te.current),ue})}})()),[9,28,40,45].includes(ie)&&u&&N&&S&&($.current=!0,(async()=>{var G;const C=await Me(a.jsx(wf,{currentCash:((G=W[R])==null?void 0:G.cash)??f}));if(!C||C.action!=="BUY")return;const M=Number(C.headcount??C.qty??0),K={cashDelta:Number(C.cashDelta??-Number(C.totalHire??C.total??C.cost??0)),vendedoresComunsDelta:M,manutencaoDelta:Number(C.expenseDelta??C.totalExpense??0),revenueDelta:Number(C.revenueDelta??0)},Z=K.cashDelta<0?-K.cashDelta:0;if(Z>0&&!ze(R,Z,"contratar Vendedores Comuns")){p(!1);return}e(se=>{const ue=se.map((Se,ve)=>ve!==R?Se:Ct(Se,K));return y(ue,o,te.current),ue})})()),[7,31,44].includes(ie)&&u&&N&&S&&($.current=!0,(async()=>{var se,ue,Se,ve;const C=((se=t[R])==null?void 0:se.mixProdutos)||null,M=((ue=t[R])==null?void 0:ue.mixOwned)||((Se=t[R])==null?void 0:Se.mix)||{},K=await Me(a.jsx(Sf,{currentCash:((ve=W[R])==null?void 0:ve.cash)??f,currentLevel:C,mixOwned:M}));if(!K||K.action!=="BUY")return;const Z=Number(K.compra||0);if(!ze(R,Z,"comprar MIX")){p(!1);return}const G=String(K.level||"D");e(xe=>{const tt=xe.map((Ge,Te)=>Te!==R?Ge:Ct(Ge,{cashDelta:-Z,mixProdutosSet:G,mixBaseSet:{despesaPorCliente:Number(K.despesa||0),faturamentoPorCliente:Number(K.faturamento||0)}}));return y(tt,o,te.current),tt})})()),[3,14,22,26,35,41,48,54].includes(ie)&&u&&N&&S&&($.current=!0,(async()=>{const C=await Me(a.jsx(Kx,{}));if(!C||C.action!=="APPLY_CARD")return;const M=W[R]||t.find(c)||{};let K=Number.isFinite(C.cashDelta)?Number(C.cashDelta):0,Z=Number.isFinite(C.clientsDelta)?Number(C.clientsDelta):0;if(K<0){const se=-K;await pe(se,"Sorte & Revs","pagar",W)}if(e(se=>{const ue=se.map((Se,ve)=>{var tt;if(ve!==R)return Se;let xe={...Se};if(K&&(xe.cash=Math.max(0,(xe.cash??0)+K)),Z){const Ge=xe.clients||0;xe.clients=Math.max(0,Ge+Z),console.log("[DEBUG] SorteReves - Clientes alterados:",Ge,"->",xe.clients,"delta:",Z)}if(C.gainSpecialCell&&(xe.fieldSales=(xe.fieldSales||0)+(C.gainSpecialCell.fieldSales||0),xe.support=(xe.support||0)+(C.gainSpecialCell.support||0),xe.gestores=(xe.gestores||0)+(C.gainSpecialCell.manager||0),xe.gestoresComerciais=(xe.gestoresComerciais||0)+(C.gainSpecialCell.manager||0),xe.managers=(xe.managers||0)+(C.gainSpecialCell.manager||0)),C.id==="casa_change_cert_blue"){xe.az=(xe.az||0)+1;const Ge=new Set(((tt=xe.trainingsByVendor)==null?void 0:tt.comum)||[]);Ge.add("personalizado"),xe.trainingsByVendor={...xe.trainingsByVendor||{},comum:Array.from(Ge)}}return xe});return y(ue,o,te.current),ue}),C.perClientBonus||C.perCertifiedManagerBonus||C.mixLevelBonusABOnly){const se=W[R]||t.find(c)||{};let ue=0;if(C.perClientBonus&&(ue+=(Number(se.clients)||0)*Number(C.perClientBonus||0)),C.perCertifiedManagerBonus&&(ue+=Px(se)*Number(C.perCertifiedManagerBonus||0)),C.mixLevelBonusABOnly){const Se=String(se.mixProdutos||"").toUpperCase();(Se==="A"||Se==="B")&&(ue+=Number(C.mixLevelBonusABOnly||0))}ue&&e(Se=>{const ve=Se.map((xe,tt)=>tt===R?{...xe,cash:(Number(xe.cash)||0)+ue}:xe);return y(ve,o,te.current),ve})}})()),kt&&u&&N&&S){$.current=!0;const C=W[R]||{},M=Math.max(0,Math.floor(Ia(C)));(async()=>{await Me(a.jsx(Jx,{value:M})),e(K=>{const Z=K.map((G,se)=>se!==R?G:{...G,cash:(G.cash||0)+M});return y(Z,o,te.current),Z}),b(`${C.name} recebeu faturamento do ms: +$${M.toLocaleString()}`);try{setTimeout(()=>T==null?void 0:T({action:"AUTO_CLOSE_BELOW"}),0)}catch{}})()}if(H&&u&&N&&S){$.current=!0,console.log("[DEBUG]  DESPESAS OPERACIONAIS - Jogador:",(Cn=W[R])==null?void 0:Cn.name,"Posio atual:",(F=W[R])==null?void 0:F.pos);const C=W[R]||{},M=Math.max(0,Math.floor(Ma(C))),K=C.loanPending||{},Z=Number(K.amount)>0&&!K.charged&&K.shouldChargeOnNextExpenses===!0,G=Z?Math.max(0,Math.floor(Number(K.amount))):0;console.log("[DEBUG]  DESPESAS - Valor:",M,"Emprstimo a cobrar:",G,"Total:",M+G),console.log("[DEBUG]  EMPRSTIMO - Detalhes:",{amount:Number(K.amount),charged:K.charged,shouldChargeOnNextExpenses:K.shouldChargeOnNextExpenses,currentRound:n,shouldCharge:Z}),(async()=>{var Se,ve,xe;await Me(a.jsx(Yx,{expense:M,loanCharge:G}));const se=M+G;console.log("[DEBUG]  ANTES handleInsufficientFunds - Saldo atual:",(Se=W[R])==null?void 0:Se.cash,"Total a pagar:",se,"Posio:",(ve=W[R])==null?void 0:ve.pos);const ue=await pe(se,"Despesas Operacionais","pagar",W);if(console.log("[DEBUG]  APS handleInsufficientFunds - canPayExpenses:",ue,"Posio atual:",(xe=W[R])==null?void 0:xe.pos),!ue){console.log("[DEBUG]  canPayExpenses  false - no liberando turno aqui, deixando tick() gerenciar");return}Z&&e(tt=>{const Ge=tt.map((Te,vt)=>{var pt;if(vt!==R)return Te;const Qe={...Te};return Qe.loanPending={...Te.loanPending||{},charged:!0,chargedAtRound:n,shouldChargeOnNextExpenses:!1},Qe.pos=((pt=W[R])==null?void 0:pt.pos)??Te.pos,Qe});return y(Ge,o,te.current),Ge}),b(`${C.name} pagou despesas operacionais: -$${M.toLocaleString()}`),G>0&&b(`${C.name} teve emprstimo cobrado: -$${G.toLocaleString()}`),e(tt=>{var Te,vt,Qe;const Ge=tt.map((pt,jt)=>{var Mt;return jt!==R?pt:{...pt,pos:((Mt=W[R])==null?void 0:Mt.pos)??pt.pos}});return console.log("[DEBUG]  DESPESAS FINALIZADAS - Jogador:",(Te=Ge[R])==null?void 0:Te.name,"Posio final:",(vt=Ge[R])==null?void 0:vt.pos,"Saldo final:",(Qe=Ge[R])==null?void 0:Qe.cash),Ge})})()}const Ua=Date.now();let Et=0;const er=200,tr=()=>{var Se;if(Et++,Et>er){console.warn("[DEBUG]  TIMEOUT - excedeu tentativas mximas, forando desbloqueio");const ve=Ae.current;String(ve||"")===String(d)&&(p(!1),ne.current=!1,O.current>0&&(console.warn("[DEBUG]  Forando modalLocks para 0 (timeout)"),O.current=0,A(0)),$.current=!1);return}const C=O.current,M=$.current,K=Ae.current,Z=String(K||"")===String(d);if(console.log("[DEBUG] tick - tentativa:",Et,"modalLocks:",C,"openingModalRef:",M,"lockOwner:",K,"myUid:",d,"isLockOwner:",Z),M){console.log("[DEBUG]  tick - modal est sendo aberta, aguardando..."),setTimeout(tr,150);return}const G=We.current?Date.now()-We.current:1/0;if(C===0&&(G>=200||!We.current)){const ve=Y.current;if(!!(ve!=null&&ve.endGame||it.current)&&!gr.current){gr.current=!0,it.current=!1;const Te=Array.isArray(At.current)?At.current:(ve==null?void 0:ve.nextPlayers)||[],vt=(Te||[]).filter(pt=>!(pt!=null&&pt.bankrupt));let Qe=null;vt.length>0&&(Qe=((Se=vt.map(jt=>({p:jt,patrimonio:(Number(jt.cash)||0)+(Number(jt.bens)||0),cash:Number(jt.cash)||0})).sort((jt,Mt)=>{var vn,Nn;return Mt.patrimonio-jt.patrimonio||Mt.cash-jt.cash||String(((vn=jt.p)==null?void 0:vn.name)||"").localeCompare(String(((Nn=Mt.p)==null?void 0:Nn.name)||""))})[0])==null?void 0:Se.p)||null),console.log("[ENDGAME] finalizando: vencedor=%s, round=5",(Qe==null?void 0:Qe.name)||""),e(Te||[]),g(!0),E(Qe),r(5),te.current=5,Y.current=null,ne.current=!1,$.current=!1,p(!1),y(Te||[],be.current,5,!0,Qe,{round:5,gameOver:!0,winner:Qe});return}const tt=t[o],Ge=tt&&String(tt.id)===String(d);if(Z||Ge&&!K){const Te=Y.current;if(console.log("[DEBUG]  tick - verificando pendingTurnDataRef:",Te?`prximo turno: ${Te.nextTurnIdx}`:"null"),Te){const vt=O.current,Qe=$.current,pt=o,jt=Ae.current,Mt=String(jt||"")===String(d),vn=We.current?Date.now()-We.current:1/0,Nn=vt===0&&!Qe&&(vn>=200||!We.current);if(Nn&&pt===o&&Mt){if(console.log("[DEBUG]  Mudando turno - de:",o,"para:",Te.nextTurnIdx,"finalModalLocks:",vt,"finalOpening:",Qe,"timeSinceLastModalClosed:",vn),Te.endGame){const Ee=Math.min(5,Number(Te.nextRound||5)),ee=t.filter(je=>!(je!=null&&je.bankrupt));let le=null;ee.length>0&&(le=ee.map(Re=>({...Re,patrimonio:(Re.cash||0)+(Re.bens||0)})).sort((Re,qe)=>qe.patrimonio-Re.patrimonio)[0]||null),console.log("[DEBUG]  FIM DE JOGO no tick - Rodada:",Ee,"Vencedor:",(le==null?void 0:le.name)||null),E(le),g(!0),b("Fim de jogo! 5 rodadas completas."),r(je=>{const Re=Math.min(5,Math.max(je,Ee));return te.current=Re,Re});const Ce={};Te.nextRoundFlags&&(Ce.roundFlags=Te.nextRoundFlags),Ce.round=Ee,Ce.gameOver=!0,Ce.winner=le,y(t,o,Ee,!0,le,Ce),Y.current=null,p(!1),ne.current=!1;return}ne.current=!0;const Dn=Te.nextRound,ke=Te.shouldIncrementRound||!1;console.log("[DEBUG]  Broadcast - Rodada a ser transmitida:",Dn,"Rodada atual no estado:",n,"shouldIncrement:",ke),s(Te.nextTurnIdx),r(Ee=>{const ee=Math.max(Ee,Dn);return ee!==Ee&&console.log("[DEBUG]  Rodada atualizada no tick - de:",Ee,"para:",ee),te.current=ee,ee});const L={};Te.nextRoundFlags&&(L.roundFlags=Te.nextRoundFlags),Te.shouldIncrementRound&&(L.round=Dn),y(Te.nextPlayers,Te.nextTurnIdx,Dn,m,w,L),Y.current=null,p(!1),ne.current=!1,console.log("[DEBUG]  Turno mudado com sucesso - Rodada:",Dn)}else{console.log("[DEBUG]  tick - condies no atendidas, no mudando turno",{finalModalLocks:vt,finalOpening:Qe,finalCanChangeTurn:Nn,timeSinceLastModalClosed:vn,finalTurnIdx:pt,turnIdx:o,finalIsLockOwner:Mt,isLockOwner:Z}),console.log("[DEBUG]  tick - condies no atendidas, no mudando turno",{finalModalLocks:vt,finalOpening:Qe,finalTurnIdx:pt,turnIdx:o,finalIsLockOwner:Mt,isLockOwner:Z}),setTimeout(tr,150);return}}else{console.log("[DEBUG]  tick - turnData  null, no mudando turno. turnIdx atual:",o,"lockOwner:",K,"isLockOwner:",Z);const vt=We.current?Date.now()-We.current:1/0,Qe=C===0&&(vt>=200||!We.current);if(Z&&Qe&&!M)if(Et<10){console.log("[DEBUG]  tick - tentando novamente em 200ms (pode ser que pendingTurnDataRef ainda no foi preenchido)"),setTimeout(tr,200);return}else console.warn("[DEBUG]  tick - excedeu tentativas de retry, liberando turnLock"),p(!1),ne.current=!1;else p(!1),ne.current=!1}}else console.log("[DEBUG]  tick - no sou o dono do cadeado e no  minha vez, no mudando turno",{isLockOwner:Z,isCurrentPlayerMe:Ge,currentLockOwner:K,myUid:d,turnIdx:o}),Ge||(p(!1),ne.current=!1);return}setTimeout(tr,100)};let yn=0;const Wn=50,Lc=()=>{yn++;const C=$.current,M=O.current>0;if((C||M)&&yn<Wn){console.log("[DEBUG]  checkBeforeTick - modal sendo aberta ou j aberta, aguardando...",{hasOpening:C,hasLocks:M,modalLocks:O.current,attempt:yn}),setTimeout(Lc,200);return}yn>=Wn&&(console.warn("[DEBUG]  checkBeforeTick - excedeu tentativas, forando avano do turno",{hasOpening:C,hasLocks:M,modalLocks:O.current}),O.current>0&&(console.warn("[DEBUG]  checkBeforeTick - forando modalLocks para 0"),O.current=0,A(0)),$.current=!1),console.log("[DEBUG]  checkBeforeTick - iniciando tick, sem modais abertas"),tr()};setTimeout(Lc,500)}catch(R){throw console.error("[DEBUG] Erro em advanceAndMaybeLap:",R),Ae.current===String(d)&&p(!1),R}finally{Ae.current===String(d)?setTimeout(()=>{Ae.current===String(d)&&(p(!1),ne.current=!1)},100):ne.current=!1}}},[t,n,o,i,u,c,d,f,m,b,y,e,r,s,l,p,ze,Gr,N,S,T]),Ba=fe.useCallback(()=>{if(m||!t.length)return;const q=cs(t,o);s(q),y(t,q,te.current)},[y,m,t,n,s,o]),yt=fe.useCallback(q=>{var Fe,ge,he,$t,at,jn,ht,gn,Cn;if(!(!(q!=null&&q.type)||Tt.current||it.current||gr.current)){if(q.type==="ROLL"){if(!u){console.warn("[DEBUG]  onAction ROLL - no  minha vez, ignorando");return}if(_){console.warn("[DEBUG]  onAction ROLL - turnLock ativo, ignorando");return}if(O.current>0){console.warn("[DEBUG]  onAction ROLL - h modais abertas, ignorando");return}try{Zo(q.steps,q.cashDelta,q.note)}catch(F){console.error("[DEBUG] Erro em advanceAndMaybeLap:",F),Ae.current===String(d)&&p(!1)}return}if(q.type==="RECOVERY"){const F=Math.floor(Math.random()*3e3)+1e3,R=t.find(c);if(!R)return;const ye=t.map(pe=>c(pe)?{...pe,cash:pe.cash+F}:pe);b(`${R.name} ativou Recuperao Financeira (+$${F})`),e(ye),y(ye,o,te.current);return}if(q.type==="RECOVERY_CUSTOM"){const F=Number(q.amount||0),R=t.find(c);if(!R)return;const ye=t.map(pe=>c(pe)?{...pe,cash:pe.cash+F}:pe);b(`${R.name} recuperou +$${F}`),e(ye),y(ye,o,te.current);return}if(q.type==="RECOVERY_MODAL"){if(!u||!N||!S)return;(async()=>{const F=await Me(a.jsx(_f,{playerName:(x==null?void 0:x.name)||"Jogador",currentPlayer:x}));if(F){if(F&&F.type==="TRIGGER_BANKRUPTCY"){yt({type:"BANKRUPT"});return}switch(F.type){case"FIRE":yt==null||yt({type:"RECOVERY_FIRE",items:F.items,amount:F.totalCredit??F.amount??0,note:F.note,creditByRole:F.creditByRole});break;case"REDUCE":{const R=Array.isArray(F.items)&&F.items.length>0,ye=R?F.items.map((I,B)=>({...I,group:String(I.group||I.tipo||"").toUpperCase(),level:String(I.level||I.nivel||"").toUpperCase(),credit:Number(I.credit??I.amount??0),selected:B===0?!0:!!I.selected})):void 0,pe=R&&(ye==null?void 0:ye[0])||F.selection||F.sel||(F.group&&F.level?{group:String(F.group).toUpperCase(),level:String(F.level).toUpperCase(),credit:Number(F.credit??F.amount??0)}:null),De=Number((R?F.total??F.totalCredit:void 0)??(pe==null?void 0:pe.credit)??F.amount??0),j=F.note||(R?`Reduo mltipla +R$ ${De.toLocaleString()}`:pe?`Reduo ${pe.group} nvel ${pe.level} +R$ ${De.toLocaleString()}`:`Reduo +R$ ${De.toLocaleString()}`);yt==null||yt({type:"RECOVERY_REDUCE",items:ye,selection:pe||null,amount:De,note:j});break}case"LOAN":{const R=typeof F.amount=="object"&&F.amount!==null?F.amount:{amount:Number(F.amount??0),cashDelta:Number(F.cashDelta??F.amount??0),loan:F.loan},ye=Number(R.amount??0),pe=Number(R.cashDelta??ye??0),De=R.loan??F.loan??{};yt==null||yt({type:"RECOVERY_LOAN",amount:ye,cashDelta:pe,loan:De,note:F.note});break}default:F.amount>0&&(yt==null||yt({type:"RECOVERY_CUSTOM",amount:F.amount,note:F.note}))}}})();return}if(q.type==="BANKRUPT_MODAL"){if(!u||!N||!S)return;(async()=>await Me(a.jsx(tb,{playerName:(x==null?void 0:x.name)||"Jogador"}))&&(yt==null||yt({type:"BANKRUPT"})))();return}if(q.type==="RECOVERY_FIRE"){const F=Number(q.amount||0),R=q.items||{},ye={cashDelta:F,vendedoresComunsDelta:-Number(R.comum||0),fieldSalesDelta:-Number(R.field||0),insideSalesDelta:-Number(R.inside||0),gestoresDelta:-Number(R.gestor||0)},pe=o;e(De=>{const j=De.map((I,B)=>B!==pe?I:Ct(I,ye));return y(j,o,te.current),j}),b(`${((Fe=t[pe])==null?void 0:Fe.name)||"Jogador"}: ${q.note||"Demisses"}`);return}if(q.type==="RECOVERY_LOAN"){const F=Math.max(0,Number(q.amount||0));if(!F)return;const R=o,ye=t[R];if(ye!=null&&ye.loanPending&&!ye.loanPending.charged){b(`${(ye==null?void 0:ye.name)||"Jogador"} j possui um emprstimo pendente.`);return}e(pe=>{const De=pe.map((j,I)=>I!==R?j:{...j,cash:(Number(j.cash)||0)+F,loanPending:{amount:F,charged:!1,shouldChargeOnNextExpenses:!0}});return y(De,o,te.current),De}),b(`${(ye==null?void 0:ye.name)||"Jogador"} pegou emprstimo: +$${F.toLocaleString()}`);return}if(q.type==="BUY_MIX"||q.kind==="MIX_BUY"||q.type==="DIRECT_BUY_MIX"){const F=String(q.level||"").toUpperCase(),R=Math.max(0,Number(q.price??0));if(!["A","B","C","D"].includes(F)){p(!1);return}const ye=o;if(!Vr(ye,R)){b("Saldo insuficiente para comprar MIX"),p(!1);return}e(pe=>{const De=pe.map((j,I)=>{if(I!==ye)return j;const B={...j.mixOwned||j.mix||{},D:!0};return B[F]=!0,{...j,cash:Math.max(0,(Number(j.cash)||0)-R),mixOwned:B,mix:B,mixLevel:F,mixProdutos:F}});return y(De,o,te.current),De}),b(`${((ge=t[ye])==null?void 0:ge.name)||"Jogador"} comprou MIX nvel ${F} por -$${R.toLocaleString()}`),p(!1);return}if(q.type==="BUY_ERP"||q.kind==="ERP_BUY"||q.type==="DIRECT_BUY_ERP"){const F=String(q.level||"").toUpperCase(),R=Math.max(0,Number(q.price??0));if(!["A","B","C","D"].includes(F)){p(!1);return}const ye=o;if(!Vr(ye,R)){b("Saldo insuficiente para comprar ERP"),p(!1);return}e(pe=>{const De=pe.map((j,I)=>{if(I!==ye)return j;const B={...j.erpOwned||j.erp||{},D:!0};return B[F]=!0,{...j,cash:Math.max(0,(Number(j.cash)||0)-R),erpOwned:B,erp:B,erpLevel:F,erpSystems:{...j.erpSystems||{},level:F}}});return y(De,o,te.current),De}),b(`${((he=t[ye])==null?void 0:he.name)||"Jogador"} comprou ERP nvel ${F} por -$${R.toLocaleString()}`),p(!1);return}if(q.type==="RECOVERY_REDUCE"){const F=P=>String(P||"").toUpperCase(),R=P=>{const Q=String(P||"").toUpperCase();return Q==="MIX"||Q==="ERP"?Q:Q.includes("MIX")?"MIX":Q.includes("ERP")?"ERP":""},pe=(()=>{if(Array.isArray(q.items)&&q.items.length)return q.items.filter(Q=>(Q==null?void 0:Q.selected)??!0).map(Q=>({group:R(Q.group||Q.kind),level:F(Q.level),credit:Math.max(0,Number(Q.credit??Q.amount??0))})).filter(Q=>(Q.group==="MIX"||Q.group==="ERP")&&["A","B","C"].includes(Q.level));const P=q.selection||q.target||null;if(P){const Q={group:R(P.group||P.kind),level:F(P.level),credit:Math.max(0,Number(P.credit??P.amount??q.amount??0))};if((Q.group==="MIX"||Q.group==="ERP")&&["A","B","C"].includes(Q.level))return[Q]}return[]})();if(!pe.length){const P=Math.max(0,Number(q.amount??0));if(P>0){const Q=o;e(me=>{const Ve=me.map((Ie,we)=>we!==Q?Ie:{...Ie,cash:(Number(Ie.cash)||0)+P});return y(Ve,o,te.current),Ve})}return}const De=(P,Q)=>{const me={A:!1,B:!1,C:!1,D:!1,...P||{}},Ve=F(Q);return!me.A&&!me.B&&!me.C&&!me.D&&(["A","B","C","D"].includes(Ve)?me[Ve]=!0:me.D=!0),me},j=P=>P!=null&&P.A?"A":P!=null&&P.B?"B":P!=null&&P.C?"C":P!=null&&P.D?"D":"-",I=o,B=t[I];if(pe.some(P=>P.level==="D")){b("No  possvel reduzir o nvel D (bsico).");return}const V=Array.isArray(($t=B.reducedLevels)==null?void 0:$t.MIX)?B.reducedLevels.MIX:[],_e=Array.isArray((at=B.reducedLevels)==null?void 0:at.ERP)?B.reducedLevels.ERP:[];if(pe.some(P=>P.group==="MIX"&&V.includes(P.level)||P.group==="ERP"&&_e.includes(P.level))){b("No  possvel reduzir um nvel que j foi reduzido anteriormente.");return}e(P=>{const Q=P.map((me,Ve)=>{var vr,Ua;if(Ve!==I)return me;let Ie={A:!1,B:!1,C:!1,D:!1,...me.mixOwned||me.mix||{}},we={A:!1,B:!1,C:!1,D:!1,...me.erpOwned||me.erp||{}};Ie=De(Ie,me.mixProdutos),we=De(we,me.erpSistemas);const ie=[...Array.isArray((vr=me.reducedLevels)==null?void 0:vr.MIX)?me.reducedLevels.MIX:[]],kt=[...Array.isArray((Ua=me.reducedLevels)==null?void 0:Ua.ERP)?me.reducedLevels.ERP:[]];let H=0,J=String(me.mixProdutos||"D").toUpperCase(),ot=String(me.erpLevel||me.erpSistemas||"D").toUpperCase();for(const Et of pe)if(H+=Math.max(0,Number(Et.credit||0)),Et.group==="MIX"){if(Et.level===J){const er=["A","B","C","D"],tr=er.indexOf(J);for(let yn=tr+1;yn<er.length;yn++){const Wn=er[yn];if(Ie[Wn]||Wn==="D"){J=Wn;break}}}delete Ie[Et.level],Ie[Et.level]=!1,ie.includes(Et.level)||ie.push(Et.level)}else if(Et.group==="ERP"){if(Et.level===ot){const er=["A","B","C","D"],tr=er.indexOf(ot);for(let yn=tr+1;yn<er.length;yn++){const Wn=er[yn];if(we[Wn]||Wn==="D"){ot=Wn;break}}}delete we[Et.level],we[Et.level]=!1,kt.includes(Et.level)||kt.push(Et.level)}Ie.A||Ie.B||Ie.C||(Ie.D=!0,Ie.A=!1,Ie.B=!1,Ie.C=!1),we.A||we.B||we.C||(we.D=!0,we.A=!1,we.B=!1,we.C=!1);const zn=j(Ie),Fn=j(we),yr=zn!=="-"?zn:J||"D",Xn=Fn!=="-"?Fn:ot||"D",Rn={...Ie},Zn={...we};return{...me,cash:(Number(me.cash)||0)+H,mixOwned:Rn,erpOwned:Zn,mix:Rn,erp:Zn,mixProdutos:yr,erpLevel:Xn,erpSistemas:Xn,reducedLevels:{MIX:ie,ERP:kt}}});return y(Q,o,te.current),Q});const de=pe.reduce((P,Q)=>P+Math.max(0,Number(Q.credit||0)),0);if(pe.length===1){const P=pe[0];b(`${(B==null?void 0:B.name)||"Jogador"} reduziu ${P.group} nvel ${P.level} e recebeu +$${de.toLocaleString()}`)}else b(`${(B==null?void 0:B.name)||"Jogador"} reduziu ${pe.length} nveis e recebeu +$${de.toLocaleString()}`);return}if(q.type==="BANKRUPT"){const F=o;try{String((jn=t[F])==null?void 0:jn.id)===String(d)&&(D==null||D(!0))}catch{}const R=t.map((De,j)=>j===F?{...De,bankrupt:!0}:De);if(b(`${((ht=t[F])==null?void 0:ht.name)||"Jogador"} declarou FALNCIA.`),Ns(R)<=1){const De=R.findIndex(j=>!(j!=null&&j.bankrupt));E(De>=0?R[De]:null),e(R),g(!0),p(!1),y(R,o,n,!0,De>=0?R[De]:null);return}const pe=cs(R,F);e(R),s(pe),p(!1),y(R,pe,te.current),console.log("[DEBUG]  advanceAndMaybeLap finalizada (falncia) - posio final:",(gn=R[pe])==null?void 0:gn.pos);return}console.log("[DEBUG]  advanceAndMaybeLap finalizada normalmente - posio final:",(Cn=nextPlayers[curIdx])==null?void 0:Cn.pos)}},[t,n,o,u,c,d,f,m,b,y,e,r,s,p,g,E,ze,N,S,T,D]);return fe.useEffect(()=>{if(v===0&&_&&!$.current){const q=Ae.current;String(q||"")===String(d)?(console.log("[DEBUG]  Destravando turnLock - modalLocks: 0, sou o lockOwner"),p(!1),ne.current=!1):u||(console.log("[DEBUG]  Destravando turnLock - no  minha vez e no sou lockOwner"),p(!1),ne.current=!1)}},[v,_,ae,d,u,p]),fe.useEffect(()=>{if(u&&v===0&&_&&!$.current){const q=Ae.current;String(q||"")===String(d)?(console.log("[DEBUG]  Destravando turnLock -  minha vez e sou o lockOwner"),p(!1),ne.current=!1):q||(console.log("[DEBUG]  Destravando turnLock -  minha vez mas no h lockOwner"),p(!1),ne.current=!1)}},[u,v,_,ae,d,p]),fe.useEffect(()=>()=>{oe.current&&(clearTimeout(oe.current),oe.current=null),ne.current=!1,$.current=!1},[]),{advanceAndMaybeLap:Zo,onAction:yt,nextTurn:Ba,modalLocks:v,lockOwner:ae}}const dm=k.createContext(null),rb=()=>{try{return k.useContext(dm)}catch{return null}};function ob({roomCode:t,hostId:e,children:n}){const r=!!$e&&!!t,o=String(t||"").trim(),[s,i]=k.useState(!1),[l,u]=k.useState({}),[c,d]=k.useState(0),h=k.useRef(l),f=k.useRef(c),x=k.useRef(0),y=k.useRef(null),b=k.useRef(null);k.useEffect(()=>{h.current=l},[l]),k.useEffect(()=>{f.current=c},[c]);const _=async g=>{const{data:w,error:E}=await $e.from("rooms").select("id, code, host_id, state, version, updated_at").eq("code",g).order("updated_at",{ascending:!1}).limit(1).maybeSingle();return E?(console.warn("[NET] getLatestRoomByCode error:",E.message||E),null):w};k.useEffect(()=>{if(!r)return;let g=!1;return(async()=>{let w=await _(o);if(!w){const E={code:o,state:{},version:0,host_id:e||null},{data:D,error:N}=await $e.from("rooms").insert(E).select("id, code, host_id, state, version, updated_at").maybeSingle();if(N){console.warn("[NET] rooms/create:",N.message||N);return}if(g)return;D?w=D:w=await _(o)}g||(w&&(y.current=w.id,b.current=w.updated_at,u(w.state||{}),d(w.version??0)),i(!0))})(),()=>{g=!0}},[r,o,e]),k.useEffect(()=>{if(!r)return;const g=$e.channel(`rooms:${o}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`code=eq.${o}`},w=>{const E=w.new||w.old||{};if(typeof E.version=="number"&&E.version>f.current){if(b.current&&E.updated_at){const D=new Date(E.updated_at).getTime(),N=new Date(b.current).getTime();if(D<N){console.log("[NET] realtime - ignorando evento de row antiga",{rowVersion:E.version,currentVersion:f.current,rowUpdatedAt:E.updated_at,knownUpdatedAt:b.current});return}}d(E.version),E.state&&u(E.state),E.updated_at&&(b.current=E.updated_at),E.id&&(y.current=E.id),x.current=Date.now(),console.log("[NET] applied remote v=%d",E.version)}}).subscribe();return()=>{try{$e.removeChannel(g)}catch{}}},[r,o]),k.useEffect(()=>{if(!r)return;const g=setInterval(async()=>{if(Date.now()-(x.current||0)<2e3)return;const w=await _(o);w&&w.version>f.current&&(d(w.version),u(w.state||{}),w.updated_at&&(b.current=w.updated_at),w.id&&(y.current=w.id))},700);return()=>clearInterval(g)},[r,o]);const p=async g=>{var N,S;if(!r||!s)return;const w=3,E=new Date().toISOString();for(let T=1;T<=w;T++){let v=await _(o);if(!v){const gt={code:o,state:{},version:0,host_id:e||null},{data:z,error:ae}=await $e.from("rooms").insert(gt).select("id, code, host_id, state, version, updated_at").maybeSingle();if(ae){if(console.warn(`[NET] commit - insert failed (attempt ${T}/${w}):`,ae.message||ae),T<w){await new Promise(ce=>setTimeout(ce,50*T));continue}return}if(z)v=z,y.current=v.id,b.current=v.updated_at;else if(v=await _(o),!v){if(console.warn(`[NET] commit - no row after insert (attempt ${T}/${w})`),T<w){await new Promise(ce=>setTimeout(ce,50*T));continue}return}}v.id&&(y.current=v.id);let A=v.state||{},O=typeof g=="function"?g(A)||{}:g||{};const $=y.current||v.id;if(!$){if(console.warn("[NET] commit - no target ID available"),T<w){await new Promise(gt=>setTimeout(gt,50*T));continue}return}const{data:ne,error:oe}=await $e.from("rooms").update({state:O,version:(v.version||0)+1,updated_at:E}).eq("id",$).eq("version",v.version).select("state, version, updated_at").maybeSingle();if(!oe&&ne){u(ne.state||{}),d(ne.version??(v.version||0)+1),ne.updated_at&&(b.current=ne.updated_at),T>1&&console.log(`[NET] commit succeeded on attempt ${T}/${w}`);return}if(((oe==null?void 0:oe.code)==="PGRST116"||((N=oe==null?void 0:oe.message)==null?void 0:N.includes("0 rows"))||((S=oe==null?void 0:oe.message)==null?void 0:S.includes("Cannot coerce"))||(oe==null?void 0:oe.code)==="23505"||(oe==null?void 0:oe.message)&&oe.message.includes("version")||!ne)&&T<w){console.warn(`[NET] commit conflict (attempt ${T}/${w}):`,(oe==null?void 0:oe.message)||oe||"no rows updated","- retrying with fresh state...");const gt=await _(o);gt&&(v=gt,y.current=gt.id,b.current=gt.updated_at,A=gt.state||{},O=typeof g=="function"?g(A)||{}:g||{}),await new Promise(z=>setTimeout(z,50*T));continue}console.warn(`[NET] commit conflict (attempt ${T}/${w}):`,(oe==null?void 0:oe.message)||oe||"no rows updated")}const D=await _(o);D?(u(D.state||{}),d(D.version??0),D.updated_at&&(b.current=D.updated_at),D.id&&(y.current=D.id),console.warn("[NET] commit failed after retries, resynced to latest state")):console.warn("[NET] commit fallback resync failed: no row found")},m=k.useMemo(()=>({enabled:r,ready:s,state:l,version:c,commit:p}),[r,s,l,c]);return a.jsx(dm.Provider,{value:m,children:n})}function sb(){var R,ye,pe,De;const[t,e]=k.useState("start"),[n,r]=k.useState(null),o=k.useMemo(()=>Ks(),[]),s=k.useMemo(()=>lo(""),[]),[i,l]=k.useState(o);k.useMemo(()=>Object.freeze({mixProdutos:"D",erpLevel:"D",clients:1,vendedoresComuns:1}),[]);const u=(j={})=>({...j,mixProdutos:j.mixProdutos??"D",erpLevel:j.erpLevel??"D",clients:j.clients??1,vendedoresComuns:j.vendedoresComuns??1}),c=j=>{if(!Array.isArray(j)||j.length===0)return j;const I=[...j];return I.sort((B,re)=>{if(typeof B.seat=="number"&&typeof re.seat=="number"&&B.seat!==re.seat)return B.seat-re.seat;if(typeof B.seat=="number"&&typeof re.seat!="number")return-1;if(typeof B.seat!="number"&&typeof re.seat=="number")return 1;const V=String((B==null?void 0:B.id)??(B==null?void 0:B.player_id)??""),_e=String((re==null?void 0:re.id)??(re==null?void 0:re.player_id)??"");return V.localeCompare(_e)}),I.forEach((B,re)=>{typeof B.seat!="number"&&(B.seat=re)}),console.log("[App] normalizePlayers - ordenados:",I.map(B=>({id:B.id,name:B.name,seat:B.seat}))),I},[d,h]=k.useState([u({id:o,name:s||"Jogador",cash:18e3,pos:0,color:"#ffd54f",bens:4e3})]),[f,x]=k.useState(1),[y,b]=k.useState(0),[_,p]=k.useState(new Array(1).fill(!1)),[m,g]=k.useState(!1),[w,E]=k.useState(null),[D,N]=k.useState({id:o,name:((R=d[0])==null?void 0:R.name)||"Jogador",color:((ye=d[0])==null?void 0:ye.color)||"#6c5ce7",cash:((pe=d[0])==null?void 0:pe.cash)??18e3,possibAt:0,clientsAt:0,matchId:"local"}),[S,T]=k.useState(["Bem-vindo ao Sales Game!"]),v=j=>T(I=>[j,...I].slice(0,12)),[A,O]=k.useState(!1),[$,ne]=k.useState(null),oe=k.useRef(null),We=k.useRef(null),gt=k.useRef(0),z=fe.useCallback(j=>!!j&&String(j.id)===String(i),[i]),ae=k.useMemo(()=>{var j;return((j=d.find(z))==null?void 0:j.cash)??0},[d,z]);k.useEffect(()=>{var j;try{const I=new URL(window.location.href),B=I.searchParams.get("room"),re=localStorage.getItem("sg:lastRoomName"),V=B||re;if(re&&!B&&localStorage.removeItem("sg:lastRoomName"),V&&B){r(V),(j=window.__setRoomCode)==null||j.call(window,V);try{I.searchParams.set("room",String(V)),history.replaceState(null,"",I.toString())}catch{}e("playersLobby")}else s&&s.trim()!==""&&e("lobbies")}catch{}},[s]);const ce=k.useMemo(()=>`sg-sync:${n||"local"}`,[n]);k.useEffect(()=>{var j,I;try{(I=(j=oe.current)==null?void 0:j.close)==null||I.call(j);const B=new BroadcastChannel(ce);return B.onmessage=re=>{var _e,W,de,P;const V=re.data||{};if(String(V.source)!==String(o)){if(V.type==="START"){const Q=Array.isArray(V.players)?V.players.map(u):[];if(!Q.length)return;const me=c(Q);try{const Ve=window.__MY_UID||window.__myUid||window.__playerId||null;Ve&&l(String(Ve))}catch{}h(me),b(0),x(1),p(new Array(Math.max(1,me.length)).fill(!1)),g(!1),E(null),e("game"),T(["Jogo iniciado!"]);return}if(V.type==="TURNLOCK"){O(!!V.value);return}if(V.type==="SYNC"&&t==="game"){if(Y!=null&&Y.enabled&&(Y!=null&&Y.ready)&&be){console.log("[App] SYNC ignorado - netState ativo, usando Supabase como autoridade nica");return}const Q=Number(V.version||0),me=Number(V.timestamp||0),Ve=Me.current;if(console.log("[App] SYNC recebido - verso remota:",Q,"verso local:",Ve,"turnIdx:",V.turnIdx,"round:",V.round,"source:",V.source),console.log("[App] SYNC - meu turnIdx atual:",y,"meu myUid:",i),Q>0&&Ve>0&&Q<Ve){console.log("[App] SYNC -  REJEITANDO estado remoto - verso antiga:",Q,"< verso local:",Ve);return}const Ie=Date.now(),we=it.current;if(Q>Ve&&(Me.current=Q,console.log("[App] SYNC -  Aceitando verso remota:",Q,"> verso local:",Ve)),V.turnIdx!==y)if(we&&Ie-we.timestamp<5e3)if(we.turnIdx!==y){const J=V.turnIdx===we.turnIdx;let ot=!1;J?(console.log("[App] SYNC -  IGNORANDO turnIdx remoto - tentando reverter mudana local recente (mantendo resto do snapshot)",{lastLocalTurnIdx:we.turnIdx,currentLocalTurnIdx:y,remoteTurnIdx:V.turnIdx,timeSinceLocalChange:Ie-we.timestamp,isReverting:!0}),ot=!0):(console.log("[App] SYNC -  IGNORANDO turnIdx remoto - turnIdx local mudou recentemente (< 5s) (mantendo resto do snapshot)",{lastLocalTurnIdx:we.turnIdx,currentLocalTurnIdx:y,remoteTurnIdx:V.turnIdx,timeSinceLocalChange:Ie-we.timestamp}),ot=!0),!ot&&V.turnIdx!==void 0&&b(V.turnIdx)}else V.turnIdx===we.turnIdx&&we.turnIdx!==y?console.log("[App] SYNC -  IGNORANDO turnIdx remoto - tentando reverter para valor anterior (mantendo resto do snapshot)",{lastLocalTurnIdx:we.turnIdx,currentLocalTurnIdx:y,remoteTurnIdx:V.turnIdx}):(b(V.turnIdx),console.log("[App] SYNC - Sincronizando turnIdx",{local:y,remote:V.turnIdx}));else we&&V.turnIdx===we.turnIdx&&we.turnIdx!==y?console.log("[App] SYNC -  IGNORANDO turnIdx remoto - tentando reverter para valor anterior (sem mudana recente, mantendo resto do snapshot)",{lastLocalTurnIdx:we.turnIdx,currentLocalTurnIdx:y,remoteTurnIdx:V.turnIdx}):(b(V.turnIdx),console.log("[App] SYNC - Sincronizando turnIdx",{local:y,remote:V.turnIdx}));if(Array.isArray(V.roundFlags)&&V.roundFlags.length>0&&p(H=>{const J=V.roundFlags.map((ot,It)=>H[It]||!1||ot);for(;J.length<H.length;)J.push(H[J.length]||!1);return console.log("[App] SYNC - roundFlags sincronizado:",J.map((ot,It)=>{var Wt;return`${(Wt=d[It])==null?void 0:Wt.name}:${ot}`}).join(", ")),J}),V.round!==f)if(we&&Ie-we.timestamp<3e3){const H=we.round!==f;x(H?J=>{const ot=Math.max(J,V.round);return ot>J&&console.log("[App] SYNC - Rodada incrementada via sincronizao:",J,"->",ot),ot}:V.round)}else x(H=>Math.max(H,V.round));const ie=d,kt=V.players.map(H=>{const J=ie.find(It=>It.id===H.id);if(!J)return H;if(String(H.id)===String(i)){const It=Number(J.clients||0),Wt=Number(H.clients||0),zn=Number(J.vendedoresComuns||0),Fn=Number(H.vendedoresComuns||0),yr=Number(J.fieldSales||0),Xn=Number(H.fieldSales||0),Rn=Number(J.insideSales||0),Zn=Number(H.insideSales||0);return It>Wt||zn>Fn||yr>Xn||Rn>Zn||J.mixProdutos&&J.mixProdutos!==H.mixProdutos&&J.mixProdutos!=="D"||J.erpLevel&&J.erpLevel!==H.erpLevel&&J.erpLevel!=="D"?(console.log("[App] SYNC - Detectadas compras locais, preservando estado local completo",{localClients:It,remoteClients:Wt,localVendedores:zn,remoteVendedores:Fn}),{...J,pos:H.pos,bankrupt:H.bankrupt??J.bankrupt,az:J.az||H.az||0,am:J.am||H.am||0,rox:J.rox||H.rox||0,trainingsByVendor:J.trainingsByVendor||H.trainingsByVendor||{},onboarding:J.onboarding||H.onboarding||!1}):{...H,cash:Math.max(Number(J.cash||0),Number(H.cash||0)),clients:Math.max(It,Wt),mixProdutos:J.mixProdutos??H.mixProdutos,erpLevel:J.erpLevel??H.erpLevel,vendedoresComuns:Math.max(zn,Fn),fieldSales:Math.max(yr,Xn),insideSales:Math.max(Rn,Zn),gestores:Math.max(Number(J.gestores??J.gestoresComerciais??J.managers??0),Number(H.gestores??H.gestoresComerciais??H.managers??0)),gestoresComerciais:Math.max(Number(J.gestoresComerciais??J.gestores??J.managers??0),Number(H.gestoresComerciais??H.gestores??H.managers??0)),managers:Math.max(Number(J.managers??J.gestores??J.gestoresComerciais??0),Number(H.managers??H.gestores??H.gestoresComerciais??0)),bens:Math.max(Number(J.bens||0),Number(H.bens||0)),manutencao:J.manutencao??H.manutencao,loanPending:J.loanPending??H.loanPending,az:J.az||H.az||0,am:J.am||H.am||0,rox:J.rox||H.rox||0,trainingsByVendor:J.trainingsByVendor||H.trainingsByVendor||{},onboarding:J.onboarding||H.onboarding||!1}}return{...H,az:J.az||H.az||0,am:J.am||H.am||0,rox:J.rox||H.rox||0,trainingsByVendor:J.trainingsByVendor||H.trainingsByVendor||{},onboarding:J.onboarding||H.onboarding||!1}});h(kt),console.log("[App] SYNC aplicado - novo turnIdx:",V.turnIdx),console.log("[App] SYNC - jogador da vez:",(_e=kt[V.turnIdx])==null?void 0:_e.name,"id:",(W=kt[V.turnIdx])==null?void 0:W.id),console.log("[App] SYNC -  minha vez?",String((de=kt[V.turnIdx])==null?void 0:de.id)===String(i)),g(H=>H||!!V.gameOver),E(H=>(m||V.gameOver)&&H&&!V.winner?H:V.winner??H),V.gameOver===!0&&console.log(`[App] [ENDGAME] estado remoto aplicado: gameOver=true winner=${((P=V.winner)==null?void 0:P.name)??V.winner??"N/A"}`)}}},oe.current=B,()=>B.close()}catch(B){console.warn("[App] BroadcastChannel init failed:",B)}},[ce,o,t]),k.useEffect(()=>{const j=async()=>{if(console.log(`[App] handleLeaveRoom chamado - fase: ${t}, currentLobbyId: ${n}, myUid: ${i}`),(t==="lobbies"||t==="playersLobby"||t==="game")&&n&&i)try{console.log(`[App] Saindo da sala ${n} na fase ${t}`),await wl({roomCode:n,playerId:i})}catch(re){console.warn("[App] Erro ao sair da sala:",re)}else console.log("[App] No executando leaveRoom - condies no atendidas")},I=()=>{j()},B=()=>{j()};return window.addEventListener("beforeunload",I),window.addEventListener("pagehide",B),()=>{window.removeEventListener("beforeunload",I),window.removeEventListener("pagehide",B)}},[t,n,i]);const Ae=j=>{var B,re;const I=!!j;O(I);try{(re=(B=oe.current)==null?void 0:B.postMessage)==null||re.call(B,{type:"TURNLOCK",value:I,source:o})}catch{}},Y=rb(),te=Y==null?void 0:Y.commit,At=Y==null?void 0:Y.version,be=Y==null?void 0:Y.state,Tt=k.useMemo(()=>{if(y<0||y>=d.length)return console.warn("[App] isMyTurn - turnIdx invlido:",y,"players.length:",d.length),!1;const j=d[y];if(!j)return console.log("[App] isMyTurn - owner no encontrado, turnIdx:",y,"players.length:",d.length),!1;if(j.bankrupt)return console.log("[App] isMyTurn - owner est falido:",j.name),!1;const I=j.id!=null&&String(j.id)===String(i);return console.log("[App] isMyTurn - owner:",j.name,"id:",j.id,"myUid:",i,"isMine:",I),I},[y,d,i]);fe.useRef(null);const it=fe.useRef(null),gr=fe.useRef(0),Me=fe.useRef(0),Vr=fe.useRef(0),ze=fe.useRef(null);fe.useEffect(()=>{const j=it.current,I=!j||j.turnIdx!==y,B=!j||j.round!==f,re=!j||JSON.stringify(j.players)!==JSON.stringify(d);if(I||B||re){const V=Date.now();(j?V-j.timestamp:1/0)>100?(it.current={players:d,turnIdx:y,round:f,timestamp:V},I&&console.log("[App] lastLocalStateRef atualizado via useEffect - turnIdx mudou:",j==null?void 0:j.turnIdx,"->",y)):it.current={...it.current,players:d,turnIdx:y,round:f}}},[d,y,f]),k.useEffect(()=>{var de;if(!(Y!=null&&Y.enabled)||!(Y!=null&&Y.ready)||!be)return;if(typeof At=="number"){if(At<=Vr.current)return;Vr.current=At}const j=typeof be.stateVersion=="number"?be.stateVersion:0,I=typeof be.updatedAt=="number"?be.updatedAt:0,B=Date.now(),re=it.current;if(j>0&&j<Me.current){console.log("[NET]  REJEITADO - stateVersion remoto menor que aceito:",{remote:j,accepted:Me.current});return}if(re&&re.timestamp&&I>0){const P=re.timestamp-I;if(P>0&&P<5e3){console.log("[NET]  REJEITADO - estado remoto mais antigo que mudana local recente:",{remoteUpdatedAt:new Date(I).toISOString(),localTimestamp:new Date(re.timestamp).toISOString(),timeDiff:P+"ms"});return}}if(re&&re.timestamp){const P=B-re.timestamp;if(P<5e3&&j<=re.version){console.log("[NET]  REJEITADO - mudana local recente e verso remota no  maior:",{timeSinceLocalChange:P+"ms",localVersion:re.version,remoteVersion:j});return}}const V=Array.isArray(be.players)?be.players:null,_e=Number.isInteger(be.turnIdx)?be.turnIdx:null,W=Number.isInteger(be.round)?be.round:null;if(V){const P=c(V);j>((re==null?void 0:re.version)||0)||!re||B-(re.timestamp||0)>=3e3?(h(P),ze.current=JSON.parse(JSON.stringify(P))):console.log("[NET]  IGNORANDO players remoto - mudana local muito recente")}if(_e!==null&&b(_e),W!==null){const P=W===1&&(_e===0||_e===null)&&Array.isArray(V)&&V.length>0&&V.every(Q=>Number((Q==null?void 0:Q.pos)??0)===0)&&(be.gameOver===!1||be.gameOver==null);x(Q=>P?1:Math.max(Q,W))}if(be.roundFlags!==void 0){if(Array.isArray(be.roundFlags))p(be.roundFlags),console.log("[NET] applied remote includes roundFlags?",!0,"length:",be.roundFlags.length);else if(typeof be.roundFlags=="object"){const P=Object.values(be.roundFlags);p(P),console.log("[NET] applied remote includes roundFlags?",!0,"converted from object, length:",P.length)}}typeof be.turnLock=="boolean"&&(O(be.turnLock),be.turnLock&&!We.current?We.current=Date.now():be.turnLock||(We.current=null),be.turnLock&&be.lockOwner&&console.log("[LOCK] bloqueado: turnLockBroadcast=true lockOwner=",be.lockOwner,"myId=",i)),be.lockOwner!==void 0&&(ne(be.lockOwner),it.current&&(it.current.lockOwner=be.lockOwner),console.log("[NET] applied remote includes lockOwner?",!0,"value:",be.lockOwner)),gt.current=Date.now(),g(P=>P||!!be.gameOver),E(P=>(m||be.gameOver)&&P&&!be.winner?P:be.winner??P),be.gameOver===!0&&console.log(`[App] [ENDGAME] estado remoto aplicado: gameOver=true winner=${((de=be.winner)==null?void 0:de.name)??be.winner??"N/A"}`),j>0&&(Me.current=Math.max(Me.current,j)),console.log("[NET] applied remote v=%d stateVersion=%d updatedAt=%s",At,j,I>0?new Date(I).toISOString():"N/A")},[At,be,Y==null?void 0:Y.enabled,Y==null?void 0:Y.ready]),k.useEffect(()=>{if(!A){We.current=null;return}We.current||(We.current=Date.now());const j=setInterval(()=>{const I=Date.now(),B=We.current?I-We.current:0,re=d[y],V=re&&String(re.id)===String(i),_e=Tt&&V,W=$===i;B>8e3&&_e&&!W&&$!=null&&(console.warn("[LOCK-WATCHDOG] stole lock - turnLock travado por",B,"ms, liberando...",{isMyTurn:_e,lockOwner:$,myUid:i}),Gr({turnLock:!1,lockOwner:i}),Ae(!1),ne(i),We.current=null)},1e3);return()=>clearInterval(j)},[A,Tt,y,d,$,i,te]);async function Gr(j){if(typeof te=="function")try{await te(I=>{const B=I||{},re=j||{};if(re.players&&Array.isArray(re.players)){const V=ze.current||B.players||[],_e=B.players||[],W=re.players,de=new Map(V.map(ie=>[String(ie==null?void 0:ie.id),ie])),P=new Map(_e.map(ie=>[String(ie==null?void 0:ie.id),ie])),Q=new Map(W.map(ie=>[String(ie==null?void 0:ie.id),ie])),me=[],Ve=new Set([...de.keys(),...P.keys(),...Q.keys()]);for(const ie of Ve){const kt=de.get(ie),H=P.get(ie),J=Q.get(ie);kt&&J&&JSON.stringify(kt)!==JSON.stringify(J)&&J?me.push(u(J)):H?me.push(u(H)):J&&me.push(u(J))}const Ie=[],we=W.map(ie=>String(ie==null?void 0:ie.id));for(const ie of we){const kt=me.find(H=>String(H==null?void 0:H.id)===ie);kt&&Ie.push(kt)}for(const ie of me)we.includes(String(ie==null?void 0:ie.id))||Ie.push(ie);return ze.current=null,{...B,...re,players:Ie.length>0?Ie:W}}return{...B,...re}})}catch(I){console.warn("[NET] commit failed:",(I==null?void 0:I.message)||I),ze.current=null}}function Zo(j,I,B,re=m,V=w,_e={}){var zn,Fn,yr,Xn,Rn,Zn;ze.current||(ze.current=JSON.parse(JSON.stringify(d)),console.log("[App] broadcastState - baseline capturado (estado atual antes da mudana):",ze.current.length,"players")),gr.current=gr.current+1;const W=gr.current,de=_e.roundFlags!==void 0?_e.roundFlags:_,P=_e.turnLock!==void 0?_e.turnLock:A,Q=((zn=it.current)==null?void 0:zn.lockOwner)??null,me=_e.lockOwner!==void 0?_e.lockOwner:Q,Ve=_e.gameOver!==void 0?_e.gameOver:re,we=!!m||!!((Fn=it.current)!=null&&Fn.gameOver)?!0:!!Ve,ie=_e.winner!==void 0?_e.winner:V,kt=w??((yr=it.current)==null?void 0:yr.winner)??null,H=we?ie??kt:ie,J=_e.round!==void 0?_e.round:B,ot=Math.max(Number(J||1),Number(f||1),Number(((Xn=it.current)==null?void 0:Xn.round)||1));ze.current||(ze.current=JSON.parse(JSON.stringify(d)),console.log("[App] broadcastState - baseline capturado (fallback):",ze.current.length,"players"));const It=c(j),Wt=Date.now();it.current={players:It,turnIdx:I,round:ot,gameOver:we,winner:H,lockOwner:me,timestamp:Wt,version:W,stateVersion:W,updatedAt:Wt,updatedBy:i},Me.current=W,console.log("[App] broadcastState - verso:",W,"turnIdx:",I,"round(next):",B,"round(safe):",ot,"timestamp:",Wt,"updatedBy:",i,"playersOrdered:",It.map(vr=>vr.id).join(",")),Object.keys(_e).length>0&&console.log("[NET] commit patch keys:",Object.keys(_e).join(", ")),Gr({players:It,turnIdx:I,round:ot,roundFlags:de,turnLock:P,lockOwner:me,gameOver:we,winner:H,stateVersion:W,updatedAt:Wt,updatedBy:i});try{(Zn=(Rn=oe.current)==null?void 0:Rn.postMessage)==null||Zn.call(Rn,{type:"SYNC",version:W,players:It,turnIdx:I,round:ot,roundFlags:de,turnLock:P,lockOwner:me,gameOver:we,winner:H,source:o,timestamp:Wt})}catch(vr){console.warn("[App] broadcastState failed:",vr)}}function Ba(j){var B,re;const I=c(j);Gr({players:I,turnIdx:0,round:1});try{(re=(B=oe.current)==null?void 0:B.postMessage)==null||re.call(B,{type:"START",players:j,source:o})}catch(V){console.warn("[App] broadcastStart failed:",V)}}const yt=d[y];k.useEffect(()=>{t==="game"&&Wx(d,y,f,m,w,"Game State Update")},[d,y,f,m,w,t]),k.useEffect(()=>{const j=d.find(z);if(!j)return;const{cap:I,inAtt:B}=pa(j);N(re=>({...re,cash:j.cash,possibAt:I,clientsAt:B,name:j.name,color:j.color}))},[d,z]);const q=k.useMemo(()=>{const j=d.find(z)||d[0]||{},I=Ia(j),B=Ma(j),{cap:re,inAtt:V}=pa(j),_e=String(j.erpLevel||"D").toUpperCase(),W=Number(j.gestores??j.gestoresComerciais??j.managers??0);return console.log("[App] Totals recalculado - me:",j.name,"clients:",j.clients,"faturamento:",I,"manutencao:",B,"vendedoresComuns:",j.vendedoresComuns,"fieldSales:",j.fieldSales,"insideSales:",j.insideSales),Vx(j,"HUD Totals"),{faturamento:I,manutencao:B,emprestimos:j.loanPending&&!j.loanPending.charged?Number(j.loanPending.amount||0):0,vendedoresComuns:j.vendedoresComuns||0,fieldSales:j.fieldSales||0,insideSales:j.insideSales||0,mixProdutos:j.mixProdutos||"D",bens:j.bens??0,erpSistemas:_e,clientes:j.clients||0,onboarding:!!j.onboarding,az:j.az||0,am:j.am||0,rox:j.rox||0,gestores:W,gestoresComerciais:W,possibAt:re,clientsAt:V}},[d,z]),[Fe,ge]=k.useState(!1),{onAction:he,modalLocks:$t}=nb({players:d,setPlayers:h,round:f,setRound:x,turnIdx:y,setTurnIdx:b,roundFlags:_,setRoundFlags:p,isMyTurn:Tt,isMine:z,myUid:i,meId:o,myCash:ae,current:yt,broadcastState:Zo,appendLog:v,turnLock:A,setTurnLockBroadcast:Ae,gameOver:m,setGameOver:g,winner:w,setWinner:E,setShowBankruptOverlay:ge});if(t==="start")return a.jsx(ux,{onEnter:j=>{const I=lo(j||"Jogador");h([u({id:o,name:I,cash:18e3,pos:0,color:"#ffd54f",bens:4e3})]),x(1),b(0),g(!1),E(null),p(new Array(1).fill(!1)),e("lobbies"),N(B=>({...B,name:I})),T([`Bem-vindo, ${I}!`])}});if(t==="lobbies")return a.jsx(bx,{onEnterRoom:j=>{var I;r(j),(I=window.__setRoomCode)==null||I.call(window,j);try{localStorage.setItem("sg:lastRoomName",String(j));const B=new URL(window.location.href);B.searchParams.set("room",String(j)),history.replaceState(null,"",B.toString())}catch{}e("playersLobby")}});if(t==="playersLobby")return a.jsx(wx,{lobbyId:n,onBack:()=>{var j;(j=window.__setRoomCode)==null||j.call(window,null),e("lobbies")},onStartGame:j=>{var W;const I=(j==null?void 0:j.lobbyName)||((W=j==null?void 0:j.lobby)==null?void 0:W.name)||(j==null?void 0:j.name)||n||"sala-demo";try{localStorage.setItem("sg:lastRoomName",String(I));const de=new URL(window.location.href);if(de.searchParams.set("room",String(I)),history.replaceState(null,"",de.toString()),!sessionStorage.getItem("sg:room-reloaded")){sessionStorage.setItem("sg:room-reloaded","1"),location.reload();return}}catch{}const V=[...Array.isArray(j)?j:(j==null?void 0:j.players)??(j==null?void 0:j.lobbyPlayers)??[]].sort((de,P)=>{const Q=de.created_at||de.joined_at||de.createdAt||de.joinedAt,me=P.created_at||P.joined_at||P.createdAt||P.joinedAt;if(Q&&me)return new Date(Q)-new Date(me);const Ve=String(de.id??de.player_id??""),Ie=String(P.id??P.player_id??"");return Ve.localeCompare(Ie)}).map((de,P)=>u({id:String(de.id??de.player_id),name:de.name??de.player_name,cash:18e3,pos:0,bens:4e3,color:["#ffd54f","#90caf9","#a5d6a7","#ffab91"][P%4],seat:P}));if(V.length===0)return;const _e=c(V);try{const de=_e.find(P=>String(P.name||"").trim().toLowerCase()===String(s||"").trim().toLowerCase());de!=null&&de.id&&l(String(de.id))}catch{}h(_e),b(0),x(1),p(new Array(_e.length).fill(!1)),g(!1),E(null),N(de=>{var Q,me;const P=_e.find(z);return{...de,name:(P==null?void 0:P.name)||((Q=_e[0])==null?void 0:Q.name)||"Jogador",color:(P==null?void 0:P.color)||((me=_e[0])==null?void 0:me.color)||"#6c5ce7",cash:(P==null?void 0:P.cash)??18e3,possibAt:0,clientsAt:0}}),T(["Jogo iniciado!"]),Ba(_e),e("game")}});const at=d[y],jn=(at==null?void 0:at.bankrupt)===!0,ht=at&&String(at.id)===String(i),gn=f===5&&((De=d[y])==null?void 0:De.waitingAtRevenue),Cn=$==null||$===i,F=Tt&&ht&&$t===0&&!A&&Cn&&!jn&&!m&&!gn;return console.log("[App] controlsCanRoll - isMyTurn:",Tt,"isCurrentPlayerMe:",ht,"modalLocks:",$t,"turnLock:",A,"lockOwner:",$,"lockOwnerOk:",Cn,"isBankrupt:",jn,"gameOver:",m,"isWaitingRevenue:",gn,"result:",F),a.jsxs("div",{className:"page",children:[a.jsxs("header",{className:"topbar",children:[a.jsxs("div",{className:"status",style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[a.jsx("span",{style:{width:18,height:18,borderRadius:"50%",border:"2px solid rgba(255,255,255,.9)",boxShadow:"0 0 0 2px rgba(0,0,0,.25)",background:D.color}}),a.jsxs("span",{style:{background:"#1f2430",border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:"4px 10px",fontWeight:800},children:[" ",D.name]}),a.jsxs("span",{children:["Possib. Atendimento: ",a.jsx("b",{children:D.possibAt??0})]}),a.jsxs("span",{children:["Clientes em Atendimento: ",a.jsx("b",{children:D.clientsAt??0})]}),a.jsx(qx,{players:d,turnIdx:y,round:f,gameOver:m,winner:w})]}),a.jsxs("div",{className:"status",style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[a.jsxs("span",{children:["Rodada: ",f]}),a.jsxs("span",{className:"money",children:[" $ ",Number(ae).toLocaleString()]})]})]}),a.jsxs("main",{className:"content",children:[a.jsx("div",{className:"boardWrap",children:a.jsx(Nx,{players:d,turnIdx:y,onMeHud:N})}),a.jsxs("aside",{className:"side",children:[a.jsx(Dx,{totals:q,players:d}),a.jsxs("div",{className:"controlsSticky",children:[a.jsx(Ax,{onAction:j=>{he(j)},current:yt,isMyTurn:F}),a.jsx("div",{style:{marginTop:10},children:a.jsx("button",{className:"btn dark",onClick:async()=>{var j;if(n&&i)try{await wl({roomCode:n,playerId:i})}catch(I){console.warn("[App] Erro ao sair da sala:",I)}(j=window.__setRoomCode)==null||j.call(window,null),e("lobbies")},children:"Sair para Lobbies"})})]}),m&&a.jsx(Tx,{players:d,onExit:async()=>{var j;if(n&&i)try{await wl({roomCode:n,playerId:i})}catch(I){console.warn("[App] Erro ao sair da sala:",I)}(j=window.__setRoomCode)==null||j.call(window,null),e("lobbies")},onRestart:()=>{const j=d.map(I=>u({...I,cash:18e3,bens:4e3,pos:0}));h(j),b(0),x(1),p(new Array(j.length).fill(!1)),T(["Novo jogo iniciado!"]),g(!1),E(null)}})]})]}),a.jsx("footer",{className:"foot",children:a.jsxs("small",{children:["Desenvolvido por ",a.jsx("a",{href:"https://www.tironitech.com",target:"_blank",rel:"noreferrer",children:"tironitech.com"})]})}),Fe&&a.jsx(Lx,{})]})}function ib(){const e=new URLSearchParams(window.location.search).get("room");return e&&String(e).trim()||null}function ab(){const[t,e]=fe.useState(ib());return fe.useEffect(()=>(window.__setRoomCode=n=>{const r=String(n||"").trim()||null;e(r);const o=new URL(window.location.href);r?o.searchParams.set("room",r):o.searchParams.delete("room"),window.history.replaceState({},"",o)},()=>{delete window.__setRoomCode}),[]),fe.useEffect(()=>(window.exportLogs=()=>{const n=cm(),r=new Blob([n.text],{type:"text/plain;charset=utf-8"}),o=URL.createObjectURL(r),s=document.createElement("a");return s.href=o,s.download=`debug-logs-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`,s.click(),URL.revokeObjectURL(o),console.log(" Logs exportados! Arquivo .txt baixado."),n},window.getLogsText=()=>Ux(),window.getLogsJSON=()=>zx(),window.getLogStats=()=>Lu(),window.toggleLogCapture=()=>(Jn.enabled?(Jn.disable(),console.log(" Captura de logs DESATIVADA")):(Jn.enable(),console.log(" Captura de logs ATIVADA")),Jn.enabled),console.log("%c FUNES DE EXPORT DE LOGS DISPONVEIS:","color: #4CAF50; font-weight: bold; font-size: 14px"),console.log("%cexportLogs()","color: #2196F3; font-weight: bold","- Exporta logs completos (baixa arquivo .txt)"),console.log("%cgetLogsText()","color: #2196F3; font-weight: bold","- Retorna logs como string de texto"),console.log("%cgetLogsJSON()","color: #2196F3; font-weight: bold","- Retorna logs como objeto JSON"),console.log("%cgetLogStats()","color: #2196F3; font-weight: bold","- Retorna estatsticas dos logs"),console.log("%ctoggleLogCapture()","color: #2196F3; font-weight: bold","- Ativa/desativa captura de logs"),()=>{delete window.exportLogs,delete window.getLogsText,delete window.getLogsJSON,delete window.getLogStats,delete window.toggleLogCapture}),[]),a.jsx(Ox,{children:a.jsx(ob,{roomCode:t,children:a.jsx(sb,{})})})}jl.createRoot(document.getElementById("root")).render(a.jsx(fe.StrictMode,{children:a.jsx(ab,{})}));
//# sourceMappingURL=index-BObrR4qc.js.map
