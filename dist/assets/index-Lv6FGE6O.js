(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var jn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function dm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var Sf={exports:{}},pa={},_f={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hs=Symbol.for("react.element"),fm=Symbol.for("react.portal"),hm=Symbol.for("react.fragment"),pm=Symbol.for("react.strict_mode"),mm=Symbol.for("react.profiler"),gm=Symbol.for("react.provider"),ym=Symbol.for("react.context"),vm=Symbol.for("react.forward_ref"),xm=Symbol.for("react.suspense"),bm=Symbol.for("react.memo"),wm=Symbol.for("react.lazy"),Oc=Symbol.iterator;function Sm(t){return t===null||typeof t!="object"?null:(t=Oc&&t[Oc]||t["@@iterator"],typeof t=="function"?t:null)}var kf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ef=Object.assign,jf={};function Ho(t,e,n){this.props=t,this.context=e,this.refs=jf,this.updater=n||kf}Ho.prototype.isReactComponent={};Ho.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ho.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cf(){}Cf.prototype=Ho.prototype;function Ou(t,e,n){this.props=t,this.context=e,this.refs=jf,this.updater=n||kf}var Lu=Ou.prototype=new Cf;Lu.constructor=Ou;Ef(Lu,Ho.prototype);Lu.isPureReactComponent=!0;var Lc=Array.isArray,Rf=Object.prototype.hasOwnProperty,Pu={current:null},Nf={key:!0,ref:!0,__self:!0,__source:!0};function Df(t,e,n){var r,o={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)Rf.call(e,r)&&!Nf.hasOwnProperty(r)&&(o[r]=e[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:Hs,type:t,key:s,ref:i,props:o,_owner:Pu.current}}function _m(t,e){return{$$typeof:Hs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $u(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hs}function km(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pc=/\/+/g;function Ba(t,e){return typeof t=="object"&&t!==null&&t.key!=null?km(""+t.key):e.toString(36)}function Ni(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Hs:case fm:i=!0}}if(i)return i=t,o=o(i),t=r===""?"."+Ba(i,0):r,Lc(o)?(n="",t!=null&&(n=t.replace(Pc,"$&/")+"/"),Ni(o,e,n,"",function(c){return c})):o!=null&&($u(o)&&(o=_m(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(Pc,"$&/")+"/")+t)),e.push(o)),1;if(i=0,r=r===""?".":r+":",Lc(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Ba(s,l);i+=Ni(s,e,n,u,o)}else if(u=Sm(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Ba(s,l++),i+=Ni(s,e,n,u,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function ri(t,e,n){if(t==null)return t;var r=[],o=0;return Ni(t,r,"","",function(s){return e.call(n,s,o++)}),r}function Em(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kt={current:null},Di={transition:null},jm={ReactCurrentDispatcher:Kt,ReactCurrentBatchConfig:Di,ReactCurrentOwner:Pu};function Af(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:ri,forEach:function(t,e,n){ri(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ri(t,function(){e++}),e},toArray:function(t){return ri(t,function(e){return e})||[]},only:function(t){if(!$u(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};De.Component=Ho;De.Fragment=hm;De.Profiler=mm;De.PureComponent=Ou;De.StrictMode=pm;De.Suspense=xm;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jm;De.act=Af;De.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ef({},t.props),o=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=Pu.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Rf.call(e,u)&&!Nf.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Hs,type:t.type,key:o,ref:s,props:r,_owner:i}};De.createContext=function(t){return t={$$typeof:ym,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gm,_context:t},t.Consumer=t};De.createElement=Df;De.createFactory=function(t){var e=Df.bind(null,t);return e.type=t,e};De.createRef=function(){return{current:null}};De.forwardRef=function(t){return{$$typeof:vm,render:t}};De.isValidElement=$u;De.lazy=function(t){return{$$typeof:wm,_payload:{_status:-1,_result:t},_init:Em}};De.memo=function(t,e){return{$$typeof:bm,type:t,compare:e===void 0?null:e}};De.startTransition=function(t){var e=Di.transition;Di.transition={};try{t()}finally{Di.transition=e}};De.unstable_act=Af;De.useCallback=function(t,e){return Kt.current.useCallback(t,e)};De.useContext=function(t){return Kt.current.useContext(t)};De.useDebugValue=function(){};De.useDeferredValue=function(t){return Kt.current.useDeferredValue(t)};De.useEffect=function(t,e){return Kt.current.useEffect(t,e)};De.useId=function(){return Kt.current.useId()};De.useImperativeHandle=function(t,e,n){return Kt.current.useImperativeHandle(t,e,n)};De.useInsertionEffect=function(t,e){return Kt.current.useInsertionEffect(t,e)};De.useLayoutEffect=function(t,e){return Kt.current.useLayoutEffect(t,e)};De.useMemo=function(t,e){return Kt.current.useMemo(t,e)};De.useReducer=function(t,e,n){return Kt.current.useReducer(t,e,n)};De.useRef=function(t){return Kt.current.useRef(t)};De.useState=function(t){return Kt.current.useState(t)};De.useSyncExternalStore=function(t,e,n){return Kt.current.useSyncExternalStore(t,e,n)};De.useTransition=function(){return Kt.current.useTransition()};De.version="18.3.1";_f.exports=De;var k=_f.exports;const he=cm(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm=k,Rm=Symbol.for("react.element"),Nm=Symbol.for("react.fragment"),Dm=Object.prototype.hasOwnProperty,Am=Cm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tm={key:!0,ref:!0,__self:!0,__source:!0};function Tf(t,e,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)Dm.call(e,r)&&!Tm.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:Rm,type:t,key:s,ref:i,props:o,_owner:Am.current}}pa.Fragment=Nm;pa.jsx=Tf;pa.jsxs=Tf;Sf.exports=pa;var a=Sf.exports,kl={},Of={exports:{}},gn={},Lf={exports:{}},Pf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,te){var re=G.length;G.push(te);e:for(;0<re;){var P=re-1>>>1,$e=G[P];if(0<o($e,te))G[P]=te,G[re]=$e,re=P;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var te=G[0],re=G.pop();if(re!==te){G[0]=re;e:for(var P=0,$e=G.length,cn=$e>>>1;P<cn;){var ce=2*(P+1)-1,Yt=G[ce],Xe=ce+1,Oe=G[Xe];if(0>o(Yt,re))Xe<$e&&0>o(Oe,Yt)?(G[P]=Oe,G[Xe]=re,P=Xe):(G[P]=Yt,G[ce]=re,P=ce);else if(Xe<$e&&0>o(Oe,re))G[P]=Oe,G[Xe]=re,P=Xe;else break e}}return te}function o(G,te){var re=G.sortIndex-te.sortIndex;return re!==0?re:G.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var u=[],c=[],d=1,h=null,f=3,g=!1,x=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(G){for(var te=n(c);te!==null;){if(te.callback===null)r(c);else if(te.startTime<=G)r(c),te.sortIndex=te.expirationTime,e(u,te);else break;te=n(c)}}function w(G){if(b=!1,y(G),!x)if(n(u)!==null)x=!0,He(E);else{var te=n(c);te!==null&&tt(w,te.startTime-G)}}function E(G,te){x=!1,b&&(b=!1,p(S),S=-1),g=!0;var re=f;try{for(y(te),h=n(u);h!==null&&(!(h.expirationTime>te)||G&&!A());){var P=h.callback;if(typeof P=="function"){h.callback=null,f=h.priorityLevel;var $e=P(h.expirationTime<=te);te=t.unstable_now(),typeof $e=="function"?h.callback=$e:h===n(u)&&r(u),y(te)}else r(u);h=n(u)}if(h!==null)var cn=!0;else{var ce=n(c);ce!==null&&tt(w,ce.startTime-te),cn=!1}return cn}finally{h=null,f=re,g=!1}}var R=!1,D=null,S=-1,T=5,v=-1;function A(){return!(t.unstable_now()-v<T)}function O(){if(D!==null){var G=t.unstable_now();v=G;var te=!0;try{te=D(!0,G)}finally{te?I():(R=!1,D=null)}}else R=!1}var I;if(typeof m=="function")I=function(){m(O)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Ee=F.port2;F.port1.onmessage=O,I=function(){Ee.postMessage(null)}}else I=function(){_(O,0)};function He(G){D=G,R||(R=!0,I())}function tt(G,te){S=_(function(){G(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,He(E))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(f){case 1:case 2:case 3:var te=3;break;default:te=f}var re=f;f=te;try{return G()}finally{f=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,te){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var re=f;f=G;try{return te()}finally{f=re}},t.unstable_scheduleCallback=function(G,te,re){var P=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?P+re:P):re=P,G){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=re+$e,G={id:d++,callback:te,priorityLevel:G,startTime:re,expirationTime:$e,sortIndex:-1},re>P?(G.sortIndex=re,e(c,G),n(u)===null&&G===n(c)&&(b?(p(S),S=-1):b=!0,tt(w,re-P))):(G.sortIndex=$e,e(u,G),x||g||(x=!0,He(E))),G},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(G){var te=f;return function(){var re=f;f=te;try{return G.apply(this,arguments)}finally{f=re}}}})(Pf);Lf.exports=Pf;var Om=Lf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm=k,mn=Om;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $f=new Set,Rs={};function uo(t,e){Bo(t,e),Bo(t+"Capture",e)}function Bo(t,e){for(Rs[t]=e,t=0;t<e.length;t++)$f.add(e[t])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),El=Object.prototype.hasOwnProperty,Pm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$c={},Ic={};function $m(t){return El.call(Ic,t)?!0:El.call($c,t)?!1:Pm.test(t)?Ic[t]=!0:($c[t]=!0,!1)}function Im(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Mm(t,e,n,r){if(e===null||typeof e>"u"||Im(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jt(t,e,n,r,o,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lt[t]=new Jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lt[e]=new Jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lt[t]=new Jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lt[t]=new Jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lt[t]=new Jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lt[t]=new Jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lt[t]=new Jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lt[t]=new Jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lt[t]=new Jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Iu=/[\-:]([a-z])/g;function Mu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Iu,Mu);Lt[e]=new Jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Iu,Mu);Lt[e]=new Jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Iu,Mu);Lt[e]=new Jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lt[t]=new Jt(t,1,!1,t.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new Jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lt[t]=new Jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bu(t,e,n,r){var o=Lt.hasOwnProperty(e)?Lt[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Mm(e,n,o,r)&&(n=null),r||o===null?$m(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var yr=Lm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oi=Symbol.for("react.element"),wo=Symbol.for("react.portal"),So=Symbol.for("react.fragment"),Uu=Symbol.for("react.strict_mode"),jl=Symbol.for("react.profiler"),If=Symbol.for("react.provider"),Mf=Symbol.for("react.context"),Fu=Symbol.for("react.forward_ref"),Cl=Symbol.for("react.suspense"),Rl=Symbol.for("react.suspense_list"),zu=Symbol.for("react.memo"),_r=Symbol.for("react.lazy"),Bf=Symbol.for("react.offscreen"),Mc=Symbol.iterator;function Zo(t){return t===null||typeof t!="object"?null:(t=Mc&&t[Mc]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,Ua;function us(t){if(Ua===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ua=e&&e[1]||""}return`
`+Ua+t}var Fa=!1;function za(t,e){if(!t||Fa)return"";Fa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,l=s.length-1;1<=i&&0<=l&&o[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==s[l]){var u=`
`+o[i].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=i&&0<=l);break}}}finally{Fa=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?us(t):""}function Bm(t){switch(t.tag){case 5:return us(t.type);case 16:return us("Lazy");case 13:return us("Suspense");case 19:return us("SuspenseList");case 0:case 2:case 15:return t=za(t.type,!1),t;case 11:return t=za(t.type.render,!1),t;case 1:return t=za(t.type,!0),t;default:return""}}function Nl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case So:return"Fragment";case wo:return"Portal";case jl:return"Profiler";case Uu:return"StrictMode";case Cl:return"Suspense";case Rl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Mf:return(t.displayName||"Context")+".Consumer";case If:return(t._context.displayName||"Context")+".Provider";case Fu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zu:return e=t.displayName||null,e!==null?e:Nl(t.type)||"Memo";case _r:e=t._payload,t=t._init;try{return Nl(t(e))}catch{}}return null}function Um(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nl(e);case 8:return e===Uu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Uf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Fm(t){var e=Uf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function si(t){t._valueTracker||(t._valueTracker=Fm(t))}function Ff(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Uf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dl(t,e){var n=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Mr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zf(t,e){e=e.checked,e!=null&&Bu(t,"checked",e,!1)}function Al(t,e){zf(t,e);var n=Mr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Tl(t,e.type,Mr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Uc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Tl(t,e,n){(e!=="number"||Fi(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var cs=Array.isArray;function Oo(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Mr(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Ol(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(cs(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Mr(n)}}function Wf(t,e){var n=Mr(e.value),r=Mr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ll(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ii,Gf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ii=ii||document.createElement("div"),ii.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ii.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ns(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zm=["Webkit","ms","Moz","O"];Object.keys(ps).forEach(function(t){zm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ps[e]=ps[t]})});function qf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ps.hasOwnProperty(t)&&ps[t]?(""+e).trim():e+"px"}function Hf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=qf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var Wm=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pl(t,e){if(e){if(Wm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function $l(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Il=null;function Wu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ml=null,Lo=null,Po=null;function Wc(t){if(t=Ys(t)){if(typeof Ml!="function")throw Error(B(280));var e=t.stateNode;e&&(e=xa(e),Ml(t.stateNode,t.type,e))}}function Kf(t){Lo?Po?Po.push(t):Po=[t]:Lo=t}function Jf(){if(Lo){var t=Lo,e=Po;if(Po=Lo=null,Wc(t),e)for(t=0;t<e.length;t++)Wc(e[t])}}function Yf(t,e){return t(e)}function Qf(){}var Wa=!1;function Xf(t,e,n){if(Wa)return t(e,n);Wa=!0;try{return Yf(t,e,n)}finally{Wa=!1,(Lo!==null||Po!==null)&&(Qf(),Jf())}}function Ds(t,e){var n=t.stateNode;if(n===null)return null;var r=xa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Bl=!1;if(fr)try{var es={};Object.defineProperty(es,"passive",{get:function(){Bl=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{Bl=!1}function Vm(t,e,n,r,o,s,i,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ms=!1,zi=null,Wi=!1,Ul=null,Gm={onError:function(t){ms=!0,zi=t}};function qm(t,e,n,r,o,s,i,l,u){ms=!1,zi=null,Vm.apply(Gm,arguments)}function Hm(t,e,n,r,o,s,i,l,u){if(qm.apply(this,arguments),ms){if(ms){var c=zi;ms=!1,zi=null}else throw Error(B(198));Wi||(Wi=!0,Ul=c)}}function co(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Zf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vc(t){if(co(t)!==t)throw Error(B(188))}function Km(t){var e=t.alternate;if(!e){if(e=co(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return Vc(o),t;if(s===r)return Vc(o),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function eh(t){return t=Km(t),t!==null?th(t):null}function th(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=th(t);if(e!==null)return e;t=t.sibling}return null}var nh=mn.unstable_scheduleCallback,Gc=mn.unstable_cancelCallback,Jm=mn.unstable_shouldYield,Ym=mn.unstable_requestPaint,pt=mn.unstable_now,Qm=mn.unstable_getCurrentPriorityLevel,Vu=mn.unstable_ImmediatePriority,rh=mn.unstable_UserBlockingPriority,Vi=mn.unstable_NormalPriority,Xm=mn.unstable_LowPriority,oh=mn.unstable_IdlePriority,ma=null,Qn=null;function Zm(t){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(ma,t,void 0,(t.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:ng,eg=Math.log,tg=Math.LN2;function ng(t){return t>>>=0,t===0?32:31-(eg(t)/tg|0)|0}var ai=64,li=4194304;function ds(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gi(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var l=i&~o;l!==0?r=ds(l):(s&=i,s!==0&&(r=ds(s)))}else i=n&~o,i!==0?r=ds(i):s!==0&&(r=ds(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Un(e),o=1<<n,r|=t[n],e&=~o;return r}function rg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function og(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Un(s),l=1<<i,u=o[i];u===-1?(!(l&n)||l&r)&&(o[i]=rg(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Fl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sh(){var t=ai;return ai<<=1,!(ai&4194240)&&(ai=64),t}function Va(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ks(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Un(e),t[e]=n}function sg(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Un(n),s=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~s}}function Gu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Un(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var qe=0;function ih(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ah,qu,lh,uh,ch,zl=!1,ui=[],Dr=null,Ar=null,Tr=null,As=new Map,Ts=new Map,Er=[],ig="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qc(t,e){switch(t){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":As.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ts.delete(e.pointerId)}}function ts(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},e!==null&&(e=Ys(e),e!==null&&qu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function ag(t,e,n,r,o){switch(e){case"focusin":return Dr=ts(Dr,t,e,n,r,o),!0;case"dragenter":return Ar=ts(Ar,t,e,n,r,o),!0;case"mouseover":return Tr=ts(Tr,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return As.set(s,ts(As.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Ts.set(s,ts(Ts.get(s)||null,t,e,n,r,o)),!0}return!1}function dh(t){var e=Qr(t.target);if(e!==null){var n=co(e);if(n!==null){if(e=n.tag,e===13){if(e=Zf(n),e!==null){t.blockedOn=e,ch(t.priority,function(){lh(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ai(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Il=r,n.target.dispatchEvent(r),Il=null}else return e=Ys(n),e!==null&&qu(e),t.blockedOn=n,!1;e.shift()}return!0}function Hc(t,e,n){Ai(t)&&n.delete(e)}function lg(){zl=!1,Dr!==null&&Ai(Dr)&&(Dr=null),Ar!==null&&Ai(Ar)&&(Ar=null),Tr!==null&&Ai(Tr)&&(Tr=null),As.forEach(Hc),Ts.forEach(Hc)}function ns(t,e){t.blockedOn===e&&(t.blockedOn=null,zl||(zl=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,lg)))}function Os(t){function e(o){return ns(o,t)}if(0<ui.length){ns(ui[0],t);for(var n=1;n<ui.length;n++){var r=ui[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dr!==null&&ns(Dr,t),Ar!==null&&ns(Ar,t),Tr!==null&&ns(Tr,t),As.forEach(e),Ts.forEach(e),n=0;n<Er.length;n++)r=Er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Er.length&&(n=Er[0],n.blockedOn===null);)dh(n),n.blockedOn===null&&Er.shift()}var $o=yr.ReactCurrentBatchConfig,qi=!0;function ug(t,e,n,r){var o=qe,s=$o.transition;$o.transition=null;try{qe=1,Hu(t,e,n,r)}finally{qe=o,$o.transition=s}}function cg(t,e,n,r){var o=qe,s=$o.transition;$o.transition=null;try{qe=4,Hu(t,e,n,r)}finally{qe=o,$o.transition=s}}function Hu(t,e,n,r){if(qi){var o=Wl(t,e,n,r);if(o===null)el(t,e,r,Hi,n),qc(t,r);else if(ag(o,t,e,n,r))r.stopPropagation();else if(qc(t,r),e&4&&-1<ig.indexOf(t)){for(;o!==null;){var s=Ys(o);if(s!==null&&ah(s),s=Wl(t,e,n,r),s===null&&el(t,e,r,Hi,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else el(t,e,r,null,n)}}var Hi=null;function Wl(t,e,n,r){if(Hi=null,t=Wu(r),t=Qr(t),t!==null)if(e=co(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Zf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hi=t,null}function fh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qm()){case Vu:return 1;case rh:return 4;case Vi:case Xm:return 16;case oh:return 536870912;default:return 16}default:return 16}}var Rr=null,Ku=null,Ti=null;function hh(){if(Ti)return Ti;var t,e=Ku,n=e.length,r,o="value"in Rr?Rr.value:Rr.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return Ti=o.slice(t,1<r?1-r:void 0)}function Oi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ci(){return!0}function Kc(){return!1}function yn(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ci:Kc,this.isPropagationStopped=Kc,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ci)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ci)},persist:function(){},isPersistent:ci}),e}var Ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ju=yn(Ko),Js=ut({},Ko,{view:0,detail:0}),dg=yn(Js),Ga,qa,rs,ga=ut({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rs&&(rs&&t.type==="mousemove"?(Ga=t.screenX-rs.screenX,qa=t.screenY-rs.screenY):qa=Ga=0,rs=t),Ga)},movementY:function(t){return"movementY"in t?t.movementY:qa}}),Jc=yn(ga),fg=ut({},ga,{dataTransfer:0}),hg=yn(fg),pg=ut({},Js,{relatedTarget:0}),Ha=yn(pg),mg=ut({},Ko,{animationName:0,elapsedTime:0,pseudoElement:0}),gg=yn(mg),yg=ut({},Ko,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vg=yn(yg),xg=ut({},Ko,{data:0}),Yc=yn(xg),bg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _g(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sg[t])?!!e[t]:!1}function Yu(){return _g}var kg=ut({},Js,{key:function(t){if(t.key){var e=bg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Oi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yu,charCode:function(t){return t.type==="keypress"?Oi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Eg=yn(kg),jg=ut({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qc=yn(jg),Cg=ut({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yu}),Rg=yn(Cg),Ng=ut({},Ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dg=yn(Ng),Ag=ut({},ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Tg=yn(Ag),Og=[9,13,27,32],Qu=fr&&"CompositionEvent"in window,gs=null;fr&&"documentMode"in document&&(gs=document.documentMode);var Lg=fr&&"TextEvent"in window&&!gs,ph=fr&&(!Qu||gs&&8<gs&&11>=gs),Xc=" ",Zc=!1;function mh(t,e){switch(t){case"keyup":return Og.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _o=!1;function Pg(t,e){switch(t){case"compositionend":return gh(e);case"keypress":return e.which!==32?null:(Zc=!0,Xc);case"textInput":return t=e.data,t===Xc&&Zc?null:t;default:return null}}function $g(t,e){if(_o)return t==="compositionend"||!Qu&&mh(t,e)?(t=hh(),Ti=Ku=Rr=null,_o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ph&&e.locale!=="ko"?null:e.data;default:return null}}var Ig={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ed(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ig[t.type]:e==="textarea"}function yh(t,e,n,r){Kf(r),e=Ki(e,"onChange"),0<e.length&&(n=new Ju("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ys=null,Ls=null;function Mg(t){Rh(t,0)}function ya(t){var e=jo(t);if(Ff(e))return t}function Bg(t,e){if(t==="change")return e}var vh=!1;if(fr){var Ka;if(fr){var Ja="oninput"in document;if(!Ja){var td=document.createElement("div");td.setAttribute("oninput","return;"),Ja=typeof td.oninput=="function"}Ka=Ja}else Ka=!1;vh=Ka&&(!document.documentMode||9<document.documentMode)}function nd(){ys&&(ys.detachEvent("onpropertychange",xh),Ls=ys=null)}function xh(t){if(t.propertyName==="value"&&ya(Ls)){var e=[];yh(e,Ls,t,Wu(t)),Xf(Mg,e)}}function Ug(t,e,n){t==="focusin"?(nd(),ys=e,Ls=n,ys.attachEvent("onpropertychange",xh)):t==="focusout"&&nd()}function Fg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ya(Ls)}function zg(t,e){if(t==="click")return ya(e)}function Wg(t,e){if(t==="input"||t==="change")return ya(e)}function Vg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zn=typeof Object.is=="function"?Object.is:Vg;function Ps(t,e){if(zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!El.call(e,o)||!zn(t[o],e[o]))return!1}return!0}function rd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function od(t,e){var n=rd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rd(n)}}function bh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wh(){for(var t=window,e=Fi();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fi(t.document)}return e}function Xu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Gg(t){var e=wh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bh(n.ownerDocument.documentElement,n)){if(r!==null&&Xu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!t.extend&&s>r&&(o=r,r=s,s=o),o=od(n,s);var i=od(n,r);o&&i&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qg=fr&&"documentMode"in document&&11>=document.documentMode,ko=null,Vl=null,vs=null,Gl=!1;function sd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gl||ko==null||ko!==Fi(r)||(r=ko,"selectionStart"in r&&Xu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vs&&Ps(vs,r)||(vs=r,r=Ki(Vl,"onSelect"),0<r.length&&(e=new Ju("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ko)))}function di(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Eo={animationend:di("Animation","AnimationEnd"),animationiteration:di("Animation","AnimationIteration"),animationstart:di("Animation","AnimationStart"),transitionend:di("Transition","TransitionEnd")},Ya={},Sh={};fr&&(Sh=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function va(t){if(Ya[t])return Ya[t];if(!Eo[t])return t;var e=Eo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sh)return Ya[t]=e[n];return t}var _h=va("animationend"),kh=va("animationiteration"),Eh=va("animationstart"),jh=va("transitionend"),Ch=new Map,id="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(t,e){Ch.set(t,e),uo(e,[t])}for(var Qa=0;Qa<id.length;Qa++){var Xa=id[Qa],Hg=Xa.toLowerCase(),Kg=Xa[0].toUpperCase()+Xa.slice(1);Ur(Hg,"on"+Kg)}Ur(_h,"onAnimationEnd");Ur(kh,"onAnimationIteration");Ur(Eh,"onAnimationStart");Ur("dblclick","onDoubleClick");Ur("focusin","onFocus");Ur("focusout","onBlur");Ur(jh,"onTransitionEnd");Bo("onMouseEnter",["mouseout","mouseover"]);Bo("onMouseLeave",["mouseout","mouseover"]);Bo("onPointerEnter",["pointerout","pointerover"]);Bo("onPointerLeave",["pointerout","pointerover"]);uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jg=new Set("cancel close invalid load scroll toggle".split(" ").concat(fs));function ad(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Hm(r,e,void 0,t),t.currentTarget=null}function Rh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var l=r[i],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&o.isPropagationStopped())break e;ad(o,l,c),s=u}else for(i=0;i<r.length;i++){if(l=r[i],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&o.isPropagationStopped())break e;ad(o,l,c),s=u}}}if(Wi)throw t=Ul,Wi=!1,Ul=null,t}function rt(t,e){var n=e[Yl];n===void 0&&(n=e[Yl]=new Set);var r=t+"__bubble";n.has(r)||(Nh(e,t,2,!1),n.add(r))}function Za(t,e,n){var r=0;e&&(r|=4),Nh(n,t,r,e)}var fi="_reactListening"+Math.random().toString(36).slice(2);function $s(t){if(!t[fi]){t[fi]=!0,$f.forEach(function(n){n!=="selectionchange"&&(Jg.has(n)||Za(n,!1,t),Za(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fi]||(e[fi]=!0,Za("selectionchange",!1,e))}}function Nh(t,e,n,r){switch(fh(e)){case 1:var o=ug;break;case 4:o=cg;break;default:o=Hu}n=o.bind(null,e,n,t),o=void 0,!Bl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function el(t,e,n,r,o){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;i=i.return}for(;l!==null;){if(i=Qr(l),i===null)return;if(u=i.tag,u===5||u===6){r=s=i;continue e}l=l.parentNode}}r=r.return}Xf(function(){var c=s,d=Wu(n),h=[];e:{var f=Ch.get(t);if(f!==void 0){var g=Ju,x=t;switch(t){case"keypress":if(Oi(n)===0)break e;case"keydown":case"keyup":g=Eg;break;case"focusin":x="focus",g=Ha;break;case"focusout":x="blur",g=Ha;break;case"beforeblur":case"afterblur":g=Ha;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Jc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=hg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Rg;break;case _h:case kh:case Eh:g=gg;break;case jh:g=Dg;break;case"scroll":g=dg;break;case"wheel":g=Tg;break;case"copy":case"cut":case"paste":g=vg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Qc}var b=(e&4)!==0,_=!b&&t==="scroll",p=b?f!==null?f+"Capture":null:f;b=[];for(var m=c,y;m!==null;){y=m;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,p!==null&&(w=Ds(m,p),w!=null&&b.push(Is(m,w,y)))),_)break;m=m.return}0<b.length&&(f=new g(f,x,null,n,d),h.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Il&&(x=n.relatedTarget||n.fromElement)&&(Qr(x)||x[hr]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=c,x=x?Qr(x):null,x!==null&&(_=co(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=c),g!==x)){if(b=Jc,w="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(b=Qc,w="onPointerLeave",p="onPointerEnter",m="pointer"),_=g==null?f:jo(g),y=x==null?f:jo(x),f=new b(w,m+"leave",g,n,d),f.target=_,f.relatedTarget=y,w=null,Qr(d)===c&&(b=new b(p,m+"enter",x,n,d),b.target=y,b.relatedTarget=_,w=b),_=w,g&&x)t:{for(b=g,p=x,m=0,y=b;y;y=ho(y))m++;for(y=0,w=p;w;w=ho(w))y++;for(;0<m-y;)b=ho(b),m--;for(;0<y-m;)p=ho(p),y--;for(;m--;){if(b===p||p!==null&&b===p.alternate)break t;b=ho(b),p=ho(p)}b=null}else b=null;g!==null&&ld(h,f,g,b,!1),x!==null&&_!==null&&ld(h,_,x,b,!0)}}e:{if(f=c?jo(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var E=Bg;else if(ed(f))if(vh)E=Wg;else{E=Fg;var R=Ug}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=zg);if(E&&(E=E(t,c))){yh(h,E,n,d);break e}R&&R(t,f,c),t==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&Tl(f,"number",f.value)}switch(R=c?jo(c):window,t){case"focusin":(ed(R)||R.contentEditable==="true")&&(ko=R,Vl=c,vs=null);break;case"focusout":vs=Vl=ko=null;break;case"mousedown":Gl=!0;break;case"contextmenu":case"mouseup":case"dragend":Gl=!1,sd(h,n,d);break;case"selectionchange":if(qg)break;case"keydown":case"keyup":sd(h,n,d)}var D;if(Qu)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else _o?mh(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(ph&&n.locale!=="ko"&&(_o||S!=="onCompositionStart"?S==="onCompositionEnd"&&_o&&(D=hh()):(Rr=d,Ku="value"in Rr?Rr.value:Rr.textContent,_o=!0)),R=Ki(c,S),0<R.length&&(S=new Yc(S,t,null,n,d),h.push({event:S,listeners:R}),D?S.data=D:(D=gh(n),D!==null&&(S.data=D)))),(D=Lg?Pg(t,n):$g(t,n))&&(c=Ki(c,"onBeforeInput"),0<c.length&&(d=new Yc("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=D))}Rh(h,e)})}function Is(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ki(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Ds(t,n),s!=null&&r.unshift(Is(t,s,o)),s=Ds(t,e),s!=null&&r.push(Is(t,s,o))),t=t.return}return r}function ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ld(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,o?(u=Ds(n,s),u!=null&&i.unshift(Is(n,u,l))):o||(u=Ds(n,s),u!=null&&i.push(Is(n,u,l)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var Yg=/\r\n?/g,Qg=/\u0000|\uFFFD/g;function ud(t){return(typeof t=="string"?t:""+t).replace(Yg,`
`).replace(Qg,"")}function hi(t,e,n){if(e=ud(e),ud(t)!==e&&n)throw Error(B(425))}function Ji(){}var ql=null,Hl=null;function Kl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jl=typeof setTimeout=="function"?setTimeout:void 0,Xg=typeof clearTimeout=="function"?clearTimeout:void 0,cd=typeof Promise=="function"?Promise:void 0,Zg=typeof queueMicrotask=="function"?queueMicrotask:typeof cd<"u"?function(t){return cd.resolve(null).then(t).catch(e0)}:Jl;function e0(t){setTimeout(function(){throw t})}function tl(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),Os(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Os(e)}function Or(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jo=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Jo,Ms="__reactProps$"+Jo,hr="__reactContainer$"+Jo,Yl="__reactEvents$"+Jo,t0="__reactListeners$"+Jo,n0="__reactHandles$"+Jo;function Qr(t){var e=t[Jn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hr]||n[Jn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dd(t);t!==null;){if(n=t[Jn])return n;t=dd(t)}return e}t=n,n=t.parentNode}return null}function Ys(t){return t=t[Jn]||t[hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function xa(t){return t[Ms]||null}var Ql=[],Co=-1;function Fr(t){return{current:t}}function ot(t){0>Co||(t.current=Ql[Co],Ql[Co]=null,Co--)}function et(t,e){Co++,Ql[Co]=t.current,t.current=e}var Br={},Bt=Fr(Br),an=Fr(!1),no=Br;function Uo(t,e){var n=t.type.contextTypes;if(!n)return Br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function ln(t){return t=t.childContextTypes,t!=null}function Yi(){ot(an),ot(Bt)}function fd(t,e,n){if(Bt.current!==Br)throw Error(B(168));et(Bt,e),et(an,n)}function Dh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(B(108,Um(t)||"Unknown",o));return ut({},n,r)}function Qi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Br,no=Bt.current,et(Bt,t),et(an,an.current),!0}function hd(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=Dh(t,e,no),r.__reactInternalMemoizedMergedChildContext=t,ot(an),ot(Bt),et(Bt,t)):ot(an),et(an,n)}var ar=null,ba=!1,nl=!1;function Ah(t){ar===null?ar=[t]:ar.push(t)}function r0(t){ba=!0,Ah(t)}function zr(){if(!nl&&ar!==null){nl=!0;var t=0,e=qe;try{var n=ar;for(qe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ar=null,ba=!1}catch(o){throw ar!==null&&(ar=ar.slice(t+1)),nh(Vu,zr),o}finally{qe=e,nl=!1}}return null}var Ro=[],No=0,Xi=null,Zi=0,Sn=[],_n=0,ro=null,lr=1,ur="";function Hr(t,e){Ro[No++]=Zi,Ro[No++]=Xi,Xi=t,Zi=e}function Th(t,e,n){Sn[_n++]=lr,Sn[_n++]=ur,Sn[_n++]=ro,ro=t;var r=lr;t=ur;var o=32-Un(r)-1;r&=~(1<<o),n+=1;var s=32-Un(e)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,lr=1<<32-Un(e)+o|n<<o|r,ur=s+t}else lr=1<<s|n<<o|r,ur=t}function Zu(t){t.return!==null&&(Hr(t,1),Th(t,1,0))}function ec(t){for(;t===Xi;)Xi=Ro[--No],Ro[No]=null,Zi=Ro[--No],Ro[No]=null;for(;t===ro;)ro=Sn[--_n],Sn[_n]=null,ur=Sn[--_n],Sn[_n]=null,lr=Sn[--_n],Sn[_n]=null}var pn=null,hn=null,st=!1,Mn=null;function Oh(t,e){var n=kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function pd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pn=t,hn=Or(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pn=t,hn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ro!==null?{id:lr,overflow:ur}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pn=t,hn=null,!0):!1;default:return!1}}function Xl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zl(t){if(st){var e=hn;if(e){var n=e;if(!pd(t,e)){if(Xl(t))throw Error(B(418));e=Or(n.nextSibling);var r=pn;e&&pd(t,e)?Oh(r,n):(t.flags=t.flags&-4097|2,st=!1,pn=t)}}else{if(Xl(t))throw Error(B(418));t.flags=t.flags&-4097|2,st=!1,pn=t}}}function md(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pn=t}function pi(t){if(t!==pn)return!1;if(!st)return md(t),st=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Kl(t.type,t.memoizedProps)),e&&(e=hn)){if(Xl(t))throw Lh(),Error(B(418));for(;e;)Oh(t,e),e=Or(e.nextSibling)}if(md(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){hn=Or(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}hn=null}}else hn=pn?Or(t.stateNode.nextSibling):null;return!0}function Lh(){for(var t=hn;t;)t=Or(t.nextSibling)}function Fo(){hn=pn=null,st=!1}function tc(t){Mn===null?Mn=[t]:Mn.push(t)}var o0=yr.ReactCurrentBatchConfig;function os(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var o=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var l=o.refs;i===null?delete l[s]:l[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function mi(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gd(t){var e=t._init;return e(t._payload)}function Ph(t){function e(p,m){if(t){var y=p.deletions;y===null?(p.deletions=[m],p.flags|=16):y.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function o(p,m){return p=Ir(p,m),p.index=0,p.sibling=null,p}function s(p,m,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<m?(p.flags|=2,m):y):(p.flags|=2,m)):(p.flags|=1048576,m)}function i(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,m,y,w){return m===null||m.tag!==6?(m=ul(y,p.mode,w),m.return=p,m):(m=o(m,y),m.return=p,m)}function u(p,m,y,w){var E=y.type;return E===So?d(p,m,y.props.children,w,y.key):m!==null&&(m.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===_r&&gd(E)===m.type)?(w=o(m,y.props),w.ref=os(p,m,y),w.return=p,w):(w=Ui(y.type,y.key,y.props,null,p.mode,w),w.ref=os(p,m,y),w.return=p,w)}function c(p,m,y,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=cl(y,p.mode,w),m.return=p,m):(m=o(m,y.children||[]),m.return=p,m)}function d(p,m,y,w,E){return m===null||m.tag!==7?(m=to(y,p.mode,w,E),m.return=p,m):(m=o(m,y),m.return=p,m)}function h(p,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ul(""+m,p.mode,y),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case oi:return y=Ui(m.type,m.key,m.props,null,p.mode,y),y.ref=os(p,null,m),y.return=p,y;case wo:return m=cl(m,p.mode,y),m.return=p,m;case _r:var w=m._init;return h(p,w(m._payload),y)}if(cs(m)||Zo(m))return m=to(m,p.mode,y,null),m.return=p,m;mi(p,m)}return null}function f(p,m,y,w){var E=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return E!==null?null:l(p,m,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case oi:return y.key===E?u(p,m,y,w):null;case wo:return y.key===E?c(p,m,y,w):null;case _r:return E=y._init,f(p,m,E(y._payload),w)}if(cs(y)||Zo(y))return E!==null?null:d(p,m,y,w,null);mi(p,y)}return null}function g(p,m,y,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(y)||null,l(m,p,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case oi:return p=p.get(w.key===null?y:w.key)||null,u(m,p,w,E);case wo:return p=p.get(w.key===null?y:w.key)||null,c(m,p,w,E);case _r:var R=w._init;return g(p,m,y,R(w._payload),E)}if(cs(w)||Zo(w))return p=p.get(y)||null,d(m,p,w,E,null);mi(m,w)}return null}function x(p,m,y,w){for(var E=null,R=null,D=m,S=m=0,T=null;D!==null&&S<y.length;S++){D.index>S?(T=D,D=null):T=D.sibling;var v=f(p,D,y[S],w);if(v===null){D===null&&(D=T);break}t&&D&&v.alternate===null&&e(p,D),m=s(v,m,S),R===null?E=v:R.sibling=v,R=v,D=T}if(S===y.length)return n(p,D),st&&Hr(p,S),E;if(D===null){for(;S<y.length;S++)D=h(p,y[S],w),D!==null&&(m=s(D,m,S),R===null?E=D:R.sibling=D,R=D);return st&&Hr(p,S),E}for(D=r(p,D);S<y.length;S++)T=g(D,p,S,y[S],w),T!==null&&(t&&T.alternate!==null&&D.delete(T.key===null?S:T.key),m=s(T,m,S),R===null?E=T:R.sibling=T,R=T);return t&&D.forEach(function(A){return e(p,A)}),st&&Hr(p,S),E}function b(p,m,y,w){var E=Zo(y);if(typeof E!="function")throw Error(B(150));if(y=E.call(y),y==null)throw Error(B(151));for(var R=E=null,D=m,S=m=0,T=null,v=y.next();D!==null&&!v.done;S++,v=y.next()){D.index>S?(T=D,D=null):T=D.sibling;var A=f(p,D,v.value,w);if(A===null){D===null&&(D=T);break}t&&D&&A.alternate===null&&e(p,D),m=s(A,m,S),R===null?E=A:R.sibling=A,R=A,D=T}if(v.done)return n(p,D),st&&Hr(p,S),E;if(D===null){for(;!v.done;S++,v=y.next())v=h(p,v.value,w),v!==null&&(m=s(v,m,S),R===null?E=v:R.sibling=v,R=v);return st&&Hr(p,S),E}for(D=r(p,D);!v.done;S++,v=y.next())v=g(D,p,S,v.value,w),v!==null&&(t&&v.alternate!==null&&D.delete(v.key===null?S:v.key),m=s(v,m,S),R===null?E=v:R.sibling=v,R=v);return t&&D.forEach(function(O){return e(p,O)}),st&&Hr(p,S),E}function _(p,m,y,w){if(typeof y=="object"&&y!==null&&y.type===So&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case oi:e:{for(var E=y.key,R=m;R!==null;){if(R.key===E){if(E=y.type,E===So){if(R.tag===7){n(p,R.sibling),m=o(R,y.props.children),m.return=p,p=m;break e}}else if(R.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===_r&&gd(E)===R.type){n(p,R.sibling),m=o(R,y.props),m.ref=os(p,R,y),m.return=p,p=m;break e}n(p,R);break}else e(p,R);R=R.sibling}y.type===So?(m=to(y.props.children,p.mode,w,y.key),m.return=p,p=m):(w=Ui(y.type,y.key,y.props,null,p.mode,w),w.ref=os(p,m,y),w.return=p,p=w)}return i(p);case wo:e:{for(R=y.key;m!==null;){if(m.key===R)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(p,m.sibling),m=o(m,y.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=cl(y,p.mode,w),m.return=p,p=m}return i(p);case _r:return R=y._init,_(p,m,R(y._payload),w)}if(cs(y))return x(p,m,y,w);if(Zo(y))return b(p,m,y,w);mi(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(p,m.sibling),m=o(m,y),m.return=p,p=m):(n(p,m),m=ul(y,p.mode,w),m.return=p,p=m),i(p)):n(p,m)}return _}var zo=Ph(!0),$h=Ph(!1),ea=Fr(null),ta=null,Do=null,nc=null;function rc(){nc=Do=ta=null}function oc(t){var e=ea.current;ot(ea),t._currentValue=e}function eu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Io(t,e){ta=t,nc=Do=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function Cn(t){var e=t._currentValue;if(nc!==t)if(t={context:t,memoizedValue:e,next:null},Do===null){if(ta===null)throw Error(B(308));Do=t,ta.dependencies={lanes:0,firstContext:t}}else Do=Do.next=t;return e}var Xr=null;function sc(t){Xr===null?Xr=[t]:Xr.push(t)}function Ih(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,sc(e)):(n.next=o.next,o.next=n),e.interleaved=n,pr(t,r)}function pr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kr=!1;function ic(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,pr(t,n)}return o=r.interleaved,o===null?(e.next=e,sc(r)):(e.next=o.next,o.next=e),r.interleaved=e,pr(t,n)}function Li(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gu(t,n)}}function yd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function na(t,e,n,r){var o=t.updateQueue;kr=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var u=l,c=u.next;u.next=null,i===null?s=c:i.next=c,i=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(s!==null){var h=o.baseState;i=0,d=c=u=null,l=s;do{var f=l.lane,g=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,b=l;switch(f=e,g=n,b.tag){case 1:if(x=b.payload,typeof x=="function"){h=x.call(g,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,f=typeof x=="function"?x.call(g,h,f):x,f==null)break e;h=ut({},h,f);break e;case 2:kr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=o.effects,f===null?o.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=g,u=h):d=d.next=g,i|=f;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;f=l,l=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(d===null&&(u=h),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=d,e=o.shared.interleaved,e!==null){o=e;do i|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);so|=i,t.lanes=i,t.memoizedState=h}}function vd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(B(191,o));o.call(r)}}}var Qs={},Xn=Fr(Qs),Bs=Fr(Qs),Us=Fr(Qs);function Zr(t){if(t===Qs)throw Error(B(174));return t}function ac(t,e){switch(et(Us,e),et(Bs,t),et(Xn,Qs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ll(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ll(e,t)}ot(Xn),et(Xn,e)}function Wo(){ot(Xn),ot(Bs),ot(Us)}function Bh(t){Zr(Us.current);var e=Zr(Xn.current),n=Ll(e,t.type);e!==n&&(et(Bs,t),et(Xn,n))}function lc(t){Bs.current===t&&(ot(Xn),ot(Bs))}var at=Fr(0);function ra(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rl=[];function uc(){for(var t=0;t<rl.length;t++)rl[t]._workInProgressVersionPrimary=null;rl.length=0}var Pi=yr.ReactCurrentDispatcher,ol=yr.ReactCurrentBatchConfig,oo=0,lt=null,wt=null,Rt=null,oa=!1,xs=!1,Fs=0,s0=0;function $t(){throw Error(B(321))}function cc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zn(t[n],e[n]))return!1;return!0}function dc(t,e,n,r,o,s){if(oo=s,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pi.current=t===null||t.memoizedState===null?u0:c0,t=n(r,o),xs){s=0;do{if(xs=!1,Fs=0,25<=s)throw Error(B(301));s+=1,Rt=wt=null,e.updateQueue=null,Pi.current=d0,t=n(r,o)}while(xs)}if(Pi.current=sa,e=wt!==null&&wt.next!==null,oo=0,Rt=wt=lt=null,oa=!1,e)throw Error(B(300));return t}function fc(){var t=Fs!==0;return Fs=0,t}function Hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?lt.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Rn(){if(wt===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var e=Rt===null?lt.memoizedState:Rt.next;if(e!==null)Rt=e,wt=t;else{if(t===null)throw Error(B(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Rt===null?lt.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function zs(t,e){return typeof e=="function"?e(t):e}function sl(t){var e=Rn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=wt,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var l=i=null,u=null,c=s;do{var d=c.lane;if((oo&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,i=r):u=u.next=h,lt.lanes|=d,so|=d}c=c.next}while(c!==null&&c!==s);u===null?i=r:u.next=l,zn(r,e.memoizedState)||(sn=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do s=o.lane,lt.lanes|=s,so|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function il(t){var e=Rn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);zn(s,e.memoizedState)||(sn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Uh(){}function Fh(t,e){var n=lt,r=Rn(),o=e(),s=!zn(r.memoizedState,o);if(s&&(r.memoizedState=o,sn=!0),r=r.queue,hc(Vh.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,Ws(9,Wh.bind(null,n,r,o,e),void 0,null),Nt===null)throw Error(B(349));oo&30||zh(n,e,o)}return o}function zh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Wh(t,e,n,r){e.value=n,e.getSnapshot=r,Gh(e)&&qh(t)}function Vh(t,e,n){return n(function(){Gh(e)&&qh(t)})}function Gh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zn(t,n)}catch{return!0}}function qh(t){var e=pr(t,1);e!==null&&Fn(e,t,1,-1)}function xd(t){var e=Hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:t},e.queue=t,t=t.dispatch=l0.bind(null,lt,t),[e.memoizedState,t]}function Ws(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Hh(){return Rn().memoizedState}function $i(t,e,n,r){var o=Hn();lt.flags|=t,o.memoizedState=Ws(1|e,n,void 0,r===void 0?null:r)}function wa(t,e,n,r){var o=Rn();r=r===void 0?null:r;var s=void 0;if(wt!==null){var i=wt.memoizedState;if(s=i.destroy,r!==null&&cc(r,i.deps)){o.memoizedState=Ws(e,n,s,r);return}}lt.flags|=t,o.memoizedState=Ws(1|e,n,s,r)}function bd(t,e){return $i(8390656,8,t,e)}function hc(t,e){return wa(2048,8,t,e)}function Kh(t,e){return wa(4,2,t,e)}function Jh(t,e){return wa(4,4,t,e)}function Yh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qh(t,e,n){return n=n!=null?n.concat([t]):null,wa(4,4,Yh.bind(null,e,t),n)}function pc(){}function Xh(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Zh(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ep(t,e,n){return oo&21?(zn(n,e)||(n=sh(),lt.lanes|=n,so|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function i0(t,e){var n=qe;qe=n!==0&&4>n?n:4,t(!0);var r=ol.transition;ol.transition={};try{t(!1),e()}finally{qe=n,ol.transition=r}}function tp(){return Rn().memoizedState}function a0(t,e,n){var r=$r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},np(t))rp(e,n);else if(n=Ih(t,e,n,r),n!==null){var o=qt();Fn(n,t,r,o),op(n,e,r)}}function l0(t,e,n){var r=$r(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(np(t))rp(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,l=s(i,n);if(o.hasEagerState=!0,o.eagerState=l,zn(l,i)){var u=e.interleaved;u===null?(o.next=o,sc(e)):(o.next=u.next,u.next=o),e.interleaved=o;return}}catch{}finally{}n=Ih(t,e,o,r),n!==null&&(o=qt(),Fn(n,t,r,o),op(n,e,r))}}function np(t){var e=t.alternate;return t===lt||e!==null&&e===lt}function rp(t,e){xs=oa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function op(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gu(t,n)}}var sa={readContext:Cn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},u0={readContext:Cn,useCallback:function(t,e){return Hn().memoizedState=[t,e===void 0?null:e],t},useContext:Cn,useEffect:bd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$i(4194308,4,Yh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $i(4194308,4,t,e)},useInsertionEffect:function(t,e){return $i(4,2,t,e)},useMemo:function(t,e){var n=Hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=a0.bind(null,lt,t),[r.memoizedState,t]},useRef:function(t){var e=Hn();return t={current:t},e.memoizedState=t},useState:xd,useDebugValue:pc,useDeferredValue:function(t){return Hn().memoizedState=t},useTransition:function(){var t=xd(!1),e=t[0];return t=i0.bind(null,t[1]),Hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=lt,o=Hn();if(st){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Nt===null)throw Error(B(349));oo&30||zh(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,bd(Vh.bind(null,r,s,t),[t]),r.flags|=2048,Ws(9,Wh.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Hn(),e=Nt.identifierPrefix;if(st){var n=ur,r=lr;n=(r&~(1<<32-Un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=s0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},c0={readContext:Cn,useCallback:Xh,useContext:Cn,useEffect:hc,useImperativeHandle:Qh,useInsertionEffect:Kh,useLayoutEffect:Jh,useMemo:Zh,useReducer:sl,useRef:Hh,useState:function(){return sl(zs)},useDebugValue:pc,useDeferredValue:function(t){var e=Rn();return ep(e,wt.memoizedState,t)},useTransition:function(){var t=sl(zs)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:Uh,useSyncExternalStore:Fh,useId:tp,unstable_isNewReconciler:!1},d0={readContext:Cn,useCallback:Xh,useContext:Cn,useEffect:hc,useImperativeHandle:Qh,useInsertionEffect:Kh,useLayoutEffect:Jh,useMemo:Zh,useReducer:il,useRef:Hh,useState:function(){return il(zs)},useDebugValue:pc,useDeferredValue:function(t){var e=Rn();return wt===null?e.memoizedState=t:ep(e,wt.memoizedState,t)},useTransition:function(){var t=il(zs)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:Uh,useSyncExternalStore:Fh,useId:tp,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function tu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sa={isMounted:function(t){return(t=t._reactInternals)?co(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qt(),o=$r(t),s=dr(r,o);s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,o),e!==null&&(Fn(e,t,o,r),Li(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qt(),o=$r(t),s=dr(r,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,o),e!==null&&(Fn(e,t,o,r),Li(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),r=$r(t),o=dr(n,r);o.tag=2,e!=null&&(o.callback=e),e=Lr(t,o,r),e!==null&&(Fn(e,t,r,n),Li(e,t,r))}};function wd(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!Ps(n,r)||!Ps(o,s):!0}function sp(t,e,n){var r=!1,o=Br,s=e.contextType;return typeof s=="object"&&s!==null?s=Cn(s):(o=ln(e)?no:Bt.current,r=e.contextTypes,s=(r=r!=null)?Uo(t,o):Br),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function Sd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sa.enqueueReplaceState(e,e.state,null)}function nu(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},ic(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=Cn(s):(s=ln(e)?no:Bt.current,o.context=Uo(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(tu(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Sa.enqueueReplaceState(o,o.state,null),na(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Vo(t,e){try{var n="",r=e;do n+=Bm(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function al(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ru(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var f0=typeof WeakMap=="function"?WeakMap:Map;function ip(t,e,n){n=dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){aa||(aa=!0,hu=r),ru(t,e)},n}function ap(t,e,n){n=dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){ru(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ru(t,e),typeof r!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function _d(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new f0;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=j0.bind(null,t,e,n),e.then(t,t))}function kd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ed(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=dr(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var h0=yr.ReactCurrentOwner,sn=!1;function Wt(t,e,n,r){e.child=t===null?$h(e,null,n,r):zo(e,t.child,n,r)}function jd(t,e,n,r,o){n=n.render;var s=e.ref;return Io(e,o),r=dc(t,e,n,r,s,o),n=fc(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,mr(t,e,o)):(st&&n&&Zu(e),e.flags|=1,Wt(t,e,r,o),e.child)}function Cd(t,e,n,r,o){if(t===null){var s=n.type;return typeof s=="function"&&!Sc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,lp(t,e,s,r,o)):(t=Ui(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ps,n(i,r)&&t.ref===e.ref)return mr(t,e,o)}return e.flags|=1,t=Ir(s,r),t.ref=e.ref,t.return=e,e.child=t}function lp(t,e,n,r,o){if(t!==null){var s=t.memoizedProps;if(Ps(s,r)&&t.ref===e.ref)if(sn=!1,e.pendingProps=r=s,(t.lanes&o)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,mr(t,e,o)}return ou(t,e,n,r,o)}function up(t,e,n){var r=e.pendingProps,o=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(To,fn),fn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,et(To,fn),fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,et(To,fn),fn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,et(To,fn),fn|=r;return Wt(t,e,o,n),e.child}function cp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ou(t,e,n,r,o){var s=ln(n)?no:Bt.current;return s=Uo(e,s),Io(e,o),n=dc(t,e,n,r,s,o),r=fc(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,mr(t,e,o)):(st&&r&&Zu(e),e.flags|=1,Wt(t,e,n,o),e.child)}function Rd(t,e,n,r,o){if(ln(n)){var s=!0;Qi(e)}else s=!1;if(Io(e,o),e.stateNode===null)Ii(t,e),sp(e,n,r),nu(e,n,r,o),r=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var u=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Cn(c):(c=ln(n)?no:Bt.current,c=Uo(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||u!==c)&&Sd(e,i,r,c),kr=!1;var f=e.memoizedState;i.state=f,na(e,r,i,o),u=e.memoizedState,l!==r||f!==u||an.current||kr?(typeof d=="function"&&(tu(e,n,d,r),u=e.memoizedState),(l=kr||wd(e,n,l,r,f,u,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),i.props=r,i.state=u,i.context=c,r=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,Mh(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Pn(e.type,l),i.props=c,h=e.pendingProps,f=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=Cn(u):(u=ln(n)?no:Bt.current,u=Uo(e,u));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||f!==u)&&Sd(e,i,r,u),kr=!1,f=e.memoizedState,i.state=f,na(e,r,i,o);var x=e.memoizedState;l!==h||f!==x||an.current||kr?(typeof g=="function"&&(tu(e,n,g,r),x=e.memoizedState),(c=kr||wd(e,n,c,r,f,x,u)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,x,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,x,u)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),i.props=r,i.state=x,i.context=u,r=c):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return su(t,e,n,r,s,o)}function su(t,e,n,r,o,s){cp(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return o&&hd(e,n,!1),mr(t,e,s);r=e.stateNode,h0.current=e;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=zo(e,t.child,null,s),e.child=zo(e,null,l,s)):Wt(t,e,l,s),e.memoizedState=r.state,o&&hd(e,n,!0),e.child}function dp(t){var e=t.stateNode;e.pendingContext?fd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fd(t,e.context,!1),ac(t,e.containerInfo)}function Nd(t,e,n,r,o){return Fo(),tc(o),e.flags|=256,Wt(t,e,n,r),e.child}var iu={dehydrated:null,treeContext:null,retryLane:0};function au(t){return{baseLanes:t,cachePool:null,transitions:null}}function fp(t,e,n){var r=e.pendingProps,o=at.current,s=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(o&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),et(at,o&1),t===null)return Zl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Ea(i,r,0,null),t=to(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=au(n),e.memoizedState=iu,t):mc(e,i));if(o=t.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return p0(t,e,i,r,l,o,n);if(s){s=r.fallback,i=e.mode,o=t.child,l=o.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ir(o,u),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?s=Ir(l,s):(s=to(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?au(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=iu,r}return s=t.child,t=s.sibling,r=Ir(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function mc(t,e){return e=Ea({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gi(t,e,n,r){return r!==null&&tc(r),zo(e,t.child,null,n),t=mc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function p0(t,e,n,r,o,s,i){if(n)return e.flags&256?(e.flags&=-257,r=al(Error(B(422))),gi(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=Ea({mode:"visible",children:r.children},o,0,null),s=to(s,o,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&zo(e,t.child,null,i),e.child.memoizedState=au(i),e.memoizedState=iu,s);if(!(e.mode&1))return gi(t,e,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(B(419)),r=al(s,r,void 0),gi(t,e,i,r)}if(l=(i&t.childLanes)!==0,sn||l){if(r=Nt,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,pr(t,o),Fn(r,t,o,-1))}return wc(),r=al(Error(B(421))),gi(t,e,i,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=C0.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,hn=Or(o.nextSibling),pn=e,st=!0,Mn=null,t!==null&&(Sn[_n++]=lr,Sn[_n++]=ur,Sn[_n++]=ro,lr=t.id,ur=t.overflow,ro=e),e=mc(e,r.children),e.flags|=4096,e)}function Dd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),eu(t.return,e,n)}function ll(t,e,n,r,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function hp(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;if(Wt(t,e,r.children,n),r=at.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dd(t,n,e);else if(t.tag===19)Dd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(et(at,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&ra(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),ll(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&ra(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}ll(e,!0,n,null,s);break;case"together":ll(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ii(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),so|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Ir(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ir(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function m0(t,e,n){switch(e.tag){case 3:dp(e),Fo();break;case 5:Bh(e);break;case 1:ln(e.type)&&Qi(e);break;case 4:ac(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;et(ea,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(et(at,at.current&1),e.flags|=128,null):n&e.child.childLanes?fp(t,e,n):(et(at,at.current&1),t=mr(t,e,n),t!==null?t.sibling:null);et(at,at.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return hp(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),et(at,at.current),r)break;return null;case 22:case 23:return e.lanes=0,up(t,e,n)}return mr(t,e,n)}var pp,lu,mp,gp;pp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lu=function(){};mp=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Zr(Xn.current);var s=null;switch(n){case"input":o=Dl(t,o),r=Dl(t,r),s=[];break;case"select":o=ut({},o,{value:void 0}),r=ut({},r,{value:void 0}),s=[];break;case"textarea":o=Ol(t,o),r=Ol(t,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ji)}Pl(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var l=o[c];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Rs.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Rs.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&rt("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};gp=function(t,e,n,r){n!==r&&(e.flags|=4)};function ss(t,e){if(!st)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function It(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function g0(t,e,n){var r=e.pendingProps;switch(ec(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(e),null;case 1:return ln(e.type)&&Yi(),It(e),null;case 3:return r=e.stateNode,Wo(),ot(an),ot(Bt),uc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mn!==null&&(gu(Mn),Mn=null))),lu(t,e),It(e),null;case 5:lc(e);var o=Zr(Us.current);if(n=e.type,t!==null&&e.stateNode!=null)mp(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return It(e),null}if(t=Zr(Xn.current),pi(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Jn]=e,r[Ms]=s,t=(e.mode&1)!==0,n){case"dialog":rt("cancel",r),rt("close",r);break;case"iframe":case"object":case"embed":rt("load",r);break;case"video":case"audio":for(o=0;o<fs.length;o++)rt(fs[o],r);break;case"source":rt("error",r);break;case"img":case"image":case"link":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"input":Bc(r,s),rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},rt("invalid",r);break;case"textarea":Fc(r,s),rt("invalid",r)}Pl(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&hi(r.textContent,l,t),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&hi(r.textContent,l,t),o=["children",""+l]):Rs.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&rt("scroll",r)}switch(n){case"input":si(r),Uc(r,s,!0);break;case"textarea":si(r),zc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ji)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[Jn]=e,t[Ms]=r,pp(t,e,!1,!1),e.stateNode=t;e:{switch(i=$l(n,r),n){case"dialog":rt("cancel",t),rt("close",t),o=r;break;case"iframe":case"object":case"embed":rt("load",t),o=r;break;case"video":case"audio":for(o=0;o<fs.length;o++)rt(fs[o],t);o=r;break;case"source":rt("error",t),o=r;break;case"img":case"image":case"link":rt("error",t),rt("load",t),o=r;break;case"details":rt("toggle",t),o=r;break;case"input":Bc(t,r),o=Dl(t,r),rt("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=ut({},r,{value:void 0}),rt("invalid",t);break;case"textarea":Fc(t,r),o=Ol(t,r),rt("invalid",t);break;default:o=r}Pl(n,o),l=o;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Hf(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Gf(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ns(t,u):typeof u=="number"&&Ns(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Rs.hasOwnProperty(s)?u!=null&&s==="onScroll"&&rt("scroll",t):u!=null&&Bu(t,s,u,i))}switch(n){case"input":si(t),Uc(t,r,!1);break;case"textarea":si(t),zc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Mr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Oo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Oo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Ji)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return It(e),null;case 6:if(t&&e.stateNode!=null)gp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Zr(Us.current),Zr(Xn.current),pi(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jn]=e,(s=r.nodeValue!==n)&&(t=pn,t!==null))switch(t.tag){case 3:hi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hi(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jn]=e,e.stateNode=r}return It(e),null;case 13:if(ot(at),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&hn!==null&&e.mode&1&&!(e.flags&128))Lh(),Fo(),e.flags|=98560,s=!1;else if(s=pi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[Jn]=e}else Fo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;It(e),s=!1}else Mn!==null&&(gu(Mn),Mn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||at.current&1?St===0&&(St=3):wc())),e.updateQueue!==null&&(e.flags|=4),It(e),null);case 4:return Wo(),lu(t,e),t===null&&$s(e.stateNode.containerInfo),It(e),null;case 10:return oc(e.type._context),It(e),null;case 17:return ln(e.type)&&Yi(),It(e),null;case 19:if(ot(at),s=e.memoizedState,s===null)return It(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)ss(s,!1);else{if(St!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=ra(t),i!==null){for(e.flags|=128,ss(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return et(at,at.current&1|2),e.child}t=t.sibling}s.tail!==null&&pt()>Go&&(e.flags|=128,r=!0,ss(s,!1),e.lanes=4194304)}else{if(!r)if(t=ra(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ss(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!st)return It(e),null}else 2*pt()-s.renderingStartTime>Go&&n!==1073741824&&(e.flags|=128,r=!0,ss(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pt(),e.sibling=null,n=at.current,et(at,r?n&1|2:n&1),e):(It(e),null);case 22:case 23:return bc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fn&1073741824&&(It(e),e.subtreeFlags&6&&(e.flags|=8192)):It(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function y0(t,e){switch(ec(e),e.tag){case 1:return ln(e.type)&&Yi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wo(),ot(an),ot(Bt),uc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lc(e),null;case 13:if(ot(at),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Fo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ot(at),null;case 4:return Wo(),null;case 10:return oc(e.type._context),null;case 22:case 23:return bc(),null;case 24:return null;default:return null}}var yi=!1,Mt=!1,v0=typeof WeakSet=="function"?WeakSet:Set,X=null;function Ao(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dt(t,e,r)}else n.current=null}function uu(t,e,n){try{n()}catch(r){dt(t,e,r)}}var Ad=!1;function x0(t,e){if(ql=qi,t=wh(),Xu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,l=-1,u=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||o!==0&&h.nodeType!==3||(l=i+o),h!==s||r!==0&&h.nodeType!==3||(u=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++c===o&&(l=i),f===s&&++d===r&&(u=i),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hl={focusedElem:t,selectionRange:n},qi=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,_=x.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?b:Pn(e.type,b),_);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(w){dt(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return x=Ad,Ad=!1,x}function bs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&uu(e,n,s)}o=o.next}while(o!==r)}}function _a(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yp(t){var e=t.alternate;e!==null&&(t.alternate=null,yp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jn],delete e[Ms],delete e[Yl],delete e[t0],delete e[n0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vp(t){return t.tag===5||t.tag===3||t.tag===4}function Td(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function du(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ji));else if(r!==4&&(t=t.child,t!==null))for(du(t,e,n),t=t.sibling;t!==null;)du(t,e,n),t=t.sibling}function fu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fu(t,e,n),t=t.sibling;t!==null;)fu(t,e,n),t=t.sibling}var Tt=null,$n=!1;function xr(t,e,n){for(n=n.child;n!==null;)xp(t,e,n),n=n.sibling}function xp(t,e,n){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(ma,n)}catch{}switch(n.tag){case 5:Mt||Ao(n,e);case 6:var r=Tt,o=$n;Tt=null,xr(t,e,n),Tt=r,$n=o,Tt!==null&&($n?(t=Tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tt.removeChild(n.stateNode));break;case 18:Tt!==null&&($n?(t=Tt,n=n.stateNode,t.nodeType===8?tl(t.parentNode,n):t.nodeType===1&&tl(t,n),Os(t)):tl(Tt,n.stateNode));break;case 4:r=Tt,o=$n,Tt=n.stateNode.containerInfo,$n=!0,xr(t,e,n),Tt=r,$n=o;break;case 0:case 11:case 14:case 15:if(!Mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&uu(n,e,i),o=o.next}while(o!==r)}xr(t,e,n);break;case 1:if(!Mt&&(Ao(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){dt(n,e,l)}xr(t,e,n);break;case 21:xr(t,e,n);break;case 22:n.mode&1?(Mt=(r=Mt)||n.memoizedState!==null,xr(t,e,n),Mt=r):xr(t,e,n);break;default:xr(t,e,n)}}function Od(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new v0),e.forEach(function(r){var o=R0.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function On(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:Tt=l.stateNode,$n=!1;break e;case 3:Tt=l.stateNode.containerInfo,$n=!0;break e;case 4:Tt=l.stateNode.containerInfo,$n=!0;break e}l=l.return}if(Tt===null)throw Error(B(160));xp(s,i,o),Tt=null,$n=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(c){dt(o,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bp(e,t),e=e.sibling}function bp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(On(e,t),Gn(t),r&4){try{bs(3,t,t.return),_a(3,t)}catch(b){dt(t,t.return,b)}try{bs(5,t,t.return)}catch(b){dt(t,t.return,b)}}break;case 1:On(e,t),Gn(t),r&512&&n!==null&&Ao(n,n.return);break;case 5:if(On(e,t),Gn(t),r&512&&n!==null&&Ao(n,n.return),t.flags&32){var o=t.stateNode;try{Ns(o,"")}catch(b){dt(t,t.return,b)}}if(r&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&zf(o,s),$l(l,i);var c=$l(l,s);for(i=0;i<u.length;i+=2){var d=u[i],h=u[i+1];d==="style"?Hf(o,h):d==="dangerouslySetInnerHTML"?Gf(o,h):d==="children"?Ns(o,h):Bu(o,d,h,c)}switch(l){case"input":Al(o,s);break;case"textarea":Wf(o,s);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Oo(o,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?Oo(o,!!s.multiple,s.defaultValue,!0):Oo(o,!!s.multiple,s.multiple?[]:"",!1))}o[Ms]=s}catch(b){dt(t,t.return,b)}}break;case 6:if(On(e,t),Gn(t),r&4){if(t.stateNode===null)throw Error(B(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(b){dt(t,t.return,b)}}break;case 3:if(On(e,t),Gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Os(e.containerInfo)}catch(b){dt(t,t.return,b)}break;case 4:On(e,t),Gn(t);break;case 13:On(e,t),Gn(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(vc=pt())),r&4&&Od(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Mt=(c=Mt)||d,On(e,t),Mt=c):On(e,t),Gn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(X=t,d=t.child;d!==null;){for(h=X=d;X!==null;){switch(f=X,g=f.child,f.tag){case 0:case 11:case 14:case 15:bs(4,f,f.return);break;case 1:Ao(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(b){dt(r,n,b)}}break;case 5:Ao(f,f.return);break;case 22:if(f.memoizedState!==null){Pd(h);continue}}g!==null?(g.return=f,X=g):Pd(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{o=h.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,u=h.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=qf("display",i))}catch(b){dt(t,t.return,b)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(b){dt(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:On(e,t),Gn(t),r&4&&Od(t);break;case 21:break;default:On(e,t),Gn(t)}}function Gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(vp(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Ns(o,""),r.flags&=-33);var s=Td(t);fu(t,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,l=Td(t);du(t,l,i);break;default:throw Error(B(161))}}catch(u){dt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function b0(t,e,n){X=t,wp(t)}function wp(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var o=X,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||yi;if(!i){var l=o.alternate,u=l!==null&&l.memoizedState!==null||Mt;l=yi;var c=Mt;if(yi=i,(Mt=u)&&!c)for(X=o;X!==null;)i=X,u=i.child,i.tag===22&&i.memoizedState!==null?$d(o):u!==null?(u.return=i,X=u):$d(o);for(;s!==null;)X=s,wp(s),s=s.sibling;X=o,yi=l,Mt=c}Ld(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,X=s):Ld(t)}}function Ld(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mt||_a(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mt)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vd(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vd(e,i,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Os(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Mt||e.flags&512&&cu(e)}catch(f){dt(e,e.return,f)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Pd(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function $d(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_a(4,e)}catch(u){dt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(u){dt(e,o,u)}}var s=e.return;try{cu(e)}catch(u){dt(e,s,u)}break;case 5:var i=e.return;try{cu(e)}catch(u){dt(e,i,u)}}}catch(u){dt(e,e.return,u)}if(e===t){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var w0=Math.ceil,ia=yr.ReactCurrentDispatcher,gc=yr.ReactCurrentOwner,En=yr.ReactCurrentBatchConfig,Pe=0,Nt=null,yt=null,Ot=0,fn=0,To=Fr(0),St=0,Vs=null,so=0,ka=0,yc=0,ws=null,rn=null,vc=0,Go=1/0,sr=null,aa=!1,hu=null,Pr=null,vi=!1,Nr=null,la=0,Ss=0,pu=null,Mi=-1,Bi=0;function qt(){return Pe&6?pt():Mi!==-1?Mi:Mi=pt()}function $r(t){return t.mode&1?Pe&2&&Ot!==0?Ot&-Ot:o0.transition!==null?(Bi===0&&(Bi=sh()),Bi):(t=qe,t!==0||(t=window.event,t=t===void 0?16:fh(t.type)),t):1}function Fn(t,e,n,r){if(50<Ss)throw Ss=0,pu=null,Error(B(185));Ks(t,n,r),(!(Pe&2)||t!==Nt)&&(t===Nt&&(!(Pe&2)&&(ka|=n),St===4&&jr(t,Ot)),un(t,r),n===1&&Pe===0&&!(e.mode&1)&&(Go=pt()+500,ba&&zr()))}function un(t,e){var n=t.callbackNode;og(t,e);var r=Gi(t,t===Nt?Ot:0);if(r===0)n!==null&&Gc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Gc(n),e===1)t.tag===0?r0(Id.bind(null,t)):Ah(Id.bind(null,t)),Zg(function(){!(Pe&6)&&zr()}),n=null;else{switch(ih(r)){case 1:n=Vu;break;case 4:n=rh;break;case 16:n=Vi;break;case 536870912:n=oh;break;default:n=Vi}n=Np(n,Sp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Sp(t,e){if(Mi=-1,Bi=0,Pe&6)throw Error(B(327));var n=t.callbackNode;if(Mo()&&t.callbackNode!==n)return null;var r=Gi(t,t===Nt?Ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ua(t,r);else{e=r;var o=Pe;Pe|=2;var s=kp();(Nt!==t||Ot!==e)&&(sr=null,Go=pt()+500,eo(t,e));do try{k0();break}catch(l){_p(t,l)}while(!0);rc(),ia.current=s,Pe=o,yt!==null?e=0:(Nt=null,Ot=0,e=St)}if(e!==0){if(e===2&&(o=Fl(t),o!==0&&(r=o,e=mu(t,o))),e===1)throw n=Vs,eo(t,0),jr(t,r),un(t,pt()),n;if(e===6)jr(t,r);else{if(o=t.current.alternate,!(r&30)&&!S0(o)&&(e=ua(t,r),e===2&&(s=Fl(t),s!==0&&(r=s,e=mu(t,s))),e===1))throw n=Vs,eo(t,0),jr(t,r),un(t,pt()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Kr(t,rn,sr);break;case 3:if(jr(t,r),(r&130023424)===r&&(e=vc+500-pt(),10<e)){if(Gi(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){qt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Jl(Kr.bind(null,t,rn,sr),e);break}Kr(t,rn,sr);break;case 4:if(jr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var i=31-Un(r);s=1<<i,i=e[i],i>o&&(o=i),r&=~s}if(r=o,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*w0(r/1960))-r,10<r){t.timeoutHandle=Jl(Kr.bind(null,t,rn,sr),r);break}Kr(t,rn,sr);break;case 5:Kr(t,rn,sr);break;default:throw Error(B(329))}}}return un(t,pt()),t.callbackNode===n?Sp.bind(null,t):null}function mu(t,e){var n=ws;return t.current.memoizedState.isDehydrated&&(eo(t,e).flags|=256),t=ua(t,e),t!==2&&(e=rn,rn=n,e!==null&&gu(e)),t}function gu(t){rn===null?rn=t:rn.push.apply(rn,t)}function S0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!zn(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jr(t,e){for(e&=~yc,e&=~ka,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Un(e),r=1<<n;t[n]=-1,e&=~r}}function Id(t){if(Pe&6)throw Error(B(327));Mo();var e=Gi(t,0);if(!(e&1))return un(t,pt()),null;var n=ua(t,e);if(t.tag!==0&&n===2){var r=Fl(t);r!==0&&(e=r,n=mu(t,r))}if(n===1)throw n=Vs,eo(t,0),jr(t,e),un(t,pt()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Kr(t,rn,sr),un(t,pt()),null}function xc(t,e){var n=Pe;Pe|=1;try{return t(e)}finally{Pe=n,Pe===0&&(Go=pt()+500,ba&&zr())}}function io(t){Nr!==null&&Nr.tag===0&&!(Pe&6)&&Mo();var e=Pe;Pe|=1;var n=En.transition,r=qe;try{if(En.transition=null,qe=1,t)return t()}finally{qe=r,En.transition=n,Pe=e,!(Pe&6)&&zr()}}function bc(){fn=To.current,ot(To)}function eo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Xg(n)),yt!==null)for(n=yt.return;n!==null;){var r=n;switch(ec(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yi();break;case 3:Wo(),ot(an),ot(Bt),uc();break;case 5:lc(r);break;case 4:Wo();break;case 13:ot(at);break;case 19:ot(at);break;case 10:oc(r.type._context);break;case 22:case 23:bc()}n=n.return}if(Nt=t,yt=t=Ir(t.current,null),Ot=fn=e,St=0,Vs=null,yc=ka=so=0,rn=ws=null,Xr!==null){for(e=0;e<Xr.length;e++)if(n=Xr[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}Xr=null}return t}function _p(t,e){do{var n=yt;try{if(rc(),Pi.current=sa,oa){for(var r=lt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}oa=!1}if(oo=0,Rt=wt=lt=null,xs=!1,Fs=0,gc.current=null,n===null||n.return===null){St=1,Vs=e,yt=null;break}e:{var s=t,i=n.return,l=n,u=e;if(e=Ot,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=kd(i);if(g!==null){g.flags&=-257,Ed(g,i,l,s,e),g.mode&1&&_d(s,c,e),e=g,u=c;var x=e.updateQueue;if(x===null){var b=new Set;b.add(u),e.updateQueue=b}else x.add(u);break e}else{if(!(e&1)){_d(s,c,e),wc();break e}u=Error(B(426))}}else if(st&&l.mode&1){var _=kd(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Ed(_,i,l,s,e),tc(Vo(u,l));break e}}s=u=Vo(u,l),St!==4&&(St=2),ws===null?ws=[s]:ws.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=ip(s,u,e);yd(s,p);break e;case 1:l=u;var m=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Pr===null||!Pr.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=ap(s,l,e);yd(s,w);break e}}s=s.return}while(s!==null)}jp(n)}catch(E){e=E,yt===n&&n!==null&&(yt=n=n.return);continue}break}while(!0)}function kp(){var t=ia.current;return ia.current=sa,t===null?sa:t}function wc(){(St===0||St===3||St===2)&&(St=4),Nt===null||!(so&268435455)&&!(ka&268435455)||jr(Nt,Ot)}function ua(t,e){var n=Pe;Pe|=2;var r=kp();(Nt!==t||Ot!==e)&&(sr=null,eo(t,e));do try{_0();break}catch(o){_p(t,o)}while(!0);if(rc(),Pe=n,ia.current=r,yt!==null)throw Error(B(261));return Nt=null,Ot=0,St}function _0(){for(;yt!==null;)Ep(yt)}function k0(){for(;yt!==null&&!Jm();)Ep(yt)}function Ep(t){var e=Rp(t.alternate,t,fn);t.memoizedProps=t.pendingProps,e===null?jp(t):yt=e,gc.current=null}function jp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=y0(n,e),n!==null){n.flags&=32767,yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{St=6,yt=null;return}}else if(n=g0(n,e,fn),n!==null){yt=n;return}if(e=e.sibling,e!==null){yt=e;return}yt=e=t}while(e!==null);St===0&&(St=5)}function Kr(t,e,n){var r=qe,o=En.transition;try{En.transition=null,qe=1,E0(t,e,n,r)}finally{En.transition=o,qe=r}return null}function E0(t,e,n,r){do Mo();while(Nr!==null);if(Pe&6)throw Error(B(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(sg(t,s),t===Nt&&(yt=Nt=null,Ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vi||(vi=!0,Np(Vi,function(){return Mo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=En.transition,En.transition=null;var i=qe;qe=1;var l=Pe;Pe|=4,gc.current=null,x0(t,n),bp(n,t),Gg(Hl),qi=!!ql,Hl=ql=null,t.current=n,b0(n),Ym(),Pe=l,qe=i,En.transition=s}else t.current=n;if(vi&&(vi=!1,Nr=t,la=o),s=t.pendingLanes,s===0&&(Pr=null),Zm(n.stateNode),un(t,pt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(aa)throw aa=!1,t=hu,hu=null,t;return la&1&&t.tag!==0&&Mo(),s=t.pendingLanes,s&1?t===pu?Ss++:(Ss=0,pu=t):Ss=0,zr(),null}function Mo(){if(Nr!==null){var t=ih(la),e=En.transition,n=qe;try{if(En.transition=null,qe=16>t?16:t,Nr===null)var r=!1;else{if(t=Nr,Nr=null,la=0,Pe&6)throw Error(B(331));var o=Pe;for(Pe|=4,X=t.current;X!==null;){var s=X,i=s.child;if(X.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(X=c;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:bs(8,d,s)}var h=d.child;if(h!==null)h.return=d,X=h;else for(;X!==null;){d=X;var f=d.sibling,g=d.return;if(yp(d),d===c){X=null;break}if(f!==null){f.return=g,X=f;break}X=g}}}var x=s.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var _=b.sibling;b.sibling=null,b=_}while(b!==null)}}X=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,X=i;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bs(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,X=p;break e}X=s.return}}var m=t.current;for(X=m;X!==null;){i=X;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,X=y;else e:for(i=m;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_a(9,l)}}catch(E){dt(l,l.return,E)}if(l===i){X=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,X=w;break e}X=l.return}}if(Pe=o,zr(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(ma,t)}catch{}r=!0}return r}finally{qe=n,En.transition=e}}return!1}function Md(t,e,n){e=Vo(n,e),e=ip(t,e,1),t=Lr(t,e,1),e=qt(),t!==null&&(Ks(t,1,e),un(t,e))}function dt(t,e,n){if(t.tag===3)Md(t,t,n);else for(;e!==null;){if(e.tag===3){Md(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pr===null||!Pr.has(r))){t=Vo(n,t),t=ap(e,t,1),e=Lr(e,t,1),t=qt(),e!==null&&(Ks(e,1,t),un(e,t));break}}e=e.return}}function j0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&n,Nt===t&&(Ot&n)===n&&(St===4||St===3&&(Ot&130023424)===Ot&&500>pt()-vc?eo(t,0):yc|=n),un(t,e)}function Cp(t,e){e===0&&(t.mode&1?(e=li,li<<=1,!(li&130023424)&&(li=4194304)):e=1);var n=qt();t=pr(t,e),t!==null&&(Ks(t,e,n),un(t,n))}function C0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Cp(t,n)}function R0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),Cp(t,n)}var Rp;Rp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,m0(t,e,n);sn=!!(t.flags&131072)}else sn=!1,st&&e.flags&1048576&&Th(e,Zi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ii(t,e),t=e.pendingProps;var o=Uo(e,Bt.current);Io(e,n),o=dc(null,e,r,t,o,n);var s=fc();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(r)?(s=!0,Qi(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,ic(e),o.updater=Sa,e.stateNode=o,o._reactInternals=e,nu(e,r,t,n),e=su(null,e,r,!0,s,n)):(e.tag=0,st&&s&&Zu(e),Wt(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ii(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=D0(r),t=Pn(r,t),o){case 0:e=ou(null,e,r,t,n);break e;case 1:e=Rd(null,e,r,t,n);break e;case 11:e=jd(null,e,r,t,n);break e;case 14:e=Cd(null,e,r,Pn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Pn(r,o),ou(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Pn(r,o),Rd(t,e,r,o,n);case 3:e:{if(dp(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,o=s.element,Mh(t,e),na(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Vo(Error(B(423)),e),e=Nd(t,e,r,n,o);break e}else if(r!==o){o=Vo(Error(B(424)),e),e=Nd(t,e,r,n,o);break e}else for(hn=Or(e.stateNode.containerInfo.firstChild),pn=e,st=!0,Mn=null,n=$h(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fo(),r===o){e=mr(t,e,n);break e}Wt(t,e,r,n)}e=e.child}return e;case 5:return Bh(e),t===null&&Zl(e),r=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,i=o.children,Kl(r,o)?i=null:s!==null&&Kl(r,s)&&(e.flags|=32),cp(t,e),Wt(t,e,i,n),e.child;case 6:return t===null&&Zl(e),null;case 13:return fp(t,e,n);case 4:return ac(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=zo(e,null,r,n):Wt(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Pn(r,o),jd(t,e,r,o,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,s=e.memoizedProps,i=o.value,et(ea,r._currentValue),r._currentValue=i,s!==null)if(zn(s.value,i)){if(s.children===o.children&&!an.current){e=mr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=dr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),eu(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(B(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),eu(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Wt(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Io(e,n),o=Cn(o),r=r(o),e.flags|=1,Wt(t,e,r,n),e.child;case 14:return r=e.type,o=Pn(r,e.pendingProps),o=Pn(r.type,o),Cd(t,e,r,o,n);case 15:return lp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Pn(r,o),Ii(t,e),e.tag=1,ln(r)?(t=!0,Qi(e)):t=!1,Io(e,n),sp(e,r,o),nu(e,r,o,n),su(null,e,r,!0,t,n);case 19:return hp(t,e,n);case 22:return up(t,e,n)}throw Error(B(156,e.tag))};function Np(t,e){return nh(t,e)}function N0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,e,n,r){return new N0(t,e,n,r)}function Sc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function D0(t){if(typeof t=="function")return Sc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fu)return 11;if(t===zu)return 14}return 2}function Ir(t,e){var n=t.alternate;return n===null?(n=kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ui(t,e,n,r,o,s){var i=2;if(r=t,typeof t=="function")Sc(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case So:return to(n.children,o,s,e);case Uu:i=8,o|=8;break;case jl:return t=kn(12,n,e,o|2),t.elementType=jl,t.lanes=s,t;case Cl:return t=kn(13,n,e,o),t.elementType=Cl,t.lanes=s,t;case Rl:return t=kn(19,n,e,o),t.elementType=Rl,t.lanes=s,t;case Bf:return Ea(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case If:i=10;break e;case Mf:i=9;break e;case Fu:i=11;break e;case zu:i=14;break e;case _r:i=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=kn(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function to(t,e,n,r){return t=kn(7,t,r,e),t.lanes=n,t}function Ea(t,e,n,r){return t=kn(22,t,r,e),t.elementType=Bf,t.lanes=n,t.stateNode={isHidden:!1},t}function ul(t,e,n){return t=kn(6,t,null,e),t.lanes=n,t}function cl(t,e,n){return e=kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function A0(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Va(0),this.expirationTimes=Va(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Va(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function _c(t,e,n,r,o,s,i,l,u){return t=new A0(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=kn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ic(s),t}function T0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Dp(t){if(!t)return Br;t=t._reactInternals;e:{if(co(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(ln(n))return Dh(t,n,e)}return e}function Ap(t,e,n,r,o,s,i,l,u){return t=_c(n,r,!0,t,o,s,i,l,u),t.context=Dp(null),n=t.current,r=qt(),o=$r(n),s=dr(r,o),s.callback=e??null,Lr(n,s,o),t.current.lanes=o,Ks(t,o,r),un(t,r),t}function ja(t,e,n,r){var o=e.current,s=qt(),i=$r(o);return n=Dp(n),e.context===null?e.context=n:e.pendingContext=n,e=dr(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(o,e,i),t!==null&&(Fn(t,o,i,s),Li(t,o,i)),i}function ca(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kc(t,e){Bd(t,e),(t=t.alternate)&&Bd(t,e)}function O0(){return null}var Tp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ec(t){this._internalRoot=t}Ca.prototype.render=Ec.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));ja(t,e,null,null)};Ca.prototype.unmount=Ec.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;io(function(){ja(null,t,null,null)}),e[hr]=null}};function Ca(t){this._internalRoot=t}Ca.prototype.unstable_scheduleHydration=function(t){if(t){var e=uh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Er.length&&e!==0&&e<Er[n].priority;n++);Er.splice(n,0,t),n===0&&dh(t)}};function jc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ra(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ud(){}function L0(t,e,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=ca(i);s.call(c)}}var i=Ap(e,r,t,0,null,!1,!1,"",Ud);return t._reactRootContainer=i,t[hr]=i.current,$s(t.nodeType===8?t.parentNode:t),io(),i}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var c=ca(u);l.call(c)}}var u=_c(t,0,!1,null,null,!1,!1,"",Ud);return t._reactRootContainer=u,t[hr]=u.current,$s(t.nodeType===8?t.parentNode:t),io(function(){ja(e,u,n,r)}),u}function Na(t,e,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var l=o;o=function(){var u=ca(i);l.call(u)}}ja(e,i,t,o)}else i=L0(n,e,t,o,r);return ca(i)}ah=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ds(e.pendingLanes);n!==0&&(Gu(e,n|1),un(e,pt()),!(Pe&6)&&(Go=pt()+500,zr()))}break;case 13:io(function(){var r=pr(t,1);if(r!==null){var o=qt();Fn(r,t,1,o)}}),kc(t,1)}};qu=function(t){if(t.tag===13){var e=pr(t,134217728);if(e!==null){var n=qt();Fn(e,t,134217728,n)}kc(t,134217728)}};lh=function(t){if(t.tag===13){var e=$r(t),n=pr(t,e);if(n!==null){var r=qt();Fn(n,t,e,r)}kc(t,e)}};uh=function(){return qe};ch=function(t,e){var n=qe;try{return qe=t,e()}finally{qe=n}};Ml=function(t,e,n){switch(e){case"input":if(Al(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=xa(r);if(!o)throw Error(B(90));Ff(r),Al(r,o)}}}break;case"textarea":Wf(t,n);break;case"select":e=n.value,e!=null&&Oo(t,!!n.multiple,e,!1)}};Yf=xc;Qf=io;var P0={usingClientEntryPoint:!1,Events:[Ys,jo,xa,Kf,Jf,xc]},is={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$0={bundleType:is.bundleType,version:is.version,rendererPackageName:is.rendererPackageName,rendererConfig:is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=eh(t),t===null?null:t.stateNode},findFiberByHostInstance:is.findFiberByHostInstance||O0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xi.isDisabled&&xi.supportsFiber)try{ma=xi.inject($0),Qn=xi}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P0;gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jc(e))throw Error(B(200));return T0(t,e,null,n)};gn.createRoot=function(t,e){if(!jc(t))throw Error(B(299));var n=!1,r="",o=Tp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=_c(t,1,!1,null,null,n,!1,r,o),t[hr]=e.current,$s(t.nodeType===8?t.parentNode:t),new Ec(e)};gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=eh(e),t=t===null?null:t.stateNode,t};gn.flushSync=function(t){return io(t)};gn.hydrate=function(t,e,n){if(!Ra(e))throw Error(B(200));return Na(null,t,e,!0,n)};gn.hydrateRoot=function(t,e,n){if(!jc(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=Tp;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=Ap(e,null,t,1,n??null,o,!1,s,i),t[hr]=e.current,$s(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Ca(e)};gn.render=function(t,e,n){if(!Ra(e))throw Error(B(200));return Na(null,t,e,!1,n)};gn.unmountComponentAtNode=function(t){if(!Ra(t))throw Error(B(40));return t._reactRootContainer?(io(function(){Na(null,null,t,!1,function(){t._reactRootContainer=null,t[hr]=null})}),!0):!1};gn.unstable_batchedUpdates=xc;gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ra(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Na(t,e,n,!1,r)};gn.version="18.3.1-next-f1338f8080-20240426";function Op(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Op)}catch(t){console.error(t)}}Op(),Of.exports=gn;var I0=Of.exports,Fd=I0;kl.createRoot=Fd.createRoot,kl.hydrateRoot=Fd.hydrateRoot;const M0="modulepreload",B0=function(t){return"/"+t},zd={},Xs=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(u=>{if(u=B0(u),u in zd)return;zd[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":M0,c||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},U0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Xs(async()=>{const{default:r}=await Promise.resolve().then(()=>Yo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Cc extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class F0 extends Cc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Wd extends Cc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Vd extends Cc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var yu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(yu||(yu={}));var z0=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class W0{constructor(e,{headers:n={},customFetch:r,region:o=yu.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=U0(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return z0(this,void 0,void 0,function*(){try{const{headers:o,method:s,body:i}=n;let l={},{region:u}=n;u||(u=this.region);const c=new URL(`${this.url}/${e}`);u&&u!=="any"&&(l["x-region"]=u,c.searchParams.set("forceFunctionRegion",u));let d;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const h=yield this.fetch(c.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),o),body:d}).catch(b=>{throw new F0(b)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Wd(h);if(!h.ok)throw new Vd(h);let g=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return g==="application/json"?x=yield h.json():g==="application/octet-stream"?x=yield h.blob():g==="text/event-stream"?x=h:g==="multipart/form-data"?x=yield h.formData():x=yield h.text(),{data:x,error:null,response:h}}catch(o){return{data:null,error:o,response:o instanceof Vd||o instanceof Wd?o.context:void 0}}})}}var on={},Rc={},Da={},Zs={},Aa={},Ta={},V0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},qo=V0();const G0=qo.fetch,Lp=qo.fetch.bind(qo),Pp=qo.Headers,q0=qo.Request,H0=qo.Response,Yo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Pp,Request:q0,Response:H0,default:Lp,fetch:G0},Symbol.toStringTag,{value:"Module"})),K0=dm(Yo);var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});let J0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Oa.default=J0;var $p=jn&&jn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ta,"__esModule",{value:!0});const Y0=$p(K0),Q0=$p(Oa);let X0=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Y0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let o=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var i,l,u,c;let d=null,h=null,f=null,g=s.status,x=s.statusText;if(s.ok){if(this.method!=="HEAD"){const m=await s.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?h=m:h=JSON.parse(m))}const _=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),p=(u=s.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");_&&p&&p.length>1&&(f=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,g=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const _=await s.text();try{d=JSON.parse(_),Array.isArray(d)&&s.status===404&&(h=[],d=null,g=200,x="OK")}catch{s.status===404&&_===""?(g=204,x="No Content"):d={message:_}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,g=200,x="OK"),d&&this.shouldThrowOnError)throw new Q0.default(d)}return{error:d,data:h,count:f,status:g,statusText:x}});return this.shouldThrowOnError||(o=o.catch(s=>{var i,l,u;return{error:{message:`${(i=s==null?void 0:s.name)!==null&&i!==void 0?i:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(u=s==null?void 0:s.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}};Ta.default=X0;var Z0=jn&&jn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Aa,"__esModule",{value:!0});const ey=Z0(Ta);let ty=class extends ey.default{select(e){let n=!1;const r=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:o,referencedTable:s=o}={}){const i=s?`${s}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:o=r}={}){const s=typeof o>"u"?"offset":`${o}.offset`,i=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:o=!1,wal:s=!1,format:i="text"}={}){var l;const u=[e?"analyze":null,n?"verbose":null,r?"settings":null,o?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${u};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Aa.default=ty;var ny=jn&&jn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zs,"__esModule",{value:!0});const ry=ny(Aa);let oy=class extends ry.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:o}={}){let s="";o==="plain"?s="pl":o==="phrase"?s="ph":o==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Zs.default=oy;var sy=jn&&jn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Da,"__esModule",{value:!0});const as=sy(Zs);let iy=class{constructor(e,{headers:n={},schema:r,fetch:o}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=o}select(e,{head:n=!1,count:r}={}){const o=n?"HEAD":"GET";let s=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new as.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var o;const s="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(i.length>0){const l=[...new Set(i)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new as.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:o,defaultToNull:s=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),o&&this.headers.append("Prefer",`count=${o}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new as.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:n}={}){var r;const o="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new as.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new as.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Da.default=iy;var Ip=jn&&jn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rc,"__esModule",{value:!0});const ay=Ip(Da),ly=Ip(Zs);let uy=class Mp{constructor(e,{headers:n={},schema:r,fetch:o}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=o}from(e){const n=new URL(`${this.url}/${e}`);return new ay.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Mp(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:o=!1,count:s}={}){var i;let l;const u=new URL(`${this.url}/rpc/${e}`);let c;r||o?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{u.searchParams.append(h,f)})):(l="POST",c=n);const d=new Headers(this.headers);return s&&d.set("Prefer",`count=${s}`),new ly.default({method:l,url:u,headers:d,schema:this.schemaName,body:c,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};Rc.default=uy;var Qo=jn&&jn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(on,"__esModule",{value:!0});on.PostgrestError=on.PostgrestBuilder=on.PostgrestTransformBuilder=on.PostgrestFilterBuilder=on.PostgrestQueryBuilder=on.PostgrestClient=void 0;const Bp=Qo(Rc);on.PostgrestClient=Bp.default;const Up=Qo(Da);on.PostgrestQueryBuilder=Up.default;const Fp=Qo(Zs);on.PostgrestFilterBuilder=Fp.default;const zp=Qo(Aa);on.PostgrestTransformBuilder=zp.default;const Wp=Qo(Ta);on.PostgrestBuilder=Wp.default;const Vp=Qo(Oa);on.PostgrestError=Vp.default;var cy=on.default={PostgrestClient:Bp.default,PostgrestQueryBuilder:Up.default,PostgrestFilterBuilder:Fp.default,PostgrestTransformBuilder:zp.default,PostgrestBuilder:Wp.default,PostgrestError:Vp.default};const{PostgrestClient:dy,PostgrestQueryBuilder:db,PostgrestFilterBuilder:fb,PostgrestTransformBuilder:hb,PostgrestBuilder:pb,PostgrestError:mb}=cy;class fy{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const hy="2.15.5",py=`realtime-js/${hy}`,my="1.0.0",vu=1e4,gy=1e3,yy=100;var _s;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(_s||(_s={}));var xt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(xt||(xt={}));var In;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(In||(In={}));var xu;(function(t){t.websocket="websocket"})(xu||(xu={}));var Yr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Yr||(Yr={}));class vy{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const o=n.getUint8(1),s=n.getUint8(2);let i=this.HEADER_LENGTH+2;const l=r.decode(e.slice(i,i+o));i=i+o;const u=r.decode(e.slice(i,i+s));i=i+s;const c=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:u,payload:c}}}class Gp{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ze||(Ze={}));const Gd=(t,e,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,i)=>(s[i]=xy(i,t,e,o),s),{})},xy=(t,e,n,r)=>{const o=e.find(l=>l.name===t),s=o==null?void 0:o.type,i=n[t];return s&&!r.includes(s)?qp(s,i):bu(i)},qp=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return _y(e,n)}switch(t){case Ze.bool:return by(e);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return wy(e);case Ze.json:case Ze.jsonb:return Sy(e);case Ze.timestamp:return ky(e);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return bu(e);default:return bu(e)}},bu=t=>t,by=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},wy=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Sy=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},_y=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const i=t.slice(1,n);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(l=>qp(e,l))}return t},ky=t=>typeof t=="string"?t.replace(" ","T"):t,Hp=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class dl{constructor(e,n,r={},o=vu){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var qd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(qd||(qd={}));class ks{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:s,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ks.syncState(this.state,o,s,i),this.pendingDiffs.forEach(u=>{this.state=ks.syncDiff(this.state,u,s,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},o=>{const{onJoin:s,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ks.syncDiff(this.state,o,s,i),l())}),this.onJoin((o,s,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:s,newPresences:i})}),this.onLeave((o,s,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:s,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){const s=this.cloneDeep(e),i=this.transformState(n),l={},u={};return this.map(s,(c,d)=>{i[c]||(u[c]=d)}),this.map(i,(c,d)=>{const h=s[c];if(h){const f=d.map(_=>_.presence_ref),g=h.map(_=>_.presence_ref),x=d.filter(_=>g.indexOf(_.presence_ref)<0),b=h.filter(_=>f.indexOf(_.presence_ref)<0);x.length>0&&(l[c]=x),b.length>0&&(u[c]=b)}else l[c]=d}),this.syncDiff(s,{joins:l,leaves:u},r,o)}static syncDiff(e,n,r,o){const{joins:s,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(s,(l,u)=>{var c;const d=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(u),d.length>0){const h=e[l].map(g=>g.presence_ref),f=d.filter(g=>h.indexOf(g.presence_ref)<0);e[l].unshift(...f)}r(l,d,u)}),this.map(i,(l,u)=>{let c=e[l];if(!c)return;const d=u.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=c,o(l,c,u),c.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const o=e[r];return"metas"in o?n[r]=o.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Hd||(Hd={}));var Es;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Es||(Es={}));var ir;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ir||(ir={}));class Nc{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=xt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new dl(this,In.join,this.params,this.timeout),this.rejoinTimer=new Gp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(In.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new ks(this),this.broadcastEndpointURL=Hp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,o,s;if(this.socket.isConnected()||this.socket.connect(),this.state==xt.closed){const{config:{broadcast:i,presence:l,private:u}}=this.params,c=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&o!==void 0?o:[],d=!!this.bindings[Es.PRESENCE]&&this.bindings[Es.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(ir.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(ir.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var x;if(this.socket.setAuth(),g===void 0){e==null||e(ir.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,_=(x=b==null?void 0:b.length)!==null&&x!==void 0?x:0,p=[];for(let m=0;m<_;m++){const y=b[m],{filter:{event:w,schema:E,table:R,filter:D}}=y,S=g&&g[m];if(S&&S.event===w&&S.schema===E&&S.table===R&&S.filter===D)p.push(Object.assign(Object.assign({},y),{id:S.id}));else{this.unsubscribe(),this.state=xt.errored,e==null||e(ir.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(ir.SUBSCRIBED);return}}).receive("error",g=>{this.state=xt.errored,e==null||e(ir.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ir.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===xt.joined&&e===Es.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:i}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=c.body)===null||o===void 0?void 0:o.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var i,l,u;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=xt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(In.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new dl(this,In.leave,{},e),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const o=new AbortController,s=setTimeout(()=>o.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(s),i}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new dl(this,e,n,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>yy){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,s;const i=e.toLocaleLowerCase(),{close:l,error:u,leave:c,join:d}=In;if(r&&[l,u,c,d].indexOf(i)>=0&&r!==this._joinRef())return;let f=this._onMessage(i,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(g=>{var x,b,_;return((x=g.filter)===null||x===void 0?void 0:x.event)==="*"||((_=(b=g.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===i}).map(g=>g.callback(f,r)):(s=this.bindings[i])===null||s===void 0||s.filter(g=>{var x,b,_,p,m,y;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in g){const w=g.id,E=(x=g.filter)===null||x===void 0?void 0:x.event;return w&&((b=n.ids)===null||b===void 0?void 0:b.includes(w))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const w=(m=(p=g==null?void 0:g.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return w==="*"||w===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===i}).map(g=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:b,table:_,commit_timestamp:p,type:m,errors:y}=x;f=Object.assign(Object.assign({},{schema:b,table:_,commit_timestamp:p,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(x))}g.callback(f,r)})}_isClosed(){return this.state===xt.closed}_isJoined(){return this.state===xt.joined}_isJoining(){return this.state===xt.joining}_isLeaving(){return this.state===xt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const o=e.toLocaleLowerCase(),s={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(s):this.bindings[o]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var s;return!(((s=o.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Nc.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(In.close,{},e)}_onError(e){this._on(In.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Gd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Gd(e.columns,e.old_record)),n}}const fl=()=>{},bi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ey=[1e3,2e3,5e3,1e4],jy=1e4,Cy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ry{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vu,this.transport=null,this.heartbeatIntervalMs=bi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fl,this.ref=0,this.reconnectTimer=null,this.logger=fl,this.conn=null,this.sendBuffer=[],this.serializer=new vy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...i)=>Xs(async()=>{const{default:l}=await Promise.resolve().then(()=>Yo);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...i)=>s(...i)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${xu.websocket}`,this.httpEndpoint=Hp(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fy.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:my}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case _s.connecting:return Yr.Connecting;case _s.open:return Yr.Open;case _s.closing:return Yr.Closing;default:return Yr.Closed}}isConnected(){return this.connectionState()===Yr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(s=>s.topic===r);if(o)return o;{const s=new Nc(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:o,ref:s}=e,i=()=>{this.encode(e,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${n} ${r} (${s})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(gy,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},bi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:s,ref:i}=n,l=i?`(${i})`:"",u=s.status||"";this.log("receive",`${u} ${r} ${o} ${l}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(o,s,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(In.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${r}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Cy],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const o={access_token:n,version:py};n&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(In.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Gp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},bi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,o,s,i,l,u,c,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:vu,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:bi.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:fl,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:h=>Ey[h-1]||jy,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Dc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function bt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Ny extends Dc{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class wu extends Dc{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Dy=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const Kp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Xs(async()=>{const{default:r}=await Promise.resolve().then(()=>Yo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Ay=()=>Dy(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Xs(()=>Promise.resolve().then(()=>Yo),void 0)).Response:Response}),Su=t=>{if(Array.isArray(t))return t.map(n=>Su(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[o]=Su(r)}),e},Ty=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var fo=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const hl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Oy=(t,e,n)=>fo(void 0,void 0,void 0,function*(){const r=yield Ay();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{const s=t.status||500,i=(o==null?void 0:o.statusCode)||s+"";e(new Ny(hl(o),s,i))}).catch(o=>{e(new wu(hl(o),o))}):e(new wu(hl(t),t))}),Ly=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?o:(Ty(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function ei(t,e,n,r,o,s){return fo(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(n,Ly(e,r,o,s)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>i(u)).catch(u=>Oy(u,l,r))})})}function da(t,e,n,r){return fo(this,void 0,void 0,function*(){return ei(t,"GET",e,n,r)})}function Kn(t,e,n,r,o){return fo(this,void 0,void 0,function*(){return ei(t,"POST",e,r,o,n)})}function _u(t,e,n,r,o){return fo(this,void 0,void 0,function*(){return ei(t,"PUT",e,r,o,n)})}function Py(t,e,n,r){return fo(this,void 0,void 0,function*(){return ei(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Jp(t,e,n,r,o){return fo(this,void 0,void 0,function*(){return ei(t,"DELETE",e,r,o,n)})}var Ft=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const $y={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Kd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Iy{constructor(e,n={},r,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Kp(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,o){return Ft(this,void 0,void 0,function*(){try{let s;const i=Object.assign(Object.assign({},Kd),o);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const u=i.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),u&&s.append("metadata",this.encodeMetadata(u)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl),u&&s.append("metadata",this.encodeMetadata(u))):(s=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),o!=null&&o.headers&&(l=Object.assign(Object.assign({},l),o.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),h=yield(e=="PUT"?_u:Kn)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(bt(s))return{data:null,error:s};throw s}})}upload(e,n,r){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return Ft(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",n);try{let u;const c=Object.assign({upsert:Kd.upsert},o),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",c.cacheControl)):(u=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield _u(this.fetch,l.toString(),u,{headers:d});return{data:{path:s,fullPath:h.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(bt(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,n){return Ft(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const s=yield Kn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+s.url),l=i.searchParams.get("token");if(!l)throw new Dc("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Ft(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(bt(o))return{data:null,error:o};throw o}})}copy(e,n,r){return Ft(this,void 0,void 0,function*(){try{return{data:{path:(yield Kn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(bt(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return Ft(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),s=yield Kn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(bt(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return Ft(this,void 0,void 0,function*(){try{const o=yield Kn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${s}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(bt(o))return{data:null,error:o};throw o}})}download(e,n){return Ft(this,void 0,void 0,function*(){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=s?`?${s}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield da(this.fetch,`${this.url}/${o}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(bt(l))return{data:null,error:l};throw l}})}info(e){return Ft(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield da(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Su(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}exists(e){return Ft(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Py(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r)&&r instanceof wu){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),o=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&o.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&o.push(u);let c=o.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return Ft(this,void 0,void 0,function*(){try{return{data:yield Jp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Ft(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},$y),n),{prefix:e||""});return{data:yield Kn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(bt(o))return{data:null,error:o};throw o}})}listV2(e,n){return Ft(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Kn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const My="2.12.1",By={"X-Client-Info":`storage-js/${My}`};var po=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class Uy{constructor(e,n={},r,o){this.shouldThrowOnError=!1;const s=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},By),n),this.fetch=Kp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return po(this,void 0,void 0,function*(){try{return{data:yield da(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(bt(e))return{data:null,error:e};throw e}})}getBucket(e){return po(this,void 0,void 0,function*(){try{return{data:yield da(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return po(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return po(this,void 0,void 0,function*(){try{return{data:yield _u(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return po(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return po(this,void 0,void 0,function*(){try{return{data:yield Jp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}}class Fy extends Uy{constructor(e,n={},r,o){super(e,n,r,o)}from(e){return new Iy(this.url,this.headers,e,this.fetch)}}const zy="2.57.4";let hs="";typeof Deno<"u"?hs="deno":typeof document<"u"?hs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?hs="react-native":hs="node";const Wy={"X-Client-Info":`supabase-js-${hs}/${zy}`},Vy={headers:Wy},Gy={schema:"public"},qy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Hy={};var Ky=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};const Jy=t=>{let e;return t?e=t:typeof fetch>"u"?e=Lp:e=fetch,(...n)=>e(...n)},Yy=()=>typeof Headers>"u"?Pp:Headers,Qy=(t,e,n)=>{const r=Jy(n),o=Yy();return(s,i)=>Ky(void 0,void 0,void 0,function*(){var l;const u=(l=yield e())!==null&&l!==void 0?l:t;let c=new o(i==null?void 0:i.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),r(s,Object.assign(Object.assign({},i),{headers:c}))})};var Xy=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};function Zy(t){return t.endsWith("/")?t:t+"/"}function ev(t,e){var n,r;const{db:o,auth:s,realtime:i,global:l}=t,{db:u,auth:c,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},u),o),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Xy(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function tv(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Zy(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Yp="2.71.1",xo=30*1e3,ku=3,pl=ku*xo,nv="http://localhost:9999",rv="supabase.auth.token",ov={"X-Client-Info":`gotrue-js/${Yp}`},Eu="X-Supabase-Api-Version",Qp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},sv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,iv=10*60*1e3;class Ac extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ke(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class av extends Ac{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function lv(t){return ke(t)&&t.name==="AuthApiError"}class Xp extends Ac{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Wr extends Ac{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}}class Sr extends Wr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uv(t){return ke(t)&&t.name==="AuthSessionMissingError"}class wi extends Wr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Si extends Wr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _i extends Wr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function cv(t){return ke(t)&&t.name==="AuthImplicitGrantRedirectError"}class Jd extends Wr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ju extends Wr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ml(t){return ke(t)&&t.name==="AuthRetryableFetchError"}class Yd extends Wr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Cu extends Wr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const fa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qd=` 	
\r=`.split(""),dv=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Qd.length;e+=1)t[Qd[e].charCodeAt(0)]=-2;for(let e=0;e<fa.length;e+=1)t[fa[e].charCodeAt(0)]=e;return t})();function Xd(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(fa[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(fa[r]),e.queuedBits-=6}}function Zp(t,e,n){const r=dv[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Zd(t){const e=[],n=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},s=i=>{pv(i,r,n)};for(let i=0;i<t.length;i+=1)Zp(t.charCodeAt(i),o,s);return e.join("")}function fv(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function hv(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}fv(r,e)}}function pv(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function mv(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)Zp(t.charCodeAt(o),n,r);return new Uint8Array(e)}function gv(t){const e=[];return hv(t,n=>e.push(n)),new Uint8Array(e)}function yv(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};return t.forEach(o=>Xd(o,n,r)),Xd(null,n,r),e.join("")}function vv(t){return Math.round(Date.now()/1e3)+t}function xv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ln=()=>typeof window<"u"&&typeof document<"u",Gr={tested:!1,writable:!1},em=()=>{if(!Ln())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Gr.tested)return Gr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Gr.tested=!0,Gr.writable=!0}catch{Gr.tested=!0,Gr.writable=!1}return Gr.writable};function bv(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,s)=>{e[s]=o})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}const tm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Xs(async()=>{const{default:r}=await Promise.resolve().then(()=>Yo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},wv=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",bo=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},qr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},br=async(t,e)=>{await t.removeItem(e)};class La{constructor(){this.promise=new La.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}La.promiseConstructor=Promise;function gl(t){const e=t.split(".");if(e.length!==3)throw new Cu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!sv.test(e[r]))throw new Cu("JWT not in base64url format");return{header:JSON.parse(Zd(e[0])),payload:JSON.parse(Zd(e[1])),signature:mv(e[2]),raw:{header:e[0],payload:e[1]}}}async function Sv(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function _v(t,e){return new Promise((r,o)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await t(s);if(!e(s,null,i)){r(i);return}}catch(i){if(!e(s,i)){o(i);return}}})()})}function kv(t){return("0"+t.toString(16)).substr(-2)}function Ev(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let s=0;s<56;s++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,kv).join("")}async function jv(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(s=>String.fromCharCode(s)).join("")}async function Cv(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await jv(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mo(t,e,n=!1){const r=Ev();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await bo(t,`${e}-code-verifier`,o);const s=await Cv(r);return[s,r===s?"plain":"s256"]}const Rv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Nv(t){const e=t.headers.get(Eu);if(!e||!e.match(Rv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Dv(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Av(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Tv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function go(t){if(!Tv.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yl(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ef(t){return JSON.parse(JSON.stringify(t))}var Ov=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Jr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Lv=[502,503,504];async function tf(t){var e;if(!wv(t))throw new ju(Jr(t),0);if(Lv.includes(t.status))throw new ju(Jr(t),t.status);let n;try{n=await t.json()}catch(s){throw new Xp(Jr(s),s)}let r;const o=Nv(t);if(o&&o.getTime()>=Qp["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Yd(Jr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Sr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0))throw new Yd(Jr(n),t.status,n.weak_password.reasons);throw new av(Jr(n),t.status||500,r)}const Pv=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function Ne(t,e,n,r){var o;const s=Object.assign({},r==null?void 0:r.headers);s[Eu]||(s[Eu]=Qp["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const i=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",u=await $v(t,e,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function $v(t,e,n,r,o,s){const i=Pv(e,r,o,s);let l;try{l=await t(n,Object.assign({},i))}catch(u){throw console.error(u),new ju(Jr(u),0)}if(l.ok||await tf(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(u){await tf(u)}}function or(t){var e;let n=null;Uv(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=vv(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function nf(t){const e=or(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Cr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Iv(t){return{data:t,error:null}}function Mv(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s}=t,i=Ov(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s},u=Object.assign({},i);return{data:{properties:l,user:u},error:null}}function Bv(t){return t}function Uv(t){return t.access_token&&t.refresh_token&&t.expires_in}const vl=["global","local","others"];var Fv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};class zv{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=tm(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=vl[0]){if(vl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vl.join(", ")}`);try{return await Ne(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Cr})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Fv(e,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await Ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Mv,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ke(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Cr})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,o,s,i,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await Ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:Bv});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,g=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return g.length>0&&(g.forEach(x=>{const b=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(x.split(";")[1].split("=")[1]);c[`${_}Page`]=b}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(ke(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){go(e);try{return await Ne(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Cr})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){go(e);try{return await Ne(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Cr})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){go(e);try{return await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Cr})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){go(e.userId);try{const{data:n,error:r}=await Ne(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _deleteFactor(e){go(e.userId),go(e.id);try{return{data:await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}}}function rf(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Wv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const yo={debug:!!(globalThis&&em()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Vv extends nm{}async function Gv(t,e,n){yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),yo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Vv(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(yo.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Wv();const qv={url:nv,storageKey:rv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ov,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function of(t,e,n){return await n()}const vo={};class Gs{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Gs.nextInstanceID,Gs.nextInstanceID+=1,this.instanceID>0&&Ln()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},qv),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new zv({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=tm(o.fetch),this.lock=o.lock||of,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Ln()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Gv:this.lock=of,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:em()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rf(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=rf(this.memoryStorage)),Ln()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=vo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){vo[this.storageKey]=Object.assign(Object.assign({},vo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=vo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){vo[this.storageKey]=Object.assign(Object.assign({},vo[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Yp}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=bv(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Ln()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),cv(s)){const u=(e=s.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ke(n)?{error:n}:{error:new Xp("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,o;try{const s=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:or}),{data:i,error:l}=s;if(l||!i)return{data:{user:null,session:null},error:l};const u=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(ke(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,o;try{let s;if("email"in e){const{email:d,password:h,options:f}=e;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await mo(this.storage,this.storageKey)),s=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:x},xform:or})}else if("phone"in e){const{phone:d,password:h,options:f}=e;s=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(o=f==null?void 0:f.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:or})}else throw new Si("You must provide either an email or phone number and a password");const{data:i,error:l}=s;if(l||!i)return{data:{user:null,session:null},error:l};const u=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(ke(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:i,options:l}=e;n=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:nf})}else if("phone"in e){const{phone:s,password:i,options:l}=e;n=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:nf})}else throw new Si("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new wi}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,o,s,i,l,u,c,d,h,f,g;let x,b;if("message"in e)x=e.message,b=e.signature;else{const{chain:_,wallet:p,statement:m,options:y}=e;let w;if(Ln())if(typeof p=="object")w=p;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))w=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=p}const E=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const R=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),m?{statement:m}:null));let D;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")D=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)D=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)x=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),b=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${E.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(o=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=y==null?void 0:y.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const R=await w.signMessage(new TextEncoder().encode(x),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=R}}try{const{data:_,error:p}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:yv(b)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:or});if(p)throw p;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new wi}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:p})}catch(_){if(ke(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const n=await qr(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/");try{const{data:s,error:i}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:or});if(await br(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new wi}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:i})}catch(s){if(ke(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:o,access_token:s,nonce:i}=e,l=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:or}),{data:u,error:c}=l;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new wi}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(n){if(ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,o,s,i;try{if("email"in e){const{email:l,options:u}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await mo(this.storage,this.storageKey));const{error:h}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:u}=e,{data:c,error:d}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=u==null?void 0:u.data)!==null&&o!==void 0?o:{},create_user:(s=u==null?void 0:u.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(i=u==null?void 0:u.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new Si("You must provide either an email or phone number.")}catch(l){if(ke(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let o,s;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await Ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:or});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const u=i.session,c=i.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(o){if(ke(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,r,o;try{let s=null,i=null;return this.flowType==="pkce"&&([s,i]=await mo(this.storage,this.storageKey)),await Ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:Iv})}catch(s){if(ke(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Sr;const{error:o}=await Ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(ke(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:s}=e,{error:i}=await Ne(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:o,options:s}=e,{data:i,error:l}=await Ne(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Si("You must provide either an email or phone number and a type")}catch(n){if(ke(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await qr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<pl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const i=await qr(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=yl()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,c,d)=>(!i&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:e},error:null}}const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Cr}):await this._useSession(async n=>{var r,o,s;const{data:i,error:l}=n;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Sr}:await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:Cr})})}catch(n){if(ke(n))return uv(n)&&(await this._removeSession(),await br(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:o,error:s}=r;if(s)throw s;if(!o.session)throw new Sr;const i=o.session;let l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=await mo(this.storage,this.storageKey));const{data:c,error:d}=await Ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:i.access_token,xform:Cr});if(d)throw d;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Sr;const n=Date.now()/1e3;let r=n,o=!0,s=null;const{payload:i}=gl(e.access_token);if(i.exp&&(r=i.exp,o=r<=n),o){const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:u}=await this._getUser(e.access_token);if(u)throw u;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(ke(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:i,error:l}=n;if(l)throw l;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Sr;const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ke(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Ln())throw new _i("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _i(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Jd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _i("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Jd("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:s,refresh_token:i,expires_in:l,expires_at:u,token_type:c}=e;if(!s||!l||!i||!c)throw new _i("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;u&&(f=parseInt(u));const g=f-d;g*1e3<=xo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const x=f-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,d);const{data:b,error:_}=await this._getUser(s);if(_)throw _;const p={provider_token:r,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:i,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(r){if(ke(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await qr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:s}=n;if(s)return{error:s};const i=(r=o.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(lv(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await br(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=xv(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,o;try{const{data:{session:s},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await mo(this.storage,this.storageKey,!0));try{return await Ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(ke(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:o}=await this._useSession(async s=>{var i,l,u,c,d;const{data:h,error:f}=s;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Ne(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return Ln()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ke(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,o;const{data:s,error:i}=n;if(i)throw i;return await Ne(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await _v(async o=>(o>0&&await Sv(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await Ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:or})),(o,s)=>{const i=200*Math.pow(2,o);return s&&ml(s)&&Date.now()+i-r<xo})}catch(r){if(this._debug(n,"error",r),ke(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ln()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await qr(this.storage,this.storageKey);if(o&&this.userStorage){let i=await qr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:o.user},await bo(this.userStorage,this.storageKey+"-user",i)),o.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:yl()}else if(o&&!o.user&&!o.user){const i=await qr(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(o.user=i.user,await br(this.storage,this.storageKey+"-user"),await bo(this.storage,this.storageKey,o)):o.user=yl()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const s=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<pl;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${pl}s`),s){if(this.autoRefreshToken&&o.refresh_token){const{error:i}=await this._callRefreshToken(o.refresh_token);i&&(console.error(i),ml(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(o.access_token);!l&&(i!=null&&i.user)?(o.user=i.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Sr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new La;const{data:s,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new Sr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(o,"error",s),ke(s)){const i={session:null,error:s};return ml(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(u){s.push(u)}});if(await Promise.all(i),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await bo(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const s=ef(o);await bo(this.storage,this.storageKey,s)}else{const o=ef(n);await bo(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await br(this.storage,this.storageKey),await br(this.storage,this.storageKey+"-code-verifier"),await br(this.storage,this.storageKey+"-user"),this.userStorage&&await br(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ln()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),xo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/xo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${xo}ms, refresh threshold is ${ku} ticks`),o<=ku&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof nm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ln()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,i]=await mo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);o.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;return s?{data:null,error:s}:await Ne(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,o;const{data:s,error:i}=n;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:c}=await Ne(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((o=u==null?void 0:u.totp)===null||o===void 0)&&o.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;if(s)return{data:null,error:s};const{data:i,error:l}=await Ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(n){if(ke(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;return s?{data:null,error:s}:await Ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ke(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],o=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),s=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:o,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=gl(o.access_token);let l=null;i.aal&&(l=i.aal);let u=l;((r=(n=o.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+iv>o)return r;const{data:s,error:i}=await Ne(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,r=s.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:x}=await this.getSession();if(x||!g.session)return{data:null,error:x};r=g.session.access_token}const{header:o,payload:s,signature:i,raw:{header:l,payload:u}}=gl(r);n!=null&&n.allowExpired||Dv(s.exp);const c=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:o,signature:i},error:null}}const d=Av(o.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,gv(`${l}.${u}`)))throw new Cu("Invalid JWT signature");return{data:{claims:s,header:o,signature:i},error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}}}Gs.nextInstanceID=0;const Hv=Gs;class Kv extends Hv{constructor(e){super(e)}}var Jv=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(h){i(h)}}function u(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):o(d.value).then(l,u)}c((r=r.apply(t,e||[])).next())})};class Yv{constructor(e,n,r){var o,s,i;this.supabaseUrl=e,this.supabaseKey=n;const l=tv(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:Gy,realtime:Hy,auth:Object.assign(Object.assign({},qy),{storageKey:u}),global:Vy},d=ev(r??{},c);this.storageKey=(o=d.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=Qy(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new dy(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Fy(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new W0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Jv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:s,storageKey:i,flowType:l,lock:u,debug:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Kv({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:s,flowType:l,lock:u,debug:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Ry(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Qv=(t,e,n)=>new Yv(t,e,n);function Xv(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Xv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Zv="https://wjylzxsfevdlhqunvfqc.supabase.co",ex="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndqeWx6eHNmZXZkbGhxdW52ZnFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2ODMwOTEsImV4cCI6MjA3NDI1OTA5MX0.SuB0gd7-gefwpUHFnKsupDgo8P2VeLuMbdlsU6AMrLw",sf=globalThis,Te=sf.__sg_supabase||(sf.__sg_supabase=Qv(Zv,ex,{auth:{persistSession:!0,autoRefreshToken:!0,storageKey:"salesgame-auth"},realtime:{params:{eventsPerSecond:10}}}));function tx(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function qs(){const t="sg_tab_player_id";let e=sessionStorage.getItem(t);return e||(e=tx(),sessionStorage.setItem(t,e)),e}function ao(t="Jogador"){const e="sg_tab_player_name";let n=sessionStorage.getItem(e);return n||(n=t,sessionStorage.setItem(e,n)),n}function nx(t){return sessionStorage.setItem("sg_tab_player_name",t??"Jogador"),t}const rx="/dynamic-data-visualization-3d.jpg",ox="/SalesGame_Logo-removebg-preview.png",sx="/Multiplier-Copia.png",ix="/WhatsApp_Image_2025-06-24_at_16.47.00-removebg-preview.png";function ax({onEnter:t}){const[e,n]=k.useState(ao("")),r=k.useRef(null);k.useEffect(()=>{var i;(i=r.current)==null||i.focus()},[]);function o(){const i=(e||"").trim();i&&(nx(i),t==null||t(i))}function s(i){i.key==="Enter"&&o()}return a.jsxs("div",{className:"start",children:[a.jsx("img",{className:"startBg",src:rx,alt:""}),a.jsx("div",{className:"startShade"}),a.jsx("div",{className:"startHeader",children:a.jsx("img",{className:"startLogo",src:ox,alt:"Sales GAME"})}),a.jsx("div",{className:"startCenter",children:a.jsxs("div",{className:"startCard",children:[a.jsx("label",{className:"startLabel",htmlFor:"playerName",children:"Nome do Jogador"}),a.jsx("input",{id:"playerName",ref:r,className:"startInput",placeholder:"Digite seu nome",value:e,onChange:i=>n(i.target.value),onKeyDown:s,maxLength:30}),a.jsx("button",{className:"startBtn",onClick:o,children:"Entrar"})]})}),a.jsxs("div",{className:"startFooter",children:[a.jsxs("div",{className:"startLinks",children:[a.jsx("div",{children:"@multiplier.educacao"}),a.jsx("div",{children:"https://multipliereducacao.com.br/"})]}),a.jsx("div",{className:"startBrand",children:a.jsx("img",{className:"startBrandLogo",src:sx,alt:"Multiplier"})})]}),a.jsx("img",{className:"startCoach",src:ix,alt:"",draggable:"false"})]})}async function lx(){const{data:t,error:e}=await Te.from("lobbies").select(`
      id,
      name,
      max_players,
      status,
      created_at,
      lobby_players!left(count)
    `).order("created_at",{ascending:!0});if(e)throw e;return(t||[]).map(n=>{var r,o;return{id:n.id,name:n.name,max:n.max_players,status:n.status||"open",players:(((o=(r=n.lobby_players)==null?void 0:r[0])==null?void 0:o.count)??0)|0}})}function ux(t){const e=Te.channel("lobbies-list").on("postgres_changes",{event:"*",schema:"public",table:"lobbies"},()=>t==null?void 0:t()).on("postgres_changes",{event:"*",schema:"public",table:"lobby_players"},()=>t==null?void 0:t()).subscribe();return()=>Te.removeChannel(e)}async function cx({name:t,hostId:e,max:n=4}){if(!e)throw new Error("hostId obrigatrio em createLobby");const o={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,name:t,host_id:e,max_players:Number(n)||4,status:"open",created_at:new Date().toISOString()},{data:s,error:i}=await Te.from("lobbies").insert(o).select("id").single();if(i)throw i;return s.id}async function Ru({lobbyId:t,playerId:e,playerName:n,ready:r=!1}){const{data:o,error:s}=await Te.from("lobbies").select("id, max_players, status, host_id").eq("id",t).single();if(s)throw s;if(o.status!=="open")throw new Error("Sala fechada.");const{count:i,error:l}=await Te.from("lobby_players").select("lobby_id",{count:"exact",head:!0}).eq("lobby_id",t);if(l)throw l;if((i||0)>=o.max_players)throw new Error("Sala cheia.");try{window.__MY_UID=e}catch{}const{error:u}=await Te.from("lobby_players").upsert({lobby_id:t,player_id:e,player_name:n,ready:!!r,joined_at:new Date().toISOString()},{onConflict:"lobby_id,player_id"});if(u)throw u;o.host_id||await Te.from("lobbies").update({host_id:e}).eq("id",t)}async function af({lobbyId:t,playerId:e}){var l;const{data:n,error:r}=await Te.from("lobbies").select("id, host_id").eq("id",t).single();if(r)throw r;const{error:o}=await Te.from("lobby_players").delete().match({lobby_id:t,player_id:e});if(o)throw o;const{data:s,error:i}=await Te.from("lobby_players").select("player_id, joined_at").eq("lobby_id",t).order("joined_at",{ascending:!0});if(i)throw i;if(!s||s.length===0){await Te.from("lobbies").delete().eq("id",t);return}if((n==null?void 0:n.host_id)===e){const u=(l=s[0])==null?void 0:l.player_id;u&&await Te.from("lobbies").update({host_id:u}).eq("id",t)}}async function lf(t){const{data:e,error:n}=await Te.from("lobby_players").select("player_id, player_name, ready, joined_at").eq("lobby_id",t).order("joined_at",{ascending:!0});if(n)throw n;return e||[]}async function dx({lobbyId:t,playerId:e,ready:n}){const{error:r}=await Te.from("lobby_players").update({ready:n}).match({lobby_id:t,player_id:e});if(r)throw r}async function fx(t,e,n){return dx({lobbyId:t,playerId:e,ready:n})}async function hx({lobbyId:t,playerId:e,playerName:n}){const{error:r}=await Te.from("lobby_players").update({player_name:n}).match({lobby_id:t,player_id:e});if(r)throw r}async function uf(t,e){const{error:n}=await Te.from("lobbies").update({status:e}).eq("id",t);if(n)throw n}function px(t,e){let n=0;const r=()=>{n&&cancelAnimationFrame(n),n=requestAnimationFrame(()=>e==null?void 0:e())},o=Te.channel(`lobby-${t}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},s=>{console.debug("[rt] lobby_players:INSERT",s.new),r()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},s=>{console.debug("[rt] lobby_players:UPDATE",s.new),r()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"lobby_players",filter:`lobby_id=eq.${t}`},s=>{console.debug("[rt] lobby_players:DELETE",s.old),r()}).on("postgres_changes",{event:"*",schema:"public",table:"lobbies",filter:`id=eq.${t}`},s=>{console.debug("[rt] lobbies:*",s.new||s.old),r()}).subscribe();return()=>{n&&cancelAnimationFrame(n),Te.removeChannel(o)}}async function mx(t){const{data:e,error:n}=await Te.from("lobbies").select("id,name,status,max_players,host_id,created_at").eq("id",t).single();if(n)throw n;return e}async function gx({lobbyId:t}){var o;const{data:e}=await Te.from("lobby_players").select("player_id, player_name, ready").eq("lobby_id",t),{data:n,error:r}=await Te.from("matches").insert({lobby_id:t,host_id:((o=e==null?void 0:e[0])==null?void 0:o.player_id)||null,state:{players:e},created_at:new Date().toISOString()}).select("id").single();if(r)throw r;return n}async function yx(t){const{data:e,error:n}=await Te.from("matches").select("id, lobby_id, created_at").eq("lobby_id",t).order("created_at",{ascending:!1}).limit(1);if(n)throw n;return(e==null?void 0:e[0])||null}async function xl({roomCode:t,playerId:e}){if(!t||!e){console.log("[leaveRoom] Parmetros invlidos:",{roomCode:t,playerId:e});return}try{console.log(`[leaveRoom] Tentando remover jogador ${e} da sala ${t}`);const{data:n,error:r}=await Te.from("lobbies").select("id, name, host_id").eq("id",t).single();if(r){console.warn("[leaveRoom] Erro ao buscar lobby:",r);return}if(!n){console.log(`[leaveRoom] Lobby ${t} no encontrado`);return}console.log("[leaveRoom] Lobby encontrado:",n);const{error:o}=await Te.from("lobby_players").delete().match({lobby_id:t,player_id:e});o?console.warn("[leaveRoom] Erro ao remover jogador:",o):console.log(`[leaveRoom] Jogador ${e} removido do lobby ${t}`);const{data:s,error:i}=await Te.from("lobby_players").select("player_id").eq("lobby_id",t);if(i){console.warn("[leaveRoom] Erro ao contar jogadores restantes:",i);return}if(!s||s.length===0){const{error:l}=await Te.from("lobbies").delete().eq("id",t);l?console.warn("[leaveRoom] Erro ao deletar lobby vazio:",l):console.log(`[leaveRoom] Lobby ${t} deletado com sucesso (sem jogadores)`)}else if(console.log(`[leaveRoom] Jogador ${e} saiu do lobby ${t}. Restam ${s.length} jogadores.`),n.host_id===e&&s.length>0){const l=s[0].player_id,{error:u}=await Te.from("lobbies").update({host_id:l}).eq("id",t);u?console.warn("[leaveRoom] Erro ao transferir host:",u):console.log(`[leaveRoom] Host transferido para ${l}`)}}catch(n){console.error("[leaveRoom] Erro inesperado:",n)}}function vx({onEnterRoom:t}){const[e,n]=k.useState([]),[r,o]=k.useState(!1);async function s(){o(!0);try{const c=await lx();n(c)}finally{o(!1)}}k.useEffect(()=>(s(),ux(()=>s())),[]);async function i(){const c=ao("Jogador"),d=`Sala de ${c}`,h=prompt("Nome do lobby:",d)||d,f=qs();try{const g=await cx({name:h,hostId:f,max:4});await Ru({lobbyId:g,playerId:f,playerName:c,ready:!1}),t==null||t(g)}catch(g){alert(g.message||"No foi possvel criar o lobby."),await s()}}async function l(c){try{const d=ao("Jogador"),h=qs();await Ru({lobbyId:c,playerId:h,playerName:d,ready:!1}),t==null||t(c)}catch(d){alert(d.message||"No foi possvel entrar no lobby.")}}const u={page:{minHeight:"100vh",background:"#0f0f12",color:"#e9ecf1",padding:"32px 16px",display:"flex",justifyContent:"center"},container:{width:"100%",maxWidth:980},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:16,marginBottom:16,flexWrap:"wrap"},title:{fontSize:28,fontWeight:800,color:"#fff"},actions:{display:"flex",gap:10},btn:{padding:"12px 16px",border:0,borderRadius:12,fontWeight:800,cursor:"pointer"},btnPrimary:{background:"#4f46e5",color:"#fff",boxShadow:"0 8px 24px rgba(79,70,229,.25)"},btnSecondary:{background:"#20222a",color:"#fff",border:"1px solid #2b2e38"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:14},card:{background:"linear-gradient(180deg, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0.00) 100%)",border:"1px solid rgba(255,255,255,.08)",borderRadius:16,padding:16,display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 20px rgba(0,0,0,.25)"},cardHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},lobbyName:{fontSize:18,fontWeight:800,color:"#fff",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},meta:{fontSize:13,color:"#b8c0cc"},joinBtn:{padding:"10px 14px",borderRadius:10,border:0,background:"#7c3aed",color:"#fff",fontWeight:800,cursor:"pointer",boxShadow:"0 10px 20px rgba(124,58,237,.25)"},disabled:{opacity:.6,cursor:"not-allowed",filter:"grayscale(.3)"},empty:{marginTop:24,padding:18,borderRadius:12,border:"1px dashed rgba(255,255,255,.12)",color:"#c7cfdb",textAlign:"center"}};return a.jsx("div",{style:u.page,children:a.jsxs("div",{style:u.container,children:[a.jsxs("div",{style:u.headerRow,children:[a.jsx("h2",{style:u.title,children:"SalesGame  Lobbies"}),a.jsxs("div",{style:u.actions,children:[a.jsx("button",{style:{...u.btn,...u.btnPrimary},onClick:i,children:"Criar Lobby"}),a.jsx("button",{style:{...u.btn,...u.btnSecondary},onClick:s,disabled:r,children:r?"Atualizando":"Atualizar"})]})]}),e.length===0&&!r?a.jsxs("div",{style:u.empty,children:["Nenhuma sala criada ainda. Clique em ",a.jsx("b",{children:"Criar Lobby"})," para comear."]}):a.jsx("div",{style:u.grid,children:e.map(c=>{const d=(c.players??0)>=(c.max??4),h=(c.status??"open")==="open",f=d||!h;return a.jsxs("div",{style:u.card,children:[a.jsxs("div",{style:u.cardHeader,children:[a.jsx("div",{style:u.lobbyName,title:c.name,children:c.name}),a.jsxs("span",{style:u.meta,children:[c.players??0,"/",c.max??4]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("span",{style:u.meta,children:["status: ",c.status??"open"]}),a.jsx("button",{style:{...u.joinBtn,...f?u.disabled:{}},disabled:f,onClick:()=>l(c.id),title:f?d?"Sala cheia":"Sala no est aberta":"Entrar na sala",children:"Entrar"})]})]},c.id)})})]})})}function xx({lobbyId:t,onBack:e,onStartGame:n}){const r=qs(),o=ao("Jogador"),[s,i]=k.useState(null),[l,u]=k.useState([]),[c,d]=k.useState(!0),[h,f]=k.useState(!1),g=k.useRef(!1),x=k.useRef(!0),b=k.useRef(!1),_=k.useRef(!1),p=k.useMemo(()=>(s==null?void 0:s.host_id)===r,[s,r]),m=k.useMemo(()=>l.find(v=>v.player_id===r),[l,r]),y=k.useMemo(()=>l.filter(v=>v.ready).length,[l]),w=p&&(s==null?void 0:s.status)==="open"&&l.length>=1&&y===l.length;console.log("[PlayersLobby] Debug:",{players:l.length,readyCount:y,lobbyStatus:s==null?void 0:s.status,amHost:p,canStart:w,meId:r,meName:o});async function E(v){if(_.current)return;const A=await yx(t);if(A!=null&&A.id){_.current=!0;const O=(v||[]).map((I,F)=>({id:I.player_id,name:I.player_name,index:F}));n==null||n({lobbyId:t,matchId:A==null?void 0:A.id,players:O,me:{id:r,name:o}})}}async function R(){x.current&&d(!0);try{console.log("[PlayersLobby] refreshAll - buscando lobby:",t);const[v,A]=await Promise.all([mx(t),lf(t)]);console.log("[PlayersLobby] refreshAll - lobby:",v,"players:",A),i(v),u(A);const O=A.find(I=>I.player_id===r);if(console.log("[PlayersLobby] refreshAll - mine:",O,"meId:",r),!O&&!g.current&&(v==null?void 0:v.status)==="open"){console.log("[PlayersLobby] refreshAll - entrando na sala"),g.current=!0;try{await Ru({lobbyId:t,playerId:r,playerName:o,ready:!1}),console.log("[PlayersLobby] refreshAll - entrada na sala bem-sucedida");const I=await lf(t);console.log("[PlayersLobby] refreshAll - jogadores aps entrada:",I),u(I)}catch(I){console.error("[PlayersLobby] refreshAll - erro ao entrar na sala:",I)}}if(O&&!b.current&&o&&O.player_name!==o){console.log("[PlayersLobby] refreshAll - sincronizando nome"),b.current=!0;try{await hx({lobbyId:t,playerId:r,playerName:o})}catch{}}await E(A)}catch(v){console.error("[PlayersLobby] refreshAll - erro:",v)}finally{x.current&&(x.current=!1,d(!1))}}k.useEffect(()=>{const v=()=>{af({lobbyId:t,playerId:r}).catch(()=>{})},A=()=>v();return window.addEventListener("pagehide",A),window.addEventListener("beforeunload",A),()=>{window.removeEventListener("pagehide",A),window.removeEventListener("beforeunload",A)}},[t,r]),k.useEffect(()=>(g.current=!1,x.current=!0,b.current=!1,_.current=!1,R(),px(t,()=>R())),[t]);async function D(v){if(!m)return;f(!0);const A=m.ready;u(O=>O.map(I=>I.player_id===r?{...I,ready:v}:I));try{await fx(t,r,v)}catch(O){u(I=>I.map(F=>F.player_id===r?{...F,ready:A}:F)),console.error("setReadyUI failed",O)}finally{f(!1)}}async function S(){try{await af({lobbyId:t,playerId:r})}finally{e==null||e()}}async function T(){if(!w)return;const v=s==null?void 0:s.status;await uf(t,"locked");try{const A=await gx({lobbyId:t});_.current=!0;const O=l.map((I,F)=>({id:I.player_id,name:I.player_name,index:F}));n==null||n({lobbyId:t,matchId:A==null?void 0:A.id,players:O,me:{id:r,name:o}})}catch(A){console.error("startMatch failed",A),await uf(t,v||"open")}}return a.jsx("div",{style:Be.page,children:a.jsxs("div",{style:Be.container,children:[a.jsxs("div",{style:Be.top,children:[a.jsx("button",{style:Be.backBtn,onClick:S,children:" Voltar"}),a.jsxs("h2",{style:Be.title,children:["SalesGame  ",(s==null?void 0:s.name)||"..."]})]}),a.jsxs("div",{style:Be.table,children:[a.jsxs("div",{style:Be.thead,children:[a.jsx("div",{style:Be.colPlayer,children:"Jogador"}),a.jsx("div",{style:Be.colReady,children:"Pronto?"})]}),c?a.jsx("div",{style:Be.loading,children:"Carregando..."}):l.map(v=>a.jsxs("div",{style:Be.row,children:[a.jsxs("div",{style:Be.colPlayer,children:[a.jsx("span",{style:Be.avatar,children:(v.player_name||"?").slice(0,2).toLowerCase()}),a.jsx("span",{children:v.player_name||"Annimo"}),(s==null?void 0:s.host_id)===v.player_id&&a.jsx("span",{style:Be.badgeHost,children:"Host"}),v.player_id===r&&a.jsx("span",{style:Be.badgeYou,children:"Voc"})]}),a.jsx("div",{style:Be.colReady,children:v.player_id===r?a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{style:{...Be.btn,...m!=null&&m.ready?Be.btnGhost:Be.btnDark},onClick:()=>D(!1),disabled:h||!(m!=null&&m.ready),children:"No pronto"}),a.jsxs("button",{style:{...Be.btn,...m!=null&&m.ready?Be.btnPrimary:Be.btnPurple},onClick:()=>D(!0),disabled:h||!!(m!=null&&m.ready),children:[" ",m!=null&&m.ready?"Pronto":"Ficar pronto"]})]}):a.jsx("span",{style:v.ready?Be.pillReady:Be.pillWait,children:v.ready?"Pronto":"Aguardando"})})]},v.player_id))]}),a.jsxs("div",{style:Be.footer,children:[a.jsxs("div",{style:Be.statusWrap,children:[a.jsx("span",{style:{...Be.dot,background:(s==null?void 0:s.status)==="open"?"#22c55e":"#f59e0b"}}),a.jsxs("span",{children:["status: ",(s==null?void 0:s.status)||"..."]}),a.jsxs("span",{style:{marginLeft:12},children:["Prontos: ",y,"/",l.length]})]}),a.jsxs("div",{style:{display:"flex",gap:12},children:[a.jsx("button",{style:{...Be.btn,...w?Be.btnPrimary:Be.disabled},onClick:T,disabled:!w,children:"Iniciar partida"}),a.jsx("button",{style:{...Be.btn,...Be.btnDark},onClick:S,children:"Sair da sala"})]})]})]})})}const Be={page:{minHeight:"100vh",background:"#0f0f12",color:"#e9ecf1",padding:"24px 16px",display:"flex",justifyContent:"center"},container:{width:"100%",maxWidth:980},top:{display:"flex",alignItems:"center",gap:12,marginBottom:16},backBtn:{padding:"10px 14px",background:"#20222a",border:"1px solid #2b2e38",borderRadius:12,color:"#fff",cursor:"pointer"},title:{margin:0,fontSize:28,fontWeight:800},table:{background:"rgba(255,255,255,.02)",border:"1px solid rgba(255,255,255,.08)",borderRadius:16,overflow:"hidden"},thead:{display:"grid",gridTemplateColumns:"1fr 220px",padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,.08)",color:"#c7cfdb"},row:{display:"grid",gridTemplateColumns:"1fr 220px",padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,.06)"},colPlayer:{display:"flex",alignItems:"center",gap:10,minWidth:0},colReady:{display:"flex",alignItems:"center",justifyContent:"flex-end"},avatar:{width:28,height:28,borderRadius:999,background:"#1f2430",display:"grid",placeItems:"center",color:"#c7cfdb",fontSize:12,textTransform:"lowercase"},badgeHost:{marginLeft:8,fontSize:12,background:"#fde68a",color:"#111827",padding:"2px 8px",borderRadius:999,fontWeight:800},badgeYou:{marginLeft:8,fontSize:12,background:"#bfdbfe",color:"#111827",padding:"2px 8px",borderRadius:999,fontWeight:800},loading:{padding:16,color:"#c7cfdb"},pillReady:{background:"rgba(34,197,94,.15)",color:"#22c55e",padding:"6px 10px",borderRadius:999,fontWeight:700},pillWait:{background:"rgba(245,158,11,.14)",color:"#f59e0b",padding:"6px 10px",borderRadius:999,fontWeight:700},footer:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:16},statusWrap:{display:"flex",alignItems:"center",gap:6,color:"#c7cfdb"},dot:{width:8,height:8,borderRadius:"50%"},btn:{padding:"12px 16px",border:0,borderRadius:12,fontWeight:800,cursor:"pointer"},btnPrimary:{background:"#4f46e5",color:"#fff",boxShadow:"0 8px 24px rgba(79,70,229,.25)"},btnPurple:{background:"#7c3aed",color:"#fff"},btnDark:{background:"#20222a",color:"#fff",border:"1px solid #2b2e38"},btnGhost:{background:"transparent",color:"#e9ecf1",border:"1px solid rgba(255,255,255,.15)"},disabled:{opacity:.5,cursor:"not-allowed",filter:"grayscale(.25)"}},bx="/board.jpg",Nu=800,Du=700,Pa=[{nx:.9278494291885221,ny:.9008218764923216},{nx:.8188460351743289,ny:.9120818357755046},{nx:.7145819191607529,ny:.920124663834921},{nx:.6016291268127121,ny:.920124663834921},{nx:.49104597346497997,ny:.9233417950586875},{nx:.37888306078370876,ny:.920124663834921},{nx:.24618327676643012,ny:.9152989669992712},{nx:.21695772909595804,ny:.7994822429436751},{nx:.1853625424251774,ny:.7270967904089275},{nx:.1340203640851589,ny:.6354085505315806},{nx:.12851782363977485,ny:.5145797598627787},{nx:.12664165103189493,ny:.37392795883361923},{nx:.05347091932457786,ny:.30017152658662094},{nx:.051594746716697934,ny:.20240137221269297},{nx:.14540337711069418,ny:.12006861063464837},{nx:.23921200750469043,ny:.11663807890222985},{nx:.3771106941838649,ny:.11663807890222985},{nx:.5037523452157598,ny:.12006861063464837},{nx:.5975609756097561,ny:.1320754716981132},{nx:.5984990619136961,ny:.24356775300171526},{nx:.5065666041275797,ny:.2692967409948542},{nx:.398686679174484,ny:.27101200686106347},{nx:.28893058161350843,ny:.27101200686106347},{nx:.2373358348968105,ny:.3687821612349914},{nx:.23921200750469043,ny:.48027444253859347},{nx:.24202626641651032,ny:.5660377358490566},{nx:.26454033771106944,ny:.6895368782161235},{nx:.3330206378986867,ny:.6946826758147513},{nx:.35647279549718575,ny:.5831903945111492},{nx:.35647279549718575,ny:.4716981132075472},{nx:.3818011257035647,ny:.37735849056603776},{nx:.5225140712945591,ny:.3653516295025729},{nx:.6238273921200751,ny:.3687821612349914},{nx:.7223264540337712,ny:.40308747855917665},{nx:.6613508442776735,ny:.5197255574614065},{nx:.5300187617260788,ny:.5025728987993139},{nx:.4427767354596623,ny:.5694682675814752},{nx:.4896810506566604,ny:.6861063464837049},{nx:.6163227016885553,ny:.6861063464837049},{nx:.724202626641651,ny:.6861063464837049},{nx:.8273921200750469,ny:.660377358490566},{nx:.8395872420262664,ny:.5368782161234992},{nx:.8395872420262664,ny:.4339622641509434},{nx:.8283302063789869,ny:.313893653516295},{nx:.7176360225140713,ny:.30017152658662094},{nx:.6876172607879925,ny:.22298456260720412},{nx:.698874296435272,ny:.1457975986277873},{nx:.8020637898686679,ny:.11663807890222985},{nx:.8958724202626641,ny:.11663807890222985},{nx:.9446529080675422,ny:.21783876500857632},{nx:.9446529080675422,ny:.3293310463121784},{nx:.9380863039399625,ny:.45797598627787306},{nx:.9409005628517824,ny:.5711835334476844},{nx:.950281425891182,ny:.6723842195540308},{nx:.9540337711069419,ny:.7804459691252144}],js=Pa.length;function rm(t,e,n){return{x:t.nx*e,y:t.ny*n}}Pa.map(t=>[t.nx*Nu,t.ny*Du]);function wx({visible:t=!0,boardWidth:e,boardHeight:n}){return t?a.jsx("div",{className:"markersLayer",children:Pa.map((r,o)=>{const{x:s,y:i}=rm(r,e,n);return a.jsx("div",{className:"marker",style:{left:s,top:i},title:`Casa ${o+1}`,children:o+1},o)})}):null}function Sx({boardRef:t,expected:e=55,onFinish:n,initial:r=[]}){const[o,s]=k.useState(r);function i(g){if(!(t!=null&&t.current))return;const x=t.current.getBoundingClientRect(),b=g.clientX-x.left,_=g.clientY-x.top,p=b/x.width,m=_/x.height;s(y=>y.length>=e?y:[...y,{nx:p,ny:m}])}function l(){s(g=>g.slice(0,-1))}function u(){s([])}const c=k.useMemo(()=>JSON.stringify(o,null,2),[o]);async function d(){try{await navigator.clipboard.writeText(c),alert("Copiado para a rea de transferncia!")}catch{alert("No foi possvel copiar. Use o boto Baixar.")}}function h(){const g=new Blob([c],{type:"application/json"}),x=URL.createObjectURL(g),b=document.createElement("a");b.href=x,b.download="track-points-55.json",document.body.appendChild(b),b.click(),b.remove(),URL.revokeObjectURL(x)}function f(){n==null||n(o),console.log(`TRACK_POINTS_NORM (cole em src/data/track.js):
`,c),alert("Finalizado! O JSON foi impresso no console. Copie e cole em src/data/track.js")}return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"recLayer",onClick:i}),a.jsx("div",{className:"recDotsLayer",pointerEvents:"none",children:o.map((g,x)=>a.jsx("div",{className:"recDot",style:{left:`${g.nx*100}%`,top:`${g.ny*100}%`},title:`Casa ${x+1}`,children:x+1},x))}),a.jsxs("div",{className:"recToolbar",children:[a.jsxs("div",{className:"recInfo",children:[a.jsx("b",{children:"Gravando trilha"}),"  clique nas casas na ordem.",a.jsxs("span",{children:["Marcados: ",a.jsx("b",{children:o.length})," / ",e]})]}),a.jsxs("div",{className:"recBtns",children:[a.jsx("button",{onClick:l,disabled:!o.length,children:"Desfazer"}),a.jsx("button",{onClick:u,disabled:!o.length,children:"Limpar"}),a.jsx("button",{onClick:d,disabled:!o.length,children:"Copiar JSON"}),a.jsx("button",{onClick:h,disabled:!o.length,children:"Baixar .json"}),a.jsx("button",{onClick:f,disabled:o.length!==e,children:"Finalizar"})]})]})]})}const _x=40,kx=1.15,Ex=3,jx="0 8px 18px rgba(0,0,0,.35)",cf={cash:18e3,possibAt:0,clientsAt:0,faturamento:770,manutencao:1150,emprestimos:0,vendedoresComuns:0,fieldSales:0,insideSales:0,mixDBens:4e3,erpClientes:0,manualOnboarding:!0,azul:0,amarelo:0,roxo:0,gestores:0};function Cx({players:t,turnIdx:e,recordTrack:n=!1,matchId:r,me:o,onMeHud:s}){const i=k.useRef(null),[l,u]=k.useState({w:Nu,h:Du}),c=(o==null?void 0:o.id)||qs(),d=ao("Jogador"),h=k.useMemo(()=>(t==null?void 0:t.find(w=>w.id===c))||null,[t,c]),f=(o==null?void 0:o.name)||(h==null?void 0:h.name)||d,g=(h==null?void 0:h.color)||"#6c5ce7",x=k.useMemo(()=>`sg_stats_v1:${r||"local"}:${c}`,[r,c]),[b,_]=k.useState(()=>{try{const w=sessionStorage.getItem(x);return w?JSON.parse(w):cf}catch{return cf}});k.useEffect(()=>{try{sessionStorage.setItem(x,JSON.stringify(b))}catch{}},[x,b]),k.useEffect(()=>{const w={id:c,name:f,color:g,cash:b.cash,possibAt:b.possibAt,clientsAt:b.clientsAt,matchId:r||"local"};s==null||s(w),document.dispatchEvent(new CustomEvent("sg:meHud",{detail:w}))},[c,f,g,b.cash,b.possibAt,b.clientsAt,r]),k.useLayoutEffect(()=>{if(!i.current)return;const w=i.current,E=new ResizeObserver(R=>{for(const D of R){const S=D.contentRect;u({w:S.width,h:S.height})}});return E.observe(w),()=>E.disconnect()},[]);const p=l.w/Nu,m=l.h/Du,y=Math.min(p,m);return a.jsxs("div",{className:"board",ref:i,children:[a.jsx("img",{src:bx,alt:"Board",className:"boardImg"}),n&&a.jsx(Sx,{boardRef:i,expected:55,onFinish:w=>{console.log("TRACK_POINTS_NORM (cole em src/data/track.js):",JSON.stringify(w,null,2))}}),!n&&a.jsxs(a.Fragment,{children:[a.jsx(wx,{visible:!1,boardWidth:l.w,boardHeight:l.h}),t.map((w,E)=>{const R=E===e,D=(w.pos%js+js)%js,S=Pa[D],T=rm(S,l.w,l.h),v=E*12*y,O=_x*y*(R?kx:1),I=Math.max(2,Ex*y),F=["","","","","","","",""],Ee=F[E%F.length];return a.jsx("div",{className:"token",style:{position:"absolute",left:T.x+v,top:T.y-v,transform:"translate(-50%, -50%)",width:O,height:O,borderRadius:"50%",background:w.color,border:`${I}px solid rgba(255,255,255,.95)`,boxShadow:jx,pointerEvents:"none",display:"grid",placeItems:"center",color:"#000",fontWeight:900,userSelect:"none",zIndex:R?4:3,fontSize:`${Math.max(16,O*.6)}px`},title:`${w.name}  Casa ${D+1}`,"aria-label":`${w.name} est na casa ${D+1}`,children:R?"":Ee},w.id)})]})]})}function Rx({totals:t,players:e}){return k.useEffect(()=>{console.groupCollapsed("[HUD] totals"),console.log(t),console.groupEnd()},[t]),a.jsxs("div",{className:"hud",children:[a.jsxs("div",{className:"panel",children:[a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Faturamento:"})," ",a.jsxs("span",{className:"pos",children:["$ ",t.faturamento]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Manuteno:"})," ",a.jsxs("span",{className:"neg",children:["$ ",t.manutencao]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Emprstimos:"})," ",a.jsxs("span",{children:["$ ",t.emprestimos]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Vendedores Comuns:"})," ",a.jsx("span",{children:t.vendedoresComuns})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Field Sales:"})," ",a.jsx("span",{children:t.fieldSales})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Inside Sales:"})," ",a.jsx("span",{children:t.insideSales})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"Mix Produtos:"})," ",a.jsx("span",{children:t.mixProdutos})," ",a.jsx("b",{children:" Bens:"})," ",a.jsxs("span",{children:["$ ",t.bens]})]}),a.jsxs("div",{className:"line",children:[a.jsx("b",{children:"ERP/Sistemas:"})," ",a.jsx("span",{children:t.erpSistemas})," ",a.jsx("b",{children:" Clientes:"})," ",a.jsx("span",{children:t.clientes})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Manual Onboarding:"})," "]}),a.jsxs("div",{children:[a.jsx("b",{children:"Azul:"})," ",a.jsx("span",{children:t.az||0})," ",a.jsx("b",{children:" Amarelo: "}),a.jsx("span",{children:t.am||0})," ",a.jsx("b",{children:"Roxo:"})," ",a.jsx("span",{children:t.rox||0})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Gestores Comerciais:"})," ",a.jsx("span",{children:t.gestores??t.gestoresComerciais??0})]}),a.jsxs("div",{children:[a.jsx("b",{children:"Capacidade:"})," ",a.jsx("span",{children:t.possibAt??0}),"  ",a.jsx("b",{children:"Em Atendimento:"})," ",a.jsx("span",{children:t.clientsAt??0})]})]}),a.jsxs("div",{className:"score",children:[a.jsx("div",{className:"title",children:"Placar"}),e.map(n=>a.jsxs("div",{className:"row",children:[a.jsx("span",{children:n.name}),a.jsx("span",{children:n.cash})]},n.id))]})]})}function Nx({onAction:t,current:e,isMyTurn:n=!0}){const r=!!(e!=null&&e.bankrupt),o=!!n&&!r;k.useEffect(()=>{console.groupCollapsed("[Controls] render"),console.log("current player:",e),console.log("isMyTurn prop:",n),console.log("isBankrupt:",r),console.log("canRoll (final):",o),console.groupEnd()},[e==null?void 0:e.id,e==null?void 0:e.name,e==null?void 0:e.bankrupt,n,o]);const s=()=>{if(console.log("[Controls] click => Rolar Dado & Andar (canRoll=%s)",o),!o)return;const u=Math.floor(Math.random()*6)+1,c=0,d=`Dado: ${u}`;console.log("[Controls] onAction ROLL => steps=%d cashDelta=%d note=%s",u,c,d),t==null||t({type:"ROLL",steps:u,cashDelta:c,note:d})},i=async()=>{r||(console.log("[Controls] click => Recuperao Financeira"),t==null||t({type:"RECOVERY_MODAL"}))},l=async()=>{r||(console.log("[Controls] click => Declarar Falncia"),t==null||t({type:"BANKRUPT_MODAL"}))};return a.jsxs("div",{className:`controls ${o?"":"is-wait"} ${r?"is-bankrupt":""}`,children:[a.jsx("button",{className:"btn primary",onClick:i,disabled:r,"aria-disabled":r,children:"RECUPERAO FINANCEIRA"}),a.jsx("button",{className:"btn dark",onClick:l,disabled:r,"aria-disabled":r,children:"DECLARAR FALNCIA"}),a.jsxs("div",{className:"turnBox",children:[a.jsxs("div",{children:["Vez de: ",a.jsx("b",{children:e==null?void 0:e.name})]}),a.jsx("button",{className:"btn go",onClick:s,disabled:!o,"aria-disabled":!o,children:"Rolar Dado & Andar"})]})]})}function ti({children:t,onClose:e,zIndex:n=3e3}){const r=()=>{typeof e=="function"&&e()};return a.jsx("div",{className:"sg-modal-backdrop",style:{position:"fixed",inset:0,background:"rgba(8,10,16,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:n},onClick:r,children:a.jsx("div",{className:"sg-modal-card",style:{position:"relative",background:"#0f1420",border:"1px solid rgba(255,255,255,.1)",borderRadius:14,width:"min(780px, 92vw)",maxWidth:"92vw",color:"#fff",boxShadow:"0 20px 60px rgba(0,0,0,.45)"},onClick:o=>o.stopPropagation(),children:t})})}function Dx({players:t=[],onExit:e,onResolve:n}){const r=k.useMemo(()=>{const u=[...t].map(c=>({...c,patrimonio:(Number(c.cash)||0)+(Number(c.bens)||0)})).sort((c,d)=>d.patrimonio-c.patrimonio);return[u[1],u[0],u[2]]},[t]),o=r==null?void 0:r[1],s=r==null?void 0:r[0],i=r==null?void 0:r[2],l=()=>{n?n({action:"EXIT"}):e==null||e()};return a.jsx(ti,{zIndex:2147483647,onClose:()=>{},children:a.jsxs("div",{style:Bn.wrap,children:[a.jsx("h1",{style:Bn.title,children:" Fim da 5 Rodada"}),a.jsxs("p",{style:Bn.subtitle,children:["Vence quem tiver ",a.jsx("b",{children:"Saldo + Bens"}),". Eis o pdio:"]}),a.jsxs("div",{style:Bn.podium,children:[a.jsx(bl,{place:"second",player:s}),a.jsx(bl,{place:"first",player:o,big:!0}),a.jsx(bl,{place:"third",player:i})]}),a.jsx("div",{style:{display:"flex",gap:12,marginTop:18,flexWrap:"wrap",justifyContent:"center"},children:a.jsx("button",{style:Bn.btn,onClick:l,children:" Voltar aos Lobbies"})})]})})}function bl({place:t,player:e,big:n}){if(!e)return a.jsx("div",{style:{width:220}});const r={first:wl("#d4af37","#f5d76e"),second:wl("#9fa4ad","#cfd4db"),third:wl("#b87333","#d28c45")},o={first:"1",second:"2",third:"3"}[t],s=r[t].ring,i=r[t].face;return a.jsxs("div",{style:{...Bn.medalCol,transform:n?"translateY(-18px)":"none"},children:[a.jsx("div",{style:Bn.ribbon}),a.jsx("div",{style:{...Bn.medal,...s,width:n?180:150,height:n?180:150},children:a.jsx("div",{style:{...Bn.medalFace,...i},children:a.jsx("div",{style:Bn.medalNumber,children:o})})}),a.jsxs("div",{style:Bn.cardBelow,children:[a.jsx("div",{style:{fontWeight:900,fontSize:16,lineHeight:1.2,textAlign:"center"},children:e.name}),a.jsxs("div",{style:{opacity:.9,fontSize:13,marginTop:4,textAlign:"center"},children:["Saldo: ",a.jsxs("b",{children:["$ ",Number(e.cash||0).toLocaleString()]}),a.jsx("br",{}),"Bens: ",a.jsxs("b",{children:["$ ",Number(e.bens||0).toLocaleString()]})]}),a.jsxs("div",{style:{marginTop:6,fontWeight:900,textAlign:"center"},children:["Patrimnio: ",a.jsxs("b",{children:["$ ",Number(e.patrimonio||0).toLocaleString()]})]})]})]})}function wl(t,e){return{ring:{background:`radial-gradient(circle at 35% 30%, ${e} 0%, ${t} 65%, #000 120%)`,boxShadow:"0 12px 30px rgba(0,0,0,.35), inset 0 0 12px rgba(255,255,255,.12)"},face:{background:`conic-gradient(from 0deg, ${e}, ${t}, ${e})`}}}const Bn={wrap:{pointerEvents:"auto",border:"1px solid rgba(255,255,255,.15)",background:"#11161f",color:"#eef1f6",borderRadius:16,padding:20,width:"min(900px, 92vw)",maxWidth:"92vw",textAlign:"center"},title:{margin:"0 0 6px",fontWeight:900,fontSize:28},subtitle:{margin:"0 0 14px",opacity:.9},podium:{display:"flex",alignItems:"flex-end",justifyContent:"center",gap:24,padding:"10px 0",flexWrap:"wrap"},medalCol:{display:"flex",flexDirection:"column",alignItems:"center"},ribbon:{width:16,height:70,background:"linear-gradient(#e41f1f,#9e1313)",borderRadius:4,marginBottom:-12},medal:{borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"3px solid rgba(255,255,255,.18)"},medalFace:{width:"85%",height:"85%",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 8px 18px rgba(0,0,0,.35), inset 0 -6px 10px rgba(255,255,255,.08)"},medalNumber:{fontWeight:900,fontSize:28,letterSpacing:1,textShadow:"0 2px 4px rgba(0,0,0,.45)"},cardBelow:{background:"#19202c",border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"10px 12px",width:220,marginTop:10},btn:{background:"#2a3342",color:"#fff",border:"1px solid rgba(255,255,255,.18)",borderRadius:10,padding:"10px 14px",fontWeight:800,cursor:"pointer"}},om=k.createContext(null);function Ax({children:t}){const[e,n]=k.useState([]),r=k.useRef(null),o=d=>{const h=r.current;r.current=null,n(f=>f.slice(0,-1)),h&&h(d)},s=()=>o({action:"SKIP"}),i=()=>o(!1),l=d=>{var g;const h=((g=crypto==null?void 0:crypto.randomUUID)==null?void 0:g.call(crypto))||String(Date.now()+Math.random()),f=he.cloneElement(d,{onResolve:x=>o(x)});n(x=>[...x,{id:h,el:f}])},u=()=>new Promise(d=>{r.current=d}),c=k.useMemo(()=>({pushModal:l,awaitTop:u,resolveTop:o,closeModal:s,popModal:i}),[]);return a.jsxs(om.Provider,{value:c,children:[t,e.map(({id:d,el:h})=>a.jsx(he.Fragment,{children:h},d))]})}const Ht=()=>k.useContext(om);function Tx({playerName:t="Jogador"}){const{resolveTop:e,closeModal:n}=Ht();return a.jsx(ti,{width:700,onClose:n,children:a.jsx("div",{className:"bankruptcyModal",children:a.jsxs("div",{className:"paper",style:{padding:24},children:[a.jsx("h2",{style:{marginTop:0},children:"Declarar Falncia"}),a.jsxs("p",{children:["Tem certeza que deseja declarar ",a.jsx("b",{children:"Falncia"}),", ",a.jsx("b",{children:t}),"?",a.jsx("br",{}),"Esta ao  irreversvel e voc no poder mais jogar."]}),a.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:24},children:[a.jsx("button",{onClick:()=>{n(),e(!1)},className:"btn",children:"Cancelar"}),a.jsx("button",{onClick:()=>{n(),e(!0)},className:"btn btn-danger",children:"Sim, declarar falncia"})]})]})})})}const Vt={comum:{cap:2,baseFat:600,incFat:100,baseDesp:100,incDesp:100},inside:{cap:5,baseFat:1500,incFat:500,baseDesp:2e3,incDesp:100},field:{cap:5,baseFat:1500,incFat:500,baseDesp:2e3,incDesp:100}},Au={baseDesp:3e3,incDesp:500,boostByCert:[.2,.3,.4,.6]},sm={A:{fat:1200,desp:700},B:{fat:600,desp:400},C:{fat:300,desp:200},D:{fat:100,desp:50}},im={A:{fat:1e3,desp:400},B:{fat:500,desp:200},C:{fat:200,desp:100},D:{fat:70,desp:50}},Gt=t=>Number(t||0),cr=(t={},e)=>{var n;return new Set(((n=t==null?void 0:t.trainingsByVendor)==null?void 0:n[e])||[]).size},Ox=t=>cr(t,"gestor");function ha(t={}){const e=Math.max(0,Gt(t.vendedoresComuns)),n=Math.max(0,Gt(t.insideSales)),r=Math.max(0,Gt(t.fieldSales)),o=e*Vt.comum.cap,s=n*Vt.inside.cap,i=r*Vt.field.cap,l=o+s+i,u=Math.max(0,Gt(t.clients)),c=Math.min(u,l);return{cap:l,inAtt:c}}function $a(t={}){var D,S;const e=Gt(t.vendedoresComuns),n=Gt(t.insideSales),r=Gt(t.fieldSales),o=Gt(t.gestores??t.gestoresComerciais??t.managers),s=cr(t,"comum"),i=cr(t,"inside"),l=cr(t,"field"),u=cr(t,"gestor"),c=e*(Vt.comum.baseFat+Vt.comum.incFat*s),d=n*(Vt.inside.baseFat+Vt.inside.incFat*i),h=r*(Vt.field.baseFat+Vt.field.incFat*l);let f=c+d+h;const g=e+n+r,x=g>0?Math.min(1,o*7/g):0,b=Au.boostByCert[Math.min(3,Math.max(0,u))]||0;f=f*(1+x*b);const _=String(t.mixProdutos||"D").toUpperCase(),p=(((D=sm[_])==null?void 0:D.fat)||0)*Gt(t.clients),m=String(t.erpLevel||"D").toUpperCase(),y=g+o,w=(((S=im[m])==null?void 0:S.fat)||0)*y,E=Gt(t.revenue);return Math.max(0,Math.floor(f+p+w+E))}function Ia(t={}){var E,R;const e=Gt(t.vendedoresComuns),n=Gt(t.insideSales),r=Gt(t.fieldSales),o=Gt(t.gestores??t.gestoresComerciais??t.managers),s=cr(t,"comum"),i=cr(t,"inside"),l=cr(t,"field"),u=cr(t,"gestor"),c=e*(Vt.comum.baseDesp+Vt.comum.incDesp*s),d=n*(Vt.inside.baseDesp+Vt.inside.incDesp*i),h=r*(Vt.field.baseDesp+Vt.field.incDesp*l),f=o*(Au.baseDesp+Au.incDesp*u),g=String(t.mixProdutos||"D").toUpperCase(),x=(((E=sm[g])==null?void 0:E.desp)||0)*Gt(t.clients),b=String(t.erpLevel||"D").toUpperCase(),_=e+n+r+o,p=(((R=im[b])==null?void 0:R.desp)||0)*_;return Math.max(0,Math.floor(c+d+h+f+x+p+0+1e3))}function jt(t,e={}){var o,s;const n={...t},r=(i,l)=>{n[i]=(n[i]??0)+l};if(Number.isFinite(e.cashDelta)&&r("cash",Number(e.cashDelta)),Number.isFinite(e.clientsDelta)&&r("clients",Number(e.clientsDelta)),Number.isFinite(e.manutencaoDelta)&&r("manutencao",Number(e.manutencaoDelta)),Number.isFinite(e.bensDelta)&&r("bens",Number(e.bensDelta)),Number.isFinite(e.vendedoresComunsDelta)&&r("vendedoresComuns",Number(e.vendedoresComunsDelta)),Number.isFinite(e.fieldSalesDelta)&&r("fieldSales",Number(e.fieldSalesDelta)),Number.isFinite(e.insideSalesDelta)&&r("insideSales",Number(e.insideSalesDelta)),Number.isFinite(e.gestoresDelta)){const i=Number(e.gestoresDelta);n.gestores=(n.gestores??0)+i,n.gestoresComerciais=(n.gestoresComerciais??0)+i,n.managers=(n.managers??0)+i}if(Number.isFinite(e.revenueDelta)&&r("revenue",Number(e.revenueDelta)),typeof e.mixProdutosSet<"u"){n.mixProdutos=e.mixProdutosSet;const i=String(e.mixProdutosSet).toUpperCase();["A","B","C","D"].includes(i)&&(n.mixOwned={...n.mixOwned||{},[i]:!0},(o=n.reducedLevels)!=null&&o.MIX&&(n.reducedLevels={...n.reducedLevels,MIX:n.reducedLevels.MIX.filter(l=>l!==i)}))}if(e.mixBaseSet&&(n.mixBase={...n.mixBase||{},...e.mixBaseSet}),typeof e.erpLevelSet<"u"){n.erpLevel=e.erpLevelSet;const i=String(e.erpLevelSet).toUpperCase();["A","B","C","D"].includes(i)&&(n.erpOwned={...n.erpOwned||{},[i]:!0},(s=n.reducedLevels)!=null&&s.ERP&&(n.reducedLevels={...n.reducedLevels,ERP:n.reducedLevels.ERP.filter(l=>l!==i)}))}return Array.isArray(e.trainingsPush)&&e.trainingsPush.length&&(n.trainings=[...n.trainings||[],...e.trainingsPush]),Array.isArray(e.directBuysPush)&&e.directBuysPush.length&&(n.directBuys=[...n.directBuys||[],...e.directBuysPush]),n}function df(t,e){const{purchases:n=[],grandTotal:r=0}=e||{},o={personalizado:"az",fieldsales:"am",imersaomultiplier:"rox"},s={...t};return s.cash=(s.cash??0)-Number(r||0),s.bens=(s.bens??0)+Number(r||0),s.onboarding=!0,n.forEach(i=>{var h;const{vendorType:l,items:u=[]}=i||{};u.forEach(f=>{const g=o[f==null?void 0:f.id];g&&(s[g]=(s[g]??0)+1)});const c=String(l||"comum"),d=new Set(((h=s.trainingsByVendor)==null?void 0:h[c])||[]);u.forEach(f=>{f!=null&&f.id&&d.add(f.id)}),s.trainingsByVendor={...s.trainingsByVendor||{},[c]:Array.from(d)}}),s}function Sl(t,e,n){return t===e?!1:t<e?n>t&&n<=e:n>t||n<=e}function Cs(t){return t.reduce((e,n)=>e+(n!=null&&n.bankrupt?0:1),0)}function ls(t,e){var s;const n=t.length;if(n===0)return 0;let r=(e+1)%n,o=0;for(;o<n;){if(!((s=t[r])!=null&&s.bankrupt))return r;r=(r+1)%n,o++}return e}class am{constructor(){this.errors=[],this.warnings=[]}validateGameState(e,n,r,o,s){return this.errors=[],this.warnings=[],this.validatePlayers(e),this.validateTurnState(e,n),this.validateGameOverState(e,o,s),this.validateRoundState(e,r),{isValid:this.errors.length===0,errors:this.errors,warnings:this.warnings}}validatePlayers(e){if(!Array.isArray(e)||e.length===0){this.addError("Jogadores invlidos: deve ser um array no vazio");return}e.forEach((n,r)=>{this.validatePlayer(n,r)}),this.validatePlayerUniqueness(e),this.validateAlivePlayers(e)}validatePlayer(e,n){const r=`Jogador ${n+1} (${e.name||"Sem nome"})`;e.id||this.addError(`${r}: ID  obrigatrio`),(typeof e.cash!="number"||e.cash<0)&&this.addError(`${r}: Cash deve ser um nmero no negativo (atual: ${e.cash})`),(typeof e.clients!="number"||e.clients<0)&&this.addError(`${r}: Clientes deve ser um nmero no negativo (atual: ${e.clients})`),this.validateResourceCounts(e,r),this.validateCalculations(e,r)}validateResourceCounts(e,n){["vendedoresComuns","fieldSales","insideSales","gestores","gestoresComerciais","managers"].forEach(s=>{const i=e[s];i!==void 0&&(typeof i!="number"||i<0)&&this.addError(`${n}: ${s} deve ser um nmero no negativo (atual: ${i})`)}),["az","am","rox"].forEach(s=>{const i=e[s];i!==void 0&&(typeof i!="number"||i<0)&&this.addError(`${n}: Certificado ${s} deve ser um nmero no negativo (atual: ${i})`)})}validateCalculations(e,n){try{const r=$a(e),o=Ia(e),{cap:s,inAtt:i}=ha(e);(typeof r!="number"||r<0)&&this.addError(`${n}: Faturamento calculado invlido: ${r}`),(typeof o!="number"||o<0)&&this.addError(`${n}: Manuteno calculada invlida: ${o}`),(typeof s!="number"||s<0)&&this.addError(`${n}: Capacidade calculada invlida: ${s}`),(typeof i!="number"||i<0||i>s)&&this.addError(`${n}: Clientes em atendimento invlido: ${i} (capacidade: ${s})`),this.isInitialState(e)&&o!==1150&&this.addError(`${n}: Manuteno inicial deve ser 1150, mas  ${o}`)}catch(r){this.addError(`${n}: Erro ao calcular faturamento/manuteno: ${r.message}`)}}isInitialState(e){return e.vendedoresComuns===1&&e.clients===1&&e.fieldSales===0&&e.insideSales===0&&e.gestores===0&&e.mixProdutos==="D"&&e.erpLevel==="D"&&(e.az||0)===0&&(e.am||0)===0&&(e.rox||0)===0}validatePlayerUniqueness(e){const n=e.map(o=>o.id).filter(Boolean),r=new Set(n);n.length!==r.size&&this.addError("IDs de jogadores devem ser nicos")}validateAlivePlayers(e){const n=Cs(e);n===0&&this.addError("No pode haver zero jogadores vivos"),n===1&&this.addWarning("Apenas 1 jogador vivo - jogo deve terminar")}validateTurnState(e,n){if(typeof n!="number"||n<0||n>=e.length){this.addError(`TurnIdx invlido: ${n} (deve estar entre 0 e ${e.length-1})`);return}const r=e[n];if(!r){this.addError(`Jogador do turno no encontrado no ndice ${n}`);return}r.bankrupt&&this.addError(`Jogador do turno (${r.name}) est falido`)}validateGameOverState(e,n,r){const o=Cs(e);n&&o>1&&this.addError("Jogo marcado como terminado mas h mais de 1 jogador vivo"),n&&!r&&this.addError("Jogo terminado mas no h vencedor definido"),r&&!n&&this.addError("H vencedor definido mas jogo no terminou"),r&&r.bankrupt&&this.addError("Vencedor no pode estar falido")}validateRoundState(e,n){(typeof n!="number"||n<1)&&this.addError(`Rodada invlida: ${n} (deve ser >= 1)`),n>10&&this.addWarning(`Rodada muito alta: ${n} (jogo pode estar travado)`)}validateAction(e,n,r){switch(this.errors=[],this.warnings=[],e.type){case"MOVE":this.validateMoveAction(e,n);break;case"BUY":this.validateBuyAction(e,n);break;case"HIRE":this.validateHireAction(e,n);break;case"BANKRUPT":this.validateBankruptAction(e,n);break;default:this.addWarning(`Tipo de ao no reconhecido: ${e.type}`)}return{isValid:this.errors.length===0,errors:this.errors,warnings:this.warnings}}validateMoveAction(e,n){(typeof e.steps!="number"||e.steps<1||e.steps>6)&&this.addError(`Passos invlidos: ${e.steps} (deve estar entre 1 e 6)`)}validateBuyAction(e,n){const r=e.cost||e.price||0;r>n.cash&&this.addError(`Saldo insuficiente: precisa de ${r}, tem ${n.cash}`)}validateHireAction(e,n){const r=e.cost||0;r>n.cash&&this.addError(`Saldo insuficiente para contratao: precisa de ${r}, tem ${n.cash}`)}validateBankruptAction(e,n){n.bankrupt||this.addWarning("Jogador declarando falncia mas no est marcado como falido")}addError(e){this.errors.push(e)}addWarning(e){this.warnings.push(e)}}function Lx(t,e,n,r,o){return new am().validateGameState(t,e,n,r,o)}function Px(t,e,n){return new am().validateAction(t,e,n)}class $x{constructor(){this.enabled=!1,this.logs=[],this.maxLogs=1e4,this.originalConsole={log:console.log,warn:console.warn,error:console.error,debug:console.debug,info:console.info},this.prefixes=["[DEBUG]","[NET]","[App]","[SG]","[Controls]","[HUD]","[DEBUG MODE]","[PlayersLobby]","[leaveRoom]","[GameNet]","[useTurnEngine]","[useGameSync]"]}shouldCapture(e){if(!this.enabled)return!1;const n=e.map(r=>{if(typeof r=="object")try{return JSON.stringify(r)}catch{return String(r)}return String(r)}).join(" ");return this.prefixes.some(r=>n.includes(r))}addLog(e,n){this.logs.length>=this.maxLogs&&(this.logs=this.logs.slice(-Math.floor(this.maxLogs*.9)));const r=Date.now(),o={timestamp:r,time:new Date(r).toISOString(),level:e,args:n.map(s=>{if(typeof s=="object"&&s!==null)try{return JSON.parse(JSON.stringify(s,(i,l)=>typeof l=="function"?"[Function]":l===void 0?"[undefined]":Array.isArray(l)&&l.length>100?`[Array(${l.length}) - truncado]`:l))}catch{return String(s)}return s}),message:n.map(s=>{if(typeof s=="object")try{return JSON.stringify(s)}catch{return String(s)}return String(s)}).join(" ")};this.logs.push(o)}interceptLog(...e){this.shouldCapture(e)&&this.addLog("log",e),this.originalConsole.log.apply(console,e)}interceptWarn(...e){this.shouldCapture(e)&&this.addLog("warn",e),this.originalConsole.warn.apply(console,e)}interceptError(...e){this.addLog("error",e),this.originalConsole.error.apply(console,e)}interceptDebug(...e){this.shouldCapture(e)&&this.addLog("debug",e),this.originalConsole.debug.apply(console,e)}interceptInfo(...e){this.shouldCapture(e)&&this.addLog("info",e),this.originalConsole.info.apply(console,e)}enable(){this.enabled||(this.enabled=!0,console.log=this.interceptLog.bind(this),console.warn=this.interceptWarn.bind(this),console.error=this.interceptError.bind(this),console.debug=this.interceptDebug.bind(this),console.info=this.interceptInfo.bind(this),console.log("[LogCapture]  Captura de logs ativada"))}disable(){this.enabled&&(this.enabled=!1,console.log=this.originalConsole.log,console.warn=this.originalConsole.warn,console.error=this.originalConsole.error,console.debug=this.originalConsole.debug,console.info=this.originalConsole.info,console.log("[LogCapture]  Captura de logs desativada"))}clear(){this.logs=[],console.log("[LogCapture]  Histrico de logs limpo")}getLogs(){return[...this.logs]}getStats(){const e=this.logs.length,n={log:0,warn:0,error:0,debug:0,info:0};return this.logs.forEach(r=>{n[r.level]=(n[r.level]||0)+1}),{total:e,byLevel:n,enabled:this.enabled}}exportAsText(){const e=["=".repeat(80),"RELATRIO DE LOGS - Sales Game","=".repeat(80),`Data/Hora: ${new Date().toISOString()}`,`Total de logs: ${this.logs.length}`,`Estatsticas: ${JSON.stringify(this.getStats(),null,2)}`,"=".repeat(80),""];return this.logs.forEach(n=>{const r={log:"",warn:"",error:"",debug:"",info:""}[n.level]||"";e.push(`[${n.time}] ${r} [${n.level.toUpperCase()}]`),n.args.forEach((o,s)=>{typeof o=="object"?e.push(`  Arg ${s+1}: ${JSON.stringify(o,null,2)}`):e.push(`  Arg ${s+1}: ${o}`)}),e.push("")}),e.join(`
`)}exportAsJSON(){return{timestamp:new Date().toISOString(),stats:this.getStats(),logs:this.logs}}exportFull(){return{timestamp:new Date().toISOString(),stats:this.getStats(),text:this.exportAsText(),json:this.exportAsJSON()}}}const Yn=new $x,Ix=()=>Yn.clear(),Tu=()=>Yn.getStats(),Mx=()=>Yn.exportAsText(),Bx=()=>Yn.exportAsJSON();class Ux{constructor(){this.enabled=!1,this.validationHistory=[],this.maxHistorySize=100}toggle(){return this.enabled=!this.enabled,this.enabled&&Yn.enable(),console.log(`[DEBUG MODE] ${this.enabled?"ATIVADO":"DESATIVADO"}`),this.enabled}validateGameState(e,n,r,o,s,i=""){if(!this.enabled)return;const l=Lx(e,n,r,o,s);return this.addToHistory({type:"GAME_STATE",context:i,timestamp:Date.now(),result:l}),l.isValid||console.error("[DEBUG MODE]  Estado do jogo invlido:",l.errors),l.warnings.length>0&&console.warn("[DEBUG MODE]  Avisos:",l.warnings),l}validateAction(e,n,r,o=""){if(!this.enabled)return;const s=Px(e,n,r);return this.addToHistory({type:"ACTION",context:o,timestamp:Date.now(),action:e.type,player:n.name,result:s}),s.isValid||console.error(`[DEBUG MODE]  Ao invlida (${e.type}):`,s.errors),s}validateResourceChange(e,n,r,o){if(!this.enabled)return;const s=[],i=[];if(n.clients!==r.clients){const c=r.clients-n.clients;r.clients<0&&s.push(`Clientes no pode ser negativo: ${r.clients}`),Math.abs(c)>10&&i.push(`Mudana grande de clientes: ${c}`)}if(n.cash!==r.cash){const c=r.cash-n.cash;r.cash<0&&s.push(`Cash no pode ser negativo: ${r.cash}`),Math.abs(c)>5e4&&i.push(`Mudana grande de cash: ${c}`)}["vendedoresComuns","fieldSales","insideSales","gestores"].forEach(c=>{if(n[c]!==r[c]){const d=r[c]-n[c];r[c]<0&&s.push(`${c} no pode ser negativo: ${r[c]}`),Math.abs(d)>5&&i.push(`Mudana grande de ${c}: ${d}`)}});const u={isValid:s.length===0,errors:s,warnings:i};return this.addToHistory({type:"RESOURCE_CHANGE",context:o,timestamp:Date.now(),player:e.name,oldState:n,newState:r,result:u}),u.isValid||console.error("[DEBUG MODE]  Mudana de recurso invlida:",u.errors),u}validateCalculations(e,n=""){if(this.enabled)try{const r=$a(e),o=Ia(e),{cap:s,inAtt:i}=ha(e),l=[],u=[];(typeof r!="number"||r<0)&&l.push(`Faturamento invlido: ${r}`),(typeof o!="number"||o<0)&&l.push(`Manuteno invlida: ${o}`),(typeof s!="number"||s<0)&&l.push(`Capacidade invlida: ${s}`),(typeof i!="number"||i<0||i>s)&&l.push(`Clientes em atendimento invlido: ${i} (capacidade: ${s})`),this.isInitialState(e)&&o!==1150&&l.push(`Manuteno inicial deve ser 1150, mas  ${o}`);const c={isValid:l.length===0,errors:l,warnings:u,calculations:{faturamento:r,manutencao:o,cap:s,inAtt:i}};return this.addToHistory({type:"CALCULATIONS",context:n,timestamp:Date.now(),player:e.name,result:c}),c.isValid||console.error("[DEBUG MODE]  Clculos invlidos:",c.errors),c}catch(r){return console.error("[DEBUG MODE]  Erro ao validar clculos:",r),{isValid:!1,errors:[r.message],warnings:[]}}}isInitialState(e){return e.vendedoresComuns===1&&e.clients===1&&e.fieldSales===0&&e.insideSales===0&&e.gestores===0&&e.mixProdutos==="D"&&e.erpLevel==="D"}addToHistory(e){this.validationHistory.unshift(e),this.validationHistory.length>this.maxHistorySize&&(this.validationHistory=this.validationHistory.slice(0,this.maxHistorySize))}getHistory(){return this.validationHistory}clearHistory(){this.validationHistory=[]}getStats(){const e=this.validationHistory.length,n=this.validationHistory.filter(o=>!o.result.isValid).length,r=this.validationHistory.filter(o=>o.result.warnings.length>0).length;return{total:e,errors:n,warnings:r,errorRate:e>0?n/e*100:0,warningRate:e>0?r/e*100:0}}exportReport(){const e=this.getStats(),n={timestamp:new Date().toISOString(),stats:e,history:this.validationHistory};return console.log("[DEBUG MODE]  Relatrio de validao:",n),n}exportFullReport(){const e=this.exportReport(),n=Yn.exportFull();return{timestamp:new Date().toISOString(),validation:e,logs:n,text:this.exportFullReportAsText(e,n)}}exportFullReportAsText(e,n){return["=".repeat(80),"RELATRIO COMPLETO DE DEBUG - Sales Game","=".repeat(80),`Data/Hora: ${new Date().toISOString()}`,"","--- VALIDAES ---",`Total de validaes: ${e.stats.total}`,`Erros: ${e.stats.errors}`,`Avisos: ${e.stats.warnings}`,`Taxa de erro: ${e.stats.errorRate.toFixed(2)}%`,"","--- LOGS CAPTURADOS ---",`Total de logs: ${n.stats.total}`,`Logs por nvel: ${JSON.stringify(n.stats.byLevel,null,2)}`,"","--- HISTRICO DE VALIDAES ---",...e.history.map(o=>`[${new Date(o.timestamp).toISOString()}] ${o.type} - ${o.context||""} - ${JSON.stringify(o.result,null,2)}`),"","--- LOGS DETALHADOS ---",n.text,"=".repeat(80)].join(`
`)}}const lo=new Ux,Fx=(t,e,n,r,o,s)=>lo.validateGameState(t,e,n,r,o,s),zx=(t,e)=>lo.validateCalculations(t,e),ff=()=>lo.getStats(),Wx=()=>lo.exportReport(),lm=()=>lo.exportFullReport();function Vx({players:t,turnIdx:e,round:n,gameOver:r,winner:o}){const[s,i]=k.useState(!1),[l,u]=k.useState({total:0,errors:0,warnings:0,errorRate:0,warningRate:0}),[c,d]=k.useState({total:0,byLevel:{},enabled:!1}),[h,f]=k.useState(!1),[g,x]=k.useState({x:0,y:0}),[b,_]=k.useState({x:0,y:0}),p=k.useRef(null);k.useEffect(()=>{const T=()=>{u(ff()),d(Tu())};T();const v=setInterval(T,1e3);return()=>clearInterval(v)},[]);const m=()=>{const T=lo.toggle();i(T)},y=()=>{const T=Wx(),v=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),A=URL.createObjectURL(v),O=document.createElement("a");O.href=A,O.download=`debug-report-${new Date().toISOString().slice(0,19)}.json`,O.click(),URL.revokeObjectURL(A)},w=()=>{const T=lm(),v=new Blob([T.text],{type:"text/plain;charset=utf-8"}),A=URL.createObjectURL(v),O=document.createElement("a");O.href=A,O.download=`debug-logs-completo-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`,O.click(),URL.revokeObjectURL(A);const I=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),F=URL.createObjectURL(I),Ee=document.createElement("a");Ee.href=F,Ee.download=`debug-logs-completo-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,Ee.click(),URL.revokeObjectURL(F),console.log("[DebugPanel]  Relatrio completo exportado (texto + JSON)")},E=()=>{lo.clearHistory(),Ix(),u(ff()),d(Tu()),console.log("[DebugPanel]  Todos os logs foram limpos")},R=T=>{if(T.target.closest("button"))return;f(!0);const v=p.current.getBoundingClientRect();_({x:T.clientX-v.left,y:T.clientY-v.top})},D=T=>{h&&x({x:T.clientX-b.x,y:T.clientY-b.y})},S=()=>{f(!1)};return k.useEffect(()=>{if(h)return document.addEventListener("mousemove",D),document.addEventListener("mouseup",S),()=>{document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",S)}},[h,b]),s?a.jsxs("div",{ref:p,style:{position:"fixed",top:g.y||10,left:g.x||10,zIndex:9999,background:"#1a1a1a",color:"#fff",padding:"12px",borderRadius:"8px",border:"1px solid #333",minWidth:"300px",maxHeight:"80vh",overflow:"auto",fontSize:"12px",fontFamily:"monospace",cursor:h?"grabbing":"grab",userSelect:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},onMouseDown:R,children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[a.jsx("h3",{style:{margin:0,color:"#4CAF50"},children:" Debug Panel"}),a.jsx("button",{onClick:m,style:{background:"#ff4444",color:"#fff",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",fontSize:"10px"},children:""})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estatsticas de Validao"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Total: ",l.total]}),a.jsxs("div",{style:{color:l.errors>0?"#ff4444":"#4CAF50"},children:["Erros: ",l.errors]}),a.jsxs("div",{style:{color:l.warnings>0?"#FFC107":"#4CAF50"},children:["Avisos: ",l.warnings]}),a.jsxs("div",{children:["Taxa Erro: ",l.errorRate.toFixed(1),"%"]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estatsticas de Logs"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Total: ",c.total]}),a.jsxs("div",{style:{color:c.enabled?"#4CAF50":"#ff4444"},children:["Status: ",c.enabled?" Ativo":" Inativo"]}),c.byLevel&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Logs: ",c.byLevel.log||0]}),a.jsxs("div",{style:{color:"#FFC107"},children:["Warns: ",c.byLevel.warn||0]}),a.jsxs("div",{style:{color:"#ff4444"},children:["Errors: ",c.byLevel.error||0]}),a.jsxs("div",{children:["Debug: ",c.byLevel.debug||0]})]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Estado do Jogo"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[a.jsxs("div",{children:["Jogadores: ",t.length]}),a.jsxs("div",{children:["Turno: ",e+1]}),a.jsxs("div",{children:["Rodada: ",n]}),a.jsxs("div",{style:{color:r?"#ff4444":"#4CAF50"},children:["Status: ",r?"Fim":"Ativo"]}),o&&a.jsxs("div",{children:["Vencedor: ",o.name]})]})]}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",color:"#FFC107"},children:" Jogadores"}),t.map((T,v)=>{var A;return a.jsxs("div",{style:{background:v===e?"#333":"transparent",padding:"4px",borderRadius:"4px",marginBottom:"2px",border:T.bankrupt?"1px solid #ff4444":"1px solid transparent"},children:[a.jsxs("div",{style:{fontWeight:"bold"},children:[T.name," ",T.bankrupt?"":""," ",v===e?"":""]}),a.jsxs("div",{style:{fontSize:"10px",opacity:.8},children:["Cash: $",((A=T.cash)==null?void 0:A.toLocaleString())||0," | Clientes: ",T.clients||0," | Vendedores: ",T.vendedoresComuns||0]})]},T.id)})]}),a.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[a.jsx("button",{onClick:w,style:{background:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px",fontWeight:"bold"},title:"Exporta relatrio completo com todos os logs (texto + JSON)",children:" Exportar Logs Completos"}),a.jsx("button",{onClick:y,style:{background:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px"},title:"Exporta apenas relatrio de validao (JSON)",children:" Exportar Validao"}),a.jsx("button",{onClick:E,style:{background:"#FF9800",color:"#fff",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"10px"},title:"Limpa todos os logs e histrico de validao",children:" Limpar Tudo"})]}),a.jsxs("div",{style:{marginTop:"12px",padding:"8px",background:"#333",borderRadius:"4px",fontSize:"10px"},children:[a.jsx("div",{style:{color:"#FFC107",marginBottom:"4px"},children:" Instrues:"}),a.jsx("div",{children:' Clique em " Debug" para ativar/desativar'}),a.jsx("div",{children:" Logs so capturados automaticamente quando debug est ativo"}),a.jsx("div",{children:' " Exportar Logs Completos" gera arquivo .txt e .json'}),a.jsx("div",{children:" Compartilhe o arquivo .txt para anlise de problemas"}),a.jsx("div",{children:" Todos os console.log com prefixos [DEBUG], [NET], [App], etc. so capturados"})]})]}):a.jsx("div",{style:{background:"#1a1a1a",color:"#fff",padding:"6px 10px",borderRadius:"4px",border:"1px solid #333",cursor:"pointer",fontSize:"11px",fontFamily:"monospace",display:"inline-block",userSelect:"none"},onClick:m,children:" Debug"})}function gr({onResolve:t,requiredAmount:e=0,currentCash:n=0,title:r="Saldo insuficiente",message:o="Seu saldo atual no  suficiente para concluir esta compra.",okLabel:s="OK",showRecoveryOptions:i=!1,canClose:l=!0}){const u=k.useRef(null),c=k.useMemo(()=>Math.max(0,Number(e||0)-Number(n||0)),[e,n]),d=b=>`$ ${Number(b||0).toLocaleString()}`,h=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"ACK"})},f=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),!(i||!l)&&(t==null||t({action:"SKIP"}))},g=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"RECOVERY"})},x=b=>{var _,p;(_=b==null?void 0:b.preventDefault)==null||_.call(b),(p=b==null?void 0:b.stopPropagation)==null||p.call(b),t==null||t({action:"BANKRUPT"})};return k.useEffect(()=>{const b=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var _,p;return(p=(_=u.current)==null?void 0:_.focus)==null?void 0:p.call(_)},0),()=>{document.body.style.overflow=b}},[]),a.jsx("div",{style:en.wrap,role:"dialog","aria-modal":"true",onMouseDown:b=>{b.target===b.currentTarget&&b.stopPropagation()},children:a.jsxs("div",{style:en.card,onMouseDown:b=>b.stopPropagation(),children:[!i&&l&&a.jsx("button",{type:"button",style:en.close,onClick:f,"aria-label":"Fechar",children:""}),a.jsx("div",{style:en.icon,children:""}),a.jsx("h2",{style:en.title,children:r}),a.jsx("p",{style:en.msg,children:o}),a.jsxs("div",{style:en.grid,children:[a.jsxs("div",{style:en.row,children:[a.jsx("span",{children:"Necessrio:"}),a.jsx("b",{children:d(e)})]}),a.jsxs("div",{style:en.row,children:[a.jsx("span",{children:"Seu saldo:"}),a.jsx("b",{children:d(n)})]}),a.jsxs("div",{style:{...en.row,color:"#fca5a5"},children:[a.jsx("span",{children:"Faltam:"}),a.jsx("b",{children:d(c)})]})]}),a.jsx("div",{style:en.actions,children:i?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",style:{...en.btn,background:"#f59e0b",color:"#fff",marginRight:"8px"},onClick:g,children:"Recuperao Financeira"}),a.jsx("button",{type:"button",style:{...en.btn,background:"#dc2626",color:"#fff"},onClick:x,children:"Declarar Falncia"})]}):a.jsx("button",{ref:u,type:"button",style:{...en.btn,background:"#6b7280",color:"#fff"},onClick:h,children:s})})]})})}const en={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"grid",placeItems:"center",zIndex:1100},card:{width:"min(440px, 92vw)",background:"#1f2330",color:"#e9ecf1",borderRadius:16,padding:"18px 18px 16px",border:"1px solid rgba(255,255,255,.12)",boxShadow:"0 18px 50px rgba(0,0,0,.5)",position:"relative"},close:{position:"absolute",right:10,top:10,width:34,height:34,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},icon:{fontSize:28,lineHeight:1,marginBottom:6},title:{margin:"2px 0 6px",fontWeight:900,fontSize:20},msg:{opacity:.95,margin:"0 0 10px"},grid:{border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",marginBottom:12,background:"#171b26"},row:{display:"flex",justifyContent:"space-between",padding:"4px 0"},actions:{display:"flex",justifyContent:"center",marginTop:6},btn:{minWidth:120,padding:"10px 16px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer"}},tn={A:{compra:1e4,despesa:400,faturamento:1e3,color:"#1d4ed8",pill:"NVEL A"},B:{compra:4e3,despesa:200,faturamento:500,color:"#16a34a",pill:"NVEL B"},C:{compra:1500,despesa:100,faturamento:200,color:"#f59e0b",pill:"NVEL C"},D:{compra:500,despesa:50,faturamento:70,color:"#6b7280",pill:"NVEL D"}};function hf({onResolve:t,currentCash:e=0,currentLevel:n=null,erpOwned:r=null}){const o=k.useRef(null),{pushModal:s,awaitTop:i}=Ht(),l=c=>{var d,h;(d=c==null?void 0:c.preventDefault)==null||d.call(c),(h=c==null?void 0:c.stopPropagation)==null||h.call(c),t==null||t({action:"SKIP"})},u=async c=>{if(r?r[c]===!0:n===c)return;const h=tn[c],f=Number((h==null?void 0:h.compra)||0),g=Number(e||0);if(g<f){s(a.jsx(gr,{requiredAmount:f,currentCash:g,title:"Saldo insuficiente para comprar ERP",message:`Voc precisa de $ ${f.toLocaleString()} para o ERP nvel ${c}, mas possui $ ${g.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",level:c,values:h})};return k.useEffect(()=>{const c=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var d,h;return(h=(d=o.current)==null?void 0:d.focus)==null?void 0:h.call(d)},0),()=>{document.body.style.overflow=c}},[]),a.jsx("div",{style:Qe.wrap,role:"dialog","aria-modal":"true","aria-label":"ERP/Sistemas",children:a.jsxs("div",{style:Qe.card,children:[a.jsx("button",{ref:o,type:"button",style:Qe.close,onClick:l,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Qe.title,children:["Escolha o nvel de ",a.jsx("b",{children:"ERP / Sistemas"}),":"]}),a.jsxs("div",{style:Qe.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"ERP / SISTEMAS"}),a.jsxs("div",{children:[a.jsx("b",{children:"Impacto mensal:"})," adiciona ",a.jsx("b",{children:"Despesa"})," e ",a.jsx("b",{children:"Faturamento"})," de acordo com o nvel."]}),a.jsxs("div",{children:["O nvel ",a.jsx("b",{children:"D"})," tambm pode ser adquirido."]})]}),a.jsxs("div",{style:Qe.saldo,children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsxs("div",{style:Qe.table,children:[a.jsxs("div",{style:Qe.trHead,children:[a.jsx("div",{style:Qe.th}),a.jsx("div",{style:{...Qe.th,background:"#10214d"},children:"Nvel A"}),a.jsx("div",{style:{...Qe.th,background:"#0f3a1c"},children:"Nvel B"}),a.jsx("div",{style:{...Qe.th,background:"#4a3705"},children:"Nvel C"}),a.jsx("div",{style:{...Qe.th,background:"#2a2f3b"},children:"Nvel D"})]}),a.jsx(_l,{label:"COMPRA",fmt:!0,vA:tn.A.compra,vB:tn.B.compra,vC:tn.C.compra,vD:tn.D.compra}),a.jsx(_l,{label:"DESPESA",fmt:!0,vA:tn.A.despesa,vB:tn.B.despesa,vC:tn.C.despesa,vD:tn.D.despesa}),a.jsx(_l,{label:"FATURAMENTO",fmt:!0,vA:tn.A.faturamento,vB:tn.B.faturamento,vC:tn.C.faturamento,vD:tn.D.faturamento})]}),a.jsx("div",{style:Qe.cards,children:["A","B","C","D"].map(c=>{const d=tn[c],h=r?r[c]===!0:n===c,f=h;return a.jsxs("div",{style:{...Qe.cardItem,borderColor:h?"#16a34a":"rgba(255,255,255,.15)",opacity:f?.6:1},children:[a.jsx("div",{style:{...Qe.pill,background:h?"#16a34a":"#fff",color:h?"#fff":"#111"},children:h?" ADQUIRIDO":d.pill}),a.jsx("div",{style:{...Qe.cardBadge,background:d.color}}),a.jsxs("ul",{style:Qe.lines,children:[a.jsxs("li",{children:["Compra: ",a.jsxs("b",{children:["$ ",d.compra.toLocaleString()]})]}),a.jsxs("li",{children:["Despesa: ",a.jsxs("b",{children:["$ ",d.despesa.toLocaleString()]})]}),a.jsxs("li",{children:["Faturamento: ",a.jsxs("b",{children:["$ ",d.faturamento.toLocaleString()]})]})]}),a.jsx("button",{type:"button",style:{...Qe.buyBtn,background:f?"#6b7280":"#2442f9",cursor:f?"not-allowed":"pointer"},onClick:()=>u(c),disabled:f,title:f?`ERP nvel ${c} j adquirido`:`Comprar ERP nvel ${c}`,children:f?"J Adquirido":`Comprar ${c}`})]},c)})}),a.jsx("div",{style:Qe.actions,children:a.jsx("button",{type:"button",style:{...Qe.bigBtn,background:"#444"},onClick:l,children:"No comprar"})})]})})}function _l({label:t,vA:e,vB:n,vC:r,vD:o,fmt:s}){const i=l=>s?`$ ${Number(l).toLocaleString()}`:l;return a.jsxs("div",{style:Qe.tr,children:[a.jsx("div",{style:{...Qe.td,fontWeight:700},children:t}),a.jsx("div",{style:Qe.td,children:i(e)}),a.jsx("div",{style:Qe.td,children:i(n)}),a.jsx("div",{style:Qe.td,children:i(r)}),a.jsx("div",{style:Qe.td,children:i(o)})]})}const Qe={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldo:{margin:"0 0 10px",padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,overflow:"hidden",marginBottom:12},trHead:{display:"grid",gridTemplateColumns:"1fr repeat(4, 1fr)",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"1fr repeat(4, 1fr)",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255/.06)"},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,marginTop:8},cardItem:{background:"#0f1320",border:"1px solid",borderRadius:14,padding:"12px",display:"flex",flexDirection:"column",gap:8},cardBadge:{width:"100%",height:6,borderRadius:999,opacity:.9},pill:{alignSelf:"flex-start",fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999,color:"#111"},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},buyBtn:{marginTop:"auto",padding:"10px 12px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer",background:"#2442f9",color:"#fff"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:14},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",color:"#fff",fontWeight:900,cursor:"pointer"}},ki=[{id:"personalizado",label:`Treinamento de venda personalizado
Casagrande Consultores`,price:500,cert:"azul",colors:{bg:"#0f2848",border:"#3b82f6",pill:"#60a5fa"}},{id:"fieldsales",label:`Curso Field Sales Collab
Multiplier Educao e
Casagrande Consultores`,price:500,cert:"amarelo",colors:{bg:"#3a3202",border:"#facc15",pill:"#fde047"}},{id:"imersaomultiplier",label:`Pacote Imerses
Multiplier Educao`,price:500,cert:"roxo",colors:{bg:"#2b0840",border:"#a855f7",pill:"#c084fc"}}];function pf({onResolve:t,ownedByType:e={},canTrain:n={}}){const r=S=>typeof S=="string"&&S.trim()!==""&&!Number.isNaN(Number(S))?Number(S):S,o=S=>{const T=r(S);return typeof T=="number"?T>0:!!T},s=k.useMemo(()=>({comum:o(n.comum),field:o(n.field),inside:o(n.inside),gestor:o(n.gestor)}),[n]),i=ki.map(S=>S.id),l=k.useMemo(()=>[{id:"comum",label:"Vend. Comum"},{id:"field",label:"Field Sales"},{id:"inside",label:"Inside Sales"},{id:"gestor",label:"Gestor"}].filter(S=>s[S.id]).filter(S=>{const T=e[S.id]instanceof Set?e[S.id]:new Set(e[S.id]||[]);return i.some(v=>!T.has(v))}),[e,s]),[u,c]=k.useState(()=>new Set),[d,h]=k.useState(()=>new Set);k.useEffect(()=>{u.size===0&&l.length>0&&c(new Set([l[0].id]))},[l,u.size]);const f=k.useRef(null),g=k.useMemo(()=>{const S=[];if(d.size>0){const T=Array.from(d).map(A=>ki.find(O=>O.id===A)).filter(Boolean),v=T.reduce((A,O)=>A+((O==null?void 0:O.price)||0),0);u.forEach(A=>{S.push({vendorType:A,items:T,total:v})})}return S},[u,d]),x=k.useMemo(()=>g.reduce((S,T)=>S+T.total,0),[g]),b=k.useMemo(()=>{const S={azul:0,amarelo:0,roxo:0};return d.size>0&&Array.from(d).map(v=>ki.find(A=>A.id===v)).filter(Boolean).forEach(v=>{S[v.cert]=(S[v.cert]||0)+u.size}),S},[d,u.size]),_=k.useMemo(()=>{const S={};if(d.size>0){const T=Array.from(d);u.forEach(v=>{S[v]=T})}return S},[d,u]),p=S=>{c(T=>{const v=new Set(T);return v.has(S)?v.delete(S):v.add(S),v})},m=S=>{Array.from(u).some(v=>(e[v]instanceof Set?e[v]:new Set(e[v]||[])).has(S))||h(v=>{const A=new Set(v);return A.has(S)?A.delete(S):A.add(S),A})},y=()=>{g.length!==0&&(t==null||t({action:"BUY",purchases:g,grandTotal:x,bensDelta:x,certsCount:b,ownedUpdate:_}))},w=()=>{c(new Set),h(new Set)},E=S=>{var T,v;(T=S==null?void 0:S.preventDefault)==null||T.call(S),(v=S==null?void 0:S.stopPropagation)==null||v.call(S),t==null||t({action:"SKIP"})};k.useEffect(()=>{const S=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var T,v;return(v=(T=f.current)==null?void 0:T.focus)==null?void 0:v.call(T)},0),()=>{document.body.style.overflow=S}},[]);const R=l.length===0,D=!Object.values(s).some(Boolean);return a.jsx("div",{style:zt.wrap,role:"dialog","aria-modal":"true",children:a.jsxs("div",{style:zt.card,children:[a.jsx("button",{ref:f,type:"button",style:zt.close,onClick:E,"aria-label":"Fechar",children:""}),a.jsx("h2",{style:zt.title,children:"Escolha os vendedores e treinamentos que deseja comprar:"}),R?a.jsx("div",{style:zt.allDoneBox,children:D?"Nenhum profissional disponvel para treinar no momento.":"Todos os treinamentos j foram comprados para os profissionais disponveis."}):a.jsx(a.Fragment,{children:a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("p",{style:{margin:"0 0 8px",opacity:.9,fontSize:"14px"},children:"Selecione os tipos de vendedores que deseja treinar:"}),a.jsx("div",{style:{...zt.vendorRow,gridTemplateColumns:`repeat(${l.length}, minmax(0,1fr))`},children:l.map(S=>a.jsx("button",{type:"button",onClick:()=>p(S.id),style:{...zt.vendorBtn,background:u.has(S.id)?"#6f5bd6":"#2a2f3b",borderColor:u.has(S.id)?"rgba(255,255,255,.35)":"rgba(255,255,255,.15)"},children:S.label},S.id))})]})}),!R&&u.size>0&&a.jsxs(a.Fragment,{children:[a.jsx("p",{style:{margin:"10px 2px 14px",opacity:.9},children:"Escolha os treinamentos que sero aplicados a todos os tipos selecionados:"}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",background:"#2a2f3b",borderRadius:"8px",border:"1px solid rgba(255,255,255,.15)"},children:[a.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Tipos selecionados:"}),a.jsx("div",{style:{fontSize:"14px",opacity:.9},children:Array.from(u).map(S=>{const T=l.find(v=>v.id===S);return T==null?void 0:T.label}).join(", ")})]}),a.jsx("div",{style:zt.products,children:ki.map(S=>{const T=d.has(S.id),v=Array.from(u).some(A=>(e[A]instanceof Set?e[A]:new Set(e[A]||[])).has(S.id));return a.jsxs("button",{type:"button",onClick:()=>m(S.id),disabled:v,style:{...zt.productCard,background:S.colors.bg,borderColor:S.colors.border,boxShadow:T?`0 0 0 3px ${S.colors.pill}`:"none",opacity:v?.45:1,cursor:v?"not-allowed":"pointer"},title:v?"J adquirido para algum tipo selecionado":void 0,children:[a.jsxs("div",{style:zt.pill(S.colors.pill),children:["Certificado ",S.cert==="azul"?"Azul":S.cert==="amarelo"?"Amarelo":"Roxo"]}),a.jsx("div",{style:{whiteSpace:"pre-line",fontWeight:800,marginBottom:10},children:S.label}),a.jsxs("div",{style:{fontSize:22,fontWeight:900},children:["$ ",S.price.toLocaleString()]})]},S.id)})})]}),a.jsxs("div",{style:zt.actionsRow,children:[a.jsx("button",{type:"button",style:{...zt.smallBtn,background:"#3a4152"},onClick:w,children:"Limpar Tudo"}),a.jsx("div",{style:{flex:1}}),a.jsxs("div",{style:{fontWeight:900},children:["Total: $ ",x.toLocaleString(),u.size>1&&a.jsxs("span",{style:{fontSize:"12px",opacity:.8,marginLeft:"8px"},children:["(",d.size," treinamentos  ",u.size," tipos)"]})]})]}),a.jsxs("div",{style:zt.btnRow,children:[a.jsx("button",{type:"button",style:{...zt.bigBtn,background:"#444"},onClick:E,children:"No comprar"}),a.jsxs("button",{type:"button",disabled:g.length===0,style:{...zt.bigBtn,background:g.length>0?"#6f5bd6":"#3a3a3a",opacity:g.length>0?1:.6,cursor:g.length>0?"pointer":"not-allowed"},onClick:y,children:["Comprar (",g.length," tipo",g.length!==1?"s":"",")"]})]})]})]})})}const zt={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",maxWidth:980,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},allDoneBox:{background:"#0f1320",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"14px",fontWeight:800,textAlign:"center"},vendorRow:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:10,marginBottom:12},vendorBtn:{padding:"10px 12px",borderRadius:10,border:"1px solid",color:"#fff",fontWeight:800,cursor:"pointer"},products:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:12,margin:"4px 0 10px"},productCard:{textAlign:"center",padding:"16px 14px",borderRadius:14,border:"2px solid",color:"#fff"},pill:t=>({display:"inline-block",background:t,color:"#111",fontWeight:900,padding:"4px 8px",borderRadius:999,marginBottom:8}),actionsRow:{display:"flex",alignItems:"center",gap:12,margin:"6px 0 6px"},smallBtn:{padding:"10px 14px",borderRadius:10,border:"none",color:"#fff",fontWeight:800,cursor:"pointer"},btnRow:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:12},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",color:"#fff",fontWeight:900,cursor:"pointer"}};function Gx({onResolve:t,currentCash:e=0}){const n=k.useRef(null),r=i=>{var l,u;(l=i==null?void 0:i.preventDefault)==null||l.call(i),(u=i==null?void 0:i.stopPropagation)==null||u.call(i),t==null||t({action:"SKIP"})};k.useEffect(()=>{const i=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var l,u;return(u=(l=n.current)==null?void 0:l.focus)==null?void 0:u.call(l)},0),()=>{document.body.style.overflow=i}},[]);const o=i=>()=>{t==null||t({action:"OPEN",open:String(i).toUpperCase()})},s=[{key:"mix",title:"Mix Produtos",lines:["Nvel A: $12000","Nvel B: $6000","Nvel C: $3000","Nvel D: $1000"],onBuy:o("MIX")},{key:"gestor",title:"Gestor Comercial",lines:["Contratao: $5000","Manuteno: $3000"],onBuy:o("MANAGER")},{key:"inside",title:"Inside Sales",lines:["Contratao: $3000","Manuteno: $2000"],onBuy:o("INSIDE")},{key:"field",title:"Field Sales",lines:["Contratao: $3000","Manuteno: $2000"],onBuy:o("FIELD")},{key:"vendedor",title:"Vendedor Comum",lines:["Contratao: $1500","Despesas: $1000"],onBuy:o("COMMON")},{key:"erp",title:"ERP/Sistemas",lines:["Nvel A: $10000","Nvel B: $4000","Nvel C: $1500","Nvel D: $500"],onBuy:o("ERP")},{key:"carteira",title:"Carteira de Clientes",lines:["Aquisio: $1000"],onBuy:o("CLIENTS")},{key:"training",title:"Treinamento",lines:["Azul: $500","Amarelo: $500","Roxo: $500"],onBuy:o("TRAINING")}];return a.jsx("div",{style:qn.wrap,role:"dialog","aria-modal":"true",children:a.jsxs("div",{style:qn.card,children:[a.jsx("button",{ref:n,type:"button",style:qn.close,onClick:r,"aria-label":"Fechar",children:""}),a.jsx("h2",{style:qn.title,children:"Direto de Compra  escolha uma casa para adquirir:"}),a.jsxs("div",{style:{marginBottom:8,opacity:.8,fontSize:13},children:["Saldo atual: ",a.jsxs("b",{children:["$",Number(e).toLocaleString()]})]}),a.jsx("div",{style:qn.grid,children:s.map(i=>a.jsxs("div",{style:qn.cell,children:[a.jsx("div",{style:qn.cellTitle,children:i.title}),a.jsx("ul",{style:qn.lines,children:i.lines.map((l,u)=>a.jsx("li",{children:l},u))}),a.jsx("button",{type:"button",style:qn.buyBtn,onClick:i.onBuy,children:"Comprar"})]},i.key))}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:16},children:a.jsx("button",{type:"button",style:{...qn.buyBtn,background:"#666"},onClick:r,children:"No Comprar"})})]})})}const qn={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(1000px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 16px",fontWeight:800},grid:{display:"grid",gridTemplateColumns:"repeat(4, minmax(180px, 1fr))",gap:12},cell:{background:"#0f1320",border:"1px solid rgba(255,255,255,.08)",borderRadius:12,padding:12,display:"flex",flexDirection:"column",gap:8,minHeight:160},cellTitle:{fontWeight:800,marginBottom:4},lines:{margin:0,padding:"0 0 0 16px",opacity:.85,lineHeight:1.3},buyBtn:{marginTop:"auto",alignSelf:"center",minWidth:140,padding:"10px 14px",borderRadius:10,border:"none",background:"#3fbf49",color:"#09110f",fontWeight:900,cursor:"pointer"}};function mf({onResolve:t,currentCash:e=0}){const n=k.useRef(null),[r,o]=k.useState(""),{pushModal:s,awaitTop:i}=Ht(),l=3e3,u=2e3,c=1500,d=k.useMemo(()=>{const m=Number(r);return Number.isFinite(m)&&m>0?Math.floor(m):0},[r]),h=d*l,f=d>0,g=Math.max(0,Math.floor(Number(e||0)/l)),x=m=>{var y,w;(y=m==null?void 0:m.preventDefault)==null||y.call(m),(w=m==null?void 0:m.stopPropagation)==null||w.call(m),t==null||t({action:"SKIP"})},b=m=>{const y=Number(r)||0,w=Math.min(g||1/0,y+m);o(w||"")},_=()=>o(g||""),p=async()=>{if(!f)return;const m=Number(e||0),y=Number(h||0);if(m<y){s(a.jsx(gr,{requiredAmount:y,currentCash:m,title:"Saldo insuficiente para contratar Inside Sales",message:`Voc precisa de $ ${y.toLocaleString()} mas possui $ ${m.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",qty:d,headcount:d,unitHire:l,total:h,cost:h,totalCost:h,baseExpense:u,baseRevenue:c})};return k.useEffect(()=>{const m=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var y,w;return(w=(y=n.current)==null?void 0:y.focus)==null?void 0:w.call(y)},0),()=>{document.body.style.overflow=m}},[]),a.jsx("div",{style:ct.wrap,role:"dialog","aria-modal":"true","aria-label":"Inside Sales",children:a.jsxs("div",{style:ct.card,children:[a.jsx("button",{ref:n,type:"button",style:ct.close,onClick:x,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:ct.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Inside Sales"})," quer comprar:"]}),a.jsxs("div",{style:ct.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"INSIDE SALES (SDR/BDR + CLOSER + CS)"}),a.jsxs("div",{children:[a.jsx("b",{children:"Base para clculo despesa:"}),"  quantidade ",a.jsx("b",{children:"field sales"})," ou ",a.jsx("b",{children:"inside sales"}),"."]}),a.jsxs("div",{children:[a.jsx("b",{children:"Base para clculo faturamento:"}),"  quantidade ",a.jsx("b",{children:"mxima de clientes que cada vendedor pode atender"}),"."]})]}),a.jsxs("div",{style:ct.saldoRow,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:g})]})]}),a.jsxs("div",{style:ct.inputRow,children:[a.jsx("input",{type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Inside Sales",value:r,onChange:m=>o(m.target.value),style:ct.input}),a.jsxs("div",{style:ct.quickBtns,children:[a.jsx("button",{type:"button",style:ct.quickBtn,onClick:()=>b(1),children:"+1"}),a.jsx("button",{type:"button",style:ct.quickBtn,onClick:()=>b(5),children:"+5"}),a.jsx("button",{type:"button",style:ct.quickBtn,onClick:()=>b(10),children:"+10"}),a.jsx("button",{type:"button",style:{...ct.quickBtn,fontWeight:900},onClick:_,children:"Mx"})]}),a.jsxs("div",{style:ct.totalBox,children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(h).toLocaleString()]})]})]}),a.jsxs("div",{style:ct.cards,children:[a.jsx(Ei,{title:"Sem certificado",bg:"#2a2f3b",pill:"BASE",lines:[`Contratao: $ ${l.toLocaleString()}`,`Despesa: $ ${u.toLocaleString()}`,`Faturamento: $ ${c.toLocaleString()}`]}),a.jsx(Ei,{title:"1 certificado",bg:"#f1c40f",pill:"NVEL 1",dark:!0,lines:["Contratao: ","Despesa: $ 2.100","Faturamento: $ 2.000"]}),a.jsx(Ei,{title:"2 certificados",bg:"#a78bfa",pill:"NVEL 2",dark:!0,lines:["Contratao: ","Despesa: $ 2.200","Faturamento: $ 2.500"]}),a.jsx(Ei,{title:"3 certificados",bg:"#8b5cf6",pill:"NVEL 3",dark:!0,lines:["Contratao: ","Despesa: $ 2.300","Faturamento: $ 3.000"]})]}),a.jsxs("div",{style:ct.actions,children:[a.jsx("button",{type:"button",style:{...ct.bigBtn,background:"#666",color:"#fff"},onClick:x,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...ct.bigBtn,background:f?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:p,disabled:!f,title:f?void 0:"Informe uma quantidade vlida",children:["Comprar ",f?`($ ${h.toLocaleString()})`:""]})]})]})})}function Ei({title:t,pill:e,lines:n,bg:r,dark:o=!1}){return a.jsxs("div",{style:{...ct.cardItem,background:r,color:o?"#111":"#fff",borderColor:"rgba(255,255,255,.15)"},children:[a.jsxs("div",{style:ct.cardHeader,children:[a.jsx("span",{style:{...ct.pill,background:o?"#111":"#fff",color:o?"#fff":"#111"},children:e}),a.jsx("div",{style:{fontWeight:900},children:t})]}),a.jsx("ul",{style:ct.lines,children:n.map((s,i)=>a.jsx("li",{children:s},i))})]})}const ct={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldoRow:{display:"flex",justifyContent:"space-between",gap:12,padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10,marginBottom:8},inputRow:{display:"grid",gridTemplateColumns:"1fr auto auto",alignItems:"center",gap:10,marginBottom:12},input:{height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6},quickBtn:{minWidth:44,height:42,borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",fontWeight:800,cursor:"pointer",padding:"0 10px"},totalBox:{padding:"8px 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#0f1320",fontWeight:900},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,margin:"8px 0 14px"},cardItem:{border:"1px solid",borderRadius:14,padding:"14px"},cardHeader:{display:"flex",alignItems:"center",gap:8,marginBottom:8},pill:{fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:8},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function gf({onResolve:t,unitAcquisition:e=1e3,unitMaintenance:n=50,currentCash:r=0}){const o=k.useRef(null),s=k.useRef(null),{pushModal:i,awaitTop:l}=Ht(),[u,c]=k.useState(""),d=k.useMemo(()=>{const E=Math.floor(Number(u));return Number.isFinite(E)&&E>0?E:0},[u]),h=Number(e||0),f=Number(n||0),g=Number(r||0),x=k.useMemo(()=>h<=0?0:Math.max(0,Math.floor(g/h)),[g,h]),b=d*h,_=d*f,p=d>0,m=E=>{var R,D;(R=E==null?void 0:E.preventDefault)==null||R.call(E),(D=E==null?void 0:E.stopPropagation)==null||D.call(E),t==null||t({action:"SKIP"})},y=async()=>{if(p){if(g<b){i(a.jsx(gr,{requiredAmount:b,currentCash:g,title:"Saldo insuficiente para comprar clientes",message:"Voc no possui saldo suficiente para concluir esta aquisio.",okLabel:"Entendi"})),await l();return}t==null||t({action:"BUY",qty:d,unitAcquisition:h,totalCost:b,unitMaintenance:f,maintenanceDelta:_,bensDelta:b,clientsAdded:d})}};k.useEffect(()=>{const E=document.body.style.overflow;document.body.style.overflow="hidden";const R=setTimeout(()=>{var T,v;return(v=(T=o.current)==null?void 0:T.focus)==null?void 0:v.call(T)},0),D=setTimeout(()=>{var T,v;return(v=(T=s.current)==null?void 0:T.focus)==null?void 0:v.call(T)},50),S=T=>{T.key==="Enter"&&(T.preventDefault(),y())};return window.addEventListener("keydown",S),()=>{document.body.style.overflow=E,window.removeEventListener("keydown",S),clearTimeout(R),clearTimeout(D)}},[]);const w=E=>{const R=Math.max(0,Math.min(Math.floor(Number(E)||0),1e6));c(String(R))};return a.jsx("div",{style:Ct.wrap,role:"dialog","aria-modal":"true",onMouseDown:E=>{E.target===E.currentTarget&&E.stopPropagation()},children:a.jsxs("div",{style:Ct.card,onMouseDown:E=>E.stopPropagation(),children:[a.jsx("button",{ref:o,type:"button",style:Ct.close,onClick:m,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Ct.title,children:["Voc pode escolher quantos clientes quer comprar,",a.jsx("br",{}),"Digite o nmero de clientes:"]}),a.jsxs("p",{style:Ct.warn,children:[a.jsx("b",{children:"Mas cuidado com a capacidade de atendimento da sua equipe!"}),a.jsx("br",{}),"Se o jogador adquirir mais clientes do que os vendedores podem atender, assim que passar na casa ",a.jsx("i",{children:"Faturamento do Ms"})," no receber o faturamento dos clientes excedentes e perder o(s) cliente(s) que no foram atendidos."]}),a.jsxs("div",{style:Ct.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",g.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:x})]})]}),a.jsxs("div",{style:Ct.qtyRow,children:[a.jsx("input",{ref:s,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Clientes",value:u,onChange:E=>w(E.target.value),style:Ct.input}),a.jsxs("div",{style:Ct.quickBtns,children:[a.jsx("button",{type:"button",style:Ct.qbtn,onClick:()=>w(d+1),children:"+1"}),a.jsx("button",{type:"button",style:Ct.qbtn,onClick:()=>w(d+5),children:"+5"}),a.jsx("button",{type:"button",style:Ct.qbtn,onClick:()=>w(d+10),children:"+10"}),a.jsx("button",{type:"button",style:Ct.qbtn,onClick:()=>w(x),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:Ct.summary,children:[a.jsxs("div",{children:["Preo por cliente: ",a.jsxs("b",{children:["$ ",h.toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal por cliente: ",a.jsxs("b",{children:["$ ",f.toLocaleString()]})]})]}),a.jsxs("div",{style:Ct.summaryStrong,children:[a.jsxs("div",{children:["Total compra: ",a.jsxs("b",{children:["$ ",Number(b).toLocaleString()]})]}),a.jsxs("div",{children:["Manuteno mensal adicionada: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]})]}),a.jsxs("div",{style:Ct.actions,children:[a.jsx("button",{type:"button",style:{...Ct.bigBtn,background:"#666",color:"#fff"},onClick:m,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...Ct.bigBtn,background:p?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:y,disabled:!p,title:p?g<b?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",p?`($ ${b.toLocaleString()})`:""]})]})]})})}const Ct={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(820px, 92vw)",maxWidth:820,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},warn:{background:"#271c12",border:"1px solid rgba(255,180,0,.35)",color:"#ffd489",borderRadius:10,padding:"10px 12px",margin:"0 0 12px"},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},summary:{display:"flex",justifyContent:"space-between",gap:10,border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginBottom:8,fontWeight:700,flexWrap:"wrap"},summaryStrong:{display:"flex",justifyContent:"space-between",gap:10,border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginBottom:10,fontWeight:800,flexWrap:"wrap"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:4,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function yf({onResolve:t,unitHire:e=5e3,unitExpense:n=3e3,managesUpTo:r=7,currentCash:o=0}){const s=k.useRef(null),i=k.useRef(null),{pushModal:l,awaitTop:u}=Ht(),[c,d]=k.useState(""),h=Number(e||0),f=Number(n||0),g=Number(o||0),x=k.useMemo(()=>{const R=Math.floor(Number(c));return Number.isFinite(R)&&R>0?R:0},[c]),b=k.useMemo(()=>h<=0?0:Math.max(0,Math.floor(g/h)),[g,h]),_=x*h,p=x*f,m=x>0,y=R=>{const D=Math.floor(Number(R)||0),S=Math.max(0,Math.min(D,1e6));d(String(S))},w=R=>{var D,S;(D=R==null?void 0:R.preventDefault)==null||D.call(R),(S=R==null?void 0:R.stopPropagation)==null||S.call(R),t==null||t({action:"SKIP"})},E=async()=>{if(m){if(g<_){l(a.jsx(gr,{requiredAmount:_,currentCash:g,title:"Saldo insuficiente para contratar Gestores",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await u();return}t==null||t({action:"BUY",role:"MANAGER",qty:x,headcount:x,gestoresDelta:x,unitHire:h,unitExpense:f,totalHire:_,totalExpense:p,cost:_,total:_,cashDelta:-_,expenseDelta:p,hudUpdate:{category:"Gestores Comerciais",addQty:x}})}};return k.useEffect(()=>{const R=document.body.style.overflow;document.body.style.overflow="hidden";const D=setTimeout(()=>{var v,A;return(A=(v=s.current)==null?void 0:v.focus)==null?void 0:A.call(v)},0),S=setTimeout(()=>{var v,A;return(A=(v=i.current)==null?void 0:v.focus)==null?void 0:A.call(v)},60),T=v=>{v.key==="Enter"&&(v.preventDefault(),E())};return window.addEventListener("keydown",T),()=>{document.body.style.overflow=R,window.removeEventListener("keydown",T),clearTimeout(D),clearTimeout(S)}},[]),a.jsx("div",{style:We.wrap,role:"dialog","aria-modal":"true",onMouseDown:R=>{R.target===R.currentTarget&&R.stopPropagation()},children:a.jsxs("div",{style:We.card,onMouseDown:R=>R.stopPropagation(),children:[a.jsx("button",{ref:s,type:"button",style:We.close,onClick:w,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:We.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Gestores"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de gestores:"]}),a.jsxs("div",{style:We.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",g.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{style:We.qtyRow,children:[a.jsx("input",{ref:i,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Gestores",value:c,onChange:R=>y(R.target.value),style:We.input}),a.jsxs("div",{style:We.quickBtns,children:[a.jsx("button",{type:"button",style:We.qbtn,onClick:()=>y(x+1),children:"+1"}),a.jsx("button",{type:"button",style:We.qbtn,onClick:()=>y(x+5),children:"+5"}),a.jsx("button",{type:"button",style:We.qbtn,onClick:()=>y(x+10),children:"+10"}),a.jsx("button",{type:"button",style:We.qbtn,onClick:()=>y(b),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:We.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"GESTOR COMERCIAL"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo de despesa: ",a.jsx("b",{children:"x quantidade de Gestores"}),".",a.jsx("br",{}),"Cada Gestor gerencia at ",a.jsx("b",{children:r})," colaboradores."]}),a.jsxs("div",{style:We.table,children:[a.jsxs("div",{style:We.trHead,children:[a.jsx("div",{style:We.th,children:"Certificao"}),a.jsx("div",{style:We.th,children:"Contratao"}),a.jsx("div",{style:We.th,children:"Despesa"}),a.jsx("div",{style:We.th,children:"Efeito"})]}),a.jsx(ji,{label:"Sem Certificado",hire:5e3,expense:3e3,revenue:"potencializa colaboradores em 20%"}),a.jsx(ji,{label:"Com 1 certificado",hire:"-",expense:3500,revenue:"potencializa colaboradores em 30%"}),a.jsx(ji,{label:"Com 2 certificados",hire:"-",expense:4e3,revenue:"potencializa colaboradores em 40%"}),a.jsx(ji,{label:"Com 3 certificados",hire:"-",expense:4500,revenue:"potencializa colaboradores em 60%"})]})]}),a.jsxs("div",{style:We.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / gestor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / gestor"]})]}),a.jsxs("div",{style:We.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]})]}),a.jsxs("div",{style:We.actions,children:[a.jsx("button",{type:"button",style:{...We.bigBtn,background:"#666",color:"#fff"},onClick:w,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...We.bigBtn,background:m?"#3fbf49":"#2f5d33",color:"#09110f"},onClick:E,disabled:!m,title:m?g<_?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",m?`(${x})`:""]})]})]})})}function ji({label:t,hire:e,expense:n,revenue:r}){const o=s=>typeof s=="number"?`$ ${Number(s).toLocaleString()}`:s;return a.jsxs("div",{style:We.tr,children:[a.jsx("div",{style:We.td,children:t}),a.jsx("div",{style:We.td,children:o(e)}),a.jsx("div",{style:We.td,children:o(n)}),a.jsx("div",{style:We.td,children:r})]})}const We={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"12px",background:"#101522",marginBottom:12},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,overflow:"hidden"},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 3fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 3fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function vf({onResolve:t,unitHire:e=3e3,unitExpense:n=2e3,attendsUpTo:r=5,currentCash:o=0}){const s=k.useRef(null),i=k.useRef(null),{pushModal:l,awaitTop:u}=Ht(),[c,d]=k.useState(""),h=Number(e||0),f=Number(n||0),g=Number(o||0),x=k.useMemo(()=>{const S=Math.floor(Number(c));return Number.isFinite(S)&&S>0?S:0},[c]),b=k.useMemo(()=>h<=0?0:Math.max(0,Math.floor(g/h)),[g,h]),_=x*h,p=x*f,y=x*1500,w=x>0,E=S=>{const T=Math.floor(Number(S)||0),v=Math.max(0,Math.min(T,1e6));d(String(v))},R=S=>{var T,v;(T=S==null?void 0:S.preventDefault)==null||T.call(S),(v=S==null?void 0:S.stopPropagation)==null||v.call(S),t==null||t({action:"SKIP"})},D=async()=>{if(w){if(g<_){l(a.jsx(gr,{requiredAmount:_,currentCash:g,title:"Saldo insuficiente para contratar Field Sales",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await u();return}t==null||t({action:"BUY",qty:x,unitHire:h,unitExpense:f,totalHire:_,totalExpense:p,cashDelta:-_,expenseDelta:p,revenueDelta:y,cost:_,total:_,role:"FIELD"})}};return k.useEffect(()=>{const S=document.body.style.overflow;document.body.style.overflow="hidden";const T=setTimeout(()=>{var O,I;return(I=(O=s.current)==null?void 0:O.focus)==null?void 0:I.call(O)},0),v=setTimeout(()=>{var O,I;return(I=(O=i.current)==null?void 0:O.focus)==null?void 0:I.call(O)},50),A=O=>{O.key==="Enter"&&(O.preventDefault(),D())};return window.addEventListener("keydown",A),()=>{document.body.style.overflow=S,window.removeEventListener("keydown",A),clearTimeout(T),clearTimeout(v)}},[]),a.jsx("div",{style:Ve.wrap,role:"dialog","aria-modal":"true",onMouseDown:S=>{S.target===S.currentTarget&&S.stopPropagation()},children:a.jsxs("div",{style:Ve.card,onMouseDown:S=>S.stopPropagation(),children:[a.jsx("button",{ref:s,type:"button",style:Ve.close,onClick:R,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Ve.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Field Sales"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de vendedores:"]}),a.jsxs("div",{style:Ve.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",g.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{style:Ve.qtyRow,children:[a.jsx("input",{ref:i,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Field Sales",value:c,onChange:S=>E(S.target.value),style:Ve.input}),a.jsxs("div",{style:Ve.quickBtns,children:[a.jsx("button",{type:"button",style:Ve.qbtn,onClick:()=>E(x+1),children:"+1"}),a.jsx("button",{type:"button",style:Ve.qbtn,onClick:()=>E(x+5),children:"+5"}),a.jsx("button",{type:"button",style:Ve.qbtn,onClick:()=>E(x+10),children:"+10"}),a.jsx("button",{type:"button",style:Ve.qbtn,onClick:()=>E(b),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:Ve.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"FIELD SALES (REPRESENTANTES COMERCIAIS)"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo de despesa: ",a.jsx("b",{children:"x quantidade de Field Sales"}),".",a.jsx("br",{}),"Base para clculo de faturamento: ",a.jsx("b",{children:"x quantidade mxima de clientes que cada vendedor pode atender"}),".",a.jsx("br",{}),"Cada vendedor atende at ",a.jsx("b",{children:r})," clientes."]}),a.jsxs("div",{style:Ve.table,children:[a.jsxs("div",{style:Ve.trHead,children:[a.jsx("div",{style:Ve.th,children:"Certificao"}),a.jsx("div",{style:Ve.th,children:"Contratao"}),a.jsx("div",{style:Ve.th,children:"Despesa"}),a.jsx("div",{style:Ve.th,children:"Faturamento"})]}),a.jsx(Ci,{label:"S/ Certificado",hire:"$ 3.000",expense:"$ 2.000",revenue:"$ 1.500"}),a.jsx(Ci,{label:"Com 1 certificado",hire:"-",expense:"$ 2.100",revenue:"$ 2.000"}),a.jsx(Ci,{label:"Com 2 certificados",hire:"-",expense:"$ 2.200",revenue:"$ 2.500"}),a.jsx(Ci,{label:"Com 3 certificados",hire:"-",expense:"$ 2.300",revenue:"$ 3.000"})]})]}),a.jsxs("div",{style:Ve.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / vendedor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / vendedor"]})]}),a.jsxs("div",{style:Ve.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(_).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]})]}),a.jsxs("div",{style:Ve.actions,children:[a.jsx("button",{type:"button",style:{...Ve.bigBtn,background:"#666",color:"#fff"},onClick:R,children:"No comprar"}),a.jsxs("button",{type:"button",style:{...Ve.bigBtn,background:w?"#75e16c":"#365b31",color:"#0b120a"},onClick:D,disabled:!w,title:w?g<_?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:["Comprar ",w?`(${x})`:""]})]})]})})}function Ci({label:t,hire:e,expense:n,revenue:r}){return a.jsxs("div",{style:Ve.tr,children:[a.jsx("div",{style:Ve.td,children:t}),a.jsx("div",{style:Ve.td,children:e}),a.jsx("div",{style:Ve.td,children:n}),a.jsx("div",{style:Ve.td,children:r})]})}const Ve={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#0f1320",color:"#fff",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:"12px",background:"#101522",marginBottom:12},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,overflow:"hidden"},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function xf({onResolve:t,unitHire:e=1500,unitExpense:n=1e3,attendsUpTo:r=2,currentCash:o=0}){const[s,i]=k.useState(""),l=k.useRef(null),u=k.useRef(null),{pushModal:c,awaitTop:d}=Ht(),h=Number(e||0),f=Number(n||0),g=Number(o||0),x=600,b=k.useMemo(()=>{const D=Math.floor(Number(s));return Number.isFinite(D)&&D>0?D:0},[s]),_=k.useMemo(()=>h<=0?0:Math.max(0,Math.floor(g/h)),[g,h]),p=k.useMemo(()=>b*h,[b,h]),m=k.useMemo(()=>b*f,[b,f]),y=b>0,w=D=>{const S=Math.floor(Number(D)||0),T=Math.max(0,Math.min(S,1e6));i(String(T))},E=D=>{var S;(S=D==null?void 0:D.stopPropagation)==null||S.call(D),t==null||t({action:"SKIP"})},R=async()=>{if(!y)return;if(g<p){c(a.jsx(gr,{requiredAmount:p,currentCash:g,title:"Saldo insuficiente para contratar vendedores",message:"Voc no possui saldo suficiente para concluir esta contratao.",okLabel:"Entendi"})),await d();return}const D={action:"BUY",role:"COMMON",qty:b,headcount:b,unitHire:h,unitExpense:f,totalHire:p,totalExpense:m,total:p,cost:p,attendsUpTo:r,cashDelta:-p,expenseDelta:m,revenueDelta:x*b,revenuePerSeller:x,hudUpdate:{category:"Vendedores Comuns",addQty:b}};t==null||t(D)};return k.useEffect(()=>{const D=document.body.style.overflow;document.body.style.overflow="hidden";const S=setTimeout(()=>{var A,O;return(O=(A=l.current)==null?void 0:A.focus)==null?void 0:O.call(A)},0),T=setTimeout(()=>{var A,O;return(O=(A=u.current)==null?void 0:A.focus)==null?void 0:O.call(A)},50),v=A=>{A.key==="Enter"&&(A.preventDefault(),R())};return window.addEventListener("keydown",v),()=>{document.body.style.overflow=D,window.removeEventListener("keydown",v),clearTimeout(S),clearTimeout(T)}},[]),a.jsx("div",{style:Ge.wrap,role:"dialog","aria-modal":"true","aria-label":"Comprar Vendedores Comuns",onMouseDown:D=>{D.target===D.currentTarget&&D.stopPropagation()},children:a.jsxs("div",{style:Ge.card,onMouseDown:D=>D.stopPropagation(),children:[a.jsx("button",{ref:l,type:"button",style:Ge.close,onClick:E,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:Ge.title,children:["Voc pode escolher quantos ",a.jsx("b",{children:"Vendedores Comuns"})," quer comprar,",a.jsx("br",{}),"Digite o nmero de vendedores:"]}),a.jsxs("div",{style:Ge.inlineInfo,children:[a.jsxs("div",{children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",g.toLocaleString()]})]}),a.jsxs("div",{children:["Mximo por saldo: ",a.jsx("b",{children:_})]})]}),a.jsxs("div",{style:Ge.qtyRow,children:[a.jsx("input",{ref:u,type:"number",inputMode:"numeric",min:1,placeholder:"Digite o nmero de Vendedores Comuns",value:s,onChange:D=>w(D.target.value),style:Ge.input}),a.jsxs("div",{style:Ge.quickBtns,children:[a.jsx("button",{type:"button",style:Ge.qbtn,onClick:()=>w(b+1),children:"+1"}),a.jsx("button",{type:"button",style:Ge.qbtn,onClick:()=>w(b+5),children:"+5"}),a.jsx("button",{type:"button",style:Ge.qbtn,onClick:()=>w(b+10),children:"+10"}),a.jsx("button",{type:"button",style:Ge.qbtn,onClick:()=>w(_),title:"Comprar o mximo possvel com o saldo atual",children:"Mx"})]})]}),a.jsxs("div",{style:Ge.infoBox,children:[a.jsx("div",{style:{fontWeight:800,marginBottom:6},children:"VENDEDOR COMUM (FAZ TUDO)"}),a.jsxs("div",{style:{opacity:.9,marginBottom:8},children:["Base para clculo despesa: ",a.jsx("b",{children:"x quantidade vendedor comum"}),".",a.jsx("br",{}),"Base para clculo faturamento: ",a.jsx("b",{children:"x quantidade mxima de clientes que cada vendedor pode atender"}),".",a.jsx("br",{}),a.jsxs("b",{children:["Atende at ",r," clientes"]}),"."]}),a.jsxs("div",{style:Ge.table,children:[a.jsxs("div",{style:Ge.trHead,children:[a.jsx("div",{style:Ge.th,children:"Certificao"}),a.jsx("div",{style:Ge.th,children:"Contratao"}),a.jsx("div",{style:Ge.th,children:"Despesa"}),a.jsx("div",{style:Ge.th,children:"Faturamento"})]}),a.jsx(Ri,{label:"S/ Certificado",hire:"$ 1.500",expense:"$ 1.000",revenue:"$ 600"}),a.jsx(Ri,{label:"Com 1 certificado",hire:"-",expense:"$ 1.100",revenue:"$ 700"}),a.jsx(Ri,{label:"Com 2 certificados",hire:"-",expense:"$ 1.200",revenue:"$ 800"}),a.jsx(Ri,{label:"Com 3 certificados",hire:"-",expense:"$ 1.300",revenue:"$ 900"})]})]}),a.jsxs("div",{style:Ge.summary,children:[a.jsxs("div",{children:["Custo de contratao: ",a.jsxs("b",{children:["$ ",Number(e).toLocaleString()]})," / vendedor"]}),a.jsxs("div",{children:["Despesa mensal: ",a.jsxs("b",{children:["$ ",Number(n).toLocaleString()]})," / vendedor"]})]}),a.jsxs("div",{style:Ge.summaryStrong,children:[a.jsxs("div",{children:["Total contratar: ",a.jsxs("b",{children:["$ ",Number(p).toLocaleString()]})]}),a.jsxs("div",{children:["Despesa mensal total: ",a.jsxs("b",{children:["$ ",Number(m).toLocaleString()]})]})]}),a.jsxs("div",{style:Ge.actions,children:[a.jsx("button",{type:"button",style:{...Ge.bigBtn,background:"#666",color:"#fff"},onClick:E,children:"No comprar"}),a.jsx("button",{type:"button",disabled:!y,style:{...Ge.bigBtn,background:y?"#7cbe1a":"#3a3f4a",color:"#0d1200",fontWeight:900},onClick:R,title:y?g<p?"Saldo insuficiente":void 0:"Informe uma quantidade vlida",children:"Comprar"})]})]})})}function Ri({label:t,hire:e,expense:n,revenue:r}){return a.jsxs("div",{style:Ge.tr,children:[a.jsx("div",{style:Ge.td,children:t}),a.jsx("div",{style:Ge.td,children:e}),a.jsx("div",{style:Ge.td,children:n}),a.jsx("div",{style:Ge.td,children:r})]})}const Ge={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(880px, 92vw)",maxWidth:880,background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px 20px 16px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:800,lineHeight:1.3},inlineInfo:{display:"flex",justifyContent:"space-between",gap:10,margin:"0 0 8px",opacity:.95,fontWeight:700,flexWrap:"wrap"},qtyRow:{display:"flex",gap:8,alignItems:"center",marginBottom:12,flexWrap:"wrap"},input:{flex:"1 1 260px",height:42,borderRadius:10,padding:"0 12px",border:"1px solid rgba(255,255,255,.18)",background:"#111522",color:"#eef2f7",outline:"none"},quickBtns:{display:"flex",gap:6,flexWrap:"wrap"},qbtn:{height:42,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"#2a2f3b",color:"#fff",cursor:"pointer",fontWeight:800},infoBox:{background:"#161a28",border:"1px solid rgba(255,255,255,.12)",borderRadius:14,padding:14,marginTop:6},table:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,overflow:"hidden",marginTop:8},trHead:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#121621"},th:{padding:"10px 12px",fontWeight:800,borderLeft:"1px solid rgba(255,255,255,.06)"},tr:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",background:"#0f1320"},td:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)",borderLeft:"1px solid rgba(255,255,255,.06)"},summary:{display:"flex",justifyContent:"space-between",border:"1px dashed rgba(255,255,255,.2)",borderRadius:10,padding:"8px 12px",marginTop:10,flexWrap:"wrap",gap:10},summaryStrong:{display:"flex",justifyContent:"space-between",border:"1px solid rgba(255,255,255,.25)",borderRadius:10,padding:"10px 12px",marginTop:8,fontWeight:800,flexWrap:"wrap",gap:10},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:12,flexWrap:"wrap"},bigBtn:{minWidth:180,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function bf({onResolve:t,currentCash:e,currentLevel:n=null,mixOwned:r=null}){const o=k.useRef(null),{pushModal:s,awaitTop:i}=Ht(),l={A:{compra:12e3,despesa:700,faturamento:1200,color:"#1d4ed8",pill:"NVEL A",label:"100 produtos"},B:{compra:6e3,despesa:400,faturamento:600,color:"#16a34a",pill:"NVEL B",label:"50 produtos"},C:{compra:3e3,despesa:200,faturamento:300,color:"#f59e0b",pill:"NVEL C",label:"20 produtos"},D:{compra:1e3,despesa:50,faturamento:100,color:"#6b7280",pill:"NVEL D",label:"5 produtos"}};async function u(d){if(r?r[d]===!0:n===d)return;const f=l[d],g=Number((f==null?void 0:f.compra)||0),x=Number(e);if(Number.isFinite(x)&&x>=0&&x<g){s(a.jsx(gr,{requiredAmount:g,currentCash:x,title:"Saldo insuficiente para adquirir o Mix de Produtos",message:`Voc precisa de $ ${g.toLocaleString()} mas possui $ ${x.toLocaleString()}.`,okLabel:"Entendi"})),await i();return}t==null||t({action:"BUY",level:d,...f})}function c(){t==null||t({action:"SKIP"})}return k.useEffect(()=>{const d=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var h,f;return(f=(h=o.current)==null?void 0:h.focus)==null?void 0:f.call(h)},0),()=>{document.body.style.overflow=d}},[]),a.jsx("div",{style:nn.wrap,role:"dialog","aria-modal":"true","aria-label":"Mix de Produtos",children:a.jsxs("div",{style:nn.card,children:[a.jsx("button",{ref:o,type:"button",style:nn.close,onClick:c,"aria-label":"Fechar",children:""}),a.jsxs("h2",{style:nn.title,children:["Escolha um ",a.jsx("b",{children:"mix de produtos"}),":"]}),a.jsxs("div",{style:nn.note,children:[a.jsx("div",{style:{fontWeight:900,marginBottom:4},children:"MIX DE PRODUTOS"}),a.jsxs("div",{children:["Base para clculo de ",a.jsx("b",{children:"Despesa"}),"/",a.jsx("b",{children:"Faturamento"}),": multiplicar pela ",a.jsx("b",{children:"quantidade total de clientes"}),"."]})]}),Number.isFinite(Number(e))&&a.jsxs("div",{style:nn.saldo,children:["Saldo disponvel: ",a.jsxs("b",{children:["$ ",Number(e||0).toLocaleString()]})]}),a.jsx("div",{style:nn.cards,children:["A","B","C","D"].map(d=>{const h=l[d],f=r?r[d]===!0:n===d,g=f;return a.jsxs("div",{style:{...nn.cardItem,borderColor:f?"#16a34a":"rgba(255,255,255,.15)",opacity:g?.6:1},children:[a.jsx("div",{style:{...nn.pill,background:f?"#16a34a":"#fff",color:f?"#fff":"#111"},children:f?" ADQUIRIDO":h.pill}),a.jsx("div",{style:{...nn.cardBadge,background:h.color}}),a.jsxs("ul",{style:nn.lines,children:[a.jsx("li",{children:a.jsx("b",{children:h.label})}),a.jsxs("li",{children:["Compra: ",a.jsxs("b",{children:["$ ",h.compra.toLocaleString()]})]}),a.jsxs("li",{children:["Despesa: ",a.jsxs("b",{children:["$ ",h.despesa.toLocaleString()]})]}),a.jsxs("li",{children:["Faturamento: ",a.jsxs("b",{children:["$ ",h.faturamento.toLocaleString()]})]})]}),a.jsx("button",{type:"button",style:{...nn.buyBtn,background:g?"#6b7280":"#2442f9",cursor:g?"not-allowed":"pointer"},onClick:()=>u(d),disabled:g,title:g?`Mix nvel ${d} j adquirido`:`Comprar Mix de Produtos ${d}`,children:g?"J Adquirido":`Comprar ${d}`})]},d)})}),a.jsx("div",{style:nn.actions,children:a.jsx("button",{type:"button",style:{...nn.bigBtn,background:"#444",color:"#fff"},onClick:c,children:"No comprar"})})]})})}const nn={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(980px, 94vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:16,padding:"20px",boxShadow:"0 10px 40px rgba(0,0,0,.4)",border:"1px solid rgba(255,255,255,.12)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},title:{margin:"6px 0 12px",fontWeight:900},note:{background:"#2a2f3b",border:"1px solid rgba(255,255,255,.15)",borderRadius:12,padding:"10px 12px",margin:"0 0 10px"},saldo:{margin:"0 0 10px",padding:"8px 12px",border:"1px dashed rgba(255,255,255,.25)",borderRadius:10},cards:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12,marginTop:8},cardItem:{background:"#0f1320",border:"1px solid",borderRadius:14,padding:"12px",display:"flex",flexDirection:"column",gap:8},cardBadge:{width:"100%",height:6,borderRadius:999,opacity:.9},pill:{alignSelf:"flex-start",fontSize:12,fontWeight:900,padding:"4px 8px",borderRadius:999,color:"#111"},lines:{margin:0,padding:"0 0 0 16px",lineHeight:1.35},buyBtn:{marginTop:"auto",padding:"10px 12px",borderRadius:10,border:"none",fontWeight:900,cursor:"pointer",background:"#2442f9",color:"#fff"},actions:{display:"flex",gap:12,justifyContent:"center",marginTop:14},bigBtn:{minWidth:160,padding:"14px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer"}};function qx({onResolve:t,player:e={}}){const n=k.useRef(null),r=(_,p=0)=>Number.isFinite(Number(_))?Number(_):p,o=_=>r(_.am,0)>0,s=_=>r(_.az,0)>0,i=_=>r(_.rox,0)>0,l=_=>String(_.erpLevel||_.erpSistemas||"D").toUpperCase()==="A",u=_=>{const p=String(_.mixProdutos||"D").toUpperCase();return p==="A"||p==="B"},c=_=>{var m;const p=y=>{if(!y)return 0;try{const w=Array.isArray(y)?y:Object.values(y);return new Set(w).size}catch{return 0}};return(m=_.trainingsByVendor)!=null&&m.gestor?p(_.trainingsByVendor.gestor):r(_.gestoresCertificados,0)},d=_=>r(_.vendedoresComuns)+r(_.insideSales)+r(_.fieldSales)+r(_.gestores??_.gestoresComerciais??_.managers),h=k.useMemo(()=>[{id:"gov_fgts",kind:"SORTE",title:"Ao Governamental Positiva",text:"Liberao de FGTS aumentou o poder de compra. Receba 5 novos clientes (se tiver equipe para atender).",clientsDelta:5},{id:"referral_bonus",kind:"SORTE",title:"Indicao Lucrativa",text:"Um cliente indicou amigos e a primeira compra foi tima. Receba R$ 800,00.",cashDelta:800},{id:"network_cert_mgr",kind:"SORTE",title:"Rede Estratgica",text:"Para cada gestor com certificado, receba R$ 5.000,00.",_compute:_=>({cashDelta:5e3*c(_)})},{id:"innovation_invest",kind:"SORTE",title:"Inovao Premiada",text:"Se tiver infraestrutura (mix/sistemas) nvel A ou B, receba aporte de R$ 25.000,00.",_compute:_=>({cashDelta:u(_)?25e3:0})},{id:"segmentation",kind:"SORTE",title:"Segmentao Inteligente",text:"Novo segmento lucrativo. Receba R$ 1.000,00.",cashDelta:1e3},{id:"casa_bonus_10k",kind:"SORTE",title:"Casagrande Insights",text:"Implementao bem-sucedida. Receba R$ 10.000,00.",cashDelta:1e4},{id:"casa_network_7k",kind:"SORTE",title:"Rede de Contatos Valiosa",text:"Parceria estratgica. Ganhe R$ 7.000,00.",cashDelta:7e3},{id:"casa_strategy_5k",kind:"SORTE",title:"Estratgia Personalizada",text:"Processos melhorados. Receba R$ 5.000,00.",cashDelta:5e3},{id:"casa_best_practices_8k",kind:"SORTE",title:"Melhores Prticas",text:"Eficincia aumentada. Receba R$ 8.000,00.",cashDelta:8e3},{id:"casa_start_6k",kind:"SORTE",title:"Satisfao do Cliente em Alta",text:"Fidelidade e vendas sobem. Receba R$ 6.000,00.",cashDelta:6e3},{id:"casa_change_cert_blue",kind:"SORTE",title:"Gesto de Mudanas Bem-sucedida",text:"Um vendedor generalista concluiu todos os treinamentos. Ganhe um certificado AZUL para esse vendedor.",_compute:()=>({certDelta:{az:1}})},{id:"training_roi_team",kind:"SORTE",title:"Treinamento Personalizado",text:"Receba R$ 500,00 por membro participante.",_compute:_=>({cashDelta:500*Math.max(0,d(_))})},{id:"purple_award_25k",kind:"SORTE",title:"Profissional do Ano (Roxo)",text:"Se houver pelo menos um colaborador com certificado roxo, receba R$ 25.000,00.",_compute:_=>({cashDelta:i(_)?25e3:0})},{id:"reputation_1500",kind:"SORTE",title:"Reputao Impecvel",text:"timas avaliaes elevam a confiana. Receba R$ 1.500,00.",cashDelta:1500},{id:"client_cheer_per_client",kind:"SORTE",title:"Cliente Promotor",text:"Ganhe R$ 500,00 por cada cliente atual.",_compute:_=>({cashDelta:500*Math.max(0,r(_.clients))})},{id:"big_order_freight_save",kind:"SORTE",title:"Grande Pedido + Frete Econmico",text:"Receba R$ 1.500,00.",cashDelta:1500},{id:"sales_win_2k",kind:"SORTE",title:"Vitria de Vendas",text:"Venda aguardada foi fechada. Receba R$ 2.000,00.",cashDelta:2e3},{id:"missed_admission",kind:"REVES",title:"Admisso No Reportada",text:"Multa governamental. Pague R$ 3.000,00.",cashDelta:-3e3},{id:"office_renovation",kind:"REVES",title:"Renovao Custosa",text:"Gastos de obra. Pague R$ 7.000,00.",cashDelta:-7e3},{id:"env_fine_20k",kind:"REVES",title:"Impacto Ambiental",text:"Multa ambiental. Pague R$ 20.000,00.",cashDelta:-2e4},{id:"key_client_at_risk",kind:"REVES",title:"Cliente Chave em Risco",text:"Sem certificado AMARELO: perca 1 cliente e pague R$ 2.000,00.",_compute:_=>o(_)?{clientsDelta:0,cashDelta:0,_overrideText:"Voc possui certificado amarelo. Nada acontece."}:{clientsDelta:-1,cashDelta:-2e3}},{id:"social_crisis",kind:"REVES",title:"Crise nas Redes",text:"Pague R$ 400,00 e perca 2 clientes.",cashDelta:-400,clientsDelta:-2},{id:"car_break",kind:"REVES",title:"Carro Quebrou",text:"Conserto urgente. Pague R$ 1.000,00.",cashDelta:-1e3},{id:"service_improvement_1k",kind:"REVES",title:"Aprimoramentos de Servio",text:"Pague R$ 1.000,00.",cashDelta:-1e3},{id:"recovery_failed_5k",kind:"REVES",title:"Recuperao Mal Sucedida",text:"Cancele grande pedido. Pague R$ 5.000,00.",cashDelta:-5e3},{id:"discount_pressure_1k",kind:"REVES",title:"Descontos Forados",text:"Sem certificado verde: perca R$ 1.000,00 de lucro.",cashDelta:-1e3},{id:"domino_2k",kind:"REVES",title:"Efeito Domin",text:"Cancelamentos em cadeia. Perca R$ 2.000,00.",cashDelta:-2e3},{id:"needs_change_lose4",kind:"REVES",title:"Necessidades Mudaram",text:"Sem certificado AZUL: perca 4 clientes.",_compute:_=>s(_)?{clientsDelta:0,_overrideText:"Voc possui certificado azul. Nada acontece."}:{clientsDelta:-4}},{id:"payroll_error_1k",kind:"REVES",title:"Erro na Folha",text:"Corrigir problema. Pague R$ 1.000,00.",cashDelta:-1e3},{id:"strike_lose5",kind:"REVES",title:"Greve Inesperada",text:"Atrasos e perdas. Perca 5 clientes.",clientsDelta:-5},{id:"customs_hold_3k",kind:"REVES",title:"Alfndega",text:"Pague R$ 3.000,00.",cashDelta:-3e3},{id:"cyber_breach_7k_or_A",kind:"REVES",title:"Falha de Segurana",text:"Se NO tiver sistemas nvel A, pague R$ 7.000,00.",_compute:_=>({cashDelta:l(_)?0:-7e3})},{id:"supplier_issue_2k",kind:"REVES",title:"Fornecedor em Crise",text:"Expedio expressa. Pague R$ 2.000,00.",cashDelta:-2e3},{id:"reg_change_30k",kind:"REVES",title:"Regulamentao Nova",text:"Adequao de processos. Pague R$ 30.000,00.",cashDelta:-3e4},{id:"bad_mix_2500",kind:"REVES",title:"Mix de Produtos Desequilibrado",text:"Descontos e liquidaes. Pague R$ 2.500,00.",cashDelta:-2500},{id:"quality_crisis",kind:"REVES",title:"Crise de Qualidade",text:"Perca 1 cliente e pague R$ 1.000,00.",cashDelta:-1e3,clientsDelta:-1}],[]),[f]=k.useState(()=>h[Math.floor(Math.random()*h.length)]),g=k.useMemo(()=>{const _={action:"APPLY_CARD",kind:f.kind,id:f.id,title:f.title};if(typeof f._compute=="function"){const m=f._compute(e||{}),{_overrideText:y,...w}=m||{};return{text:y||f.text,payload:{..._,...w}}}const p={};return Number.isFinite(f.cashDelta)&&(p.cashDelta=Number(f.cashDelta)),Number.isFinite(f.clientsDelta)&&(p.clientsDelta=Number(f.clientsDelta)),{text:f.text,payload:{..._,...p}}},[f,e]),x=()=>t==null?void 0:t(g.payload),b=()=>t==null?void 0:t({action:"SKIP"});return k.useEffect(()=>{const _=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{var p,m;return(m=(p=n.current)==null?void 0:p.focus)==null?void 0:m.call(p)},0),()=>{document.body.style.overflow=_}},[]),a.jsx("div",{style:wr.wrap,role:"dialog","aria-modal":"true","aria-label":"Sorte e Revs",children:a.jsxs("div",{style:wr.card,children:[a.jsx("button",{ref:n,style:wr.close,onClick:b,"aria-label":"Fechar",children:""}),a.jsx("div",{style:wr.badge(f.kind),children:f.kind==="SORTE"?"SORTE":"REVS"}),f.title&&a.jsx("h2",{style:wr.title,children:f.title}),a.jsx("p",{style:wr.text,children:g.text}),a.jsx("div",{style:wr.footer,children:a.jsx("button",{type:"button",style:wr.okBtn,onClick:x,children:"OK"})})]})})}const wr={wrap:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},card:{width:"min(760px, 92vw)",background:"#1b1f2a",color:"#e9ecf1",borderRadius:18,padding:"22px",border:"1px solid rgba(255,255,255,.12)",boxShadow:"0 10px 40px rgba(0,0,0,.4)",position:"relative"},close:{position:"absolute",right:10,top:10,width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"#2a2f3b",color:"#fff",cursor:"pointer"},badge:t=>({display:"inline-block",padding:"6px 12px",borderRadius:999,fontWeight:900,marginBottom:8,background:t==="SORTE"?"#22c55e":"#ef4444",color:"#111"}),title:{margin:"2px 0 6px",fontWeight:900},text:{fontSize:18,lineHeight:1.5,opacity:.95,margin:"6px 0 14px"},footer:{display:"flex",justifyContent:"center"},okBtn:{minWidth:140,padding:"12px 18px",borderRadius:12,border:"none",fontWeight:900,cursor:"pointer",background:"#fff",color:"#111"}};function Hx({value:t=0,onResolve:e}){const n=Number(t||0),r=o=>{var s,i;(s=o==null?void 0:o.preventDefault)==null||s.call(o),(i=o==null?void 0:o.stopPropagation)==null||i.call(o),e==null||e({action:"OK"})};return a.jsx(ti,{zIndex:2147483647,onClose:()=>e==null?void 0:e({action:"CLOSE"}),children:a.jsxs("div",{style:{padding:28,textAlign:"center",pointerEvents:"auto"},children:[a.jsx("div",{style:{fontWeight:900,fontSize:28,color:"#4caf50",letterSpacing:.5,marginBottom:6},children:"FATURAMENTO DO MS"}),a.jsx("div",{style:{opacity:.9,marginBottom:16},children:"Ser creditado o valor do Faturamento ao seu Saldo"}),a.jsxs("div",{style:{fontSize:18,marginBottom:24},children:["no valor de: ",a.jsxs("b",{children:["$ ",n.toLocaleString()]})]}),a.jsx("button",{type:"button",onClick:r,className:"btn",style:{minWidth:120,background:"#8bd65a",color:"#1a1f2a",fontWeight:800,borderRadius:10},children:"OK"})]})})}function Kx({expense:t=0,loanCharge:e=0,onResolve:n}){const r=Number(t||0)+Number(e||0),o=s=>{var i,l;(i=s==null?void 0:s.preventDefault)==null||i.call(s),(l=s==null?void 0:s.stopPropagation)==null||l.call(s),n==null||n({action:"OK"})};return a.jsx(ti,{zIndex:2147483647,onClose:()=>n==null?void 0:n({action:"CLOSE"}),children:a.jsxs("div",{style:{padding:28,textAlign:"center",pointerEvents:"auto"},children:[a.jsx("div",{style:{fontWeight:900,fontSize:26,color:"#ffb74d",letterSpacing:.5,marginBottom:6},children:"DESPESAS DO MS"}),a.jsxs("div",{style:{marginBottom:8},children:["Despesas operacionais:",a.jsxs("b",{children:["-$ ",Number(t).toLocaleString()]})]}),Number(e)>0&&a.jsxs("div",{style:{marginBottom:8,color:"#ffd54f"},children:["Emprstimo cobrado nesta rodada:",a.jsxs("b",{children:["-$ ",Number(e).toLocaleString()]})]}),a.jsxs("div",{style:{margin:"6px 0 18px",opacity:.85},children:["Total a debitar: ",a.jsxs("b",{children:["-$ ",r.toLocaleString()]})]}),a.jsx("button",{type:"button",onClick:o,className:"btn",style:{minWidth:120,background:"#ffcc80",color:"#1a1f2a",fontWeight:800,borderRadius:10},children:"OK"})]})})}const Ae={backdrop:{position:"fixed",inset:0,background:"rgba(0,0,0,.6)",display:"grid",placeItems:"center",zIndex:9999},card:{width:"min(920px, 96vw)",maxHeight:"90vh",overflow:"auto",background:"#15161a",color:"#e9ecf1",border:"1px solid rgba(255,255,255,.08)",borderRadius:20,boxShadow:"0 20px 50px rgba(0,0,0,.5)"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 16px",borderBottom:"1px solid rgba(255,255,255,.08)"},closeBtn:{width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#fff",fontSize:20,cursor:"pointer"},body:{padding:16},lead:{opacity:.95,lineHeight:1.5},bullets:{margin:"8px 0 16px 18px"},rowBtns:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:12,flexWrap:"wrap"},cta:{padding:"12px 16px",border:0,borderRadius:12,color:"#fff",fontWeight:900,cursor:"pointer",boxShadow:"0 10px 24px rgba(0,0,0,.25)"},back:{padding:"10px 14px",borderRadius:12,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#e9ecf1",cursor:"pointer"},subHeader:{marginBottom:8},infoRow:{display:"flex",gap:8,alignItems:"baseline",margin:"4px 0"},input:{width:"100%",padding:"12px 12px",borderRadius:12,background:"#0f1115",color:"#fff",border:"1px solid rgba(255,255,255,.15)",marginTop:10},option:{padding:16,background:"rgba(255,255,255,.04)",border:"1px solid rgba(255,255,255,.08)",borderRadius:14,textAlign:"center",cursor:"pointer"},spin:{width:34,height:34,borderRadius:8,border:"1px solid rgba(255,255,255,.15)",background:"transparent",color:"#fff",fontSize:18,cursor:"pointer"}};function Jx({playerName:t,loanAvailable:e,hasPendingLoan:n,onGoLoan:r,onGoReduce:o,onGoFire:s,onDeclareBankruptcy:i}){return a.jsxs("div",{style:Ae.body,children:[a.jsxs("p",{style:Ae.lead,children:["Voc est sem dinheiro, ",t,". Escolha uma das opes:"]}),n&&a.jsx("div",{style:{...Ae.lead,color:"#ef4444",fontWeight:"bold",marginBottom:"16px"},children:" Voc j possui um emprstimo pendente. Cada jogador s pode ter um emprstimo por vez."}),a.jsxs("ul",{style:Ae.bullets,children:[a.jsxs("li",{children:["Pedir ",a.jsx("b",{children:"emprstimo"})," nico com 50% de juros garantido por 50% dos seus ",a.jsx("b",{children:"BENS"})," (limite ",`$ ${e}`,")."]}),a.jsxs("li",{children:[a.jsx("b",{children:"Reduzir"})," nveis de ",a.jsx("b",{children:"MIX de Produtos"})," ou ",a.jsx("b",{children:"ERP/Sistemas"})," e receber 50% do valor pago."]}),a.jsxs("li",{children:[a.jsx("b",{children:"Demitir"})," funcionrios e receber 50% do valor total."]})]}),a.jsxs("div",{style:Ae.rowBtns,children:[a.jsx("button",{style:{...Ae.cta,background:"#ef4444"},onClick:s,children:"DEMITIR"}),a.jsx("button",{style:{...Ae.cta,background:"#a16207"},onClick:o,children:"REDUZIR"}),a.jsx("button",{style:{...Ae.cta,background:n?"#6b7280":"#16a34a",cursor:n?"not-allowed":"pointer"},onClick:n?void 0:r,disabled:n,children:n?"EMPRSTIMO (J REALIZADO)":"EMPRSTIMO"}),a.jsx("button",{style:{...Ae.cta,background:"#d32f2f",fontWeight:"bold"},onClick:i,children:"DECLARAR FALNCIA"})]})]})}function Yx({loanAvailable:t,alreadyHasLoan:e=!1,onBack:n,onConfirm:r}){const[o,s]=k.useState(""),i=k.useMemo(()=>Math.max(0,Math.floor(Number(o)||0)),[o]),l=!e&&i>0&&i<=Number(t||0),u=()=>{if(e){r==null||r({type:"LOAN_DENIED",reason:"ALREADY_TAKEN"});return}const c=Math.max(0,Math.floor(Number(t)||0)),d=Math.max(0,Math.min(c,i));if(d>0){const h={type:"LOAN",amount:d,cashDelta:d,loan:{amount:d,charged:!1}};console.log("[DEBUG] RecoveryLoan enviando payload:",h),r==null||r(h)}else r==null||r({type:"LOAN_DENIED",reason:"INVALID_AMOUNT"})};return a.jsxs("div",{style:Ae.body,children:[a.jsx("div",{style:Ae.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"EMPRSTIMO"})}),a.jsxs("p",{children:["Voc pode realizar um emprstimo colocando ",a.jsx("b",{children:"50% dos seus BENS"})," como garantia (pago na prxima Despesas Operacionais)."]}),a.jsxs("div",{style:Ae.infoRow,children:[a.jsx("span",{children:"Valor disponvel:"})," ",a.jsxs("b",{children:["$",Number(t||0)]})]}),a.jsxs("div",{style:Ae.infoRow,children:[a.jsx("span",{children:"Valor garantia:"})," ",a.jsxs("b",{children:["$",Number(t||0)]})]}),e&&a.jsx("div",{style:{...Ae.infoRow,color:"#fca5a5",border:"1px solid rgba(255,0,0,.25)",padding:"8px 10px",borderRadius:8,background:"rgba(255,0,0,.06)"},children:"Voc j possui um emprstimo ativo. No  possvel pegar outro."}),a.jsx("input",{style:Ae.input,type:"number",min:0,max:Math.max(0,Number(t||0)),placeholder:"Digite o valor que quer emprestar",value:o,onChange:c=>s(c.target.value),disabled:e}),a.jsxs("div",{style:{fontSize:12,opacity:.8,marginTop:6},children:["Mx: $",Number(t||0),"  valor ser somado ao seu saldo e cobrado na prxima Despesas Operacionais."]}),a.jsxs("div",{style:Ae.rowBtns,children:[a.jsx("button",{style:Ae.back,onClick:n,children:" Voltar"}),a.jsx("button",{style:{...Ae.cta,background:"#16a34a",opacity:l?1:.6,cursor:l?"pointer":"not-allowed"},onClick:u,disabled:!l,children:"Pegar Emprstimo"})]})]})}function Qx(t){const{options:e=[],optionsMix:n,optionsErp:r,mixOwned:o,erpOwned:s,credits:i,snapshot:l,onBack:u,onConfirm:c}=t,d=(...v)=>console.log("[RecoveryReduce]",...v),h={MIX:{accent:"#06B6D4",soft:"rgba(6,182,212,.14)",ring:"rgba(6,182,212,.45)",glow:"rgba(6,182,212,.35)",pillBg:"rgba(6,182,212,.18)",pillFg:"#9FF1FF"},ERP:{accent:"#8B5CF6",soft:"rgba(139,92,246,.14)",ring:"rgba(139,92,246,.45)",glow:"rgba(139,92,246,.35)",pillBg:"rgba(139,92,246,.18)",pillFg:"#E9D5FF"}},f=["A","B","C","D"],g=(v,A,O)=>f.map(I=>({key:`${v}-${I}`,group:v,level:I,label:`Nvel ${I}`,credit:Number((A==null?void 0:A[I])??0),owned:!!(O!=null&&O[I])})),x=k.useMemo(()=>Array.isArray(n)&&n.length?n:i!=null&&i.MIX?g("MIX",i.MIX,o):g("MIX",{A:0,B:0,C:0,D:0},o),[n,i,o]),b=k.useMemo(()=>Array.isArray(r)&&r.length?r:i!=null&&i.ERP?g("ERP",i.ERP,s):g("ERP",{A:0,B:0,C:0,D:0},s),[r,i,s]);k.useEffect(()=>{console.groupCollapsed("[RecoveryReduce] props snapshot"),console.log("mixCards:",x),console.log("erpCards:",b),console.log("mixOwned:",o),console.log("erpOwned:",s),console.log("credits:",i),console.groupEnd()},[x,b,o,s,i]);const[_,p]=k.useState([]),[m,y]=k.useState(new Set),[w,E]=k.useState(!1),R=v=>{v.level!=="D"&&(!v.owned||v.owned===!1||m.has(v.key)||v.alreadyReduced||p(A=>A.some(I=>I.key===v.key)?A.filter(I=>I.key!==v.key):[...A,v]))},D=k.useMemo(()=>_.reduce((v,A)=>v+Number(A.credit||0),0),[_]),S=v=>_.some(A=>A.key===v.key),T=v=>{var re,P;const A=S(v),O=v.level==="D",I=v.owned===!0,F=O||!I||m.has(v.key)||v.alreadyReduced||w,Ee=h[v.group]||h.MIX,He={...Ae.option,position:"relative",borderRadius:14,background:F?"rgba(148,163,184,.12)":Ee.soft,border:A?`2.5px solid ${Ee.accent}`:"1px solid rgba(148,163,184,.25)",boxShadow:A?`0 0 0 2px ${Ee.ring}, 0 10px 24px ${Ee.glow}`:"none",cursor:F?"not-allowed":"pointer",opacity:F?.35:1,transition:"transform .06s ease-out, box-shadow .12s ease-out, border-color .12s"},tt={fontWeight:900,fontSize:16,marginBottom:8,color:F?"#CBD5E1":"#E5F9FF"},G={fontWeight:700,marginTop:2,color:F?"#A1A1AA":"#FFFFFF"},te={position:"absolute",top:8,right:8,fontSize:11,padding:"3px 8px",borderRadius:999,background:F?"rgba(148,163,184,.22)":Ee.pillBg,color:F?"#E5E7EB":Ee.pillFg,border:`1px solid ${F?"rgba(148,163,184,.35)":Ee.ring}`,letterSpacing:.2};return a.jsxs("button",{onClick:()=>R(v),disabled:F,"aria-pressed":A,style:He,title:O?"Nvel D  o bsico e no pode ser reduzido.":I?m.has(v.key)?"Nvel j reduzido nesta sesso.":v.alreadyReduced?"Este nvel j foi reduzido anteriormente. Compre o nvel novamente para poder reduzir.":"":"Este nvel no est disponvel. Compre o nvel novamente para poder reduzir.",onMouseDown:$e=>!F&&($e.currentTarget.style.transform="translateY(1px)"),onMouseUp:$e=>$e.currentTarget.style.transform="translateY(0)",onMouseLeave:$e=>$e.currentTarget.style.transform="translateY(0)",children:[a.jsx("span",{style:te,children:O?"bsico":I?m.has(v.key)?"vendido":v.alreadyReduced?"j reduzido":"adquirido":"zerado"}),a.jsx("div",{style:tt,children:v.label}),a.jsx("div",{style:{color:F?"#A1A1AA":"#BFEFFF"},children:"Crdito ao reduzir:"}),a.jsxs("div",{style:G,children:["$",((P=(re=v.credit).toLocaleString)==null?void 0:P.call(re))??v.credit]})]},v.key)};return a.jsxs("div",{style:Ae.body,children:[a.jsx("div",{style:Ae.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"REDUZIR NVEL MIX/ERP"})}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[a.jsxs("div",{style:{padding:8,borderRadius:8,background:"rgba(255,255,255,0.05)"},children:[a.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"MIX PRODUTOS"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12},children:x.map(T)})]}),a.jsxs("div",{style:{padding:8,borderRadius:8,background:"rgba(255,255,255,0.05)"},children:[a.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"ERP/SISTEMAS"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:12},children:b.map(T)})]})]}),a.jsxs("div",{style:{marginTop:10,display:"flex",justifyContent:"space-between",alignItems:"center",opacity:.92},children:[a.jsxs("div",{children:["Selecionados: ",a.jsx("b",{children:_.length}),"    Total: ",a.jsxs("b",{children:["$",D.toLocaleString()]})]}),a.jsx("div",{style:{fontSize:12,opacity:.7},children:"S  possvel selecionar nveis adquiridos."})]}),a.jsxs("div",{style:Ae.rowBtns,children:[a.jsx("button",{style:Ae.back,onClick:u,disabled:w,children:" Voltar"}),a.jsx("button",{style:{...Ae.cta,background:"#F59E0B",color:"#101010",fontWeight:900,opacity:_.length&&!w?1:.55},onClick:()=>{if(!_.length||w)return;E(!0),y(A=>{const O=new Set(A);return _.forEach(I=>O.add(I.key)),O});const v={items:_.map(A=>({...A,selected:!0})),total:D};d("confirm payload =>",v),c==null||c(v),p([]),E(!1)},disabled:!_.length||w,children:"REDUZIR"})]})]})}function Xx({roles:t=[],onBack:e,onConfirm:n}){const r=k.useMemo(()=>t.map(f=>{const g=Number(f.unit??f.total??0),x=Number(f.owned??f.qty??0);return{...f,unit:g,owned:x}}),[t]),[o,s]=k.useState(()=>{const f={};return r.forEach(g=>{f[g.key]=0}),f}),i=f=>`R$ ${Number(f||0).toLocaleString("pt-BR")}`,l=f=>Math.floor(Number(f||0)*.5),u=(f,g)=>{s(x=>{const b=r.find(m=>m.key===f);if(!b)return x;const _=Number(x[f]||0),p=Math.max(0,Math.min(b.owned,_+g));return p===_?x:{...x,[f]:p}})},c=k.useMemo(()=>{const f={};return r.forEach(g=>{const x=Number(o[g.key]||0);f[g.key]=l(g.unit)*x}),f},[o,r]),d=k.useMemo(()=>Object.values(c).reduce((f,g)=>f+g,0),[c]),h=()=>{if(d<=0)return;const f={};r.forEach(g=>{f[g.key]=Number(o[g.key]||0)}),n==null||n({type:"FIRE",items:f,creditByRole:c,totalCredit:d,amount:d,note:`Demisses +${i(d)}`})};return a.jsxs("div",{style:Ae.body,children:[a.jsx("div",{style:Ae.subHeader,children:a.jsx("b",{style:{fontSize:20},children:"DEMITIR FUNCIONRIOS"})}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr 1.2fr 1fr",gap:8,opacity:.9,fontWeight:700,marginBottom:6},children:[a.jsx("div",{children:"Cargo"}),a.jsx("div",{children:"Valor Unitrio"}),a.jsx("div",{children:"Qtd demitir"}),a.jsx("div",{children:"Crdito"})]}),a.jsx("div",{style:{display:"grid",gap:12},children:r.map(f=>{const g=Number(o[f.key]||0),x=Number(f.unit||0),b=Number(f.owned||0),_=l(x),p=_*g,m=g<=0,y=g>=b||b<=0;return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr 1.2fr 1fr",alignItems:"center",gap:8},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:800},children:f.label}),a.jsxs("div",{style:{opacity:.75,fontSize:12},children:["Possui: ",a.jsx("b",{children:b})]})]}),a.jsxs("div",{children:[a.jsx("div",{children:a.jsx("b",{children:i(x)})}),a.jsxs("div",{style:{opacity:.75,fontSize:12},children:["Crdito por un.: ",a.jsx("b",{children:i(_)})]})]}),a.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[a.jsx("button",{style:{...Ae.spin,opacity:m?.5:1,cursor:m?"not-allowed":"pointer"},disabled:m,onClick:()=>u(f.key,-1),children:"-"}),a.jsx("div",{style:{minWidth:28,textAlign:"center",fontWeight:800},children:g}),a.jsx("button",{style:{...Ae.spin,opacity:y?.5:1,cursor:y?"not-allowed":"pointer"},disabled:y,onClick:()=>u(f.key,1),children:"+"})]}),a.jsx("div",{children:a.jsx("b",{children:i(p)})})]},f.key)})}),a.jsxs("div",{style:{marginTop:12,textAlign:"right",fontWeight:900},children:["Total a resgatar: ",a.jsx("b",{children:i(d)})]}),a.jsxs("div",{style:Ae.rowBtns,children:[a.jsx("button",{style:Ae.back,onClick:e,children:" Voltar"}),a.jsx("button",{style:{...Ae.cta,background:"#ef4444",opacity:d>0?1:.6},onClick:h,disabled:d<=0,children:"DEMITIR"})]})]})}function wf({playerName:t="Jogador",bens:e=0,currentPlayer:n,canClose:r=!0}){var T;const{resolveTop:o,popModal:s}=(Ht==null?void 0:Ht())||{},[i,l]=k.useState("menu"),u=()=>{r&&(s?s(!1):o==null||o(null))},c=k.useMemo(()=>({A:12e3,B:6e3,C:3e3,D:1e3}),[]),d=k.useMemo(()=>({A:1e4,B:4e3,C:1500,D:500}),[]),h=v=>{if(v==null)return"";const A=String(v).trim().toUpperCase();if(["A","B","C","D"].includes(A))return A;const O=Number(A);return O===1?"A":O===2?"B":O===3?"C":O===4?"D":""},f=k.useMemo(()=>{const v=n||{};return{name:v.name??t,bens:Number(v.bens??e??0),vendedoresComuns:Number(v.vendedoresComuns??0),fieldSales:Number(v.fieldSales??0),insideSales:Number(v.insideSales??0),gestores:Number(v.gestores??v.gestoresComerciais??0),raw:v}},[n,t,e]);k.useEffect(()=>{console.group("[RecoveryModal] mount snapshot"),console.log("raw player =>",f.raw),console.groupEnd()},[f.raw]);const g=k.useMemo(()=>Math.max(0,Math.floor(f.bens*.5)),[f.bens]),x=k.useMemo(()=>{var A;const v=(A=f.raw)==null?void 0:A.loanPending;return v&&Number(v.amount)>0},[(T=f.raw)==null?void 0:T.loanPending]),b=k.useMemo(()=>[{key:"mix",label:"MIX PRODUTOS",credit:1500},{key:"erp",label:"ERP/SISTEMAS",credit:1500}],[]),_=k.useMemo(()=>[{key:"comum",label:"Vendedor Comum",unit:1500,owned:f.vendedoresComuns},{key:"field",label:"Field Sales",unit:3e3,owned:f.fieldSales},{key:"inside",label:"Inside Sales",unit:3e3,owned:f.insideSales},{key:"gestor",label:"Gestor",unit:5e3,owned:f.gestores}],[f]),p=k.useMemo(()=>{const v=f.raw||{};return h(v.mixProdutosLetter??v.mixProdutos??v.mixProducts??v.mixLevelLetter??v.mixLevel??v.mix_level??v.mix??v.mix_produtos??v.mix_products)},[f.raw]),m=k.useMemo(()=>{var A;const v=f.raw||{};return h(v.erpSistemasLetter??v.erpSistemas??((A=v.erpSystems)==null?void 0:A.level)??v.erpSystemsLetter??v.erpLevelLetter??v.erpLevel??v.erp_level??v.erp??v.erp_sistemas)},[f.raw]),y=k.useMemo(()=>{const v=f.raw||{},A=v.mixOwned??v.mix??{},O=new Set;return A.A===!0&&O.add("A"),A.B===!0&&O.add("B"),A.C===!0&&O.add("C"),A.D===!0&&O.add("D"),O.size===0&&O.add("D"),O},[f.raw]),w=k.useMemo(()=>{const v=f.raw||{},A=v.erpOwned??v.erp??{},O=new Set;return A.A===!0&&O.add("A"),A.B===!0&&O.add("B"),A.C===!0&&O.add("C"),A.D===!0&&O.add("D"),O.size===0&&O.add("D"),O},[f.raw]);k.useEffect(()=>{console.group("[RecoveryModal] owned detect"),console.log("mixLetter(panel):",p," -> ownedMix =",Object.fromEntries(["A","B","C","D"].map(v=>[v,y.has(v)]))),console.log("erpLetter(panel):",m," -> ownedErp =",Object.fromEntries(["A","B","C","D"].map(v=>[v,w.has(v)]))),console.groupEnd()},[p,m,y,w]);const E=k.useMemo(()=>{var A,O;const v=f.raw||{};return{MIX:Array.isArray((A=v.reducedLevels)==null?void 0:A.MIX)?v.reducedLevels.MIX:[],ERP:Array.isArray((O=v.reducedLevels)==null?void 0:O.ERP)?v.reducedLevels.ERP:[]}},[f.raw]),R=k.useMemo(()=>["A","B","C","D"].map(v=>({key:`mix-${v}`,group:"MIX",level:v,label:`Nvel ${v}`,credit:(c[v]||0)/2,owned:y.has(v),alreadyReduced:E.MIX.includes(v)})),[y,c,E.MIX]),D=k.useMemo(()=>["A","B","C","D"].map(v=>({key:`erp-${v}`,group:"ERP",level:v,label:`Nvel ${v}`,credit:(d[v]||0)/2,owned:w.has(v),alreadyReduced:E.ERP.includes(v)})),[w,d,E.ERP]),S=k.useMemo(()=>({MIX:{A:c.A/2,B:c.B/2,C:c.C/2,D:c.D/2},ERP:{A:d.A/2,B:d.B/2,C:d.C/2,D:d.D/2}}),[c,d]);return a.jsx("div",{style:Ae.backdrop,children:a.jsxs("div",{style:Ae.card,children:[a.jsxs("div",{style:Ae.header,children:[a.jsx("div",{style:{fontWeight:900,fontSize:22},children:"RECUPERAO FINANCEIRA"}),r&&a.jsx("button",{onClick:u,style:Ae.closeBtn,children:""})]}),i==="menu"&&a.jsx(Jx,{playerName:f.name,loanAvailable:g,hasPendingLoan:x,onGoLoan:()=>l("loan"),onGoReduce:()=>l("reduce"),onGoFire:()=>l("fire"),onDeclareBankruptcy:()=>o==null?void 0:o({type:"TRIGGER_BANKRUPTCY"})}),i==="loan"&&a.jsx(Yx,{loanAvailable:g,onBack:()=>l("menu"),onConfirm:v=>{console.log("[DEBUG] RecoveryModal recebeu payload do RecoveryLoan:",v),console.log("[DEBUG] RecoveryModal chamando resolveTop com:",v);const A=o==null?void 0:o(v);console.log("[DEBUG] RecoveryModal resolveTop retornou:",A)}}),i==="reduce"&&a.jsx(Qx,{options:b,optionsMix:R,optionsErp:D,mixOwned:{A:y.has("A"),B:y.has("B"),C:y.has("C"),D:y.has("D")},erpOwned:{A:w.has("A"),B:w.has("B"),C:w.has("C"),D:w.has("D")},credits:S,snapshot:f,onBack:()=>l("menu"),onConfirm:v=>{if(Array.isArray(v==null?void 0:v.items)){const I=Number(v.total??v.items.filter(F=>F.selected).reduce((F,Ee)=>F+Number(Ee.credit||0),0));o==null||o({type:"REDUCE",amount:I,items:v.items,note:`Reduo mltipla +R$ ${I.toLocaleString()}`});return}const A=Number((v==null?void 0:v.credit)||(v==null?void 0:v.amount)||0),O=v&&v.group&&v.level?{group:String(v.group).toUpperCase(),level:String(v.level).toUpperCase(),credit:A}:null;o==null||o({type:"REDUCE",amount:A,group:O==null?void 0:O.group,level:O==null?void 0:O.level,selection:O,note:O?`Reduo ${O.group} nvel ${O.level} +R$ ${A.toLocaleString()}`:`Reduo +R$ ${A.toLocaleString()}`})}}),i==="fire"&&a.jsx(Xx,{roles:_,onBack:()=>l("menu"),onConfirm:v=>o==null?void 0:o(v)})]},i)})}function Zx({playerName:t="Jogador",balanceText:e=""}){const{resolveTop:n,closeModal:r}=Ht(),o=k.useRef(null);k.useEffect(()=>{var c;const u=document.body.style.overflow;return document.body.style.overflow="hidden",(c=o.current)==null||c.focus(),()=>{document.body.style.overflow=u}},[]),k.useEffect(()=>{const u=c=>{(c.key==="Escape"||c.key==="Enter"||c.key===" ")&&(c.preventDefault(),c.stopPropagation())};return document.addEventListener("keydown",u,!0),()=>document.removeEventListener("keydown",u,!0)},[]);const s=u=>{u.preventDefault(),u.stopPropagation()},i=()=>{n(!1),r==null||r()},l=()=>{n(!0),r==null||r()};return a.jsxs(ti,{width:780,onClose:i,children:[a.jsx("style",{children:`
        .sg-modal-panel {
          background:#111827; border:1px solid rgba(255,255,255,0.08);
          border-radius:16px; padding:20px 22px 18px; color:#e5e7eb;
          position:relative; box-shadow:0 10px 35px rgba(0,0,0,.55);
        }
        .sg-modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
        .sg-modal-title{font-size:22px;font-weight:700;margin:0}
        .sg-icon-close{background:transparent;border:0;color:#9ca3af;font-size:24px;line-height:1;cursor:pointer}
        .sg-icon-close:hover{color:#e5e7eb}

        .sg-modal-infos{display:flex;justify-content:space-between;align-items:center;
          font-size:14px;color:#cbd5e1;margin:6px 0 12px}
        .sg-modal-infos .right{opacity:.8}

        .sg-callout-warning{
          background:rgba(250,204,21,.12); border:1px solid rgba(250,204,21,.45);
          border-radius:12px; padding:14px 16px; margin-bottom:14px
        }
        .sg-callout-title{font-weight:700;margin-bottom:6px;color:#fde68a}
        .sg-muted{opacity:.7}

        .sg-modal-body{margin:8px 2px 14px;font-size:15px;line-height:1.5}

        .sg-modal-actions{display:flex;justify-content:space-between;gap:12px;margin-top:10px}
        .sg-btn{font-weight:600;border:0;cursor:pointer;padding:12px 18px}
        .sg-pill{border-radius:999px}
        .sg-btn-neutral{background:#374151;color:#e5e7eb}
        .sg-btn-neutral:hover{background:#4b5563}
        .sg-btn-danger{background:#b91c1c;color:#fff}
        .sg-btn-danger:hover{background:#991b1b}
        .sg-btn:focus{outline:2px solid rgba(255,255,255,.35);outline-offset:2px}
      `}),a.jsxs("div",{className:"sg-modal-panel",role:"dialog","aria-modal":"true","aria-labelledby":"bk-title","aria-describedby":"bk-desc",onClick:s,onMouseDown:s,onKeyDown:s,children:[a.jsxs("div",{className:"sg-modal-header",children:[a.jsx("h2",{id:"bk-title",className:"sg-modal-title",children:"Declarar Falncia"}),a.jsx("button",{className:"sg-icon-close","aria-label":"Fechar",onClick:i,children:""})]}),a.jsxs("div",{className:"sg-modal-infos",children:[a.jsx("div",{className:"left",children:e?a.jsxs(a.Fragment,{children:["Saldo disponvel: ",a.jsx("b",{children:e})]}):a.jsx(a.Fragment,{children:""})}),a.jsx("div",{className:"right",children:"Ao permanente nesta partida"})]}),a.jsxs("div",{className:"sg-callout-warning",id:"bk-desc",children:[a.jsx("div",{className:"sg-callout-title",children:"Ateno"}),a.jsxs("p",{children:[t,", ao confirmar, voc ser marcado como ",a.jsx("b",{children:"FALIDO"}),". Seu turno ser ",a.jsx("b",{children:"sempre pulado"})," e voc no poder mais executar aes."]}),a.jsx("p",{className:"sg-muted",children:"Esta deciso  irreversvel at o fim da partida."})]}),a.jsx("div",{className:"sg-modal-body",children:a.jsxs("p",{children:["Confirme abaixo para encerrar sua participao ativa. Voc continuar visvel no placar como ",a.jsx("b",{children:"FALIDO"}),"."]})}),a.jsxs("div",{className:"sg-modal-actions",children:[a.jsx("button",{className:"sg-btn sg-pill sg-btn-neutral",onClick:i,children:"Cancelar"}),a.jsx("button",{ref:o,className:"sg-btn sg-pill sg-btn-danger",onClick:l,children:"Declarar Falncia"})]})]})]})}function eb({players:t,setPlayers:e,round:n,setRound:r,turnIdx:o,setTurnIdx:s,roundFlags:i,setRoundFlags:l,isMyTurn:u,isMine:c,myUid:d,meId:h,myCash:f,current:g,broadcastState:x,appendLog:b,turnLock:_,setTurnLockBroadcast:p,gameOver:m,setGameOver:y,winner:w,setWinner:E,setShowBankruptOverlay:R}){const{pushModal:D,awaitTop:S,closeTop:T}=(Ht==null?void 0:Ht())||{},[v,A]=he.useState(0),O=he.useRef(0);he.useEffect(()=>{O.current=v},[v]);const I=he.useRef(!1),F=he.useRef(!1),Ee=he.useRef(null),He=he.useRef(null);he.useEffect(()=>{u?console.log("[DEBUG] modalLocks sync - isMyTurn:",u,"modalLocks:",v):v>0&&(console.log("[DEBUG] modalLocks sync - resetando modalLocks para 0 (no  minha vez)"),A(0),O.current=0,I.current=!1)},[u,v]),he.useEffect(()=>(_?(Ee.current&&clearTimeout(Ee.current),Ee.current=setTimeout(()=>{const J=te.current,Ke=String(J||"")===String(d),Ie=O.current,Le=I.current;console.warn("[DEBUG]  TIMEOUT DE SEGURANA - turnLock ativo h mais de 30s",{isLockOwner:Ke,currentModalLocks:Ie,currentOpening:Le,lockOwner:J}),Ke&&Ie===0&&!Le&&(console.warn("[DEBUG]  FORANDO LIBERAO DO TURNLOCK (timeout de segurana)"),p(!1),F.current=!1)},3e4)):Ee.current&&(clearTimeout(Ee.current),Ee.current=null),()=>{Ee.current&&(clearTimeout(Ee.current),Ee.current=null)}),[_,d,p]);const[tt,G]=he.useState(null),te=he.useRef(null);he.useEffect(()=>{te.current=tt},[tt]);const re=he.useRef(null),P=he.useRef(n);he.useEffect(()=>{P.current=n,console.log("[DEBUG]  currentRoundRef atualizado para:",n)},[n]);const $e=he.useRef(t);he.useEffect(()=>{$e.current=t},[t]);const cn=he.useRef(o);he.useEffect(()=>{cn.current=o},[o]);const ce=he.useRef(m);he.useEffect(()=>{ce.current=m},[m]);const Yt=he.useRef(!1),Xe=he.useRef(!1);he.useEffect(()=>{const J=t[o];J&&String(J.id)===String(d)?(console.log("[DEBUG]  minha vez - atualizando lockOwner para:",d,"turnIdx:",o),G(String(d)),re.current&&(re.current.nextTurnIdx===o?(console.log("[DEBUG] Limpando pendingTurnDataRef - turno j foi processado (nextTurnIdx === turnIdx)"),re.current=null):console.log("[DEBUG] Mantendo pendingTurnDataRef - prximo turno:",re.current.nextTurnIdx,"turno atual:",o))):(tt===String(d)&&(console.log("[DEBUG] No  mais minha vez - limpando lockOwner"),G(null)),re.current&&re.current.nextTurnIdx!==o&&(console.log("[DEBUG] Limpando pendingTurnDataRef - no  minha vez e dados no so para turno atual"),re.current=null))},[o,t,d,tt]);const Oe=async J=>{if(!(D&&S))return null;I.current=!0,A(Ie=>{const Le=Ie+1;return O.current=Le,He.current=null,console.log("[DEBUG] openModalAndWait - ABRINDO modal, modalLocks:",Ie,"->",Le,"openingModalRef:",I.current),Le});let Ke=!1;try{D(J),await new Promise(Le=>setTimeout(Le,100)),I.current=!1,console.log("[DEBUG] openModalAndWait - Modal renderizada, openingModalRef:",I.current);const Ie=await S();return Ke=!0,await new Promise(Le=>setTimeout(Le,50)),Ie}catch(Ie){return console.error("[DEBUG]  ERRO ao abrir/aguardar modal:",Ie),Ke=!0,I.current=!1,A(Le=>{const dn=Math.max(0,Le-1);return O.current=dn,dn===0&&(He.current=Date.now()),console.log("[DEBUG] openModalAndWait - ERRO, decrementando modalLocks:",Le,"->",dn),dn}),null}finally{Ke||(I.current=!1),Ke&&A(Ie=>{const Le=Math.max(0,Ie-1);return O.current=Le,Le===0&&(He.current=Date.now(),console.log("[DEBUG] openModalAndWait - LTIMA MODAL FECHADA - timestamp:",He.current)),console.log("[DEBUG] openModalAndWait - FECHANDO modal, modalLocks:",Ie,"->",Le),Le})}},vn=he.useCallback((J,Ke)=>{const Ie=t[J],Le=Math.max(0,Number(Ke||0));return Number((Ie==null?void 0:Ie.cash)||0)>=Le},[t]),it=he.useCallback((J,Ke,Ie)=>{const Le=vn(J,Ke);return Le||b(`Saldo insuficiente${Ie?" para "+Ie:""}. Use RECUPERAO (demitir / emprestar / reduzir) ou declare FALNCIA.`),Le},[vn,b]),Qt=he.useCallback((J,Ke,Ie)=>{var Xt;if(Ke<=5)return!1;const Le=(J||[]).filter(ft=>!(ft!=null&&ft.bankrupt));if(Le.length===0){console.log("[DEBUG]  FIM DE JOGO - Nenhum jogador vivo restante"),e(J),E(null),y(!0),r(5),P.current=5,b("Fim de jogo! Todos os jogadores falidos."),re.current=null,p(!1);try{x(J||[],Ie||o,5,!0,null,{round:5,gameOver:!0,winner:null})}catch{}return!0}const _t=((Xt=Le.map(ft=>({player:ft,patrimonio:(ft.cash||0)+(ft.bens||0),cash:ft.cash||0})).sort((ft,xn)=>{var Nn,z;return xn.patrimonio-ft.patrimonio||xn.cash-ft.cash||String(((Nn=ft.player)==null?void 0:Nn.name)||"").localeCompare(String(((z=xn.player)==null?void 0:z.name)||""))})[0])==null?void 0:Xt.player)||null;console.log("[ENDGAME] finalizando: vencedor=",(_t==null?void 0:_t.name)||"N/A",", round=5"),e(J),E(_t),y(!0),r(5),P.current=5,b(`Fim de jogo! 5 rodadas completas. Vencedor: ${(_t==null?void 0:_t.name)||""}`),re.current=null,p(!1);try{x(J||[],Ie||o,5,!0,_t,{round:5,gameOver:!0,winner:_t})}catch{}return!0},[b,x,y,r,p,E,o]),Vr=he.useCallback((J,Ke,Ie)=>{var Le,dn,_t,Xt,ft,xn,Nn,z;if(console.log("[DEBUG]  advanceAndMaybeLap chamada - steps:",J,"deltaCash:",Ke,"note:",Ie),!(ce.current||Yt.current||Xe.current||!t.length)){if(F.current){console.warn("[DEBUG]  advanceAndMaybeLap - mudana de turno j em progresso, ignorando");return}if(O.current>0||I.current){console.warn("[DEBUG]  advanceAndMaybeLap - h modais abertas, aguardando...",{modalLocks:O.current,opening:I.current}),setTimeout(()=>{O.current===0&&!I.current&&Vr(J,Ke,Ie)},200);return}F.current=!0,p(!0),G(String(d));try{const C=o,pe=t[C];if(!pe){p(!1),F.current=!1;return}console.log("[DEBUG]  POSIO INICIAL - Jogador:",pe.name,"Posio:",pe.pos,"Saldo:",pe.cash);const fe=async(j,M,K,Z=t)=>{var ae,ye,me,ge,nt,Fe,Re,gt,Ye,ht,Et,Pt,wn,An,Tn;const V=Number(((ae=Z[C])==null?void 0:ae.cash)||0);if(V>=j){console.log("[DEBUG]  Saldo suficiente! Processando pagamento de:",j);const ve=Z.map((L,xe)=>xe!==C?L:{...L,cash:Math.max(0,(L.cash||0)-j),pos:L.pos});return e(ve),x(ve,o,P.current),!0}I.current=!0;const ne=await Oe(a.jsx(gr,{requiredAmount:j,currentCash:V,title:`Saldo insuficiente para ${K} ${M}`,message:`Voc precisa ${K} R$ ${j.toLocaleString()} mas possui apenas R$ ${V.toLocaleString()}.`,showRecoveryOptions:!0}));if(!ne)return p(!1),!1;if(ne.action==="RECOVERY"){console.log("[DEBUG] Abrindo RecoveryModal para jogador:",Z[C]);const ve=await Oe(a.jsx(wf,{currentPlayer:Z[C],canClose:!1}));if(console.log("[DEBUG] RecoveryModal retornou:",ve),ve){console.log("[DEBUG] recoveryModalRes existe, tipo:",ve.type,"action:",ve.action);let L=Z;if(ve.type==="FIRE"){console.log("[DEBUG]  Condio FIRE atendida! Processando demisses:",ve);const ee={cashDelta:Number(ve.amount||0),vendedoresComunsDelta:-Number(((ye=ve.items)==null?void 0:ye.comum)||0),fieldSalesDelta:-Number(((me=ve.items)==null?void 0:me.field)||0),insideSalesDelta:-Number(((ge=ve.items)==null?void 0:ge.inside)||0),gestoresDelta:-Number(((nt=ve.items)==null?void 0:nt.gestor)||0)};console.log("[DEBUG] Deltas de demisso:",ee),L=Z.map((se,we)=>we!==C?se:{...jt(se,ee),pos:se.pos}),console.log("[DEBUG] Novo saldo aps demisses:",(Fe=L[C])==null?void 0:Fe.cash),e(L),x(L,o,P.current)}else if(ve.type==="LOAN"){console.log("[DEBUG]  Condio LOAN atendida! Processando emprstimo:",ve);const ee=(Re=Z[C])==null?void 0:Re.loanPending;if(ee&&Number(ee.amount)>0){console.log("[DEBUG]  Jogador j possui emprstimo pendente:",ee);const we=await Oe(a.jsx(gr,{requiredAmount:j,currentCash:((gt=Z[C])==null?void 0:gt.cash)||0,title:"Emprstimo j realizado",message:`Voc j possui um emprstimo pendente de R$ ${Number(ee.amount).toLocaleString()}. Cada jogador s pode ter um emprstimo por vez.`,showRecoveryOptions:!1,canClose:!1}));if(!we||we.action!=="BANKRUPT")return p(!1),!1;const be=Z.map((Ut,Xo)=>Xo===C?{...Ut,bankrupt:!0}:Ut);if(Cs(be)<=1){const Ut=be.findIndex(Xo=>!(Xo!=null&&Xo.bankrupt));return E(Ut>=0?be[Ut]:null),e(be),y(!0),p(!1),x(be,o,n,!0,Ut>=0?be[Ut]:null),!1}const ze=ls(be,C);return e(be),s(ze),p(!1),x(be,ze,P.current),!1}const se=Number(ve.amount||0);console.log("[DEBUG] Valor do emprstimo:",se),console.log("[DEBUG] Saldo atual do jogador:",(Ye=Z[C])==null?void 0:Ye.cash),L=Z.map((we,be)=>be!==C?we:{...we,cash:(Number(we.cash)||0)+se,loanPending:{amount:se,charged:!1,shouldChargeOnNextExpenses:!0},pos:we.pos}),console.log("[DEBUG] Novo saldo do jogador:",(ht=L[C])==null?void 0:ht.cash),console.log("[DEBUG] Novo loanPending:",(Et=L[C])==null?void 0:Et.loanPending),e(L),x(L,o,P.current)}else if(ve.type==="REDUCE"){console.log("[DEBUG]  Condio REDUCE atendida! Processando reduo:",ve);const ee=ve.items||[];let se=0;console.log("[DEBUG] Selees para reduzir:",ee),L=Z.map((we,be)=>{if(be!==C)return we;let Se={...we};for(const ze of ee)ze.selected&&(se+=Number(ze.credit||0),ze.group==="MIX"?Se.mixOwned={...Se.mixOwned||{},[ze.level]:!1}:ze.group==="ERP"&&(Se.erpOwned={...Se.erpOwned||{},[ze.level]:!1}));return Se.cash=(Number(Se.cash)||0)+se,Se.pos=we.pos,Se}),console.log("[DEBUG] Total de crdito da reduo:",se),console.log("[DEBUG] Novo saldo aps reduo:",(Pt=L[C])==null?void 0:Pt.cash),e(L),x(L,o,P.current)}else console.log("[DEBUG]  Nenhuma condio foi atendida! Tipo:",ve.type,"Action:",ve.action);const xe=Number(((wn=L[C])==null?void 0:wn.cash)||0);if(console.log("[DEBUG] Verificando saldo aps recuperao - Novo saldo:",xe,"Necessrio:",j),xe>=j){console.log("[DEBUG]  Saldo suficiente aps recuperao! Processando pagamento de:",j);const ee=L.map((se,we)=>we!==C?se:{...se,cash:Math.max(0,(se.cash||0)-j),pos:se.pos});return console.log("[DEBUG]  PAGAMENTO - Saldo antes:",(An=L[C])==null?void 0:An.cash,"Valor a pagar:",j,"Saldo aps:",(Tn=ee[C])==null?void 0:Tn.cash),e(ee),x(ee,o,P.current),!0}else return console.log("[DEBUG]  Saldo ainda insuficiente aps recuperao. Continuando recurso..."),await fe(j,M,K,L)}else return p(!1),!1}else if(ne.action==="BANKRUPT"){const ve=Z.map((ee,se)=>se===C?{...ee,bankrupt:!0}:ee);if(Cs(ve)<=1){const ee=ve.findIndex(se=>!(se!=null&&se.bankrupt));return E(ee>=0?ve[ee]:null),e(ve),y(!0),p(!1),x(ve,o,n,!0,ee>=0?ve[ee]:null),!1}const xe=ls(ve,C);return e(ve),s(xe),p(!1),x(ve,xe,P.current),!1}else return p(!1),!1},je=pe.pos,_e=(je+J)%js,N=_e<je,U=N&&je>=js-1;console.log("[DEBUG]  MOVIMENTO - De posio:",je,"Para posio:",_e,"Steps:",J,"Lap:",N,"CompletedLap:",U);const de=Sl(je,_e,0)||N,oe=P.current,H=t.filter(j=>!(j!=null&&j.bankrupt)).length,$=t.map((j,M)=>{if(M!==C)return j;const K=(j.cash||0)+(Ke||0),Z=Number(j.lastRevenueRound)||0;let V=!1,ne=_e;if(de){const ae=Math.max(Z,oe);return oe===5&&H>1&&(V=!0,ne=0),{...j,pos:ne,cash:Math.max(0,K),lastRevenueRound:ae,waitingAtRevenue:V}}return{...j,pos:ne,cash:Math.max(0,K),lastRevenueRound:Z,waitingAtRevenue:!1}});console.log("[DEBUG]  APS MOVIMENTO - Jogador:",(Le=$[C])==null?void 0:Le.name,"Posio:",(dn=$[C])==null?void 0:dn.pos,"Saldo:",(_t=$[C])==null?void 0:_t.cash,"lastRevenueRound:",(Xt=$[C])==null?void 0:Xt.lastRevenueRound,"waitingAtRevenue:",(ft=$[C])==null?void 0:ft.waitingAtRevenue);let ie=P.current,W=[...i],Q=!1,ue=!1;if(N&&(console.log("[DEBUG]  VOLTA COMPLETA DETECTADA (lap=true) - Jogador completou uma volta completa!",{jogador:pe.name,posicaoAnterior:je,posicaoNova:_e,rodadaAtual:P.current}),W.length<t.length&&(W=[...W,...new Array(t.length-W.length).fill(!1)]),W[C]=!0,console.log("[DEBUG]  Flag marcada por volta completa (lap) - Flags:",W.map((j,M)=>{var K;return`${(K=t[M])==null?void 0:K.name}:${j}`}).join(", "))),de){W.length<t.length&&(W=[...W,...new Array(t.length-W.length).fill(!1)]),W[C]?console.log("[DEBUG]  Jogador j tinha flag marcada (por lap) - Flags:",W.map((V,ne)=>{var ae;return`${(ae=t[ne])==null?void 0:ae.name}:${V}`}).join(", ")):(W[C]=!0,console.log("[DEBUG]  Jogador passou pela casa 0 (crossedStart1ForRound) - Flags:",W.map((V,ne)=>{var ae;return`${(ae=t[ne])==null?void 0:ae.name}:${V}`}).join(", ")));const j=$.filter(V=>!(V!=null&&V.bankrupt)),M=$.map((V,ne)=>V!=null&&V.bankrupt?-1:ne).filter(V=>V>=0),K=$.filter(V=>!(V!=null&&V.bankrupt)),Z=K.length>0&&K.every(V=>(Number(V.lastRevenueRound)||0)>=P.current);if(console.log("[DEBUG]  Verificando allAliveDone - Rodada atual:",P.current,"Jogadores vivos:",K.map(V=>({name:V.name,lastRevenueRound:V.lastRevenueRound}))),console.log("[DEBUG]  Verificao de rodada - Jogador:",(xn=$[C])==null?void 0:xn.name,"Rodada atual:",P.current,"round do closure:",n),console.log("[DEBUG]  Jogadores vivos:",M.map(V=>{var ne;return`${(ne=$[V])==null?void 0:ne.name}:${W[V]}`}).join(", ")),console.log("[DEBUG]  Total de jogadores vivos:",M.length),console.log("[DEBUG]  Flags completas:",W.map((V,ne)=>{var ae;return`${(ae=$[ne])==null?void 0:ae.name}:${V?"":""}`}).join(", ")),console.log("[DEBUG]  Todos passaram pela casa 0?",Z),Z){const V=P.current;if(ie=V+1,Q=!0,V===5&&Q){console.log("[ENDGAME] detectado: fim da 5 (tentaria round=6)"),Qt($,6,o);return}console.log("[DEBUG]  Calculando incremento - round (ref):",V,"round (closure):",n,"nextRound:",ie),W=W.map((ae,ye)=>{var me;return(me=$[ye])!=null&&me.bankrupt?W[ye]:!1}),console.log("[DEBUG]  RODADA INCREMENTADA - Nova rodada:",ie,"Rodada anterior (ref):",V,"Rodada anterior (closure):",n,"Jogadores vivos:",K.length),console.log("[DEBUG]  Flags resetadas:",W.map((ae,ye)=>{var me;return`${(me=$[ye])==null?void 0:me.name}:${ae}`}).join(", ")),b(` Rodada ${ie} iniciada! Todos os jogadores vivos passaram pela casa de faturamento.`)}else{const V=K.filter(ne=>(Number(ne.lastRevenueRound)||0)<P.current).map(ne=>ne.name);console.log("[DEBUG]  Rodada NO incrementada - ainda faltam jogadores completarem o ms:",V.join(", "))}}l(W),console.log("[DEBUG] roundFlags updated / round closed:",W.map((j,M)=>{var K;return`${(K=$[M])==null?void 0:K.name}:${j}`}).join(", "));let Je=ls($,C);if(P.current===5){let j=0;for(;j<$.length;){const M=$[Je];if(!M.bankrupt&&M.waitingAtRevenue!==!0)break;Je=(Je+1)%$.length,j++}}Ke&&b(`${pe.name} ${Ke>0?"ganhou":"pagou"} $${Math.abs(Ke).toLocaleString()}`),Ie&&b(Ie),e($),r(j=>{let M=j;return Q?ie>j?(M=ie,console.log("[DEBUG]  RODADA INCREMENTADA - Rodada anterior:",j,"Nova rodada:",M,"nextRound calculado:",ie),console.log("[DEBUG]  Rodada incrementada com sucesso!"),b(` Rodada ${M} iniciada! Todos os jogadores vivos passaram pela casa de faturamento.`)):(M=j+1,console.log("[DEBUG]  RODADA INCREMENTADA (forado) - Rodada anterior:",j,"Nova rodada:",M,"nextRound calculado:",ie),console.log("[DEBUG]  Rodada incrementada com sucesso (forado devido a sincronizao)!"),b(` Rodada ${M} iniciada! Todos os jogadores vivos passaram pela casa de faturamento.`)):(M=Math.max(ie,j),M!==j&&console.log("[DEBUG]  Rodada atualizada via Math.max - prevRound:",j,"nextRound:",ie,"finalRound:",M)),P.current=M,M});const Me=ie,Ue=W;if(re.current={nextPlayers:$,nextTurnIdx:Je,nextRound:Me,nextRoundFlags:Ue,timestamp:Date.now(),shouldIncrementRound:Q,endGame:ue},console.log("[DEBUG]  pendingTurnDataRef preenchido - prximo turno:",Je,"rodada atual:",n,"prxima rodada:",Me,"nextRound calculado:",ie,"shouldIncrementRound:",Q,"rodada foi incrementada?",ie>n,"roundFlags:",Ue.map((j,M)=>{var K;return`${(K=$[M])==null?void 0:K.name}:${j}`}).join(", ")),Qt($,ie,o)){re.current=null,F.current=!1,I.current=!1;return}const le=_e+1,Ce=Sl(je,_e,0),Dt=Sl(je,_e,22);let q=!1;if((le===6||le===16||le===32||le===49)&&u&&D&&S&&(q=!0,I.current=!0,(async()=>{var V,ne,ae,ye,me;const j=((V=t[C])==null?void 0:V.erpLevel)||null,M=((ne=t[C])==null?void 0:ne.erpOwned)||((ae=t[C])==null?void 0:ae.erp)||{},K=await Oe(a.jsx(hf,{currentCash:((ye=$[C])==null?void 0:ye.cash)??f,currentLevel:j,erpOwned:M}));if(!K||K.action!=="BUY")return;const Z=Number(((me=K.values)==null?void 0:me.compra)||0);if(!it(C,Z,"comprar ERP")){p(!1);return}e(ge=>{const nt=ge.map((Fe,Re)=>Re!==C?Fe:jt(Fe,{cashDelta:-Z,erpLevelSet:K.level}));return x(nt,o,P.current),nt})})()),(le===2||le===11||le===19||le===47)&&u&&D&&S&&(I.current=!0,(async()=>{var Z,V,ne,ae;const j=t.find(c)||$[C],M=await Oe(a.jsx(pf,{canTrain:{comum:Number(j==null?void 0:j.vendedoresComuns)||0,field:Number(j==null?void 0:j.fieldSales)||0,inside:Number(j==null?void 0:j.insideSales)||0,gestor:Number((j==null?void 0:j.gestores)??(j==null?void 0:j.gestoresComerciais)??(j==null?void 0:j.managers))||0},ownedByType:{comum:((Z=j==null?void 0:j.trainingsByVendor)==null?void 0:Z.comum)||[],field:((V=j==null?void 0:j.trainingsByVendor)==null?void 0:V.field)||[],inside:((ne=j==null?void 0:j.trainingsByVendor)==null?void 0:ne.inside)||[],gestor:((ae=j==null?void 0:j.trainingsByVendor)==null?void 0:ae.gestor)||[]}}));if(!M||M.action!=="BUY")return;const K=Number(M.grandTotal||0);if(!it(C,K,"comprar Treinamento")){p(!1);return}e(ye=>{const me=ye.map((ge,nt)=>nt!==C?ge:df(ge,M));return x(me,o,P.current),me})})()),(le===5||le===10||le===43)&&u&&D&&S&&(I.current=!0,(async()=>{var K,Z,V,ne,ae,ye,me,ge,nt,Fe,Re,gt,Ye,ht,Et,Pt,wn,An,Tn;const j=((K=$[C])==null?void 0:K.cash)??f,M=await Oe(a.jsx(Gx,{currentCash:j}));if(M){if(M.action==="OPEN"){const ve=String(M.open||"").toUpperCase();if(ve==="MIX"){const L=((Z=t[C])==null?void 0:Z.mixProdutos)||null,xe=((V=t[C])==null?void 0:V.mixOwned)||((ne=t[C])==null?void 0:ne.mix)||{},ee=await Oe(a.jsx(bf,{currentCash:((ae=$[C])==null?void 0:ae.cash)??f,currentLevel:L,mixOwned:xe}));if(ee&&ee.action==="BUY"){const se=Number(ee.compra||0),we=String(ee.level||"D");if(!it(C,se,"comprar MIX")){p(!1);return}e(be=>{const Se=be.map((ze,Ut)=>Ut!==C?ze:jt(ze,{cashDelta:-se,mixProdutosSet:we,mixBaseSet:{despesaPorCliente:Number(ee.despesa||0),faturamentoPorCliente:Number(ee.faturamento||0)}}));return x(Se,o,P.current),Se})}return}if(ve==="MANAGER"){const L=await Oe(a.jsx(yf,{currentCash:((ye=$[C])==null?void 0:ye.cash)??f}));if(L&&(L.action==="BUY"||L.action==="HIRE")){const xe=Number(L.headcount??L.qty??L.managersQty??1),ee=Number(typeof L.cashDelta<"u"?L.cashDelta:-Number(L.cost??L.total??L.totalHire??0)),se=ee<0?-ee:0;if(se>0&&!it(C,se,"contratar Gestor")){p(!1);return}const we=Number(L.expenseDelta??L.totalExpense??L.maintenanceDelta??0);e(be=>{const Se=be.map((ze,Ut)=>Ut!==C?ze:jt(ze,{cashDelta:ee,gestoresDelta:xe,manutencaoDelta:we}));return x(Se,o,P.current),Se})}return}if(ve==="INSIDE"){const L=await Oe(a.jsx(mf,{currentCash:((me=$[C])==null?void 0:me.cash)??f}));if(L&&(L.action==="BUY"||L.action==="HIRE")){const xe=Number(L.cost??L.total??0);if(!it(C,xe,"contratar Inside Sales")){p(!1);return}const ee=Number(L.headcount??L.qty??1);e(se=>{const we=se.map((be,Se)=>Se!==C?be:jt(be,{cashDelta:-xe,insideSalesDelta:ee}));return x(we,o,P.current),we})}return}if(ve==="FIELD"){const L=await Oe(a.jsx(vf,{currentCash:((ge=$[C])==null?void 0:ge.cash)??f}));if(L&&(L.action==="HIRE"||L.action==="BUY")){const xe=Number(L.headcount??L.qty??1),ee={cashDelta:Number(L.cashDelta??-Number(L.totalHire??L.total??L.cost??0)),manutencaoDelta:Number(L.expenseDelta??L.totalExpense??0),revenueDelta:Number(L.revenueDelta??0),fieldSalesDelta:xe},se=ee.cashDelta<0?-ee.cashDelta:0;if(se>0&&!it(C,se,"contratar Field Sales")){p(!1);return}e(we=>{const be=we.map((Se,ze)=>ze!==C?Se:jt(Se,ee));return x(be,o,P.current),be})}return}if(ve==="COMMON"){const L=await Oe(a.jsx(xf,{currentCash:((nt=$[C])==null?void 0:nt.cash)??f}));if(L&&L.action==="BUY"){const xe=Number(L.headcount??L.qty??0),ee={cashDelta:Number(L.cashDelta??-Number(L.totalHire??L.total??L.cost??0)),vendedoresComunsDelta:xe,manutencaoDelta:Number(L.expenseDelta??L.totalExpense??0),revenueDelta:Number(L.revenueDelta??0)},se=ee.cashDelta<0?-ee.cashDelta:0;if(se>0&&!it(C,se,"contratar Vendedores Comuns")){p(!1);return}e(we=>{const be=we.map((Se,ze)=>ze!==C?Se:jt(Se,ee));return x(be,o,P.current),be})}return}if(ve==="ERP"){const L=((Fe=t[C])==null?void 0:Fe.erpLevel)||null,xe=((Re=t[C])==null?void 0:Re.erpOwned)||((gt=t[C])==null?void 0:gt.erp)||{},ee=await Oe(a.jsx(hf,{currentCash:((Ye=$[C])==null?void 0:Ye.cash)??f,currentLevel:L,erpOwned:xe}));if(ee&&ee.action==="BUY"){const se=Number(((ht=ee.values)==null?void 0:ht.compra)||0);if(!it(C,se,"comprar ERP")){p(!1);return}e(we=>{const be=we.map((Se,ze)=>ze!==C?Se:jt(Se,{cashDelta:-se,erpLevelSet:ee.level}));return x(be,o,P.current),be})}return}if(ve==="CLIENTS"){const L=await Oe(a.jsx(gf,{currentCash:((Et=$[C])==null?void 0:Et.cash)??f}));if(L&&L.action==="BUY"){const xe=Number(L.totalCost||0);if(!it(C,xe,"comprar Clientes")){p(!1);return}const ee=Number(L.qty||0),se=Number(L.maintenanceDelta||0),we=Number(L.bensDelta||xe);e(be=>{const Se=be.map((ze,Ut)=>Ut!==C?ze:jt(ze,{cashDelta:-xe,clientsDelta:ee,manutencaoDelta:se,bensDelta:we}));return x(Se,o,P.current),Se})}return}if(ve==="TRAINING"){const L=t.find(c)||$[C],xe=await Oe(a.jsx(pf,{canTrain:{comum:Number(L==null?void 0:L.vendedoresComuns)||0,field:Number(L==null?void 0:L.fieldSales)||0,inside:Number(L==null?void 0:L.insideSales)||0,gestor:Number((L==null?void 0:L.gestores)??(L==null?void 0:L.gestoresComerciais)??(L==null?void 0:L.managers))||0},ownedByType:{comum:((Pt=L==null?void 0:L.trainingsByVendor)==null?void 0:Pt.comum)||[],field:((wn=L==null?void 0:L.trainingsByVendor)==null?void 0:wn.field)||[],inside:((An=L==null?void 0:L.trainingsByVendor)==null?void 0:An.inside)||[],gestor:((Tn=L==null?void 0:L.trainingsByVendor)==null?void 0:Tn.gestor)||[]}}));if(xe&&xe.action==="BUY"){const ee=Number(xe.grandTotal||0);if(!it(C,ee,"comprar Treinamento")){p(!1);return}e(se=>{const we=se.map((be,Se)=>Se!==C?be:df(be,xe));return x(we,o,P.current),we})}return}}if(M.action==="BUY"){if(M.kind==="CLIENTS"||M.modal==="CLIENTS"||typeof M.clientsQty<"u"||typeof M.numClients<"u"||typeof M.totalCost<"u"||typeof M.maintenanceDelta<"u"){const xe=Number(M.totalCost??M.total??M.amount??0);if(!it(C,xe,"comprar Clientes")){p(!1);return}const ee=Number(M.clientsQty??M.numClients??M.qty??0),se=Number(M.maintenanceDelta??M.maintenance??M.mexp??0),we=Number(M.bensDelta??xe);e(be=>{const Se=be.map((ze,Ut)=>Ut!==C?ze:jt(ze,{cashDelta:-xe,clientsDelta:ee,manutencaoDelta:se,bensDelta:we}));return x(Se,o,P.current),Se});return}const L=Number(M.total??M.amount??0);if(!it(C,L,"esta compra")){p(!1);return}e(xe=>{const ee=xe.map((se,we)=>we!==C?se:jt(se,{cashDelta:-L,directBuysPush:[M.item||{total:L}]}));return x(ee,o,P.current),ee})}}})()),(le===12||le===21||le===30||le===42||le===53)&&u&&D&&S&&(I.current=!0,(async()=>{var Z;const j=await Oe(a.jsx(mf,{currentCash:((Z=$[C])==null?void 0:Z.cash)??f}));if(!j||j.action!=="HIRE"&&j.action!=="BUY")return;const M=Number(j.cost??j.total??0);if(!it(C,M,"contratar Inside Sales")){p(!1);return}const K=Number(j.headcount??j.qty??1);e(V=>{const ne=V.map((ae,ye)=>ye!==C?ae:jt(ae,{cashDelta:-M,insideSalesDelta:K}));return x(ne,o,P.current),ne})})()),[4,8,15,17,20,27,34,36,39,46,52,55].includes(le)&&u&&D&&S&&(I.current=!0,(async()=>{var ne;const j=await Oe(a.jsx(gf,{currentCash:((ne=$[C])==null?void 0:ne.cash)??f}));if(!j||j.action!=="BUY")return;const M=Number(j.totalCost||0);if(!it(C,M,"comprar Clientes")){p(!1);return}const K=Number(j.qty||0),Z=Number(j.maintenanceDelta||0),V=Number(j.bensDelta||M);e(ae=>{const ye=ae.map((me,ge)=>ge!==C?me:jt(me,{cashDelta:-M,clientsDelta:K,manutencaoDelta:Z,bensDelta:V}));return x(ye,o,P.current),ye})})()),[18,24,29,51].includes(le)&&u&&D&&S&&(I.current=!0,(async()=>{var ne;const j=await Oe(a.jsx(yf,{currentCash:((ne=$[C])==null?void 0:ne.cash)??f}));if(!j||j.action!=="BUY"&&j.action!=="HIRE")return;const M=Number(j.headcount??j.qty??j.managersQty??1),K=Number(typeof j.cashDelta<"u"?j.cashDelta:-Number(j.cost??j.total??j.totalHire??0)),Z=K<0?-K:0;if(Z>0&&!it(C,Z,"contratar Gestor")){p(!1);return}const V=Number(j.expenseDelta??j.totalExpense??j.maintenanceDelta??0);e(ae=>{const ye=ae.map((me,ge)=>ge!==C?me:jt(me,{cashDelta:K,gestoresDelta:M,manutencaoDelta:V}));return x(ye,o,P.current),ye})})()),[13,25,33,38,50].includes(le)&&u&&D&&S&&(I.current=!0,(async()=>{var M;const j=await Oe(a.jsx(vf,{currentCash:((M=$[C])==null?void 0:M.cash)??f}));if(j&&(j.action==="HIRE"||j.action==="BUY")){const K=Number(j.headcount??j.qty??1),Z={cashDelta:Number(j.cashDelta??-Number(j.totalHire??j.total??j.cost??0)),manutencaoDelta:Number(j.expenseDelta??j.totalExpense??0),revenueDelta:Number(j.revenueDelta??0),fieldSalesDelta:K},V=Z.cashDelta<0?-Z.cashDelta:0;if(V>0&&!it(C,V,"contratar Field Sales")){p(!1);return}e(ne=>{const ae=ne.map((ye,me)=>me!==C?ye:jt(ye,Z));return x(ae,o,P.current),ae})}})()),[9,28,40,45].includes(le)&&u&&D&&S&&(I.current=!0,(async()=>{var V;const j=await Oe(a.jsx(xf,{currentCash:((V=$[C])==null?void 0:V.cash)??f}));if(!j||j.action!=="BUY")return;const M=Number(j.headcount??j.qty??0),K={cashDelta:Number(j.cashDelta??-Number(j.totalHire??j.total??j.cost??0)),vendedoresComunsDelta:M,manutencaoDelta:Number(j.expenseDelta??j.totalExpense??0),revenueDelta:Number(j.revenueDelta??0)},Z=K.cashDelta<0?-K.cashDelta:0;if(Z>0&&!it(C,Z,"contratar Vendedores Comuns")){p(!1);return}e(ne=>{const ae=ne.map((ye,me)=>me!==C?ye:jt(ye,K));return x(ae,o,P.current),ae})})()),[7,31,44].includes(le)&&u&&D&&S&&(I.current=!0,(async()=>{var ne,ae,ye,me;const j=((ne=t[C])==null?void 0:ne.mixProdutos)||null,M=((ae=t[C])==null?void 0:ae.mixOwned)||((ye=t[C])==null?void 0:ye.mix)||{},K=await Oe(a.jsx(bf,{currentCash:((me=$[C])==null?void 0:me.cash)??f,currentLevel:j,mixOwned:M}));if(!K||K.action!=="BUY")return;const Z=Number(K.compra||0);if(!it(C,Z,"comprar MIX")){p(!1);return}const V=String(K.level||"D");e(ge=>{const nt=ge.map((Fe,Re)=>Re!==C?Fe:jt(Fe,{cashDelta:-Z,mixProdutosSet:V,mixBaseSet:{despesaPorCliente:Number(K.despesa||0),faturamentoPorCliente:Number(K.faturamento||0)}}));return x(nt,o,P.current),nt})})()),[3,14,22,26,35,41,48,54].includes(le)&&u&&D&&S&&(I.current=!0,(async()=>{const j=await Oe(a.jsx(qx,{}));if(!j||j.action!=="APPLY_CARD")return;const M=$[C]||t.find(c)||{};let K=Number.isFinite(j.cashDelta)?Number(j.cashDelta):0,Z=Number.isFinite(j.clientsDelta)?Number(j.clientsDelta):0;if(K<0){const ne=-K;await fe(ne,"Sorte & Revs","pagar",$)}if(e(ne=>{const ae=ne.map((ye,me)=>{var nt;if(me!==C)return ye;let ge={...ye};if(K&&(ge.cash=Math.max(0,(ge.cash??0)+K)),Z){const Fe=ge.clients||0;ge.clients=Math.max(0,Fe+Z),console.log("[DEBUG] SorteReves - Clientes alterados:",Fe,"->",ge.clients,"delta:",Z)}if(j.gainSpecialCell&&(ge.fieldSales=(ge.fieldSales||0)+(j.gainSpecialCell.fieldSales||0),ge.support=(ge.support||0)+(j.gainSpecialCell.support||0),ge.gestores=(ge.gestores||0)+(j.gainSpecialCell.manager||0),ge.gestoresComerciais=(ge.gestoresComerciais||0)+(j.gainSpecialCell.manager||0),ge.managers=(ge.managers||0)+(j.gainSpecialCell.manager||0)),j.id==="casa_change_cert_blue"){ge.az=(ge.az||0)+1;const Fe=new Set(((nt=ge.trainingsByVendor)==null?void 0:nt.comum)||[]);Fe.add("personalizado"),ge.trainingsByVendor={...ge.trainingsByVendor||{},comum:Array.from(Fe)}}return ge});return x(ae,o,P.current),ae}),j.perClientBonus||j.perCertifiedManagerBonus||j.mixLevelBonusABOnly){const ne=$[C]||t.find(c)||{};let ae=0;if(j.perClientBonus&&(ae+=(Number(ne.clients)||0)*Number(j.perClientBonus||0)),j.perCertifiedManagerBonus&&(ae+=Ox(ne)*Number(j.perCertifiedManagerBonus||0)),j.mixLevelBonusABOnly){const ye=String(ne.mixProdutos||"").toUpperCase();(ye==="A"||ye==="B")&&(ae+=Number(j.mixLevelBonusABOnly||0))}ae&&e(ye=>{const me=ye.map((ge,nt)=>nt===C?{...ge,cash:(Number(ge.cash)||0)+ae}:ge);return x(me,o,P.current),me})}})()),Ce&&u&&D&&S){I.current=!0;const j=$[C]||{},M=Math.max(0,Math.floor($a(j)));(async()=>{await Oe(a.jsx(Hx,{value:M})),e(K=>{const Z=K.map((V,ne)=>ne!==C?V:{...V,cash:(V.cash||0)+M});return x(Z,o,P.current),Z}),b(`${j.name} recebeu faturamento do ms: +$${M.toLocaleString()}`);try{setTimeout(()=>T==null?void 0:T({action:"AUTO_CLOSE_BELOW"}),0)}catch{}})()}if(Dt&&u&&D&&S){I.current=!0,console.log("[DEBUG]  DESPESAS OPERACIONAIS - Jogador:",(Nn=$[C])==null?void 0:Nn.name,"Posio atual:",(z=$[C])==null?void 0:z.pos);const j=$[C]||{},M=Math.max(0,Math.floor(Ia(j))),K=j.loanPending||{},Z=Number(K.amount)>0&&!K.charged&&K.shouldChargeOnNextExpenses===!0,V=Z?Math.max(0,Math.floor(Number(K.amount))):0;console.log("[DEBUG]  DESPESAS - Valor:",M,"Emprstimo a cobrar:",V,"Total:",M+V),console.log("[DEBUG]  EMPRSTIMO - Detalhes:",{amount:Number(K.amount),charged:K.charged,shouldChargeOnNextExpenses:K.shouldChargeOnNextExpenses,currentRound:n,shouldCharge:Z}),(async()=>{var ye,me,ge;await Oe(a.jsx(Kx,{expense:M,loanCharge:V}));const ne=M+V;console.log("[DEBUG]  ANTES handleInsufficientFunds - Saldo atual:",(ye=$[C])==null?void 0:ye.cash,"Total a pagar:",ne,"Posio:",(me=$[C])==null?void 0:me.pos);const ae=await fe(ne,"Despesas Operacionais","pagar",$);if(console.log("[DEBUG]  APS handleInsufficientFunds - canPayExpenses:",ae,"Posio atual:",(ge=$[C])==null?void 0:ge.pos),!ae){console.log("[DEBUG]  canPayExpenses  false - no liberando turno aqui, deixando tick() gerenciar");return}Z&&e(nt=>{const Fe=nt.map((Re,gt)=>{var ht;if(gt!==C)return Re;const Ye={...Re};return Ye.loanPending={...Re.loanPending||{},charged:!0,chargedAtRound:n,shouldChargeOnNextExpenses:!1},Ye.pos=((ht=$[C])==null?void 0:ht.pos)??Re.pos,Ye});return x(Fe,o,P.current),Fe}),b(`${j.name} pagou despesas operacionais: -$${M.toLocaleString()}`),V>0&&b(`${j.name} teve emprstimo cobrado: -$${V.toLocaleString()}`),e(nt=>{var Re,gt,Ye;const Fe=nt.map((ht,Et)=>{var Pt;return Et!==C?ht:{...ht,pos:((Pt=$[C])==null?void 0:Pt.pos)??ht.pos}});return console.log("[DEBUG]  DESPESAS FINALIZADAS - Jogador:",(Re=Fe[C])==null?void 0:Re.name,"Posio final:",(gt=Fe[C])==null?void 0:gt.pos,"Saldo final:",(Ye=Fe[C])==null?void 0:Ye.cash),Fe})})()}const ni=Date.now();let kt=0;const nr=200,rr=()=>{var ye;if(kt++,kt>nr){console.warn("[DEBUG]  TIMEOUT - excedeu tentativas mximas, forando desbloqueio");const me=te.current;String(me||"")===String(d)&&(p(!1),F.current=!1,O.current>0&&(console.warn("[DEBUG]  Forando modalLocks para 0 (timeout)"),O.current=0,A(0)),I.current=!1);return}const j=O.current,M=I.current,K=te.current,Z=String(K||"")===String(d);if(console.log("[DEBUG] tick - tentativa:",kt,"modalLocks:",j,"openingModalRef:",M,"lockOwner:",K,"myUid:",d,"isLockOwner:",Z),M){console.log("[DEBUG]  tick - modal est sendo aberta, aguardando..."),setTimeout(rr,150);return}const V=He.current?Date.now()-He.current:1/0;if(j===0&&(V>=200||!He.current)){const me=re.current;if(!!(me!=null&&me.endGame||Yt.current)&&!Xe.current){Xe.current=!0,Yt.current=!1;const Re=Array.isArray($e.current)?$e.current:(me==null?void 0:me.nextPlayers)||[],gt=(Re||[]).filter(ht=>!(ht!=null&&ht.bankrupt));let Ye=null;gt.length>0&&(Ye=((ye=gt.map(Et=>({p:Et,patrimonio:(Number(Et.cash)||0)+(Number(Et.bens)||0),cash:Number(Et.cash)||0})).sort((Et,Pt)=>{var wn,An;return Pt.patrimonio-Et.patrimonio||Pt.cash-Et.cash||String(((wn=Et.p)==null?void 0:wn.name)||"").localeCompare(String(((An=Pt.p)==null?void 0:An.name)||""))})[0])==null?void 0:ye.p)||null),console.log("[ENDGAME] finalizando: vencedor=%s, round=5",(Ye==null?void 0:Ye.name)||""),e(Re||[]),y(!0),E(Ye),r(5),P.current=5,re.current=null,F.current=!1,I.current=!1,p(!1),x(Re||[],cn.current,5,!0,Ye,{round:5,gameOver:!0,winner:Ye});return}const nt=t[o],Fe=nt&&String(nt.id)===String(d);if(Z||Fe&&!K){const Re=re.current;if(console.log("[DEBUG]  tick - verificando pendingTurnDataRef:",Re?`prximo turno: ${Re.nextTurnIdx}`:"null"),Re){const gt=O.current,Ye=I.current,ht=o,Et=te.current,Pt=String(Et||"")===String(d),wn=He.current?Date.now()-He.current:1/0,An=gt===0&&!Ye&&(wn>=200||!He.current);if(An&&ht===o&&Pt){if(console.log("[DEBUG]  Mudando turno - de:",o,"para:",Re.nextTurnIdx,"finalModalLocks:",gt,"finalOpening:",Ye,"timeSinceLastModalClosed:",wn),Re.endGame){const xe=Math.min(5,Number(Re.nextRound||5)),ee=t.filter(be=>!(be!=null&&be.bankrupt));let se=null;ee.length>0&&(se=ee.map(Se=>({...Se,patrimonio:(Se.cash||0)+(Se.bens||0)})).sort((Se,ze)=>ze.patrimonio-Se.patrimonio)[0]||null),console.log("[DEBUG]  FIM DE JOGO no tick - Rodada:",xe,"Vencedor:",(se==null?void 0:se.name)||null),E(se),y(!0),b("Fim de jogo! 5 rodadas completas."),r(be=>{const Se=Math.min(5,Math.max(be,xe));return P.current=Se,Se});const we={};Re.nextRoundFlags&&(we.roundFlags=Re.nextRoundFlags),we.round=xe,we.gameOver=!0,we.winner=se,x(t,o,xe,!0,se,we),re.current=null,p(!1),F.current=!1;return}F.current=!0;const Tn=Re.nextRound,ve=Re.shouldIncrementRound||!1;console.log("[DEBUG]  Broadcast - Rodada a ser transmitida:",Tn,"Rodada atual no estado:",n,"shouldIncrement:",ve),s(Re.nextTurnIdx),r(xe=>{const ee=Math.max(xe,Tn);return ee!==xe&&console.log("[DEBUG]  Rodada atualizada no tick - de:",xe,"para:",ee),P.current=ee,ee});const L={};Re.nextRoundFlags&&(L.roundFlags=Re.nextRoundFlags),Re.shouldIncrementRound&&(L.round=Tn),x(Re.nextPlayers,Re.nextTurnIdx,Tn,m,w,L),re.current=null,p(!1),F.current=!1,console.log("[DEBUG]  Turno mudado com sucesso - Rodada:",Tn)}else{console.log("[DEBUG]  tick - condies no atendidas, no mudando turno",{finalModalLocks:gt,finalOpening:Ye,finalCanChangeTurn:An,timeSinceLastModalClosed:wn,finalTurnIdx:ht,turnIdx:o,finalIsLockOwner:Pt,isLockOwner:Z}),console.log("[DEBUG]  tick - condies no atendidas, no mudando turno",{finalModalLocks:gt,finalOpening:Ye,finalTurnIdx:ht,turnIdx:o,finalIsLockOwner:Pt,isLockOwner:Z}),setTimeout(rr,150);return}}else{console.log("[DEBUG]  tick - turnData  null, no mudando turno. turnIdx atual:",o,"lockOwner:",K,"isLockOwner:",Z);const gt=He.current?Date.now()-He.current:1/0,Ye=j===0&&(gt>=200||!He.current);if(Z&&Ye&&!M)if(kt<10){console.log("[DEBUG]  tick - tentando novamente em 200ms (pode ser que pendingTurnDataRef ainda no foi preenchido)"),setTimeout(rr,200);return}else console.warn("[DEBUG]  tick - excedeu tentativas de retry, liberando turnLock"),p(!1),F.current=!1;else p(!1),F.current=!1}}else console.log("[DEBUG]  tick - no sou o dono do cadeado e no  minha vez, no mudando turno",{isLockOwner:Z,isCurrentPlayerMe:Fe,currentLockOwner:K,myUid:d,turnIdx:o}),Fe||(p(!1),F.current=!1);return}setTimeout(rr,100)};let bn=0;const Vn=50,Tc=()=>{bn++;const j=I.current,M=O.current>0;if((j||M)&&bn<Vn){console.log("[DEBUG]  checkBeforeTick - modal sendo aberta ou j aberta, aguardando...",{hasOpening:j,hasLocks:M,modalLocks:O.current,attempt:bn}),setTimeout(Tc,200);return}bn>=Vn&&(console.warn("[DEBUG]  checkBeforeTick - excedeu tentativas, forando avano do turno",{hasOpening:j,hasLocks:M,modalLocks:O.current}),O.current>0&&(console.warn("[DEBUG]  checkBeforeTick - forando modalLocks para 0"),O.current=0,A(0)),I.current=!1),console.log("[DEBUG]  checkBeforeTick - iniciando tick, sem modais abertas"),rr()};setTimeout(Tc,500)}catch(C){throw console.error("[DEBUG] Erro em advanceAndMaybeLap:",C),te.current===String(d)&&p(!1),C}finally{te.current===String(d)?setTimeout(()=>{te.current===String(d)&&(p(!1),F.current=!1)},100):F.current=!1}}},[t,n,o,i,u,c,d,f,m,b,x,e,r,s,l,p,it,Qt,D,S,T]),Ma=he.useCallback(()=>{if(m||!t.length)return;const J=ls(t,o);s(J),x(t,J,P.current)},[x,m,t,n,s,o]),vt=he.useCallback(J=>{var Ke,Ie,Le,dn,_t,Xt,ft,xn,Nn;if(!(!(J!=null&&J.type)||ce.current||Yt.current||Xe.current)){if(J.type==="ROLL"){if(!u){console.warn("[DEBUG]  onAction ROLL - no  minha vez, ignorando");return}if(_){console.warn("[DEBUG]  onAction ROLL - turnLock ativo, ignorando");return}if(O.current>0){console.warn("[DEBUG]  onAction ROLL - h modais abertas, ignorando");return}try{Vr(J.steps,J.cashDelta,J.note)}catch(z){console.error("[DEBUG] Erro em advanceAndMaybeLap:",z),te.current===String(d)&&p(!1)}return}if(J.type==="RECOVERY"){const z=Math.floor(Math.random()*3e3)+1e3,C=t.find(c);if(!C)return;const pe=t.map(fe=>c(fe)?{...fe,cash:fe.cash+z}:fe);b(`${C.name} ativou Recuperao Financeira (+$${z})`),e(pe),x(pe,o,P.current);return}if(J.type==="RECOVERY_CUSTOM"){const z=Number(J.amount||0),C=t.find(c);if(!C)return;const pe=t.map(fe=>c(fe)?{...fe,cash:fe.cash+z}:fe);b(`${C.name} recuperou +$${z}`),e(pe),x(pe,o,P.current);return}if(J.type==="RECOVERY_MODAL"){if(!u||!D||!S)return;(async()=>{const z=await Oe(a.jsx(wf,{playerName:(g==null?void 0:g.name)||"Jogador",currentPlayer:g}));if(z){if(z&&z.type==="TRIGGER_BANKRUPTCY"){vt({type:"BANKRUPT"});return}switch(z.type){case"FIRE":vt==null||vt({type:"RECOVERY_FIRE",items:z.items,amount:z.totalCredit??z.amount??0,note:z.note,creditByRole:z.creditByRole});break;case"REDUCE":{const C=Array.isArray(z.items)&&z.items.length>0,pe=C?z.items.map((N,U)=>({...N,group:String(N.group||N.tipo||"").toUpperCase(),level:String(N.level||N.nivel||"").toUpperCase(),credit:Number(N.credit??N.amount??0),selected:U===0?!0:!!N.selected})):void 0,fe=C&&(pe==null?void 0:pe[0])||z.selection||z.sel||(z.group&&z.level?{group:String(z.group).toUpperCase(),level:String(z.level).toUpperCase(),credit:Number(z.credit??z.amount??0)}:null),je=Number((C?z.total??z.totalCredit:void 0)??(fe==null?void 0:fe.credit)??z.amount??0),_e=z.note||(C?`Reduo mltipla +R$ ${je.toLocaleString()}`:fe?`Reduo ${fe.group} nvel ${fe.level} +R$ ${je.toLocaleString()}`:`Reduo +R$ ${je.toLocaleString()}`);vt==null||vt({type:"RECOVERY_REDUCE",items:pe,selection:fe||null,amount:je,note:_e});break}case"LOAN":{const C=typeof z.amount=="object"&&z.amount!==null?z.amount:{amount:Number(z.amount??0),cashDelta:Number(z.cashDelta??z.amount??0),loan:z.loan},pe=Number(C.amount??0),fe=Number(C.cashDelta??pe??0),je=C.loan??z.loan??{};vt==null||vt({type:"RECOVERY_LOAN",amount:pe,cashDelta:fe,loan:je,note:z.note});break}default:z.amount>0&&(vt==null||vt({type:"RECOVERY_CUSTOM",amount:z.amount,note:z.note}))}}})();return}if(J.type==="BANKRUPT_MODAL"){if(!u||!D||!S)return;(async()=>await Oe(a.jsx(Zx,{playerName:(g==null?void 0:g.name)||"Jogador"}))&&(vt==null||vt({type:"BANKRUPT"})))();return}if(J.type==="RECOVERY_FIRE"){const z=Number(J.amount||0),C=J.items||{},pe={cashDelta:z,vendedoresComunsDelta:-Number(C.comum||0),fieldSalesDelta:-Number(C.field||0),insideSalesDelta:-Number(C.inside||0),gestoresDelta:-Number(C.gestor||0)},fe=o;e(je=>{const _e=je.map((N,U)=>U!==fe?N:jt(N,pe));return x(_e,o,P.current),_e}),b(`${((Ke=t[fe])==null?void 0:Ke.name)||"Jogador"}: ${J.note||"Demisses"}`);return}if(J.type==="RECOVERY_LOAN"){const z=Math.max(0,Number(J.amount||0));if(!z)return;const C=o,pe=t[C];if(pe!=null&&pe.loanPending&&!pe.loanPending.charged){b(`${(pe==null?void 0:pe.name)||"Jogador"} j possui um emprstimo pendente.`);return}e(fe=>{const je=fe.map((_e,N)=>N!==C?_e:{..._e,cash:(Number(_e.cash)||0)+z,loanPending:{amount:z,charged:!1,shouldChargeOnNextExpenses:!0}});return x(je,o,P.current),je}),b(`${(pe==null?void 0:pe.name)||"Jogador"} pegou emprstimo: +$${z.toLocaleString()}`);return}if(J.type==="BUY_MIX"||J.kind==="MIX_BUY"||J.type==="DIRECT_BUY_MIX"){const z=String(J.level||"").toUpperCase(),C=Math.max(0,Number(J.price??0));if(!["A","B","C","D"].includes(z)){p(!1);return}const pe=o;if(!vn(pe,C)){b("Saldo insuficiente para comprar MIX"),p(!1);return}e(fe=>{const je=fe.map((_e,N)=>{if(N!==pe)return _e;const U={..._e.mixOwned||_e.mix||{},D:!0};return U[z]=!0,{..._e,cash:Math.max(0,(Number(_e.cash)||0)-C),mixOwned:U,mix:U,mixLevel:z,mixProdutos:z}});return x(je,o,P.current),je}),b(`${((Ie=t[pe])==null?void 0:Ie.name)||"Jogador"} comprou MIX nvel ${z} por -$${C.toLocaleString()}`),p(!1);return}if(J.type==="BUY_ERP"||J.kind==="ERP_BUY"||J.type==="DIRECT_BUY_ERP"){const z=String(J.level||"").toUpperCase(),C=Math.max(0,Number(J.price??0));if(!["A","B","C","D"].includes(z)){p(!1);return}const pe=o;if(!vn(pe,C)){b("Saldo insuficiente para comprar ERP"),p(!1);return}e(fe=>{const je=fe.map((_e,N)=>{if(N!==pe)return _e;const U={..._e.erpOwned||_e.erp||{},D:!0};return U[z]=!0,{..._e,cash:Math.max(0,(Number(_e.cash)||0)-C),erpOwned:U,erp:U,erpLevel:z,erpSystems:{..._e.erpSystems||{},level:z}}});return x(je,o,P.current),je}),b(`${((Le=t[pe])==null?void 0:Le.name)||"Jogador"} comprou ERP nvel ${z} por -$${C.toLocaleString()}`),p(!1);return}if(J.type==="RECOVERY_REDUCE"){const z=W=>String(W||"").toUpperCase(),C=W=>{const Q=String(W||"").toUpperCase();return Q==="MIX"||Q==="ERP"?Q:Q.includes("MIX")?"MIX":Q.includes("ERP")?"ERP":""},fe=(()=>{if(Array.isArray(J.items)&&J.items.length)return J.items.filter(Q=>(Q==null?void 0:Q.selected)??!0).map(Q=>({group:C(Q.group||Q.kind),level:z(Q.level),credit:Math.max(0,Number(Q.credit??Q.amount??0))})).filter(Q=>(Q.group==="MIX"||Q.group==="ERP")&&["A","B","C"].includes(Q.level));const W=J.selection||J.target||null;if(W){const Q={group:C(W.group||W.kind),level:z(W.level),credit:Math.max(0,Number(W.credit??W.amount??J.amount??0))};if((Q.group==="MIX"||Q.group==="ERP")&&["A","B","C"].includes(Q.level))return[Q]}return[]})();if(!fe.length){const W=Math.max(0,Number(J.amount??0));if(W>0){const Q=o;e(ue=>{const Je=ue.map((Me,Ue)=>Ue!==Q?Me:{...Me,cash:(Number(Me.cash)||0)+W});return x(Je,o,P.current),Je})}return}const je=(W,Q)=>{const ue={A:!1,B:!1,C:!1,D:!1,...W||{}},Je=z(Q);return!ue.A&&!ue.B&&!ue.C&&!ue.D&&(["A","B","C","D"].includes(Je)?ue[Je]=!0:ue.D=!0),ue},_e=W=>W!=null&&W.A?"A":W!=null&&W.B?"B":W!=null&&W.C?"C":W!=null&&W.D?"D":"-",N=o,U=t[N];if(fe.some(W=>W.level==="D")){b("No  possvel reduzir o nvel D (bsico).");return}const oe=Array.isArray((dn=U.reducedLevels)==null?void 0:dn.MIX)?U.reducedLevels.MIX:[],H=Array.isArray((_t=U.reducedLevels)==null?void 0:_t.ERP)?U.reducedLevels.ERP:[];if(fe.some(W=>W.group==="MIX"&&oe.includes(W.level)||W.group==="ERP"&&H.includes(W.level))){b("No  possvel reduzir um nvel que j foi reduzido anteriormente.");return}e(W=>{const Q=W.map((ue,Je)=>{var vr,ni;if(Je!==N)return ue;let Me={A:!1,B:!1,C:!1,D:!1,...ue.mixOwned||ue.mix||{}},Ue={A:!1,B:!1,C:!1,D:!1,...ue.erpOwned||ue.erp||{}};Me=je(Me,ue.mixProdutos),Ue=je(Ue,ue.erpSistemas);const le=[...Array.isArray((vr=ue.reducedLevels)==null?void 0:vr.MIX)?ue.reducedLevels.MIX:[]],Ce=[...Array.isArray((ni=ue.reducedLevels)==null?void 0:ni.ERP)?ue.reducedLevels.ERP:[]];let Dt=0,q=String(ue.mixProdutos||"D").toUpperCase(),Y=String(ue.erpLevel||ue.erpSistemas||"D").toUpperCase();for(const kt of fe)if(Dt+=Math.max(0,Number(kt.credit||0)),kt.group==="MIX"){if(kt.level===q){const nr=["A","B","C","D"],rr=nr.indexOf(q);for(let bn=rr+1;bn<nr.length;bn++){const Vn=nr[bn];if(Me[Vn]||Vn==="D"){q=Vn;break}}}delete Me[kt.level],Me[kt.level]=!1,le.includes(kt.level)||le.push(kt.level)}else if(kt.group==="ERP"){if(kt.level===Y){const nr=["A","B","C","D"],rr=nr.indexOf(Y);for(let bn=rr+1;bn<nr.length;bn++){const Vn=nr[bn];if(Ue[Vn]||Vn==="D"){Y=Vn;break}}}delete Ue[kt.level],Ue[kt.level]=!1,Ce.includes(kt.level)||Ce.push(kt.level)}Me.A||Me.B||Me.C||(Me.D=!0,Me.A=!1,Me.B=!1,Me.C=!1),Ue.A||Ue.B||Ue.C||(Ue.D=!0,Ue.A=!1,Ue.B=!1,Ue.C=!1);const Zt=_e(Me),Wn=_e(Ue),Zn=Zt!=="-"?Zt:q||"D",er=Wn!=="-"?Wn:Y||"D",Dn={...Me},tr={...Ue};return{...ue,cash:(Number(ue.cash)||0)+Dt,mixOwned:Dn,erpOwned:tr,mix:Dn,erp:tr,mixProdutos:Zn,erpLevel:er,erpSistemas:er,reducedLevels:{MIX:le,ERP:Ce}}});return x(Q,o,P.current),Q});const ie=fe.reduce((W,Q)=>W+Math.max(0,Number(Q.credit||0)),0);if(fe.length===1){const W=fe[0];b(`${(U==null?void 0:U.name)||"Jogador"} reduziu ${W.group} nvel ${W.level} e recebeu +$${ie.toLocaleString()}`)}else b(`${(U==null?void 0:U.name)||"Jogador"} reduziu ${fe.length} nveis e recebeu +$${ie.toLocaleString()}`);return}if(J.type==="BANKRUPT"){const z=o;try{String((Xt=t[z])==null?void 0:Xt.id)===String(d)&&(R==null||R(!0))}catch{}const C=t.map((je,_e)=>_e===z?{...je,bankrupt:!0}:je);if(b(`${((ft=t[z])==null?void 0:ft.name)||"Jogador"} declarou FALNCIA.`),Cs(C)<=1){const je=C.findIndex(_e=>!(_e!=null&&_e.bankrupt));E(je>=0?C[je]:null),e(C),y(!0),p(!1),x(C,o,n,!0,je>=0?C[je]:null);return}const fe=ls(C,z);e(C),s(fe),p(!1),x(C,fe,P.current),console.log("[DEBUG]  advanceAndMaybeLap finalizada (falncia) - posio final:",(xn=C[fe])==null?void 0:xn.pos);return}console.log("[DEBUG]  advanceAndMaybeLap finalizada normalmente - posio final:",(Nn=nextPlayers[curIdx])==null?void 0:Nn.pos)}},[t,n,o,u,c,d,f,m,b,x,e,r,s,p,y,E,it,D,S,T,R]);return he.useEffect(()=>{if(v===0&&_&&!I.current){const J=te.current;String(J||"")===String(d)?(console.log("[DEBUG]  Destravando turnLock - modalLocks: 0, sou o lockOwner"),p(!1),F.current=!1):u||(console.log("[DEBUG]  Destravando turnLock - no  minha vez e no sou lockOwner"),p(!1),F.current=!1)}},[v,_,tt,d,u,p]),he.useEffect(()=>{if(u&&v===0&&_&&!I.current){const J=te.current;String(J||"")===String(d)?(console.log("[DEBUG]  Destravando turnLock -  minha vez e sou o lockOwner"),p(!1),F.current=!1):J||(console.log("[DEBUG]  Destravando turnLock -  minha vez mas no h lockOwner"),p(!1),F.current=!1)}},[u,v,_,tt,d,p]),he.useEffect(()=>()=>{Ee.current&&(clearTimeout(Ee.current),Ee.current=null),F.current=!1,I.current=!1},[]),{advanceAndMaybeLap:Vr,onAction:vt,nextTurn:Ma,modalLocks:v,lockOwner:tt}}const um=k.createContext(null),tb=()=>{try{return k.useContext(um)}catch{return null}};function nb({roomCode:t,hostId:e,children:n}){const r=!!Te&&!!t,o=String(t||"").trim(),[s,i]=k.useState(!1),[l,u]=k.useState({}),[c,d]=k.useState(0),h=k.useRef(l),f=k.useRef(c),g=k.useRef(0),x=k.useRef(null),b=k.useRef(null);k.useEffect(()=>{h.current=l},[l]),k.useEffect(()=>{f.current=c},[c]);const _=async y=>{const{data:w,error:E}=await Te.from("rooms").select("id, code, host_id, state, version, updated_at").eq("code",y).order("updated_at",{ascending:!1}).limit(1).maybeSingle();return E?(console.warn("[NET] getLatestRoomByCode error:",E.message||E),null):w};k.useEffect(()=>{if(!r)return;let y=!1;return(async()=>{let w=await _(o);if(!w){const E={code:o,state:{},version:0,host_id:e||null},{data:R,error:D}=await Te.from("rooms").insert(E).select("id, code, host_id, state, version, updated_at").maybeSingle();if(D){console.warn("[NET] rooms/create:",D.message||D);return}if(y)return;R?w=R:w=await _(o)}y||(w&&(x.current=w.id,b.current=w.updated_at,u(w.state||{}),d(w.version??0)),i(!0))})(),()=>{y=!0}},[r,o,e]),k.useEffect(()=>{if(!r)return;const y=Te.channel(`rooms:${o}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`code=eq.${o}`},w=>{const E=w.new||w.old||{};if(typeof E.version=="number"&&E.version>f.current){if(b.current&&E.updated_at){const R=new Date(E.updated_at).getTime(),D=new Date(b.current).getTime();if(R<D){console.log("[NET] realtime - ignorando evento de row antiga",{rowVersion:E.version,currentVersion:f.current,rowUpdatedAt:E.updated_at,knownUpdatedAt:b.current});return}}d(E.version),E.state&&u(E.state),E.updated_at&&(b.current=E.updated_at),E.id&&(x.current=E.id),g.current=Date.now(),console.log("[NET] applied remote v=%d",E.version)}}).subscribe();return()=>{try{Te.removeChannel(y)}catch{}}},[r,o]),k.useEffect(()=>{if(!r)return;const y=setInterval(async()=>{if(Date.now()-(g.current||0)<2e3)return;const w=await _(o);w&&w.version>f.current&&(d(w.version),u(w.state||{}),w.updated_at&&(b.current=w.updated_at),w.id&&(x.current=w.id))},700);return()=>clearInterval(y)},[r,o]);const p=async y=>{var D;if(!r||!s)return;const w=3,E=new Date().toISOString();for(let S=1;S<=w;S++){let T=await _(o);if(!T){const He={code:o,state:{},version:0,host_id:e||null},{data:tt,error:G}=await Te.from("rooms").insert(He).select("id, code, host_id, state, version, updated_at").maybeSingle();if(G){if(console.warn(`[NET] commit - insert failed (attempt ${S}/${w}):`,G.message||G),S<w){await new Promise(te=>setTimeout(te,50*S));continue}return}if(tt)T=tt,x.current=T.id,b.current=T.updated_at;else if(T=await _(o),!T){if(console.warn(`[NET] commit - no row after insert (attempt ${S}/${w})`),S<w){await new Promise(te=>setTimeout(te,50*S));continue}return}}T.id&&(x.current=T.id);const v=T.state||{},A=typeof y=="function"?y(v)||{}:y||{},O=x.current||T.id;if(!O){if(console.warn("[NET] commit - no target ID available"),S<w){await new Promise(He=>setTimeout(He,50*S));continue}return}const{data:I,error:F}=await Te.from("rooms").update({state:A,version:(T.version||0)+1,updated_at:E}).eq("id",O).eq("version",T.version).select("state, version, updated_at").maybeSingle();if(!F&&I){u(I.state||{}),d(I.version??(T.version||0)+1),I.updated_at&&(b.current=I.updated_at),S>1&&console.log(`[NET] commit succeeded on attempt ${S}/${w}`);return}if(((F==null?void 0:F.code)==="PGRST116"||((D=F==null?void 0:F.message)==null?void 0:D.includes("0 rows"))||(F==null?void 0:F.code)==="23505"||(F==null?void 0:F.message)&&F.message.includes("version"))&&S<w){console.warn(`[NET] commit conflict (attempt ${S}/${w}):`,(F==null?void 0:F.message)||F,"- retrying..."),await new Promise(He=>setTimeout(He,50*S));continue}console.warn(`[NET] commit conflict (attempt ${S}/${w}):`,(F==null?void 0:F.message)||F)}const R=await _(o);R?(u(R.state||{}),d(R.version??0),R.updated_at&&(b.current=R.updated_at),R.id&&(x.current=R.id),console.warn("[NET] commit failed after retries, resynced to latest state")):console.warn("[NET] commit fallback resync failed: no row found")},m=k.useMemo(()=>({enabled:r,ready:s,state:l,version:c,commit:p}),[r,s,l,c]);return a.jsx(um.Provider,{value:m,children:n})}function rb(){var pe,fe,je,_e;const[t,e]=k.useState("start"),[n,r]=k.useState(null),o=k.useMemo(()=>qs(),[]),s=k.useMemo(()=>ao(""),[]),[i,l]=k.useState(o);k.useMemo(()=>Object.freeze({mixProdutos:"D",erpLevel:"D",clients:1,vendedoresComuns:1}),[]);const u=(N={})=>({...N,mixProdutos:N.mixProdutos??"D",erpLevel:N.erpLevel??"D",clients:N.clients??1,vendedoresComuns:N.vendedoresComuns??1}),[c,d]=k.useState([u({id:o,name:s||"Jogador",cash:18e3,pos:0,color:"#ffd54f",bens:4e3})]),[h,f]=k.useState(1),[g,x]=k.useState(0),[b,_]=k.useState(new Array(1).fill(!1)),[p,m]=k.useState(!1),[y,w]=k.useState(null),[E,R]=k.useState({id:o,name:((pe=c[0])==null?void 0:pe.name)||"Jogador",color:((fe=c[0])==null?void 0:fe.color)||"#6c5ce7",cash:((je=c[0])==null?void 0:je.cash)??18e3,possibAt:0,clientsAt:0,matchId:"local"}),[D,S]=k.useState(["Bem-vindo ao Sales Game!"]),T=N=>S(U=>[N,...U].slice(0,12)),[v,A]=k.useState(!1),[O,I]=k.useState(null),F=k.useRef(null),Ee=k.useRef(null),He=k.useRef(0),tt=he.useCallback(N=>!!N&&String(N.id)===String(i),[i]),G=k.useMemo(()=>{var N;return((N=c.find(tt))==null?void 0:N.cash)??0},[c,tt]);k.useEffect(()=>{var N;try{const U=new URL(window.location.href),de=U.searchParams.get("room"),oe=localStorage.getItem("sg:lastRoomName"),H=de||oe;if(oe&&!de&&localStorage.removeItem("sg:lastRoomName"),H&&de){r(H),(N=window.__setRoomCode)==null||N.call(window,H);try{U.searchParams.set("room",String(H)),history.replaceState(null,"",U.toString())}catch{}e("playersLobby")}else s&&s.trim()!==""&&e("lobbies")}catch{}},[s]);const te=k.useMemo(()=>`sg-sync:${n||"local"}`,[n]);k.useEffect(()=>{var N,U;try{(U=(N=F.current)==null?void 0:N.close)==null||U.call(N);const de=new BroadcastChannel(te);return de.onmessage=oe=>{var $,ie,W,Q;const H=oe.data||{};if(String(H.source)!==String(o)){if(H.type==="START"){const ue=Array.isArray(H.players)?H.players.map(u):[];if(!ue.length)return;try{const Je=window.__MY_UID||window.__myUid||window.__playerId||null;Je&&l(String(Je))}catch{}d(ue),x(0),f(1),_(new Array(Math.max(1,ue.length)).fill(!1)),m(!1),w(null),e("game"),S(["Jogo iniciado!"]);return}if(H.type==="TURNLOCK"){A(!!H.value);return}if(H.type==="SYNC"&&t==="game"){if(P!=null&&P.enabled&&(P!=null&&P.ready)&&ce){console.log("[App] SYNC ignorado - netState ativo, usando Supabase como autoridade nica");return}const ue=Number(H.version||0),Je=Number(H.timestamp||0),Me=vn.current;if(console.log("[App] SYNC recebido - verso remota:",ue,"verso local:",Me,"turnIdx:",H.turnIdx,"round:",H.round,"source:",H.source),console.log("[App] SYNC - meu turnIdx atual:",g,"meu myUid:",i),ue>0&&Me>0&&ue<Me){console.log("[App] SYNC -  REJEITANDO estado remoto - verso antiga:",ue,"< verso local:",Me);return}const Ue=Date.now(),le=Xe.current;if(ue>Me&&(vn.current=ue,console.log("[App] SYNC -  Aceitando verso remota:",ue,"> verso local:",Me)),H.turnIdx!==g)if(le&&Ue-le.timestamp<5e3)if(le.turnIdx!==g){const Y=H.turnIdx===le.turnIdx;let mt=!1;Y?(console.log("[App] SYNC -  IGNORANDO turnIdx remoto - tentando reverter mudana local recente (mantendo resto do snapshot)",{lastLocalTurnIdx:le.turnIdx,currentLocalTurnIdx:g,remoteTurnIdx:H.turnIdx,timeSinceLocalChange:Ue-le.timestamp,isReverting:!0}),mt=!0):(console.log("[App] SYNC -  IGNORANDO turnIdx remoto - turnIdx local mudou recentemente (< 5s) (mantendo resto do snapshot)",{lastLocalTurnIdx:le.turnIdx,currentLocalTurnIdx:g,remoteTurnIdx:H.turnIdx,timeSinceLocalChange:Ue-le.timestamp}),mt=!0),!mt&&H.turnIdx!==void 0&&x(H.turnIdx)}else H.turnIdx===le.turnIdx&&le.turnIdx!==g?console.log("[App] SYNC -  IGNORANDO turnIdx remoto - tentando reverter para valor anterior (mantendo resto do snapshot)",{lastLocalTurnIdx:le.turnIdx,currentLocalTurnIdx:g,remoteTurnIdx:H.turnIdx}):(x(H.turnIdx),console.log("[App] SYNC - Sincronizando turnIdx",{local:g,remote:H.turnIdx}));else le&&H.turnIdx===le.turnIdx&&le.turnIdx!==g?console.log("[App] SYNC -  IGNORANDO turnIdx remoto - tentando reverter para valor anterior (sem mudana recente, mantendo resto do snapshot)",{lastLocalTurnIdx:le.turnIdx,currentLocalTurnIdx:g,remoteTurnIdx:H.turnIdx}):(x(H.turnIdx),console.log("[App] SYNC - Sincronizando turnIdx",{local:g,remote:H.turnIdx}));if(Array.isArray(H.roundFlags)&&H.roundFlags.length>0&&_(q=>{const Y=H.roundFlags.map((mt,At)=>q[At]||!1||mt);for(;Y.length<q.length;)Y.push(q[Y.length]||!1);return console.log("[App] SYNC - roundFlags sincronizado:",Y.map((mt,At)=>{var Zt;return`${(Zt=c[At])==null?void 0:Zt.name}:${mt}`}).join(", ")),Y}),H.round!==h)if(le&&Ue-le.timestamp<3e3){const q=le.round!==h;f(q?Y=>{const mt=Math.max(Y,H.round);return mt>Y&&console.log("[App] SYNC - Rodada incrementada via sincronizao:",Y,"->",mt),mt}:H.round)}else f(q=>Math.max(q,H.round));const Ce=c,Dt=H.players.map(q=>{const Y=Ce.find(At=>At.id===q.id);if(!Y)return q;if(String(q.id)===String(i)){const At=Number(Y.clients||0),Zt=Number(q.clients||0),Wn=Number(Y.vendedoresComuns||0),Zn=Number(q.vendedoresComuns||0),er=Number(Y.fieldSales||0),Dn=Number(q.fieldSales||0),tr=Number(Y.insideSales||0),vr=Number(q.insideSales||0);return At>Zt||Wn>Zn||er>Dn||tr>vr||Y.mixProdutos&&Y.mixProdutos!==q.mixProdutos&&Y.mixProdutos!=="D"||Y.erpLevel&&Y.erpLevel!==q.erpLevel&&Y.erpLevel!=="D"?(console.log("[App] SYNC - Detectadas compras locais, preservando estado local completo",{localClients:At,remoteClients:Zt,localVendedores:Wn,remoteVendedores:Zn}),{...Y,pos:q.pos,bankrupt:q.bankrupt??Y.bankrupt,az:Y.az||q.az||0,am:Y.am||q.am||0,rox:Y.rox||q.rox||0,trainingsByVendor:Y.trainingsByVendor||q.trainingsByVendor||{},onboarding:Y.onboarding||q.onboarding||!1}):{...q,cash:Math.max(Number(Y.cash||0),Number(q.cash||0)),clients:Math.max(At,Zt),mixProdutos:Y.mixProdutos??q.mixProdutos,erpLevel:Y.erpLevel??q.erpLevel,vendedoresComuns:Math.max(Wn,Zn),fieldSales:Math.max(er,Dn),insideSales:Math.max(tr,vr),gestores:Math.max(Number(Y.gestores??Y.gestoresComerciais??Y.managers??0),Number(q.gestores??q.gestoresComerciais??q.managers??0)),gestoresComerciais:Math.max(Number(Y.gestoresComerciais??Y.gestores??Y.managers??0),Number(q.gestoresComerciais??q.gestores??q.managers??0)),managers:Math.max(Number(Y.managers??Y.gestores??Y.gestoresComerciais??0),Number(q.managers??q.gestores??q.gestoresComerciais??0)),bens:Math.max(Number(Y.bens||0),Number(q.bens||0)),manutencao:Y.manutencao??q.manutencao,loanPending:Y.loanPending??q.loanPending,az:Y.az||q.az||0,am:Y.am||q.am||0,rox:Y.rox||q.rox||0,trainingsByVendor:Y.trainingsByVendor||q.trainingsByVendor||{},onboarding:Y.onboarding||q.onboarding||!1}}return{...q,az:Y.az||q.az||0,am:Y.am||q.am||0,rox:Y.rox||q.rox||0,trainingsByVendor:Y.trainingsByVendor||q.trainingsByVendor||{},onboarding:Y.onboarding||q.onboarding||!1}});d(Dt),console.log("[App] SYNC aplicado - novo turnIdx:",H.turnIdx),console.log("[App] SYNC - jogador da vez:",($=Dt[H.turnIdx])==null?void 0:$.name,"id:",(ie=Dt[H.turnIdx])==null?void 0:ie.id),console.log("[App] SYNC -  minha vez?",String((W=Dt[H.turnIdx])==null?void 0:W.id)===String(i)),m(q=>q||!!H.gameOver),w(q=>(p||H.gameOver)&&q&&!H.winner?q:H.winner??q),H.gameOver===!0&&console.log(`[App] [ENDGAME] estado remoto aplicado: gameOver=true winner=${((Q=H.winner)==null?void 0:Q.name)??H.winner??"N/A"}`)}}},F.current=de,()=>de.close()}catch(de){console.warn("[App] BroadcastChannel init failed:",de)}},[te,o,t]),k.useEffect(()=>{const N=async()=>{if(console.log(`[App] handleLeaveRoom chamado - fase: ${t}, currentLobbyId: ${n}, myUid: ${i}`),(t==="lobbies"||t==="playersLobby"||t==="game")&&n&&i)try{console.log(`[App] Saindo da sala ${n} na fase ${t}`),await xl({roomCode:n,playerId:i})}catch(oe){console.warn("[App] Erro ao sair da sala:",oe)}else console.log("[App] No executando leaveRoom - condies no atendidas")},U=()=>{N()},de=()=>{N()};return window.addEventListener("beforeunload",U),window.addEventListener("pagehide",de),()=>{window.removeEventListener("beforeunload",U),window.removeEventListener("pagehide",de)}},[t,n,i]);const re=N=>{var de,oe;const U=!!N;A(U);try{(oe=(de=F.current)==null?void 0:de.postMessage)==null||oe.call(de,{type:"TURNLOCK",value:U,source:o})}catch{}},P=tb(),$e=P==null?void 0:P.commit,cn=P==null?void 0:P.version,ce=P==null?void 0:P.state,Yt=k.useMemo(()=>{if(g<0||g>=c.length)return console.warn("[App] isMyTurn - turnIdx invlido:",g,"players.length:",c.length),!1;const N=c[g];if(!N)return console.log("[App] isMyTurn - owner no encontrado, turnIdx:",g,"players.length:",c.length),!1;if(N.bankrupt)return console.log("[App] isMyTurn - owner est falido:",N.name),!1;const U=N.id!=null&&String(N.id)===String(i);return console.log("[App] isMyTurn - owner:",N.name,"id:",N.id,"myUid:",i,"isMine:",U),U},[g,c,i]);he.useRef(null);const Xe=he.useRef(null),Oe=he.useRef(0),vn=he.useRef(0),it=he.useRef(0),Qt=he.useRef(null);he.useEffect(()=>{Qt.current||(Qt.current=JSON.parse(JSON.stringify(c)),console.log("[App] baseline capturado via useEffect:",Qt.current.length,"players"))},[c]),he.useEffect(()=>{const N=Xe.current,U=!N||N.turnIdx!==g,de=!N||N.round!==h,oe=!N||JSON.stringify(N.players)!==JSON.stringify(c);if(U||de||oe){const H=Date.now();(N?H-N.timestamp:1/0)>100?(Xe.current={players:c,turnIdx:g,round:h,timestamp:H},U&&console.log("[App] lastLocalStateRef atualizado via useEffect - turnIdx mudou:",N==null?void 0:N.turnIdx,"->",g)):Xe.current={...Xe.current,players:c,turnIdx:g,round:h}}},[c,g,h]),k.useEffect(()=>{var W;if(!(P!=null&&P.enabled)||!(P!=null&&P.ready)||!ce)return;if(typeof cn=="number"){if(cn<=it.current)return;it.current=cn}const N=typeof ce.stateVersion=="number"?ce.stateVersion:0,U=typeof ce.updatedAt=="number"?ce.updatedAt:0,de=Date.now(),oe=Xe.current;if(N>0&&N<vn.current){console.log("[NET]  REJEITADO - stateVersion remoto menor que aceito:",{remote:N,accepted:vn.current});return}if(oe&&oe.timestamp&&U>0){const Q=oe.timestamp-U;if(Q>0&&Q<5e3){console.log("[NET]  REJEITADO - estado remoto mais antigo que mudana local recente:",{remoteUpdatedAt:new Date(U).toISOString(),localTimestamp:new Date(oe.timestamp).toISOString(),timeDiff:Q+"ms"});return}}if(oe&&oe.timestamp){const Q=de-oe.timestamp;if(Q<5e3&&N<=oe.version){console.log("[NET]  REJEITADO - mudana local recente e verso remota no  maior:",{timeSinceLocalChange:Q+"ms",localVersion:oe.version,remoteVersion:N});return}}const H=Array.isArray(ce.players)?ce.players:null,$=Number.isInteger(ce.turnIdx)?ce.turnIdx:null,ie=Number.isInteger(ce.round)?ce.round:null;if(H&&(N>((oe==null?void 0:oe.version)||0)||!oe||de-(oe.timestamp||0)>=3e3?(d(H),Qt.current=JSON.parse(JSON.stringify(H))):console.log("[NET]  IGNORANDO players remoto - mudana local muito recente")),$!==null&&x($),ie!==null){const Q=ie===1&&($===0||$===null)&&Array.isArray(H)&&H.length>0&&H.every(ue=>Number((ue==null?void 0:ue.pos)??0)===0)&&(ce.gameOver===!1||ce.gameOver==null);f(ue=>Q?1:Math.max(ue,ie))}if(ce.roundFlags!==void 0){if(Array.isArray(ce.roundFlags))_(ce.roundFlags),console.log("[NET] applied remote includes roundFlags?",!0,"length:",ce.roundFlags.length);else if(typeof ce.roundFlags=="object"){const Q=Object.values(ce.roundFlags);_(Q),console.log("[NET] applied remote includes roundFlags?",!0,"converted from object, length:",Q.length)}}typeof ce.turnLock=="boolean"&&(A(ce.turnLock),ce.turnLock&&!Ee.current?Ee.current=Date.now():ce.turnLock||(Ee.current=null),ce.turnLock&&ce.lockOwner&&console.log("[LOCK] bloqueado: turnLockBroadcast=true lockOwner=",ce.lockOwner,"myId=",i)),ce.lockOwner!==void 0&&(I(ce.lockOwner),Xe.current&&(Xe.current.lockOwner=ce.lockOwner),console.log("[NET] applied remote includes lockOwner?",!0,"value:",ce.lockOwner)),He.current=Date.now(),m(Q=>Q||!!ce.gameOver),w(Q=>(p||ce.gameOver)&&Q&&!ce.winner?Q:ce.winner??Q),ce.gameOver===!0&&console.log(`[App] [ENDGAME] estado remoto aplicado: gameOver=true winner=${((W=ce.winner)==null?void 0:W.name)??ce.winner??"N/A"}`),N>0&&(vn.current=Math.max(vn.current,N)),console.log("[NET] applied remote v=%d stateVersion=%d updatedAt=%s",cn,N,U>0?new Date(U).toISOString():"N/A")},[cn,ce,P==null?void 0:P.enabled,P==null?void 0:P.ready]),k.useEffect(()=>{if(!v){Ee.current=null;return}Ee.current||(Ee.current=Date.now());const N=setInterval(()=>{const U=Date.now(),de=Ee.current?U-Ee.current:0,oe=c[g],H=oe&&String(oe.id)===String(i),$=Yt&&H,ie=O===i;de>8e3&&$&&!ie&&O!=null&&(console.warn("[LOCK-WATCHDOG] stole lock - turnLock travado por",de,"ms, liberando...",{isMyTurn:$,lockOwner:O,myUid:i}),Vr({turnLock:!1,lockOwner:i}),re(!1),I(i),Ee.current=null)},1e3);return()=>clearInterval(N)},[v,Yt,g,c,O,i,$e]);async function Vr(N){if(typeof $e=="function")try{await $e(U=>{const de=U||{},oe=N||{};if(oe.players&&Array.isArray(oe.players)){const H=Qt.current||de.players||[],$=de.players||[],ie=oe.players,W=new Map(H.map(Ce=>[String(Ce==null?void 0:Ce.id),Ce])),Q=new Map($.map(Ce=>[String(Ce==null?void 0:Ce.id),Ce])),ue=new Map(ie.map(Ce=>[String(Ce==null?void 0:Ce.id),Ce])),Je=[],Me=new Set([...W.keys(),...Q.keys(),...ue.keys()]);for(const Ce of Me){const Dt=W.get(Ce),q=Q.get(Ce),Y=ue.get(Ce);Dt&&Y&&JSON.stringify(Dt)!==JSON.stringify(Y)&&Y?Je.push(u(Y)):q?Je.push(u(q)):Y&&Je.push(u(Y))}const Ue=[],le=ie.map(Ce=>String(Ce==null?void 0:Ce.id));for(const Ce of le){const Dt=Je.find(q=>String(q==null?void 0:q.id)===Ce);Dt&&Ue.push(Dt)}for(const Ce of Je)le.includes(String(Ce==null?void 0:Ce.id))||Ue.push(Ce);return Qt.current=null,{...de,...oe,players:Ue.length>0?Ue:ie}}return{...de,...oe}})}catch(U){console.warn("[NET] commit failed:",(U==null?void 0:U.message)||U),Qt.current=null}}function Ma(N,U,de,oe=p,H=y,$={}){var Zt,Wn,Zn,er,Dn,tr;Oe.current=Oe.current+1;const ie=Oe.current,W=$.roundFlags!==void 0?$.roundFlags:b,Q=$.turnLock!==void 0?$.turnLock:v,ue=((Zt=Xe.current)==null?void 0:Zt.lockOwner)??null,Je=$.lockOwner!==void 0?$.lockOwner:ue,Me=$.gameOver!==void 0?$.gameOver:oe,le=!!p||!!((Wn=Xe.current)!=null&&Wn.gameOver)?!0:!!Me,Ce=$.winner!==void 0?$.winner:H,Dt=y??((Zn=Xe.current)==null?void 0:Zn.winner)??null,q=le?Ce??Dt:Ce,Y=$.round!==void 0?$.round:de,mt=Math.max(Number(Y||1),Number(h||1),Number(((er=Xe.current)==null?void 0:er.round)||1)),At=Date.now();Xe.current={players:N,turnIdx:U,round:mt,gameOver:le,winner:q,lockOwner:Je,timestamp:At,version:ie,stateVersion:ie,updatedAt:At,updatedBy:i},vn.current=ie,console.log("[App] broadcastState - verso:",ie,"turnIdx:",U,"round(next):",de,"round(safe):",mt,"timestamp:",At,"updatedBy:",i),Object.keys($).length>0&&console.log("[NET] commit patch keys:",Object.keys($).join(", ")),Qt.current||(Qt.current=JSON.parse(JSON.stringify(c)),console.log("[App] broadcastState - baseline capturado (fallback):",Qt.current.length,"players")),Vr({players:N,turnIdx:U,round:mt,roundFlags:W,turnLock:Q,lockOwner:Je,gameOver:le,winner:q,stateVersion:ie,updatedAt:At,updatedBy:i});try{(tr=(Dn=F.current)==null?void 0:Dn.postMessage)==null||tr.call(Dn,{type:"SYNC",version:ie,players:N,turnIdx:U,round:mt,roundFlags:W,turnLock:Q,lockOwner:Je,gameOver:le,winner:q,source:o,timestamp:At})}catch(vr){console.warn("[App] broadcastState failed:",vr)}}function vt(N){var U,de;Vr({players:N,turnIdx:0,round:1});try{(de=(U=F.current)==null?void 0:U.postMessage)==null||de.call(U,{type:"START",players:N,source:o})}catch(oe){console.warn("[App] broadcastStart failed:",oe)}}const J=c[g];k.useEffect(()=>{t==="game"&&Fx(c,g,h,p,y,"Game State Update")},[c,g,h,p,y,t]),k.useEffect(()=>{const N=c.find(tt);if(!N)return;const{cap:U,inAtt:de}=ha(N);R(oe=>({...oe,cash:N.cash,possibAt:U,clientsAt:de,name:N.name,color:N.color}))},[c,tt]);const Ke=k.useMemo(()=>{const N=c.find(tt)||c[0]||{},U=$a(N),de=Ia(N),{cap:oe,inAtt:H}=ha(N),$=String(N.erpLevel||"D").toUpperCase(),ie=Number(N.gestores??N.gestoresComerciais??N.managers??0);return console.log("[App] Totals recalculado - me:",N.name,"clients:",N.clients,"faturamento:",U,"manutencao:",de,"vendedoresComuns:",N.vendedoresComuns,"fieldSales:",N.fieldSales,"insideSales:",N.insideSales),zx(N,"HUD Totals"),{faturamento:U,manutencao:de,emprestimos:N.loanPending&&!N.loanPending.charged?Number(N.loanPending.amount||0):0,vendedoresComuns:N.vendedoresComuns||0,fieldSales:N.fieldSales||0,insideSales:N.insideSales||0,mixProdutos:N.mixProdutos||"D",bens:N.bens??0,erpSistemas:$,clientes:N.clients||0,onboarding:!!N.onboarding,az:N.az||0,am:N.am||0,rox:N.rox||0,gestores:ie,gestoresComerciais:ie,possibAt:oe,clientsAt:H}},[c,tt]),[Ie,Le]=k.useState(!1),{onAction:dn,modalLocks:_t}=eb({players:c,setPlayers:d,round:h,setRound:f,turnIdx:g,setTurnIdx:x,roundFlags:b,setRoundFlags:_,isMyTurn:Yt,isMine:tt,myUid:i,meId:o,myCash:G,current:J,broadcastState:Ma,appendLog:T,turnLock:v,setTurnLockBroadcast:re,gameOver:p,setGameOver:m,winner:y,setWinner:w,setShowBankruptOverlay:Le});if(t==="start")return a.jsx(ax,{onEnter:N=>{const U=ao(N||"Jogador");d([u({id:o,name:U,cash:18e3,pos:0,color:"#ffd54f",bens:4e3})]),f(1),x(0),m(!1),w(null),_(new Array(1).fill(!1)),e("lobbies"),R(de=>({...de,name:U})),S([`Bem-vindo, ${U}!`])}});if(t==="lobbies")return a.jsx(vx,{onEnterRoom:N=>{var U;r(N),(U=window.__setRoomCode)==null||U.call(window,N);try{localStorage.setItem("sg:lastRoomName",String(N));const de=new URL(window.location.href);de.searchParams.set("room",String(N)),history.replaceState(null,"",de.toString())}catch{}e("playersLobby")}});if(t==="playersLobby")return a.jsx(xx,{lobbyId:n,onBack:()=>{var N;(N=window.__setRoomCode)==null||N.call(window,null),e("lobbies")},onStartGame:N=>{var H;const U=(N==null?void 0:N.lobbyName)||((H=N==null?void 0:N.lobby)==null?void 0:H.name)||(N==null?void 0:N.name)||n||"sala-demo";try{localStorage.setItem("sg:lastRoomName",String(U));const $=new URL(window.location.href);if($.searchParams.set("room",String(U)),history.replaceState(null,"",$.toString()),!sessionStorage.getItem("sg:room-reloaded")){sessionStorage.setItem("sg:room-reloaded","1"),location.reload();return}}catch{}const oe=(Array.isArray(N)?N:(N==null?void 0:N.players)??(N==null?void 0:N.lobbyPlayers)??[]).map(($,ie)=>u({id:String($.id??$.player_id),name:$.name??$.player_name,cash:18e3,pos:0,bens:4e3,color:["#ffd54f","#90caf9","#a5d6a7","#ffab91"][ie%4]}));if(oe.length!==0){try{const $=oe.find(ie=>String(ie.name||"").trim().toLowerCase()===String(s||"").trim().toLowerCase());$!=null&&$.id&&l(String($.id))}catch{}d(oe),x(0),f(1),_(new Array(oe.length).fill(!1)),m(!1),w(null),R($=>{var W,Q;const ie=oe.find(tt);return{...$,name:(ie==null?void 0:ie.name)||((W=oe[0])==null?void 0:W.name)||"Jogador",color:(ie==null?void 0:ie.color)||((Q=oe[0])==null?void 0:Q.color)||"#6c5ce7",cash:(ie==null?void 0:ie.cash)??18e3,possibAt:0,clientsAt:0}}),S(["Jogo iniciado!"]),vt(oe),e("game")}}});const Xt=c[g],ft=(Xt==null?void 0:Xt.bankrupt)===!0,xn=Xt&&String(Xt.id)===String(i),Nn=h===5&&((_e=c[g])==null?void 0:_e.waitingAtRevenue),z=O==null||O===i,C=Yt&&xn&&_t===0&&!v&&z&&!ft&&!p&&!Nn;return console.log("[App] controlsCanRoll - isMyTurn:",Yt,"isCurrentPlayerMe:",xn,"modalLocks:",_t,"turnLock:",v,"lockOwner:",O,"lockOwnerOk:",z,"isBankrupt:",ft,"gameOver:",p,"isWaitingRevenue:",Nn,"result:",C),a.jsxs("div",{className:"page",children:[a.jsxs("header",{className:"topbar",children:[a.jsxs("div",{className:"status",style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[a.jsx("span",{style:{width:18,height:18,borderRadius:"50%",border:"2px solid rgba(255,255,255,.9)",boxShadow:"0 0 0 2px rgba(0,0,0,.25)",background:E.color}}),a.jsxs("span",{style:{background:"#1f2430",border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:"4px 10px",fontWeight:800},children:[" ",E.name]}),a.jsxs("span",{children:["Possib. Atendimento: ",a.jsx("b",{children:E.possibAt??0})]}),a.jsxs("span",{children:["Clientes em Atendimento: ",a.jsx("b",{children:E.clientsAt??0})]}),a.jsx(Vx,{players:c,turnIdx:g,round:h,gameOver:p,winner:y})]}),a.jsxs("div",{className:"status",style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[a.jsxs("span",{children:["Rodada: ",h]}),a.jsxs("span",{className:"money",children:[" $ ",Number(G).toLocaleString()]})]})]}),a.jsxs("main",{className:"content",children:[a.jsx("div",{className:"boardWrap",children:a.jsx(Cx,{players:c,turnIdx:g,onMeHud:R})}),a.jsxs("aside",{className:"side",children:[a.jsx(Rx,{totals:Ke,players:c}),a.jsxs("div",{className:"controlsSticky",children:[a.jsx(Nx,{onAction:N=>{dn(N)},current:J,isMyTurn:C}),a.jsx("div",{style:{marginTop:10},children:a.jsx("button",{className:"btn dark",onClick:async()=>{var N;if(n&&i)try{await xl({roomCode:n,playerId:i})}catch(U){console.warn("[App] Erro ao sair da sala:",U)}(N=window.__setRoomCode)==null||N.call(window,null),e("lobbies")},children:"Sair para Lobbies"})})]}),p&&a.jsx(Dx,{players:c,onExit:async()=>{var N;if(n&&i)try{await xl({roomCode:n,playerId:i})}catch(U){console.warn("[App] Erro ao sair da sala:",U)}(N=window.__setRoomCode)==null||N.call(window,null),e("lobbies")},onRestart:()=>{const N=c.map(U=>u({...U,cash:18e3,bens:4e3,pos:0}));d(N),x(0),f(1),_(new Array(N.length).fill(!1)),S(["Novo jogo iniciado!"]),m(!1),w(null)}})]})]}),a.jsx("footer",{className:"foot",children:a.jsxs("small",{children:["Desenvolvido por ",a.jsx("a",{href:"https://www.tironitech.com",target:"_blank",rel:"noreferrer",children:"tironitech.com"})]})}),Ie&&a.jsx(Tx,{})]})}function ob(){const e=new URLSearchParams(window.location.search).get("room");return e&&String(e).trim()||null}function sb(){const[t,e]=he.useState(ob());return he.useEffect(()=>(window.__setRoomCode=n=>{const r=String(n||"").trim()||null;e(r);const o=new URL(window.location.href);r?o.searchParams.set("room",r):o.searchParams.delete("room"),window.history.replaceState({},"",o)},()=>{delete window.__setRoomCode}),[]),he.useEffect(()=>(window.exportLogs=()=>{const n=lm(),r=new Blob([n.text],{type:"text/plain;charset=utf-8"}),o=URL.createObjectURL(r),s=document.createElement("a");return s.href=o,s.download=`debug-logs-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`,s.click(),URL.revokeObjectURL(o),console.log(" Logs exportados! Arquivo .txt baixado."),n},window.getLogsText=()=>Mx(),window.getLogsJSON=()=>Bx(),window.getLogStats=()=>Tu(),window.toggleLogCapture=()=>(Yn.enabled?(Yn.disable(),console.log(" Captura de logs DESATIVADA")):(Yn.enable(),console.log(" Captura de logs ATIVADA")),Yn.enabled),console.log("%c FUNES DE EXPORT DE LOGS DISPONVEIS:","color: #4CAF50; font-weight: bold; font-size: 14px"),console.log("%cexportLogs()","color: #2196F3; font-weight: bold","- Exporta logs completos (baixa arquivo .txt)"),console.log("%cgetLogsText()","color: #2196F3; font-weight: bold","- Retorna logs como string de texto"),console.log("%cgetLogsJSON()","color: #2196F3; font-weight: bold","- Retorna logs como objeto JSON"),console.log("%cgetLogStats()","color: #2196F3; font-weight: bold","- Retorna estatsticas dos logs"),console.log("%ctoggleLogCapture()","color: #2196F3; font-weight: bold","- Ativa/desativa captura de logs"),()=>{delete window.exportLogs,delete window.getLogsText,delete window.getLogsJSON,delete window.getLogStats,delete window.toggleLogCapture}),[]),a.jsx(Ax,{children:a.jsx(nb,{roomCode:t,children:a.jsx(rb,{})})})}kl.createRoot(document.getElementById("root")).render(a.jsx(he.StrictMode,{children:a.jsx(sb,{})}));
//# sourceMappingURL=index-Lv6FGE6O.js.map
