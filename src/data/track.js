// src/data/track.js
// Sistema base (apenas referência para conversões)
export const BASE_W = 800;
export const BASE_H = 700;

/** Pontos normalizados (nx, ny) – ORDEM = Casa 1 → Casa 55 */
export const TRACK_POINTS_NORM = [
  { "nx": 0.9278494291885221, "ny": 0.9008218764923216 },
  { "nx": 0.8188460351743289, "ny": 0.9120818357755046 },
  { "nx": 0.7145819191607529, "ny": 0.920124663834921 },
  { "nx": 0.6016291268127121, "ny": 0.920124663834921 },
  { "nx": 0.49104597346497997, "ny": 0.9233417950586875 },
  { "nx": 0.37888306078370876, "ny": 0.920124663834921 },
  { "nx": 0.24618327676643012, "ny": 0.9152989669992712 },
  { "nx": 0.21695772909595804, "ny": 0.7994822429436751 },
  { "nx": 0.1853625424251774, "ny": 0.7270967904089275 },
  { "nx": 0.1340203640851589, "ny": 0.6354085505315806 },
  { "nx": 0.12851782363977485, "ny": 0.5145797598627787 },
  { "nx": 0.12664165103189493, "ny": 0.37392795883361923 },
  { "nx": 0.05347091932457786, "ny": 0.30017152658662094 },
  { "nx": 0.051594746716697934, "ny": 0.20240137221269297 },
  { "nx": 0.14540337711069418, "ny": 0.12006861063464837 },
  { "nx": 0.23921200750469043, "ny": 0.11663807890222985 },
  { "nx": 0.3771106941838649, "ny": 0.11663807890222985 },
  { "nx": 0.5037523452157598, "ny": 0.12006861063464837 },
  { "nx": 0.5975609756097561, "ny": 0.1320754716981132 },
  { "nx": 0.5984990619136961, "ny": 0.24356775300171526 },
  { "nx": 0.5065666041275797, "ny": 0.2692967409948542 },
  { "nx": 0.398686679174484, "ny": 0.27101200686106347 },
  { "nx": 0.28893058161350843, "ny": 0.27101200686106347 },
  { "nx": 0.2373358348968105, "ny": 0.3687821612349914 },
  { "nx": 0.23921200750469043, "ny": 0.48027444253859347 },
  { "nx": 0.24202626641651032, "ny": 0.5660377358490566 },
  { "nx": 0.26454033771106944, "ny": 0.6895368782161235 },
  { "nx": 0.3330206378986867, "ny": 0.6946826758147513 },
  { "nx": 0.35647279549718575, "ny": 0.5831903945111492 },
  { "nx": 0.35647279549718575, "ny": 0.4716981132075472 },
  { "nx": 0.3818011257035647, "ny": 0.37735849056603776 },
  { "nx": 0.5225140712945591, "ny": 0.3653516295025729 },
  { "nx": 0.6238273921200751, "ny": 0.3687821612349914 },
  { "nx": 0.7223264540337712, "ny": 0.40308747855917665 },
  { "nx": 0.6613508442776735, "ny": 0.5197255574614065 },
  { "nx": 0.5300187617260788, "ny": 0.5025728987993139 },
  { "nx": 0.4427767354596623, "ny": 0.5694682675814752 },
  { "nx": 0.4896810506566604, "ny": 0.6861063464837049 },
  { "nx": 0.6163227016885553, "ny": 0.6861063464837049 },
  { "nx": 0.724202626641651, "ny": 0.6861063464837049 },
  { "nx": 0.8273921200750469, "ny": 0.660377358490566 },
  { "nx": 0.8395872420262664, "ny": 0.5368782161234992 },
  { "nx": 0.8395872420262664, "ny": 0.4339622641509434 },
  { "nx": 0.8283302063789869, "ny": 0.313893653516295 },
  { "nx": 0.7176360225140713, "ny": 0.30017152658662094 },
  { "nx": 0.6876172607879925, "ny": 0.22298456260720412 },
  { "nx": 0.698874296435272, "ny": 0.1457975986277873 },
  { "nx": 0.8020637898686679, "ny": 0.11663807890222985 },
  { "nx": 0.8958724202626641, "ny": 0.11663807890222985 },
  { "nx": 0.9446529080675422, "ny": 0.21783876500857632 },
  { "nx": 0.9446529080675422, "ny": 0.3293310463121784 },
  { "nx": 0.9380863039399625, "ny": 0.45797598627787306 },
  { "nx": 0.9409005628517824, "ny": 0.5711835334476844 },
  { "nx": 0.950281425891182, "ny": 0.6723842195540308 },
  { "nx": 0.9540337711069419, "ny": 0.7804459691252144 }
];

export const TRACK_LEN = TRACK_POINTS_NORM.length;

/** Converte um ponto normalizado para pixels no tamanho atual da board */
export function scalePoint(norm, w, h) {
  return { x: norm.nx * w, y: norm.ny * h };
}

/** (Legado) Array em pixels, caso algum código antigo ainda importe { POINTS } */
export const POINTS = TRACK_POINTS_NORM.map(p => [p.nx * BASE_W, p.ny * BASE_H]);
